!function(){try{var n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},e=Error().stack;e&&(n._sentryDebugIds=n._sentryDebugIds||{},n._sentryDebugIds[e]="56288312-2539-4d47-b986-7c796e4ffb19",n._sentryDebugIdIdentifier="sentry-dbid-56288312-2539-4d47-b986-7c796e4ffb19")}catch(n){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"d103cf55"};"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6190],{58378:function(n,e,r){r.d(e,{Fh:function(){return m},IN:function(){return D},s7:function(){return _}});var t=r(45903),i=r(93295),o=r(23982),u=r(19762),a=r(77393),c=r(72986);function s(){var n=(0,i._)(["\n  fragment HostingTierReplPowerUps on Repl {\n    powerUps {\n      __typename\n      ... on ReplPowerUpTypes {\n        hostingTier {\n          __typename\n          sku\n          methodOfPayment\n        }\n      }\n    }\n  }\n"]);return s=function(){return n},n}function l(){var n=(0,i._)(["\n  fragment HostingTierPowerUpCostDetails on PowerUpCostsType {\n    hostingTierE2Micro {\n      cyclesCostNow\n      cyclesCostRecurring\n      methodOfPayment\n      explanation\n    }\n    hostingTierE2Small {\n      cyclesCostNow\n      cyclesCostRecurring\n      methodOfPayment\n      explanation\n    }\n    hostingTierE2Medium {\n      cyclesCostNow\n      cyclesCostRecurring\n      methodOfPayment\n      explanation\n    }\n    hostingTierN1Custom1_4 {\n      cyclesCostNow\n      cyclesCostRecurring\n      methodOfPayment\n      explanation\n    }\n    hostingTierE2Standard2 {\n      cyclesCostNow\n      cyclesCostRecurring\n      methodOfPayment\n      explanation\n    }\n    hostingTierE2Standard4 {\n      cyclesCostNow\n      cyclesCostRecurring\n      methodOfPayment\n      explanation\n    }\n  }\n"]);return l=function(){return n},n}function d(){var n=(0,i._)(["\n  fragment HostingTierPowerUpCosts on Repl {\n    id\n    powerUpCosts {\n      __typename\n      ... on PowerUpCostsType {\n        ...HostingTierPowerUpCostDetails\n      }\n      ... on UnauthorizedError {\n        __typename\n        message\n      }\n    }\n  }\n  ","\n"]);return d=function(){return n},n}function p(){var n=(0,i._)(["\n  query HostingTierPowerUp($replId: String!) {\n    currentUser {\n      id\n    }\n    repl(id: $replId) {\n      __typename\n      ... on Repl {\n        id\n        owner {\n          __typename\n        }\n        ...HostingTierReplPowerUps\n        ...HostingTierPowerUpCosts\n      }\n    }\n  }\n  ","\n  ","\n"]);return p=function(){return n},n}function f(){var n=(0,i._)(["\n  mutation SetHostingTier($input: SetHostingTierInput!) {\n    setHostingTier(input: $input) {\n      __typename\n      ... on UserError {\n        message\n      }\n      ... on PaymentError {\n        message\n      }\n      ... on SetHostingTierResult {\n        repl {\n          ... on Repl {\n            ...HostingTierReplPowerUps\n            ...HostingTierPowerUpCosts\n          }\n        }\n        currentUser {\n          ...PowerUpMutationReturnFields\n        }\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"]);return f=function(){return n},n}var g={},m=(0,o.Ps)(s()),y=(0,o.Ps)(l()),h=(0,o.Ps)(d(),y),v=(0,o.Ps)(p(),m,h);function _(n){var e=(0,t._)({},g,n);return a.a(v,e)}var C=(0,o.Ps)(f(),m,h,u.E_);function D(n){var e=(0,t._)({},g,n);return c.D(C,e)}},63388:function(n,e,r){r.d(e,{BX:function(){return R},VR:function(){return S},hD:function(){return T}});var t,i=r(39698),o=r(45903),u=r(25e3),a=r(8182),c=r(29287),s=r(74833),l=r(56596),d=r(75582),p=r(88936),f=r(60427),g=r(95309),m=r(93918),y=r(15146),h=r(18514),v=r(5039),_=r(52089),C=r(20573),D=r(56335),b=r(67337),w=r(30983),S=(t={},(0,i._)(t,d.Fe.Suspended,{title:"Paused",color:c.TV.greyDefault,colorway:"grey",icon:(0,a.tZ)(D.Z,{})}),(0,i._)(t,d.Fe.UpdatingTier,{title:"Updating tier",color:c.TV.orangeStronger,colorway:"orange",icon:(0,a.tZ)(b.Z,{})}),(0,i._)(t,d.Fe.Suspending,{title:"Pausing",color:c.TV.orangeStronger,colorway:"orange",icon:(0,a.tZ)(b.Z,{})}),(0,i._)(t,d.Fe.Resuming,{title:"Resuming",color:c.TV.orangeStronger,colorway:"orange",icon:(0,a.tZ)(b.Z,{})}),(0,i._)(t,d.Fe.Pending,{title:"Provisioning",color:c.TV.orangeStronger,colorway:"orange",icon:(0,a.tZ)(b.Z,{})}),(0,i._)(t,d.Fe.Building,{title:"Building",color:c.TV.orangeStronger,colorway:"orange",icon:(0,a.tZ)(b.Z,{})}),(0,i._)(t,d.Fe.Running,{title:"Bundling",color:c.TV.orangeStronger,colorway:"orange",icon:(0,a.tZ)(b.Z,{})}),(0,i._)(t,d.Fe.Promoting,{title:"Promoting",color:c.TV.orangeStronger,colorway:"orange",icon:(0,a.tZ)(b.Z,{})}),(0,i._)(t,d.Fe.Failed,{title:"Failed",color:c.TV.accentNegativeDefault,colorway:"negative",icon:(0,a.tZ)(C.Z,{})}),(0,i._)(t,d.Fe.Success,{title:"Deployed",color:c.TV.accentPositiveDefault,colorway:"positive"}),t);function R(n){switch(n){case d.Fe.Building:case d.Fe.Promoting:case d.Fe.Running:case d.Fe.Pending:return"is deploying";case d.Fe.Resuming:return"is resuming";case d.Fe.Suspending:return"is pausing";case d.Fe.Failed:return"failed to deploy";case d.Fe.Success:return"deployed";case d.Fe.Suspended:return"paused";case d.Fe.UpdatingTier:return"is updating tier"}}var P=(0,m.X)({root:[c.l0.rowWithGap(0),c.l0.flex.shrink(1)],dot:[c.l0.width("8px"),c.l0.height("8px"),c.l0.borderRadius("full"),c.l0.flex.shrink(0),c.l0.pr(4)],name:[c.l0.color.foregroundDefault,c.l0.fontWeight.medium],item:[c.l0.rowWithGap(8),c.l0.pr(4),c.l0.align.center,c.l0.flex.growAndShrink(1)],itemMainText:[c.l0.flex.growAndShrink(1),c.l0.align.center],itemRight:[c.l0.textAlign.right],itemContent:[c.l0.rowWithGap(8),c.l0.flex.growAndShrink(1),c.l0.align.center]}),T=function(n){var e=n.onClick,r=(0,f.kW)(),t=(0,f.$y)();if(r===g.z.Loading||!t)return(0,a.tZ)(p.Z,{size:12});var i=t.status,m=(i in S?S[i]:{color:c.TV.greyDefault}).color;return(0,a.tZ)(l.G,{css:P.root,children:(0,a.BX)(l.G,{css:P.item,children:[(0,a.tZ)(l.G,{tag:"span",css:P.dot,style:{backgroundColor:m,boxShadow:"0 0 12px ".concat(m)}}),(0,a.tZ)(l.G,{css:P.itemMainText,children:(0,a.BX)(s.xv,{multiline:!1,children:[(0,a.tZ)("span",{css:P.name,children:t.user.displayName+" "}),R(i)+" ",!function(n){switch(n){case d.Fe.Building:case d.Fe.Promoting:case d.Fe.Running:case d.Fe.Pending:case d.Fe.Failed:case d.Fe.Success:return!0;case d.Fe.Resuming:case d.Fe.Suspending:case d.Fe.Suspended:case d.Fe.UpdatingTier:return!1}}(i)?null:(0,a.tZ)(w.u,{tooltip:(0,_.Z)(new Date(t.timeCreated),"MMMM do, Y 'at' h:m aa z"),maxWidth:250,children:function(n,e){return(0,a.tZ)("span",(0,u._)((0,o._)({},n),{ref:e,children:(0,v.Z)(new Date(t.timeCreated),Date.now(),{addSuffix:!0})}))}})]})}),(0,a.tZ)(l.G,{css:P.itemRight,children:(0,a.tZ)(y.hU,{alt:"View deploy logs",onClick:e,children:(0,a.tZ)(h.Z,{})})})]})})}},20708:function(n,e,r){r.d(e,{u:function(){return o}});var t=r(93295);function i(){var n=(0,t._)(["\n  fragment BuildStatusBadgeHostingDeployment on HostingDeployment {\n    id\n    currentBuild {\n      id\n      status\n      timeCreated\n      user {\n        id\n        displayName\n      }\n    }\n  }\n"]);return i=function(){return n},n}var o=(0,r(23982).Ps)(i())},92741:function(n,e,r){r.d(e,{P3:function(){return s},Q5:function(){return c},QO:function(){return d},SF:function(){return l},ZG:function(){return a}});var t=r(23026),i=r(3194),o=r(92635),u=r(2543),a=function(n){"use strict";(0,i._)(r,n);var e=(0,u._)(r);function r(){var n;return(0,t._)(this,r),n=e.apply(this,arguments),n.name="RunCommandNotFoundError",n.message="Could not find run command",n}return r}((0,o._)(Error)),c=function(n){"use strict";(0,i._)(r,n);var e=(0,u._)(r);function r(){var n;return(0,t._)(this,r),n=e.apply(this,arguments),n.name="SubdomainNotFoundError",n.message="Could not find subdomain",n}return r}((0,o._)(Error)),s=function(n){"use strict";(0,i._)(r,n);var e=(0,u._)(r);function r(){var n;return(0,t._)(this,r),n=e.apply(this,arguments),n.name="AppTypeFoundError",n.message="Could not find app type",n}return r}((0,o._)(Error)),l=function(n){"use strict";(0,i._)(r,n);var e=(0,u._)(r);function r(){var n;return(0,t._)(this,r),n=e.apply(this,arguments),n.name="PublicDirNotFoundError",n.message="Could not find public directory",n}return r}((0,o._)(Error)),d=function(n){"use strict";(0,i._)(r,n);var e=(0,u._)(r);function r(){var n;return(0,t._)(this,r),n=e.apply(this,arguments),n.name="ReplOfflineError",n.message="Repl is offline",n}return r}((0,o._)(Error))},60427:function(n,e,r){r.d(e,{jd:function(){return nP},CK:function(){return Q},My:function(){return q},bA:function(){return j},_U:function(){return nb},rm:function(){return nI},XA:function(){return nN},$y:function(){return np},ev:function(){return ny},Sl:function(){return nc},hn:function(){return nt},pn:function(){return ng},kW:function(){return ne},am:function(){return na},H7:function(){return no},v5:function(){return Y},XZ:function(){return K},gg:function(){return nO},l9:function(){return ns},U:function(){return nw},m8:function(){return nT},FN:function(){return nl},mF:function(){return nH}});var t,i,o,u=r(34142),a=r(45903),c=r(25e3),s=r(32477),l=r(87682),d=r(7444),p=r(50782),f=r(75582),g=r(64461),m=r(90234),y=r(43429),h=r(8668),v=r(14207),_=r(92741),C=r(65490),D=r(93295),b=r(23982),w=r(58378),S=r(4927),R=r(77393),P=r(66496),T=r(19441),F=r(72986);function E(){var n=(0,D._)(["\n  fragment DeploymentSessionHostingDeployment on HostingDeployment {\n    ...TargetHostingDeployment\n    currentBuild {\n      ...CurrentBuild2\n    }\n    inProgressBuild {\n      ...CurrentBuild2\n    }\n  }\n  ","\n  ","\n"]);return E=function(){return n},n}function N(){var n=(0,D._)(["\n  fragment DeploymentSessionRepl on Repl {\n    id\n    __typename\n    slug\n    lang {\n      id\n      displayName\n    }\n    config {\n      isVnc\n    }\n    source {\n      release {\n        repl {\n          title\n        }\n      }\n    }\n    owner {\n      __typename\n      ... on User {\n        id\n        username\n      }\n      ... on Team {\n        id\n        username\n      }\n    }\n    hostingDeployment {\n      ... on HostingDeployment {\n        ...DeploymentSessionHostingDeployment\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n    ...HostingTierReplPowerUps\n  }\n  ","\n  ","\n"]);return N=function(){return n},n}function U(){var n=(0,D._)(["\n  query DeploymentSession($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        ...DeploymentSessionRepl\n      }\n    }\n  }\n  ","\n"]);return U=function(){return n},n}function H(){var n=(0,D._)(["\n  subscription DeploymentSessionBuildDeployActionUpdates(\n    $input: HostingBuildDeployActionUpdatesInput!\n  ) {\n    hostingBuildDeployActionUpdates(input: $input) {\n      ... on HostingBuildDeployLogAction {\n        log\n      }\n      ... on HostingBuildDeployStatusAction {\n        status\n        message\n      }\n    }\n  }\n"]);return H=function(){return n},n}function x(){var n=(0,D._)(["\n  mutation DeploymentSessionDeployBuild($input: DeployHostingBuild2Input!) {\n    deployHostingBuild2(input: $input) {\n      ... on DeployHostingBuild2Result {\n        build {\n          ...CurrentBuild2\n        }\n        targetDeployment {\n          ...TargetHostingDeployment\n        }\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on TooManyRequestsError {\n        message\n      }\n    }\n  }\n  ","\n  ","\n"]);return x=function(){return n},n}function I(){var n=(0,D._)(["\n  mutation DeploymentSessionSendDeploymentLifecycleCommand(\n    $input: SendDeploymentLifecycleCommandInput!\n  ) {\n    sendDeploymentLifecycleCommand(input: $input) {\n      ... on SendDeploymentLifecycleCommandResult {\n        repl {\n          id\n          ...HostingTierReplPowerUps\n          hostingDeployment {\n            ... on HostingDeployment {\n              ...DeploymentSessionHostingDeployment\n            }\n          }\n        }\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n  ","\n  ","\n"]);return I=function(){return n},n}function O(){var n=(0,D._)(["\n  mutation DeploymentSessionCancelInProgressDeploymentsBuild(\n    $input: FailHostingBuildInput!\n  ) {\n    failHostingBuild(input: $input) {\n      ... on FailHostingBuildResult {\n        build {\n          ...CurrentBuild2\n        }\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n  ","\n"]);return O=function(){return n},n}var Z={},B=(0,b.Ps)(E(),S.uC,S.MX),$=(0,b.Ps)(N(),B,w.Fh),V=(0,b.Ps)(U(),$),k=(0,b.Ps)(H()),z=(0,b.Ps)(x(),S.MX,S.uC),A=(0,b.Ps)(I(),w.Fh,B),L=(0,b.Ps)(O(),S.MX);function J(){return(J=(0,u._)(function(n){var e,r,t,i,o,u,a,c,s,d,p;return(0,l.Jh)(this,function(l){switch(l.label){case 0:if(e=n.command,r=n.replId,t=n.buildId,i=n.machineConfigurationId,o=n.maxMachineInstances,!C.l)throw Error("expected apolloClient to be initialized");return[4,C.l.mutate({mutation:A,variables:{input:{command:e,replId:r,buildId:t,machineConfigurationId:i,maxMachineInstances:o}}})];case 1:if(null===(u=(s=l.sent()).errors)||void 0===u?void 0:u.length)throw Error(s.errors.map(function(n){return n.message}).join(", "));if((null===(c=s.data)||void 0===c?void 0:null===(a=c.sendDeploymentLifecycleCommand)||void 0===a?void 0:a.__typename)!=="SendDeploymentLifecycleCommandResult")throw Error((null===(p=s.data)||void 0===p?void 0:null===(d=p.sendDeploymentLifecycleCommand)||void 0===d?void 0:d.message)||"An unexpected error occurred while sending command. Please try again or contact support.");return[2]}})})).apply(this,arguments)}function M(){return(M=(0,u._)(function(n){var e,r,t,i,o,u,a,c;return(0,l.Jh)(this,function(s){switch(s.label){case 0:if(e=n.buildId,r=n.targetDeploymentId,!C.l)throw Error("expected apolloClient to be initialized");return[4,C.l.mutate({mutation:L,variables:{input:{buildId:e,targetDeploymentId:r}}})];case 1:if(null===(t=(u=s.sent()).errors)||void 0===t?void 0:t.length)throw Error(u.errors.map(function(n){return n.message}).join(", "));if((null===(o=u.data)||void 0===o?void 0:null===(i=o.failHostingBuild)||void 0===i?void 0:i.__typename)!=="FailHostingBuildResult")throw Error((null===(c=u.data)||void 0===c?void 0:null===(a=c.failHostingBuild)||void 0===a?void 0:a.message)||"An unexpected error occurred while trying to cancel. Please try again or contact support.");return[2]}})})).apply(this,arguments)}var X=r(64420),W=r(95309),G=r(52932),Q=(0,m.cn)({}),j=(0,m.cn)({}),q=(0,m.cn)({});function K(){return(0,X.Hg)(j)}function Y(){return(0,X.Hg)(q)}var nn=(0,m.cn)(W.z.Loading);function ne(){return(0,X.Hg)(nn)}var nr=(0,m.cn)(void 0);function nt(){return(0,X.Hg)(nr)}var ni=(0,m.cn)(void 0);function no(){return(0,X.Hg)(ni)}var nu=(0,m.cn)(void 0);function na(){return(0,X.Hg)(nu)}function nc(n){var e,r,t,i=(e=(0,a._)({},Z,{variables:{replId:n}}),R.a(V,e)),o=i.data,u=i.refetch,c=(null==o?void 0:o.repl.__typename)==="Repl"?o.repl:null,s=(null==c?void 0:c.powerUps.__typename)==="ReplPowerUpTypes"?c.powerUps:null,l=(null==c?void 0:null===(r=c.owner)||void 0===r?void 0:r.__typename)==="Team";return{hostingTier:null!==(t=null==s?void 0:s.hostingTier)&&void 0!==t?t:null,isTeamRepl:l,refetch:u}}function ns(n){return!!nc(n).isTeamRepl}function nl(n){return!!nc(n).hostingTier}var nd=(0,m.cn)(void 0);function np(){return(0,X.Hg)(nd)}var nf=(0,m.cn)(void 0);function ng(){return(0,X.Hg)(nf)}var nm=(0,m.cn)(void 0);function ny(){return(0,X.Hg)(nm)}var nh=(0,m.cn)(null,function(n,e){e(nr,void 0),e(ni,void 0),e(nd,void 0),e(nf,void 0),e(nn,W.z.Ready)}),nv=(0,m.cn)(null,function(n,e,r){var t,i,o="Repl"===r.repl.__typename?r.repl:null;if(o){e(nu,{id:o.lang.id,displayName:o.lang.displayName,isVnc:!!o.config.isVnc});var u=o.hostingDeployment;if(u){if("HostingDeployment"!==u.__typename)return e(nm,"Unexpected hosting deployment typename: ".concat(u.__typename));if(e(nr,u.id),e(nd,u.currentBuild),e(ni,u.replitAppSubdomain||(0,h.Jw)({replSlug:o.slug,username:null===(i=o.owner)||void 0===i?void 0:i.username})),u.inProgressBuild){e(nf,u.inProgressBuild),e(nn,W.z.Deploying);return}return void e(nn,(0,G.Zx)(u.currentBuild.status))}e(ni,(0,h.Jw)({replSlug:o.slug,username:null===(t=o.owner)||void 0===t?void 0:t.username})),e(nn,W.z.Ready)}});function n_(){var n,e=(0,X.$X)(nv),r=(0,X.$X)(nF);return(0,s._)((n=(0,a._)({},Z,{fetchPolicy:"no-cache",onCompleted:e,onError:function(n){r(n.message)}}),P.t(V,n)),1)[0]}var nC=(0,m.cn)(null,function(n,e,r){if("HostingBuildDeployStatusAction"===r.__typename){var t=n(nn),i=n(nf),o=n(nd),u=r.status;if(t===W.z.Deploying){if(!i){e(nF,"No deployment in progress found");return}e(nf,(0,g.Uy)(i,function(n){n.status=u})),u!==f.Fe.Success&&u!==f.Fe.Failed||(e(nf,void 0),u!==f.Fe.Success&&o||e(nd,(0,g.Uy)(i,function(n){n.status=u,n.hasImageTag=i.provider!==f.r4.Static&&u===f.Fe.Success})))}else if(t===W.z.ProcessingLifecycleCommand){if(!o){e(nF,"No current build found");return}e(nd,(0,g.Uy)(o,function(n){n.status=u}))}e(nn,(0,G.Zx)(u)),r.message&&u===f.Fe.Failed&&e(nF,r.message)}}),nD=(0,m.cn)(null);function nb(){return(0,X.Hg)(nD)}function nw(n){var e=(0,X.yL)(nD),r=(0,d.Z)(n);y.useEffect(function(){return e.subscribe(function(n){n&&r.current(n)})},[e,r])}var nS=(0,m.cn)(function(n){var e,r;switch(n(nn)){case W.z.Deploying:return null===(e=n(nf))||void 0===e?void 0:e.id;case W.z.ProcessingLifecycleCommand:return null===(r=n(nd))||void 0===r?void 0:r.id;default:return}}),nR=(0,m.cn)(null,(t=(0,u._)(function(n,e,r){var t;return(0,l.Jh)(this,function(n){return(t=r.data.data)&&(e(nC,t.hostingBuildDeployActionUpdates),e(nD,t.hostingBuildDeployActionUpdates)),[2]})}),function(n,e,r){return t.apply(this,arguments)}));function nP(n){var e,r,t,i,o,u,c;return e=n.replId,r=n_(),t=(0,X.$X)(nR),i=(0,X.$X)(nF),(0,y.useEffect)(function(){r({variables:{replId:e}})},[r,e]),u={variables:{input:{buildId:null!=(o=(0,X.Hg)(nS))?o:""}},skip:!o,onData:t,onError:function(n){i(n.message)}},c=(0,a._)({},Z,u),T.m(k,c),null}function nT(){var n=(0,p.Z)(),e=n_(),r=(0,X.$X)(nn);return y.useCallback(function(){return r(W.z.Loading),e({variables:{replId:n}})},[e,r,n])}var nF=(0,m.cn)(null,function(n,e,r){e(nm,r)}),nE=(0,m.cn)(null,function(n,e,r){var t,i=r.deployHostingBuild2;if(i){if("DeployHostingBuild2Result"!==i.__typename){e(nF,i.message);return}e(nf,i.build),e(nr,i.targetDeployment.id),e(ni,null!==(t=i.targetDeployment.replitAppSubdomain)&&void 0!==t?t:void 0),e(nn,W.z.Deploying)}});function nN(){var n,e,r=(0,p.Z)(),t=nt(),i=Y(),o=(0,X.Hg)(Q),c=K(),d=(0,s._)((n=(0,a._)({},Z,void 0),F.D(z,n)),1)[0],g=(0,X.$X)(nE),m=(0,X.$X)(nF),C=(0,X.$X)(nn),D=(0,X.XD)(nf),b=np();return y.useCallback((e=(0,u._)(function(n){var e,u,a,s,p,y,w,S,R,P,T,F,E,N,U;return(0,l.Jh)(this,function(l){switch(l.label){case 0:if(e=n.envVars,u=n.subdomain,a=n.machineConfigurationId,s=n.maxMachineInstances,p=n.config,y=n.machineJob,D())return m("Deployment already in progress"),[2];l.label=1;case 1:return l.trys.push([1,5,,6]),C(W.z.Preparing),[4,(0,v.$f)(i)];case 2:if(w=l.sent(),R=(S=p||w).buildCommand,P=S.runCommand,T=S.publicDir,F=S.ignorePorts,!(E=b?function(n){var e=n.provider,r=n.ignorePorts;switch(e){case f.r4.Static:return f.Vp.Static;case f.r4.CloudRun:return f.Vp.CloudRun;case f.r4.Cron:return f.Vp.Cron;default:return r?f.Vp.Worker:f.Vp.Server}}({provider:null==b?void 0:b.provider,ignorePorts:!!F}):S.appType))throw new _.P3;if(!u)throw new _.Q5;if(E===f.Vp.Static){if(!(0,h.Ar)(T))throw new _.SF}else if(!(0,h.Ar)(P))throw new _.ZG;return[4,(0,v.OD)({buildCommand:R,runCommand:P,appType:E,publicDir:T,ignorePorts:F},w,{dotReplit:i,fs:c,container:o})];case 3:return l.sent(),N=(0,G.oU)(E),[4,d({variables:{input:{replId:r,targetDeploymentId:t,targetMachineConfigurationId:a,maxMachineInstances:s,commands:{build:R,run:P||""},envVars:e,subdomain:u,provider:N,appType:E,context:"workspace",machineJob:y}},onCompleted:g})];case 4:return l.sent(),[3,6];case 5:throw U=l.sent(),C(W.z.Ready),U;case 6:return[2]}})}),function(n){return e.apply(this,arguments)}),[d,g,m,C,D,t,r,o,c,i])}var nU=(0,m.cn)(null,(i=(0,u._)(function(n,e,r){var t,i,o,u,s,d,p,m;return(0,l.Jh)(this,function(l){switch(l.label){case 0:if(t=r.args,i=r.replId,o=void 0,(u=t.command)===f.Qc.UpdateMachineConfiguration){if(!(s=n(nd)))return e(nF,"No current build found"),[2];if(!t.machineConfigurationId)return e(nF,"No machine configuration found"),[2];(d=(0,G.Ti)(u))&&(e(nd,(0,g.Uy)(s,function(n){n.status=d})),e(nn,(0,G.Zx)(d)))}if(u===f.Qc.Resume||u===f.Qc.Suspend){if(!(p=n(nd)))return e(nF,"No current build found"),[2];o=p.id,(m=(0,G.Ti)(u))&&(e(nd,(0,g.Uy)(p,function(n){n.status=m})),e(nn,(0,G.Zx)(m)))}l.label=1;case 1:return l.trys.push([1,3,,4]),[4,function(n){return J.apply(this,arguments)}((0,c._)((0,a._)({},t),{buildId:o,replId:i}))];case 2:return l.sent(),u===f.Qc.Destroy&&e(nh),[3,4];case 3:return e(nF,l.sent().message),[3,4];case 4:return[2]}})}),function(n,e,r){return i.apply(this,arguments)}));function nH(){var n,e=(0,p.Z)(),r=(0,X.$X)(nU);return y.useCallback((n=(0,u._)(function(n){return(0,l.Jh)(this,function(t){switch(t.label){case 0:return[4,r({replId:e,args:n})];case 1:return t.sent(),[2]}})}),function(e){return n.apply(this,arguments)}),[r,e])}var nx=(0,m.cn)(null,(o=(0,u._)(function(n,e){var r,t,i;return(0,l.Jh)(this,function(o){switch(o.label){case 0:if(!(r=n(nr)))return e(nF,"No deployment found"),[2];if(!(t=n(nf)))return e(nF,"No deployment in progress found"),[2];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,function(n){return M.apply(this,arguments)}({buildId:t.id,targetDeploymentId:r})];case 2:return o.sent(),[3,4];case 3:return e(nF,o.sent().message),[2];case 4:if(e(nf,void 0),e(nn,W.z.Ready),(i=n(nd))&&(i.status===f.Fe.Success||i.status===f.Fe.Failed))return[2];return e(nd,(0,g.Uy)(t,function(n){n.status=f.Fe.Failed})),[2]}})}),function(n,e){return o.apply(this,arguments)}));function nI(){return(0,X.$X)(nx)}function nO(){var n=na();return n?"nix"!==n.id&&"html"!==n.id?{isDeployableRepl:!1,reason:"You will need to upgrade your ".concat(n.displayName," Repl to a Nix template in order to deploy.")}:{isDeployableRepl:!0}:{isDeployableRepl:!1,reason:"Could not find repl language."}}},64420:function(n,e,r){r.d(e,{$X:function(){return d},Hg:function(){return s},XD:function(){return p},aT:function(){return a},yL:function(){return l}});var t=r(43429),i=r(71999),o=r(28999),u=r(66368),a=(0,t.createContext)(null);function c(){var n=(0,t.useContext)(a);if(!n)throw Error("Expected store in context");return n}function s(n){return(0,i.Dv)(n,{store:c()})}function l(n){return(0,u.b)(n,c())}var d=function(n){return(0,i.b9)(n,{store:c()})};function p(n){return(0,o.lV)((0,t.useCallback)(function(e){return e(n)},[n]),{store:c()})}},95309:function(n,e,r){var t,i;r.d(e,{z:function(){return t}}),(i=t||(t={})).Loading="Loading",i.Ready="Ready",i.Preparing="Preparing",i.Deploying="Deploying",i.ProcessingLifecycleCommand="ProcessingLifecycleCommand",i.Suspended="Paused"},52932:function(n,e,r){r.d(e,{Ti:function(){return a},Zx:function(){return u},oU:function(){return c}});var t=r(95309),i=r(75582),o=r(40028);function u(n){switch(n){case i.Fe.Failed:case i.Fe.Success:return t.z.Ready;case i.Fe.Suspended:return t.z.Suspended;case i.Fe.Suspending:case i.Fe.Resuming:case i.Fe.UpdatingTier:return t.z.ProcessingLifecycleCommand;case i.Fe.Pending:case i.Fe.Building:case i.Fe.Running:case i.Fe.Promoting:return t.z.Deploying;default:(0,o.Z)(n)}}function a(n){switch(n){case i.Qc.Destroy:return null;case i.Qc.UpdateMachineConfiguration:return i.Fe.UpdatingTier;case i.Qc.Suspend:return i.Fe.Suspending;case i.Qc.Resume:return i.Fe.Resuming;default:(0,o.Z)(n)}}function c(n){switch(n){case i.Vp.Cron:return i.r4.Cron;case i.Vp.CloudRun:return i.r4.CloudRun;case i.Vp.Worker:case i.Vp.Server:return i.r4.Gce;case i.Vp.Static:return i.r4.Static;default:(0,o.Z)(n)}}},14207:function(n,e,r){r.d(e,{$f:function(){return _},OD:function(){return b},xk:function(){return y}});var t=r(34142),i=r(32477),o=r(87682),u=r(75159),a=r(58962),c=r(92741),s=r(75582),l=r(28268),d=r(8668),p=r(55552),f=r(37229),g=r(59808),m=r(30084);function y(n){return h.apply(this,arguments)}function h(){return(h=(0,t._)(function(n){var e;return(0,o.Jh)(this,function(r){switch(r.label){case 0:return[4,n.readFile(".env")];case 1:if((e=r.sent()).error===m.Df.NotFound)return[2,[]];if(e.error)throw e.error;return[2,Object.entries(l.Z.parse(e.content.toString())).map(function(n){var e=(0,i._)(n,2);return{name:e[0],value:e[1]}})]}})})).apply(this,arguments)}function v(){return(v=(0,t._)(function(n){var e,r,t;return(0,o.Jh)(this,function(i){switch(i.label){case 0:return[4,n.getConfig()];case 1:if(r=(e=i.sent()).config,(t=e.error)===g.Yt.NotFound)return[2];if(t)throw Error("Failed to get .replit config with Error: "+t);return[2,r]}})})).apply(this,arguments)}function _(n){return C.apply(this,arguments)}function C(){return(C=(0,t._)(function(n){var e,r,t,i,u,c,l,d,f,g,m,y,h;return(0,o.Jh)(this,function(o){switch(o.label){case 0:return e=null,r=null,t=null,i=null,u=null,[4,function(n){return v.apply(this,arguments)}(n)];case 1:if(!(c=o.sent()))return[2,{buildCommand:e,runCommand:r,ignorePorts:t,appType:i,publicDir:u}];if(!c.deployment)return[3,2];switch(d=(l=c.deployment).build,f=l.run,g=l.ignorePorts,m=l.target,y=l.publicDir,d&&(e=(0,p.Cq)(d)),f&&(r=(0,p.Cq)(f)),null!=g&&(t=g),m){case a.api.DeploymentConfig.Target.GCE:i=t?s.Vp.Worker:s.Vp.Server;break;case a.api.DeploymentConfig.Target.CLOUDRUN:i=s.Vp.CloudRun;break;case a.api.DeploymentConfig.Target.STATIC:i=s.Vp.Static}return y&&(u=y),[3,4];case 2:return[4,n.getRunConfig()];case 3:h=o.sent(),c.compile&&(e=(0,p.Cq)(c.compile)),h.run?r=(0,p.Cq)(h.run.run):c.run&&(r=(0,p.Cq)(h.run)),o.label=4;case 4:return[2,{buildCommand:e,runCommand:r,ignorePorts:t,appType:i,publicDir:u}]}})})).apply(this,arguments)}var D={buildCommand:{delete:function(){return(0,f.xz)("deployment/build")},create:function(n){return(0,f.pi)(n.toString())}},runCommand:{delete:function(){return(0,f.xz)("deployment/run")},create:function(n){return(0,f.X6)(n.toString())}},ignorePorts:{delete:function(){return(0,f.xz)("deployment/ignorePorts")},create:function(n){return(0,f.KB)(!!n)}},appType:{delete:function(){return(0,f.xz)("deployment/deploymentTarget")},create:function(n){var e=null;switch(n){case s.Vp.Server:case s.Vp.Worker:e="gce";break;case s.Vp.CloudRun:e="cloudrun";break;case s.Vp.Static:e="static"}return e?(0,f.zk)(e):null}},publicDir:{delete:function(){return(0,f.xz)("deployment/publicDir")},create:function(n){return(0,f.TT)(n.toString())}}};function b(n,e,r){return w.apply(this,arguments)}function w(){return(w=(0,t._)(function(n,e,r){var t,i,a,s,l,p,f,g,y,h,v,_,C,b,w,S;return(0,o.Jh)(this,function(o){switch(o.label){case 0:t=r.fs,i=r.container,a=r.dotReplit,s=[],l=!0,p=!1,f=void 0;try{for(g=Object.keys(n)[Symbol.iterator]();!(l=(y=g.next()).done);l=!0)v=n[h=y.value],_=e[h],C=D[h],v!==_&&("string"==typeof v&&(0,d.Ar)(v)||"boolean"==typeof v&&v?(b=C.create(v))&&s.push(b):s.push(C.delete()))}catch(n){p=!0,f=n}finally{try{l||null==g.return||g.return()}finally{if(p)throw f}}if(i.getConnectionState()!==u.em.CONNECTED)throw new c.QO;if(!s.length)return[3,2];return[4,a.updateDotReplit(s)];case 1:if(w=o.sent().error)throw Error(w);o.label=2;case 2:return S=null,[4,new Promise(function(n){t.getStatus()!==m.kO.Syncing&&n(!0),S=setInterval(function(){t.getStatus()!==m.kO.Syncing&&n(!0)},1e3)})];case 3:return o.sent(),S&&clearInterval(S),[2]}})})).apply(this,arguments)}},4927:function(n,e,r){r.d(e,{MX:function(){return g},bN:function(){return f},uC:function(){return p}});var t=r(93295),i=r(23982);function o(){var n=(0,t._)(["\n  fragment ReplDomain2 on Domain {\n    hosting_deployment_id\n    domain\n    state\n  }\n"]);return o=function(){return n},n}function u(){var n=(0,t._)(["\n  fragment CustomDomain on Domain {\n    ...ReplDomain2\n  }\n  ","\n"]);return u=function(){return n},n}function a(){var n=(0,t._)(["\n  fragment TargetHostingDeployment on HostingDeployment {\n    id\n    replitAppSubdomain\n  }\n"]);return a=function(){return n},n}function c(){var n=(0,t._)(["\n  fragment MachineConfiguration on HostingMachineConfiguration {\n    id\n    label\n    vcpu\n    memory\n    slug\n  }\n"]);return c=function(){return n},n}function s(){var n=(0,t._)(["\n  fragment CurrentBuild2 on HostingBuild {\n    id\n    description\n    status\n    timeCreated\n    hasImageTag\n    envVars {\n      name\n      value\n    }\n    repl {\n      id\n      slug\n      apexProxy\n      domains {\n        ... on Domain {\n          ...CustomDomain\n        }\n      }\n      owner {\n        ... on Team {\n          id\n          username\n        }\n        ... on User {\n          id\n          username\n        }\n      }\n      hostingDeployment {\n        ... on HostingDeployment {\n          ...TargetHostingDeployment\n        }\n      }\n    }\n    provider\n    machineConfiguration {\n      ...MachineConfiguration\n    }\n    maxMachineInstances\n    machineJob {\n      timezone\n      crontab\n    }\n    user {\n      id\n      displayName\n      username\n    }\n  }\n  ","\n  ","\n  ","\n"]);return s=function(){return n},n}var l=(0,i.Ps)(o()),d=(0,i.Ps)(u(),l),p=(0,i.Ps)(a()),f=(0,i.Ps)(c()),g=(0,i.Ps)(s(),d,p,f)},66368:function(n,e,r){r.d(e,{b:function(){return i},c:function(){return o}});var t=r(50199);function i(n,e){return(0,t.Z)(function(){return o(e,n)},[e,n])}function o(n,e){return{get current(){return n.get(e)},subscribe:function(r){return n.sub(e,function(){return r(n.get(e))})}}}},28268:function(n,e,r){function t(n,e){return n.split(e).length-1}r.d(e,{Z:function(){return o}});var i=r(32477),o={parse:function(n){var e={},r=n.split(/\n|\r|\r\n/),i=!0,o=!1,u=void 0;try{for(var a,c=r[Symbol.iterator]();!(i=(a=c.next()).done);i=!0){var s=a.value;if(!function(n){var e=n.trim();return 0===e.length||e.startsWith("#")}(s)){var l=(s=function(n){if(!n.includes("#"))return n;var e=n.split("#"),r=!1,i=[],o=!0,u=!1,a=void 0;try{for(var c,s=e[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var l=c.value;(1===t(l,'"')||t(l,"'"))&&(r?(r=!1,i.push(l)):r=!0),(0===i.length||r)&&i.push(l)}}catch(n){u=!0,a=n}finally{try{o||null==s.return||s.return()}finally{if(u)throw a}}return i.join("#")}(s)).indexOf("="),d=s.indexOf(":");if(-1!==d||-1!==l){var p=l;-1!==d&&(d<l||-1===l)&&(p=d);var f=s.slice(0,p).replace(/^\s*(?:export\s+)?(.*?)\s*$/,"$1"),g=function(n,e){var r=n.trim();if(0===r.length)return r;var t=r.length-1,i='"'===r[0]&&'"'===r[t],o="'"===r[0]&&"'"===r[t];return(o||i)&&(r=r.slice(1,-1)),i&&(r=(r=r.replace(/\\./g,function(n){return"\\n"===n?"\n":"\\r"===n?"\r":n})).replace(/\\([^$])/g,"$1")),o||(r=r.replace(/(\\)?(\$)(\()?\{?([A-Z0-9_]+)?\}?/g,function(n){var r=n.match(/(\\)?(\$)(\()?\{?([A-Z0-9_]+)?\}?/);if(null===r)return n;if("\\"===r[1]||"("===r[2])return r[0].slice(1);var t=r[4];return""!==t?e[t]||"":n})),r}(s.slice(p+1),e);e[f]=g}}}}catch(n){o=!0,u=n}finally{try{i||null==c.return||c.return()}finally{if(o)throw u}}return e},serialize:function(n){return Object.entries(n).reduce(function(n,e){var r=(0,i._)(e,2),t=r[0],o=r[1].replace(/\\([^$])/g,"\\\\$1").replace(/\$/g,"\\\\$$").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r");return n+"".concat(t,'="').concat(o,'"\n')},"")}}},8668:function(n,e,r){r.d(e,{Ar:function(){return u},GV:function(){return a},Jw:function(){return c}});var t=r(67766),i=r.n(t),o=r(73524),u=function(n){return"string"==typeof n&&""!==n.trim()},a=function(n){return"object"==typeof n&&"string"==typeof n.name&&"string"==typeof n.value&&""!==n.name};function c(n){var e=n.replSlug,r=n.username,t=r?"-".concat(r):"",u=o.m7-(0+t.length);if(u>0){var a=i()(e).slice(0,u),c="".concat("").concat(a).concat(t);if(c.length<=o.m7)return c}return"".concat("").concat(i()(e)).concat(t)}},55552:function(n,e,r){r.d(e,{Cq:function(){return t}}),r(58962);var t=function(n){return n&&n.args?(n.args&&n.args.length>=3&&"sh"===n.args[0]&&"-c"===n.args[1]?n.args.slice(2):n.args).join(" "):""}},37229:function(n,e,r){r.d(e,{$0:function(){return a},D3:function(){return o},If:function(){return i},Jk:function(){return c},KB:function(){return d},KQ:function(){return t},TT:function(){return f},X6:function(){return s},pi:function(){return l},xz:function(){return u},zk:function(){return p}});var t=function(n){return{op:"add",path:"run",value:JSON.stringify(n)}},i=function(n){return{op:"add",path:"entrypoint",value:JSON.stringify(n)}},o=function(n){return{op:"add",path:"compile",value:JSON.stringify(n)}},u=function(n){return{op:"remove",path:"string"==typeof n?n:n.join("/"),value:""}},a=function(n){return{op:"add",path:"auth/pageEnabled",value:JSON.stringify(n)}},c=function(n){return{op:"add",path:"auth/buttonEnabled",value:JSON.stringify(n)}},s=function(n){return{path:"deployment/run",op:"add",value:JSON.stringify(["sh","-c",n])}},l=function(n){return{path:"deployment/build",op:"add",value:JSON.stringify(["sh","-c",n])}},d=function(n){return{path:"deployment/ignorePorts",op:"add",value:n.toString()}},p=function(n){return{path:"deployment/deploymentTarget",op:"add",value:JSON.stringify(n)}},f=function(n){return{path:"deployment/publicDir",op:"add",value:JSON.stringify(n)}}},59808:function(n,e,r){var t,i,o,u,a,c;r.d(e,{Yt:function(){return t},au:function(){return i},zW:function(){return o}}),(u=t||(t={})).NotFound="NOT_FOUND",u.ParseError="PARSE_ERROR",u.Disconnected="DISCONNECTED",u.Unknown="UNKOWN_ERROR",(a=i||(i={})).ChannelClosed="CHANNEL_CLOSED",a.JSONParseError="JSON_PARSE_ERROR",a.NotFound="NOT_FOUND",a.TOMLParseError="TOML_PARSE_ERROR",a.OpType="OP_TYPE",a.CouldNotWrite="COULD_NOT_WRITE",a.ReadLine="COULD_NOT_READ_LINE",a.Unknown="UNKNOWN_ERROR",(c=o||(o={})).CHANGE="CHANGE",c.CHANNEL_OPENED="CHANNEL_OPENED"}}]);
//# sourceMappingURL=6190-5ea51c61a3d303ce.js.map