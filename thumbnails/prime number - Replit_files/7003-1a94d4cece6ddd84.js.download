!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="4687adac-77bc-4161-8eb9-d515eb78ab11",e._sentryDebugIdIdentifier="sentry-dbid-4687adac-77bc-4161-8eb9-d515eb78ab11")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"d103cf55"};"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7003,351],{53430:function(e,t,n){n.d(t,{Z:function(){return b}});var r=n(8182);n(43429);var i=n(72769),o=n(82751),u=n(83311),a=n(42802),l=n(6989),c=n(43586),s=Array.prototype.concat,f=function(e){return{recursive:!!e.recursive,bail:e.bail&&e.bail>0?e.bail:1e3}},d=function(e){return s.apply([],e)},h=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0;if(!e||n>=t.bail||!e.isDirectory||!e.createReader)return Promise.resolve([]);var i=null!=r?r:e.name;return new Promise(function(r){e.createReader().readEntries(function(e){return Promise.all(e.map(function(e){var r,o,u,a;return r=e,o=t,u=n,a=i,r.isDirectory?o.recursive?h(r,o,u+1,(0,c.join)(a,r.name)):Promise.resolve([]):new Promise(function(e,t){r.file?r.file(e,t):e(null)}).catch(function(){return null}).then(function(e){return e&&(e.dirPath=(0,c.join)(a,e.name)),e?[e]:[]})})).then(function(e){return r(d(e))})},function(){return r([])})})},p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return h("function"==typeof e.getAsEntry?e.getAsEntry():e.webkitGetAsEntry?e.webkitGetAsEntry():null,f(t))},v=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t=f(t),new Promise(function(n){var r,i;(null==e?void 0:null===(r=e.dataTransfer)||void 0===r?void 0:r.items)?Promise.all(d(e.dataTransfer.items).filter(function(e){return"file"===e.kind}).map(function(e){return p(e,t).then(function(t){if(!t.length){var n=e.getAsFile();t=n?[n]:t}return t})})).then(function(e){return n(d(e))}):(null==e?void 0:null===(i=e.dataTransfer)||void 0===i?void 0:i.files)?n(d(e.dataTransfer.files)):n([])})},g=n(18059),m=null,y=null;function b(e){var t=function(e){var t=e.isTouchBackend;if(y&&t)return y;if(m&&!t)return m;var n={dragDropManager:(0,i.i)(function(e){var n=t?(0,a.zr)(e,void 0,{delayTouchStart:500}):(0,o.PD)(e),r=n.handleTopDropCapture;return n.handleTopDropCapture=function(e){var t,i=n.monitor.getItemType();i===u.HTML||i===u.TEXT?(n.dropTargetIds=[],null===(t=n.currentNativeSource)||void 0===t||t.loadDataTransfer(e.dataTransfer),n.enterLeaveCounter.reset()):r.call(n,e),n.currentNativeSource&&(n.currentNativeSource.item.dirContent=v(e,{recursive:!0}))},n})};return t?y=n:m=n,n}({isTouchBackend:(0,g.w8)()});return(0,r.tZ)(l.L.Provider,{value:t,children:e.children})}},69119:function(e,t,n){n.d(t,{x:function(){return c}});var r=n(8182),i=n(51384),o=n(29287),u=n(56596),a=(0,i.iv)([o.l0.flex.shrink(1),o.l0.truncate]),l={normal:{matched:o.TV.foregroundDefault,unmatched:o.TV.foregroundDimmer},dimmed:{matched:o.TV.foregroundDimmer,unmatched:o.TV.foregroundDimmest}};function c(e){var t,n,i,c,s=null===(c=e.highlight)||void 0===c?void 0:c.filter(function(e){return e.to>0}),f=e.dimmed?l.dimmed:l.normal;return(null==s?void 0:s.length)?(0,r.tZ)(u.G,{className:e.className,css:a,children:(t=e.text,n=0,i=[],s.forEach(function(e){var r=e.from,o=e.to,u=t.slice(n,r);u&&i.push({text:u,match:!1});var a=t.slice(r,o);a&&i.push({text:a,match:!0}),n=o}),n<t.length&&i.push({text:t.slice(n),match:!1}),i).map(function(e,t){return(0,r.tZ)("span",{style:{fontWeight:e.match?o.TV.fontWeightBold:o.TV.fontWeightRegular,color:e.match?f.matched:f.unmatched},children:e.text},e.text+t)})}):(0,r.tZ)(u.G,{className:e.className,style:{color:f.matched},css:a,children:e.text})}},73097:function(e,t,n){n.d(t,{K:function(){return o}});var r=n(43429),i=n(23814);function o(e){(0,r.useEffect)(function(){e((0,i.r)(),{captureDraggingState:!0})},[e])}},23394:function(e,t,n){n.d(t,{T:function(){return u},Z:function(){return o}});var r=n(43429),i=n(22894);function o(){var e=r.useContext(i.Z);if(!e)throw Error("Expected Repl info to be in context");return e.language}function u(){return o().startsWith("html")}},37491:function(e,t,n){n.d(t,{UV:function(){return o},fN:function(){return i}});var r=n(21289);function i(e,t){for(var n=0;n<t.length;n+=1e4)e.push.apply(e,(0,r._)(t.slice(n,n+1e4)))}function o(e){return(0,r._)(Array(e))}},10704:function(e,t,n){n.d(t,{V:function(){return f},Q:function(){return m}});var r=n(45903),i=n(19949),o=n(23026),u=.5*(Math.sqrt(3)-1),a=(3-Math.sqrt(3))/6,l=new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]),c=new(function(){"use strict";function e(){var t,n,r,i,u,a,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Math.random;(0,o._)(this,e);var c="function"==typeof l?l:(n=0,r=0,i=0,u=1,n=(t=4022871197,a=function(e){e=e.toString();for(var n=0;n<e.length;n++){var r=.02519603282416938*(t+=e.charCodeAt(n));t=r>>>0,r-=t,r*=t,t=r>>>0,r-=t,t+=4294967296*r}return(t>>>0)*23283064365386963e-26})(" "),r=a(" "),i=a(" "),(n-=a(l))<0&&(n+=1),(r-=a(l))<0&&(r+=1),(i-=a(l))<0&&(i+=1),function(){var e=2091639*n+23283064365386963e-26*u;return n=r,r=i,i=e-(u=0|e)});this.p=function(e){for(var t=new Uint8Array(256),n=0;n<256;n++)t[n]=n;for(var r=0;r<255;r++){var i=r+~~(e()*(256-r)),o=t[r];t[r]=t[i],t[i]=o}return t}(c),this.perm=new Uint8Array(512),this.permMod12=new Uint8Array(512);for(var s=0;s<512;s++)this.perm[s]=this.p[255&s],this.permMod12[s]=this.perm[s]%12}return e.prototype.noise2D=function(e,t){var n,r,i=this.permMod12,o=this.perm,c=0,s=0,f=0,d=(e+t)*u,h=Math.floor(e+d),p=Math.floor(t+d),v=(h+p)*a,g=e-(h-v),m=t-(p-v);g>m?(n=1,r=0):(n=0,r=1);var y=g-n+a,b=m-r+a,w=g-1+2*a,E=m-1+2*a,S=255&h,x=255&p,D=.5-g*g-m*m;if(D>=0){var k=3*i[S+o[x]];D*=D,c=D*D*(l[k]*g+l[k+1]*m)}var T=.5-y*y-b*b;if(T>=0){var _=3*i[S+n+o[x+r]];T*=T,s=T*T*(l[_]*y+l[_+1]*b)}var R=.5-w*w-E*E;if(R>=0){var I=3*i[S+1+o[x+1]];R*=R,f=R*R*(l[I]*w+l[I+1]*E)}return 70*(c+s+f)},e}()),s=n(33212);function f(e){var t=!1,n=0,r=0,i=null,o=function(a){if(t){var l=a-n;r+=l,n=a,i=window.requestAnimationFrame(o),e({elapsedTime:r,deltaTime:l,stop:u})}},u=function(){t&&(t=!1,i&&window.cancelAnimationFrame(i))};return{start:function(){t||(r=0,n=performance.now(),t=!0,i=window.requestAnimationFrame(o))},stop:u}}var d=function(){return(0,i.hd)(600,1200)},h=function(){return(0,i.hd)(1,3)},p=function(){return{width:(0,i.hd)(5,20),height:(0,i.hd)(5,20)}},v=function(){return(0,i.vF)()};function g(e){return Array.isArray(e)?(0,i.DQ)(e):e instanceof Function?e():e}function m(){var e=!1,t=null,n=null,o=[],u=null,a={},l=function(e){var t=!0,n=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(t=(i=o.next()).done);t=!0)!function(){var e=i.value;if(!a[e]){var t=new Image;t.src=e,t.onerror=function(){s.error('Failed to load particle image "'.concat(e,'"'))},a[e]=t}}()}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}};return{getIsInstalled:function(){return e},addParticles:function(e){for(var t=e.x,n=e.y,c=e.numParticles,s=e.spread,f=e.heading,m=e.airDrag,y=void 0===m?.9:m,b=e.color,w=void 0===b?v:b,E=e.gravity,S=void 0===E?800:E,x=e.velocity,D=void 0===x?d:x,k=e.size,T=void 0===k?p:k,_=e.lifetime,R=void 0===_?h:_,I=e.flip,P=void 0===I||I,C=e.image,N=void 0===C?void 0:C,A=g(void 0===s?60:s),O=g(void 0===f?90:f),Z=(0,i.Id)(A),F=(0,i.Id)(-O),B=g(void 0===c?150:c),G=0;G<B;G++){var M=F+(0,i.hd)(-Z/2,Z/2),L=g(D),U=g(T),z=U.width,W=U.height,H=g(R),j=g(w),V=g(y),X=g(t),J=g(n),K=g(N);"string"==typeof K&&(a[K]||l([K]),K=a[K]),o.push((0,r._)({seed:(0,i.hd)(0,1e5),x:X,y:J,gravity:S,airDrag:V,scaleX:1,scaleY:1,rotation:(0,i.hd)(0,(0,i.Id)(360)),velocityX:Math.cos(M)*L,velocityY:Math.sin(M)*L,angularVelocity:(0,i.hd)((0,i.Id)(-400),(0,i.Id)(400)),color:j,alpha:1,width:z,height:W,flip:P,lifetime:H,lifetimeRemaining:H},K?{image:K,type:"image"}:{type:(0,i.DQ)(["rectangle","ellipse"])}))}null==u||u.start()},clearParticles:function(){o=[]},uninstall:function(){var r;e&&(t&&(null===(r=document.body)||void 0===r?void 0:r.contains(t))&&document.body.removeChild(t),u&&u.stop(),t=null,n=null,e=!1,a={})},install:function(){var r;!e&&document&&document.body&&((r=document.createElement("canvas")).style.position="fixed",r.style.top="0px",r.style.left="0px",r.style.pointerEvents="none",r.style.zIndex="999999",r.width=document.documentElement.clientWidth,r.height=document.documentElement.clientHeight,r.id="replit-particles-simulation",r.setAttribute("role","image"),r.ariaHidden="true",(n=(t=r).getContext("2d"))&&(document.body.appendChild(t),u=f(function(e){var r=e.deltaTime,u=e.stop;if(t&&n){var a=n,l=window.scrollX,s=window.scrollY;t.width!==document.documentElement.clientWidth&&(t.width=document.documentElement.clientWidth),t.height!==document.documentElement.clientHeight&&(t.height=document.documentElement.clientHeight),n.clearRect(0,0,t.width,t.height),o.map(function(e){var t,n,o,u,a,l;return n=(t={particle:e,deltaTime:r}).particle,o=t.deltaTime,n.velocityY+=n.gravity*o/1e3,n.x+=n.velocityX*o/1e3,n.y+=n.velocityY*o/1e3,n.rotation+=n.angularVelocity*o/1e3,n.velocityX*=n.airDrag,n.velocityY*=n.airDrag,n.flip&&(n.scaleY=2*(0,i.WE)(n.lifetimeRemaining,.5)),u=(0,i.NC)(n.velocityX,n.velocityY),a=(0,i.$G)(n.velocityX,n.velocityY),l=u+.05*c.noise2D(n.seed,n.lifetimeRemaining),void(n.velocityX=Math.cos(l)*a,n.velocityY=Math.sin(l)*a,n.lifetimeRemaining-=o/1e3,n.lifetimeRemaining<=0?n.alpha=0:n.alpha=1-(n.lifetime-n.lifetimeRemaining)/n.lifetime)}),o.map(function(e){var t,n,r,i,o,u,c,f,d;return n=(t={particle:e,ctx:a,scrollX:l,scrollY:s}).particle,r=t.ctx,i=t.scrollX,o=t.scrollY,u=n.width*n.scaleX,c=n.height*n.scaleY,f=n.x-i,d=n.y-o,void(r.save(),r.translate(f,d),r.rotate(n.rotation),r.globalAlpha=n.alpha,"image"===n.type?r.drawImage(n.image,-u/2,-c/2,u,c):"rectangle"===n.type?(r.fillStyle=n.color,r.fillRect(-u/2,-c/2,u,c)):"ellipse"===n.type&&(r.fillStyle=n.color,r.beginPath(),r.ellipse(0,0,u/2,c/2,0,0,2*Math.PI),r.fill()),r.restore())}),0===(o=o.filter(function(e){return e.lifetimeRemaining>0})).length&&u()}}),e=!0))},preloadImages:l,unloadImages:function(e){var t=!0,n=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var u=i.value;delete a[u]}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}}}}},90351:function(e,t,n){n.d(t,{$0:function(){return r.$},hd:function(){return i.hd},su:function(){return r.s}});var r=n(97047),i=n(19949)},97047:function(e,t,n){n.d(t,{$:function(){return d},s:function(){return i}});var r,i,o=n(45903),u=n(70322),a=n(43429),l=n(19949),c=n(10704),s=n(48796),f=(0,c.Q)();function d(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).preloadImages,t=(0,s.T)();a.useEffect(function(){return f.install(),function(){f.uninstall()}},[]),a.useEffect(function(){e&&f.preloadImages(e)},[e]);var n=function(e){t||f.addParticles(e)},r=function(e){t||f.addParticles((0,o._)({numParticles:125,spread:360,velocity:function(){return(0,l.hd)(400,900)},size:function(){return{width:(0,l.hd)(5,15),height:(0,l.hd)(5,25)}}},e))};return{fireBurst:n,fireBurstFrom:function(e){var r=e.element,i=(0,u._)(e,["element"]);if(!t){var a=(0,l.tj)(r),c=a.x,s=a.y;n((0,o._)({x:c,y:s},i))}},fireCircularBurst:r,fireCircularBurstFrom:function(e){var n=e.element,i=(0,u._)(e,["element"]);if(!t){var a=(0,l.tj)(n),c=a.x,s=a.y;r((0,o._)({x:c,y:s},i))}},fireDirectionalBurst:function(e){var n=e.direction,r=(0,u._)(e,["direction"]);t||f.addParticles((0,o._)({heading:n},r))},fireDirectionalBurstFrom:function(e){var n=e.element,r=e.direction,i=(0,u._)(e,["element","direction"]);if(!t){var a=(0,l.tj)(n),c=a.x,s=a.y;f.addParticles((0,o._)({x:c,y:s,numParticles:100,velocity:function(){return(0,l.hd)(400,1500)},spread:60,size:function(){return{width:(0,l.hd)(5,15),height:(0,l.hd)(5,25)}},heading:r},i))}}}}(r=i||(i={}))[r.East=0]="East",r[r.NorthEast=45]="NorthEast",r[r.North=90]="North",r[r.NorthWest=135]="NorthWest",r[r.West=180]="West",r[r.SouthWest=225]="SouthWest",r[r.South=270]="South"},19949:function(e,t,n){n.d(t,{$G:function(){return f},DQ:function(){return u},Id:function(){return c},NC:function(){return s},WE:function(){return d},hd:function(){return a},tj:function(){return o},vF:function(){return l}});var r=n(6686),i=n.n(r);function o(e){var t,n={x:(t=e.getBoundingClientRect()).left+t.width/2,y:t.top+t.height/2};return{x:n.x+window.scrollX,y:n.y+window.scrollY}}function u(e){var t;return e[t=e.length-1,i()(0,t,!1)]}function a(e,t){return i()(e,t,!0)}function l(){return"hsl(".concat(i()(0,360,!1),", 100%, 70%)")}function c(e){return e*Math.PI/180}function s(e,t){return Math.atan2(t,e)}function f(e,t){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2))}function d(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return n-Math.abs((e%(t=2*n)+t)%t-n)}},27592:function(e,t,n){n.d(t,{j:function(){return r}});function r(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.root,i=n.rootMargin,o=n.threshold;if("undefined"==typeof IntersectionObserver)return function(){};var u=new WeakMap,a=new IntersectionObserver(function(e){e.forEach(function(e){var n=u.get(e.target);if(!!n!==e.isIntersecting){if(e.isIntersecting){var r=t(e);"function"==typeof r?u.set(e.target,r):a.unobserve(e.target)}else n&&(n(e),u.delete(e.target))}})},{root:r,rootMargin:i,threshold:void 0===o?1:o});return a.observe(e),function(){return a.disconnect()}}},31950:function(e,t,n){n.d(t,{j:function(){return u}});var r=n(43429),i=n(44166),o=n(7444);function u(e,t,n){var u=(0,o.Z)(n);(0,r.useLayoutEffect)(function(){var n=function(t){var n=u.current?u.current(t):t;null!==n&&(0,i.A)(e,n)};return n(t.current),(0,i.p)(e),t.subscribe(n)},[e,t,u])}},44166:function(e,t,n){n.d(t,{A:function(){return a},p:function(){return l}});var r=n(23026),i=n(32477),o=new(function(){"use strict";function e(){(0,r._)(this,e),this.map=new Map}var t=e.prototype;return t.getOrInit=function(e){var t=this.map.get(e);return t||(t=new Map,this.map.set(e,t)),t},t.add=function(e,t,n){this.getOrInit(e).set(t,n)},t.flush=function(){var e=!0,t=!1,n=void 0;try{for(var r,o=this.map[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var u=(0,i._)(r.value,2),a=u[0],l=u[1];if(a&&"current"in a&&(a=a.current),a){var c=!0,s=!1,f=void 0;try{for(var d,h=l[Symbol.iterator]();!(c=(d=h.next()).done);c=!0){var p=(0,i._)(d.value,2),v=p[0],g=p[1];a.style.setProperty(v,g)}}catch(e){s=!0,f=e}finally{try{c||null==h.return||h.return()}finally{if(s)throw f}}}}}catch(e){t=!0,n=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw n}}this.map.clear()},t.flushNode=function(e){if(e){var t=e,n=this.map.get(t);if(n&&(e&&"current"in e&&(e=e.current),e)){var r=!0,o=!1,u=void 0;try{for(var a,l=n[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=(0,i._)(a.value,2),s=c[0],f=c[1];e.style.setProperty(s,f)}}catch(e){o=!0,u=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw u}}this.map.delete(t)}}},e}()),u=!1;function a(e,t,n){if(null!==e){if("string"==typeof t){if(void 0===n)throw Error("value is undefined when prop is string");o.add(e,t,n)}else for(var r in t)o.add(e,r,t[r]);u||(u=!0,requestAnimationFrame(function(){o.flush(),u=!1}))}}function l(e){o.flushNode(e)}},41792:function(e,t,n){n.d(t,{D:function(){return i},V:function(){return u}});var r,i,o=n(19659);function u(e){return(0,o.gK)(e)?"Markdown":(0,o.sL)(e)?"Draw":(0,o.IQ)(e)?"Pedit":(0,o.T3)(e)?"Media":(0,o.hj)(e)?"Binary":"Code"}(r=i||(i={})).Media="Media",r.Binary="Binary",r.Code="Code",r.Markdown="Markdown",r.Draw="Draw",r.Pedit="Pedit"},75296:function(e,t,n){n.d(t,{Z:function(){return m}});var r=n(39698),i=n(45903),o=n(25e3),u=n(8182),a=n(79378),l=n(56596),c=n(29287),s=n(30983),f=n(93918),d=(0,n(91608).$)(["size","fontSize","listGap","iconTextGap","avatarOverlap","tooltipFontSize"]),h=d.styleTokens,p=d.cssVars,v=(0,f.X)({avatarsRow:[c.l0.flex.row,{"& > *":{marginLeft:"calc(-0.4 * ".concat(h.size,")")},"& > *:first-child":{marginLeft:0}}],countCirlce:[c.l0.center,c.l0.overflow("hidden"),c.l0.backgroundColor.backgroundDefault,c.l0.color.foregroundDimmer,c.l0.px(2),{borderRadius:"50%",minWidth:h.size,height:h.size,fontSize:h.fontSize}],tooltop:[{gap:h.listGap,gridTemplateColumns:"repeat(auto-fill, 200px)"}],tooltipRow:[c.l0.rowWithGap(c.TV.space2),c.l0.align.center],tooltipText:[c.l0.flex.growAndShrink(1),c.l0.truncate,c.l0.color.foregroundDimmer,{paddingLeft:h.iconTextGap,fontSize:h.tooltipFontSize}],stackItem:[]}),g={12:{fontSize:8,listGap:2,iconTextGap:2,tooltipAvatarSize:12,tooltipFontSize:8},16:{fontSize:10,listGap:2,iconTextGap:2,tooltipAvatarSize:16,tooltipFontSize:10},24:{fontSize:12,listGap:4,iconTextGap:4,tooltipAvatarSize:16,tooltipFontSize:12},32:{fontSize:14,listGap:4,iconTextGap:4,tooltipAvatarSize:16,tooltipFontSize:14},40:{fontSize:16,listGap:8,iconTextGap:4,tooltipAvatarSize:24,tooltipFontSize:14},48:{fontSize:24,listGap:8,iconTextGap:4,tooltipAvatarSize:24,tooltipFontSize:14}};function m(e){var t,n,c,f,d,h,m,y,b,w=e.activeUsers,E=e.visibleNumOfUsers,S=void 0===E?3:E,x=e.size,D=void 0===x?24:x,k=w.length,T=(b={},(0,r._)(b,p.size,D+"px"),(0,r._)(b,p.fontSize,(null!==(d=null===(t=g[D])||void 0===t?void 0:t.fontSize)&&void 0!==d?d:D)+"px"),(0,r._)(b,p.listGap,(null!==(h=null===(n=g[D])||void 0===n?void 0:n.listGap)&&void 0!==h?h:8)+"px"),(0,r._)(b,p.iconTextGap,(null!==(m=null===(c=g[D])||void 0===c?void 0:c.iconTextGap)&&void 0!==m?m:8)+"px"),(0,r._)(b,p.tooltipFontSize,(null!==(y=null===(f=g[D])||void 0===f?void 0:f.tooltipFontSize)&&void 0!==y?y:14)+"px"),b),_=k>S,R=w.slice(0,_?S-1:S);return(0,u.tZ)(s.u,{tooltip:(0,u.tZ)(l.G,{css:v.tooltop,style:T,children:w.map(function(e){var t;return(0,u.BX)(l.G,{css:v.tooltipRow,children:[(0,u.tZ)(a.q,{size:(null===(t=g[D])||void 0===t?void 0:t.tooltipAvatarSize)||D,src:e.image||null,ringColor:e.color,username:e.username},e.id),(0,u.tZ)(l.G,{css:v.tooltipText,children:e.username})]},e.username)})}),children:function(e,t){return(0,u.BX)(l.G,(0,o._)((0,i._)({},e),{tag:"ul",innerRef:t,css:v.avatarsRow,style:T,children:[R.map(function(e,t){return(0,u.tZ)(l.G,{tag:"li",style:{zIndex:t+1},css:v.stackItem,children:(0,u.tZ)(a.q,{size:D,src:e.image||null,ringColor:e.color,username:e.username})},e.id)}),_?(0,u.tZ)(l.G,{tag:"li",css:v.stackItem,style:{zIndex:R.length},children:(0,u.tZ)(l.G,{css:v.countCirlce,children:(0,u.BX)(l.G,{children:["+",k-S+1]})})}):null]}))}})}},56158:function(e,t,n){n.d(t,{Z:function(){return v}});var r=n(59173),i=n(34142),o=n(45903),u=n(25e3),a=n(32477),l=n(21289),c=n(87682),s=n(58962),f=n(83493),d=n(91039),h=n(20298),p=n(88422).lW;function v(e){var t=e.container,n=e.beforeRun,v=(0,r.u)(null);return{mainClient:v,connect:function(){return new Promise(function(e){v.current||t.openChannel({service:"debugger"},function(t){return v.current=function(e){var t,n=e.channel,v=e.beforeRun,g=(0,r.u)("terminated"),m=(0,r.u)([]),y=(0,r.u)([]),b=(0,r.u)(new Map),w=(0,r.u)(null),E=(0,f.ZP)(),S=function(e,t){var n=new Map,r=new Map,u=new Map;function l(){return(l=(0,i._)(function(t){var i,l,s,f,d,h,p;return(0,c.Jh)(this,function(v){switch(v.label){case 0:i=!0,l=!1,s=void 0,v.label=1;case 1:v.trys.push([1,6,7,8]),f=function(){var n,i,l,s,f,d,p,v,g,m,y,b,w,E,S,x,D,k,T,_,R,I,P,C,N,A,O,Z,F,B,G,M,L,U,z;return(0,c.Jh)(this,function(W){switch(W.label){case 0:if(i=(n=(0,a._)(h.value,2))[0],l=n[1],void 0!==t&&t!==i)return[2,"continue"];return[4,e({command:"setBreakpoints",arguments:{source:{name:i,path:i},breakpoints:l.map(function(e){return{line:e.line,logMessage:e.logMessage||void 0}})}})];case 1:if(!(s=W.sent()).success)return[2,"continue"];f=!0,d=!1,p=void 0;try{for(v=r[Symbol.iterator]();!(f=(g=v.next()).done);f=!0){y=(m=(0,a._)(g.value,2))[0],b=m[1],(null===(w=b.source)||void 0===w?void 0:w.name)===i&&r.delete(y),E=!0,S=!1,x=void 0;try{for(D=u[Symbol.iterator]();!(E=(k=D.next()).done);E=!0)_=(T=(0,a._)(k.value,2))[0],T[1]===y&&u.delete(_)}catch(e){S=!0,x=e}finally{try{E||null==D.return||D.return()}finally{if(S)throw x}}}}catch(e){d=!0,p=e}finally{try{f||null==v.return||v.return()}finally{if(d)throw p}}R=s,I=!0,P=!1,C=void 0;try{for(N=R.body.breakpoints[Symbol.iterator]();!(I=(A=N.next()).done);I=!0)O=A.value,null!=O.id&&r.set(O.id,(0,o._)({source:{name:i,path:i}},O))}catch(e){P=!0,C=e}finally{try{I||null==N.return||N.return()}finally{if(P)throw C}}Z=!0,F=!1,B=void 0;try{for(G=(function(e,t){var n;return(0,c.Jh)(this,function(r){switch(r.label){case 0:if(e.length!==t.length)return[2];n=0,r.label=1;case 1:if(!(n<e.length))return[3,4];return[4,[e[n],t[n]]];case 2:r.sent(),r.label=3;case 3:return n++,[3,1];case 4:return[2]}})})(l,R.body.breakpoints)[Symbol.iterator]();!(Z=(M=G.next()).done);Z=!0)U=(L=(0,a._)(M.value,2))[0],z=L[1],U.breakpointId&&null!=z.id&&u.set(U.breakpointId,z.id)}catch(e){F=!0,B=e}finally{try{Z||null==G.return||G.return()}finally{if(F)throw B}}return[2]}})},d=n.entries()[Symbol.iterator](),v.label=2;case 2:if(i=(h=d.next()).done)return[3,5];return[5,(0,c.XA)(f())];case 3:v.sent(),v.label=4;case 4:return i=!0,[3,2];case 5:return[3,8];case 6:return p=v.sent(),l=!0,s=p,[3,8];case 7:try{i||null==d.return||d.return()}finally{if(l)throw s}return[7];case 8:return[2]}})})).apply(this,arguments)}function s(){var e=new Map,t=new Set,i=!0,o=!1,l=void 0;try{for(var c,s=n.entries()[Symbol.iterator]();!(i=(c=s.next()).done);i=!0){var f=(0,a._)(c.value,2),h=f[0],p=f[1];if(0!==p.length){var v=[],g=!0,m=!1,y=void 0;try{for(var b,w=p[Symbol.iterator]();!(g=(b=w.next()).done);g=!0){var E=b.value;if(E.breakpointId&&E.line){var S=u.get(E.breakpointId),x=void 0===S?void 0:r.get(S);x&&t.add(S),v.push({dapId:S,pid1Id:E.breakpointId,line:x&&x.line||E.line,verified:!!(null==x?void 0:x.verified),logMessage:E.logMessage||void 0})}}}catch(e){m=!0,y=e}finally{try{g||null==w.return||w.return()}finally{if(m)throw y}}e.set(h,v)}}}catch(e){o=!0,l=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw l}}var D=!0,k=!1,T=void 0;try{for(var _,R=r.entries()[Symbol.iterator]();!(D=(_=R.next()).done);D=!0){var I=(0,a._)(_.value,2),P=I[0],C=I[1];if(!t.has(P)){var N=(0,d.IT)((null===(M=C.source)||void 0===M?void 0:M.path)||(null===(L=C.source)||void 0===L?void 0:L.name)||""),A=C.line;if(N&&A){var O=e.get(N);O||(O=[],e.set(N,O));var Z=!1,F=!0,B=!1,G=void 0;try{for(var M,L,U,z=O[Symbol.iterator]();!(F=(U=z.next()).done);F=!0){var W=U.value;if(W.line===C.line){W.dapId=P,W.verified=C.verified,Z=!0;break}}}catch(e){B=!0,G=e}finally{try{F||null==z.return||z.return()}finally{if(B)throw G}}Z||O.push({dapId:P,line:A,verified:C.verified})}}}}catch(e){k=!0,T=e}finally{try{D||null==R.return||R.return()}finally{if(k)throw T}}return e}return{findPathByBreakpointId:function(e){var t=!0,r=!1,i=void 0;try{for(var o,u=n.entries()[Symbol.iterator]();!(t=(o=u.next()).done);t=!0){var l=(0,a._)(o.value,2),c=l[0];if(l[1].some(function(t){return t.breakpointId===e}))return c}}catch(e){r=!0,i=e}finally{try{t||null==u.return||u.return()}finally{if(r)throw i}}return null},getBreakpoints:s,flush:function(e){return l.apply(this,arguments)},handleDAPBreakpointEvent:function(e){var n=e.body,i=n.reason,u=n.breakpoint,a=u.id;if(null!=a){switch(i){case"changed":case"new":r.set(a,(0,o._)({},r.get(a),u));break;case"removed":r.delete(a);break;default:return}t(s())}},handlePID1BreakpointEvent:function(e){var r=e.absolutePath?(0,d.IT)(e.absolutePath):null;r&&(n.set(r,e.breakpoints||[]),t(s()))},handleDebugSessionEnded:function(){r.clear(),u.clear();var e=!0,i=!1,o=void 0;try{for(var l,c=n.entries()[Symbol.iterator]();!(e=(l=c.next()).done);e=!0){var f=(0,a._)(l.value,2),d=f[0],h=f[1];0===h.length&&n.delete(d)}}catch(e){i=!0,o=e}finally{try{e||null==c.return||c.return()}finally{if(i)throw o}}t(s())}}}(P,function(e){b.current=e}),x=(0,r.u)(!1),D=[],k=new h.s(function(e){if(D.push({time:Date.now(),direction:"in",data:e}),"event"===e.type)switch(e.event){case"continued":g.current="running";break;case"stopped":var t;g.current="paused",w.current=null!==(t=e.body.threadId)&&void 0!==t?t:null,E.emit("paused",e.body.reason),function(){O.apply(this,arguments)}();break;case"breakpoint":S.handleDAPBreakpointEvent(e)}else if("response"===e.type){var n=T.get(e.request_seq);n&&(T.delete(e.request_seq),n(e))}}),T=new Map,_=100;function R(){g.current="terminated",m.current=[],y.current=[],w.current=null,S.handleDebugSessionEnded(),x.current=!1}var I=!1;function P(e){return C.apply(this,arguments)}function C(){return(C=(0,i._)(function(e){return(0,c.Jh)(this,function(t){return[2,new Promise(function(t){var r,i=_++;T.set(i,t);var a=(0,u._)((0,o._)({},e),{type:"request",seq:i});D.push({time:Date.now(),direction:"out",data:a});var l={debugInput:{session:"main",adapterInput:(r=JSON.stringify(a),"Content-Length: ".concat(p.byteLength(r),"\r\n\r\n").concat(r))}};D.push({time:Date.now(),direction:"out",data:l}),n.send(l)})]})})).apply(this,arguments)}function N(e){return A.apply(this,arguments)}function A(){return(A=(0,i._)(function(e){var t;return(0,c.Jh)(this,function(r){switch(r.label){case 0:return D.push({time:Date.now(),direction:"out",data:e}),[4,n.request(e)];case 1:if(t=r.sent(),D.push({time:Date.now(),direction:"in",data:t}),t.error)throw t.error;return[2,t]}})})).apply(this,arguments)}function O(){return(O=(0,i._)(function(){var e,t,n;return(0,c.Jh)(this,function(r){switch(r.label){case 0:return m.current=[],y.current=[],[4,P({command:"stackTrace",arguments:{threadId:w.current}})];case 1:if(!(e=r.sent()).success||(m.current=e.body.stackFrames,0===m.current.length))return[2];return[4,P({command:"scopes",arguments:{frameId:m.current[0].id}})];case 2:if(!(t=r.sent()).success)return[2];return[4,Promise.all(t.body.scopes.map(function(e){return P({command:"variables",arguments:{variablesReference:e.variablesReference}}).then(function(t){return{response:t,parentVariableReference:e.variablesReference}})}))];case 3:return n=r.sent(),y.current=n.filter(function(e){return e.response.success}).reduce(function(e,t){var n=t.response,r=t.parentVariableReference;return e.concat(n.body.variables.map(function(e){return(0,u._)((0,o._)({},e),{parentVariableReference:r})}))},[]),[2]}})})).apply(this,arguments)}function Z(e){return F.apply(this,arguments)}function F(){return(F=(0,i._)(function(e){var t,r,i,o,u,a,l;return(0,c.Jh)(this,function(c){switch(c.label){case 0:if("terminated"!==g.current)throw Error("Cant start while debugger is already running");return g.current="preinitializing",m.current=[],[4,v()];case 1:if(c.sent(),"stopping"===g.current)return g.current="terminated",[2];return I=!0,g.current="initializing",i={session:"main",readOnly:!1},e&&(i.debuggerId=e.debuggerOption.id,e.filePath&&(i.filePath=e.filePath)),o={debugMain:i},D.push({time:Date.now(),direction:"out",data:o}),[4,n.request(o)];case 2:if(u=c.sent(),D.push({time:Date.now(),direction:"in",data:u}),u.error)return E.emit("output",u.error),g.current="terminated",[2];return[4,P({command:"initialize",arguments:{clientID:"replit",clientName:"replit.com",adapterID:"cppdbg",pathFormat:"path",linesStartAt1:!0,columnsStartAt1:!0,supportsEvaluateForHovers:!0,supportsVariableType:!0,supportsVariablePaging:!0,supportsRunInTerminalRequest:!1,locale:"en-us",supportsProgressReporting:!0,supportsInvalidatedEvent:!0}})];case 3:if(!(a=c.sent()).success)return g.current="terminated",[2];return x.current=!!(null===(t=a.body)||void 0===t?void 0:t.supportsStepBack),l=!(null===(r=a.body)||void 0===r?void 0:r.supportsConfigurationDoneRequest),[4,S.flush()];case 4:if(c.sent(),l)return[3,6];return[4,P({command:"configurationDone"})];case 5:c.sent(),c.label=6;case 6:return"initializing"===g.current&&(g.current="running"),E.emit("started",l),[2]}})})).apply(this,arguments)}function B(e,t){return G.apply(this,arguments)}function G(){return(G=(0,i._)(function(e,t){var n,r,i,o;return(0,c.Jh)(this,function(u){switch(u.label){case 0:return n=t.line,r=t.otIndex,i=t.otVersion,o=t.logMessage,[4,N({debugAddBreakpointRequest:{path:(0,d.om)(e)||e,line:n,otIndex:r,otVersion:i,logMessage:o}})];case 1:if(u.sent(),!("terminated"!==g.current))return[3,3];return[4,S.flush(e)];case 2:u.sent(),u.label=3;case 3:return E.emit("breakpoint","added"),[2]}})})).apply(this,arguments)}function M(e){return L.apply(this,arguments)}function L(){return(L=(0,i._)(function(e){var t;return(0,c.Jh)(this,function(n){switch(n.label){case 0:return t=S.findPathByBreakpointId(e),[4,N({debugRemoveBreakpointRequest:{breakpointId:e}})];case 1:if(n.sent(),!("terminated"!==g.current&&t))return[3,3];return[4,S.flush(t)];case 2:n.sent(),n.label=3;case 3:return E.emit("breakpoint","removed"),[2]}})})).apply(this,arguments)}function U(){return(U=(0,i._)(function(e,t){var n;return(0,c.Jh)(this,function(r){switch(r.label){case 0:if(!(n=S.findPathByBreakpointId(e)))return[2];return[4,N({debugUpdateBreakpointRequest:{breakpointId:e,logMessage:t.logMessage}})];case 1:if(r.sent(),!("terminated"!==g.current))return[3,3];return[4,S.flush(n)];case 2:r.sent(),r.label=3;case 3:return E.emit("breakpoint","updated"),[2]}})})).apply(this,arguments)}function z(){return(z=(0,i._)(function(e,t){var n,r,i;return(0,c.Jh)(this,function(o){switch(o.label){case 0:if(!(i=null===(r=b.current.get(e))||void 0===r?void 0:null===(n=r.find(function(e){return e.line===t.line&&void 0!==e.pid1Id}))||void 0===n?void 0:n.pid1Id))return[3,2];return[4,M(i)];case 1:return o.sent(),[3,4];case 2:return[4,B(e,t)];case 3:o.sent(),o.label=4;case 4:return[2]}})})).apply(this,arguments)}function W(e){return E.on("started",e),function(){E.removeListener("started",e)}}return n.onCommand(function(e){D.push({time:Date.now(),direction:"in",data:e});var t,n,r=e.debugOutput,i=e.debugState,o=e.debugBreakpointEvent,u=e.debugSessions;if(r){if("main"!==r.session)return;r.adapterOutput&&k.read(r.adapterOutput),r.output&&E.emit("output",r.output)}if(o&&S.handlePID1BreakpointEvent(o),i&&i.state===s.api.State.Stopped&&R(),((null==u?void 0:null===(t=u.sessions)||void 0===t?void 0:t.main)===s.api.State.Running||(null==i?void 0:i.state)===s.api.State.Running)&&"terminated"===g.current&&Z(),(null==u?void 0:null===(n=u.sessions)||void 0===n?void 0:n.main)===s.api.State.Stopped||(null==i?void 0:i.state)===s.api.State.Stopped){if(I){I=!1;return}R()}}),{state:g,stackFrames:m,variables:y,breakpoints:b,supportsStepBack:x,onOutput:function(e){return E.on("output",e),function(){E.removeListener("output",e)}},onStarted:W,onPaused:function(e){return E.on("paused",e),function(){E.removeListener("paused",e)}},onBreakpoint:function(e){return E.on("breakpoint",e),function(){E.removeListener("breakpoint",e)}},sendInput:function(e){return(0,i._)(function(){var t,r;return(0,c.Jh)(this,function(i){switch(i.label){case 0:return t={debugInput:{session:"main",input:e}},D.push({time:Date.now(),direction:"out",data:t}),[4,n.request(t)];case 1:if(r=i.sent(),D.push({time:Date.now(),direction:"in",data:r}),r.error)throw r.error;return[2]}})})()},fetchVariables:function(e){return(0,i._)(function(){var t;return(0,c.Jh)(this,function(n){switch(n.label){case 0:return[4,P({command:"variables",arguments:{variablesReference:e}})];case 1:if((t=n.sent()).success)return[2,t.body.variables.map(function(t){return(0,u._)((0,o._)({},t),{parentVariableReference:e})})];throw Error(t.message)}})})()},evaluate:function(e){var n=e.frameId,r=void 0===n?null===(t=m.current[0])||void 0===t?void 0:t.id:n,o=e.expression,u=e.context;return(0,i._)(function(){return(0,c.Jh)(this,function(e){switch(e.label){case 0:return[4,P({command:"evaluate",arguments:{frameId:r,expression:o,context:u}})];case 1:return[2,e.sent()]}})})()},addBreakpoint:B,removeBreakpoint:M,updateBreakpoint:function(e,t){return U.apply(this,arguments)},toggleBreakpoint:function(e,t){return z.apply(this,arguments)},start:Z,continue:function(){return(0,i._)(function(){return(0,c.Jh)(this,function(e){switch(e.label){case 0:return m.current=[],g.current="running",[4,P({command:"continue",arguments:{threadId:w.current}})];case 1:return e.sent(),[2]}})})()},reverseContinue:function(){return(0,i._)(function(){return(0,c.Jh)(this,function(e){switch(e.label){case 0:return m.current=[],g.current="running",[4,P({command:"reverseContinue",arguments:{threadId:w.current}})];case 1:return e.sent(),[2]}})})()},back:function(){return(0,i._)(function(){return(0,c.Jh)(this,function(e){switch(e.label){case 0:return g.current="running",[4,P({command:"stepBack",arguments:{threadId:w.current}})];case 1:return e.sent(),[2]}})})()},next:function(){return(0,i._)(function(){return(0,c.Jh)(this,function(e){switch(e.label){case 0:return g.current="running",[4,P({command:"stepIn",arguments:{threadId:w.current}})];case 1:return e.sent(),[2]}})})()},skip:function(){return(0,i._)(function(){return(0,c.Jh)(this,function(e){switch(e.label){case 0:return g.current="running",[4,P({command:"next",arguments:{threadId:w.current,granularity:"line"}})];case 1:return e.sent(),[2]}})})()},stepOut:function(){return(0,i._)(function(){return(0,c.Jh)(this,function(e){switch(e.label){case 0:return g.current="running",[4,P({command:"stepOut",arguments:{threadId:w.current}})];case 1:return e.sent(),[2]}})})()},stop:function(){return(0,i._)(function(){var e,t,r,i;return(0,c.Jh)(this,function(o){switch(o.label){case 0:if("terminated"===g.current)throw Error("Debugger already terminated");if(e=g.current,g.current="stopping","preinitializing"===e)return[2];if("initializing"!==e)return[3,2];return t=[],[4,Promise.race([new Promise(function(e){t.push(g.subscribe(function(){return e()}))}),new Promise(function(e){t.push(W(function(){return e()}))})])];case 1:if(o.sent(),t.forEach(function(e){return e()}),"terminated"===g.current)return[2];o.label=2;case 2:return r={debugStop:{session:"main"}},D.push({time:Date.now(),direction:"out",data:r}),[4,n.request(r)];case 3:if(i=o.sent(),D.push({time:Date.now(),direction:"in",data:i}),i.error)throw Error("Failed to stop debugger "+i.error);return[2]}})})()},getSource:function(e){return(0,i._)(function(){var t;return(0,c.Jh)(this,function(n){switch(n.label){case 0:return[4,P({command:"source",arguments:{source:{path:e}}})];case 1:if(!(t=n.sent()).success)throw Error(t.message);return[2,t.body.content]}})})()},getDebugLogs:function(){return Object.entries({state:g,stackFrames:m,variables:y,breakpoints:b,threadId:w}).map(function(e){var t=(0,a._)(e,2),n=t[0],r=t[1];return"".concat(n," = ").concat(JSON.stringify(r.current instanceof Map?(0,l._)(r.current):r.current,void 0,2))}).join("\n")+"\n\n"+D.map(function(e){return[new Date(e.time).toLocaleString(),"in"===e.direction?"->":"<-",JSON.stringify(e.data)].join(" ")}).join("\n")}}}({channel:t.channel,beforeRun:n}),e(null),function(){v.current=null}})})}}}},43891:function(e,t,n){n.d(t,{P:function(){return y},n:function(){return m}});var r=n(32477),i=n(74044),o=n(99149),u=n(43429),a=n(59808),l=n(1574),c=n(12834),s=n(50199),f=n(50782),d=n(11516),h=n(25425),p=i.Dy.Array(i.Dy.String()),v=function(e){return"repl:hiddenFiles:"+e},g={get:function(e){var t=d.Z.get(v(e));return o.B4.Check(p,t)?t:null},set:function(e,t){d.Z.set(v(e),t)}},m=function(e){var t=(0,h.P5)({controlName:"flag-filetree-local-cache",logFlagToAnalytics:!1}),n=(0,f.Z)(),i=(0,c.Z)(),o=(0,r._)(u.useState(function(){return t?g.get(n):null}),2),l=o[0],s=o[1];return u.useEffect(function(){return e.watch(function(e){var r=function(e){t&&g.set(n,e),s(e)};if(i.current){if(e.error){e.error===a.Yt.NotFound&&r([]);return}if(!e.config.hidden){r([]);return}r(e.config.hidden)}})},[e,n,i,t]),l},y=function(e){var t=m(e);return(0,s.Z)(function(){return null===t?null:t.map(function(e){return(0,l.Z)(e)||e})},[t])}},50431:function(e,t,n){n.d(t,{C:function(){return a},Gw:function(){return u},Tg:function(){return l},so:function(){return i},ss:function(){return c},tc:function(){return o}});var r=n(95025);function i(e,t){for(var n=[],r=e.split(t),i=0;i<r.length;i++){var o=r[i].trim();""!==o&&n.push(o)}return n}function o(e){return e.replace(/^<|>$/g,"")}function u(e){return"'".concat(e.replace(/'/g,"'\\''"),"'")}function a(e){return e.replace(/^refs\/(?:heads|remotes)\//,"")}function l(e){if(-1===e.indexOf("/")||e.startsWith("refs/heads/"))return[null,null];if(e.startsWith("refs/remotes/")){var t=(0,r._)(e.split("/"));return[t[2],t.slice(3).join("/")]}var n=(0,r._)(e.split("/"));return[n[0],n.slice(1).join("/")]}function c(e){return e.replace(/^refs\/remotes\//,"")}},55103:function(e,t,n){n.d(t,{Z:function(){return w},h:function(){return u}});var r,i,o,u,a=n(34142),l=n(32477),c=n(87682),s=n(50431),f="# branch.oid ",d="# branch.head ",h="# branch.upstream ",p="# branch.ab ",v="# stash ",g=/^(\S)(\S) (\S{4}) (\S+) (\S+) (\S+) (\S+) (\S+) (.*)$/,m=/^([RC])([0-9]+) (.+?)\t(.+)$/,y=/^(\S)(\S) (\S{4}) (\S+) (\S+) (\S+) (\S+) (\S+) (\S+) (\S+) (.*)$/,b=/([RC][0-9]+ .+?)\0(.+?(?:\0|$))/g;function w(e){return E.apply(this,arguments)}function E(){return(E=(0,a._)(function(e){var t,n,r,i,o,u,a,w,E,x,D,k,T,_,R,I,P,C,N,A,O,Z;return(0,c.Jh)(this,function(c){switch(c.label){case 0:return t=null,n=null,r=null,i=0,o=[],u=["-z","--porcelain=v2","--branch","--show-stash","--untracked-files=all"],[4,e("git status ".concat(u.join(" ")),{serviceMethod:"git-status"})];case 1:if((a=c.sent()).error)return[2,a];w=a.output.replaceAll(b,"$1	$2"),E=(0,s.so)(w,"\x00"),x=!0,D=!1,k=void 0;try{for(T=E[Symbol.iterator]();!(x=(_=T.next()).done);x=!0)(R=_.value).startsWith("#")?R.startsWith(f)?(I=R.substring(f.length),"(initial)"!==I&&(t=I)):R.startsWith(d)?(P=R.substring(d.length),"(detached)"!==P&&(n=P)):R.startsWith(h)?(C=R.substring(h.length),"(not queried)"!==C&&(r={branch:C,ahead:0,behind:0})):R.startsWith(p)?r&&(A=(N=(0,l._)(R.substring(p.length).split(" ").map(function(e){return Math.abs(parseInt(e,10))}),2))[0],O=N[1],r.ahead=A,r.behind=O):R.startsWith(v)&&(i=parseInt(R.substring(v.length),10)):(Z=function(e){var t=e[0];switch(e=e.substring(2),t){case"!":default:return null;case"?":return{type:{index:"UNTRACKED",worktree:"UNTRACKED"},path:e,staged:!1,unmerged:!1};case"u":var n=e.match(y);if(!n)return null;var r=(0,l._)(n,12),i=r[1],o=r[2],u=r[11],a=S(i),c=S(o);return{type:{index:a,worktree:c},path:u,staged:"UNMODIFIED"!==a,unmerged:!0};case"1":case"2":var s=e.match(g);if(!s)return null;var f=(0,l._)(s,10),d=f[1],h=f[2],p=f[9],v=S(d),b=S(h),w="UNMODIFIED"!==v;if("1"===t)return{type:{index:v,worktree:b},path:p,staged:w,unmerged:!1};if("2"===t){var E=p.match(m);if(!E)return null;var x=(0,l._)(E,5),D=x[1],k=x[2],T=x[3],_=x[4];return{type:{index:v,worktree:b},path:T,staged:w,unmerged:!1,source:{type:function(e){switch(e){case"R":default:return"RENAMED";case"C":return"COPIED"}}(D),score:parseInt(k,10),path:_}}}return null}}(R),null!==Z&&o.push(Z))}catch(e){D=!0,k=e}finally{try{x||null==T.return||T.return()}finally{if(D)throw k}}return[2,{commit:t,branch:n,upstream:r,stashes:i,changes:o,error:null}]}})})).apply(this,arguments)}function S(e){switch(e){case".":default:return"UNMODIFIED";case"M":return"MODIFIED";case"T":return"TYPE_CHANGED";case"A":return"ADDED";case"D":return"DELETED";case"R":return"RENAMED";case"C":return"COPIED";case"U":return"UNMERGED"}}(r=o||(o={})).ORDINARY="1",r.RENAMED_OR_COPIED="2",r.UNMERGED="u",r.UNTRACKED="?",r.IGNORED="!",(i=u||(u={})).UNTRACKED="UNTRACKED",i.UNMODIFIED="UNMODIFIED",i.MODIFIED="MODIFIED",i.TYPE_CHANGED="TYPE_CHANGED",i.ADDED="ADDED",i.DELETED="DELETED",i.RENAMED="RENAMED",i.COPIED="COPIED",i.UNMERGED="UNMERGED"},20298:function(e,t,n){n.d(t,{s:function(){return f}});var r,i=n(23026),o=n(48900),u=n(47507),a=n(88422).lW,l=new TextEncoder,c=new TextDecoder,s=(r=/[a-z\d_-]+: [a-z\d_ :;.,/"'?!(){}[\]@<>=+*#$&`|~^%-]+/.source,RegExp("(".concat(r,"\\r\\n)*(").concat(r,")$"),"i")),f=function(){"use strict";function e(t){(0,i._)(this,e),this.onMessage=t,this.buffer=new Uint8Array,this.read=this.read.bind(this)}var t=e.prototype;return t.consumeHeaders=function(){var e=function(e){var t=e.findIndex(function(t,n){return 13===t&&10===e[n+1]&&13===e[n+2]&&10===e[n+3]});if(-1!==t){var n=c.decode(e.slice(0,t)),r=n.match(s);if(!r)throw u.kg.error("Failed to parse LSP header, no matches",{fragment:n}),Error("Unable to match header, text: ".concat(n));var i=Object.create(null),o=r[0].split("\r\n"),a=!0,l=!1,f=void 0;try{for(var d,h=o[Symbol.iterator]();!(a=(d=h.next()).done);a=!0){var p=d.value,v=p.indexOf(":");if(-1===v)throw u.kg.error("Failed to parse LSP header, missing colon",{fragment:n}),Error('Message header must separate key and value using ":"');var g=p.substr(0,v),m=p.substr(v+1).trim();if("Content-Length"===g){var y=parseInt(m,10);if(isNaN(y))throw u.kg.error("Failed to parse LSP header, NaN content length",{fragment:n}),Error("Content-Length value must be a number.");i[g]=parseInt(m,10)}else i[g]=m}}catch(e){l=!0,f=e}finally{try{a||null==h.return||h.return()}finally{if(l)throw f}}if(null==i["Content-Length"])throw u.kg.error("Failed to parse LSP header, no Content-Length",{fragment:n}),Error("Header must provide a Content-Length property.");return{headerLength:t,value:i}}}(this.buffer);if(e)return this.buffer=this.buffer.slice(e.headerLength+4),e},t.read=function(e){for(this.buffer=(t=this.buffer,n=l.encode(e),(r=new Uint8Array(t.length+n.length)).set(t),r.set(n,t.length),r);null!==(i=this.headers)&&void 0!==i?i:this.headers=this.consumeHeaders();){var t,n,r,i,s=this.headers.value["Content-Length"];if(this.buffer.length<s)return;var f=function(e,t,n){var r=c.decode(e.slice(0,t));try{return{json:JSON.parse(r),buffer:e.slice(t)}}catch(f){var i=a.from(e).toString();if(f instanceof SyntaxError&&"Unexpected end of JSON input"===f.message){u.kg.info("Failed to parse LSP message, falling back to json parsing",{buffer:i,length:t,rpcContent:r,attempt:"original-length",headers:JSON.stringify(n)});var o=function(e,t){for(var n=0,r=0,i=!1,o=t;o<e.length+1;o++){if(o!==t&&!n&&!r&&!i)return o;var u=e[o];switch(u){case 92:o++;continue;case 34:i=!i;continue}if(!i)switch(u){case 123:n++;break;case 125:n--;break;case 91:r++;break;case 93:r--}}return -1}(e,0);if(-1!==o){var l=e.slice(0,o),s=c.decode(l);try{return{json:JSON.parse(s),buffer:e.slice(o)}}catch(e){u.kg.error("Failed to parse LSP message",{givenError:e,buffer:i,length:t,rpcContent:r,attempt:"recomputed-length"})}}}else u.kg.error("Failed to parse LSP message",{givenError:f,buffer:i,length:t,rpcContent:r,attempt:"content-length"});return{json:void 0,buffer:e.slice(t)}}}(this.buffer,s,this.headers),d=f.json,h=f.buffer;if(this.headers=void 0,this.buffer=h,void 0!==d)try{this.onMessage(d)}catch(e){o.Tb(e)}}},e}()},35375:function(e,t,n){n.d(t,{DL:function(){return i},OD:function(){return b},TE:function(){return S},UK:function(){return m},wy:function(){return g}});var r,i,o=n(34142),u=n(45903),a=n(25e3),l=n(21289),c=n(87682),s=n(48900),f=n(64461),d=n(69451),h=n.n(d),p=n(40028),v=n(59173),g=new Set([80,8099,9e3]),m=new Set([3e3,3001,3002,3003,4200,5e3,5173,6e3,6800,80,8e3,8008,8080,8081,8099,9e3]);function y(e,t){return new Set(Array.from(e).filter(function(e){return!t.has(e)}))}function b(e){var t=e.type;switch(t){case"FORWARDED":case"MISCONFIGURED":return e.externalPort;case"INTERNAL_ONLY":case"NO_MORE_EXTERNAL_PORTS_AVAILABLE":case"CONFIG_MISSING":return;default:(0,p.Z)(t)}}function w(e,t){return t?y(e,new Set(t.map(function(e){return b(e.configuration)}))):e}function E(){return(E=(0,o._)(function(e){var t,n,r,i,o,u,a,l,s,f;return(0,c.Jh)(this,function(c){if(t=e.forwardableExternalPorts,n=e.portsState,r=e.writeDotReplitPortsConfig,i=e.portInfo,null===n.current)throw Error("processOpenedPort can only assign ports if dotReplit config was read");if(o=n.current.find(function(e){return e.configuration.localPort===i.port}),u={pid:i.pid,cgroup:i.cgroup,address:i.address,cmdline:i.cmdline},void 0!==o)return[2,{isOpen:!0,processInfo:u,configuration:o.configuration}];if(0===(a=w(t,n.current)).size)return[2,{isOpen:!0,processInfo:u,configuration:{type:"NO_MORE_EXTERNAL_PORTS_AVAILABLE",localPort:i.port}}];if(l=a.has(80),s=a.has(i.port),void 0===(f=l?80:s?i.port:Array.from(a).sort()[0]))throw Error("this is impossible, we already confirmed that `unmappedExternalPorts.size` *is not* 0, but Typescript doesn't get it");return r(),[2,{isOpen:!0,processInfo:u,configuration:{type:"FORWARDED",localPort:i.port,externalPort:f}}]})})).apply(this,arguments)}function S(e){var t=e.container,n=e.dotReplit,r=e.dotdevUrlEnabled,i=e.enableBetterPortHandling,d=void 0!==i&&i,S=(0,v.u)([]),x=(0,v.u)(null),D=(0,v.u)(!1),k=h()(function(){if(x.current){var e=x.current.map(function(e){var t=e.configuration.type;switch(t){case"FORWARDED":case"MISCONFIGURED":return{localPort:e.configuration.localPort,externalPort:e.configuration.externalPort};case"INTERNAL_ONLY":return{localPort:e.configuration.localPort};case"NO_MORE_EXTERNAL_PORTS_AVAILABLE":case"CONFIG_MISSING":return!1;default:(0,p.Z)(t)}}).filter(Boolean).sort(function(e,t){return e.localPort-t.localPort});n.updateDotReplit([{op:"add",path:"ports",value:JSON.stringify(e)}])}},1e3,{leading:!1,trailing:!0});function T(){D.set(!0),k()}function _(){return(_=(0,o._)(function(e,t){return(0,c.Jh)(this,function(n){if(!d)throw Error("updating .replit ports mapping is only available when we auto-udpate .replit");return x.update((0,f.Uy)(function(n){var r=null==n?void 0:n.find(function(t){return t.configuration.localPort===e}),i=void 0!==t?{type:"FORWARDED",localPort:e,externalPort:t}:{type:"INTERNAL_ONLY",localPort:e};r?r.configuration=i:(n||(n=[]),n.push({isOpen:!1,configuration:i}))})),T(),[2]})})).apply(this,arguments)}function R(){return(R=(0,o._)(function(e,t){return(0,c.Jh)(this,function(n){if(!d)throw Error("updating .replit ports mapping is only available when we auto-udpate .replit");return x.update((0,f.Uy)(function(n){var r;void 0!==(r=void 0!==t?null==n?void 0:n.findIndex(function(n){return n.configuration.localPort===e&&("FORWARDED"===n.configuration.type||"MISCONFIGURED"===n.configuration.type)&&n.configuration.externalPort===t}):null==n?void 0:n.findIndex(function(t){return t.configuration.localPort===e}))&&(null==n||n.splice(r,1))})),T(),[2]})})).apply(this,arguments)}return d?function(e){var t=e.container,n=e.dotReplit,r=e.portsState,i=e.writeDotReplitPortsConfig,o=e.isThisServiceUpdatingDotReplit,c=e.forwardableExternalPorts;function f(e){return e.sort(function(e,t){var n,r;return(null!==(n=e.configuration.localPort)&&void 0!==n?n:0)-(null!==(r=t.configuration.localPort)&&void 0!==r?r:0)})}var d=[];function h(e){if(e.isForwarded)try{(function(e){return E.apply(this,arguments)})({forwardableExternalPorts:c,portsState:r,writeDotReplitPortsConfig:i,portInfo:e}).then(function(t){r.update(function(n){if(!n)throw Error("processOpenedPort can only execute if we red .replit first");var r=n.findIndex(function(t){return t.configuration.localPort===e.port});-1===r&&(r=n.length);var i=n.slice();return i[r]=t,f(i)})})}catch(e){throw s.$e(function(t){t.setTag("service","ports"),s.Tb(e)}),e}}function p(e){try{r.update(function(t){if(!t)throw Error("onPortClosed can only execute if we red .replit first");var n=t.findIndex(function(t){return t.configuration.localPort===e.port});if(-1===n)return t;var r=t[n],i=t.slice();return i[n]={isOpen:!1,configuration:r.configuration},i})}catch(e){throw s.$e(function(t){t.setTag("service","ports"),s.Tb(e)}),e}}t.onPortOpened(function(e){null===r.current?d.push({type:"portOpen",portInfo:e}):h(e)}),t.onPortClosed(function(e){null===r.current?d.push({type:"portClose",portInfo:e}):p(e)}),n.watch(function(e){var t,n=e.config,i=null!==(t=null==n?void 0:n.ports)&&void 0!==t?t:[];if(!0===o.current){var s=r.current;if(!s||i.length!==s.length)return;i.every(function(e,t){var n,r=s[t];return e.localPort===r.configuration.localPort&&e.externalPort===(null!==(n=b(r.configuration))&&void 0!==n?n:0)})&&o.set(!1);return}r.update(function(e){e||(e=[]);var t=new Set(i.map(function(e){return e.localPort}).filter(function(e){return null!=e})),n=new Set(e.map(function(e){return e.configuration.localPort})),r=new Set(e.filter(function(e){return e.isOpen}).map(function(e){return e.configuration.localPort})),o=y(t,n),s=(g=new Set((0,l._)(Array.from(t)).concat((0,l._)(Array.from(r)))),new Set(Array.from(n).filter(function(e){return g.has(e)}))),d=[],h=!0,p=!1,v=void 0;try{for(var g,m,b=s[Symbol.iterator]();!(h=(m=b.next()).done);h=!0)!function(){var t=m.value,n=e.find(function(e){return e.configuration.localPort===t}),r=i.find(function(e){return e.localPort===t});if(!n)throw Error("couldn't find match for local port: ".concat(t));if(!r)return d.push((0,a._)((0,u._)({},n),{configuration:{type:"CONFIG_MISSING",localPort:n.configuration.localPort}}));var o=n.configuration;o=null!=r.externalPort&&0!==r.externalPort?{type:w(c,d).has(r.externalPort)?"FORWARDED":"MISCONFIGURED",localPort:n.configuration.localPort,externalPort:r.externalPort}:{type:"INTERNAL_ONLY",localPort:n.configuration.localPort},d.push((0,a._)((0,u._)({},n),{configuration:o}))}()}catch(e){p=!0,v=e}finally{try{h||null==b.return||b.return()}finally{if(p)throw v}}var E=!0,S=!1,x=void 0;try{for(var D,k=o[Symbol.iterator]();!(E=(D=k.next()).done);E=!0)!function(){var e=D.value,t=i.find(function(t){return t.localPort===e});if(!t)throw Error("couldn't find match for local port: ".concat(e));var n=null!=t.externalPort&&0!==t.externalPort?t.externalPort:void 0;if(void 0!==n){var r=w(c,d).has(n);d.push({isOpen:!1,configuration:{type:r?"FORWARDED":"MISCONFIGURED",localPort:e,externalPort:n}})}else d.push({isOpen:!1,configuration:{type:"INTERNAL_ONLY",localPort:e}})}()}catch(e){S=!0,x=e}finally{try{E||null==k.return||k.return()}finally{if(S)throw x}}return f(d)}),d.length>0&&(d.forEach(function(e){var t=e.type,n=e.portInfo;"portOpen"===t?h(n):"portClose"===t&&p(n)}),d=[])})}({container:t,dotReplit:n,portsState:x,writeDotReplitPortsConfig:T,isThisServiceUpdatingDotReplit:D,forwardableExternalPorts:void 0!==r&&r?m:g}):function(e){var t=e.container,n=e.openedPorts;function r(e){return e.sort(function(e,t){return e.localPort-t.localPort})}t.onPortOpened(function(e){e.isForwarded&&n.update(function(t){var n=t.findIndex(function(t){return t.localPort===e.port});-1===n&&(n=t.length);var i=t.slice();return i[n]={localPort:e.port,externalPort:e.externalPort},r(i)})}),t.onPortClosed(function(e){n.update(function(t){return r(t.filter(function(t){return t.localPort!==e.port}))})})}({container:t,openedPorts:S}),{openedPorts:S,updateDotReplitPortsMapping:function(e,t){return _.apply(this,arguments)},removeDotReplitPortsMapping:function(e,t){return R.apply(this,arguments)},portsState:x}}(r=i||(i={})).FORWARDED="FORWARDED",r.INTERNAL_ONLY="INTERNAL_ONLY",r.NO_MORE_EXTERNAL_PORTS_AVAILABLE="NO_MORE_EXTERNAL_PORTS_AVAILABLE",r.MISCONFIGURED="MISCONFIGURED",r.CONFIG_MISSING="CONFIG_MISSING"},80388:function(e,t,n){n.d(t,{N5:function(){return u},f0:function(){return o},gs:function(){return a},i7:function(){return i}});var r=Object.values(n(72720).Z.multiplayer);function i(e){var t={};return r.forEach(function(e){t[e]=0}),e.forEach(function(e){t[e.color]++}),Object.keys(t).sort(function(e,n){return t[e]-t[n]})[0]}function o(e){var t=e.sessions.sort(function(e,t){return e.timestamp-t.timestamp}),n=!0,r=!1,i=void 0;try{for(var o,u=t[Symbol.iterator]();!(n=(o=u.next()).done);n=!0){var a=o.value;if(a.activeFile)return a.activeFile}}catch(e){r=!0,i=e}finally{try{n||null==u.return||u.return()}finally{if(r)throw i}}return null}function u(e,t){var n=t.find(function(t){return t.sessions.some(function(t){return t.id===e})});if(!n)throw Error("Expected user with session ID ".concat(e));return n}function a(e){var t=e.seconds,n=e.nanos;return Number(t||0)+(n||0)/1e9}},85492:function(e,t,n){n.d(t,{Z:function(){return k}});var r,i,o,u=n(34142),a=n(87682),l=n(18107),c=n(83493),s=n(47001),f=n(47507),d=n(45903),h=n(58962),p=n(12130),v=n(73926),g=n.n(v),m=n(64461),y=n(23026);(i||(i={})).MESSAGE="MESSAGE";var b=function(){"use strict";function e(t){(0,y._)(this,e),this.buffer=Array(t).fill(null),this.start=0,this.end=0,this.isFull=!1}var t=e.prototype;return t.write=function(e){this.buffer[this.end]=e,this.end=(this.end+1)%this.buffer.length,this.isFull&&(this.start=(this.start+1)%this.buffer.length),this.end===this.start&&(this.isFull=!0)},t.readAll=function(){return this.start!==this.end||this.isFull?this.start<this.end?this.buffer.slice(this.start,this.end).join(""):this.buffer.slice(this.start).concat(this.buffer.slice(0,this.end)).join(""):""},e}();function w(e){var t=new b(e.maxHistorySize),n=(0,c.ZP)();return{emitMessage:function(e){t.write(e),n.emit("MESSAGE",e)},onMessage:function(e){return n.on("MESSAGE",e),Promise.resolve().then(function(){return e(t.readAll())}),function(){return n.removeListener("MESSAGE",e)}}}}var E=n(59868),S=n(30671);function x(e){return 1e3*e.seconds+e.nanos/1e6}var D="\x1b[?25l";function k(e){var t;if("outputs"===e.mode?t=function(e){var t,n,r,i,o,s,v,y,b,k,T,_,R,I,P,C,N,A=e.container,O=e.toolchain,Z=e.beforeRun,F=e.packager,B=e.debuggest,G=(0,c.ZP)(),M=null,L={runId:g()(),runState:l.Ah.OFFLINE,runningStage:"NONE",outputBlocks:[]};function U(e){L=(0,m.Uy)(L,e)}function z(e){var t=L.outputBlocks.find(function(t){return t.id===e});if(!t)throw Error("can't find block for id: ".concat(e));G.emit(l.zW.BLOCK_CHANGED,t)}function W(){G.emit(l.zW.ALL_BLOCKS_CHANGED,L.outputBlocks)}function H(e){L.runState!==e&&(U(function(t){t.runState=e}),G.emit(l.zW.STATE_CHANGE,e))}function j(){if(!M){H(l.Ah.OFFLINE);return}if("BEFORE_RUN"===L.runningStage){H(l.Ah.BEFORE_RUN);return}if("STOPPING"===L.runningStage){H(l.Ah.STOPPING);return}if("NONE"!==L.runningStage){H(l.Ah.RUNNING);return}H(l.Ah.IDLE)}function V(e,t){var n=(null!=t?t:L).outputBlocks.filter(function(t){return t.type===e}),r=n[n.length-1];if(r)return r}function X(e,t){var n;U(function(r){var i=V(e,r);i&&(n=i.id,t(i))}),n&&z(n)}function J(){return(J=(0,u._)(function(e){return(0,a.Jh)(this,function(t){var n;return[2,(0,S.GK)("outputs.run",(n=(0,u._)(function(t){var n,r,i,o,c,s,h,v,m,y;return(0,a.Jh)(this,function(b){switch(b.label){case 0:if(L.runState!==l.Ah.IDLE&&L.runState!==l.Ah.STOPPING)throw Error("Cannot run while state is not IDLE or STOPPING, got state: "+L.runState);return i=L.outputBlocks.length>1&&L.outputBlocks[L.outputBlocks.length-1],(0,E.j)(E.U3.WS_CONSOLE_OUTPUT_STARTED,{replId:null===(n=A.getContext())||void 0===n?void 0:n.repl.id,runId:L.runId,lastBlock:i?(0,d._)({type:i.type,isDone:i.isDone,endTime:i.endTime,startTime:i.startTime},i.type===l.kH.EXECUTION?{executionMode:i.data.executionMode,exitCode:i.data.exitCode,stderr:i.data.stderr}:{},i.type===l.kH.DEBUGGER?{debugState:i.data.debugState}:{}):void 0,previousBlockNumber:L.outputBlocks.length,previousBlocksAvgTimeMs:L.outputBlocks.length>1?Math.floor(L.outputBlocks.reduce(function(e,t){return t.endTime&&t.startTime?e+(t.endTime-t.startTime):e},0)):void 0}),o=g()(),U(function(e){e.runId=o,e.runningStage="BEFORE_RUN"}),G.emit(l.zW.LOCAL_RUN),j(),!e&&(s=(0,p.Z)(O.configs.current,[],null,(null===(c=O.configs.current)||void 0===c?void 0:c.entrypoint)||null)).length>0&&(e=s[0]),[4,Z(h=f.kg.timeStart({runnerId:null==e?void 0:e.runner.id,filePath:null==e?void 0:e.filePath,isInterpreter:null==e?void 0:e.runner.interpreter,replLanguage:null===(r=A.getContext())||void 0===r?void 0:r.repl.language}),{runId:o,channelId:null==M?void 0:M.id,type:"outputs",runConfig:e,ctx:t})];case 1:if(b.sent(),L.runId!==o||"NONE"===L.runningStage||"SERVER"===L.runningStage)return[2];if(!M)throw Error("State is RUNNING but outputs is null?");if("open"!==M.status)return[2];return(v=K()).isStopped||v.stop(),m={},e&&(m.runnerId=e.runner.id,m.filePath=e.filePath),y=M,[4,(0,S.nO)(t,"timeToRunning",(0,u._)(function(){var e,t;return(0,a.Jh)(this,function(n){switch(n.label){case 0:return e=performance.now(),y.send({runMain:m}),[4,new Promise(function(e){var t=y.onCommand(function(n){"state"===n.body&&(t(),e())})})];case 1:return n.sent(),t=performance.now()-e,h("run finished",{timeToRunningMs:t}),[2]}})}))];case 2:return b.sent(),[2]}})}),function(e){return n.apply(this,arguments)}))]})})).apply(this,arguments)}function K(){var e=B.mainClient.current,t=null==e?void 0:e.state.current;return{client:e,state:t,sendInput:function(t){return null==e?void 0:e.sendInput(t)},stop:function(){return null==e?void 0:e.stop()},isRunning:"running"===t,isStopped:null==t||"terminated"===t}}function q(){return(q=(0,u._)(function(e){var t,n;return(0,a.Jh)(this,function(r){if(L.runState===l.Ah.OFFLINE)return[2];if(t=K(),n=L.outputBlocks[L.outputBlocks.length-1].type===l.kH.DEBUGGER,t.isRunning&&n&&t.sendInput(e),L.runState!==l.Ah.IDLE&&L.runState!==l.Ah.RUNNING)throw Error("Can only send input when running or idle");if(!M)throw Error("State is not OFFLINE but outputs is null?");return"open"!==M.status||M.send({input:e}),[2]})})).apply(this,arguments)}return n=(t={packager:F,updateState:U,getRunningBlockOfType:V,updateRunningBlockOfType:X,emitBlockUpdate:z}).packager,r=t.updateState,i=t.getRunningBlockOfType,o=t.updateRunningBlockOfType,s=t.emitBlockUpdate,(v=[]).push(n.onOutput(function(e){var t=i(l.kH.PACKAGER);null==t||t.data.emitMessage(e.replace(/\n/g,"\n\r"))})),v.push(n.onError(function(e){o(l.kH.PACKAGER,function(t){t.error?t.error+="\n"+e:t.error=e})})),v.push(n.onStateChanged(function(e){if(e){var t=g()();r(function(e){e.outputBlocks.push({id:t,localStartTime:Date.now(),isDone:!1,visualState:l.MZ.EXPANDED,type:l.kH.PACKAGER,data:(0,d._)({},w({maxHistorySize:4e3}))}),e.outputBlocks.length>20&&e.outputBlocks.shift()}),s(t)}else o(l.kH.PACKAGER,function(e){e.data.emitMessage(D),e.localEndTime=Date.now(),e.isDone=!0})})),T=(y={debuggest:B,updateState:U,updateRunningBlockOfType:X,getRunningBlockOfType:V,emitRunState:H,emitBlockUpdate:z,stopCurrentRun:function(){U(function(e){e.runningStage="BEFORE_RUN"}),null==M||M.send({clear:{}})}}).debuggest,_=y.updateState,R=y.updateRunningBlockOfType,I=y.getRunningBlockOfType,P=y.emitBlockUpdate,C=y.emitRunState,N=y.stopCurrentRun,T.mainClient.subscribe(function(e){e&&(null==k||k(),null==b||b(),k=e.state.subscribe(function(e){if("initializing"===e){N();var t=g()();_(function(e){e.outputBlocks.push({id:t,localStartTime:Date.now(),isDone:!1,type:l.kH.DEBUGGER,visualState:l.MZ.EXPANDED,data:(0,d._)({debugState:"paused"},w({maxHistorySize:4e3}))})}),P(t),C(l.Ah.RUNNING)}"paused"===e&&R(l.kH.DEBUGGER,function(e){e.data.debugState="paused"}),"running"===e&&R(l.kH.DEBUGGER,function(e){e.data.debugState="running"}),"stopping"===e&&C(l.Ah.STOPPING),"terminated"===e&&(R(l.kH.DEBUGGER,function(e){e.localEndTime=Date.now(),e.data.emitMessage(D),e.isDone=!0}),C(l.Ah.IDLE))}),b=e.onOutput(function(e){var t=I(l.kH.DEBUGGER);null==t||t.data.emitMessage(e)}))}),A.openChannel({name:"output",service:"output"},function(e){var t=e.channel;return M=t,j(),t.onCommand(function(e){if(null!=e.state){var t=e.state===h.api.State.Stopped;"STOPPING"===L.runningStage&&t&&U(function(e){e.runningStage="NONE"}),t?"SERVER"===L.runningStage&&U(function(e){e.runningStage="NONE"}):U(function(e){e.runningStage="SERVER"}),j();return}if(null!=e.outputBlockStartEvent&&null!=e.outputBlockStartEvent.measureStartTime){if(void 0!==L.outputBlocks.find(function(e){return e.type===l.kH.EXECUTION&&!e.isDone}))return;var n=e.outputBlockStartEvent,r=n.cgroup,i=n.executionMode,o=x(n.measureStartTime),u=g()();U(function(e){e.outputBlocks.push({id:u,localStartTime:Date.now(),startTime:o,isDone:!1,type:l.kH.EXECUTION,visualState:l.MZ.EXPANDED,data:(0,d._)({cgroup:r,executionMode:i===h.api.OutputBlockStartEvent.ExecutionMode.Run?"run":"interpret"},w({maxHistorySize:4e3}))}),e.outputBlocks.length>20&&e.outputBlocks.shift()}),z(u)}if(null!=e.output){var a=V(l.kH.EXECUTION);null==a||a.data.emitMessage(e.output)}if(null!=e.hint){var c=V(l.kH.EXECUTION);null==c||c.data.emitMessage("\r\n\x1b[0m\x1b[33m".concat(e.hint.text,"\x1b[0m\r\n"))}if(null!=e.stderr&&X(l.kH.EXECUTION,function(t){t.data.stderr=(t.data.stderr||"")+e.stderr}),null!=e.error){var s=e.error;X(l.kH.EXECUTION,function(e){e.error?e.error+="\n"+s:e.error=s})}if(null!=e.outputBlockEndEvent&&null!=e.outputBlockEndEvent.measureEndTime){var f,p=e.outputBlockEndEvent.exitCode;(0,E.j)(E.U3.WS_CONSOLE_OUTPUT_RAN,{exitCode:p,replId:null===(f=A.getContext())||void 0===f?void 0:f.repl.id,runId:L.runId});var v=x(e.outputBlockEndEvent.measureEndTime);X(l.kH.EXECUTION,function(e){e.data.emitMessage(D),e.data.exitCode=p,e.localEndTime=Date.now(),e.endTime=v,e.isDone=!0})}}),function(){M=null,U(function(e){e.runId=g()(),e.runState=l.Ah.OFFLINE,e.runningStage="NONE",e.outputBlocks.forEach(function(e){if(!e.isDone){e.data.emitMessage(D),e.localEndTime=Date.now(),e.isDone=!0;var t="Connection was lost";e.error?e.error+="\n"+t:e.error=t}})}),j(),W()}}),{mode:"outputs",run:function(e){return J.apply(this,arguments)},stopRun:function(){if(L.runState===l.Ah.RUNNING){var e=K();if(!e.isStopped){e.stop(),U(function(e){e.runningStage="STOPPING"}),j();return}if("BEFORE_RUN"===L.runningStage){U(function(e){e.runningStage="NONE"}),j();return}U(function(e){e.runningStage="STOPPING"}),j(),null==M||M.send({clear:{}})}},sendInput:function(e){return q.apply(this,arguments)},onLocalRun:function(e){return G.on(l.zW.LOCAL_RUN,e),function(){G.removeListener(l.zW.LOCAL_RUN,e)}},onStateChanged:function(e){return G.on(l.zW.STATE_CHANGE,e),function(){return G.removeListener(l.zW.STATE_CHANGE,e)}},getRunState:function(){return L.runState},getOutputBlocks:function(){return L.outputBlocks},clearBlockHistory:function(){U(function(e){e.outputBlocks=e.outputBlocks.filter(function(e){return!e.isDone})}),W()},onBlockChanged:function(e){return G.on(l.zW.BLOCK_CHANGED,e),function(){return G.removeListener(l.zW.BLOCK_CHANGED,e)}},onAllBlocksChanged:function(e){return G.on(l.zW.ALL_BLOCKS_CHANGED,e),function(){return G.removeListener(l.zW.ALL_BLOCKS_CHANGED,e)}},resizeTerminalForBlock:function(e,t){if(M&&"open"===M.status){var n=L.outputBlocks.find(function(t){return t.id===e});if(!n)throw Error("tried to resize terminal of non-existing block");n.isDone||M.send({resizeTerm:t})}},startBlock:function(e){var t=g()();return U(function(n){n.outputBlocks.push({id:t,localStartTime:Date.now(),isDone:!1,visualState:l.MZ.EXPANDED,type:e,data:(0,d._)({},w({maxHistorySize:4e3}))})}),z(t),{id:t}},endBlock:function(e){U(function(t){var n=t.outputBlocks.find(function(t){return t.id===e});if(!n)throw Error("couldn't find a block");n.data.emitMessage(D),n.localEndTime=Date.now(),n.isDone=!0}),z(e)},writeOutputToBlock:function(e,t){var n=L.outputBlocks.find(function(t){return t.id===e});n&&n.data.emitMessage(t)},writeErrorToBlock:function(e,t){U(function(n){var r=n.outputBlocks.find(function(t){return t.id===e});if(!r)throw Error("couldn't find a block");r.error?r.error+="\n"+t:r.error=t}),z(e)},setBlockVisualState:function(e,t){U(function(n){var r=n.outputBlocks.find(function(t){return t.id===e});if(!r)throw Error("couldn't find a block");r.visualState=t}),z(e)}}}({container:e.container,toolchain:e.toolchain,beforeRun:e.beforeRun,packager:e.packager,debuggest:e.debuggest}):"html"===e.mode&&(t=function(e){var t=e.beforeRun,n=e.container,r=(0,c.ZP)(),i=l.Ah.OFFLINE,o="none",d=Math.random();function h(){var e=function(e){i!==e&&(i=e,r.emit(l.zW.STATE_CHANGE,i))};if("none"!==o){e(l.Ah.RUNNING);return}e(l.Ah.IDLE)}function p(){return(p=(0,u._)(function(){var e;return(0,a.Jh)(this,function(n){switch(n.label){case 0:if(i!==l.Ah.IDLE&&i!==l.Ah.STOPPING)throw Error("Cannot run while state is not IDLE or STOPPING, got state: "+i);return d=e=Math.random(),r.emit(l.zW.LOCAL_RUN),o="before-run",h(),[4,t(f.kg.timeStart({replLanguage:"html"}),{runId:e.toString(),type:"html"})];case 1:if(n.sent(),d!==e||"none"===o)return[2];return o="running",h(),o="none",h(),[2]}})})).apply(this,arguments)}return n.onConnectionStateChanged(function(e){e===s.em.CONNECTED&&(o="none",h())}),{mode:"html",run:function(){return p.apply(this,arguments)},stopRun:function(){if(i!==l.Ah.RUNNING)throw Error("stopRun must be called when running but got ".concat(i));o="none",h()},onStateChanged:function(e){return r.on(l.zW.STATE_CHANGE,e),function(){r.removeListener(l.zW.STATE_CHANGE,e)}},onLocalRun:function(e){return r.on(l.zW.LOCAL_RUN,e),function(){r.removeListener(l.zW.LOCAL_RUN,e)}},getRunState:function(){return i}}}({beforeRun:e.beforeRun,container:e.container})),!t)throw Error("mode not supported: "+e.mode);return t}(r=o||(o={})).BEFORE_RUN="BEFORE_RUN",r.SERVER="SERVER",r.NONE="NONE",r.STOPPING="STOPPING"},17789:function(e,t,n){n.d(t,{Z:function(){return h},w:function(){return d}});var r=n(34142),i=n(39698),o=n(45903),u=n(25e3),a=n(32477),l=n(87682),c=n(28268),s=n(39756),f=n(30084),d=".env";function h(e){var t=e.fs,n={id:0,ops:[],requests:[]};function h(){return(h=(0,r._)(function(e){var t;return(0,l.Jh)(this,function(n){switch(n.label){case 0:return[4,g()];case 1:return[2,(t=n.sent()[e])?{key:e,value:t}:void 0]}})})).apply(this,arguments)}function p(){return v.apply(this,arguments)}function v(){return(v=(0,r._)(function(){var e;return(0,l.Jh)(this,function(t){switch(t.label){case 0:return e=Object.entries,[4,g()];case 1:return[2,e.apply(Object,[t.sent()]).map(function(e){var t=(0,a._)(e,2);return{key:t[0],value:t[1]}})]}})})).apply(this,arguments)}function g(){return m.apply(this,arguments)}function m(){return(m=(0,r._)(function(){var e;return(0,l.Jh)(this,function(n){switch(n.label){case 0:return[4,t.readFile(d)];case 1:if((e=n.sent()).error===f.Df.NotFound)return[2,{}];if(e.error)throw e.error;return[2,c.Z.parse(e.content.toString())]}})})).apply(this,arguments)}function y(){return(y=(0,r._)(function(e){return(0,l.Jh)(this,function(t){switch(t.label){case 0:return[4,b([e])];case 1:return t.sent(),[2]}})})).apply(this,arguments)}function b(e,t){return w.apply(this,arguments)}function w(){return(w=(0,r._)(function(e,t){return(0,l.Jh)(this,function(r){switch(r.label){case 0:return Array.isArray(e)||(e=Object.entries(e).map(function(e){var t=(0,a._)(e,2);return{key:t[0],value:t[1]}})),(null==t?void 0:t.removeMissing)&&n.ops.push({op:"clear"}),e.forEach(function(e){return n.ops.push({op:"upsert",secret:e})}),[4,D()];case 1:return r.sent(),[2]}})})).apply(this,arguments)}function E(){return(E=(0,r._)(function(e){return(0,l.Jh)(this,function(t){switch(t.label){case 0:return[4,S([e])];case 1:return[2,t.sent()]}})})).apply(this,arguments)}function S(e){return x.apply(this,arguments)}function x(){return(x=(0,r._)(function(e){return(0,l.Jh)(this,function(t){switch(t.label){case 0:return e.forEach(function(e){return n.ops.push({op:"remove",key:e})}),[4,D()];case 1:return t.sent(),[2]}})})).apply(this,arguments)}function D(){return k.apply(this,arguments)}function k(){return(k=(0,r._)(function(){var e,a,s,f,h,v,g,m,y,b,w,E,S,x,D;return(0,l.Jh)(this,function(k){switch(k.label){case 0:return e=n.id+=1,[4,p()];case 1:var T;if(a=k.sent(),e!==n.id)return[2,new Promise(function(e){n.requests.push(e)})];s=a.reduce(function(e,t){return(0,u._)((0,o._)({},e),(0,i._)({},t.key,t.value))},{}),f=!0,h=!1,v=void 0;try{for(g=n.ops[Symbol.iterator]();!(f=(m=g.next()).done);f=!0)switch((y=m.value).op){case"upsert":s[y.secret.key]=y.secret.value;break;case"remove":delete s[y.key];break;case"clear":b=!0,w=!1,E=void 0;try{for(S=Object.keys(s)[Symbol.iterator]();!(b=(x=S.next()).done);b=!0)D=x.value,delete s[D]}catch(e){w=!0,E=e}finally{try{b||null==S.return||S.return()}finally{if(w)throw E}}}}catch(e){h=!0,v=e}finally{try{f||null==g.return||g.return()}finally{if(h)throw v}}return n.ops=[],[4,new Promise((T=(0,r._)(function(e){return(0,l.Jh)(this,function(r){switch(r.label){case 0:return[4,t.writeFile(d,c.Z.serialize(s)).finally(function(){n.requests.forEach(function(e){return e()}),n.requests=[]})];case 1:return r.sent(),e(),[2]}})}),function(e){return T.apply(this,arguments)}))];case 2:return[2,k.sent()]}})})).apply(this,arguments)}return{readSecret:function(e){return h.apply(this,arguments)},readSecrets:p,writeSecret:function(e){return y.apply(this,arguments)},writeSecrets:b,removeSecret:function(e){return E.apply(this,arguments)},removeSecrets:S,watchSecrets:function(e){var n,r=t.watchDir(s.Ql,{onChange:function(r){var i=r.find(function(e){return e.filename===d});i&&!n&&(n=t.watchFile(d,{onChange:function(t){e.onChange(Object.entries(c.Z.parse(t.toString())).map(function(e){var t=(0,a._)(e,2);return{key:t[0],value:t[1]}}))},onError:function(t){var r;n=void 0,null===(r=e.onError)||void 0===r||r.call(e,t)}})),!i&&n&&(n(),n=void 0)},onError:function(){n&&(n(),n=void 0)}});return function(){n&&(n(),n=void 0),r()}}}}},12130:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(73164),i=n(40728);function o(e,t,n,o){if(!(null==e?void 0:e.runs))return[];var a=[];if(t=t.slice(),n){var l=t.indexOf(n);-1!==l&&(t.splice(l,1),t.splice(0,0,n))}if(o){var c=t.indexOf(o);-1!==c&&t.splice(c,1),t.splice(0,0,o)}var s=!0,f=!1,d=void 0;try{for(var h,p=t[Symbol.iterator]();!(s=(h=p.next()).done);s=!0){var v=h.value;if(v.match(/(\.[a-z0-9]+)$/)){var g=!0,m=!1,y=void 0;try{for(var b,w=e.runs[Symbol.iterator]();!(g=(b=w.next()).done);g=!0){var E=b.value;if(E.fileParam||E.optionalFileParam){var S=(0,r.rF)(E.fileTypeAttrs);null===S&&E.language&&(S=r.$R.from(E.language)),S&&(0,i.JW)(v,S)&&a.push({runner:E,filePath:v})}}}catch(e){m=!0,y=e}finally{try{g||null==w.return||w.return()}finally{if(m)throw y}}}}}catch(e){f=!0,d=e}finally{try{s||null==p.return||p.return()}finally{if(f)throw d}}var x=!0,D=!1,k=void 0;try{for(var T,_=e.runs[Symbol.iterator]();!(x=(T=_.next()).done);x=!0){var R=T.value;R.fileParam||a.push({runner:R})}}catch(e){D=!0,k=e}finally{try{x||null==_.return||_.return()}finally{if(D)throw k}}return function(e){e.sort(function(e,t){var n=u(e),r=u(t);return n!==r?n-r:e.runner.interpreter===t.runner.interpreter?0:e.runner.interpreter?-1:1})}(a),a}function u(e){var t,n,r;return(null===(t=e.runner.id)||void 0===t?void 0:t.startsWith(".replit/"))?0:(null===(n=e.runner.id)||void 0===n?void 0:n.startsWith("module:"))?1:(null===(r=e.runner.id)||void 0===r?void 0:r.startsWith("language:"))?2:3}},72720:function(e,t){t.Z={brand:{darkBlue:"#0D101E",lightBlue:"#68CDEE",gray:"#6D7D84"},main:{green:{dark:"#0A6640",default:"#0F9960",light:"#3DCC91",25:"rgba(15,153,96,0.25)",15:"rgba(15,153,96,0.15)"},red:{dark:"#A82A2A",default:"#DB3737",light:"#FF7373",25:"rgba(219, 55, 55, 0.25)",15:"rgba(219, 55, 55, 0.15)"},blue:{dark:"#0068AD",default:"#0097FB",light:"#73C4FA",25:"rgba(0, 151, 251, 0.25)",15:"rgba(0, 151, 251, 0.15)"},orange:{dark:"#A14809",default:"#E16D1A",light:"#FC9C58",25:"rgba(225, 109, 26, 0.25)",15:"rgba(225, 109, 26, 0.15)"},purple:{dark:"#6213B1",default:"#9D43F7",light:"#BF80FF",25:"rgba(98, 19, 177, 0.25)",15:"rgba(98, 19, 177, 0.15)"},gold:{dark:"#A67908",default:"#D99E0B",light:"#FFC940",25:"rgba(217, 158, 11, 0.25)",15:"rgba(217, 158, 11, 0.15)"}},neutrals:{black:"#21242C",white:"#FFFFFF",offWhite:"#F7F8FA",black64:"rgba(33, 36, 44, 0.64)",black50:"rgba(33, 36, 44, 0.50)",black16:"rgba(33, 36, 44, 0.16)",black8:"rgba(33, 36, 44, 0.08)",white64:"rgba(255, 255, 255, 0.64)",white50:"rgba(255, 255, 255, 0.50)",white16:"rgba(255, 255, 255, 0.16)",white8:"rgba(255, 255, 255, 0.08)"},multiplayer:{green:"#1BC47D",red:"#EF5533",blue:"#18A0FB",purple:"#907CFF",teal:"#00B5CE",pink:"#EE46D3"},languages:{java:"#b07219",scheme:"#1e4aec",clojure:"#db5855",haskell:"#5e5086",lua:"#000080",ruby:"#701516",python:"#3572A5",go:"#00ADD8",cpp:"#f34b7d",c:"#555555","c#":"#178600","f#":"#b845fc",rust:"#dea584",swift:"#ffac45",r:"#198CE7",bash:"#000000",crystal:"#000100",julia:"#a270ba",elixir:"#6e4a7e",nim:"#37775b",dart:"#00B4AB",erlang:"#B83998",typescript:"#2b7489",elisp:"#c065db",sql:"#e34c26",php:"#4F5D95",html:"#e34c26",css:"#563d7c",javascript:"#f1e05a"},brands:{github:"#181717",twitter:"#00A8FF",discord:"#7289DA",facebook:"#3B5998",linkedin:"#0077B5"}}},44161:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(94106),i=n.n(r),o=n(66005),u=n(33212);function a(e){var t=e.throwBsod,n=e.tags,r=e.extras,a=e.origin,l=e.onNonBsodUnrecoverableError,c=void 0===l?function(){}:l;return function(e){var l=(0,o.ZP)(e);if(l===o.Gs.NotFound){i().push("/home","~/");return}if(l===o.Gs.LanguageTokenDenied){window.location.reload();return}if(l){c(l);return}u.error(e),t({error:e,tags:n,extras:r,origin:a})}}},63009:function(e,t,n){n.d(t,{I7:function(){return m},Id:function(){return g},ic:function(){return w},jT:function(){return v},qg:function(){return b},uV:function(){return y}});var r=n(45903),i=n(25e3),o=n(90234),u=n(71999),a=n(64461),l=n(1323),c=n(28999),s=n(43429),f=(0,o.cn)(null),d=(0,o.cn)(null,function(e,t,n){var o=n.error,u=n.tags,a=n.extras,c=n.origin,s=(0,i._)((0,r._)({},u),{origin:c});"statusCode"in o?s.statusCode=o.statusCode:"status"in o&&(s.statusCode=o.status),e(f)||t(f,{eventId:(0,l.I)(o,{tags:s,extras:a}),error:o,sentry:{tags:s,extras:a},origin:c})}),h=(0,o.cn)(null,function(e,t){t(f,null)}),p=(0,o.cn)(new Map);function v(){return(0,c.lV)((0,s.useCallback)(function(e,t,n){var r=n.filePath;return e(p).get(r)},[]))}function g(){return(0,c.lV)((0,s.useCallback)(function(e,t,n){var r=n.filePath,i=n.version;t(p,function(e){return(0,a.Uy)(e,function(e){e.set(r,i)})})},[]))}function m(){return(0,c.lV)((0,s.useCallback)(function(e,t,n){var r=n.filePath;t(p,function(e){return(0,a.Uy)(e,function(e){e.delete(r)})})},[]))}function y(){return(0,u.b9)(d)}function b(){return[(0,u.Dv)(f),y()]}function w(){return(0,u.b9)(h)}},72676:function(e,t,n){n.d(t,{s:function(){return ru},p:function(){return ro}});var r,i,o,u,a,l,c,s,f,d=n(39698),h=n(21289),p=n(8182),v=n(43429),g=n(71999),m=n(28999),y=n(66368),b=(0,v.createContext)(null);function w(e){return(0,p.tZ)(b.Provider,{value:e.store,children:e.children})}function E(){var e=(0,v.useContext)(b);if(!e)throw Error("Expected store in context");return e}function S(e){return(0,g.Dv)(e,{store:E()})}function x(e){return(0,y.b)(e,E())}var D=function(e){return(0,g.b9)(e,{store:E()})};function k(e){return(0,m.lV)((0,v.useCallback)(function(t){return t(e)},[e]),{store:E()})}var T=n(45903),_=n(25e3),R=n(32477),I=n(90234),P=n(34142),C=n(87682),N=n(30084),A=n(64461),O=n(39756),Z=n(19659),F=n(43778),B=n(37491),G="No files",M="Loading...",L=n(97778);function U(e,t){var n=t.fromIndex;if("next"===t.dir){for(var r=n+1;r<e.length;r++){var i=e[r];if(i&&("dir"===i.type||"file"===i.type))return i}return null}for(var o=n-1;o>=0;o--){var u=e[o];if(u&&("dir"===u.type||"file"===u.type))return u}return null}function z(e,t){return F.nh.includes(t.filename)&&!F.nh.includes(e.filename)?-1:!F.nh.includes(t.filename)&&F.nh.includes(e.filename)?1:F.uP.includes(t.filename)&&!F.uP.includes(e.filename)?-1:!F.uP.includes(t.filename)&&F.uP.includes(e.filename)?1:t.type===N.Tv.Directory&&e.type!==N.Tv.Directory?1:e.type===N.Tv.Directory&&t.type!==N.Tv.Directory?-1:(0,Z.IV)(e.filename,t.filename)}function W(e){var t=e.row,n=e.baseDepth;return"dir"===t.type||"file"===t.type||"uploadFile"===t.type?t.path===O.Ql?0:(0,Z.U$)(t.path)-1-n:t.dir===O.Ql?0:(0,Z.U$)(t.dir)-n}var H=function(e,t){return e===O.Ql?t:e+"/"+t},j=function(e,t){return e===O.Ql&&1===(0,Z.U$)(t)||(0,L.pC)(e,t)},V=n(15859),X=(0,I.cn)(new Map),J=(0,I.cn)({width:0,height:0}),K=(0,I.cn)(0),q=(0,I.cn)(null),Y=(0,I.cn)(new Map),Q=(0,I.cn)(function(e){var t;return null!==(t=e(ea).root)&&void 0!==t?t:O.Ql}),$=(0,I.cn)(null),ee=(0,I.cn)(null),et=(0,I.cn)(void 0),en=(0,I.cn)(null,function(e,t,n){e(ec)||t(ee,n)}),er=(0,I.cn)(function(e){var t=e(ea).root,n=void 0===t?O.Ql:t;return n===O.Ql?0:(0,Z.U$)(n)}),ei=(0,I.cn)(function(e){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=[],r=0,i=!0,o=!1,u=void 0;try{for(var a,l=(0,h._)(e.values()).sort(function(e,t){return e.index-t.index})[Symbol.iterator]();!(i=(a=l.next()).done);i=!0){var c=a.value,s={height:c.height,y:c.y,cols:[]};if(n.push(s),0!==c.depth){var f=c.depth+t;f>r&&(r=f);for(var d="divider"===c.row.type||"error"===c.row.type||"create"===c.row.type||"emptyDir"===c.row.type?c.row.dir:(0,Z.Il)(c.row.path),p=d.split("/"),v=0;v<(0,Z.U$)(d);v++){var g=p.slice(0,Number(v+1)).join("/");s.cols.push(g)}}}}catch(e){o=!0,u=e}finally{try{i||null==l.return||l.return()}finally{if(o)throw u}}for(var m=new Map,y=t;y<r;y++){var b=[];m.set(y,b);var w=!0,E=!1,S=void 0;try{for(var x,D=n[Symbol.iterator]();!(w=(x=D.next()).done);w=!0){var k=x.value,T=k.cols[y],_=k.y;if(T){var I=b[b.length-1];I&&I.y+I.height===_?I.height+=k.height:b.push({y:_,height:k.height,dir:T,depth:y-t})}}}catch(e){E=!0,S=e}finally{try{w||null==D.return||D.return()}finally{if(E)throw S}}}var P=[],C=!0,N=!1,A=void 0;try{for(var O,F=m[Symbol.iterator]();!(C=(O=F.next()).done);C=!0){var B=(0,R._)(O.value,2),G=(B[0],B[1]);P.push.apply(P,(0,h._)(G))}}catch(e){N=!0,A=e}finally{try{C||null==F.return||F.return()}finally{if(N)throw A}}return P}(e(Y),e(er))}),eo=(0,I.cn)(!1),eu=(0,I.cn)(null,function(e,t,n){var r=new Map,i=e(eR),o=e(er),u=!0,a=!1,l=void 0;try{for(var c,s=n.rows[Symbol.iterator]();!(u=(c=s.next()).done);u=!0){var f=c.value,d=f.key.toString(),h=i[f.index];if(h){var p=Math.max(0,W({row:h,baseDepth:o}));r.set(f.index,{y:f.start+8,height:f.size,index:f.index,key:d,depth:p,row:h})}}}catch(e){a=!0,l=e}finally{try{u||null==s.return||s.return()}finally{if(a)throw l}}t(Y,r),t(K,n.scrollHeight)}),ea=(0,I.cn)({}),el=(0,V.kv)(ea,function(e){var t;return null!==(t=e.onContextMenu)&&void 0!==t?t:null}),ec=(0,I.cn)(function(e){return!!e(ea).readOnly||!e(eo)}),es=(0,I.cn)(function(e){var t;return null!==(t=e(ea).fontSize)&&void 0!==t?t:14}),ef=function(e,t){if("divider"===t)switch(e){case 10:return 28;case 12:case 13:case 14:return 38;case 18:return 44;default:return 48}switch(e){case 10:return 18;case 12:case 13:return 24;case 14:return 32;case 18:return 38;default:return 40}},ed=(0,I.cn)(function(e){return ef(e(es),"file")}),eh=function(e){switch(e){case 10:case 12:return 12;case 13:case 14:return 16;case 18:return 20;default:return 24}},ep=(0,I.cn)(function(e){return eh(e(es))}),ev=(0,I.cn)(function(e){return 14>e(es)?4:8}),eg=(0,I.cn)(function(e){return 14>=e(es)?4:8}),em=(0,I.cn)(function(e){return 13===e(es)?6:16>e(es)?4:8}),ey=function(e){switch(e){case 10:return 10;case 12:case 13:case 14:return 12;case 18:return 14;default:return 18}},eb=function(e){switch(e){case 10:return 12;case 12:case 13:return 16;case 14:return 24;case 18:return 32;default:return 40}},ew=(0,I.cn)(function(e){return eb(e(es))}),eE=(0,I.cn)(function(e){return ey(e(es))}),eS=function(e){switch(e){case 10:case 12:case 13:return 10;case 14:case 18:return 16;default:return 20}},ex=(0,I.cn)(function(e){return eS(e(es))}),eD=(0,I.cn)(new Map);function ek(e){var t=e.filename;return F.nh.includes(t)?"Config files":F.uP.includes(t)?"Packager files":null}var eT=(0,I.cn)([]),e_=(0,I.cn)([]),eR=(0,I.cn)(function(e){var t,n,r=e(ea),i=r.filter,o=r.alwaysShowCreateRow,u=r.root,a=void 0===u?O.Ql:u,l=r.sort,c=r.readOnly;return function(e){var t=e.root,n=void 0===t?O.Ql:t,r=e.dirInfo,i=e.filter,o=e.sort,u=e.getSection,a=e.readOnly,l=e.pendingUploads,c=e.pendingMoves,s=e.pathBeingRenamed,f=e.alwaysShowCreateRow,d=[],p=(null==l?void 0:l.length)?function(e){var t=new Map,n=!0,r=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(n=(o=u.next()).done);n=!0){var a=o.value,l=(0,Z.Il)(a.targetPath)||O.Ql,c=t.get(l),s={filename:(0,Z.UO)(a.targetPath),progress:a.progress};c?c.push(s):t.set(l,[s])}}catch(e){r=!0,i=e}finally{try{n||null==u.return||u.return()}finally{if(r)throw i}}return t}(l):null,v=new Map,g=new Map;if(null==c?void 0:c.length){var m=!0,y=!1,b=void 0;try{for(var w,E=c[Symbol.iterator]();!(m=(w=E.next()).done);m=!0){var S=w.value,x=S.from,D=S.to;v.set(x.path,x.type),g.set(D,x.type)}}catch(e){y=!0,b=e}finally{try{m||null==E.return||E.return()}finally{if(y)throw b}}}return!function e(t){var l=r.get(t);if(!(!l||v.has(t))&&l.expanded){if(t===n&&l.loading&&!l.children){d.push({type:"dir",path:t});return}if(l.error){d.push({type:"error",message:l.error.message,dir:t});return}var c=l.children?(0,h._)(l.children):void 0;c&&v.size>0&&(c=c.filter(function(e){return!v.has(H(t,e.filename))}));var m=!0,y=!1,b=void 0;try{for(var w,E=g[Symbol.iterator]();!(m=(w=E.next()).done);m=!0)!function(){var e=(0,R._)(w.value,2),n=e[0],r=e[1];if(j(t,n)){var i=(0,Z.UO)(n);(null==c||!c.some(function(e){return e.filename===i}))&&(c||(c=[]),c.push({filename:i,type:r}))}}()}catch(e){y=!0,b=e}finally{try{m||null==E.return||E.return()}finally{if(y)throw b}}var S=null==p?void 0:p.get(t);if(S){c||(c=[]);var x=!0,D=!1,k=void 0;try{for(var T,_=S[Symbol.iterator]();!(x=(T=_.next()).done);x=!0){var I=T.value,P=I.filename,C=I.progress;c.push({filename:P,type:N.Tv.File,progress:C})}}catch(e){D=!0,k=e}finally{try{x||null==_.return||_.return()}finally{if(D)throw k}}}if(c){if(!l.create&&!S&&c&&0===c.length){d.push({type:a?"emptyDir":"create",dir:t});return}var A=function(e,t){var n=t.getSection,r=[],i=new Map,o=!0,u=!1,a=void 0;try{for(var l,c=e[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var s=l.value,f=n(s),d=s.progress?{type:"upload",progress:s.progress,filename:s.filename}:{type:s.type===N.Tv.File?"file":"dir",filename:s.filename};if(!f){r.push(d);continue}var h=i.get(f);if(h){h.push(d);continue}i.set(f,[d])}}catch(e){u=!0,a=e}finally{try{o||null==c.return||c.return()}finally{if(u)throw a}}var p=!0,v=!1,g=void 0;try{for(var m,y=i[Symbol.iterator]();!(p=(m=y.next()).done);p=!0){var b=(0,R._)(m.value,2),w=b[0],E=b[1];r.push({type:"divider",label:w}),(0,B.fN)(r,E)}}catch(e){v=!0,g=e}finally{try{p||null==y.return||y.return()}finally{if(v)throw g}}return r}(c.filter(i).sort(o),{getSection:t===O.Ql?u:function(){return null}}),F=-1,G=!0,M=!1,L=void 0;try{for(var U,z=A[Symbol.iterator]();!(G=(U=z.next()).done);G=!0)!function(){var n=U.value;if("error"===n.type||"emptyDir"===n.type)throw Error("Expected dir, file, or divider row");if("divider"===n.type)return -1===F&&(F=d.length),d.push({type:"divider",dir:t,label:n.label});var i=H(t,n.filename);if("dir"===n.type){var o={type:"dir",path:i};s===i&&(o.rename=!0),g.has(i)&&(o.pending=!0);var u=null==p?void 0:p.get(i);if(u&&(o.uploadProgress=u.map(function(e){return e.progress})),d.push(o),!r.get(i))return;e(i)}else if("upload"===n.type)d.push({type:"uploadFile",path:i,progress:n.progress});else if(!S||!S.some(function(e){return e.filename===n.filename})){var a={type:"file",path:i};s===i&&(a.rename=!0),g.has(i)&&(a.pending=!0),d.push(a)}}()}catch(e){M=!0,L=e}finally{try{G||null==z.return||z.return()}finally{if(M)throw L}}if(l.create||f){var W={type:"create",dir:t,fileType:l.create?l.create:void 0};-1===F?d.push(W):d.splice(F,0,W)}}}}(n),d}({root:a,dirInfo:e(eD),filter:i,sort:void 0===l?z:l,readOnly:void 0!==c&&c,getSection:ek,pendingUploads:e(eT),pathBeingRenamed:null!==(t=e(ee))&&void 0!==t?t:void 0,pendingMoves:null!==(n=e(e_))&&void 0!==n?n:void 0,alwaysShowCreateRow:o})}),eI=(0,I.cn)(function(e){var t=e(q);if(!t)return null;var n=e(eR).findIndex(function(e){return("file"===e.type||"dir"===e.type)&&e.path===t});return -1!==n?n:null}),eP=(0,I.cn)(null,function(e,t,n){var r,i=e(eI),o=e(q);if((null===(r=document.activeElement)||void 0===r?void 0:r.tagName)!=="INPUT"&&null!==i&&null!==o){var u=e(eR);switch(n.key){case"ArrowDown":n.preventDefault();var a=U(u,{dir:"next",fromIndex:i});((null==a?void 0:a.type)==="dir"||(null==a?void 0:a.type)==="file")&&t(q,a.path);return;case"ArrowUp":n.preventDefault();var l=U(u,{dir:"previous",fromIndex:i});((null==l?void 0:l.type)==="dir"||(null==l?void 0:l.type)==="file")&&t(q,l.path);return;case"ArrowLeft":case"ArrowRight":n.preventDefault();var c=e(eD).get(o);if(!c)return;"ArrowLeft"===n.key&&c.expanded?t(eA,o):"ArrowRight"!==n.key||c.expanded||t(eZ,o);return;case"Enter":case" ":if("Enter"===n.key&&!e(ec))return;if(e(eD).has(o)){t(eF,o);return}e(ea).onFileSelect({event:n,path:o,type:"keydown"});return}}}),eC=(0,I.cn)(null,function(e,t,n){var r;n.path===(null!==(r=e(ea).root)&&void 0!==r?r:O.Ql)&&t(eo,!0),t(eD,function(e){return(0,A.Uy)(e,function(e){var t=n.path===O.Ql?null:n.path+"/",r=!0,i=!1,o=void 0;try{for(var u,a=n.children[Symbol.iterator]();!(r=(u=a.next()).done);r=!0){var l,c=u.value,s=t?t+c.filename:c.filename,f=e.get(s);if(c.type!==N.Tv.Directory){f&&(null===(l=f.disposeWatcher)||void 0===l||l.call(f),e.delete(s));continue}f||e.set(s,{expanded:!1})}}catch(e){i=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}var d=e.get(n.path);d&&(d.children=n.children,d.loading=!1,d.error=void 0)})})}),eN=(0,I.cn)(null,function(e,t,n){var r;n.path===(null!==(r=e(ea).root)&&void 0!==r?r:O.Ql)&&t(eo,!0),t(eD,function(e){return(0,A.Uy)(e,function(e){var t,r=e.get(n.path);r&&(r.loading=!1,r.error=n.error,null===(t=r.disposeWatcher)||void 0===t||t.call(r),r.disposeWatcher=null)})})}),eA=(0,I.cn)(null,function(e,t,n){var r=Array.isArray(n)?n:[n];t(eD,function(e){return(0,A.Uy)(e,function(e){var t=!0,n=!1,i=void 0;try{for(var o,u=r[Symbol.iterator]();!(t=(o=u.next()).done);t=!0){var a=o.value,l=e.get(a);l&&(l.expanded=!1,l.loading=!1,l.disposeWatcher&&(l.disposeWatcher(),l.disposeWatcher=null))}}catch(e){n=!0,i=e}finally{try{t||null==u.return||u.return()}finally{if(n)throw i}}})})}),eO=(0,I.cn)(null,function(e,t,n){t(eD,function(e){return(0,A.Uy)(e,function(e){var t,r=e.get(n);r&&(null===(t=r.disposeWatcher)||void 0===t||t.call(r),e.delete(n))})})}),eZ=(0,I.cn)(null,function(e,t,n){var r=Array.isArray(n)?n:[n],i=e(ea).fs;t(eD,function(e){return(0,A.Uy)(e,function(e){var n=!0,o=!1,u=void 0;try{for(var a,l=r[Symbol.iterator]();!(n=(a=l.next()).done);n=!0)!function(){var n,r=a.value,o=null!==(n=e.get(r))&&void 0!==n?n:{expanded:!0};e.has(r)?o.expanded=!0:e.set(r,o),o.disposeWatcher?o.disposeWatcher():o.loading=!0,o.disposeWatcher=i.watchDir(r,{onError:function(e){return t(eN,{path:r,error:e})},onChange:function(e){return t(eC,{path:r,children:e})},onMoveOrDelete:function(){return t(eO,r)}})}()}catch(e){o=!0,u=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw u}}})})}),eF=(0,I.cn)(null,function(e,t,n){var r=e(eD).get(n);if(!r){t(eD,function(e){return(0,A.Uy)(e,function(e){e.set(n,{expanded:!1})})}),t(eZ,n);return}t(r.expanded?eA:eZ,n)}),eB=(0,I.cn)(function(e){return e(ea).manageWidth?e(eo)?function(e){var t=e.rows,n=e.baseDepth,r=[],i=new Map,o=!0,u=!1,a=void 0;try{for(var l,c=t[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var s=l.value,f=function(e){var t=e.row,n=W({row:t,baseDepth:e.baseDepth});switch(t.type){case"file":case"dir":case"uploadFile":return{text:(0,Z.UO)(t.path),depth:n};case"error":return{text:t.message,depth:n};case"divider":return{text:t.label,depth:n};case"create":case"emptyDir":return{text:G,depth:n}}}({row:s,baseDepth:n}),d=f.depth,h=f.text,p=i.get(d);if(!p){i.set(d,new Map([[s.type,h]]));continue}var v=p.get(s.type);v&&(null==v?void 0:v.length)>h.length||p.set(s.type,h)}}catch(e){u=!0,a=e}finally{try{o||null==c.return||c.return()}finally{if(u)throw a}}var g=!0,m=!1,y=void 0;try{for(var b,w=i[Symbol.iterator]();!(g=(b=w.next()).done);g=!0){var E=(0,R._)(b.value,2),S=E[0],x=E[1],D=!0,k=!1,T=void 0;try{for(var _,I=x[Symbol.iterator]();!(D=(_=I.next()).done);D=!0){var P=(0,R._)(_.value,2),C=P[0],N=P[1];r.push({depth:S,type:C,text:N})}}catch(e){k=!0,T=e}finally{try{D||null==I.return||I.return()}finally{if(k)throw T}}}}catch(e){m=!0,y=e}finally{try{g||null==w.return||w.return()}finally{if(m)throw y}}return r}({rows:e(eR),baseDepth:e(er)}):[{type:"dir",text:M,depth:1}]:null}),eG=(0,I.cn)(null,function(e,t,n){var r=e(ea).onCreateStart;if(r){r({parentPath:n.parentPath,fileType:n.fileType});return}t(eZ,n.parentPath),t(eD,function(e){return(0,A.Uy)(e,function(e){var t=e.get(n.parentPath);t&&(t.create=n.fileType)})}),t(q,null)}),eM=(0,I.cn)(null,function(e,t,n){t(eD,function(e){return(0,A.Uy)(e,function(e){var t=e.get(n);t&&(t.create=void 0)})})}),eL=(0,I.cn)(null,function(e,t,n){var r={path:n.path,type:n.fileType};t(q,r.path),t(eH,{node:r}),t(eD,function(e){return(0,A.Uy)(e,function(e){var t=e.get(n.parentPath);t&&(t.create=void 0)})}),r.type===N.Tv.Directory&&t(eZ,r.path)}),eU=(0,I.cn)(new Map),ez=(0,I.cn)(null),eW=(0,I.cn)(!0),eH=(0,I.cn)(null,function(e,t,n){var r=n.node,i=n.mode,o=e(eR),u=e(ez);t(eW,!i),t(eU,function(e){return(0,A.Uy)(e,function(e){!function(e,t){var n=t.node,r=t.rows,i=t.mode,o=t.anchor;if(!i){e.clear(),e.set(n.path,n.type);return}if("multi"===i&&e.has(n.path)){e.delete(n.path);return}if("multi"===i){e.set(n.path,n.type);return}var u=n.type===N.Tv.Directory?"dir":"file",a=r.findIndex(function(e){return e.type===u&&e.path===n.path});if(-1!==a){var l=(null==o?void 0:o.type)===N.Tv.Directory?"dir":"file",c=o?r.findIndex(function(e){return e.type===l&&e.path===o.path}):-1;if(-1!==c){var s=c<a?r.slice(c,a+1):r.slice(a,c+1),f=!0,d=!1,h=void 0;try{for(var p,v=r[Symbol.iterator]();!(f=(p=v.next()).done);f=!0){var g=p.value;("file"===g.type||"dir"===g.type)&&(s.includes(g)?e.set(g.path,"file"===g.type?N.Tv.File:N.Tv.Directory):e.delete(g.path))}}catch(e){d=!0,h=e}finally{try{f||null==v.return||v.return()}finally{if(d)throw h}}}}}(e,{node:r,rows:o,mode:i,anchor:u})})});var a=e(eU);if(!(a.size>1)){var l=!0,c=!1,s=void 0;try{for(var f,d=a[Symbol.iterator]();!(l=(f=d.next()).done);l=!0){var h=(0,R._)(f.value,2),p=h[0],v=h[1];t(ez,{path:p,type:v})}}catch(e){c=!0,s=e}finally{try{l||null==d.return||d.return()}finally{if(c)throw s}}}}),ej=(0,I.cn)(null,function(e,t){t(eU,new Map),t(eW,!0),t(ez,null)}),eV=(0,I.cn)(null,(r=(0,P._)(function(e,t,n){var r,i,o;return(0,C.Jh)(this,function(u){switch(u.label){case 0:var a;return r=e(ea).fs,[4,Promise.all(n.map((a=(0,P._)(function(e){var t;return(0,C.Jh)(this,function(n){switch(n.label){case 0:return[4,r.readDir(e)];case 1:return[2,(t=n.sent()).error?t:{path:e,children:t.children,error:null}]}})}),function(e){return a.apply(this,arguments)})))];case 1:if((o=(i=u.sent()).filter(function(e){return null!==e.error})).length)return[2,{errors:o}];return t(eD,function(e){return(0,A.Uy)(e,function(e){var t=!0,n=!1,r=void 0;try{for(var o,u=i[Symbol.iterator]();!(t=(o=u.next()).done);t=!0){var a=o.value;if(a.error)throw Error("Unexpected error");var l=e.get(a.path);if(!l){e.set(a.path,{loading:!1,expanded:!0,children:a.children,error:void 0});continue}l.loading=!1,l.expanded=!0,l.children=a.children,l.error=void 0}}catch(e){n=!0,r=e}finally{try{t||null==u.return||u.return()}finally{if(n)throw r}}})}),[2,{errors:null}]}})}),function(e,t,n){return r.apply(this,arguments)})),eX=(0,I.cn)(null,(i=(0,P._)(function(e,t,n){var r,i,o,u,a,l,c,s,f;return(0,C.Jh)(this,function(d){switch(d.label){case 0:r=e(eD),i=[],o=!0,u=!1,a=void 0;try{var p;for(l=((p=n.path.split("/")).pop(),[O.Ql].concat((0,h._)(p.map(function(e,t){return p.slice(0,t+1).join("/")}))))[Symbol.iterator]();!(o=(c=l.next()).done);o=!0)s=c.value,null!=(f=r.get(s))&&f.expanded||i.push(s)}catch(e){u=!0,a=e}finally{try{o||null==l.return||l.return()}finally{if(u)throw a}}if(!i.length)return[3,2];return[4,t(eV,i)];case 1:d.sent(),d.label=2;case 2:return t(eH,{node:n}),[2]}})}),function(e,t,n){return i.apply(this,arguments)})),eJ=(0,I.cn)(null),eK=(0,I.cn)(null,function(e,t,n){var r=e(eJ);if(r)for(var i=e(eR),o=0;o<i.length;o++){var u=i[o];if(("file"===u.type||"dir"===u.type)&&u.path===n&&r.getVirtualItems()[o]){r.scrollToIndex(o);break}}});function eq(e,t){if(t===e.path)return!1;var n=t+"/"+(0,Z.UO)(e.path);return!(n===e.path||(0,L.yr)(e.path,t)||(0,L.yr)(n,e.path))}var eY=(0,I.cn)(null,(o=(0,P._)(function(e,t,n){var r,i,o,u,a,l,c,s;return(0,C.Jh)(this,function(f){var d,h,p,v,g,m,y,b;switch(f.label){case 0:if(i=null==(r=e(eD).get(n.to))?void 0:r.children)return[3,2];return[4,e(ea).fs.readDir(n.to)];case 1:if((o=f.sent()).error)return[2];i=o.children,f.label=2;case 2:if(!i)throw Error("Expected children");if(d=n.nodes,h=n.to,p=i,u=d.reduce(function(e,t){var n=(0,Z.UO)(t.path),r=(0,Z.Il)(t.path),i=null==p?void 0:p.find(function(e){return e.filename===n});return i&&(""===r?O.Ql:r)!==h&&e.push({type:i.type,path:h===O.Ql?i.filename:h+"/"+i.filename}),e},[]),v=n.nodes,g=n.to,!(a=(m=(0,Z.RQ)(v)).every(function(e){return eq(e,g)})?m.map(function(e){var t=(0,Z.UO)(e.path);return{from:e,to:g===O.Ql?t:g+"/"+t}}):null))return[2];if(l=e(ea).fs,!u.length)return[3,4];if(u.some(function(e){return a.some(function(t){var n=t.from;return(0,L.yr)(e.path,n.path)})}))return[2];if(!n.overwrite)return null==(c=e(ea).onConflicts)||c({type:"move",nodes:n.nodes,to:n.to,conflicts:u}),[2];return[4,Promise.all(u.map((y=(0,P._)(function(e){var t;return(0,C.Jh)(this,function(n){switch(n.label){case 0:return[4,e.type===N.Tv.Directory?l.deleteDir(e.path):l.deleteFile(e.path)];case 1:return[2,(t=n.sent()).error?{error:t.error,node:e}:null]}})}),function(e){return y.apply(this,arguments)})))];case 3:if(f.sent().filter(Boolean).length)return[2];f.label=4;case 4:return t(e_,a),[4,Promise.all(a.map((b=(0,P._)(function(e){var t,n,r;return(0,C.Jh)(this,function(i){switch(i.label){case 0:return t=e.from,n=e.to,[4,t.type===N.Tv.Directory?l.moveDir(t.path,n):l.moveFile(t.path,n)];case 1:return[2,(r=i.sent()).error?{error:r.error,from:t,to:n}:null]}})}),function(e){return b.apply(this,arguments)})))];case 5:if(s=f.sent(),t(e_,[]),s.filter(Boolean).length)return[2];return t(eU,new Map(a.map(function(e){return[e.to,e.from.type]}))),[2]}})}),function(e,t,n){return o.apply(this,arguments)})),eQ=n(41500),e$=n(59173),e0=n(89446);function e1(){return(e1=(0,P._)(function(e){var t,n,r,i,o,u,a,l,c,s,f;return(0,C.Jh)(this,function(d){switch(d.label){case 0:var p;if(t=e.parentPath,n=e.overwrite,r=e.fs,i=e.files,o=e.onStart,u=e.onUpload,a=e.onError,l=e.onDone,i.length>1e6)throw Error("Trying to upload too many files at once.");if(i.reduce(function(e,t){return t.size+e},0)>104857600)throw Error("Total file upload size exceeds maximum limit.");return p=(0,P._)(function(e){var t,i,o,l,c,s,f;return(0,C.Jh)(this,function(d){switch(d.label){case 0:if(t=e.targetPath,i=e.file,o=e.progress,n)return[3,2];return[4,r.stat(t)];case 1:if(d.sent().exists)return a(l={file:i,path:t,error:"ALREADY_EXIST"}),[2,l];d.label=2;case 2:c=null,d.label=3;case 3:return d.trys.push([3,5,,6]),[4,(0,e0.pV)(i)];case 4:return c=d.sent(),[3,6];case 5:return d.sent(),a(s={file:i,path:t,error:"FILE_READ"}),[2,s];case 6:return f=eQ.Z.from(c),[4,r.transferFile(t,f,function(e,t){o.current=t/e})];case 7:return d.sent(),u({file:i,path:t}),[2,{path:t,file:i}]}})}),c=function(e){return p.apply(this,arguments)},o(s=i.map(function(e){var n=e.dirPath||e.webkitRelativePath||e.name;return{targetPath:t?t+"/"+n:n,progress:(0,e$.u)(0),file:e}})),[4,Promise.all(s.map(c))];case 1:return f=d.sent(),l({parentPath:t,uploads:f.filter(function(e){return!("error"in e)}),errors:f.reduce(function(e,t){return"error"in t?(0,h._)(e).concat([t]):e},[])}),[2]}})})).apply(this,arguments)}(u=l||(l={})).AlreadyExists="ALREADY_EXIST",u.FileRead="FILE_READ",u.Network="NETWORK";var e2=n(47507),e4=(0,I.cn)(null,(a=(0,P._)(function(e,t,n){var r,i,o,u,a,l,c,s,f;return(0,C.Jh)(this,function(d){switch(d.label){case 0:if(r=e(ea).fs,i=n.parentPath||O.Ql,u=null==(o=e(eD).get(i))?void 0:o.children,n.files.length>1e6)return n.onError("Trying to upload too many files at once. Please try again with fewer files."),[2];if(u)return[3,2];return[4,r.readDir(i)];case 1:if((a=d.sent()).error)return[2];u=a.children,d.label=2;case 2:var p;if(!u)throw Error("Expected children");if(l=(0,h._)(new Set(n.files.map(function(e){return e.dirPath?e.dirPath.split("/")[0]:e.name}))),(s=(c=u.filter(function(e){return l.some(function(t){return t===e.filename})})).length?c.map(function(e){return{path:i===O.Ql?e.filename:i+"/"+e.filename,type:e.type}}):null)&&!n.overwrite)return null==(f=e(ea).onConflicts)||f({type:"upload",files:n.files,to:i,conflicts:c.map(function(e){return{path:i===O.Ql?e.filename:i+"/"+e.filename,type:e.type}})}),[2];if(!s)return[3,4];return[4,Promise.all(s.map((p=(0,P._)(function(e){var t;return(0,C.Jh)(this,function(n){switch(n.label){case 0:return[4,e.type===N.Tv.Directory?r.deleteDir(e.path):r.deleteFile(e.path)];case 1:return[2,(t=n.sent()).error?{error:t.error,node:e}:null]}})}),function(e){return p.apply(this,arguments)})))];case 3:if(d.sent().filter(Boolean).length)return[2];d.label=4;case 4:return function(e){e1.apply(this,arguments)}({parentPath:n.parentPath,files:n.files,fs:r,onStart:function(e){t(eT,function(t){return(0,A.Uy)(t,function(t){var n=!0,r=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(n=(o=u.next()).done);n=!0){var a=o.value;t.push(a)}}catch(e){r=!0,i=e}finally{try{n||null==u.return||u.return()}finally{if(r)throw i}}})})},onUpload:function(e){t(eT,function(t){return(0,A.Uy)(t,function(t){var n=t.findIndex(function(t){return t.targetPath===e.path});-1!==n&&t.splice(n,1)})})},onError:function(e){t(eT,function(t){return(0,A.Uy)(t,function(t){var n=t.findIndex(function(t){return t.targetPath===e.path});-1!==n&&t.splice(n,1)})})},onDone:function(e){var t=e.errors,n=e.parentPath;if(!t.length){e2.kg.info("Successfully uploaded files",{uploadSource:"filetree",parentPath:n});return}}}),[2]}})}),function(e,t,n){return a.apply(this,arguments)})),e3=n(7444),e5=n(55534),e9=n(74044),e8=n(11516),e6=n(69451),e7=n.n(e6),te=n(99149),tt=e9.Dy.Enum(N.Tv),tn=e9.Dy.Object({filename:e9.Dy.String({minLength:1}),type:tt}),tr=e9.Dy.Object({scrollOffset:e9.Dy.Number({minimum:0}),dirInfo:e9.Dy.Record(e9.Dy.String(),e9.Dy.Object({expanded:e9.Dy.Boolean(),children:e9.Dy.Array(tn)}))});function ti(e){return"repl:workspace:filetree:"+e}var to=e9.Dy.Array(e9.Dy.String()),tu="repl:workspace:filetree:savedKeys",ta=(0,V.kv)(ea,function(e){return e.localCacheKey?ti(e.localCacheKey):null}),tl=(0,I.cn)(null,function(e){var t=e(ea),n=t.localCacheKey,r=t.filter;if(n){var i=null!==(f=null===(s=e(eJ))||void 0===s?void 0:s.scrollOffset)&&void 0!==f?f:0,o=e(eD),u=!1,a=!0,l=!1,c=void 0;try{for(var s,f,d,h=o[Symbol.iterator]();!(a=(d=h.next()).done);a=!0){var p=(0,R._)(d.value,2)[1].children;if(u=!!(null==p?void 0:p.length))break}}catch(e){l=!0,c=e}finally{try{a||null==h.return||h.return()}finally{if(l)throw c}}if(u){var v=function(e,t){var n={dirInfo:Object.create(null),scrollOffset:e.scrollOffset},r=!0,i=!1,o=void 0;try{for(var u,a=e.dirInfo[Symbol.iterator]();!(r=(u=a.next()).done);r=!0){var l=(0,R._)(u.value,2),c=l[0],s=l[1],f=s.expanded,d=s.children;if(d){var h=d.filter(t);h.length&&(n.dirInfo[c]={expanded:f,children:h})}}}catch(e){i=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return n}({dirInfo:o,scrollOffset:i},r),g=ti(n),m=(x=e8.Z.get(tu),te.B4.Check(to,x)?x:null);if(m){var y=m.filter(function(e){return e!==g});y.unshift(g);var b=y.splice(20),w=!0,E=!1,S=void 0;try{for(var x,D,k=b[Symbol.iterator]();!(w=(D=k.next()).done);w=!0){var T=D.value;e8.Z.remove(T)}}catch(e){E=!0,S=e}finally{try{w||null==k.return||k.return()}finally{if(E)throw S}}e8.Z.set(tu,y)}else e8.Z.set(tu,[g]);return e8.Z.set(ti(n),v)}}}),tc=(0,I.cn)(null),ts=(0,I.cn)(null,function(e,t,n){var r=[n];if(!e(eW)){var i=!0,o=!1,u=void 0;try{for(var a,l=e(eU)[Symbol.iterator]();!(i=(a=l.next()).done);i=!0){var c=(0,R._)(a.value,2),s=c[0],f=c[1];n.path!==s&&r.push({path:s,type:f})}}catch(e){o=!0,u=e}finally{try{i||null==l.return||l.return()}finally{if(o)throw u}}}t(tc,(0,Z.RQ)(r))});function tf(){return(tf=(0,P._)(function(e,t){return(0,C.Jh)(this,function(n){switch(n.label){case 0:return[4,Promise.all(t.map(function(t){return t.type===N.Tv.Directory?e.deleteDir(t.path):e.deleteFile(t.path)}))];case 1:return[2,{error:n.sent().filter(function(e){return e.error}).length?"Something went wrong deleting files":null}]}})})).apply(this,arguments)}var td=n(29287),th=n(93918),tp=n(56596),tv=n(31950),tg=n(7730),tm=n.n(tg),ty=n(47357),tb=n(58474),tw=n(50199),tE=(0,n(91608).$)(["scrollHeight","fontSize","fontSizeSmall","iconSize","horizontalPadding","borderRadius","gutterWidth","minHeight","iconTextGap","rowWidth","rowHeight","rowLeftIndent","rowY","dropPreviewDepth","dropPreviewHeight","dropPreviewY","dropPreviewOpacity","strokeDashoffset","statusColor","statusBackgroundColor","dirStatusIconSize","nodeBackgroundColor","dragPreviewX","dragPreviewY","contextMenuButtonDisplay"]),tS=tE.cssVars,tx=tE.styleTokens,tD={paddingLeft:tx.horizontalPadding,paddingRight:tx.horizontalPadding},tk={"&& svg":{minWidth:tx.iconSize,minHeight:tx.iconSize,width:tx.iconSize,height:tx.iconSize}},tT=[td.l0.truncate,{fontSize:tx.fontSize}],t_=n(86533),tR=n(95571);function tI(e){var t=e.fileName,n=e.parentPath,r=n===O.Ql?"":n+"/",i=r+t,o=i.split("/");return{pathPrefix:r,newFilePath:i,segments:o}}function tP(e){return tC.apply(this,arguments)}function tC(){return(tC=(0,P._)(function(e){var t,n,r,i,o,u,a,l,c,s,f,d,h,p,v,g,m,y,b;return(0,C.Jh)(this,function(w){switch(w.label){case 0:if(t=e.fileName,n=e.parentPath,r=e.fs,t.startsWith("/"))return[2,"File names cannot include forward slashes"];o=(i=tI({fileName:t,parentPath:n})).pathPrefix,u=i.newFilePath,a=i.segments,l=!0,c=!1,s=void 0,w.label=1;case 1:w.trys.push([1,7,8,9]),f=Object.entries(a)[Symbol.iterator](),w.label=2;case 2:if(l=(d=f.next()).done)return[3,6];if(p=(h=(0,R._)(d.value,2))[0],v=h[1],g=Number(p),m=[],g!==a.length-1)return[3,4];return[4,r.stat(u)];case 3:w.sent().exists&&m.push((0,Z.UO)(u)),w.label=4;case 4:if(!(y=(0,t_.z)({fileName:v,siblingNames:m,parentPath:o+a.slice(0,g).join("/")})))return[3,5];return[2,y];case 5:return l=!0,[3,2];case 6:return[3,9];case 7:return b=w.sent(),c=!0,s=b,[3,9];case 8:try{l||null==f.return||f.return()}finally{if(c)throw s}return[7];case 9:return[2,null]}})})).apply(this,arguments)}function tN(e){var t=tI({fileName:e.fileName,parentPath:e.parentPath}),n=t.pathPrefix,r=t.segments,i=!0,o=!1,u=void 0;try{for(var a,l=Object.entries(r)[Symbol.iterator]();!(i=(a=l.next()).done);i=!0){var c=(0,R._)(a.value,2),s=c[0],f=c[1],d=Number(s),h=(0,t_.z)({fileName:f,siblingNames:[],parentPath:n+r.slice(0,d).join("/")});if(h)return h}}catch(e){o=!0,u=e}finally{try{i||null==l.return||l.return()}finally{if(o)throw u}}return null}function tA(e,t){return e.shiftKey?"bulk":"altKey"===t&&e.altKey||"cmdOrCtrlKey"===t&&(0,tR.j)(e)?"multi":void 0}var tO=(0,I.cn)(null,function(e,t,n){var r=n.event,i=n.path;t(q,i);var o=e(ea).multiselectModifierKey;t(eH,{node:{path:i,type:N.Tv.Directory},mode:o?tA(r,o):void 0}),t(q,i),r.shiftKey||r.altKey||(0,tR.j)(r)||t(eF,i)});function tZ(){return{fontSize:x(es),fontSizeSmall:x(eE),iconSize:x(ep),scrollHeight:x(K),horizontalPadding:x(ev),borderRadius:x(eg),gutterWidth:x(ex),minHeight:x(ed),iconTextGap:x(em)}}function tF(e){return S((0,tw.Z)(function(){return(0,V.kv)(q,function(t){return t===e?0:-1})},[e]))}function tB(e){return S((0,tw.Z)(function(){return(0,V.kv)(Y,function(t){var n,r=t.get(e);return r?{style:(n={},(0,d._)(n,tS.rowHeight,r.height+"px"),(0,d._)(n,tS.rowY,r.y+"px"),(0,d._)(n,tS.rowLeftIndent,"calc(".concat(r.depth," * ").concat(tx.gutterWidth,")")),n),depth:r.depth}:void 0},tm())},[e]))}function tG(e){var t=e.index,n=e.path,r=(0,v.useRef)(null),i=x(q);return(0,v.useEffect)(function(){var e=function(e){var t;null===(t=r.current)||void 0===t||t.setAttribute("tabIndex",e.toString())},o=function(r){if(!r){e(0===t?0:-1);return}e(r===n?0:-1)};return o(i.current),i.subscribe(o)},[i,n,t]),(0,v.useEffect)(function(){var e=function(e){null!==t&&clearTimeout(t),e===n&&document.activeElement!==r.current&&(t=setTimeout(function(){var e;null===(e=r.current)||void 0===e||e.focus()},50))},t=null;e(i.current);var o=i.subscribe(e);return function(){null!==t&&clearTimeout(t),o()}},[i,n]),[r,D(q)]}var tM=n(57468),tL=n(50451),tU=n(39028),tz=n(88936),tW=n(75296),tH=n(20573),tj=n(93496),tV=n(74833),tX=n(93049),tJ=n(22487),tK=n(27592),tq={name:"sameWidth",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(e){var t=e.state;t.styles.popper.width="".concat(t.rects.reference.width,"px")},effect:function(e){var t=e.state;t.elements.reference instanceof HTMLElement&&(t.elements.popper.style.width="".concat(t.elements.reference.offsetWidth,"px"))}},tY=n(8279),tQ=n(1415),t$=n(38080),t0=n(2581),t1=n(69119),t2=(0,V.kv)(ea,function(e){return e.autocomplete}),t4=(0,th.X)({icon:[tk,{marginRight:tx.iconTextGap}],item:[tD,td.l0.flex.row,td.l0.align.center,tj.gU.listItem,{height:tx.rowHeight}],text:[tT,td.l0.flex.growAndShrink(1)]});function t3(e){var t=e.id,n=e.items,r=e.activeIndex,i=e.onSuggestion,o=e.fileType,u=e.innerRef;return(0,p.tZ)(tp.G,{tag:"ul",id:t,"aria-label":"Suggestions",innerRef:u,children:n.map(function(e,t){var n=t===r;return(0,p.BX)(tp.G,{id:e.value,tag:"li",role:"option","aria-selected":n,style:{backgroundColor:n?tj.vb.interactiveBackground:void 0,color:n?td.TV.foregroundDefault:td.TV.foregroundDimmer},onClick:function(){return i(e.value)},css:t4.item,children:[(0,p.tZ)(tp.G,{css:t4.icon,children:o===N.Tv.Directory?(0,p.tZ)(tL.Z,{}):(0,p.tZ)(tM.Z,{path:e.value})}),(0,p.tZ)(t1.x,{css:t4.text,text:e.value,highlight:e.highlight,dimmed:!n})]},e.value)})})}var t5=[tx.horizontalPadding,tx.iconSize,tx.iconTextGap].join(" + "),t9=[tj.gU.filled,{height:"100%",width:"100%",paddingLeft:"calc(".concat(t5,")"),paddingRight:tx.horizontalPadding,fontSize:tx.fontSize}],t8=(0,th.X)({root:[td.l0.flex.row,tD,{padding:tx.horizontalPadding}],icon:[tk,td.l0.color.accentNegativeDefault,{marginRight:tx.iconTextGap}],text:[{fontSize:tx.fontSize},td.l0.color.foregroundDimmer,td.l0.flex.growAndShrink(1)]});function t6(e){return(0,p.BX)(tp.G,{css:t8.root,children:[(0,p.tZ)(tp.G,{css:t8.icon,children:(0,p.tZ)(tH.Z,{})}),(0,p.tZ)(tp.G,{css:t8.text,children:e.message})]})}var t7=(0,th.X)({root:[td.l0.position.relative,td.l0.flex.growAndShrink(1),{height:"100%"}],icon:[tk,td.l0.position.absolute,td.l0.left(tx.horizontalPadding),td.l0.top("50%"),{transform:"translateY(-50%)"}],input:t9,inputLoading:[t9,tY.p.backgroundPulse()],menu:[td.l0.overflow("hidden"),{borderRadius:tx.borderRadius,border:"1px solid",borderColor:td.TV.outlineDefault}],label:[td.l0.visuallyHidden]});function ne(e){var t,n,r,i,o,u,a,l,c,s,f,h=(0,v.useId)(),g=(0,v.useId)(),m=(t=(0,v.useRef)(null),n=tZ(),(0,tv.j)(t,n.fontSize,function(e){return(0,d._)({},tS.fontSize,e+"px")}),(0,tv.j)(t,n.iconTextGap,function(e){return(0,d._)({},tS.iconTextGap,e+"px")}),(0,tv.j)(t,n.borderRadius,function(e){return(0,d._)({},tS.borderRadius,e+"px")}),(0,tv.j)(t,n.horizontalPadding,function(e){return(0,d._)({},tS.horizontalPadding,e+"px")}),(0,tv.j)(t,n.iconSize,function(e){return(0,d._)({},tS.iconSize,e+"px")}),(0,tv.j)(t,n.fontSize,function(e){return(0,d._)({},tS.rowHeight,ef(e,"file")+"px")}),(0,tv.j)(t,n.iconTextGap,function(e){return(0,d._)({},tS.iconTextGap,e+"px")}),i=(r=(0,R._)((0,v.useState)(null),2))[0],o=r[1],a=(u=(0,R._)((0,v.useState)(null),2))[0],l=u[1],s=(c=(0,t0.D)(i,a,{modifiers:[{name:"offset",options:{offset:[0,4]}},tq],placement:"bottom-start"})).styles,f=c.attributes,{menuRef:(0,tX.l)(t,l),menuAnchorRef:o,styles:s.popper,attributes:f.popper}),y=function(e){var t=e.onSuggestion,n=e.siblings,r=e.value,i=S(t2),o=(0,R._)((0,v.useState)({items:[],activeIndex:null}),2),u=o[0],a=o[1],l=(0,e3.Z)(n),c=(0,e3.Z)(r),s=(0,R._)((0,v.useTransition)(),2)[1],f=i?function(e){s(function(){var t=i(e);a(function(e){return(0,A.Uy)(e,function(e){e.items=t.filter(function(e){return e.value!==c.current&&!l.current.some(function(t){return t.filename===e.value})})})})})}:null;function d(){a({items:[],activeIndex:null})}return{items:u.items.length?u.items:null,activeIndex:u.activeIndex,query:f,onKeyDown:function(e){if("Enter"===e.key){var n=null!==u.activeIndex?u.items[u.activeIndex]:null;if(!n)return;return e.preventDefault(),t(n.value),d(),!0}return"ArrowDown"===e.key?(e.preventDefault(),a(function(e){return(0,A.Uy)(e,function(e){if(null===e.activeIndex||e.activeIndex>e.items.length-1){e.activeIndex=0;return}e.activeIndex++})}),!0):"ArrowUp"===e.key?(e.preventDefault(),a(function(e){return(0,A.Uy)(e,function(e){if(null===e.activeIndex){e.activeIndex=e.items.length-1;return}if(0===e.activeIndex){e.activeIndex=null;return}e.activeIndex--})}),!0):void 0},clear:d}}({onSuggestion:e.onSuggestion,siblings:e.siblings,value:e.value}),b=k(eJ),w=(0,R._)((0,v.useState)(!0),2),E=w[0],x=w[1],D=(0,v.useRef)(null);(0,v.useEffect)(function(){if(D.current){var e,t=null===(e=b())||void 0===e?void 0:e.scrollElement;if(t)return(0,tK.j)(D.current,function(){return x(!0),function(){return x(!1)}},{root:t})}},[b]);var I=E&&!!(e.error||y.items),P=y.items&&y.activeIndex?y.items[y.activeIndex]:void 0,C=!e.error&&y.items?y.items:null,O=(0,v.useRef)(null),Z=y.clear,F=(0,tJ.Z)(function(e){var t;null!==(t=O.current)&&void 0!==t&&t.contains(e.target)||Z()},[Z]);return(0,p.BX)(p.HY,{children:[(0,p.tZ)("label",{css:t7.label,htmlFor:h,children:"file name"}),(0,p.BX)(tp.G,{css:t7.root,innerRef:(0,tX.l)(O,m.menuAnchorRef),children:[(0,p.tZ)(tp.G,{css:t7.icon,children:e.fileType===N.Tv.Directory?(0,p.tZ)(tL.Z,{}):(0,p.tZ)(tM.Z,{path:e.value})}),(0,p.tZ)("input",{spellCheck:!1,"aria-controls":y.query?g:void 0,"aria-expanded":y.items?"true":"false","aria-activedescendant":null==P?void 0:P.value,role:y.query?"combobox":void 0,id:h,ref:(0,tX.l)(e.inputRef,D),css:e.loading?t7.inputLoading:t7.input,value:e.value,onChange:e.loading?void 0:function(t){var n;e.onChange(t),null===(n=y.query)||void 0===n||n.call(y,{input:t.currentTarget.value,fileType:e.fileType,type:e.type,siblings:e.siblings})},onKeyDown:function(t){y.onKeyDown(t)||e.onKeyDown(t)},onBlur:e.onBlur})]}),(0,p.tZ)(tQ.h,{children:(0,p.BX)(t$.Tg,(0,_._)((0,T._)({css:t7.menu,elevated:!0,innerRef:m.menuRef,style:(0,_._)((0,T._)({},m.styles),{display:I?"block":"none"})},m.attributes),{children:[e.error?(0,p.tZ)(t6,{message:e.error}):null,C?(0,p.tZ)(t3,{id:g,innerRef:F,items:C,activeIndex:y.activeIndex,onSuggestion:function(t){e.onSuggestion(t),Z()},fileType:e.fileType}):null]}))})]})}var nt=(0,th.X)({createFilePicker:[td.l0.align.center,td.l0.rowWithGap(4),{fontSize:tx.fontSize,paddingRight:tx.horizontalPadding,paddingLeft:tx.horizontalPadding}],button:[td.l0.reset.button,td.l0.p(2),tj.gU.filled,td.l0.color.foregroundDimmer,{fontSize:"inherit"}],text:[tT,td.l0.color.foregroundDimmest],label:[td.l0.visuallyHidden]});function nn(e){var t,n,r,i,o,u,a,l,c,s,f,d,h,g,m,y,b,w,E,x,T,_=(t=e.dir,r=D(eG),i=D(eM),o=D(eL),a=(u=(0,R._)((0,v.useState)(""),2))[0],l=u[1],c=k(ea),f=(s=(0,R._)((0,v.useState)(!1),2))[0],d=s[1],g=(h=(0,R._)((0,v.useState)(null),2))[0],m=h[1],y=(0,tw.Z)(function(){return(0,V.kv)(eD,function(e){return e.get(t)})},[t]),b=(0,tw.Z)(function(){return(0,V.kv)(y,function(e){var t;return null!==(t=null==e?void 0:e.create)&&void 0!==t?t:null})},[y]),w=S((0,tw.Z)(function(){return(0,V.kv)(y,function(e){var t;return null!==(t=null==e?void 0:e.children)&&void 0!==t?t:null})},[y])),E=S(b),x=(0,P._)(function(e){var n,r,i,u,a,s,f,h;return(0,C.Jh)(this,function(p){switch(p.label){case 0:if(!E)return[2];if(i=c().fs,u=null,0!==e.length)return[3,1];return u="File names cannot be empty",[3,4];case 1:if(!e.includes("/"))return[3,3];return[4,tP({fileName:e,parentPath:t,fs:i})];case 2:return u=p.sent(),[3,4];case 3:u=(0,t_.z)({fileName:e,siblingNames:null!==(a=null==w?void 0:w.map(function(e){return e.filename}))&&void 0!==a?a:[],parentPath:t}),p.label=4;case 4:if(u)return m(u),[2];if((f=(s=t===O.Ql?null:t+"/")?s+e:e).includes("//")&&(f=f.split("/").filter(function(e){return e.length>0}).join("/")),d(!0),E!==N.Tv.Directory)return[3,6];return[4,i.createDir(f)];case 5:return h=p.sent(),[3,8];case 6:return[4,i.writeFile(f,new eQ.Z(""))];case 7:h=p.sent(),p.label=8;case 8:if(h.error)return m("Something went wrong"),[2];return d(!1),l(""),o({parentPath:t,path:f,fileType:E}),null===(n=(r=c()).onCreate)||void 0===n||n.call(r,{path:f,type:E}),[2]}})}),!(T=g)&&a.includes("/")?T=tN({fileName:a,parentPath:t}):T||(T=(0,t_.z)({fileName:a,siblingNames:null!==(n=null==w?void 0:w.map(function(e){return e.filename}))&&void 0!==n?n:[],parentPath:t})),{value:a,setValue:l,fileType:E,create:function(e){return x.apply(this,arguments)},creating:f,error:T,clearError:function(){return m(null)},cancel:(0,tw.Z)(function(){return function(){return i(t)}},[t,i]),start:(0,tw.Z)(function(){return function(e){return r({parentPath:t,fileType:e})}},[t,r]),siblings:w}),I=(0,v.useRef)(null);return((0,v.useEffect)(function(){var e;_.fileType&&(null===(e=I.current)||void 0===e||e.focus())},[_.fileType]),_.fileType)?(0,p.tZ)(ne,{siblings:_.siblings||[],type:"create",inputRef:I,loading:_.creating,error:_.error,value:_.value,fileType:_.fileType,onBlur:function(e){if(""===e.currentTarget.value){_.cancel();return}_.create(e.currentTarget.value)},onChange:function(e){_.error&&_.clearError(),_.setValue(e.currentTarget.value)},onKeyDown:function(e){if("Escape"===e.key){_.cancel();return}"Enter"===e.key&&_.create(e.currentTarget.value)},onSuggestion:function(e){_.setValue(e),_.create(e)}}):(0,p.tZ)(nr,{create:_.start})}function nr(e){return(0,p.BX)(tp.G,{css:nt.createFilePicker,children:[(0,p.tZ)(tp.G,{css:nt.text,children:"Add a"}),(0,p.tZ)(tp.G,{tag:"button",css:nt.button,onClick:function(){return e.create(N.Tv.File)},children:"file"}),(0,p.tZ)(tp.G,{css:nt.text,children:"or "}),(0,p.tZ)(tp.G,{tag:"button",css:nt.button,onClick:function(){return e.create(N.Tv.Directory)},children:"folder"})]})}var ni=n(77510),no=n(96606),nu=n(24725),na=n(83311),nl=n(72282),nc=n.n(nl),ns=n(73097),nf=n(38927),nd=n(48796),nh=n(54888),np=n.n(nh);function nv(e,t,n){return Math.floor(Math.min(t,Math.max(e,n)))}var ng=(0,I.cn)(0),nm=(0,I.cn)(null),ny=(0,I.cn)(function(e){var t=e(nm);if(null===t)return null;var n=e(Y),r=-1!==t?n.get(t):null;return r&&r.depth>0||(null==r?void 0:r.row.type)==="dir"?function(e,t){var n=e.get(t);if(!n)return null;var r=0,i=n.height,o="dir"===n.row.type?n.depth+1:n.depth;if("dir"===n.row.type)o=n.depth+1,r=n.y;else{o=n.depth;for(var u=t-1;u>=0;u--){var a=e.get(u);if(!a)break;if("dir"===a.row.type&&("file"===n.row.type||"uploadFile"===n.row.type?j(a.row.path,n.row.path):a.row.path===n.row.dir)){i+=a.height,r=a.y;break}a.depth>=n.depth&&(i+=a.height)}}for(var l=t+1;l<e.size;l++){var c=e.get(l);if(!c||c.depth<=("dir"===n.row.type?n.depth:n.depth-1))break;i+=c.height}return{y:r,height:i,depth:o}}(n,t):{y:e(ng),depth:1,height:e(J).height-8}}),nb="(".concat(tx.dropPreviewDepth," - 1) * ").concat(tx.gutterWidth),nw=(0,th.X)({root:[td.l0.position.absolute,td.l0.top(0),td.l0.left(0),td.l0.borderRadius(8),{pointerEvents:"none",transform:"translate(calc(".concat(nb,"), ").concat(tx.dropPreviewY,")"),width:"calc(100% - ".concat(nb,")"),height:tx.dropPreviewHeight,opacity:tx.dropPreviewOpacity,outline:"1px dashed ".concat(tx.statusColor),outlineOffset:-1}]}),nE=(0,v.memo)(function(){var e=x(ny),t=x(nP),n=x(nI),r=(0,v.useRef)(null);(0,tv.j)(r,e,function(e){var t,n,r,i;return i={},(0,d._)(i,tS.dropPreviewY,(null!==(t=null==e?void 0:e.y)&&void 0!==t?t:0)+"px"),(0,d._)(i,tS.dropPreviewHeight,(null!==(n=null==e?void 0:e.height)&&void 0!==n?n:0)+"px"),(0,d._)(i,tS.dropPreviewDepth,null!==(r=null==e?void 0:e.depth.toString())&&void 0!==r?r:"0"),i}),(0,tv.j)(r,n,function(e){return(0,d._)({},tS.dropPreviewOpacity,e?"1":"0")}),(0,tv.j)(r,t,function(e){return(0,d._)({},tS.statusColor,e?td.TV.accentPrimaryDefault:td.TV.accentNegativeDefault)});var i=(0,nd.T)();return(0,p.tZ)(tp.G,{style:{transition:i?void 0:"transform 140ms, width 140ms, height 140ms, opacity 140ms ease-out 60ms"},innerRef:r,css:nw.root})}),nS=(0,I.cn)(null,function(e,t,n){if(null!==n){var r=!0,i=!1,o=void 0;try{for(var u,a=e(Y)[Symbol.iterator]();!(r=(u=a.next()).done);r=!0){var l=(0,R._)(u.value,2),c=l[0],s=l[1];if(!(n.y<s.y)&&!(n.y>s.y+s.height))return t(nm,c),s}}catch(e){i=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}t(nm,-1)}}),nx=e9.Dy.Object({type:e9.Dy.Literal("nodes"),width:e9.Dy.Number(),height:e9.Dy.Number(),nodes:e9.Dy.Array(e9.Dy.Object({path:e9.Dy.String(),type:e9.Dy.Enum(N.Tv)}))}),nD=(0,I.cn)(null,function(e,t,n){t(eU,function(e){return(0,A.Uy)(e,function(e){e.set(n.path,n.type)})});var r=[n];if(e(eW))return r;var i=!0,o=!1,u=void 0;try{for(var a,l=e(eU)[Symbol.iterator]();!(i=(a=l.next()).done);i=!0){var c=(0,R._)(a.value,2),s=c[0],f=c[1];s!==n.path&&r.push({path:s,type:f})}}catch(e){o=!0,u=e}finally{try{i||null==l.return||l.return()}finally{if(o)throw u}}return r});function nk(e){var t=D(nm),n=D(nD),r=S(ec),i=(0,v.useRef)(null),o=(0,R._)((0,no.c)({type:e.type,item:function(){var t,r,o=n(e),u=null!==(r=null===(t=i.current)||void 0===t?void 0:t.getBoundingClientRect())&&void 0!==r?r:{width:160,height:32};return{nodes:o,type:"nodes",width:u.width,height:u.height}},collect:function(t){var n=t.getItem();return{isDragging:!!((null==n?void 0:n.type)==="nodes"&&n.nodes.some(function(t){return t.path===e.path}))}},end:function(){t(null)}}),3),u=o[0],a=o[1],l=o[2],c=u.isDragging;return(0,ns.K)(l),{isDragging:c,dragRef:r?void 0:a,sizeRef:i}}var nT=(0,th.X)({root:[td.l0.position.absolute,{left:0,top:0,transform:"translate(".concat(tx.dragPreviewX,", ").concat(tx.dragPreviewY,")"),pointerEvents:"none"}],item:[td.l0.backgroundColor.backgroundHighest,td.l0.flex.row,td.l0.align.center,td.l0.shadow(3),tD,{height:tx.rowHeight,borderRadius:tx.borderRadius}],icon:[tk,{marginRight:tx.iconTextGap}],text:[tT,td.l0.flex.growAndShrink(1),{color:tx.statusColor}],count:[tT,td.l0.backgroundColor.accentPrimaryDimmest,td.l0.color.accentPrimaryStrongest,td.l0.fontWeight.medium,td.l0.position.absolute,td.l0.left("calc(50% - 4px)"),td.l0.top("calc(100% - 4px)"),td.l0.borderRadius("full"),td.l0.px(4),td.l0.center,{fontSize:tx.fontSizeSmall}]}),n_=(0,v.memo)(function(e){var t=(0,v.useRef)(null),n=tZ(),r=x(nR);return(0,tv.j)(t,r,function(e){var t;return t={},(0,d._)(t,tS.dragPreviewX,(e?e.x:0)+"px"),(0,d._)(t,tS.dragPreviewY,(e?e.y:0)+"px"),t}),(0,tv.j)(t,n.horizontalPadding,function(e){return(0,d._)({},tS.horizontalPadding,e+"px")}),(0,tv.j)(t,n.fontSize,function(e){return(0,d._)({},tS.fontSize,e+"px")}),(0,tv.j)(t,n.fontSizeSmall,function(e){return(0,d._)({},tS.fontSizeSmall,e+"px")}),(0,tv.j)(t,n.iconSize,function(e){return(0,d._)({},tS.iconSize,e+"px")}),(0,tv.j)(t,n.iconTextGap,function(e){return(0,d._)({},tS.iconTextGap,e+"px")}),(0,tv.j)(t,n.borderRadius,function(e){return(0,d._)({},tS.borderRadius,e+"px")}),(0,tv.j)(t,n.gutterWidth,function(e){return(0,d._)({},tS.gutterWidth,e+"px")}),(0,p.tZ)(tp.G,{innerRef:t,css:nT.root,children:(0,p.BX)(tp.G,{css:nT.item,style:{width:e.width,height:e.height},children:[(0,p.tZ)(tp.G,{css:nT.icon,children:e.type===N.Tv.File?(0,p.tZ)(tM.Z,{path:e.path}):(0,p.tZ)(tL.Z,{})}),(0,p.tZ)(tp.G,{css:nT.text,children:(0,Z.UO)(e.path)}),e.count>1?(0,p.tZ)(tp.G,{css:nT.count,children:e.count}):null]})})}),nR=(0,I.cn)(null);(0,I.cn)(function(e){return null!==e(nR)});var nI=(0,I.cn)(!1),nP=(0,I.cn)(!1);function nC(){var e=(0,nu.f)(function(e){return{item:e.getItem(),isDragging:e.isDragging(),initialOffset:e.getInitialSourceClientOffset(),currentOffset:e.getSourceClientOffset()}}),t=e.isDragging,n=e.item,r=e.currentOffset,i=D(nR);if((0,v.useEffect)(function(){i(r?{x:r.x,y:r.y}:null)},[i,r]),!t||!te.B4.Check(nx,n))return null;var o=n.nodes,u=n.width,a=n.height,l=(0,R._)(o,1)[0];return l?(0,nf.createPortal)((0,p.tZ)(n_,{type:l.type,path:l.path,count:o.length,width:u,height:a}),document.body):null}var nN=(0,th.X)({root:[{marginLeft:"auto",paddingLeft:tx.horizontalPadding}],svg:[{transform:"rotate(-90deg)",transformOrigin:"center center","& .inner-circle":{strokeDashoffset:tx.strokeDashoffset}}]});function nA(e){var t=S(es)/2,n=t/2,r=2*n*Math.PI,i=(0,v.useRef)(null);return(0,tv.j)(i,e.progress,function(e){return(0,d._)({},tS.strokeDashoffset,(r-e*r).toString())}),(0,p.tZ)(tp.G,{innerRef:i,css:nN.root,children:(0,p.BX)("svg",{css:nN.svg,height:2*t,width:2*t,children:[(0,p.tZ)("circle",{fill:td.TV.backgroundHigher,r:t,cx:t,cy:t}),(0,p.tZ)("circle",{className:"inner-circle",stroke:td.TV.foregroundDimmest,fill:"transparent",strokeWidth:t,strokeDasharray:r+" "+r,r:n,cx:t,cy:t})]})})}var nO=function(e){return e.reduce(function(e,t){return e+t.current},0)/e.length};function nZ(e){var t,n,r,i,o=S(es)/2,u=o/2,a=2*u*Math.PI,l=(t=e.uploadProgress,r=(n=(0,R._)((0,v.useState)(nO(t)),2))[0],i=n[1],(0,v.useEffect)(function(){var e=[],n=!0,r=!1,o=void 0;try{for(var u,a=t[Symbol.iterator]();!(n=(u=a.next()).done);n=!0){var l=u.value;e.push(l.subscribe(function(){i(nO(t))}))}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return function(){e.map(function(e){return e()})}},[t]),r),c=(0,v.useRef)(null);return(0,p.tZ)(tp.G,{innerRef:c,css:nN.root,children:(0,p.BX)("svg",{css:nN.svg,height:2*o,width:2*o,children:[(0,p.tZ)("circle",{fill:td.TV.backgroundHigher,r:o,cx:o,cy:o}),(0,p.tZ)("circle",{className:"inner-circle",style:(0,d._)({},tS.strokeDashoffset,(a-l*a).toString()),stroke:td.TV.foregroundDimmest,fill:"transparent",strokeWidth:o,strokeDasharray:a+" "+a,r:u,cx:o,cy:o})]})})}var nF=n(55103),nB=(c={},(0,d._)(c,nF.h.ADDED,"A"),(0,d._)(c,nF.h.UNTRACKED,"A"),(0,d._)(c,nF.h.MODIFIED,"M"),(0,d._)(c,nF.h.DELETED,"D"),(0,d._)(c,nF.h.RENAMED,"R"),(0,d._)(c,nF.h.COPIED,"C"),c),nG=(s={},(0,d._)(s,nF.h.ADDED,td.TV.greenDimmest),(0,d._)(s,nF.h.UNTRACKED,td.TV.greenDimmest),(0,d._)(s,nF.h.MODIFIED,td.TV.yellowDimmest),(0,d._)(s,nF.h.DELETED,td.TV.redDimmest),(0,d._)(s,nF.h.RENAMED,td.TV.tealDimmest),(0,d._)(s,nF.h.COPIED,td.TV.limeDimmest),s),nM=(f={},(0,d._)(f,nF.h.ADDED,td.TV.greenStrongest),(0,d._)(f,nF.h.UNTRACKED,td.TV.greenStrongest),(0,d._)(f,nF.h.MODIFIED,td.TV.yellowStrongest),(0,d._)(f,nF.h.DELETED,td.TV.redStrongest),(0,d._)(f,nF.h.RENAMED,td.TV.tealStrongest),(0,d._)(f,nF.h.COPIED,td.TV.limeStrongest),f);function nL(e){return e===nF.h.ADDED||e===nF.h.UNTRACKED||e===nF.h.MODIFIED||e===nF.h.DELETED||e===nF.h.RENAMED||e===nF.h.COPIED}var nU={color:tx.statusColor,fontSize:tx.fontSizeSmall,minWidth:tx.dirStatusIconSize,height:tx.dirStatusIconSize},nz=(0,th.X)({fileIcon:[td.l0.fontWeight.bold,td.l0.px(2),td.l0.center,nU],directoryCountIcon:[td.l0.fontWeight.medium,td.l0.borderRadius(4),td.l0.px(2),td.l0.center,nU,{backgroundColor:tx.statusBackgroundColor}]});function nW(e){return(0,p.tZ)(tp.G,{css:nz.fileIcon,children:(0,p.tZ)(tp.G,{children:e.text})})}function nH(e){return(0,p.tZ)(tp.G,{css:nz.directoryCountIcon,children:(0,p.tZ)(tp.G,{children:e.count})})}function nj(e){var t,n,r,i,o,u,a,l,c,s,f,d,h,g,m,y,b,w,E,x,T,_=(0,R._)((t={path:e.path,type:e.fileType},r=k(ea),o=(i=(0,R._)((0,v.useState)(null),2))[0],u=i[1],a=(0,Z.Il)(t.path)||O.Ql,l=(0,Z.UO)(t.path),c=D(ee),s=D(q),d=(f=(0,R._)((0,v.useState)(l),2))[0],h=f[1],m=(g=(0,R._)((0,v.useState)(!1),2))[0],y=g[1],b=(0,tw.Z)(function(){return(0,V.kv)(eD,function(e){var t;return null===(t=e.get(a))||void 0===t?void 0:t.children})},[a]),w=d!==l,E=S(b),x=null,w&&d.includes("/")?x=tN({fileName:d,parentPath:a}):w&&(x=(0,t_.z)({fileName:d,siblingNames:null!==(n=null==E?void 0:E.map(function(e){return e.filename}))&&void 0!==n?n:[],parentPath:a})),T=(0,P._)(function(e){var n,i,o,f,d,h,p;return(0,C.Jh)(this,function(v){switch(v.label){case 0:if(x||!e||e===l)return[2];if(n=r().fs,i=null,!e.includes("/"))return[3,2];return[4,tP({fileName:e,parentPath:a,fs:n})];case 1:return i=v.sent(),[3,3];case 2:i=(0,t_.z)({fileName:e,siblingNames:null!==(o=null==E?void 0:E.map(function(e){return e.filename}))&&void 0!==o?o:[],parentPath:a}),v.label=3;case 3:if(i)return u(i),[2];if(y(!0),d=(f=a===O.Ql?null:a+"/")?f+e:e,!((h=(0,Z.Il)(d)||O.Ql)!==O.Ql))return[3,6];return[4,n.stat(h)];case 4:if(v.sent().exists)return[3,6];return[4,n.createDir(h)];case 5:v.sent(),v.label=6;case 6:if(t.type!==N.Tv.Directory)return[3,8];return[4,n.moveDir(t.path,d)];case 7:return p=v.sent(),[3,10];case 8:return[4,n.moveFile(t.path,d)];case 9:p=v.sent(),v.label=10;case 10:if(p.error)return u("Something went wrong"),y(!1),[2];return c(null),s(d),[2]}})}),[{canRename:!!d&&w&&!x,value:d,renaming:m,error:o||x,siblings:E},{setValue:h,rename:function(e){return T.apply(this,arguments)},cancel:function(){c(null),s(t.path)}}]),2),I=_[0],A=_[1],F=A.setValue,B=A.rename,G=A.cancel,M=(0,v.useRef)(null),L=(0,v.useRef)(I.value);return(0,v.useEffect)(function(){if(M.current){var e=L.current;if(e){var t=e.lastIndexOf(".");-1===t&&(t=e.length),M.current.focus(),M.current.setSelectionRange(0,t)}}},[]),(0,p.tZ)(ne,{siblings:I.siblings?I.siblings.filter(function(t){return t.filename!==(0,Z.UO)(e.path)}):[],type:"rename",inputRef:M,loading:I.renaming,error:I.error,value:I.value,fileType:e.fileType,onBlur:function(e){I.canRename?B(e.currentTarget.value):I.error||G()},onChange:function(e){F(e.currentTarget.value)},onKeyDown:function(e){if("Escape"===e.key){G();return}"Enter"!==e.key||(I.canRename?B(e.currentTarget.value):I.error||G())},onSuggestion:function(e){F(e),B(e)}})}var nV=n(13900),nX=[td.l0.position.absolute,td.l0.top(0),td.l0.left(0),{width:"calc(100% - ".concat(tx.rowLeftIndent,")"),height:tx.rowHeight,transform:"translateY(".concat(tx.rowY,")"),marginLeft:tx.rowLeftIndent}],nJ=(0,th.X)({divider:(0,h._)(nX).concat([tD,td.l0.flex.growAndShrink(1),td.l0.justify.center]),dividerInner:[{borderTop:"1px dashed",borderColor:td.TV.outlineDimmest,height:"70%",justifyContent:"end"}],dividerText:[td.l0.truncate,td.l0.color.foregroundDimmer,{fontSize:tx.fontSizeSmall}],error:(0,h._)(nX).concat([td.l0.rowWithGap(4),td.l0.align.center,tD]),emptyDir:(0,h._)(nX).concat([tD,td.l0.color.foregroundDimmest,td.l0.justify.center,{paddingLeft:tx.iconSize,paddingRight:tx.horizontalPadding}]),row:(0,h._)(nX).concat([td.l0.flex.growAndShrink(1),td.l0.flex.row,td.l0.align.center,tj.gU.nofill,{backgroundColor:tx.nodeBackgroundColor,borderRadius:tx.borderRadius,cursor:"pointer","&:focus":{boxShadow:"0 0 0 2px "+td.TV.accentPrimaryDefault,zIndex:1},"@media (hover: hover)":(0,d._)({},tS.contextMenuButtonDisplay,"none"),"&:hover, &:active, &:focus":(0,d._)({},tS.contextMenuButtonDisplay,"flex"),transitionDuration:"0ms"}]),rowContent:[td.l0.flex.row,td.l0.align.center,td.l0.flex.growAndShrink(1),tD],uploadRow:(0,h._)(nX).concat([td.l0.flex.growAndShrink(1),td.l0.align.center,td.l0.flex.row,td.l0.align.center,tD,td.l0.border({color:"transparent"}),(0,d._)({backgroundColor:tx.nodeBackgroundColor,borderRadius:tx.borderRadius},tS.statusColor,td.TV.foregroundDimmer)]),createRow:(0,h._)(nX).concat([td.l0.justify.center]),icon:[tk,{marginRight:tx.iconTextGap}],fileInput:[td.l0.flex.row,td.l0.align.center],text:[tT,td.l0.flex.growAndShrink(1),{color:tx.statusColor}],emptyDirText:[tT,td.l0.display.flex,td.l0.justify.center,td.l0.flex.growAndShrink(1),{color:tx.statusColor}],contextMenuButton:[td.l0.reset.button,td.l0.height("100%"),td.l0.center,td.l0.cursor.pointer,tj.gU.filled,tk,{display:tx.contextMenuButtonDisplay,borderRadius:"0 ".concat(tx.borderRadius," ").concat(tx.borderRadius," 0"),transitionDuration:"0ms"}]});function nK(e){var t,n=(t=e.path,S((0,tw.Z)(function(){return(0,I.cn)(function(e){var n;return null!==(n=e(X).get(t))&&void 0!==n?n:null})},[t]))),r=S(ew);return(null==n?void 0:n.length)?(0,p.tZ)(tW.Z,{size:r,activeUsers:n}):null}function nq(e){var t,n=(t=e.path,S((0,tw.Z)(function(){return(0,I.cn)(function(e){var n=[],r=!0,i=!1,o=void 0;try{for(var u,a=e(X)[Symbol.iterator]();!(r=(u=a.next()).done);r=!0){var l=(0,R._)(u.value,2),c=l[0],s=l[1];if(!(0,L.yr)(t,c))return;n.push.apply(n,(0,h._)(s))}}catch(e){i=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return n.length?n:null})},[t])));return(null==n?void 0:n.length)?(0,p.tZ)(tW.Z,{activeUsers:n}):null}function nY(e){return(0,p.tZ)(tp.G,{title:"menu",tag:"button",css:nJ.contextMenuButton,onClick:e.onClick,children:(0,p.tZ)(nV.Z,{})})}function nQ(e,t){var n=x((0,tw.Z)(function(){return(0,V.kv)(eU,function(e){return e.has(t)})},[t]));(0,tv.j)(e,n,function(e){return(0,d._)({},tS.nodeBackgroundColor,e?td.TV.backgroundHigher:"transparent")}),(0,v.useEffect)(function(){var t=function(t){e.current&&e.current.setAttribute("aria-selected",t?"true":"false")};return t(n.current),n.subscribe(t)},[e,n,t])}var n$=(0,v.memo)(function(e){var t,n,r,i,o,u,a,l,c,s,f,h=(0,v.useRef)(null),g=tB(e.index),m=S((t=e.path,(0,tw.Z)(function(){return(0,V.kv)(eD,function(e){var n;return!!(null===(n=e.get(t))||void 0===n?void 0:n.expanded)})},[t]))),y=S((n=e.path,(0,tw.Z)(function(){return(0,V.kv)(eD,function(e){var t;return!!(null===(t=e.get(n))||void 0===t?void 0:t.loading)})},[n]))),b=(i=(r=(0,R._)((0,v.useState)(y),2))[0],o=r[1],(0,v.useEffect)(function(){if(!y){o(!1);return}var e=setTimeout(function(){return o(!0)},500);return function(){clearTimeout(e)}},[y]),i),w=D(en),E=S(Q),x=tF(e.path),k=(u=e.path,a=D(tO),(0,tw.Z)(function(){return function(e){a({event:e,path:u})}},[a,u])),I=(0,R._)(tG({path:e.path,index:e.index}),2),P=I[0],C=I[1],A=e.path===E&&y,O=A?M:(0,Z.UO)(e.path),F=nk({path:e.path,type:N.Tv.Directory}),B=F.dragRef,G=F.sizeRef,U=F.isDragging;nQ(h,e.path);var z=(l=e.path,S((0,tw.Z)(function(){return(0,V.kv)($,function(e){return e?function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var u,a=e[Symbol.iterator]();!(r=(u=a.next()).done);r=!0){var l=(0,R._)(u.value,2),c=l[0],s=l[1],f=s.index,d=s.worktree;(0,L.yr)(t,c)&&n.push({path:c,index:f,worktree:d})}}catch(e){i=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}if(0===n.length)return null;var h=n.every(function(e){return e.index===nF.h.ADDED||e.worktree===nF.h.UNTRACKED})?nF.h.ADDED:nF.h.MODIFIED;if(!nL(h))return null;var p=n.length;return{color:nM[h],backgroundColor:nG[h],count:p}}(e,l):null},tm())},[l]))),W=S(el);return(0,p.BX)(tp.G,{style:(0,_._)((0,T._)({},null==g?void 0:g.style),(f={},(0,d._)(f,tS.statusColor,null!==(c=null==z?void 0:z.color)&&void 0!==c?c:td.TV.foregroundDimmer),(0,d._)(f,tS.statusBackgroundColor,null==z?void 0:z.backgroundColor),(0,d._)(f,"opacity",U?.1:void 0),f)),tabIndex:x,role:"treeitem","aria-label":O,dataCy:"filetree-entity","aria-expanded":m,"aria-level":(null!==(s=null==g?void 0:g.depth)&&void 0!==s?s:0)+1,css:nJ.row,onFocus:function(){return C(e.path)},innerRef:(0,tX.l)(h,P,G,e.pending?void 0:B),onContextMenu:W?function(t){W(t,{path:e.path,type:N.Tv.Directory})}:void 0,onKeyDown:e.pending?void 0:function(t){"Enter"===t.key&&w(e.path)},onClick:e.pending?void 0:function(e){e.currentTarget===e.target&&k(e)},children:[(0,p.BX)(tp.G,{title:e.path,css:nJ.rowContent,onClick:e.pending?void 0:k,children:[(0,p.tZ)(tp.G,{css:nJ.icon,children:A||b&&!m?(0,p.tZ)(tz.Z,{}):(0,p.tZ)(p.HY,{children:m?(0,p.tZ)(tU.Z,{color:td.TV.foregroundDimmer}):(0,p.tZ)(tL.Z,{color:td.TV.foregroundDimmer})})}),(0,p.tZ)(tp.G,{css:nJ.text,children:O}),e.uploadProgress?(0,p.tZ)(nZ,{uploadProgress:e.uploadProgress}):null,z?(0,p.tZ)(nH,{count:z.count}):null,m?null:(0,p.tZ)(nq,{path:e.path})]}),W?(0,p.tZ)(nY,{onClick:function(t){W(t,{path:e.path,type:N.Tv.Directory})}}):null]})}),n0=(0,v.memo)(function(e){var t,n,r,i,o,u,a,l,c=(0,v.useRef)(null),s=tB(e.index),f=(t=e.path,n=k(ea),r=D(eH),i=D(q),(0,tw.Z)(function(){return{onClick:function(e){var o=n(),u=o.onFileSelect,a=o.multiselectModifierKey,l=a?tA(e,a):void 0;r({node:{path:t,type:N.Tv.File},mode:l}),i(t),l||u({path:t,event:e,type:"click"})},onDoubleClick:function(e){var r=n().onFileDoubleClick;null==r||r(e,t)}}},[t,n,i,r])),h=f.onClick,g=f.onDoubleClick,m=tF(e.path),y=D(en),b=(0,R._)(tG({path:e.path,index:e.index}),2),w=b[0],E=b[1],x=(0,Z.UO)(e.path),I=nk({path:e.path,type:N.Tv.File}),P=I.dragRef,C=I.sizeRef,A=I.isDragging;nQ(c,e.path);var O=(o=e.path,S((0,tw.Z)(function(){return(0,V.kv)($,function(e){return e?function(e,t){var n=null==e?void 0:e.get(t);if(!n)return null;var r=null;return n.worktree!==nF.h.UNMODIFIED?r=n.worktree:n.index!==nF.h.UNMODIFIED&&(r=n.index),r&&nL(r)?{color:nM[r],text:nB[r]}:null}(e,o):null},tm())},[o]))),F=S(el);return(0,p.BX)(tp.G,{style:(0,_._)((0,T._)({},null==s?void 0:s.style),(l={},(0,d._)(l,tS.statusColor,null!==(u=null==O?void 0:O.color)&&void 0!==u?u:td.TV.foregroundDimmer),(0,d._)(l,"opacity",A?.1:void 0),l)),tabIndex:m,dataCy:"filetree-entity",css:nJ.row,onFocus:function(){return E(e.path)},innerRef:(0,tX.l)(c,w,C,e.pending?void 0:P),role:"treeitem","aria-label":x,"aria-level":(null!==(a=null==s?void 0:s.depth)&&void 0!==a?a:0)+1,onDoubleClick:e.pending?void 0:g,onContextMenu:F?function(t){F(t,{path:e.path,type:N.Tv.File})}:void 0,onKeyDown:e.pending?void 0:function(t){"Enter"===t.key&&y(e.path)},onClick:e.pending?void 0:function(e){e.currentTarget===e.target&&h(e)},children:[(0,p.BX)(tp.G,{title:e.path,css:nJ.rowContent,onClick:e.pending?void 0:h,children:[(0,p.tZ)(tp.G,{css:nJ.icon,children:(0,p.tZ)(tM.Z,{path:e.path})}),(0,p.tZ)(tp.G,{css:nJ.text,children:x}),O?(0,p.tZ)(nW,{text:O.text}):null,(0,p.tZ)(nK,{path:e.path})]}),F?(0,p.tZ)(nY,{onClick:function(t){F(t,{path:e.path,type:N.Tv.File})}}):null]})}),n1=(0,v.memo)(function(e){var t=tB(e.index);return(0,p.tZ)(tp.G,{css:nJ.divider,style:null==t?void 0:t.style,role:"treeitem",children:(0,p.tZ)(tp.G,{css:nJ.dividerInner,children:(0,p.tZ)(tp.G,{css:nJ.dividerText,children:e.label})})})}),n2=(0,v.memo)(function(e){var t=tB(e.index);return(0,p.BX)(tp.G,{css:nJ.error,style:null==t?void 0:t.style,role:"treeitem",children:[(0,p.tZ)(tH.Z,{}),(0,p.tZ)(tV.xv,{multiline:!1,children:e.message})]})}),n4=(0,v.memo)(function(e){var t=tB(e.index);return(0,p.tZ)(tp.G,{css:nJ.emptyDir,style:null==t?void 0:t.style,role:"treeitem",children:(0,p.tZ)(tp.G,{css:nJ.emptyDirText,children:G})})}),n3=(0,v.memo)(function(e){var t=tB(e.index);return(0,p.tZ)(tp.G,{css:nJ.createRow,style:null==t?void 0:t.style,role:"treeitem",children:(0,p.tZ)(nn,{dir:e.dir})})}),n5=(0,v.memo)(function(e){var t=tB(e.index),n=(0,Z.UO)(e.path);return(0,p.tZ)(tp.G,{style:null==t?void 0:t.style,css:nJ.createRow,role:"treeitem","aria-label":n,children:(0,p.tZ)(nj,{path:e.path,fileType:e.fileType})})}),n9=(0,v.memo)(function(e){var t=tB(e.index),n=(0,Z.UO)(e.path);return(0,p.BX)(tp.G,{style:null==t?void 0:t.style,css:nJ.uploadRow,role:"treeitem","aria-label":n,children:[(0,p.tZ)(tp.G,{css:nJ.icon,children:(0,p.tZ)(tM.Z,{path:e.path})}),(0,p.tZ)(tp.G,{css:nJ.text,children:n}),(0,p.tZ)(nA,{progress:e.progress})]})}),n8=(0,v.memo)(function(e){var t,n=S((t=e.index,(0,tw.Z)(function(){return(0,I.cn)(function(e){var n,r;return null!==(r=null===(n=e(Y).get(t))||void 0===n?void 0:n.row)&&void 0!==r?r:null})},[t])));return n?"error"===n.type?(0,p.tZ)(n2,{index:e.index,message:n.message}):"divider"===n.type?(0,p.tZ)(n1,{index:e.index,label:n.label}):"emptyDir"===n.type?(0,p.tZ)(n4,{index:e.index}):"create"===n.type?(0,p.tZ)(n3,{index:e.index,dir:n.dir}):"uploadFile"===n.type?(0,p.tZ)(n9,{index:e.index,path:n.path,progress:n.progress}):n.rename?(0,p.tZ)(n5,{index:e.index,path:n.path,fileType:"file"===n.type?N.Tv.File:N.Tv.Directory}):"file"===n.type?(0,p.tZ)(n0,{index:e.index,path:n.path,pending:!!n.pending}):(0,p.tZ)(n$,{index:e.index,path:n.path,pending:!!n.pending,uploadProgress:n.uploadProgress}):null}),n6=[tx.horizontalPadding,tx.rowLeftIndent,tx.iconSize,tx.iconTextGap].join(" + "),n7=(0,th.X)({root:[td.l0.overflow("hidden"),td.l0.height(0),{pointerEvents:"none"}],file:[{paddingLeft:"calc(".concat(n6,")"),paddingRight:tx.horizontalPadding}]}),re=(0,v.memo)(function(){var e=S(eB);return e?(0,p.tZ)(tp.G,{css:n7.root,children:e.map(function(e){var t=e.type,n=e.text,r=e.depth,i=(0,d._)({},tS.rowLeftIndent,"calc(".concat(r," * ").concat(tx.gutterWidth,")")),o=t+r;return"divider"===t?(0,p.tZ)(tp.G,{style:i,css:nJ.dividerInner,children:(0,p.tZ)(tV.xv,{css:nJ.dividerInner,multiline:!1,children:n.toUpperCase()})},o):(0,p.tZ)(tp.G,{css:n7.file,style:i,children:"create"===t?(0,p.tZ)(nr,{create:function(){}}):(0,p.tZ)(tp.G,{css:nJ.text,children:n.toUpperCase()})},o)})}):null}),rt=(0,th.X)({content:[td.l0.px(2),td.l0.position.relative,{overflowY:"auto",height:"100%",minHeight:tx.minHeight}],scroll:[{position:"relative",height:tx.scrollHeight}],root:[td.l0.rowWithGap(0),td.l0.align.center],gutter:[td.l0.position.absolute,td.l0.top(0),td.l0.left(0),td.l0.reset.button,td.l0.align.end,td.l0.cursor.pointer,{width:tx.gutterWidth,"& > div":[td.l0.height("100%"),td.l0.width(1),{marginRight:"25%",opacity:.2,backgroundColor:td.TV.foregroundDimmest}],"&:hover > div":{backgroundColor:td.TV.accentPrimaryDefault,opacity:1}}]}),rn=(0,v.memo)(function(e){var t,n,r,i,o,u,a,l,c,s,f,g,m,y,b,w,E,x,T,_,I,P,C,A,F,B,G=S(Y),M=tZ();(0,tv.j)(e.scrollRef,M.fontSize,function(e){var t;return t={},(0,d._)(t,tS.fontSize,e+"px"),(0,d._)(t,tS.dirStatusIconSize,e+"px"),t}),(0,tv.j)(e.scrollRef,M.fontSizeSmall,function(e){return(0,d._)({},tS.fontSizeSmall,e+"px")}),(0,tv.j)(e.scrollRef,M.iconSize,function(e){return(0,d._)({},tS.iconSize,e+"px")}),(0,tv.j)(e.scrollRef,M.iconTextGap,function(e){return(0,d._)({},tS.iconTextGap,e+"px")}),(0,tv.j)(e.scrollRef,M.horizontalPadding,function(e){return(0,d._)({},tS.horizontalPadding,e+"px")}),(0,tv.j)(e.scrollRef,M.borderRadius,function(e){return(0,d._)({},tS.borderRadius,e+"px")}),(0,tv.j)(e.scrollRef,M.scrollHeight,function(e){return(0,d._)({},tS.scrollHeight,e+"px")}),(0,tv.j)(e.scrollRef,M.gutterWidth,function(e){return(0,d._)({},tS.gutterWidth,e+"px")}),(0,tv.j)(e.scrollRef,M.minHeight,function(e){return(0,d._)({},tS.minHeight,e+"px")});var L=D(eP),U=(t=D(nS),n=D(nm),r=(0,v.useRef)(null),i=(0,v.useRef)(null),o=(0,v.useRef)(null),u=(0,e5.Z)().showError,a=k(ng),l=D(e4),c=D(eY),s=D(nP),f=(0,v.useRef)(null),g=k(eD),m=k(Q),y=D(J),b=D(eZ),w=S(ec),x=(E=(0,R._)((0,ni.L)(function(){return{accept:[N.Tv.File,N.Tv.Directory,na.FILE],canDrop:function(){return!0},hover:function(e,n){var u=o.current;if(u){i.current&&function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{scrollZoneSize:{w:50,h:50},scrollVelocity:{x:50,y:50},scrollUpdateThrottle:100},r=n.scrollZoneSize,i=n.scrollVelocity,o=n.scrollUpdateThrottle,u=nc()(function(){var n=t.getClientOffset();if(!n)return[0,0];var o=n.x,u=n.y,a=e.getBoundingClientRect(),l=a.x,c=a.y,s=a.width,f=a.height,d=Math.min(s/2,r.w),h=Math.min(f/2,r.h),p=function(e,t){var n=(0,R._)(t,2),r=n[0],i=n[1];return np()(e,r[0],r[1])?(e-r[1])/(r[1]-r[0]):np()(e,i[0],i[1])?(e-i[0])/(i[1]-i[0]):0};return[p(o,[[l,l+d],[l+s-d,l+s]])*i.x,p(u,[[c,c+h],[c+f-h,c+f]])*i.y]},o,{trailing:!1})();if(u){var a=(0,R._)(u,2),l=a[0],c=a[1];if(0!==l||0!==c){var s=e.scrollLeft,f=e.scrollTop,d=e.scrollWidth,h=e.scrollHeight,p=e.clientWidth,v=e.clientHeight;requestAnimationFrame(function(){e.scrollTop=nv(0,d-p,s+l),e.scrollTop=nv(0,h-v,f+c)})}}}(i.current,n);var l=n.getClientOffset();if(l){var c=t({x:l.x-u.x,y:l.y-u.y+a()});c?"file"===c.row.type||"uploadFile"===c.row.type?r.current=(0,Z.Il)(c.row.path)||O.Ql:"dir"===c.row.type?r.current=c.row.path:r.current=c.row.dir:r.current=m();var d="nodes"!==e.type||(0,Z.RQ)(e.nodes).every(function(e){var t;return eq(e,null!==(t=r.current)&&void 0!==t?t:m())});if(s(d),(null==c?void 0:c.row.type)!=="dir"){f.current&&(clearTimeout(f.current.timer),f.current=null);return}var h=c.row.path;if(f.current){if(f.current.dir===h)return;clearTimeout(f.current.timer),f.current=null}if(d){var p=setTimeout(function(){var e;null!==(e=g().get(h))&&void 0!==e&&e.expanded||b(h)},200);f.current={dir:h,timer:p}}}}},drop:function(e,t){var n,i=null!==(n=r.current)&&void 0!==n?n:m();if("nodes"===e.type){c({to:i,nodes:e.nodes}),r.current=null;return}e.dirContent.then(function(e){if(e.reduce(function(e,t){return t.size+e},0)>104857600){u("Total file upload size exceeds maximum limit. Please try again with smaller files.");return}l({parentPath:i===O.Ql?void 0:i,files:e.filter(Boolean),onError:u})}),r.current=null},collect:function(e){return{isOver:e.isOver()}}}},[]),2))[0].isOver,T=E[1],_=D(nI),(0,v.useEffect)(function(){if(_(x),x){var e,t=null===(e=i.current)||void 0===e?void 0:e.getBoundingClientRect();o.current=t?{x:t.x,y:t.y}:null,t&&y({width:t.width,height:t.height});return}f.current&&(clearTimeout(f.current.timer),f.current=null),r.current=null,n(null)},[_,x,n,y]),I=D(ng),(0,v.useEffect)(function(){var e=i.current;if(e){var t=nc()(function(){I(e.scrollTop)},200);return e.addEventListener("scroll",t),function(){t.cancel(),e.removeEventListener("scroll",t)}}},[I]),{dropRef:w?void 0:T,containerRef:i}),z=U.dropRef,W=U.containerRef,H=D(ej),j=S(el),V=S(Q);return C=S(Y),A=D(eK),F=null===(P=S(ez))||void 0===P?void 0:P.path,B=(0,e3.Z)(F),(0,v.useEffect)(function(){B.current=F},[F,B]),(0,v.useEffect)(function(){B.current&&(A(B.current),B.current=void 0)},[C,A,B]),(0,p.BX)(tp.G,{css:rt.content,innerRef:(0,tX.l)(e.scrollRef,z,W),onKeyDown:L,onContextMenu:j?function(e){e.target===e.currentTarget&&j(e,{type:N.Tv.Directory,path:V})}:void 0,onClick:function(e){e.target===e.currentTarget&&H()},children:[(0,p.tZ)(re,{}),(0,p.BX)(tp.G,{css:rt.scroll,role:"tree",children:[(0,h._)(G.values()).map(function(e){var t=e.key,n=e.index;return(0,p.tZ)(n8,{index:n},t)}),(0,p.tZ)(ri,{}),(0,p.tZ)(nE,{}),(0,p.tZ)(nC,{})]})]})}),rr=(0,v.memo)(function(){var e,t,n,r,i,o,u,a,l,c,s,f,d,g,m,y,b,w,E,T,_=(t=(0,v.useRef)(null),n=S(eR),r=k(eR),i=k(es),o=(0,tw.Z)(function(){return function(e){var t=r()[e];return t?ef(i(),t.type):0}},[r,i]),u=k(ea),a=x(eI),l=(0,v.useRef)(S(et)),c=(0,ty.MG)({count:n.length,overscan:null!==(e=u().overscan)&&void 0!==e?e:100,getScrollElement:function(){return t.current},getItemKey:function(e){var t=n[e];return t?"error"===t.type?"error:"+t.dir+t.message:"divider"===t.type?"divider:"+t.dir+t.label:"emptyDir"===t.type?"emptyDir:"+t.dir:"create"===t.type?"create:"+t.dir:t.type+":"+t.path:""},estimateSize:o,rangeExtractor:function(e){var t=(0,tb.MK)(e);return null===a.current||t.includes(a.current)||void 0===n[a.current]?t:(0,h._)(t).concat([a.current])}}),(0,v.useEffect)(function(){l.current&&c.scrollToOffset(l.current)},[c,l]),s=D(eu),f=c.getVirtualItems(),d=c.getTotalSize(),(0,v.useEffect)(function(){s({rows:f,scrollHeight:d})},[s,f,d]),g=S(eo),(0,v.useEffect)(function(){if(g){var e=function(e){null!==e&&c.getVirtualItems()[e]&&c.scrollToIndex(e,{align:"auto",behavior:"auto"})};return setTimeout(function(){return e(a.current)}),a.subscribe(e)}},[c,a,g]),m=D(eJ),(0,v.useEffect)(function(){m(c)},[m,c]),{scrollRef:t,virtualizer:c}).scrollRef;return y=x(tc),b=k(ea),(0,v.useEffect)(function(){return y.subscribe(function(e){if(e){var t=b().onDeleteNodes;t&&t({nodes:e,confirm:function(){return function(e,t){return tf.apply(this,arguments)}(b().fs,e)}})}})},[b,y]),w=S(ta),E=x(eD),T=D(tl),(0,v.useEffect)(function(){if(w){var e,t,n=null,r=null!==(e=window.requestIdleCallback)&&void 0!==e?e:window.requestAnimationFrame,i=null!==(t=window.cancelIdleCallback)&&void 0!==t?t:window.cancelAnimationFrame,o=e7()(function(){n&&i(n),n=r(T)},1e3),u=E.subscribe(o);return document.addEventListener("visibilitychange",T),document.addEventListener("beforeunload",T),function(){o.cancel(),n&&i(n),document.removeEventListener("visibilitychange",T),document.removeEventListener("beforeunload",T),u(),T()}}},[w,E,T]),(0,p.tZ)(rn,{scrollRef:_})}),ri=(0,v.memo)(function(){var e=S(ei),t=D(eA);return(0,p.tZ)(p.HY,{children:e.map(function(e){return(0,p.tZ)(tp.G,{tag:"button",onClick:function(){return t(e.dir)},css:rt.gutter,style:{height:e.height,transform:"translate(calc(".concat(e.depth," * ").concat(tx.gutterWidth,"), ").concat(e.y,"px)")},children:(0,p.tZ)(tp.G,{})},"gutter"+e.dir+e.depth+e.y)})})});function ro(e){var t,n,r;return t=(0,e5.Z)().showError,n=(0,R._)((0,v.useState)(function(){var n,r,i,o,u=(0,I.MT)();u.set(ea,e);var a=null!==(n=e.root)&&void 0!==n?n:O.Ql,l=e.localCacheKey?(i=e.localCacheKey,o=e8.Z.get(ti(i)),te.B4.Check(tr,o)?{dirInfo:new Map(Object.entries(o.dirInfo)),scrollOffset:o.scrollOffset}:null):null;l&&u.set(et,l.scrollOffset);var c=null!==(r=null==l?void 0:l.dirInfo)&&void 0!==r?r:new Map;return c.has(a)||c.set(a,{expanded:!0}),u.set(eD,c),e.focusedPath&&u.set(q,e.focusedPath),{store:u,create:function(e,t){if(t){u.set(eG,{parentPath:t,fileType:e});return}var n=a,r=u.get(ez);(null==r?void 0:r.type)===N.Tv.File?n=(0,Z.Il)(r.path)||O.Ql:(null==r?void 0:r.type)===N.Tv.Directory&&(n=r.path),u.set(eG,{parentPath:n,fileType:e})},setPresenceState:function(e){u.set(X,e)},setFileStatus:function(e){u.set($,e)},rename:function(e){u.set(en,e)},move:function(e){u.set(eY,e)},upload:function(e){u.set(e4,(0,_._)((0,T._)({},e),{onError:t}))},onLoad:function(t){var n=e.fs.watchDir(a,{onChange:function(){t({error:null}),n()},onError:function(e){t({error:e}),n()}});return n},select:function(e){return null===e?u.set(ej):u.set(eX,e)},scrollToPath:function(e){return u.set(eK,e)},hasLocalCache:!!l,getChildren:function(e){var t,n;return null!==(n=null===(t=u.get(eD).get(e))||void 0===t?void 0:t.children)&&void 0!==n?n:null},getSelectedNode:function(){return u.get(ez)},getSelectedNodes:function(){return u.get(eU)},deleteNodes:function(e){u.set(ts,e)},collapse:function(e){return u.set(eA,e)},getExpandedDirs:function(e){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:O.Ql,n=new Set,r=!0,i=!1,o=void 0;try{for(var u,a=e[Symbol.iterator]();!(r=(u=a.next()).done);r=!0){var l=(0,R._)(u.value,2),c=l[0],s=l[1];c!==t&&s.expanded&&(t===O.Ql||(0,L.yr)(t,c))&&n.add(c)}}catch(e){i=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return 0===n.size?null:n}(u.get(eD),e)}}}),1)[0],(0,v.useEffect)(function(){n.store.set(ea,e)},[n.store,e]),(0,v.useEffect)(function(){var e=!0,t=!1,r=void 0;try{for(var i,o=n.store.get(eD)[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var u=(0,R._)(i.value,2),a=u[0];u[1].expanded&&n.store.set(eZ,a)}}catch(e){t=!0,r=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw r}}return function(){var e=!0,t=!1,r=void 0;try{for(var i,o=n.store.get(eD)[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var u,a=(0,R._)(i.value,2),l=(a[0],a[1]);null===(u=l.disposeWatcher)||void 0===u||u.call(l)}}catch(e){t=!0,r=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw r}}}},[n.store]),r=(0,e3.Z)(e.onLoad),(0,v.useEffect)(function(){return n.onLoad(function(e){var t;return null===(t=r.current)||void 0===t?void 0:t.call(r,e)})},[n,r]),n}function ru(e){return(0,p.tZ)(w,{store:e.store,children:(0,p.tZ)(rr,{})})}},98372:function(e,t,n){n.d(t,{S:function(){return a},W:function(){return u}});var r=n(8182),i=n(90234),o=n(43429),u=(0,o.createContext)(void 0);function a(e){var t=e.children,n=(0,o.useRef)();return n.current||(n.current=(0,i.MT)()),(0,r.tZ)(u.Provider,{value:n.current,children:t})}},36102:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(45903),i=n(8182),o=n(43429),u=n(68333),a=n(33195),l=n(82004),c=n(6187),s=n(50199),f=o.memo(u.ZP);function d(e){var t=e.source,n=e.sourcePos,o=e.fs,u=e.path,d=e.onCodeInsert,h=(0,a.l)(o,u),p=(0,c.Z)(t,100),v=(0,s.Z)(function(){return{img:h,a:function(e){return(0,i.tZ)(l.Z,(0,r._)({filePath:u},e))}}},[h,u]);return(0,i.tZ)(f,{onCodeInsert:d,components:v,sourcePos:n,children:p})}},61601:function(e,t,n){n.d(t,{A:function(){return h},Z:function(){return d}});var r=n(32477),i=n(8182),o=n(43429),u=n(19659),a=n(74833),l=n(29287),c=n(15146),s=n(42463),f=n(88936);function d(e){var t=e.fs,n=e.filePath,d=(0,r._)((0,o.useState)(null),2),p=d[0],v=d[1],g=(0,r._)((0,o.useState)(!0),2),m=g[0],y=g[1];return((0,o.useEffect)(function(){var e=t.watchFile(n,{onChange:function(e){v(e.toString("base64")),y(!1)},onError:function(){v(null),y(!1)},onMoveOrDelete:function(){v(null),y(!1)}});return function(){e(),y(!0),v(null)}},[t,n]),m)?(0,i.tZ)(f.Z,{}):p?(0,i.BX)(i.HY,{children:[(0,i.tZ)(h,{content:p,mime:(0,u.yC)(n)}),(0,i.tZ)(c.hU,{alt:"Download",css:[l.l0.position.absolute,l.l0.bottom(8),l.l0.right(8),l.l0.p(16)],children:(0,i.tZ)("a",{href:"data:text/plain;base64,".concat(p),download:(0,u.UO)(n),css:[l.l0.color.foregroundDimmer],children:(0,i.tZ)(s.Z,{})})})]}):(0,i.tZ)(a.xv,{multiline:!1,children:"Failed to load media file"})}var h=function(e){var t=e.content,n=e.mime,r=void 0===n?"":n;if(r.startsWith("video/"))return(0,i.tZ)("video",{src:"data:".concat(r,";base64,").concat(t),css:{maxHeight:"100%",maxWidth:"100%"},controls:!0});if(r.startsWith("image/"))return(0,i.tZ)("img",{alt:"Preview",src:"data:".concat(r,";base64,").concat(t),css:{width:"80%",height:"80%",objectFit:"contain",imageRendering:"pixelated"}});if(r.startsWith("audio/")){var o=r;return"audio/wave"===o&&(o="audio/wav"),(0,i.tZ)("audio",{src:"data:".concat(o,";base64,").concat(t),css:{maxHeight:"100%",maxWidth:"100%"},controls:!0})}return"application/pdf"===r?(0,i.tZ)("object",{data:"data:".concat(r,";base64,").concat(t),type:"application/pdf",css:{width:"100%",height:"100%",flex:1},children:(0,i.tZ)("embed",{src:"data:".concat(r,";base64,").concat(t),type:"application/pdf",css:{width:"100%",height:"100%"}})}):(0,i.tZ)(a.xv,{multiline:!1,children:"File type not supported."})}},45123:function(e,t,n){n.d(t,{W:function(){return f}});var r=n(34142),i=n(32477),o=n(87682),u=n(72190),a=n(30084),l=n(39756),c=n(65490),s=n(19659);function f(e){return d.apply(this,arguments)}function d(){return(d=(0,r._)(function(e){var t,n,f,d,h,p,v,g,m;function y(){return(y=(0,r._)(function(){var e,t;return(0,o.Jh)(this,function(r){switch(r.label){case 0:if(!(e=null==h?void 0:h.entrypoint))return[2,null];if(!(0,s.Il)(e))return[2,g.includes(e)?e:null];return[4,n.stat(e)];case 1:return[2,(t=r.sent()).exists&&t.type===a.Tv.File?e:null]}})})).apply(this,arguments)}return(0,o.Jh)(this,function(r){switch(r.label){case 0:if(t=e.dotReplit,n=e.fs,!c.l)throw Error("Expected apollo client");return[4,Promise.all([n.readDir(l.Ql),t.getConfig()])];case 1:if(d=(f=i._.apply(void 0,[r.sent(),2]))[0],h=f[1].config,!d||d.error)throw Error("Could not read files");return v=(p=d.children).find(function(e){return e.type===a.Tv.File&&e.filename.toLowerCase().endsWith("readme.md")}),g=p.filter(function(e){return e.type===a.Tv.File}).map(function(e){return e.filename}),[4,function(){return y.apply(this,arguments)}()];case 2:var o,b;if(m=r.sent())return[2,{entrypoint:m,readmeFile:null==v?void 0:v.filename}];return[2,{entrypoint:(b=(o=g).find(function(e){return e.toLowerCase().endsWith("readme.md")}))?b:o.includes("Makefile")?"Makefile":o.find(s.gK)||o.find(function(e){return![".replit","replit.nix"].includes(e)&&!(0,u.Ci)(e)}),readmeFile:null==v?void 0:v.filename}]}})})).apply(this,arguments)}},11774:function(e,t,n){function r(e){var t=document.createElement("canvas"),n=t.getContext("2d");if(t.width=e.width,t.height=e.height,!n)throw Error("failed to get canvas ctx");return{version:"1",width:e.width,height:e.height,palette:[[0,0,0,255],[255,255,255,255],[255,255,128,255],[255,128,255,255],[0,128,128,255],[128,0,255,255],[255,0,128,255],[0,255,255,255]],anims:{},frames:e.frames.map(function(r){var i=new window.ImageData(new Uint8ClampedArray(r.pixels),e.width,e.height);return n.putImageData(i,0,0),t.toDataURL()})}}function i(e){return new Promise(function(t,n){var r=new window.Image;r.src=e,r.onload=function(){t(r)},r.onerror=n})}function o(e){return new Promise(function(t,n){Promise.all(e.frames.map(i)).then(function(r){var i=document.createElement("canvas");i.width=e.width,i.height=e.height;var o=i.getContext("2d");if(!o){n(Error("failed to get canvas ctx"));return}t({frames:r.map(function(t){return o.drawImage(t,0,0),{pixels:Array.from(o.getImageData(0,0,e.width,e.height).data),width:e.width,height:e.height}}),preview:e.frames[0],width:e.width,height:e.height})}).catch(n)})}n.d(t,{C:function(){return r},u:function(){return o}})},86533:function(e,t,n){n.d(t,{z:function(){return u}});var r=n(72190),i=n(39756),o=n(17789);function u(e){var t=e.siblingNames,n=e.fileName,u=e.initialValue,a=e.parentPath;if(n.includes("/"))return"File names cannot include forward slashes";if("."===n||".."===n)return'File names cannot be "'.concat(n,'"');if(n.match(/^\s/)||n.match(/\s$/))return"File names cannot start or end with whitespace";if(u!==n&&t.includes(n))return"A file or folder with that name already exists";if(n.length>100)return"File names cannot be longer than 100 characters";var l=a===i.Ql?n:a+"/"+n;return l===o.w?"You can create environment variables with the Secrets tool! (.env files are deprecated)":(0,r.Ci)(l)?'"'.concat(l,'" is reserved'):null}},67696:function(e,t,n){n.d(t,{NH:function(){return l},Qt:function(){return s},R3:function(){return c},_s:function(){return o},p5:function(){return f}});var r=n(90234),i=n(68956),o=(0,r.cn)(null),u=(0,r.cn)(function(e){var t=e(o);return(null==t?void 0:t.isVisible)?t.path:null}),a=(0,r.cn)(null,function(e,t,n,r){switch(r.type){case"focus":t(o,{hasFocus:!0,isVisible:!0,position:r.position,path:n});return;case"update":t(o,{hasFocus:r.hasFocus,isVisible:!0,position:r.position,path:n});return;case"blur":t(o,function(e){var t;return{hasFocus:!1,isVisible:!!(null==e?void 0:e.isVisible),position:null!==(t=null==e?void 0:e.position)&&void 0!==t?t:{line:1,column:1,offset:0},path:n}});return;case"unmount":t(o,null);return;case"hidden":t(o,function(e){var t;return{hasFocus:!1,isVisible:!1,position:null!==(t=null==e?void 0:e.position)&&void 0!==t?t:{line:1,column:1,offset:0},path:n}});return;case"unhidden":t(o,function(e){var t;return{hasFocus:!!(null==e?void 0:e.hasFocus),isVisible:!0,position:null!==(t=null==e?void 0:e.position)&&void 0!==t?t:{line:1,column:1,offset:0},path:n}});return}});function l(){return(0,i.$X)(a)}function c(){return(0,i.Hg)(u)}function s(){return(0,i.XD)(o)}function f(){return(0,i.yL)(o)}},58091:function(e,t,n){n.d(t,{eA:function(){return O},_s:function(){return k._s},ex:function(){return v},aG:function(){return A.aG},zo:function(){return b},t9:function(){return C},R3:function(){return k.R3},pV:function(){return m},Qt:function(){return k.Qt},AA:function(){return w},Y_:function(){return S},b2:function(){return I},ev:function(){return x},Bx:function(){return y},VX:function(){return g},OM:function(){return N},Cp:function(){return R},_o:function(){return D},Gg:function(){return p},QH:function(){return E}});var r=n(8182),i=n(68956),o=n(21289),u=n(64461),a=n(90234),l=n(50199),c=(0,a.cn)(null),s=(0,a.cn)([]),f=(0,a.cn)(null,function(e,t,n){var r=e(s);t(s,[n].concat((0,o._)(r.filter(function(e){return e!==n}))).slice(0,20))}),d=(0,a.cn)(null,function(e,t,n){var r=e(s),i=r.indexOf(n.path);-1!==i&&t(s,(0,u.Uy)(r,function(e){"delete"===n.type?e.splice(i,1):e.splice(i,1,n.to)}))}),h=(0,a.cn)(null);function p(){return(0,i.$X)(d)}function v(){return(0,i.Hg)(c)}function g(){return(0,i.$X)(c)}function m(){return(0,i.XD)(c)}function y(){return(0,i.Hg)(s)}function b(){return(0,i.$X)(f)}function w(){return(0,i.XD)(s)}function E(){var e=(0,i.yL)(c);return(0,l.Z)(function(){return function(t){return e.subscribe(t)}},[e])}function S(){return(0,i.yL)(c)}function x(){return(0,i.Hg)(h)}function D(){return(0,i.$X)(h)}var k=n(67696),T=(0,a.cn)(new Map),_=(0,a.cn)(null,function(e,t,n){t(T,function(e){return(0,u.Uy)(e,function(e){n.indicatorType?e.set(n.paneType,n.indicatorType):e.delete(n.paneType)})})});function R(){return(0,i.$X)(_)}function I(e){var t=e.paneType;return(0,i.Hg)((0,l.Z)(function(){return(0,a.cn)(function(e){return t?e(T).get(t):void 0})},[t]))}var P=(0,n(15859).O4)("areHiddenFilesVisible",!1);function C(){return(0,i.Hg)(P)}function N(){return(0,i.$X)(P)}var A=n(61405);function O(e){var t=(0,i.ns)();return(0,r.tZ)(i.B3.Provider,{value:t,children:e.children})}},61405:function(e,t,n){n.d(t,{aG:function(){return N},f:function(){return T},HQ:function(){return P},e_:function(){return B}});var r,i=n(34142),o=n(32477),u=n(21289),a=n(87682),l=n(7730),c=n.n(l),s=n(80388),f=n(64461),d=n(90234),h=n(15859),p=n(68956),v=n(65490),g=n(93295);function m(){var e=(0,g._)(["\n  query WorkspaceSessionPresence($userIds: [Int!]!) {\n    usersByIds(ids: $userIds) {\n      id\n      image\n    }\n  }\n"]);return m=function(){return e},e}var y=(0,n(23982).Ps)(m()),b=n(69451),w=n.n(b),E=n(15542),S=n(50199),x=n(43429),D=(0,d.cn)(new Map),k=(0,d.cn)(null,function(e,t,n){return t(D,function(e){return(0,f.Uy)(e,function(e){e.set(n.userId,n.color)})})});function T(){var e=(0,p.XD)(R),t=(0,p.$X)(k);return(0,x.useCallback)(function(n){var r,i=e(),o=null===(r=i.get(n.userId))||void 0===r?void 0:r.color;return o||t({color:o=(0,s.i7)(Object.values(i)),userId:n.userId}),o},[e,t])}function _(e,t,n,r){var i=r||{timestamp:Math.floor(Date.now()/1e3),activeFile:null},o=e.get(t.id);if(o){o.sessions.set(t.session,i);return}e.set(t.id,{id:t.id,username:t.name,color:null!=n?n:(0,s.i7)((0,u._)(e.values())),roles:t.roles,sessions:new Map([[t.session,i]])})}var R=(0,d.cn)(new Map),I=(0,h.kv)(R,function(e){var t=new Map,n=!0,r=!1,i=void 0;try{for(var u,a=e[Symbol.iterator]();!(n=(u=a.next()).done);n=!0){var l=(0,o._)(u.value,2)[1],c=null,s=!0,f=!1,d=void 0;try{for(var h,p=l.sessions[Symbol.iterator]();!(s=(h=p.next()).done);s=!0){var v=(0,o._)(h.value,2)[1];!v.activeFile||c&&c.timestamp>v.timestamp||(c=v)}}catch(e){f=!0,d=e}finally{try{s||null==p.return||p.return()}finally{if(f)throw d}}if(null==c?void 0:c.activeFile){var g=t.get(c.activeFile),m={id:l.id,username:l.username,image:l.image,color:l.color,roles:l.roles};g?g.push(m):t.set(c.activeFile,[m])}}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t},c());function P(){return(0,p.yL)(I)}var C=(0,h.kv)(R,function(e){return(0,u._)(e.values()).map(function(e){return{id:e.id,username:e.username,color:e.color,image:e.image,roles:e.roles}})},c());function N(){return(0,p.Hg)(C)}function A(e){var t=e.id,n=e.name,r=e.session,i=e.roles;return t&&n&&r&&i?{id:t,name:n,session:r,roles:i}:null}function O(e){var t=e.seconds,n=e.nanos;return"number"!=typeof t||"number"!=typeof n?null:(0,s.gs)({seconds:t,nanos:n})}var Z=(0,d.cn)(null,function(e,t,n,r){t(R,function(t){return(0,f.Uy)(t,function(t){var i;if(null===(i=n.roster)||void 0===i?void 0:i.user){var u=!0,a=!1,l=void 0;try{for(var c,s=n.roster.user[Symbol.iterator]();!(u=(c=s.next()).done);u=!0){var f=c.value,d=A(f);if(null!==d&&(null==d?void 0:d.id)!==r){var h=function(e,t){if(!e.files)return null;var n=e.files.find(function(e){return e.userId===t.id&&e.session===t.session});if(!n)return null;var r=n.timestamp?O(n.timestamp):null;return r?{activeFile:n.file||null,timestamp:r}:null}(n.roster,d),p=e(D).get(d.id);_(t,d,p,h)}}}catch(e){a=!0,l=e}finally{try{u||null==s.return||s.return()}finally{if(a)throw l}}return}if(n.join){var v=A(n.join);if(!v||v.id===r)return;var g=e(D).get(v.id);_(t,v,g);return}if(n.part){var m,y,b=n.part,w=b.id,E=b.session;if(!w||!E)return;m={id:w,session:E},(y=t.get(m.id))&&(1===y.sessions.size?t.delete(m.id):y.sessions.delete(m.session));return}if(n.fileOpened){var S=n.fileOpened,x=S.session,k=S.userId,T=S.file,R=n.fileOpened.timestamp?O(n.fileOpened.timestamp):null;if(!R||!x||!k||!T)return;!function(e,t){var n=e.get(t.userId);if(n){var r=n.sessions.get(t.session);r?(r.timestamp=t.timestamp,r.activeFile=t.file):n.sessions.set(t.session,{timestamp:t.timestamp,activeFile:t.file})}}(t,{timestamp:R,session:x,userId:k,file:T});return}if(n.sessionTimestampUpdated){var I=n.sessionTimestampUpdated.session,P=n.sessionTimestampUpdated.timestamp?O(n.sessionTimestampUpdated.timestamp):null;if(!P||!I)return;!function(e,t){var n=t.session,r=t.timestamp,i=!0,u=!1,a=void 0;try{for(var l,c=e[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=(0,o._)(l.value,2)[1].sessions.get(n);if(s){s.timestamp=r;break}}}catch(e){u=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(u)throw a}}}(t,{timestamp:P,session:I});return}})})}),F=(0,d.cn)(null,(r=(0,i._)(function(e,t){var n,r,i,u,l,c,s,d,h,p,g;return(0,a.Jh)(this,function(a){switch(a.label){case 0:n=[],r=e(R),i=!0,u=!1,l=void 0;try{for(c=r[Symbol.iterator]();!(i=(s=c.next()).done);i=!0)h=(d=(0,o._)(s.value,2))[0],d[1].image||n.push(h)}catch(e){u=!0,l=e}finally{try{i||null==c.return||c.return()}finally{if(u)throw l}}if(!n.length)return[2];return[4,null===v.l||void 0===v.l?void 0:v.l.query({query:y,variables:{userIds:n}})];case 1:if(!(g=null==(p=a.sent())?void 0:p.data.usersByIds))return[2];return t(R,function(e){return(0,f.Uy)(e,function(e){var t=!0,n=!1,r=void 0;try{for(var i,o=g[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var u=i.value,a=e.get(u.id);a&&(a.image=u.image)}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}})}),[2]}})}),function(e,t){return r.apply(this,arguments)}));function B(){var e=(0,E.d)(),t=(0,p.$X)(F),n=(0,p.$X)(Z),r=(0,p.yL)(R);return(0,x.useEffect)(function(){t();var e=w()(t,2e3);return r.subscribe(function(){return e()})},[t,r]),(0,S.Z)(function(){return function(t){e&&n(t,e)}},[n,e])}},68956:function(e,t,n){n.d(t,{$X:function(){return v},B3:function(){return s},Hg:function(){return d},XD:function(){return g},ns:function(){return c},rF:function(){return p},yL:function(){return h}});var r=n(32477),i=n(43429),o=n(90234),u=n(71999),a=n(28999),l=n(66368);function c(){return(0,r._)((0,i.useState)(function(){return(0,o.MT)()}),1)[0]}var s=(0,i.createContext)(null);function f(){var e=(0,i.useContext)(s);if(!e)throw Error("Expected store in context");return e}function d(e){return(0,u.Dv)(e,{store:f()})}function h(e){return(0,l.b)(e,f())}function p(){var e=f();return(0,i.useCallback)(function(t){return(0,l.c)(e,t)},[e])}var v=function(e){return(0,u.b9)(e,{store:f()})};function g(e){return(0,a.lV)((0,i.useCallback)(function(t){return t(e)},[e]),{store:f()})}},37685:function(e,t,n){n.d(t,{MF:function(){return l},TI:function(){return a},lv:function(){return f},uC:function(){return c},yb:function(){return s}});var r=n(39426),i=n(39756),o=n(43778),u=n(93711);function a(e){var t=(0,u.nV)(e)[1];return!!t&&(t===i.oh||t===i.AS)}function l(e){return".env"===e.toString()||".breakpoints"===e.toString()||".cache"===e.toString()||(0,u.X2)((0,u.S1)(".cache"),e)}function c(e){return o.nh.includes(e.toString())}function s(e,t){return!!(t&&r.ZP.isLangFileBinary(t,e.toString()))}function f(e,t){if(!t)return!1;var n=(0,u.nV)(e).slice(1),r=!0,i=!1,o=void 0;try{for(var a,l=t[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value,s=!0,f=!1,d=void 0;try{for(var h,p=n[Symbol.iterator]();!(s=(h=p.next()).done);s=!0)if(h.value.toString().match(c))return!0}catch(e){f=!0,d=e}finally{try{s||null==p.return||p.return()}finally{if(f)throw d}}}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return!1}},53941:function(e,t,n){n.d(t,{Y:function(){return o}});var r=n(34142),i=n(87682);function o(e){return u.apply(this,arguments)}function u(){return(u=(0,r._)(function(e){var t,n;return(0,i.Jh)(this,function(r){return t=e.container,n=e.service,[2,new Promise(function(e){var r=t.openChannel({service:n},function(t){return e([t.channel,r]),r})})]})})).apply(this,arguments)}},90487:function(e,t,n){n.d(t,{Z:function(){return v}});var r,i,o=n(34142),u=n(32477),a=n(87682),l=n(58962),c=n(48900),s=n(83493),f=n(78037),d=n(53941);(r=i||(i={})).OUTPUT="OUTPUT",r.ERROR="ERROR",r.STATE_CHANGED="STATE_CHANGED",r.CHANNEL_OPENED="CHANNEL_OPENED";var h=n(30671),p=n(67795);function v(e){var t=e.container,n=e.forceTrace,r=e.track,v=(0,s.ZP)(),g=new Map;function m(e){var t=g.get(e);return t||(t={packagerChannel:null,didCallOpenChannel:!1,closeChannel:null},g.set(e,t)),t}function y(e){return b.apply(this,arguments)}function b(){return(b=(0,o._)(function(e){var n,r,i,o,l=arguments;return(0,a.Jh)(this,function(a){switch(a.label){case 0:return n=l.length>1&&void 0!==l[1]?l[1]:0,[4,(0,d.Y)({container:t,service:"packager3"})];case 1:if(i=(r=u._.apply(void 0,[a.sent(),2]))[0],o=r[1],!e)return[3,3];return[4,i.request({packageSetPackagerRequest:{packagerId:e}})];case 2:a.sent(),a.label=3;case 3:if("open"!==i.status){if(n>5)throw Error("Failed to getAnonymousPackagerChannel");return[2,y(e,n+1)]}return[2,[i,o]]}})})).apply(this,arguments)}function w(e){return E.apply(this,arguments)}function E(){return(E=(0,o._)(function(e){var n;return(0,a.Jh)(this,function(r){return((n=m(e)).didCallOpenChannel||function(e){var n=m(e);if(n.didCallOpenChannel)throw Error("Already called open channel");n.didCallOpenChannel=!0,n.closeChannel=t.openChannel({service:"packager3",name:e||"packager",action:l.api.OpenChannel.Action.ATTACH_OR_CREATE},function(t){var r=t.channel;return r.onCommand(function(t){if(null!=t.state){var n=t.state===l.api.State.Running;v.emit(i.STATE_CHANGED,n,e)}else null!=t.output?v.emit(i.OUTPUT,t.output,e):null!=t.error&&v.emit(i.ERROR,t.error,e)}),e?r.request({packageSetPackagerRequest:{packagerId:e}}).then(function(){n.packagerChannel=r,v.emit(i.CHANNEL_OPENED,r,e)}):(n.packagerChannel=r,v.emit(i.CHANNEL_OPENED,r,e)),function(){n.packagerChannel=null}})}(e),n.packagerChannel&&"open"===n.packagerChannel.status)?[2,n.packagerChannel]:[2,new Promise(function(t){v.once(i.CHANNEL_OPENED,function(n,r){r===e&&t(n)})})]})})).apply(this,arguments)}return{addPackages:function(e,t){return(0,o._)(function(){var n,i,o,u;return(0,a.Jh)(this,function(a){switch(a.label){case 0:return[4,w(t)];case 1:if("open"!==(i=a.sent()).status)return[2,!1];return o=e.map(function(e){return{name:e.name,spec:e.version}}),[4,i.request({packageAdd:{pkgs:o,useNewResponse:!0}})];case 2:if((u=a.sent()).channelClosed||u.error)return[2,!1];return(null===(n=u.packageAddResponse)||void 0===n?void 0:n.installedSystemDependencies)&&r&&r(p.U3.PACKAGER_INSTALLED_SYSTEM_DEPENDENCIES,{packagerId:t}),[2,!0]}})})()},removePackages:function(e,t){return(0,o._)(function(){var n,r,i;return(0,a.Jh)(this,function(o){switch(o.label){case 0:return[4,w(t)];case 1:if("open"!==(n=o.sent()).status)return[2,!1];return r=e.map(function(e){return{name:e}}),[4,n.request({packageRemove:{pkgs:r}})];case 2:if((i=o.sent()).channelClosed)return[2,!1];return[2,!!i.ok]}})})()},searchPackages:function(e,t){return(0,o._)(function(){var n,r,i,o;return(0,a.Jh)(this,function(a){switch(a.label){case 0:return[4,y(t)];case 1:return r=(n=u._.apply(void 0,[a.sent(),2]))[0],i=n[1],[4,r.request({packageSearch:{query:e}})];case 2:if((o=a.sent()).channelClosed)return[2,[]];if(i(),"packageSearchResp"===o.body&&o.packageSearchResp)return[2,o.packageSearchResp.results||[]];return c.Tb(Error("Unknown packager3 command ".concat(o.body,". ")+"Expected packageSearchResp. Received error: ".concat(o.error))),[2,[]]}})})()},fetchPackageInfo:function(e,t){return(0,o._)(function(){var n,r,i,o;return(0,a.Jh)(this,function(a){switch(a.label){case 0:return[4,y(t)];case 1:return r=(n=u._.apply(void 0,[a.sent(),2]))[0],i=n[1],[4,r.request({packageInfo:{pkg:{name:e}}})];case 2:if((o=a.sent()).channelClosed)return[2,void 0];if(i(),"packageInfoResp"===o.body&&o.packageInfoResp)return[2,o.packageInfoResp.pkg||void 0];return c.Tb(Error("Unknown packager3 command ".concat(o.body,". ")+"Expected packageInfoResp. Received error: ".concat(o.error))),[2,void 0]}})})()},installPackages:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,o._)(function(){return(0,a.Jh)(this,function(u){var l;return[2,(0,h.nO)(e,"packager.installPackages",(l=(0,o._)(function(e){var o,u,l;return(0,a.Jh)(this,function(a){switch(a.label){case 0:return[4,w(t)];case 1:if("open"!==(o=a.sent()).status)return[2,(0,f.U)("ChannelClosed")];return[4,o.request({packageInstall:{useNewResponse:!0,disableGuess:i},traceInfo:(0,h.Rg)(e),forceTrace:n})];case 2:if((u=a.sent()).error)return[2,(0,f.U)(u.error)];if(u.channelClosed)return[2,(0,f.U)("ChannelClosed")];if(!(l=u.packageInstallResponse))return[2,(0,f.U)("No package install response found")];return l.installedSystemDependencies&&r&&r(p.U3.PACKAGER_INSTALLED_SYSTEM_DEPENDENCIES,{packagerId:t}),[2,(0,f.Ok)(l)]}})}),function(e){return l.apply(this,arguments)}))]})})()},listSpecfile:function(e){return(0,o._)(function(){var t,n,r,i,o,l,s;return(0,a.Jh)(this,function(a){switch(a.label){case 0:return[4,y(e)];case 1:return n=(t=u._.apply(void 0,[a.sent(),2]))[0],r=t[1],[4,n.request({packageListSpecfile:{}})];case 2:if((i=a.sent()).channelClosed)return[2,{packages:null,error:"channel closed"}];switch(r(),i.body){case"error":return[2,{packages:null,error:"list specfile failed: ".concat(i.error)}];case"packageListSpecfileResp":if(!(l=null===(o=i.packageListSpecfileResp)||void 0===o?void 0:o.pkgs))return[2,{packages:null,error:"list specfile returned an empty response"}];return[2,{packages:l,error:null}];default:return s="Unknown packager3 listSpecFile command ".concat(i.body,". ")+"Expected error or packageListSpecfileResp",c.Tb(Error(s)),[2,{packages:null,error:s}]}return[2]}})})()},getPackagerIds:function(){return Array.from(g.keys())},clearPackager:function(e){var t=g.get(e);(null==t?void 0:t.closeChannel)&&t.closeChannel(),g.delete(e)},onOutput:function(e){return v.on(i.OUTPUT,e),function(){v.removeListener(i.OUTPUT,e)}},onError:function(e){return v.on(i.ERROR,e),function(){v.removeListener(i.ERROR,e)}},onStateChanged:function(e){return v.on(i.STATE_CHANGED,e),function(){v.removeListener(i.STATE_CHANGED,e)}}}}}}]);
//# sourceMappingURL=7003-1a94d4cece6ddd84.js.map