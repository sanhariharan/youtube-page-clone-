!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=Error().stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="4902907a-0554-4110-aedf-0704dead7e5f",e._sentryDebugIdIdentifier="sentry-dbid-4902907a-0554-4110-aedf-0704dead7e5f")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"d103cf55"};"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6645],{14819:function(e,n,t){t.d(n,{Z:function(){return f}});var r=t(8182);t(43429);var o=t(1498),i=t(74833),a=t(56596),l=t(29287),c=t(88936),u=t(93918),s=a.K.form,d=(0,u.X)({content:[l.l0.colWithGap(24)],buttons:[l.l0.rowWithGap(12),l.l0.justify.end]});function f(e){return(0,r.BX)(s,{css:d.content,onSubmit:function(n){n.preventDefault(),e.onConfirm()},children:[(0,r.tZ)(i.h4,{variant:"headerDefault",level:2,children:e.title}),"string"==typeof e.children?(0,r.tZ)(i.xv,{children:e.children}):e.children,(0,r.BX)(a.G,{css:d.buttons,children:[(0,r.tZ)(o.zx,{type:"button",onClick:e.onCancel,text:"Cancel"}),(0,r.tZ)(o.zx,{type:"submit",disabled:e.loading,iconLeft:e.loading?(0,r.tZ)(c.Z,{}):e.confirmIcon,colorway:e.isDestructive?"negative":"primary",text:e.confirmLabel||"Confirm"})]})]})}},72129:function(e,n,t){t.d(n,{v:function(){return v}});var r=t(32477),o=t(25632),i=t(45903),a=t(93295),l=t(23982),c=t(77393);function u(){var e=(0,a._)(['\n  query ChatEngine {\n    currentUser {\n      id\n      defaultEngine: gateVariation(feature: "flag-ghostwriter-chat-engine")\n      hasOverride: gate(feature: "flag-ghostwriter-chat-engine-override")\n    }\n  }\n']);return u=function(){return e},e}var s={},d=(0,l.Ps)(u()),f=t(45434),h=t(1228),p=t(4736),g=t(21113);function v(){var e,n,t,a=(0,o.Gn)("chatEngine").preferences,l=(e=(0,i._)({},s,void 0),c.a(d,e)).data,u=(0,r._)((0,g.Ni)(),1)[0],v=(0,p.ll)(),m=null==l?void 0:null===(n=l.currentUser)||void 0===n?void 0:n.hasOverride,y=null==a?void 0:a.chatEngine,b=null==l?void 0:null===(t=l.currentUser)||void 0===t?void 0:t.defaultEngine;return m&&y&&(0,f.uL)(y)?y:(0,f.uL)(b)?"advanced"===u&&v?f.hf.model:b:h.Fp}},51944:function(e,n,t){t.d(n,{Q:function(){return o},h:function(){return i}});var r=t(84357),o=r.Py.define(),i=r.Py.define()},38003:function(e,n,t){t.d(n,{X:function(){return nf}});var r,o=t(39698),i=t(45903),a=t(8182),l=t(74652),c=t(26508),u=t(93918),s=t(8279),d=t(29287),f=t(37951),h=t(56596),p=t(43429),g=t(50199),v=t(7444),m=t(88936),y=t(93496),b=t(34142),w=t(32477),x=t(87682),k=t(90234),C=t(64461),Z=t(10981),S=t(21289);function T(e){return e.map(function(e){return"group"===e.data.type?e.data.key:e.data.key||e.data.label}).join(":")}function R(e,n){var t=[],r=!0,o=!1,i=void 0;try{for(var a,l=e.slice(n)[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;"group"!==c.data.type&&t.push(c.data.label)}}catch(e){o=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}return(0,S._)(new Set(t))}function E(e,n){for(var t=e.indexPath,r=n.indexPath,o=Math.min(t.length,r.length),i=0;i<o;i++){if(t[i]>r[i])return 1;if(t[i]<r[i])return -1}return t.length-r.length}var D=t(71999),P=t(66368),_=t(28999),A=(0,p.createContext)(void 0);function L(){var e=(0,p.useContext)(A);if(!e)throw Error("Expected store in context");return e}function I(e){var n=L();return(0,D.Dv)(e,{store:n})}function q(e){return(0,_.lV)((0,p.useCallback)(function(n){return n(e)},[e]),{store:L()})}var M=function(e){var n=L();return(0,D.b9)(e,{store:n})};function B(e){return(0,P.b)(e,L())}var G=t(15859),F=function(e){return"item-"+e},W=(0,k.cn)(0),U=(0,k.cn)(0),X=(0,k.cn)(0),N=(0,k.cn)(function(e){return e(W)+e(U)+e(X)}),O=(0,k.cn)({path:[],rows:[],items:[],placeholder:"",isLoading:!1}),z=(0,k.cn)(!0),H=(0,k.cn)(!1),j=(0,k.cn)(null),V=(0,k.cn)({}),K=(0,G.kv)(V,function(e){return!!e.openOnInput}),Y=(0,G.kv)(V,function(e){return!!e.autoFocus}),$=(0,G.kv)(V,function(e){return e.keyboardShortcut}),J=(0,G.kv)(V,function(e){return e.command}),Q=(0,G.kv)(V,function(e){return e.overscan}),ee=(0,G.kv)(V,function(e){return e.footer}),en=(0,G.kv)(V,function(e){return e.focusRef}),et=(0,G.kv)(V,function(e){var n;return null!==(n=e.fontSize)&&void 0!==n?n:14}),er=(0,G.kv)(V,function(e){return!!e.compact}),eo=(0,G.kv)(V,function(e){var n;return null!==(n=e.minItemHeight)&&void 0!==n?n:32}),ei=(0,k.cn)(function(e){return!e(K)}),ea=(0,G.kv)(V,function(e){return!!e.iconBreadcrumbs}),el=(0,k.cn)(null),ec=(0,k.cn)(function(e){return e(ep)>-1}),eu=(0,k.cn)(function(e){var n=e(O);return!n.isLoading&&0===n.rows.length}),es=(0,k.cn)({label:"",input:"",menu:""}),ed=(0,k.cn)(""),ef=(0,k.cn)(""),eh=(0,k.cn)(""),ep=(0,k.cn)(-1),eg=(0,k.cn)(function(e){var n=e(ep);return e(ev).findIndex(function(e){return"item"===e.type&&e.index===n})}),ev=(0,k.cn)(function(e){return e(O).rows}),em=(0,k.cn)(function(e){return e(O).items}),ey=(0,k.cn)(function(e){return e(em).length}),eb=(0,k.cn)(function(e){return e(eE).filter(function(e){return"context"===e.data.type&&!!e.match})}),ew=(0,k.cn)(function(e){return e(eb).length>0}),ex=(0,k.cn)(!1),ek=(0,k.cn)(null,function(e,n){var t,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n(ex,!0),n(O,function(e){return(0,C.Uy)(e,function(e){e.path=[e.path[0]]})}),e(eW).setPath(e(eE)),n(ep,-1),n(ed,""),n(ef,""),n(eh,""),e(K)&&n(z,!1),r.focus&&(null===(t=e(eM))||void 0===t||t.focus())}),eC=(0,k.cn)(function(e){return e(O).placeholder}),eZ=(0,k.cn)(function(e){return e(O).isLoading}),eS=(0,k.cn)(function(e){return e(O).path.length}),eT=(0,k.cn)(function(e){return e(ew)||!!e(ed)}),eR=(0,k.cn)(null,(r=(0,b._)(function(e,n,t,r){var o,i,a,l,c,u;function s(t){var r;n(eL,null!=t?t:"Something went wrong"),null===(r=e(eM))||void 0===r||r.focus()}return(0,x.Jh)(this,function(d){switch(d.label){case 0:if("group"===t.data.type)return[2];if(n(el,t),i=e(V),"context"===t.data.type)return n(eq,l=t.path),n(ep,-1),e(eW).setPath(l),null===(a=e(eM))||void 0===a||a.focus(),[2];switch(t.data.type){case"output":case"error":return n(ek),null===(c=i.onSelect)||void 0===c||c.call(i,t),[2]}n(H,!0),u=null,d.label=1;case 1:return d.trys.push([1,3,,4]),[4,Promise.resolve(t.data.run(r.nativeEvent))];case 2:return u=d.sent(),[3,4];case 3:return d.sent(),n(H,!1),s(),[2];case 4:if(n(H,!1),(null==u?void 0:u.type)==="error")return s(u.message),[2];return n(ek),null===(o=i.onAction)||void 0===o||o.call(i),[2]}})}),function(e,n,t,o){return r.apply(this,arguments)})),eE=(0,k.cn)(function(e){return e(O).path}),eD=(0,k.cn)(function(e){return 1===e(eE).length}),eP=(0,k.cn)(null,function(e,n,t){var r=e(eE),o=r.indexOf(t);-1!==o&&(r=r.slice(0,o+1),n(ep,0),e(eW).setPath(r),n(ed,""))});function e_(e,n){return n.match.score-e.match.score}var eA=(0,k.cn)(null,function(e,n,t){var r,o=e(eh);if(o===e(eh)){var i=t.items.sort(e_),a=t.path.length?t.path[t.path.length-1]:null,l=function(e,n){var t=new Map;e.forEach(function(e){var n=e.path.slice(0,-1),r="section:"+T(n),o=t.get(r);if(o)o.items.push(e);else{var i=n[n.length-1],a=(null==i?void 0:i.data.type)==="group";t.set(r,{type:"section",path:n,score:e.match.score,items:[e],unlabeled:a,key:r})}});var r=(0,S._)(t.entries()).sort(function(e,t){var r=(0,w._)(e,2),o=r[0],i=r[1],a=(0,w._)(t,2),l=a[0],c=a[1];if(!n||!n.includes(o)&&!n.includes(l))return c.score-i.score;var u=n.indexOf(o),s=n.indexOf(l);return u>-1&&s>-1?u-s:-1===u?1:-1}),o={items:[],rows:[]},i=0;return r.forEach(function(e){var n=(0,w._)(e,2),t=n[0],r=n[1];o.rows.push({type:r.type,key:t,path:r.path,unlabeled:r.unlabeled}),r.items.forEach(function(e){o.items.push(e),o.rows.push({type:"item",item:e,index:i++})})}),o}(i,o?e(O).rows.filter(function(e){return"section"===e.type}).map(function(e){return e.key}):void 0),c=l.items,u=l.rows,s=null!==(r=null==a?void 0:a.data)&&void 0!==r?r:null,d=null==s?void 0:s.description;e(ea)&&(null==s?void 0:s.type)!=="group"&&(d=null==s?void 0:s.label),n(O,function(e){return{items:c,rows:u,isLoading:!!t.partial,path:t.path,placeholder:d||e.placeholder}})}}),eL=(0,k.cn)(null,function(e,n,t){n(j,t),n(O,function(e){return{items:[],rows:[],isLoading:!1,path:e.path,placeholder:e.placeholder}})}),eI=(0,k.cn)(null,function(e,n,t){n(ed,t),n(ep,t?0:-1),n(j,null),n(O,function(e){return(0,C.Uy)(e,function(e){e.isLoading=!!t})}),e(K)&&n(z,!!t)}),eq=(0,k.cn)(null,function(e,n,t){n(O,function(e){return(0,C.Uy)(e,function(e){e.items=[],e.rows=[],e.path=t})}),n(eI,""),n(ef,""),n(eh,"")}),eM=(0,k.cn)(null),eB=(0,k.cn)(null,function(e,n,t){var r=e(ep);if(!(r<0)){var o=e(em)[r];o&&n(eR,o,t)}}),eG=(0,k.cn)(null,function(e,n,t){var r=e(z),o=e(ey),i=e(ep);switch(t.key){case"ArrowDown":t.preventDefault();var a=i+1;n(ep,a<o?a:0),n(z,!0);return;case"ArrowUp":t.preventDefault(),n(ep,Math.max(-1,i-1));return;case"Home":t.preventDefault(),t.shiftKey?t.currentTarget.selectionStart=0:t.currentTarget.setSelectionRange(0,0);return;case"End":t.preventDefault();var l=t.currentTarget.value.length;t.shiftKey?t.currentTarget.selectionEnd=l:t.currentTarget.setSelectionRange(l,l);return;case"Escape":if(!e(ed)||(t.preventDefault(),n(eI,""),n(ef,""),e(ei)))return;n(z,!1);return;case"Enter":if(!r)return;t.preventDefault(),n(eB,t);return;case"PageUp":case"PageDown":if(!r)return;t.preventDefault();var c="PageUp"===t.key?-10:10;n(ep,function(e){return Math.max(Math.min(e+c,o-1),0)});return}}),eF=(0,k.cn)(null,function(e,n,t){var r=Array.isArray(t)?t:[t];e(ex)&&(r=[r[0]]);var o=e(ef);n(eh,o),e(eW).setPath(r,o)}),eW=(0,k.cn)({}),eU=(0,k.cn)(null,function(e,n){var t=e(eE),r=e(eb);if(r.pop()){var o=r.pop();if(!o){n(ek);return}var i=t.indexOf(o);t=t.slice(0,i+1),n(ep,0),n(eq,t),e(eW).setPath(t)}}),eX=t(9331),eN=t(1643),eO=(0,u.X)({root:[d.l0.reset.button,d.l0.viewStyle,d.l0.flex.row,d.l0.align.center,d.l0.borderRadius(0),d.l0.cursor.pointer,d.l0.color.foregroundDimmer,{gap:(0,eN.fP)(4),paddingLeft:(0,eN.fP)(4),paddingRight:(0,eN.fP)(4),"&:hover":{color:d.TV.foregroundDefault}}],icon:[d.l0.position.relative,(0,eN.D$)(16),{width:(0,eN.fP)(16),height:(0,eN.fP)(16)}],iconRight:[(0,eN.D$)(12),{width:(0,eN.fP)(12),height:(0,eN.fP)(12)}],text:[d.l0.truncate,d.l0.flex.shrink(1),{fontSize:"1em"}]}),ez=(0,p.memo)(function(){var e={iconOnly:I(ea),breadcrumbs:I(eb),onClick:M(eP)},n=e.breadcrumbs,t=e.iconOnly,r=e.onClick;return n.length?(0,a.tZ)(a.HY,{children:n.map(function(e,n){if(!e.data||!("label"in e.data))return null;var o=e.data,i=o.label,l=o.icon;return(0,a.BX)("button",{css:eO.root,onClick:function(){return r(e)},children:[(0,a.tZ)(h.G,{css:eO.icon,children:l}),t?null:(0,a.tZ)(h.G,{css:eO.text,children:i}),(0,a.tZ)(h.G,{css:eO.iconRight,children:(0,a.tZ)(eX.Z,{})})]},i+n)})}):null}),eH=t(51384),ej=t(58719),eV=(0,eH.iv)([d.l0.reset.button,d.l0.viewStyle,d.l0.center,d.l0.height("100%"),d.l0.cursor.pointer,d.l0.color.foregroundDimmest,{paddingLeft:(0,eN.fP)(4),paddingRight:(0,eN.fP)(4),"&:hover":{color:d.TV.foregroundDefault}},(0,eN.D$)(16)]);function eK(e){return(0,a.tZ)("button",{css:eV,onClick:e.onClick,title:e.isLoading?"Loading":"Clear",children:e.isLoading?(0,a.tZ)(m.Z,{}):(0,a.tZ)(ej.Z,{})})}var eY=t(25e3),e$=t(47357),eJ=t(38080),eQ=t(69119),e0=function(e){return Math.round(e.value/14*e.fontSize)},e1=[d.l0.position.absolute,d.l0.top(0),d.l0.left(0),d.l0.width("100%")],e2=(0,u.X)({item:[e1,{userSelect:"none",cursor:"pointer","&:hover > div":{backgroundColor:"var(".concat(y.dj.interactiveBackground,")")}}],divider:[e1,d.l0.justify.center,{padding:"0 ".concat((0,eN.fP)(8))}]}),e4=(0,p.memo)(function(e){var n,t,r,o,l,c,u,s,d=(n=e.index,t=M(eR),r=(0,p.useRef)(null),l="item"===(o=I((0,p.useMemo)(function(){return(0,G.kv)(ev,function(e){return e[n]})},[n]))).type?o.index:null,c=I((0,p.useMemo)(function(){return(0,k.cn)(function(e){return null!==l&&e(ep)===l})},[l])),u=(null==o?void 0:o.type)==="item"?function(e){return t(o.item,e)}:void 0,s="item"===o.type?{id:F(n),role:"option","aria-selected":c}:void 0,{row:o,active:c,ref:r,onClick:u,ariaAttrs:s}),f=d.row,g=d.active,v=d.onClick,m=d.ariaAttrs,y=d.ref;if(!f)return null;var b={height:e.height,transform:"translateY(".concat(e.y,"px)")};if("section"===f.type)return(0,a.tZ)(e7,{path:f.path,style:b,border:e.index>0});var w=f.item,x=w.data,C=w.match;if("group"===x.type)return null;var Z=C.render;if(Z&&"content"in Z&&Z.content)return(0,a.tZ)(h.G,(0,eY._)((0,i._)({innerRef:y,css:e2.item,style:b,onClick:v},m),{children:(0,a.tZ)(eJ.Tg,{elevated:g,children:(0,p.cloneElement)(Z.content,{active:g})})}));var S=x.label,T=x.icon,R=x.dataCy,E=Z&&"ranges"in Z?Z.ranges:void 0;return(0,a.tZ)(h.G,(0,eY._)((0,i._)({innerRef:y,css:e2.item,style:b,onClick:v,dataCy:R},m),{children:(0,a.tZ)(e8,{active:g,icon:T,text:S,highlight:E,description:x.description,shortcut:x.keyboardShortcut,hasChildren:"context"===w.data.type})}))}),e3=[{padding:(0,eN.fP)(8)}],e9=(0,u.X)({root:[e3,d.l0.align.center,d.l0.flex.row,d.l0.height("100%"),{gap:(0,eN.fP)(8),userSelect:"none"}],iconText:[d.l0.align.center,d.l0.flex.row,d.l0.maxWidth("100%"),{gap:(0,eN.fP)(8)}],description:[d.l0.truncate,d.l0.flex.growAndShrink(1),{fontSize:"0.9em"}],right:[d.l0.flex.row,d.l0.align.center,{gap:(0,eN.fP)(4),justifySelf:"end",marginLeft:"auto"}],shortcut:[{"& > div > div":{fontSize:"0.8em",paddingLeft:(0,eN.fP)(4),paddingRight:(0,eN.fP)(4),paddingTop:(0,eN.fP)(2),paddingBottom:(0,eN.fP)(2)}}],chevron:(0,eN.D$)(12)});function e8(e){return(0,a.BX)(eJ.Tg,{elevated:e.active,css:e9.root,children:[(0,a.BX)(h.G,{css:e9.iconText,children:[(0,a.tZ)(h.G,{className:"icon",css:e5.root,children:e.icon}),(0,a.tZ)(eQ.x,{dimmed:!e.active,text:e.text,highlight:e.highlight})]}),e.description?(0,a.tZ)(h.G,{css:e9.description,style:{color:e.active?d.TV.foregroundDimmer:d.TV.foregroundDimmest},children:e.description}):null,(0,a.BX)(h.G,{css:e9.right,children:[e.shortcut?(0,a.tZ)(h.G,{css:e9.shortcut,children:(0,a.tZ)(l.bM,{keyCombo:e.shortcut,small:!0})}):null,e.hasChildren?(0,a.tZ)(h.G,{css:e9.chevron,children:(0,a.tZ)(eX.Z,{size:12})}):null]})]})}var e5=(0,u.X)({root:[d.l0.position.relative,(0,eN.D$)(16),{width:(0,eN.fP)(16),height:(0,eN.fP)(16)}]}),e6=(0,u.X)({borderHeaderWrap:[{userSelect:"none",padding:[8,8,4,8].map(eN.fP).join(" ")},e1,d.l0.colWithGap(0),d.l0.justify.spaceBetween],borderWrap:[{userSelect:"none",paddingLeft:(0,eN.fP)(8),paddingRight:(0,eN.fP)(8)},e1,d.l0.justify.center],headerWrap:[{userSelect:"none",paddingLeft:(0,eN.fP)(8),paddingRight:(0,eN.fP)(8),paddingBottom:(0,eN.fP)(4)},e1,d.l0.justify.end],header:[{userSelect:"none"},d.l0.align.center,d.l0.flex.row,{gap:(0,eN.fP)(4)},(0,eN.D$)(12)],text:[{userSelect:"none"},d.l0.flex.shrink(1),d.l0.color.foregroundDimmest,d.l0.truncate,{fontSize:"0.9em"}],border:[d.l0.height(1),d.l0.width("100%")]}),e7=(0,p.memo)(function(e){var n=I(eS),t=R(e.path,n),r=(0,a.tZ)(eJ.Tg,{elevated:!0,css:e6.border}),o=0===t.length;if(e.border&&o)return(0,a.tZ)(h.G,{css:e6.borderWrap,style:e.style,children:r});var i=(0,a.tZ)(h.G,{css:e6.header,children:t.map(function(e,n){return(0,a.BX)(p.Fragment,{children:[n>0?(0,a.tZ)(eX.Z,{color:d.TV.foregroundDimmest}):null,(0,a.tZ)(h.G,{css:e6.text,children:e})]},e+n)})});return e.border||o?(0,a.BX)(h.G,{css:e6.borderHeaderWrap,style:e.style,children:[r,i]}):(0,a.tZ)(h.G,{css:e6.headerWrap,style:e.style,children:i})}),ne=(0,u.X)({root:[d.l0.flex.growAndShrink(1),d.l0.overflow("hidden"),{paddingTop:eN.Cn.menuPaddingTop}],scrollParent:[d.l0.height("100%"),d.l0.overflowY("auto"),d.l0.flex.growAndShrink(1)]}),nn=(0,p.memo)(function(e){var n,t,r,o,l=(n=I(ev),t=I(z),{rows:n,isOpen:t,scrollRef:(0,p.useRef)(null),currentPathIndex:I(eS),ariaAttrs:{id:(r=I(es)).menu,"aria-labelledby":r.label,role:"listbox"}}),c=l.rows,u=l.isOpen,s=l.scrollRef,f=l.currentPathIndex,g=l.ariaAttrs,v=M(U),m=I(et),y=I(er),b=(0,e$.MG)({count:c.length,overscan:null!==(o=e.overscan)&&void 0!==o?o:1,getScrollElement:function(){return s.current},getItemKey:function(e){var n=c[e];return n?"section"===n.type?n.key:T(n.item.path):""},estimateSize:function(n){var t=c[n];return t?function(e){var n,t=e.row,r=e.currentPathIndex,o=e.compact,i=e.isFirst,a=e.fontSize,l=e.minItemHeight;if("section"===t.type){var c=R(t.path,r).length?24:0;if(i){var u=o?c+e0({fontSize:a,value:6}):c;return 0===c?u:e0({fontSize:a,value:c})}return c+e0({fontSize:a,value:16})}var s=t.item.match.render;return s&&"content"in s?Math.max(e0({fontSize:a,value:null!==(n=s.height)&&void 0!==n?n:32}),l):Math.max(e0({fontSize:a,value:32}),l)}({fontSize:m,row:t,currentPathIndex:f,compact:y,isFirst:0===n,minItemHeight:e.minItemHeight}):0},onChange:function(e){v(e.getTotalSize())}}),w={borderRadius:e.hasFooter?void 0:d.TV.space8,display:u?void 0:"none"},x=b.scrollToIndex,k=b.getVirtualItems,C=I(eg);return(0,p.useEffect)(function(){var e=C;!(e<0)&&(1===e&&(e=0),k()[e]&&x(e,{behavior:"smooth"}))},[x,k,C]),(0,a.tZ)(h.G,(0,eY._)((0,i._)({css:ne.root},g),{style:w,children:(0,a.tZ)(h.G,{innerRef:s,css:ne.scrollParent,children:(0,a.tZ)(h.G,{style:{height:"".concat(b.getTotalSize(),"px"),position:"relative",overflow:"hidden"},children:u?b.getVirtualItems().map(function(e){return(0,a.tZ)(e4,{index:e.index,height:e.size,y:e.start},e.key)}):null})})}))}),nt=(0,u.X)({root:[d.l0.flex.shrink(1),d.l0.height("100%"),{fontSize:eN.Cn.fontSize}],footer:{paddingTop:(0,eN.fP)(8)},keyComboBlocks:{paddingRight:(0,eN.fP)(8)},menuWrap:[d.l0.flex.shrink(1)],row:[d.l0.position.absolute,d.l0.top(0),d.l0.left(0),d.l0.width("100%")],menu:[d.l0.flex.shrink(1),d.l0.overflow("auto")],running:[d.l0.center,d.l0.flex.growAndShrink(1)],error:{padding:(0,eN.fP)(8)}}),nr=(0,u.X)({root:[d.l0.viewStyle,d.l0.flex.growAndShrink(1),d.l0.height("100%"),{fontSize:"1em",padding:"0 ".concat((0,eN.fP)(8)),backgroundColor:"transparent",border:"0 none",outline:"0 none","::placeholder":{color:d.TV.foregroundDimmest},"&:hover::placeholder":{color:d.TV.foregroundDimmer},"&:focus::placeholder, &:hover:focus::placeholder":{color:d.TV.foregroundDimmest}}]}),no=(0,p.memo)(function(e){var n,t,r,o,l,c,u,s,d,f,h,g,v,m=(n=M(eM),t=I(eC),s=(u=(0,w._)((r=I(ed),o=M(eI),l=M(ef),c=(0,w._)((0,p.useTransition)(),2)[1],[r,(0,p.useCallback)(function(e){var n="string"==typeof e?e:e.currentTarget.value;o(n),c(function(){return l(n)})},[o,c,l])]),2))[0],d=u[1],f=M(ep),h=I(ep),g=I(es),v=I(z),{onBlur:function(){return f(-1)},onChange:d,placeholder:t,value:s,ref:n,disabled:I(H),ariaAttrs:{id:g.input,role:"combobox",autoComplete:"off","aria-autocomplete":"list","aria-activedescendant":h>-1?F(h):"","aria-controls":g.menu,"aria-expanded":v,"aria-labelledby":g.label}});return(0,a.tZ)("input",(0,i._)({autoFocus:e.autoFocus,onKeyDown:e.onKeyDown,css:nr.root,placeholder:m.placeholder,value:m.value,onChange:m.onChange,ref:m.ref,onBlur:m.onBlur,disabled:m.disabled,autoCorrect:"off",autoComplete:"off",autoCapitalize:"off"},m.ariaAttrs))}),ni=[y.gU.filled,d.l0.viewStyle,d.l0.flex.row,d.l0.align.center,d.l0.flex.growAndShrink(1),{height:(0,eN.fP)(32),borderRadius:(0,eN.fP)(4)}],na=(0,u.X)({container:[{padding:(0,eN.fP)(8),"& > div > button + input":{paddingLeft:0}},d.l0.pb(0)],surface:ni,surfaceRunning:[ni,s.p.foregroundPulse()]}),nl=[y.gU.nofill,d.l0.flex.row,d.l0.align.center,d.l0.flex.growAndShrink(1),{height:(0,eN.fP)(36),borderRadius:(0,eN.fP)(8),borderBottomLeftRadius:0,borderBottomRightRadius:0}],nc=(0,u.X)({container:[{"& > div > button + input":{paddingLeft:0}},d.l0.pb(0)],surface:nl,surfaceRunning:[nl,s.p.foregroundPulse()],border:[d.l0.height(1)]});function nu(e){var n=I(H),t=M(W),r=(0,c.Z)(function(e){return t(e.height)}),o=I(er),i=o?nc:na;return(0,a.BX)(a.HY,{children:[(0,a.tZ)(h.G,{css:i.container,innerRef:r,children:(0,a.tZ)(h.G,{css:n?i.surfaceRunning:i.surface,children:e.children})}),o?(0,a.tZ)(eJ.Tg,{elevated:!0,css:nc.border}):null]})}var ns=(0,p.memo)(function(e){var n=I(eT),t=I(eZ);return n?(0,a.tZ)(eK,{onClick:e.onClick,isLoading:t}):null}),nd=(0,p.memo)(function(){var e,n,t,r,i,u,s,y,b,w,x,k,C,Z,S,T,R,E,D,P,_,A,L,G=(r=I(z),i=I(eT),u=I(ed),s=I(eu),y=I(H),b=I(j),w=M(eG),x=I(ec),k=M(ek),C=q(eM),Z=I(eW),S=I(J),T=B(eD),R=B(ef),E=M(eh),D=M(eF),P=(0,v.Z)(S),(0,p.useEffect)(function(){T.current&&D(S)},[Z,T,S,R,D]),(0,p.useEffect)(function(){return T.subscribe(function(e){e&&D(P.current)})},[Z,R,T,D,P]),(0,p.useEffect)(function(){var e=function(e){E(e),Z.search(e)};return e(R.current),R.subscribe(e)},[Z,R,T,E,P]),_=(0,g.Z)(function(){return function(){var e;return null===(e=C())||void 0===e?void 0:e.focus()}},[C]),A=M(eU),{focus:_,onKeyDown:(0,g.Z)(function(){return function(e){if("Backspace"===e.key&&!e.currentTarget.value){A();return}return w(e)}},[w,A]),inputValue:u,isOpen:r,isClearable:i,noResults:s,hasHighlightedItem:x,isRunning:y,actionError:b,clearCommands:k}),F=G.isOpen,U=G.focus,O=G.clearCommands,K=G.isClearable,ei=G.onKeyDown,ea=G.inputValue,el=G.noResults,ep=G.hasHighlightedItem,eg=G.isRunning,ev=G.actionError,em=(0,v.Z)({inputValue:ea,noResults:el,hasHighlightedItem:ep});e=q(V),n=I(W),t=B(N),(0,p.useEffect)(function(){var r=function(n){var t=e().onTotalHeightChange;t&&(0===o&&(o=n),t({initial:o,current:n}))};if(0!==n){var o=0;return r(t.current),t.subscribe(r)}},[n,e,t]);var ey=I(Y),eb=I($),ew=I(Q),ex=I(ee),eC=I(en),eZ=I(eo),eS=q(V),eR=(0,g.Z)(function(){return function(e){var n,t=em.current,r=eS();if(null===(n=r.onKeyDown)||void 0===n||n.call(r,e,{inputValue:t.inputValue,noResults:t.noResults,hasHighlightedItem:t.hasHighlightedItem}),!e.defaultPrevented){if("Enter"===e.key&&t.inputValue&&t.noResults&&r.onSubmit){r.onSubmit(t.inputValue);return}ei(e)}}},[em,ei,eS]);(0,p.useEffect)(function(){eC&&(eC.current=U)},[U,eC]);var eE=I(es),eP=M(X),e_=(0,c.Z)(function(e){return eP(e.height)}),eA=I(et),eL=I(er);return(0,a.BX)(h.G,{css:nt.root,style:(L={},(0,o._)(L,eN.Dq.fontSize,eA+"px"),(0,o._)(L,eN.Dq.menuPaddingTop,eL?"0px":(0,eN.fP)(8)),L),children:[(0,a.tZ)("label",{id:eE.label,htmlFor:eE.input,css:d.l0.visuallyHidden,children:"Commands"}),(0,a.BX)(nu,{children:[(0,a.tZ)(ez,{}),(0,a.tZ)(no,{autoFocus:ey,onKeyDown:eR}),(0,a.tZ)(ns,{onClick:function(){return O({focus:!0})}}),eb&&!K?(0,a.tZ)(h.G,{css:nt.keyComboBlocks,children:(0,a.tZ)(l.bM,{keyCombo:eb,small:!0})}):null]}),ev?(0,a.tZ)(h.G,{css:nt.error,children:(0,a.tZ)(f.E,{colorway:"warning",text:ev})}):null,F&&!eg?(0,a.BX)(a.HY,{children:[(0,a.tZ)(nn,{minItemHeight:eZ,overscan:ew,hasFooter:!!ex}),ex?(0,a.tZ)(h.G,{innerRef:e_,css:nt.footer,children:ex}):null]}):null,eg?(0,a.tZ)(h.G,{css:nt.running,children:(0,a.tZ)(m.Z,{size:24})}):null]})});function nf(e){var n,t,r,o=(t={label:(n=(0,Z.U)())("label"),input:n("input"),menu:n("menu")},r=(0,w._)((0,p.useState)(function(){var n,r,o=(0,k.MT)();o.set(es,t),o.set(V,e),o.set(z,!e.openOnInput),o.set(eW,function(e){var n=e.initialPath,t=e.partialUpdateTimeout,r=e.onUpdate,o=n,i=null,a=0;function l(e){i&&clearTimeout(i);var n=++a,l=0,c=[],u=o[o.length-1];if(!u.commands){r({items:c,path:o});return}void 0!==t&&(i=setTimeout(function(){c.length&&r({items:(0,S._)(c).sort(E),partial:!0,path:o})},t)),function t(u,s,d){if(l++,!u.commands)throw Error("Expected commands");var f=(0,S._)(s).concat([u]),h=f.length===o.length;Promise.resolve(u.commands({active:h,search:e,path:f})).then(function(u){if(n!==a){i&&clearTimeout(i);return}l--,u.forEach(function(n,r){var o=(0,S._)(f).concat([n]),i=(0,S._)(d).concat([r]),a=n.match?n.match({search:e,data:n.data,path:o,active:h}):null;a&&c.push({path:o,data:n.data,match:a,indexPath:i}),n.commands&&t(n,f,i)}),l>0||(i&&clearTimeout(i),r({items:(0,S._)(c).sort(E),path:o}))})}(u,o.slice(0,o.length-1),[])}return{search:l,setPath:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";o=e,l(n)},getPath:function(){return o}}}({initialPath:Array.isArray(e.command)?e.command:[e.command],partialUpdateTimeout:30,onUpdate:function(e){return o.set(eA,e)}}));var i=Array.isArray(e.command)?e.command[0]:e.command,a=null!==(r=null==i?void 0:null===(n=i.data)||void 0===n?void 0:n.description)&&void 0!==r?r:null;return a&&o.set(O,function(e){return(0,C.Uy)(e,function(e){e.placeholder=a})}),o}),1)[0],(0,p.useEffect)(function(){r.set(V,e)},[r,e]),r);return(0,a.tZ)(A.Provider,{value:o,children:(0,a.tZ)(nd,{})})}},1643:function(e,n,t){t.d(n,{Cn:function(){return i},D$:function(){return c},Dq:function(){return o},fP:function(){return l}});var r=(0,t(91608).$)(["fontSize","menuPaddingTop"]),o=r.cssVars,i=r.styleTokens,a=function(e){return Math.round(100*e)/100},l=function(e){return a(e/14)+"em"},c=function(e){var n=a(e/14)+"em";return{"&& svg":{minWidth:n,minHeight:n,width:n,height:n}}}},45726:function(e,n,t){t.d(n,{Z:function(){return d}});var r=t(32477),o=t(8182),i=t(43429),a=t(1498),l=t(18836),c=t(56596),u=t(74833),s=t(29287);function d(e){var n=e.prompt,t=e.desc,d=e.type,f=e.placeholder,h=e.confirmText,p=e.loading,g=e.errorMessage,v=e.onCancel,m=e.onConfirm,y=e.isDanger,b=e.buttonIcon,w=(0,r._)(i.useState(),2),x=w[0],k=w[1];return(0,o.BX)(c.G,{css:[s.l0.colWithGap(24)],children:[(0,o.tZ)(u.h4,{variant:"headerDefault",level:2,children:n}),(0,o.tZ)(u.xv,{children:t}),(0,o.tZ)(l.II,{type:d,value:x,placeholder:f,autoFocus:!0,onChange:function(e){return k(e.target.value)}}),g?(0,o.tZ)(u.xv,{css:[s.l0.color.accentNegativeStronger],multiline:!1,children:g}):null,(0,o.BX)(c.G,{css:[s.l0.rowWithGap(12),s.l0.justify.end],children:[(0,o.tZ)(a.zx,{disabled:p,onClick:v,text:"Cancel"}),(0,o.tZ)(a.zx,{colorway:y?"negative":"primary",disabled:p,onClick:function(){return x&&m(x)},text:h||"Ok",iconLeft:b,dataCy:"prompt-confirm-button"})]})]})}},75245:function(e,n,t){t.d(n,{Z:function(){return i}});var r=t(32477),o=t(43429);function i(e){var n=(0,r._)((0,o.useState)(!1),2),t=n[0],i=n[1],a=(0,o.useRef)(0);return[t,(0,o.useMemo)(function(){return{onDragEnter:function(e){e.preventDefault(),a.current++,i(!0)},onDragLeave:function(e){e.preventDefault(),a.current--,0===a.current&&i(!1)},onDrop:function(n){n.preventDefault(),a.current=0,i(!1),n.persist();var t,r,o=Array.from(null!==(r=null==n?void 0:null===(t=n.dataTransfer)||void 0===t?void 0:t.files)&&void 0!==r?r:[]);if(0===o.length){e(null);return}e(o)},onDragOver:function(e){e.preventDefault()}}},[e])]}},62624:function(e,n,t){function r(){return"ontouchstart"in window||navigator.maxTouchPoints>0}function o(){return!!/iPad|iPhone|iPod/.test(navigator.platform)||navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&/MacIntel/.test(navigator.platform)}t.d(n,{Z:function(){return r},y:function(){return o}})},1228:function(e,n,t){t.d(n,{Fp:function(){return r},Fv:function(){return a},HH:function(){return i},hI:function(){return o}});var r="gpt-3.5-turbo-0613",o=["package.json","package-lock.json","yarn.lock","poetry.lock","package.json","package-lock.json",".replit","replit.nix","pyproject.toml",".breakpoints"],i=[".md",".yml",".yaml",".json",".toml",".out",".pkl",".bin",".txt",".csv",".log",".zip",".tar",".gz"],a=["node_modules",".config","venv",".next",".git"]},95683:function(e,n,t){t.d(n,{S:function(){return l}});var r=t(19659),o={js:"javascript",jsx:"javascript",ts:"typescript",tsx:"typescript",py:"python",go:"go"},i={rs:"rust",lsp:"lisp",sh:"bash",cpp:"c++",hs:"haskell",go:"go",rb:"ruby",md:"markdown"},a={lua:"lua",hs:"haskell",lhs:"haskell",jl:"julia",lisp:"common-lisp",ml:"ocaml",mli:"ocaml",sol:"solidity",scm:"scheme",ss:"scheme",zig:"zig",rkt:"racket",d:"d",scala:"scala",sc:"scala",swift:"swift"};function l(e){var n=(0,r.r6)(e);return Object.prototype.hasOwnProperty.call(o,n)?o[n]:Object.prototype.hasOwnProperty.call(i,n)?i[n]:Object.prototype.hasOwnProperty.call(a,n)?a[n]:n}},62582:function(e,n){n.Z={sandbox:"allow-same-origin allow-forms allow-popups allow-popups-to-escape-sandbox allow-modals allow-downloads allow-downloads-without-user-activation allow-presentation allow-orientation-lock allow-scripts",allow:"accelerometer; ambient-light-sensor; autoplay; battery; camera; display-capture; encrypted-media; execution-while-not-rendered; execution-while-out-of-viewport; fullscreen; gamepad; geolocation; gyroscope; layout-animations; legacy-image-formats; magnetometer; microphone; midi; navigation-override; oversized-images; payment; picture-in-picture; publickey-credentials; speaker-selection; sync-xhr; unoptimized-images; unsized-media; usb; screen-wake-lock; web-share; xr-spatial-tracking; clipboard-read; clipboard-write",allowFullScreen:!0,allowtransparency:"true",allowpaymentrequest:"true"}},917:function(e,n,t){var r,o;t.d(n,{y:function(){return r}}),(o=r||(r={})).Welcome="Welcome",o.Editor="Editor",o.Examples="Examples",o.Run="Run",o.Output="Output",o.Sidepane="Sidepane",o.Share="Share"},28099:function(e,n,t){t.d(n,{Z:function(){return L},y:function(){return D}});var r=t(45903),o=t(25e3),i=t(32477),a=t(8182),l=t(51384),c=t(14819),u=t(76588),s=t(75245),d=t(85805),f=t(43973),h=t(1498),p=t(15146),g=t(49344),v=t(74833),m=t(56596),y=t(66061),b=t(27187),w=t(52682),x=t(6620),k=t(29287),C=t(43429),Z=t(88205),S=t(23855),T=t(37951),R=t(20573),E=(0,l.iv)({position:"absolute",top:0,left:0,width:"100%",height:"100%"});function D(e){var n=e.src,t=e.alt;return(0,a.BX)(m.G,{css:[E,{borderBottomLeftRadius:8,borderBottomRightRadius:8,overflow:"hidden"}],children:[(0,a.tZ)(u.Z,{objectFit:"cover",layout:"fill",src:n,alt:t}),(0,a.tZ)(m.G,{css:[E,{background:"radial-gradient(rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.6))",backgroundRepeat:"no-repeat"}]})]})}function P(e){var n=e.onClick;return(0,a.tZ)(m.G,{dataCy:"run-button",onClick:n,css:[E,k.l0.center,{":hover > svg":{transform:"scale(1.2)"},"> svg":{transition:"transform 200ms",width:64,height:"auto",cursor:"pointer",filter:k.TV.shadowDefault}}],children:(0,a.tZ)(b.Z,{color:k.TV.white})})}function _(e){var n=e.isPublished,t=e.onChangeClick,r=e.onRemoveClick,o=(0,i._)(C.useState(!1),2),l=o[0],u=o[1];return(0,a.BX)(m.G,{css:[k.l0.rowWithGap(8),k.l0.align.center],children:[(0,a.tZ)(h.zx,{onClick:t,text:"Change image"}),n?(0,a.tZ)(p.hU,{alt:"Cannot remove cover image of a published Repl",disabled:!0,colorway:"negative",children:(0,a.tZ)(w.Z,{})}):null,n?null:(0,a.tZ)(m.G,{children:(0,a.tZ)(p.hU,{alt:"Remove Image",colorway:"negative",onClick:function(){u(!0)},children:(0,a.tZ)(w.Z,{})})}),(0,a.tZ)(g.u,{isOpen:l,onRequestClose:function(){return u(!1)},children:(0,a.tZ)(c.Z,{confirmLabel:"Yes, remove this image",title:"Remove image",isDestructive:!0,onConfirm:function(){r(),u(!1)},onCancel:function(){return u(!1)},children:"This will remove your Repl’s cover image. You can always add one back at any time."})})]})}function A(e){var n=e.onClick,t=e.isActive;return(0,a.BX)(m.G,{css:[k.l0.colWithGap(16),k.l0.center],children:[(0,a.BX)(m.G,{css:[k.l0.colWithGap(8),k.l0.center],children:[(0,a.tZ)(m.G,{css:[{"> svg":{width:44,height:"auto"}},t&&{color:k.TV.accentPrimaryDefault}],children:(0,a.tZ)(x.Z,{})}),(0,a.tZ)(v.xv,{multiline:!1,children:"Drag and drop a cover image"})]}),(0,a.tZ)(m.G,{children:(0,a.tZ)(h.zx,{onClick:n,iconLeft:(0,a.tZ)(y.Z,{}),colorway:"primary",text:"Or select a file"})})]})}function L(e){var n=e.onClick,t=e.repl,l=C.useRef(null),c=(0,i._)(C.useState(null),2),u=c[0],h=c[1],p=(0,i._)(C.useState(t.imageUrl),2),g=p[0],v=p[1],y=(0,d.Z)({onUpload:function(e){var n=e.url;b({variables:{input:{id:t.id,imageUrl:n}},optimisticResponse:{__typename:"RootMutationType",updateRepl:{__typename:"UpdateReplPayload",repl:(0,o._)((0,r._)({},t),{imageUrl:n})}}})},onUploadPreview:function(e){v(e.dataUrl)},onError:function(e){h(e.message)}}),b=(0,i._)((0,S.wP)({onCompleted:function(e){h(null),v(e.updateRepl.repl.imageUrl)}}),1)[0],w=t.currentUserPermissions.changeImageUrl;function x(e){if(null!==e&&0!==e.length){var n=e.find(function(e){return e.type.startsWith("image/")});if(!n){h("Expected an image file");return}h(null),y.uploadImage(n,Z.N.ReplCoverImage)}}var E=(0,i._)((0,s.Z)(x),2),L=E[0],I=E[1],q=!g&&w;return(0,C.useEffect)(function(){v(t.imageUrl)},[t.id]),(0,a.BX)(m.G,(0,o._)((0,r._)({css:[k.l0.center,k.l0.flex.growAndShrink(1),!q&&{backgroundColor:k.TV.black},{borderBottomLeftRadius:8,borderBottomRightRadius:8,position:"relative",":hover .image-controls":{opacity:1}}]},I),{children:[g?(0,a.tZ)(D,{src:g,alt:t.title}):null,q?null:(0,a.tZ)(P,{onClick:n}),g&&w?(0,a.BX)(m.G,{className:"image-controls",css:[{position:"absolute",top:k.TV.space8,right:k.TV.space8,opacity:0,".is-touch-device &":{opacity:1}}],children:[(0,a.tZ)(_,{onChangeClick:function(){var e;null===(e=l.current)||void 0===e||e.click()},onRemoveClick:function(){b({variables:{input:{id:t.id,imageUrl:null}}})},isPublished:!!t.lastPublishedAt}),u?(0,a.tZ)("div",{className:"error",children:u}):null]}):null,q?(0,a.BX)(m.G,{css:k.l0.colWithGap(16),children:[(0,a.tZ)(A,{isActive:L,onClick:function(){var e;null===(e=l.current)||void 0===e||e.click()}}),u?(0,a.tZ)(T.E,{colorway:"negative",icon:(0,a.tZ)(R.Z,{}),text:u}):null]}):null,w?(0,a.tZ)("input",{css:{width:.1,height:.1,opacity:0,overflow:"hidden",position:"absolute",zIndex:-1},ref:l,accept:f.W9.join(","),type:"file",onChange:function(e){var n=e.target,t=n.validity,r=n.files;t.valid&&x(r?Array.from(r):null)}}):null]}))}},3630:function(e,n,t){t.d(n,{J:function(){return m}});var r=t(45903),o=t(25e3),i=t(70322),a=t(8182),l=t(51384),c=t(48796),u=t(93918),s=t(93496),d=t(8279),f=t(29287),h=t(30983),p=t(56596),g=(0,l.F4)("from{opacity:0}to{opacity:1}"),v=(0,u.X)({self:[f.l0.flex.row,f.l0.flex.growAndShrink(1),f.l0.height(f.TV.space12),f.l0.borderRadius(16),f.l0.position.relative,s.gU.filledAndOutlined],progressWrapper:[f.l0.flex.row,f.l0.flex.growAndShrink(1),f.l0.height("100%"),f.l0.width("100%"),f.l0.borderRadius(16),f.l0.overflow("clip"),f.l0.position.relative],progress:[f.l0.position.relative,f.l0.width("100%"),f.l0.height("100%"),{top:0,left:0}],loading:d.p.backgroundPulse(),smoke:[f.l0.width("100%"),f.l0.height("500%"),f.l0.position.absolute,f.l0.left("50%"),f.l0.top("100%"),{opacity:.4,transition:"1s opacity",transform:"translate(-50%, -100%)",pointerEvents:"none"}],fadeInAnim:{animation:"".concat(g," 120ms forwards ease-out alternate")}});function m(e){var n,t=e.total,u=e.tooltip,s=e.className,d=e.disabled,f=void 0!==d&&d,g=e.smoke,m=void 0!==g&&g,b=e.loading,w=void 0!==b&&b,x=e.tooltipHidden,k=(0,i._)(e,["total","tooltip","className","disabled","smoke","loading","tooltipHidden"]),C=!(0,c.T)(),Z=null;return u?Z=u:"current"in k?Z="".concat(k.current||"0","/").concat(t):"data"in k&&(Z=null===(n=k.data)||void 0===n?void 0:n.map(function(e){var n=e.current;return"".concat(n||"0","/").concat(t)}).join(" | ")),(0,a.tZ)(h.u,{placement:"top",tooltip:Z,maxWidth:280,isDisabled:w||void 0!==x&&x,children:function(e,n){var i,c;return w?i=null:"current"in k&&k.current?i=(0,a.tZ)(y,{total:t,disabled:f,current:k.current,color:k.color}):"data"in k&&(i=null===(c=k.data)||void 0===c?void 0:c.map(function(e,n){var i;return(0,l.az)(y,(0,o._)((0,r._)({},e),{key:"measure-bar-".concat(n),total:t,disabled:f,isLast:n+1===(null===(i=k.data)||void 0===i?void 0:i.length)}))})),(0,l.az)(p.G,(0,o._)((0,r._)({},e),{css:[v.self,v.fadeInAnim,w&&v.loading],className:s,innerRef:n,onClick:void 0,key:w?"loadingMeasureBar":"finishedLoadingMeasureBar",role:"group",children:[(0,a.tZ)(p.G,{css:v.progressWrapper,children:i},"measureBarProgress"),C?(0,a.tZ)("img",{src:"/public/images/smoke.gif",alt:"",style:{opacity:m?void 0:0},css:v.smoke},"measureBarSmoke"):null]}))}})}function y(e){var n=e.current,t=e.total,o=e.color,i=void 0===o?f.TV.accentPrimaryDefault:o,l=e.disabled,c=e.isLast,u=(0,r._)({backgroundColor:void 0!==l&&l?f.TV.outlineDefault:i,width:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return 0===n||0===e?0:Math.max(0,Math.min(100,e/n*100))}(n,t)+"%"},void 0!==c&&c?{borderTopRightRadius:f.TV.borderRadiusRound,borderBottomRightRadius:f.TV.borderRadiusRound}:{});return(0,a.tZ)(p.G,{css:v.progress,style:u,role:"meter","aria-label":"".concat(n," out of ").concat(t),"aria-valuemin":0,"aria-valuenow":n,"aria-valuemax":t})}},37770:function(e,n,t){t.d(n,{T:function(){return s}});var r=t(45903),o=t(25e3),i=t(70322),a=t(8182);t(43429);var l=t(56596),c=t(23291),u=l.K.button;function s(e){var n=e.iconLeft,t=e.iconRight,l=e.text,s=e.innerRef,d=e.colorway,f=(0,i._)(e,["iconLeft","iconRight","text","innerRef","colorway"]);return(0,a.BX)(u,(0,o._)((0,r._)({ref:s},f),{css:[(0,c.E)({colorway:d,clickable:!0,variant:"filled",iconLeft:!!n,iconRight:!!t}),{color:"inherit"}],children:[n,(0,a.tZ)("span",{children:l}),t]}))}},72067:function(e,n,t){t.d(n,{Z:function(){return a}});var r=t(32477),o=t(43429),i={isConnecting:!0,channel:null,context:null};function a(e){var n=e.container,t=e.service,a=e.name,l=e.skip,c=void 0!==l&&l,u=(0,r._)(o.useState(i),2),s=u[0],d=u[1];return o.useEffect(function(){d(i);var e=!1,r=n.openChannel({service:t,name:a,skip:function(){return c}},function(n){if(!e)return d({context:n.context,channel:n.channel,isConnecting:!1}),function(n){e||d({isConnecting:n.willReconnect,channel:null,context:null})}});return function(){e=!0,r()}},[n,t,a,c]),s}},17867:function(e,n,t){t.d(n,{Z:function(){return i}});var r=t(32477),o=t(43429);function i(e){var n=(0,r._)((0,o.useState)(e.getConnectionState()),2),t=n[0],i=n[1];return(0,o.useEffect)(function(){return e.onConnectionStateChanged(i)},[e]),t}},86612:function(e,n,t){t.d(n,{Z:function(){return a}});var r=t(32477),o=t(43429),i=t(17867);function a(e){var n=(0,i.Z)(e),t=(0,r._)((0,o.useState)(null),2),a=t[0],l=t[1];return(0,o.useEffect)(function(){var n=e.getDotdevUrl();n&&l(n)},[e,n]),a}},37463:function(e,n,t){t.d(n,{bg:function(){return l},dF:function(){return c},r4:function(){return u}});var r=t(16643),o=t(54916),i=t(35375),a=t(43429);function l(){var e=(0,o.Z)().ports,n=(0,r.Z)(e.portsState);return(0,a.useMemo)(function(){return n?n.filter(function(e){return e.isOpen&&e.configuration.type===i.DL.FORWARDED}):[]},[n])}function c(e){return u((0,o.Z)().ports,e)}function u(e,n){var t=(0,r.Z)(e.portsState);return(0,a.useMemo)(function(){return n&&t?t.filter(function(e){var t;return null!==(t=e.isOpen&&(null==n?void 0:n.endsWith(e.processInfo.cgroup)))&&void 0!==t&&t}):[]},[t,n])}},26851:function(e,n,t){t.d(n,{K:function(){return l}});var r=t(45903),o=t(54916),i=t(43429),a=t(25425);function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,o.Z)().userEvents,t=(0,a.P5)({controlName:"flag-null-diagnostics",logFlagToAnalytics:!1});return(0,i.useCallback)(function(o,i){t&&n.emit(o,(0,r._)({},e,i))},[n,e,t])}},14818:function(e,n,t){t.d(n,{X:function(){return i},z:function(){return a}});var r=t(43429),o=r.createContext(null);function i(){return r.useContext(o)}var a=o.Provider},41084:function(e,n,t){t.d(n,{Z:function(){return i}});var r=t(89783),o=function(){};function i(e){var n=(0,r.e)(e);return n?n.delegateTooltip:o}},89783:function(e,n,t){t.d(n,{e:function(){return i}});var r=t(43429),o=t(14818);function i(e){var n=(0,o.X)(),t=(0,r.useCallback)(function(t){null==n||n.setStepTargetElement(e,t)},[e,null==n?void 0:n.setStepTargetElement]);return n&&n.steps.some(function(n){return n.id===e})?{delegateTooltip:t,isActive:!n.isLoading&&!n.isDone&&n.activeStep.id===e,activeStep:n.activeStep,done:n.done,goto:n.goto,id:n.id,isDone:n.isDone,isLoading:n.isLoading,next:n.next,prev:n.prev,restart:n.restart,steps:n.steps}:null}},9617:function(e,n,t){var r=t(39698),o=t(45903),i=t(25e3),a=t(70322),l=t(8182),c=t(94450),u=t.n(c);t(43429);var s=t(69832),d=t.n(s),f=t(54237);n.Z=function(e){var n,t=e.level,c=e.fontFamily,s=void 0===c?"sans-serif":c,h=e.fontWeight,p=void 0===h?"medium":h,g=e.foreground,v=void 0===g?1:g,m=e.align,y=void 0===m?"left":m,b=e.truncate,w=e.className,x=void 0===w?"":w,k=e.children,C=(0,a._)(e,["level","fontFamily","fontWeight","foreground","align","truncate","className","children"]);return(0,l.BX)("h".concat(t),(0,i._)((0,o._)({},C),{className:u().dynamic([["e5be6eb40aa527b5",[f.Z.levels[t],f.Z.fontFamily[s],f.Z.fontWeight[p],f.Z.foreground[v],y]]])+" "+(d()("heading",(n={},(0,r._)(n,x,!!x),(0,r._)(n,"truncate",void 0!==b&&b),n))||""),children:[k,(0,l.tZ)(u(),{id:"e5be6eb40aa527b5",dynamic:[f.Z.levels[t],f.Z.fontFamily[s],f.Z.fontWeight[p],f.Z.foreground[v],y],children:".heading.__jsx-style-dynamic-selector{font-size:".concat(f.Z.levels[t],";font-family:").concat(f.Z.fontFamily[s],";font-weight:").concat(f.Z.fontWeight[p],";color:").concat(f.Z.foreground[v],";text-align:").concat(y,"}.truncate.__jsx-style-dynamic-selector{overflow:hidden;white-space:nowrap;-o-text-overflow:ellipsis;text-overflow:ellipsis;max-width:100%}")})]}))}},36032:function(e,n,t){t.d(n,{Z:function(){return _}});var r=t(34142),o=t(32477),i=t(95025),a=t(21289),l=t(87682),c=t(8182),u=t(94450),s=t.n(u),d=t(9617),f=t(63461),h=t(83848),p=t(35972),g=t(49344),v=t(29287),m=t(79378),y=t(63009),b=t(45903),w=t(93295),x=t(23982),k=t(77393);function C(){var e=(0,w._)(["\n  query BSODComponent {\n    currentUser {\n      id\n      username\n      image\n      isStaff: hasRole(role: REPLIT_STAFF)\n      isAdmin: hasRole(role: ADMIN)\n    }\n  }\n"]);return C=function(){return e},e}var Z={},S=(0,x.Ps)(C()),T=t(43429),R=/at (.+) \((https:\/\/.+\.js):(\d+):(\d+)\)/,E=/at (https:\/\/.+\.js):(\d+):(\d+)/;function D(){return(D=(0,r._)(function(e){var n,c,u,s,d,f,h,p;function g(){return(g=(0,r._)(function(e){var t,r,o;return(0,l.Jh)(this,function(i){switch(i.label){case 0:if(t=n.get(e))return[2,t];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,fetch(e).then(function(e){return e.json()})];case 2:return r=i.sent(),o=new c.SourceMapConsumer(r),n.set(e,o),[2,o];case 3:return i.sent(),[2,null];case 4:return[2]}})})).apply(this,arguments)}return(0,l.Jh)(this,function(v){switch(v.label){case 0:n=new Map,v.label=1;case 1:return v.trys.push([1,3,,4]),[4,t.e(3367).then(t.t.bind(t,23367,19))];case 2:return c=v.sent(),[3,4];case 3:throw v.sent(),Error("source-map not available");case 4:var m;if(!(u=e.stack))throw Error("expected error.stack to be defined");return s=u.split("\n").map(function(e){return e.trim()}).filter(function(e){return!!e}),f=(d=(0,i._)(s))[0],[4,Promise.all(d.slice(1).map((m=(0,r._)(function(e){var n,t,r,i,a,c,u,s,d,f;return(0,l.Jh)(this,function(l){switch(l.label){case 0:if(R.test(e)){if(!(a=R.exec(e)))throw Error("expected result");t=(c=(0,o._)(a.slice(2),3))[0],r=c[1],i=c[2]}else{if(!E.test(e))return[2,e];if(!(u=E.exec(e)))throw Error("expected result");t=(s=(0,o._)(u.slice(1),3))[0],r=s[1],i=s[2]}return[4,function(e){return g.apply(this,arguments)}("".concat(t,".map"))];case 1:if(!(d=l.sent()))return[2,"    ".concat(e)];if(f=d.originalPositionFor({line:Number(r),column:Number(i)}),n)return[2,"    at ".concat(f.name," (").concat(f.source,":").concat(f.line,":").concat(f.column,")")];return[2,"    at ".concat(f.source,":").concat(f.line,":").concat(f.column)]}})}),function(e){return m.apply(this,arguments)})))];case 5:return h=v.sent(),Object.assign(p=Error(),{name:e.name,stack:[f].concat((0,a._)(h)).join("\n"),message:e.message},e),[2,p]}})})).apply(this,arguments)}var P=function(e){var n=e.bsod,t=(0,o._)(T.useState(null),2),i=t[0],a=t[1];T.useEffect(function(){(0,r._)(function(){return(0,l.Jh)(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,function(e){return D.apply(this,arguments)}(n.error)];case 1:return a(e.sent()),[3,3];case 2:return e.sent(),[2];case 3:return[2]}})})()},[n.error]);var u=T.useMemo(function(){var e,t,r,o;return i?null!==(r=null===(t=i.stack)||void 0===t?void 0:t.split("\n"))&&void 0!==r?r:[]:null!==(o=null===(e=n.error.stack)||void 0===e?void 0:e.split("\n"))&&void 0!==o?o:[]},[i,n.error.stack]);return(0,c.tZ)("div",{css:[v.l0.p(16),v.l0.width("100%"),v.l0.backgroundColor.backgroundHigher,v.l0.borderRadius(8),v.l0.overflowY("hidden"),{whiteSpace:"pre"}],children:(0,c.tZ)(p.gC,{spacing:1,children:(0,c.BX)("div",{css:[v.l0.font.code,v.l0.fontSize(12)],children:[(0,c.BX)("div",{children:["Origin: ",n.origin]}),null==u?void 0:u.map(function(e,n){var t=e.replace("webpack-internal:///./",""),r=t.includes("node_modules");return(0,c.tZ)("div",{css:r?v.l0.color.foregroundDimmest:null,children:t},n)})]})})})},_=function(){var e,n,t,r=(0,o._)((0,y.qg)(),1)[0],i=(e=(0,b._)({},Z,{skip:!r}),k.a(S,e)),a=i.data,l=i.loading;if((0,y.ic)(),!r)return null;var u=(null==a?void 0:null===(n=a.currentUser)||void 0===n?void 0:n.isStaff)||(null==a?void 0:null===(t=a.currentUser)||void 0===t?void 0:t.isAdmin);return(0,c.BX)(g.u,{isOpen:!0,preventClose:!0,onRequestClose:function(){},maxWidth:872,children:[(0,c.BX)(p.gC,{spacing:2,align:"center",children:[(0,c.tZ)(d.Z,{level:2,children:" Your Repl is having a bit of trouble."}),(0,c.tZ)("div",{className:s().dynamic([["d03b8962c5704815",[v.n0]]])+" spacer"}),(0,c.tZ)(f.Z,{size:"large",children:"The issue has been logged and the Replit team will look into it. Try reloading the page to get back to coding."}),(0,c.tZ)("div",{css:[v.l0.p(16),v.l0.width("100%"),v.l0.backgroundColor.backgroundHigher,v.l0.borderRadius(8)],className:s().dynamic([["d03b8962c5704815",[v.n0]]]),children:(0,c.BX)(p.gC,{spacing:1,children:[!l&&(null==a?void 0:a.currentUser)?(0,c.BX)(p.Ug,{spacing:2,align:"center",children:[(0,c.tZ)(m.q,{src:a.currentUser.image,username:a.currentUser.username,size:48}),(0,c.tZ)(f.Z,{size:"medium",children:a.currentUser.username})]}):null,(0,c.BX)("div",{css:[v.l0.font.code],className:s().dynamic([["d03b8962c5704815",[v.n0]]]),children:["Error: ",r.eventId]})]})}),u?(0,c.tZ)(P,{bsod:r}):null,(0,c.tZ)("div",{className:s().dynamic([["d03b8962c5704815",[v.n0]]])+" spacer"}),(0,c.tZ)(h.Z,{onClick:function(){return window.location.reload()},color:"primary",filled:!0,fullWidth:!0,children:"reload"}),!1]}),(0,c.tZ)(s(),{id:"d03b8962c5704815",dynamic:[v.n0],children:".sentry-error-embed-wrapper{z-index:".concat(v.n0,"!important}")})]})}},30376:function(e,n,t){t.d(n,{Z:function(){return v}});var r=t(23026),o=t(3194),i=t(45903),a=t(25e3),l=t(2543),c=t(8182),u=t(48900),s=t(56596),d=t(29287),f=t(43429),h=t(63009),p=t(33212),g=function(e){"use strict";(0,o._)(t,e);var n=(0,l._)(t);function t(){var e;return(0,r._)(this,t),e=n.apply(this,arguments),e.state={hasErrored:!1,error:null,errorInfo:null},e}var i=t.prototype;return i.componentDidCatch=function(e,n){this.setState({hasErrored:!0,error:e,errorInfo:n}),this.props.handleError(e,n),p.error(e)},i.render=function(){if(this.state.hasErrored){var e,n,t;return(0,c.tZ)(s.G,{css:[d.l0.font.code,d.l0.p(16),{whiteSpace:"pre",overflow:"hidden",color:"white"},d.l0.backgroundColor.blurpleDefault,d.l0.height("100%")],children:(0,c.tZ)(s.G,{children:null!==(t=null===(n=this.state)||void 0===n?void 0:null===(e=n.error)||void 0===e?void 0:e.stack)&&void 0!==t?t:"An unknown error occurred."})})}return this.props.children},t}(f.Component);function v(e){var n=e.bsod,t=void 0!==n&&n,r=e.sentry,o=void 0===r||r,l=e.handleError,s=e.children,d=e.origin,f=void 0===d?"ErrorBoundary: (no origin provided)":d,p=e.tags,v=void 0===p?{}:p,m=e.extras,y=void 0===m?{}:m,b=(0,h.uV)();return(0,c.tZ)(g,{handleError:function(e,n){t?b({error:e,extras:(0,a._)((0,i._)({},y),{errorInfo:n}),tags:(0,a._)((0,i._)({},v),{errorBoundary:!0}),origin:f}):o&&u.$e(function(t){t.setTag("errorBoundary",!0),t.setTags(v),t.setExtra("errorInfo",n),t.setExtras(y),u.Tb(e)}),l&&l(e,n)},children:s})}},31384:function(e,n,t){t.d(n,{xV:function(){return Y},du:function(){return T},av:function(){return j}});var r=t(39698),o=t(45903),i=t(8182),a=t(46053),l=t(38003),c=t(62624),u=t(31950),s=t(93918),d=t(1415),f=t(38080),h=t(29287),p=t(43429),g=t(64461),v=t(90234),m=t(15859),y=t(32477),b=t(71999),w=t(66368),x=(0,p.createContext)(null);function k(){var e=(0,p.useContext)(x);if(!e)throw Error("Expected store in context");return e}function C(e){return(0,b.Dv)(e,{store:k()})}function Z(e){return(0,w.b)(e,k())}var S=function(e){return(0,b.b9)(e,{store:k()})};function T(e){var n=(0,y._)((0,p.useState)(function(){return(0,v.MT)()}),1)[0];return(0,i.tZ)(x.Provider,{value:n,children:e.children})}var R=(0,t(91608).$)(["display","visibility","transform","maxHeight","width"]),E=R.cssVars,D=R.styleTokens,P=(0,v.cn)(null),_=(0,v.cn)("default"),A=(0,v.cn)({command:null,offset:{x:0,y:0},visible:!1}),L=(0,m.kv)(A,function(e){return e.offset}),I=(0,m.kv)(A,function(e){return e.command}),q=(0,m.kv)(A,function(e){return e.visible}),M=(0,m.kv)(P,function(e){var n;return null!==(n=null==e?void 0:e.initial)&&void 0!==n?n:null}),B=(0,v.cn)(function(e){var n=e(L);if(!n)return null;var t=n.y,r=window.innerHeight-t,o=e(M),i=null!==o?o-r:0;return i>0&&(t=Math.max(16,t-Math.min(200,i))),t}),G=(0,v.cn)(function(e){var n=e(L);if(!n)return null;var t=n.x,r=window.innerWidth,o=e(W),i=t+(null!=o?o:U)-r+16;return i>0&&(t=Math.max(16,t-i)),t}),F=(0,v.cn)(function(e){var n=e(G),t=e(B);return null==n||null===t?null:(0,r._)({},E.transform,"translate(".concat(n,"px, ").concat(t,"px)"))}),W=(0,v.cn)(null),U=180,X=(0,v.cn)(function(e){var n=e(W);return(0,r._)({},E.width,(null===n?U:n)+"px")}),N=(0,v.cn)(function(e){var n=e(B);return null===n?null:(0,r._)({},E.maxHeight,"calc(100vh - ".concat(h.TV.space16," - ").concat(n,"px)"))}),O=(0,v.cn)(null,function(e,n){n(P,null),n(W,null),n(z,null),n(A,function(e){return(0,g.Uy)(e,function(e){e.visible=!1,e.command=null})})}),z=(0,v.cn)(null),H=(0,v.cn)(null,function(e,n,t){if(n(_,t.background),t.width&&n(W,t.width),t.target){var r=t.target.getBoundingClientRect(),o={x:r.x,y:r.y+r.height+8};n(z,r),n(A,function(e){return(0,g.Uy)(e,function(e){e.command=t.command,e.offset=o,e.visible=!0})});return}n(A,function(e){return(0,g.Uy)(e,function(e){e.command=t.command,e.offset=t.offset,e.visible=!0})})});function j(){var e=S(H),n=(0,f.nZ)({elevated:!0});return{openContextMenu:(0,p.useCallback)(function(t){e(t.target instanceof HTMLElement?{command:t.command,target:t.target,width:t.width,background:n}:{command:t.command,offset:t.target,target:null,width:t.width,background:n})},[e,n]),onContextMenu:(0,p.useCallback)(function(t,r){var o=r.command,i=r.width;t.preventDefault(),e({command:o,offset:{x:t.clientX,y:t.clientY},target:null,width:i,background:n})},[e,n])}}var V=(0,s.X)({surface:[h.l0.shadow(3),h.l0.borderRadius(8),h.l0.position.absolute,{top:0,left:0,border:"1px solid",borderColor:h.TV.outlineDefault,maxWidth:"min(500px, calc(100vw - ".concat(h.TV.space16,"))"),minWidth:"min(100px, calc(100vw - ".concat(h.TV.space16,"))"),maxHeight:D.maxHeight,width:D.width,transform:D.transform,visibility:D.visibility,display:D.display}]});function K(){var e=C(z);return e?(0,i.tZ)("div",{style:{position:"fixed",width:e.width,height:e.height,top:e.y,left:e.x}}):null}var Y=(0,p.memo)(function(e){var n=e.fontSize,t=S(O),s=C(I),h=Z(q),g=(0,p.useRef)(function(){});(0,p.useEffect)(function(){var e=function(e){if(e){var n;null===(n=g.current)||void 0===n||n.call(g);return}};return e(h.current),h.subscribe(e)},[h]);var v=S(P),m=(0,p.useRef)(null);(0,p.useEffect)(function(){var e=function(e){var n;e.target instanceof HTMLElement&&(null===(n=m.current)||void 0===n?void 0:n.contains(e.target))||t()},n=function(){t()},r=function(t){t?(window.addEventListener("blur",n),document.addEventListener("pointerdown",e)):(window.removeEventListener("blur",n),document.removeEventListener("pointerdown",e))},o=h.subscribe(r);return function(){o(),r(!1)}},[h,t]);var y=Z(F);(0,u.j)(m,y),(0,u.j)(m,Z(N)),(0,u.j)(m,h,function(e){var n;return n={},(0,r._)(n,E.visibility,e?"visible":"hidden"),(0,r._)(n,E.display,e?"flex":"none"),n});var b=Z(X);(0,u.j)(m,b);var w=(0,c.Z)(),x=C(q)&&!w,k=C(_),T=(0,o._)({},y.current,b.current);return s?(0,i.BX)(d.h,{children:[(0,i.tZ)(K,{}),(0,i.tZ)(a.MT,{autoFocus:x,restoreFocus:!0,contain:!0,children:(0,i.tZ)(f.Tg,{onKeyDown:function(e){"Escape"===e.key&&t()},innerRef:m,css:V.surface,style:T,background:k,children:(0,i.tZ)(l.X,{iconBreadcrumbs:!0,command:s,onAction:t,onSelect:t,onTotalHeightChange:v,focusRef:g,fontSize:void 0===n?14:n,compact:!0})})})]}):null})},30965:function(e,n,t){t.d(n,{Z:function(){return p}});var r=t(8182),o=t(51384),i=t(47507),a=t(29287),l=t(56596),c=t(39756),u=t(43429),s=t(96179),d=t(49932),f=(0,o.iv)([a.l0.justify.center,a.l0.pl(8),{overflow:"hidden",height:"100%",width:"100%","> svg":{opacity:.5,width:250,display:"flex"}}]);function h(e){var n=e.index,t=32*n+8;return(0,r.BX)(r.HY,{children:[(0,r.tZ)("rect",{x:0,y:t,rx:"3",ry:"3",width:16,height:16}),(0,r.tZ)("rect",{x:28,y:t,rx:"3",ry:"3",width:"".concat(100+(n%2!=0?-10*n:10*n)),height:16})]})}function p(e){var n=e.path,t=n===c.Ql,o=t?5:1;u.useEffect(function(){var e=i.kg.timeStart({isRootPath:t});return function(){e("time to load filetree folder")}},[t,n]);var a="fileTreeLoader-"+Math.random().toString();return(0,r.tZ)(l.G,{css:f,children:(0,r.tZ)(s.Z,{speed:2,backgroundColor:d.TV.backgroundHighest,foregroundColor:d.TV.backgroundHigher,height:32*o,width:250,viewBox:"0 0 250 ".concat(32*o),uniqueKey:a,children:Array(o).fill(null).map(function(e,n){return(0,r.tZ)(h,{index:n},n)})})})}},6033:function(e,n,t){t.d(n,{st:function(){return y}});var r,o,i=t(45903),a=t(25e3),l=t(8182),c=t(43429),u=t(13900),s=t(63130),d=t(95891),f=t(56596),h=t(74833),p=t(29287),g=t(93496);t(51384),t(13090),t(76588);var v=t(25425),m=t(38080);(r=o||(o={})).AddFile="AddFile",r.AddFolder="AddFolder",r.UploadFile="UploadFile",r.UploadFolder="UploadFolder",r.DownloadZip="DownloadZip",r.Duplicate="Duplicate",r.ShowHiddenFiles="ShowHiddenFiles",r.HideHiddenFiles="HideHiddenFiles",r.OpenTab="OpenTab",r.OpenPane="OpenPane",r.CopyLink="CopyLink",r.CopyFilePath="CopyFilePath",r.CopyFolderPath="CopyFolderPath",r.OpenShellHere="OpenShellHere",r.Rename="Rename",r.Download="Download",r.Delete="Delete",r.OpenWith="OpenWith";var y={AddFile:{type:"AddFile",text:"Add file"},AddFolder:{type:"AddFolder",text:"Add folder"},UploadFile:{type:"UploadFile",text:"Upload file"},UploadFolder:{type:"UploadFolder",text:"Upload folder"},DownloadZip:{type:"DownloadZip",text:"Download as zip"},Duplicate:{type:"Duplicate",text:"Duplicate file"},ShowHiddenFiles:{type:"ShowHiddenFiles",text:"Show hidden files"},HideHiddenFiles:{type:"HideHiddenFiles",text:"Hide hidden files"},OpenTab:{type:"OpenTab",text:"Open tab"},OpenPane:{type:"OpenPane",text:"Open pane"},CopyFilePath:{type:"CopyFilePath",text:"Copy file path"},CopyFolderPath:{type:"CopyFolderPath",text:"Copy folder path"},CopyLink:{type:"CopyLink",text:"Copy link"},OpenShellHere:{type:"OpenShellHere",text:"Open shell here"},Rename:{type:"Rename",text:"Rename"},Download:{type:"Download",text:"Download"},Delete:{type:"Delete",text:"Delete"}};p.l0.position.relative,p.l0.width(16),p.l0.height(16);var b={self:[p.l0.position.relative,p.l0.width(20),p.l0.height("100%"),p.l0.justify.center,{"& span":{height:"100%"}}],self2:[p.l0.position.relative,p.l0.width(16),p.l0.height("100%"),p.l0.justify.center,p.l0.pr(1)],button:[p.l0.display.flex,p.l0.align.center,p.l0.justify.center,p.l0.py(2),p.l0.top(0),p.l0.width("100%"),p.l0.border({width:0,color:"none"}),p.l0.cursor.pointer,p.l0.color.foregroundDimmest,p.l0.borderRadius(4),g.gU.filled,p.l0.position.relative,{top:-1,right:-1,height:"calc(100% + 2px)",backgroundColor:"transparent",borderTopLeftRadius:0,borderBottomLeftRadius:0}],button2:[p.l0.display.flex,p.l0.align.center,p.l0.py(2),p.l0.width("100%"),p.l0.height("100%"),p.l0.cursor.pointer,p.l0.color.foregroundDimmest,p.l0.focusRing,p.l0.borderRadius(4),{backgroundColor:"transparent",":hover":{color:p.TV.foregroundDefault}}],list:[p.l0.flex.column,p.l0.justify.center,p.l0.borderRadius(8),p.l0.zIndex(1),p.l0.backgroundColor.backgroundDefault,{listStyle:"none"},{":focus":{outline:"none"}}],option:function(e,n){return[p.l0.color.foregroundDefault,p.l0.p(8),p.l0.fontWeight.normal,p.l0.cursor.pointer,{whiteSpace:"nowrap"},n&&[p.l0.backgroundColor.backgroundHigher],e&&[{":hover":{backgroundColor:p.TV.accentNegativeDefault},":hover .option-label":{color:p.TV.white}}]]},optionLabel:function(e){return e?[p.l0.color.accentNegativeStronger]:[]}};function w(e){var n=e.isNegative,t=e.isHighlighted,r=e.children;return(0,l.tZ)(f.G,{css:b.option(n,t),children:(0,l.tZ)(h.xv,{className:"option-label",css:b.optionLabel(n),multiline:!1,children:r})})}var x=f.K.ul,k=f.K.li,C=f.K.button,Z=f.K.div,S=c.forwardRef(function(e,n){var t=e.isActive,r=e.actions,o=e.onAction,g=e.onOpenChange,S=c.useRef(!1),T=(0,s.L7)({items:r,onSelectedItemChange:function(e){var n=e.selectedItem;n&&(S.current||o(n),L())}}),R=T.isOpen,E=T.getToggleButtonProps,D=T.getMenuProps,P=T.highlightedIndex,_=T.getItemProps,A=T.openMenu,L=T.reset;c.useImperativeHandle(n,function(){return{open:A}}),c.useEffect(function(){g&&g(R)},[R,g]);var I=E(),q=(0,v.P5)({controlName:"flag-ws-density-filetree",logFlagToAnalytics:!1});return(0,l.tZ)(f.G,{css:q?b.self2:b.self,children:(0,l.BX)(d.Z,{elevated:!0,showArrow:!0,isOpen:R,placement:"right-start",padding:0,onClickOutside:L,children:[(0,l.tZ)(m.Tg,{background:t?"default":"root",css:[p.l0.height("100%"),{background:t?p.TV.backgroundHigher:"transparent",borderTopRightRadius:8,borderBottomRightRadius:8}],children:(0,l.tZ)(C,(0,a._)((0,i._)({},I),{css:q?b.button2:b.button,size:20,onClick:function(e){e.stopPropagation(),I.onClick(e)},children:(0,l.tZ)(u.Z,{})}))}),(0,l.tZ)(Z,(0,a._)((0,i._)({},D({},{suppressRefError:!0})),{children:R?(0,l.tZ)(x,{css:b.list,children:r.map(function(e,n){return(0,l.tZ)(k,(0,a._)((0,i._)({"data-cy":"filetree-node-action-".concat(e.type)},_({item:e,index:n,onClick:function(n){S.current=!0,setTimeout(function(){S.current=!1}),o(e),n.stopPropagation()}})),{children:(0,l.tZ)(w,{isHighlighted:P===n,isNegative:e.type===y.Delete.type,children:(0,l.BX)(f.G,{css:[p.l0.rowWithGap(8),p.l0.align.center],children:[(0,l.tZ)(h.xv,{multiline:!1,children:e.text}),"icon"in e?e.icon:null]})})}),e.text)})}):null}))]})})});S.displayName="NodeActionsMenu",n.ZP=S},21113:function(e,n,t){t.d(n,{O3:function(){return j},Lw:function(){return V},Ni:function(){return K}});var r=t(32477),o=t(8182),i=t(43429),a=t(4736),l=t(78272),c=t(75582),u=t(45903),s=t(93295),d=t(23982),f=t(77393);function h(){var e=(0,s._)(["\n  fragment AiModelSelectorCurrenttUser on CurrentUser {\n    id\n    userSubscriptionType\n    userPowerUpsByType {\n      ... on UserPowerUpsTypes {\n        ghostwriter {\n          active\n        }\n      }\n    }\n  }\n"]);return h=function(){return e},e}function p(){var e=(0,s._)(["\n  query AiModelSelector {\n    currentUser {\n      ...AiModelSelectorCurrenttUser\n    }\n  }\n  ","\n"]);return p=function(){return e},e}var g={},v=(0,d.Ps)(h()),m=(0,d.Ps)(p(),v),y=t(25632),b=t(25e3),w=t(1498),x=t(93918),k=t(2454),C=t(32377),Z=t(79217),S=t(93496),T=t(3630),R=t(23291),E=t(1415),D=t(38080),P=t(74833),_=t(29287),A=t(56596),L=t(72443),I=t(68934),q=t(98934),M=t(87001),B=(0,x.X)({root:[_.l0.rowWithGap(8),_.l0.align.center],left:[_.l0.rowWithGap(2),_.l0.flex.grow(1)],right:[_.l0.width("50%")],rightInline:[_.l0.minWidth(24)],bar:[_.l0.height(6)]});function G(e){var n=e.total-e.used,t=Math.max(0,Math.min(100,Math.round(n/e.total*100)));return(0,o.BX)(A.G,{css:B.root,children:[(0,o.tZ)(A.G,{css:B.left,children:e.used===e.total?(0,o.tZ)(P.xv,{variant:"small",color:"dimmest",children:"No quota left"}):(0,o.BX)(o.HY,{children:[(0,o.BX)(P.xv,{variant:"small",children:[t,"%"]}),(0,o.tZ)(P.xv,{variant:"small",color:"dimmest",children:"left"})]})}),(0,o.tZ)(A.G,{css:e.inline?B.rightInline:B.right,children:(0,o.tZ)(T.J,{css:B.bar,tooltipHidden:!0,current:n,total:e.total,color:_.TV.blurpleDefault})})]})}var F=(0,x.X)({root:[_.l0.rowWithGap(4),_.l0.align.center],title:[{fontFamily:_.TV.fontWeightMedium},_.l0.color.foregroundDefault]});function W(e){return(0,o.BX)(A.G,{css:F.root,children:[e.icon,(0,o.tZ)(P.xv,{css:F.title,variant:"small",children:e.title})]})}var U=(0,x.X)({root:[_.l0.px(8),_.l0.py(12),_.l0.colWithGap(4)],content:[_.l0.colWithGap(0)],header:[_.l0.align.center,_.l0.rowWithGap(4),_.l0.color.foregroundDimmer],headerLeft:[_.l0.rowWithGap(4),_.l0.align.center,_.l0.flex.growAndShrink(1)],proPill:[_.l0.borderRadius(4),_.l0.height(16)]});function X(e){var n=e.selected,t=e.quota,r=e.hasAccessToAdvancedModel;return(0,o.BX)(A.G,{css:U.root,children:[(0,o.BX)(A.G,{css:U.content,children:[(0,o.BX)(A.G,{css:U.header,children:[(0,o.tZ)(A.G,{css:U.headerLeft,children:(0,o.tZ)(W,{icon:(0,o.tZ)(k.Z,{size:12}),title:"Basic"})}),n?(0,o.tZ)(C.Z,{}):null]}),(0,o.tZ)(P.xv,{variant:"small",color:"dimmer",children:"Faster. For common tasks like writing boilerplate code or reformatting data."})]}),r?(0,o.BX)(P.xv,{variant:"small",color:"dimmer",children:["Unlimited for ",M.we]}):(0,o.tZ)(G,{used:t.used,total:t.total})]})}function N(e){var n=e.hasAccessToAdvancedModel,t=e.selected,r=e.quota,i=e.onUpgrade;return(0,o.BX)(A.G,{css:U.root,children:[(0,o.tZ)(A.G,{css:U.content,children:(0,o.BX)(A.G,{css:U.header,children:[(0,o.BX)(A.G,{css:U.headerLeft,children:[(0,o.tZ)(W,{icon:(0,o.tZ)(I.Z,{size:12}),title:"Advanced"}),n?null:(0,o.tZ)(R.D,{css:U.proPill,text:M.we,color:_.TV.foregroundDimmer})]}),t?(0,o.tZ)(C.Z,{}):null]})}),(0,o.tZ)(P.xv,{variant:"small",color:"dimmer",children:"For complex code generation, editing, and explanation. Limited amount per week."}),n?(0,o.tZ)(G,{used:r.used,total:r.total}):(0,o.tZ)(w.zx,{size:"small",text:"Upgrade to Replit ".concat(M.we),colorway:"blurple",onClick:function(){return null==i?void 0:i()}})]})}var O=(0,x.X)({button:[_.l0.reset.button,_.l0.rowWithGap(4),_.l0.cursor.pointer,_.l0.align.center,_.l0.px(4),_.l0.py(2),S.gU.nofill,_.l0.color.foregroundDimmest,{"&:hover":_.l0.color.foregroundDefault}],header:[_.l0.p(4)],item:[_.l0.cursor.pointer,S.gU.listItem]}),z=["basic","advanced"];function H(e){var n=(0,L.L7)({items:z,selectedItem:e.selectedItem,onSelectedItemChange:function(n){n.selectedItem&&e.onChange(n.selectedItem)}}),t=(0,q.w)(),r=t.setTriggerEl,i=t.setPopoverEl,a=t.attributes,l=t.styles,c=e.userLimits,s=c.basicModelLimits,d=c.advancedModelLimits;return(0,o.BX)(A.G,{children:[(0,o.BX)(A.G,(0,b._)((0,u._)({tag:"button",css:O.button},n.getToggleButtonProps({refKey:"innerRef",ref:r})),{children:["basic"===n.selectedItem?(0,o.BX)(o.HY,{children:[(0,o.tZ)(k.Z,{size:12}),(0,o.tZ)(P.xv,{variant:"small",children:"Basic"})]}):(0,o.BX)(o.HY,{children:[(0,o.tZ)(I.Z,{size:12}),(0,o.tZ)(P.xv,{variant:"small",children:"Advanced"})]}),(0,o.tZ)(Z.Z,{rotate:n.isOpen?180:0,size:12})]})),(0,o.tZ)(A.G,(0,b._)((0,u._)({},n.getMenuProps({refKey:"innerRef"})),{children:n.isOpen?(0,o.tZ)(E.h,{children:(0,o.BX)(D.Tg,(0,b._)((0,u._)({elevated:!0,style:l,innerRef:i,css:q.L.popover},a),{children:[(0,o.tZ)(P.xv,{variant:"small",color:"dimmest",css:O.header,children:"Select a model"}),z.map(function(t,r){var i=n.highlightedIndex===r?{backgroundColor:S.vb.interactiveBackground}:void 0;return(0,o.tZ)(A.G,(0,b._)((0,u._)({css:O.item,style:i},n.getItemProps({refKey:"innerRef",item:t,index:r})),{children:"basic"===t?(0,o.tZ)(X,{quota:{used:s.usage,total:s.limit},selected:"basic"===e.selectedItem,hasAccessToAdvancedModel:e.hasAccessToAdvancedModel}):(0,o.tZ)(N,{quota:{used:d.usage,total:d.limit},selected:"advanced"===e.selectedItem,hasAccessToAdvancedModel:e.hasAccessToAdvancedModel})}),t)})]}))}):null}))]})}function j(){var e=(0,r._)((0,i.useState)(!1),2),n=e[0],t=e[1],c=(0,a.Tt)(),u=V(),s=(0,r._)(K(),2),d=s[0],f=s[1];if(!c)return null;var h={basicModelLimits:{usage:c.basicModelUsage,limit:c.basicModelLimit},advancedModelLimits:{usage:c.advancedModelUsage,limit:c.advancedModelLimit}};return(0,o.BX)(o.HY,{children:[(0,o.tZ)(H,{userLimits:h,hasAccessToAdvancedModel:u,selectedItem:d,onChange:function(e){if(!u&&"advanced"===e){t(!0);return}f(e)}}),(0,o.tZ)(l.Z,{isOpen:n,onClose:function(){return t(!1)},type:"purchase",analyticsContext:{upgrade:{context:"ai_model_selector",surface:"ghostwriter_power_up_dialog"}}})]})}function V(){var e,n=(e=(0,u._)({},g,void 0),f.a(m,e)).data,t=null==n?void 0:n.currentUser;return!!t&&(t.userSubscriptionType===c.HP.HackerPro||!!((null==t?void 0:t.userPowerUpsByType.__typename)==="UserPowerUpsTypes"&&t.userPowerUpsByType.ghostwriter.active))}function K(){var e=V(),n=(0,y.Gn)("ghostwriterUseAdvancedModel"),t=n.preferences,r=n.update;return[t.ghostwriterUseAdvancedModel&&e?"advanced":"basic",(0,i.useCallback)(function(e){return r({ghostwriterUseAdvancedModel:"advanced"===e})},[r])]}},98934:function(e,n,t){t.d(n,{L:function(){return u},w:function(){return c}});var r=t(32477),o=t(93918),i=t(43429),a=t(2581),l=t(29287);function c(){var e=(0,r._)((0,i.useState)(null),2),n=e[0],t=e[1],o=(0,r._)((0,i.useState)(null),2),l=o[0],c=o[1],u=(0,a.D)(n,l,{modifiers:[{name:"offset",options:{offset:[0,4]}},{name:"preventOverflow",options:{padding:16}}],placement:"bottom-start"});return{setPopoverEl:c,setTriggerEl:t,attributes:u.attributes.popper,styles:u.styles.popper}}var u=(0,o.X)({popover:[l.l0.borderRadius(4),l.l0.border({color:l.TV.outlineDefault}),l.l0.overflow("hidden"),l.l0.maxWidth(260)]})},94442:function(e,n,t){t.d(n,{r:function(){return R},B:function(){return E}});var r=t(34142),o=t(32477),i=t(21289),a=t(87682),l=t(58091),c=t(43429),u=t(90841),s=t(72129),d=t(23394),f=t(50455),h=t(54916),p=t(45434),g=t(19659),v=t(1574),m=t(39756),y=t(30084),b=t(37685),w=t(1228);function x(e){var n=(0,g.r6)(e),t=w.hI.some(function(n){return e.endsWith(n)}),r=w.HH.some(function(n){return e.endsWith(n)}),o=w.Fv.some(function(n){return e.split("/").some(function(e){return e.includes(n)})});return!n||t||r||o}var k=t(95683),C=t(39426),Z=t(47507);function S(){return(S=(0,r._)(function(e){var n,t,r,o,l,c,u,s;return(0,a.Jh)(this,function(a){switch(a.label){case 0:if(n=e.files,t=e.fs,r=e.entrypointFile,o=e.hiddenFiles,!(r&&n.length<10))return[3,2];return n.push(r),u=""===(c=(0,g.Il)(r))?m.Ql:c,[4,t.readDir(u)];case 1:if(!("children"in(s=a.sent())))return[2];(l=n).push.apply(l,(0,i._)(s.children.filter(function(e){return e.type===y.Tv.File}).filter(function(e){return!(x(e.filename)||(0,b.lv)(e.filename,o)||!(0,g.Mb)(e.filename))}).map(function(e){return u===m.Ql?e.filename:"".concat(c,"/").concat(e.filename)}).filter(function(e){return!n.includes(e)}).slice(0,1))),a.label=2;case 2:return[2]}})})).apply(this,arguments)}function T(){return(T=(0,r._)(function(e){var n,t,r,o,l,c,u,s,d,f,h,p,m,y,w,T,R,E,D,P,_,A,L,I,q,M,B,G,F,W,U,X,N,O;return(0,a.Jh)(this,function(a){switch(a.label){case 0:return n=e.recentFiles,t=e.fs,r=e.dotReplit,o=e.maxCharacters,l=e.replLanguage,c=e.filePreferences,[4,r.getConfig()];case 1:return h=(null==(f=a.sent().config)?void 0:f.entrypoint)||C.ZP.getMainFileName(l)||null,p=((null==f?void 0:f.hidden)||[]).map(function(e){return(0,v.Z)(e)}).filter(Boolean),m=[],w=null!==(y=null==c?void 0:null===(d=c.filter(function(e){return"include"===e.preference}))||void 0===d?void 0:d.map(function(e){return e.path}))&&void 0!==y?y:[],(u=m).push.apply(u,(0,i._)(w)),T=w.length,R=n.slice(0,3),(s=m).push.apply(s,(0,i._)(R)),E=R.length,[4,function(e){return S.apply(this,arguments)}({files:m,entrypointFile:h,fs:t,hiddenFiles:p})];case 2:return a.sent(),D=m.length-E-T,Z.kg.info("GhostwriterChat got file context",{numRecentFiles:E,numEntrypointFiles:D,maxFiles:10}),_=(P=function(e){var n=e.files,t=e.hiddenFiles,r=e.filePreferences,o=null!==(v=null==r?void 0:null===(h=r.filter(function(e){return"include"===e.preference}))||void 0===h?void 0:h.map(function(e){return e.path}))&&void 0!==v?v:[],a=null!==(m=null==r?void 0:null===(p=r.filter(function(e){return"exclude"===e.preference}))||void 0===p?void 0:p.map(function(e){return e.path}))&&void 0!==m?m:[],l=0,c=[],u=[],s=!0,d=!1,f=void 0;try{for(var h,p,v,m,y,w=(0,i._)(new Set(n))[Symbol.iterator]();!(s=(y=w.next()).done);s=!0){var k=y.value;if(!(!o.includes(k)&&(x(k)||(0,b.lv)(k,t)||a.includes(k)||!(0,g.Mb)(k)))){if(l>=10){u.push(k);continue}c.push(k),l+=1}}}catch(e){d=!0,f=e}finally{try{s||null==w.return||w.return()}finally{if(d)throw f}}return 0===c.length&&Z.kg.info("GhostwriterChat filtered out all files for file context",{numFiles:n.length}),{validFilePaths:c,pathsExceedingMaxFilesLimit:u}}({files:m,hiddenFiles:p,filePreferences:c})).validFilePaths,A=P.pathsExceedingMaxFilesLimit,[4,Promise.all(_.map(function(e){return t.readFile(e)}))];case 3:for(G=0,L=a.sent(),I=[],q=[],M=A,B=o;G<_.length;G++){if(F=_[G],W=(0,k.S)(F),(U=L[G]).error){Z.kg.info("GhostwriterChat failed to read file",{filePath:F});continue}if(function(e){var n=e.length;if(0===n)return!1;var t=0,r=Math.min(n,512);if(n>=3&&239===e[0]&&187===e[1]&&191===e[2]||n>=4&&0===e[0]&&0===e[1]&&254===e[2]&&255===e[3]||n>=4&&255===e[0]&&254===e[1]&&0===e[2]&&0===e[3]||n>=4&&132===e[0]&&49===e[1]&&149===e[2]&&51===e[3])return!1;if(r>=5&&"%PDF-"===e.slice(0,5).toString())return!0;if(n>=2&&254===e[0]&&255===e[1]||n>=2&&255===e[0]&&254===e[1])return!1;for(var o=0;o<r;o++){if(0===e[o])return!0;if((e[o]<7||e[o]>14)&&(e[o]<32||e[o]>127)){if(e[o]>193&&e[o]<224&&o+1<r){if(e[++o]>127&&e[o]<192)continue}else if(e[o]>223&&e[o]<240&&o+2<r&&e[++o]>127&&e[o]<192&&e[o+1]>127&&e[o+1]<192){o++;continue}if(t++,o>=32&&100*t/r>10)return!0}}return 100*t/r>10}(U.content.toBuffer())){Z.kg.info("GhostwriterChat filtered out binary file",{filePath:F});continue}if(B<=0){M.push(F);continue}N=(X=U.content.toString()).slice(0,B),O=X.length>N.length,B<=0&&M.push(F),O?q.push(F):I.push({filePath:F,language:W,code:N}),B-=N.length}return B<=0?Z.kg.info("GhostwriterChat hit character limit for file context",{numFilesIncluded:_.length,filesExcluded:_.length-I.length}):Z.kg.info("GhostwriterChat has remaining file context characters",{remainingChars:B}),[2,{fileContext:I,truncatedFiles:q,overflowingFiles:M}]}})})).apply(this,arguments)}function R(){var e=(0,h.Z)(),n=e.fs,t=e.dotReplit,o=(0,s.v)(),i=(0,l.AA)(),g=(0,d.Z)(),v=(0,f.P)(o),m=(0,u.Ji)();return(0,c.useCallback)((0,r._)(function(){var e,r,o,l,c,u;return(0,a.Jh)(this,function(a){switch(a.label){case 0:if(!n||!t)throw Error("Expected fs and dotReplit services");return e=(0,p.yL)(v).fileContextCharacters,r=i(),o=m(),[4,function(e){return T.apply(this,arguments)}({recentFiles:r,fs:n,dotReplit:t,maxCharacters:e,replLanguage:g,filePreferences:o})];case 1:return l=a.sent(),c=r[0],[2,{ghostwriterFileContext:l,mostRecentFile:(null!==(u=null==o?void 0:o.filter(function(e){return"exclude"===e.preference}).map(function(e){return e.path}))&&void 0!==u?u:[]).includes(c)?null:c}]}})}),[n,t,v,i,m,g])}function E(){var e=(0,l.Bx)(),n=R(),t=(0,u.Xy)(),d=(0,o._)((0,c.useState)([]),2),f=d[0],h=d[1],p=(0,s.v)();return(0,c.useEffect)(function(){var e;(e=(0,r._)(function(){var e,t,r,o,l,c,u,s;return(0,a.Jh)(this,function(a){switch(a.label){case 0:return e=new Set,[4,n()];case 1:return r=(t=a.sent().ghostwriterFileContext).fileContext,o=t.truncatedFiles,l=t.overflowingFiles,r.forEach(function(n){e.add(n.filePath)}),c=Array.from(e).map(function(e){return{path:e,inclusionStatus:"included"}}),u=o.map(function(e){return{path:e,inclusionStatus:"truncated"}}),s=l.map(function(e){return{path:e,inclusionStatus:"overflowing"}}),h((0,i._)(c).concat((0,i._)(u),(0,i._)(s))),[2]}})}),function(){return e.apply(this,arguments)})()},[e,p,t,n]),f}},50455:function(e,n,t){t.d(n,{P:function(){return l}});var r=t(32477),o=t(4736),i=t(21113),a=t(45434);function l(e){var n=(0,r._)((0,i.Ni)(),1)[0],t=(0,o.ll)();return"advanced"===n&&t?a.hf.model:e}},20766:function(e,n,t){t.d(n,{Cd:function(){return v},KI:function(){return h},Og:function(){return p},Oy:function(){return g},RN:function(){return u},YY:function(){return d},d$:function(){return c},wK:function(){return f}});var r=t(45903),o=t(90234),i=t(64461),a=t(78094),l=(0,o.cn)(!1),c=function(){return(0,a.c1)(l)},u=function(){return(0,a.wM)(l)},s=(0,o.cn)({}),d=(0,o.cn)(null,function(e,n,t){var o=t.id,a=t.debugInfo,l=e(s);n(s,(0,i.Uy)(l,function(e){e[o]||(e[o]={}),e[o]=(0,r._)({},e[o],a)}))}),f=function(e){var n=e.messageId;return(0,a.c1)(s)[n]},h=(0,o.cn)(""),p=function(){return(0,a.c1)(h)},g=(0,o.cn)(""),v=function(){return(0,a.c1)(g)}},83898:function(e,n,t){t.d(n,{Cd:function(){return w.Cd},Gd:function(){return en},J:function(){return et},Og:function(){return w.Og},Qn:function(){return ei},ZT:function(){return Y},fr:function(){return eo},gp:function(){return j},kL:function(){return X},qQ:function(){return ea},ql:function(){return ee},zu:function(){return U}});var r,o,i,a,l=t(95867),c=t(34142),u=t(45903),s=t(25e3),d=t(32477),f=t(87682),h=t(48900),p=t(90234),g=t(15859),v=t(30911),m=t.n(v),y=t(45434),b=t(47507),w=t(20766),x=t(66820),k=t(3590),C=t(4736),Z=t(29217),S=t(59868),T=t(84657),R=t(64461),E=t(43429),D=t(28999),P=t(78094),_=t(74997),A=t(14917),L=t(99952),I=t(52590),q=t(52297),M=t(99149),B=t(21113),G=t(50782),F=t(72129),W=t(94442),U=function(){return(0,P.wM)(x.qw)},X=function(){return(0,P.$X)(x.qw)},N=(0,p.cn)(new Set),O=(0,p.cn)(null,function(e,n,t){var r=(0,R.Uy)(e(N),function(e){e.add(t)});n(N,r)}),z=(0,p.cn)(null,function(e,n,t){var r=(0,R.Uy)(e(N),function(e){e.delete(t)});n(N,r)}),H=(0,p.cn)(function(e){return e(N).size>0}),j=function(){return(0,P.c1)(H)};function V(e){return{user:e.attribution,message:e.text}}var K=(0,p.cn)(null,(r=(0,c._)(function(e,n){var t;return(0,f.Jh)(this,function(r){switch(r.label){case 0:if(n(x.mJ),n(x.qw,[]),n(I.r),!(t=e(Z.tV)))return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,t.createNewSession()];case 2:return r.sent(),[3,4];case 3:return r.sent(),h.Tb(Error("Unable to initialize Ghostwriter Chat session")),[2];case 4:return[2]}})}),function(e,n){return r.apply(this,arguments)})),Y=function(){return(0,P.$X)(K)},$=(0,p.cn)(null,(o=(0,c._)(function(e,n,t){var r,o,i,a,c,d,h,p,g,v,m,E,D,P,_,A,L,I,q,M,B,G,F,W,U,X,N,O,z,H,j,K,Y,$,J,Q,ee,en,et,eo;return(0,f.Jh)(this,function(f){switch(f.label){case 0:return r=t.chatInput,o=t.responseId,i=t.timesRegenerated,a=t.modelType,c=t.chatModel,d=t.replId,h=r.chatMessage,p=r.workspaceContext,g=r.messages,v=e(C.yH),m="advanced"===a&&v,E=h.type,D=h.codeReference,[4,Promise.resolve(p)];case 1:if(_=(P=f.sent()).fileContext,A=P.mostRecentFile,L=e(k.qy),I=e(Z.tV),void 0!==(q=e(er))&&(h.action=q),(0,S.j)(S.U3.GHOSTWRITER_CHAT_MESSAGE_SENT,{type:E,model:c,isAdvancedModel:m}),M={id:o,type:E,codeReference:D,text:"",loading:!0,attribution:"Assistant",model:c,useAdvancedModel:m,timesRegenerated:i},(G=null!==(B=t.abortController)&&void 0!==B?B:new AbortController).signal.aborted)return n(x.Mk,{message:(0,R.Uy)(M,function(e){e.loading=!1,e.stopReason="unknown"})}),[2];n(x.WU,{messageId:o,abortController:G}),f.label=2;case 2:var ei,ea;if(f.trys.push([2,15,16,17]),n(T.Et,!0),ei=g,ea=function(e){return!e.loading&&!e.error},F=ei.filter(function(e,n){return(!(n<ei.length-1)||!!ea(ei[n+1]))&&ea(ei[n])&&"feedback"!==ei[n].type}).map(V),W=performance.now(),U=void 0,!(0,y.uL)(c))throw Error("Invalid chat model");if(!I)throw Error("Invalid Ghostwriter Chat client");X={fileContext:_,mostRecentFile:A},N=I.sendMessage({body:{chatHistory:F,message:h,model:c,useAdvancedModel:m,sessionId:L,context:X},options:{abortSignal:G.signal}}),O=void 0,z="",H=!1,j=!1,f.label=3;case 3:f.trys.push([3,8,9,14]),Y=(0,l._)(N),f.label=4;case 4:return[4,Y.next()];case 5:if(!(H=!($=f.sent()).done))return[3,7];if((J=$.value).intentStreamChunk&&(O=J.intentStreamChunk.intent),J.debugStreamChunk&&(n(w.KI,J.debugStreamChunk.fullPrompt),n(w.YY,{id:o,debugInfo:{fullPrompt:J.debugStreamChunk.fullPrompt}}),n(w.YY,{id:o,debugInfo:{workspaceContext:X}})),U||(U=performance.now()-W,b.kg.time("ghostwriter chat time to first stream",U,{replid:d,chatId:L,chatModel:c,messageId:o,isAdvancedModel:m}),n(w.YY,{id:o,debugInfo:{timeToFirstStream:U}})),!J.responseStreamChunk)return[3,6];ee=(Q=J.responseStreamChunk).stopReason,Q.stopReason&&(n(w.Oy,Q.stopReason),n(w.YY,{id:o,debugInfo:{stopReason:Q.stopReason}}),ee=Q.stopReason),z+=Q.data,M=(0,s._)((0,u._)({},M),{loading:!1,streaming:!ee&&!J.responseStreamChunk.isComplete,text:z,intent:O,inferenceId:J.responseId,useAdvancedModel:m,stopReason:ee}),n(x.Mk,{message:M}),f.label=6;case 6:return H=!1,[3,4];case 7:return[3,14];case 8:return en=f.sent(),j=!0,K=en,[3,14];case 9:if(f.trys.push([9,,12,13]),!(H&&null!=Y.return))return[3,11];return[4,Y.return()];case 10:f.sent(),f.label=11;case 11:return[3,13];case 12:if(j)throw K;return[7];case 13:return[7];case 14:return n(er,void 0),[3,17];case 15:if(et=f.sent(),n(T.Et,!1),"AbortError"===et.name)return n(x.Mk,{message:(0,s._)((0,u._)({},M),{aborted:!0,streaming:!1})}),[2];return n(x.b9,{messageId:o,error:et.message}),b.kg.error("ghostwriter chat client response error",{replid:d,chatId:L,chatModel:c,messageId:o,originalError:null!==(eo=null==et?void 0:et.message)&&void 0!==eo?eo:et}),[3,17];case 16:return n(x.mV,{messageId:o}),[7];case 17:return[2]}})}),function(e,n,t){return o.apply(this,arguments)})),J=(0,p.cn)(null,(i=(0,c._)(function(e,n,t,r){var o,i,a,l,c,u,s,d,h,p,g,v,y,b,w,k,C;return(0,f.Jh)(this,function(f){switch(f.label){case 0:if(o=r.modelType,i=r.chatModel,a=r.replId,l=r.getContext,c=t.text,u=t.type,s=t.codeReference,d=(null==c?void 0:c.trim())||"",h=e(x.qw),p=m()(),g=m()(),e(Z.Rr))return v={id:g,type:u,codeReference:s,loading:!1,text:"AI features are disabled in this team's Repls.",attribution:"Assistant",useAdvancedModel:!1},n(x.OV,{message:v}),[2];return M.B4.Check(q.cZ,t)?n(_.W,t.codeReference.filePath):M.B4.Check(q.FL,t)?n(A.k8,t.codeReference.filePath):M.B4.Check(q.Mx,t)&&n(L.ev,t.codeReference.filePath),n(O,p),y={id:p,type:u,codeReference:s,text:d,attribution:"Human",timeCreated:new Date},n(x.TC,{message:y}),b={id:g,type:u,codeReference:s,loading:!0,text:"Please wait while I think through your request…",attribution:"Assistant",useAdvancedModel:"advanced"===o},n(x.OV,{message:b}),[4,l()];case 1:k={fileContext:(w=f.sent()).ghostwriterFileContext.fileContext,mostRecentFile:w.mostRecentFile},C={type:u,text:d,codeReference:s},f.label=2;case 2:return f.trys.push([2,,4,5]),[4,n($,{chatInput:{chatMessage:C,workspaceContext:k,messages:h},responseId:g,modelType:o,chatModel:i,replId:a})];case 3:return f.sent(),[3,5];case 4:return n(z,p),[7];case 5:return[2]}})}),function(e,n,t,r){return i.apply(this,arguments)})),Q=(0,p.cn)(null,(a=(0,c._)(function(e,n,t){var r,o,i,a,l,c,u,s,d,h,p,g,v,m,y,w,k,C,Z,S;return(0,f.Jh)(this,function(f){switch(f.label){case 0:if(r=t.responseId,o=t.action,i=t.modelType,a=t.chatModel,l=t.replId,c=t.getContext,!(d=-1!==(s=(u=e(x.qw)).findIndex(function(e){return e.id===r}))&&"Assistant"===u[s].attribution))return b.kg.error("GW Chat error regenerate assistant message",{responseId:r,isResponseAssistantMessage:d}),[2];if(!(p=(h=u.slice(0,s)).pop()))return b.kg.error("GW Chat error no human message before response message"),[2];return n(O,p.id),g=(u[s].timesRegenerated||0)+1,v="advanced"===i,m=p.text,y=p.type,w=p.codeReference,k={id:r,type:y,codeReference:w,loading:!0,text:"Please wait while I think through your request…",attribution:"Assistant",timesRegenerated:g,useAdvancedModel:v},n(x.Mk,{message:k}),[4,c()];case 1:Z={fileContext:(C=f.sent()).ghostwriterFileContext.fileContext,mostRecentFile:C.mostRecentFile},S={type:y,parentEventId:"this_message_was_retried",text:m,codeReference:w,action:o},n(er,o),f.label=2;case 2:return f.trys.push([2,,4,5]),[4,n($,{chatInput:{chatMessage:S,messages:h,workspaceContext:Z},responseId:r,timesRegenerated:g,modelType:i,chatModel:a,replId:l})];case 3:return f.sent(),[3,5];case 4:return n(z,p.id),[7];case 5:return[2]}})}),function(e,n,t){return a.apply(this,arguments)})),ee=function(){var e,n=(0,P.Uu)(),t=(0,d._)((0,B.Ni)(),1)[0],r=(0,F.v)(),o=(0,G.Z)(),i=(0,W.r)();return(0,D.lV)((0,E.useCallback)((e=(0,c._)(function(e,n,a){return(0,f.Jh)(this,function(e){switch(e.label){case 0:return[4,n(J,a.chatMessage,{modelType:t,chatModel:r,replId:o,getContext:i})];case 1:return[2,e.sent()]}})}),function(n,t,r){return e.apply(this,arguments)}),[t,o,r,i]),{store:n})},en=function(){var e,n=(0,P.Uu)(),t=(0,d._)((0,B.Ni)(),1)[0],r=(0,F.v)(),o=(0,G.Z)(),i=(0,W.r)();return(0,D.lV)((0,E.useCallback)((e=(0,c._)(function(e,n,a){return(0,f.Jh)(this,function(e){switch(e.label){case 0:return[4,n(Q,{responseId:a.responseId,action:a.action,modelType:t,chatModel:r,replId:o,getContext:i})];case 1:return[2,e.sent()]}})}),function(n,t,r){return e.apply(this,arguments)}),[t,o,r,i]),{store:n})},et=function(){var e=(0,x.j3)(),n=(0,x.MY)();return j()&&e&&!n},er=(0,p.cn)(void 0),eo=function(){return(0,P.wM)(er)},ei=function(){return(0,P.$X)(er)};function ea(e){var n,t=(0,E.useMemo)(function(){return(0,g.kv)(x.qw,function(n){var t=n.findIndex(function(n){return n.id===e}),r=t>=0?n[t]:null;if(!r)return null;if("Human"===r.attribution){var o=n[t+1];if(!o)return r;if("Assistant"===o.attribution&&"EXPLAIN"===o.intent)return(0,R.Uy)(r,function(e){e.intent="EXPLAIN",e.codeReference=o.codeReference})}return r})},[e]);return null!==(n=(0,P.c1)(t))&&void 0!==n?n:null}},74997:function(e,n,t){t.d(n,{W:function(){return a},j:function(){return c}});var r=t(78094),o=t(66820),i=t(90234),a=(0,i.cn)(null,function(e,n,t){var r=e(o.qw).filter(function(e){var n;return!("explainCode"===e.type&&(null===(n=e.codeReference)||void 0===n?void 0:n.filePath)===t)});n(o.qw,r)}),l=(0,i.cn)(function(e){return e(o.qw).filter(function(e){return"Assistant"===e.attribution&&"explainCode"===e.type})}),c=function(e){return(0,r.c1)(l).find(function(n){return n.codeReference&&n.codeReference.filePath===e})}},14917:function(e,n,t){t.d(n,{eD:function(){return u},k8:function(){return a},oQ:function(){return c}});var r=t(78094),o=t(66820),i=t(90234),a=(0,i.cn)(null,function(e,n,t){var r=e(o.qw).filter(function(e){var n;return!("generateCode"===e.type&&(null===(n=e.codeReference)||void 0===n?void 0:n.filePath)===t)});n(o.qw,r)}),l=(0,i.cn)(function(e){return e(o.qw).filter(function(e){return"Assistant"===e.attribution&&"generateCode"===e.type})}),c=function(e){return(0,r.c1)(l).find(function(n){return n.codeReference&&n.codeReference.filePath===e})},u=function(){return(0,r.$X)(a)}},99952:function(e,n,t){t.d(n,{Ef:function(){return u},ev:function(){return a},iH:function(){return c}});var r=t(78094),o=t(66820),i=t(90234),a=(0,i.cn)(null,function(e,n,t){var r=e(o.qw).filter(function(e){var n;return!("transformCode"===e.type&&(null===(n=e.codeReference)||void 0===n?void 0:n.filePath)===t)});n(o.qw,r)}),l=(0,i.cn)(function(e){return e(o.qw).filter(function(e){return"Assistant"===e.attribution&&"transformCode"===e.type})}),c=function(e){return(0,r.c1)(l).find(function(n){return n.codeReference&&n.codeReference.filePath===e})},u=function(){return(0,r.$X)(a)}},52590:function(e,n,t){t.d(n,{g:function(){return c},r:function(){return u}});var r=t(51944),o=t(78094),i=t(90234),a=t(43429),l=(0,i.cn)(new Set),c=function(e){var n=(0,o.c1)(l);(0,a.useEffect)(function(){if(e)return n.add(e),function(){n.delete(e)}},[n,e])},u=(0,i.cn)(null,function(e,n){var t=e(l),o=!0,i=!1,a=void 0;try{for(var c,u=t[Symbol.iterator]();!(o=(c=u.next()).done);o=!0)c.value.dispatch({effects:r.Q.of(null)})}catch(e){i=!0,a=e}finally{try{o||null==u.return||u.return()}finally{if(i)throw a}}})},66820:function(e,n,t){t.d(n,{MY:function(){return P},Mk:function(){return g},OV:function(){return p},TC:function(){return h},WS:function(){return S},WU:function(){return w},b9:function(){return v},em:function(){return T},j3:function(){return Z},mJ:function(){return C},mV:function(){return x},nS:function(){return y},qw:function(){return f},tz:function(){return R}});var r=t(32477),o=t(21289),i=t(90234),a=t(64461),l=t(73926),c=t.n(l),u=t(78094),s=t(50199),d=t(15859),f=(0,i.cn)([]),h=(0,i.cn)(null,function(e,n,t){var r=t.message,i=e(f);n(f,(0,o._)(i).concat([r]))}),p=(0,i.cn)(null,function(e,n,t){var r=t.message,i=e(f);n(D,{message:r}),n(f,(0,o._)(i).concat([r]))}),g=(0,i.cn)(null,function(e,n,t){var r=t.message,o=r.id,i=e(f),l=(0,a.Uy)(i,function(e){var n;for(n=e.length-1;n>=0&&i[n].id!==o;n--);n>=0&&(e[n]=r)});n(D,{message:r}),n(f,l)}),v=(0,i.cn)(null,function(e,n,t){var r=t.messageId,o=t.error,i=e(f);n(f,(0,a.Uy)(i,function(e){var n=e.find(function(e){return e.id===r});n&&(n.loading&&(n.text="",n.loading=!1),n.error=o)}))}),m=(0,i.cn)(null,function(e,n,t){var r=t.feedback,i=t.message,a=e(f),l={id:c()(),type:"feedback",text:r,feedbackProvidedMessage:{id:i.id,text:i.text},attribution:"Assistant",useAdvancedModel:i.useAdvancedModel};n(f,(0,o._)(a).concat([l]))}),y=function(){return(0,u.$X)(m)},b=(0,i.cn)(new Map),w=(0,i.cn)(null,function(e,n,t){var r=t.messageId,o=t.abortController,i=(0,a.Uy)(e(b),function(e){e.set(r,o)});n(b,i)}),x=(0,i.cn)(null,function(e,n,t){var r=t.messageId,o=(0,a.Uy)(e(b),function(e){e.delete(r)});n(b,o)}),k=(0,i.cn)(null,function(e,n,t){var r,o=t.messageId;null===(r=e(b).get(o))||void 0===r||r.abort(),n(f,function(e){return(0,a.Uy)(e,function(e){var n=!0,t=!1,r=void 0;try{for(var i,a=e[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var l=i.value;if(l.id===o){l.stopReason="unknown",l.loading=!1;break}}}catch(e){t=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(t)throw r}}})}),n(x,{messageId:o})}),C=(0,i.cn)(null,function(e,n){var t=(0,a.Uy)(e(b),function(e){var n=!0,t=!1,o=void 0;try{for(var i,a=e.entries()[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var l=(0,r._)(i.value,2);(l[0],l[1]).abort()}}catch(e){t=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(t)throw o}}e.clear()});n(b,t)}),Z=function(){return(0,u.c1)(b).size>0},S=function(e){return(0,u.c1)((0,s.Z)(function(){return(0,d.kv)(b,function(n){return!!(e&&n.has(e.id))})},[e]))},T=function(){return(0,u.$X)(C)},R=function(){return(0,u.$X)(k)},E=(0,i.cn)(new Set),D=(0,i.cn)(null,function(e,n,t){var r=t.message,o=r.id,i=r.loading,l=(0,a.Uy)(e(E),function(e){i?e.add(o):e.delete(o)});n(E,l)}),P=function(){return(0,u.c1)(E).size>0}},84657:function(e,n,t){t.d(n,{Et:function(){return i},Z9:function(){return c},Z_:function(){return a},rM:function(){return u}});var r=t(78094),o=t(90234),i=(0,o.cn)(!1),a=function(){return(0,r.wM)(i)},l=(0,o.cn)(!1),c=function(){return(0,r.wM)(l)},u=function(){return(0,r.$X)(l)}},3590:function(e,n,t){t.d(n,{jC:function(){return u},qy:function(){return l},ub:function(){return c}});var r=t(78094),o=t(90234),i=t(30911),a=t.n(i),l=(0,o.cn)(a()()),c=function(){return(0,r.c1)(l)},u=function(){return(0,r.$X)(l)}},4736:function(e,n,t){t.d(n,{Lv:function(){return l},Tt:function(){return a},ll:function(){return u},yH:function(){return c}});var r=t(78094),o=t(90234),i=(0,o.cn)(null),a=function(){return(0,r.c1)(i)},l=function(){return(0,r.$X)(i)},c=(0,o.cn)(function(e){var n=e(i);return!!n&&n.advancedModelUsage<n.advancedModelLimit}),u=function(){return(0,r.c1)(c)}},90841:function(e,n,t){t.d(n,{Ji:function(){return f},Xy:function(){return d},zU:function(){return s}});var r=t(34142),o=t(87682),i=t(78094),a=t(90234),l=t(43429),c=t(64461),u=(0,a.cn)([]);function s(){var e,n=(0,i.$X)(u);return(0,l.useCallback)((e=(0,r._)(function(e){return(0,o.Jh)(this,function(t){return[2,n(function(n){return(0,c.Uy)(n,function(n){var t=n.findIndex(function(n){return n.path===e.path});-1!==t?n[t]=e:n.push(e)})})]})}),function(n){return e.apply(this,arguments)}),[n])}function d(){return(0,i.c1)(u)}function f(){return(0,i.Dm)(u)}},29217:function(e,n,t){t.d(n,{$0:function(){return s},PM:function(){return h},Rr:function(){return i},U4:function(){return u},e:function(){return l},n3:function(){return f},tV:function(){return a}});var r=t(78094),o=t(90234),i=(0,o.cn)(!1),a=(0,o.cn)(null);function l(){return(0,r.$X)(a)}var c=(0,o.cn)(null),u=function(){return(0,r.c1)(c)},s=function(){return(0,r.$X)(c)},d=(0,o.cn)(null),f=function(){return(0,r.c1)(d)},h=function(){return(0,r.$X)(d)}},78094:function(e,n,t){t.d(n,{$X:function(){return d},Dm:function(){return u},Uu:function(){return l},c1:function(){return s},wM:function(){return c}});var r=t(71999),o=t(28999),i=t(43429),a=t(98372);function l(){var e=(0,i.useContext)(a.W);if(!e)throw Error("Expected store in ghostwriter chat context");return e}function c(e){return(0,r.KO)(e,{store:l()})}function u(e){return(0,o.lV)((0,i.useCallback)(function(n){return n(e)},[e]),{store:l()})}function s(e){return(0,r.Dv)(e,{store:l()})}function d(e){return(0,r.b9)(e,{store:l()})}},10169:function(e,n,t){t.d(n,{B:function(){return d},FF:function(){return s},R$:function(){return f}});var r=t(34142),o=t(87682),i=t(78094),a=t(23394),l=t(54916),c=t(90234),u=t(43429),s=(0,c.cn)("unknown");function d(){var e=(0,l.Z)().dotReplit,n=(0,a.Z)(),t=(0,i.$X)(s);(0,u.useEffect)(function(){function i(){return(i=(0,r._)(function(){var r,i;return(0,o.Jh)(this,function(o){switch(o.label){case 0:return[4,e.getConfig()];case 1:r=o.sent();try{if(i="unknown",i=function(e){if(e.error)return"unknown";var n="unknown";if((null===(r=e.config.interpreter)||void 0===r?void 0:null===(t=r.command)||void 0===t?void 0:t.args)&&(null===(l=e.config.interpreter)||void 0===l||null===(a=l.command)||void 0===a||a.args.forEach(function(e){/nodejs/.test(e)?n="nodejs":/python3/.test(e)&&(n="python3")}),"unknown"!==n)||(null===(o=e.config.run)||void 0===o?void 0:o.args)&&(null===(c=e.config.run)||void 0===c||c.args.forEach(function(e){/vite/.test(e)?n="vite":/node|npm/.test(e)?n="nodejs":/python3/.test(e)&&(n="python3")}),"unknown"!==n))return n;if(null===(i=e.config.packager)||void 0===i?void 0:i.language){var t,r,o,i,a,l,c,u,s=null===(u=e.config.packager)||void 0===u?void 0:u.language;if(/nodejs/.test(s)?n="nodejs":/python3/.test(s)&&(n="python3"),"unknown"!==n)return n}return"unknown"}(r),"unknown"===i){var a;a="unknown",/nodejs|typescript/.test(n)?a="nodejs":/python3/.test(n)&&(a="python3"),i=a}return t(i),[2,i]}catch(e){t("unknown")}return[2]}})})).apply(this,arguments)}return!function(){i.apply(this,arguments)}(),function(){t("unknown")}},[e,n,t])}function f(){return(0,i.c1)(s)}},17137:function(e,n,t){t.d(n,{Z:function(){return C}});var r=t(8182);t(43429);var o=t(49344),i=t(74833),a=t(1498),l=t(56596),c=t(94106),u=t(29287),s=t(36010),d=t.n(s),f=t(45903),h=t(93295),p=t(23982),g=t(77393);function v(){var e=(0,h._)(["\n  query NotAllowedModal {\n    currentUser {\n      id\n      isStaff: hasRole(role: REPLIT_STAFF)\n    }\n  }\n"]);return v=function(){return e},e}var m={},y=(0,p.Ps)(v()),b=t(50782),w=t(30983),x=t(75875),k=(0,t(93918).X)({root:[u.l0.colWithGap(32)],header:[u.l0.rowWithGap(16),u.l0.align.center],body:[u.l0.colWithGap(16)],staffHelpers:[u.l0.colWithGap(8),u.l0.border({color:"var(--accent-negative-default)",width:1,style:"solid"}),u.l0.overflow("hidden")],buttons:[u.l0.rowWithGap(16),u.l0.justify.end]}),C=function(e){var n,t,s=e.isOpen,h=(0,c.useRouter)(),p=(n=(0,f._)({},m,{skip:!s}),g.a(y,n)).data,v=(0,b.Z)(),C=null==p?void 0:null===(t=p.currentUser)||void 0===t?void 0:t.isStaff;return(0,r.tZ)(o.u,{preventClose:!0,isOpen:s,centered:!0,onRequestClose:function(){},maxWidth:600,children:(0,r.BX)(l.G,{css:k.root,children:[(0,r.tZ)(l.G,{css:k.header,children:(0,r.tZ)(i.h4,{css:{width:"fit-content"},level:2,variant:"headerDefault",children:"You can’t run this Repl right now."})}),(0,r.BX)(l.G,{css:k.body,children:[(0,r.BX)(i.xv,{children:["It may be temporarily unavailable or it may have violated our"," ",(0,r.tZ)(d(),{legacyBehavior:!0,href:"/site/terms",children:"Terms of Service"}),"."]}),(0,r.tZ)(i.xv,{children:"If you are the owner of this Repl and believe you should be able to run it, you can try again later or contact support."}),C?(0,r.BX)(l.G,{css:k.staffHelpers,children:[(0,r.BX)(l.G,{css:u.l0.rowWithGap(8),children:[(0,r.tZ)(w.u,{tooltip:"You are seeing this functionality because you have special permissions.",children:(0,r.tZ)(x.Z,{})}),(0,r.tZ)(i.h4,{level:3,children:"Debug Info"})]}),(0,r.tZ)(l.G,{children:(0,r.BX)(i.xv,{children:["Repl ID ",v," is not allowed to run. This is most likely due to a policy takedown."]})}),(0,r.tZ)(l.G,{children:(0,r.BX)(i.xv,{multiline:!1,children:[(0,r.tZ)(d(),{legacyBehavior:!0,href:"https://app.datadoghq.com/logs?query=%40replid%3A".concat(v),children:"All datadog logs"})," ","•"," ",(0,r.tZ)(d(),{legacyBehavior:!0,href:"https://app.datadoghq.com/logs?query=%40replid%3A".concat(v,"+taking+down"),children:"Takedown-specific logs"})]})})]}):null]}),(0,r.BX)(l.G,{css:k.buttons,children:[(0,r.tZ)(a.zx,{text:"Reload",onClick:function(){window.location.reload()}}),(0,r.tZ)(a.zx,{text:"Leave",onClick:function(){h.push("/home","~/")}})]})]})})}},8607:function(e,n,t){var r=t(8182);t(43429);var o=t(49344),i=t(74833),a=t(1498),l=t(56596),c=t(94106),u=t(18931),s=t(29287),d=t(93918),f=t(56337),h=t(2038),p=(0,d.X)({root:[s.l0.colWithGap(16)],header:[s.l0.rowWithGap(16),s.l0.align.center],body:[s.l0.pr(32),s.l0.colWithGap(16)],buttonRow:[s.l0.rowWithGap(16)],button:[s.l0.flex.growAndShrink(1)]});n.Z=function(e){var n=e.isOpen,t=(0,c.useRouter)(),s=(0,h.Vg)(t),d=(0,f.Z)();return(0,r.tZ)(o.u,{preventClose:!0,isOpen:n,centered:!0,onRequestClose:function(){},maxWidth:600,children:(0,r.BX)(l.G,{css:p.root,children:[(0,r.BX)(l.G,{css:p.header,children:[(0,r.tZ)(u.Z,{size:24}),(0,r.tZ)(i.h4,{css:{width:"fit-content"},level:2,variant:"headerDefault",children:"Please Refresh"})]}),(0,r.BX)(l.G,{css:p.body,children:[(0,r.tZ)(i.xv,{children:"Your connection to this Repl has been temporarily interrupted. Usually this is because of a network issue. Please refresh."}),s?(0,r.tZ)(i.xv,{children:"If the issue continues please logout and re-login."}):null]}),(0,r.BX)(l.G,{css:p.buttonRow,children:[s||d?null:(0,r.tZ)(a.zx,{css:p.button,text:"Leave",onClick:function(){t.push("/home","~/")}}),(0,r.tZ)(a.zx,{text:"Refresh",colorway:"primary",css:p.button,onClick:function(){window.location.reload()}})]})]})})}},59716:function(e,n,t){t.d(n,{y:function(){return eB}});var r,o=t(39698),i=t(45903),a=t(25e3),l=t(32477),c=t(8182),u=t(56596),s=t(64461),d=t(43429),f=t(29287),h=t(80502),p=t(7444),g=t(26508),v=t(14675),m=t(95571),y=t(93918),b=t(31384),w=t(19562),x=t(91608),k={noScroll:!0};function C(e){for(var n=1,t=e.buffer.active._buffer.lines._array,r=e.buffer.active.length;r-- >0;){var o=t[r];if(o){for(var i=!1,a=0;a<e.cols;a++)if(0!==o.hasContent(a)){i=!0;break}if(i){n=r+1;break}}}return n}var Z=(0,x.$)(["topOffset"]),S=Z.cssVars,T=Z.styleTokens,R=(0,y.X)({wrapper:{display:"grid"},terminal:{gridRow:1,gridColumn:1,position:"sticky",top:T.topOffset,"& .xterm":[f.l0.py(8),f.l0.pl(8),f.l0.height("100%"),f.l0.overflow("hidden")],"& .xterm-viewport":[f.l0.overflow("hidden")],"& .xterm-scroll-area":{height:"0px !important"}},searchWidget:{gridRow:1,gridColumn:1,position:"sticky",top:T.topOffset,height:30,margin:"2px 0 0 auto",zIndex:4}});function E(e){var n=e.onMessage,t=e.onInput,r=e.openFile,o=e.openAIWithMessage,i=e.openSearchAndReplace,a=e.openWebview,s=e.listFiles,f=e.autoFocus,y=e.maxHeight,x=e.onResizeTerminal,Z=e.scrollPosition,S=e.scrollParent,T=(0,l._)((0,h.Z)({autoFit:!1,size:{rows:10},openFile:r,listFiles:s,openWebview:a}),2),E=T[0],D=T[1],P=(0,d.useMemo)(function(){return null==E?void 0:E._term},[E]),_=(0,d.useMemo)(function(){var e,n=null==P?void 0:P._core;return null!==(e=null==n?void 0:n._renderService.dimensions.css.cell)&&void 0!==e?e:{width:0,height:0}},[P]),A=(0,l._)((0,d.useState)(!1),2),L=A[0],I=A[1],q=(0,l._)((0,d.useState)("normal"),2),M=q[0],B=q[1],G=(0,l._)((0,d.useState)(1),2),F=G[0],W=G[1],U=(0,l._)((0,d.useState)(1),2),X=U[0],N=U[1],O=(0,l._)((0,d.useState)(!1),2),z=O[0],H=O[1],j=(0,l._)((0,d.useState)(!1),2),V=j[0],K=j[1],Y=(0,l._)((0,d.useState)(""),2),$=Y[0],J=Y[1],Q=(0,p.Z)(F),ee=(0,p.Z)(X),en=(0,p.Z)(z),et=(0,p.Z)(M),er=(0,d.useMemo)(function(){return Math.floor((y-16)/_.height)},[y,_.height]),eo=(0,d.useRef)(null);(0,d.useEffect)(function(){return function(){Q.current=1,ee.current=1,en.current=!1,et.current="normal",null!==eo.current&&clearTimeout(eo.current)}},[Q,ee,en,et,eo]);var ei=(0,g.Z)(function(e){var n=e.widthChanged;E&&P&&n&&E.fit()},{type:"debounce",wait:200});(0,d.useLayoutEffect)(function(){E&&E.fit()},[E]),(0,d.useLayoutEffect)(function(){f&&E&&E.focus()},[E,f]),(0,d.useEffect)(function(){if(E){var e=E.onData(function(e){t(e)}),n=E.onResize(function(){x(E.getSize())});return function(){e.dispose(),n.dispose()}}},[E,t,x]),(0,d.useEffect)(function(){if(P){var e=P.buffer.onBufferChange(function(e){B(e.type),"alternate"===e.type&&(W(er),N(er),H(!1))});return function(){e.dispose()}}},[P,er]),(0,d.useEffect)(function(){var e=function(){if(P&&"alternate"!==et.current){var e=P.buffer.active.cursorY,n=P.buffer.active.viewportY,t=C(P);t!==ee.current&&N(t),e>Q.current&&W(e),n>0&&!1===en.current&&H(!0)}};if(P){var n=[P.onLineFeed(e),P.onCursorMove(e)];return function(){n.forEach(function(e){return e.dispose()})}}},[P,Q,en,et,ee,er]),(0,d.useEffect)(function(){if(P&&E){if(E.getSize().rows!==er&&P.resize(P.cols,er),"alternate"===et.current)W(er);else{var e=C(P);e!==ee.current&&N(e),er<e?W(er):e<er&&W(e)}}},[P,E,er,x,W,et,ee]),(0,d.useEffect)(function(){if(E)return n(function(e){return E.write(e)})},[n,E]);var ea=(0,d.useMemo)(function(){return(Math.min(F,X)+1)*_.height+16},[F,X,_]),el=(0,d.useMemo)(function(){return z?(X+1)*_.height+16:ea},[_,z,ea,X]);(0,d.useEffect)(function(){if(P){if(Z<1||!z){P.scrollToLine(0);return}var e=el-ea,n=X-F;if(e<1){P.scrollToLine(0);return}P.scrollToLine(Math.round(Z/e*n))}},[Z,_,P,z,el,ea,F,X]);var ec=(0,d.useCallback)(function(){if(P){var e=P.getSelectionPosition();e&&S(e.start.y*_.height-y/2)}},[P,_.height,y,S]),eu=(0,b.av)().onContextMenu,es=(0,w.j)({xterm:E,isOutputsTerminal:!0,openAIWithMessage:o,openShellSearch:function(e){K(!0),J(e)},openSearchAndReplace:i});return(0,c.tZ)(u.G,{innerRef:ei,children:(0,c.BX)(u.G,{css:R.wrapper,style:{height:el,pointerEvents:L?"none":"all"},onWheel:function(){I(!0),eo.current&&clearTimeout(eo.current),eo.current=setTimeout(function(){I(!1)},200)},onKeyDown:function(e){"f"===e.key&&(0,m.j)(e)&&(K(!0),e.preventDefault())},children:[V?(0,c.tZ)(u.G,{css:R.searchWidget,children:(0,c.tZ)(v.R,{searchValue:$,setSearchValue:J,findPrevious:function(e){(null==E?void 0:E.findPrevious(e,k))&&ec()},findNext:function(e){(null==E?void 0:E.findNext(e,k))&&ec()},exit:function(){return K(!1)}})}):null,(0,c.tZ)(u.G,{style:{height:ea,maxHeight:y},css:R.terminal,onContextMenu:function(e){return eu(e,{command:es})},innerRef:D})]})})}var D=t(52902),P=t(18107),_=t(27592),A=t(6187),L=t(58200),I=t(8279),q=t(23291),M=t(1128),B=t(20573),G=t(32377),F=t(30983),W=t(74833),U=t(83109),X=t(15146),N=t(47507),O=/(((\w+Error)|(Error)): (.*)\r\n((?:\s+at .*\r\n)+))|(\/home\/runner(.*):\d+\r\n[\s\S]*((\w+Error)|(Error)): (.*)\r\n)/g,z=/(Traceback.*\r\n)?( +File.*(\r\n.*){1,2})*\r\n.*((\wError:)|(Exception:)).*/g,H=["abort","error","exception","fail","fatal","panic","traceback"].map(function(e){return"[".concat(e[0].toLowerCase()).concat(e[0].toUpperCase(),"]").concat(e.slice(1))}).join("|"),j=RegExp("(.*(".concat(H,")(.*\\r\\n)+?\\x1b\\[31m(.|\\r\\n)*?\\x1b\\[[0-9;]*m)|(.*\\x1b\\[31m.*?(").concat(H,")(.|\\r\\n)*?\\x1b\\[[0-9;]*m.*)"),"g"),V=/\x1b\[[0-9;]*[A-Za-z]/g,K=t(10169);function Y(e,n){var t=(0,K.R$)(),r=(0,l._)((0,d.useState)(null),2),o=r[0],i=r[1],a=(0,l._)((0,d.useState)(""),2),c=a[0],u=a[1];return(0,d.useEffect)(function(){return n(function(e){u(function(n){return(n+e).slice(-2400)})})},[n]),(0,d.useEffect)(function(){var n=setTimeout(function(){var n,r=t;if("unknown"===r){var o,a=null===(o=e.configs.current)||void 0===o?void 0:o.entrypoint;(null==a?void 0:a.endsWith(".js"))?r="nodejs":(null==a?void 0:a.endsWith(".py"))&&(r="python3")}i((n=r,c&&function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unknown";return"nodejs"===n?null!==e.match(O):"python3"===n?null!==e.match(z):null!==e.match(j)}(c,n)?function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unknown",t=e.replace(V,""),r=null;return(r="nodejs"===n?t.match(O):"python3"===n?t.match(z):e.match(j))?r[r.length-1].replace(V,""):(N.kg.error("Ghostwriter Chat Debugger had no error - this should not have happened",{errorBuffer:e,interpreter:n}),"")}(c,n):null))},100);return function(){clearTimeout(n)}},[c,t,e]),{parsedError:o}}var $=t(83898),J=t(73030),Q=t(77804),ee=t(40028),en=t(9331),et=t(99741),er=t(37770),eo=t(56378),ei=t(37463),ea=t(35375),el=t(25425),ec=t(1498),eu=t(73157),es=t(17216);function ed(e){return e&&0!==e.length?e[0].toUpperCase()+e.substring(1).toLowerCase():""}var ef=(0,y.X)({outputBlockMetadataWrapper:[{containerType:"size"},f.l0.pl(4),f.l0.pr(8),f.l0.rowWithGap(4),f.l0.align.center,f.l0.justify.spaceBetween,f.l0.height(28),f.l0.backgroundColor.backgroundDefault,f.l0.border({direction:"bottom",width:1,style:"solid",color:f.TV.backgroundHigher}),f.l0.position.sticky,f.l0.top(0),f.l0.zIndex(1)],outputBlockMetadataWrapperLeft:[f.l0.rowWithGap(4),f.l0.align.center,f.l0.flex.shrink(1)],outputBlockMetadataWrapperRight:[f.l0.rowWithGap(4),f.l0.align.center],executionPill:[f.l0.flex.shrink(0),f.l0.display.flex,{"@container (max-width: 200px)":[f.l0.display.none]}],ghostwriterDebuggerButton:[f.l0.flex.shrink(0),{"@container (max-width: 400px)":{padding:"0 4px","& > span":[f.l0.display.none],"& > svg":[f.l0.mr(0)]}}],lastLineTextWrapper:[f.l0.flex.shrink(1)],lastLineText:[f.l0.display.block,f.l0.maxWidth("100%"),f.l0.overflow("hidden"),f.l0.font.code,f.l0.flex.shrink(1),{textOverflow:"ellipsis",whiteSpace:"nowrap"}],dateText:[f.l0.flex.row,{"@container (max-width: 240px)":[f.l0.display.none]}],verticalDivider:[f.l0.mx(6),{width:1,height:28,background:f.TV.backgroundHigher}],portInfoDomain:[f.l0.display.flex,f.l0.flex.row,f.l0.align.center,f.l0.m(0),{"@container (max-width: 400px)":f.l0.display.none}],portInfoPorts:[f.l0.display.flex,f.l0.flex.row,f.l0.align.center,f.l0.m(0),{"@container (max-width: 300px)":f.l0.display.none}],portTooltipHeader:[f.l0.color.foregroundDimmer,f.l0.fontWeight.normal,f.l0.px(2),f.l0.pb(2)],portTooltipColumnLeft:[f.l0.textAlign.right],portTooltipColumnMiddle:[f.l0.textAlign.center,f.l0.px(4)]}),eh=(r={},(0,o._)(r,P.kH.DEBUGGER,"debugger"),(0,o._)(r,P.kH.PACKAGER,"packager"),(0,o._)(r,P.kH.UNIT_TEST,"tests"),(0,o._)(r,P.kH.EXECUTION,"run"),(0,o._)(r,P.kH.PORT_INFO,"port"),(0,o._)(r,P.kH.FORMATTER,"formatter"),r);function ep(e){var n=e.parsedError,t=e.openPane,r=(0,$.ql)();return(0,c.tZ)(er.T,{iconLeft:(0,c.tZ)(J.Z,{}),text:"Debug with AI",onClick:function(){n&&(t({type:"ghostwriterChat"}),r({chatMessage:{type:"debugger",errorType:"console",text:(0,Q.Vh)(n,"debugger")}}))},colorway:"blurple",css:ef.ghostwriterDebuggerButton})}function eg(e){var n=e.openedPorts;return(0,c.tZ)(u.G,{children:(0,c.BX)("table",{children:[(0,c.BX)("tr",{children:[(0,c.tZ)("th",{css:ef.portTooltipHeader,children:"Internal"}),(0,c.tZ)("th",{}),(0,c.tZ)("th",{css:ef.portTooltipHeader,children:"External"})]}),(0,c.tZ)("tbody",{children:n.map(function(e){var n=e.configuration,t=!0,r=null;switch(n.type){case ea.DL.FORWARDED:t=!0,r=":".concat(n.externalPort);break;case ea.DL.INTERNAL_ONLY:t=!1,r=null;break;case ea.DL.NO_MORE_EXTERNAL_PORTS_AVAILABLE:case ea.DL.MISCONFIGURED:case ea.DL.CONFIG_MISSING:t=!0,r=(0,c.tZ)(B.Z,{})}return(0,c.BX)("tr",{children:[(0,c.BX)("td",{css:ef.portTooltipColumnLeft,children:[":",n.localPort]}),(0,c.tZ)("td",{css:ef.portTooltipColumnMiddle,children:t?"→":null}),(0,c.tZ)("td",{children:r})]},n.localPort)})})]})})}function ev(e){var n=e.isDone,t=e.error,r=e.finishedTooltipText,o=e.executionPillText,i=e.runningTooltipText,a=e.circleColor,l=void 0===a?f.TV.accentPositiveDefault:a,s=e.duration,d=e.time,h=e.ghostwriterParsedError,p=e.openPane,g=e.isCollapsed,v=e.setIsCollapsed,m=e.lastMeaningfullLine,y=e.renderDebugWithAI,b=e.openedPorts,w=e.renderPortsIntegration,x=(0,U.Z)(new Date(d),"HH:mm:ss, MM/dd"),k=y&&!!h,C=void 0!==t||!!h,Z=(0,el.P5)({controlName:"flag-dot-dev-url",logFlagToAnalytics:!1}),S=void 0!==b&&b.length>0,T="";return S&&(T=1===b.length?":".concat(b[0].configuration.localPort):"".concat(b.length," ").concat((0,eu.Z)("port",b.length))),(0,c.BX)(u.G,{css:ef.outputBlockMetadataWrapper,onDoubleClick:function(){return v(!g)},children:[(0,c.BX)(u.G,{css:ef.outputBlockMetadataWrapperLeft,onDoubleClick:function(e){return e.stopPropagation()},children:[(0,c.tZ)(X.hU,{alt:g?"Expand":"Collapse",onClick:function(){return v(!g)},children:g?(0,c.tZ)(en.Z,{}):(0,c.tZ)(et.Z,{})}),(0,c.tZ)(q.D,{color:"grey",text:ed(o),css:ef.executionPill}),k?(0,c.tZ)(ep,{parsedError:h,openPane:p}):null,(0,c.tZ)(u.G,{css:ef.lastLineTextWrapper,children:g?(0,c.tZ)(W.xv,{css:ef.lastLineText,variant:"small",children:m}):null})]}),(0,c.BX)(u.G,{css:ef.outputBlockMetadataWrapperRight,onDoubleClick:function(e){return e.stopPropagation()},children:[w&&S?(0,c.BX)(c.HY,{children:[(0,c.BX)(u.G,{css:ef.portInfoDomain,children:[(0,c.tZ)(W.xv,{color:"dimmer",css:f.l0.mr(0),children:(0,c.tZ)(F.u,{tooltip:"Open Webview",children:(0,c.tZ)(ec.zx,{size:"small",variant:"underlinedOnHover",text:S?"{...}.".concat(Z?"replit.dev":"repl.co"):"",onClick:function(){p({type:"webview",data:S?{portType:"local",port:b[0].configuration.localPort}:void 0},!0)}})})}),(0,c.tZ)(u.G,{css:ef.verticalDivider})]}),(0,c.BX)(u.G,{css:ef.portInfoPorts,children:[(0,c.tZ)(W.xv,{color:"dimmer",css:f.l0.mr(0),children:(0,c.tZ)(F.u,{tooltip:(0,c.tZ)(eg,{openedPorts:b}),children:(0,c.tZ)(ec.zx,{size:"small",variant:"underlinedOnHover",iconLeft:(0,c.tZ)(es.Z,{color:f.TV.accentPositiveStronger}),text:T,onClick:function(){p({type:"networking"},!0)}})})}),(0,c.tZ)(u.G,{css:ef.verticalDivider})]})]}):null,(0,c.BX)(W.xv,{color:"dimmer",variant:"small",css:ef.dateText,children:[s?(0,c.tZ)(F.u,{tooltip:"".concat(Math.round(s).toLocaleString(),"ms"),children:s<1e3?"".concat(Math.floor(s),"ms"):s<6e4?"".concat(Math.floor(s/1e3),"s"):"".concat(Math.floor(s/6e4),"m")}):null,s?"".concat("\xa0","on").concat("\xa0"):null,x]}),n?(0,c.tZ)(F.u,{tooltip:r,children:C?(0,c.tZ)(B.Z,{}):(0,c.tZ)(G.Z,{})}):(0,c.tZ)(F.u,{tooltip:void 0===i?"Running...":i,children:(0,c.tZ)(M.Z,{color:l})})]})]})}function em(e){var n,t,r=e.isCollapsed,o=e.setIsCollapsed,i=e.openPane,a=e.startTime,l=e.endTime,u=e.localStartTime,s=e.localEndTime,d=e.isDone,f=e.data,h=e.error,p=e.toolchain,g=e.ports,v=e.renderDebugWithAI,m=e.renderPortsIntegration,y=eb(!d),b=Y(p,f.onMessage).parsedError,w=ew(f.onMessage),x=(0,ei.r4)(g,f.cgroup);a&&l?n=l-a:!d&&u?n=y-u:d&&s&&(n=s-u);var k="Finished";return(void 0!==h||b)&&(k=void 0!==h?ed(h):"Finished with error"),(0,c.tZ)(ev,{isDone:d,error:h,finishedTooltipText:k,ghostwriterParsedError:b,executionPillText:null!==(t=f.executionMode)&&void 0!==t?t:"unknown",duration:n,time:null!=a?a:u,lastMeaningfullLine:w,openPane:i,isCollapsed:r,setIsCollapsed:o,renderDebugWithAI:v,openedPorts:x,renderPortsIntegration:m})}function ey(e){var n,t=e.isCollapsed,r=e.setIsCollapsed,o=e.openPane,i=e.localStartTime,a=e.localEndTime,l=e.isDone,u=e.type,s=e.error,d=e.data,h=e.toolchain,p=e.renderDebugWithAI,g=eb(!l),v=Y(h,d.onMessage),m=ew(d.onMessage),y=eh[u],b=s?(0,c.BX)(W.xv,{multiline:!0,children:[ed(eh[u])," error",(0,c.tZ)("br",{}),s]}):"Finished",w=f.TV.accentPositiveDefault,x="Running...";if(u===P.kH.DEBUGGER){var k=d.debugState;w="paused"===k?f.TV.yellowDefault:f.TV.accentPositiveDefault,x="paused"===k?"Paused":"Running..."}return a?n=a-i:!l&&i&&(n=g-i),(0,c.tZ)(ev,{isCollapsed:t,setIsCollapsed:r,openPane:o,isDone:l,finishedTooltipText:b,executionPillText:y,duration:n,time:i,circleColor:w,runningTooltipText:x,ghostwriterParsedError:v.parsedError,lastMeaningfullLine:m,renderDebugWithAI:p,error:s})}function eb(e){var n=(0,l._)((0,d.useState)(function(){return Date.now()}),2),t=n[0],r=n[1];return(0,d.useEffect)(function(){if(e){var n=setInterval(function(){r(Date.now())},100);return function(){clearInterval(n)}}},[e]),t}function ew(e){var n=(0,l._)((0,d.useState)(""),2),t=n[0],r=n[1];return(0,d.useEffect)(function(){return e(function(e){var n,t=null===(n=(0,eo.Z)(e).split("\n").reverse().find(function(e){return e.trim().length>0}))||void 0===n?void 0:n.trim();t&&r(t)})}),t}function ex(e){var n=e.isCollapsed,t=e.setIsCollapsed,r=e.openPane,o=e.isDone,i=e.type,a=e.data,l=e.error,u=e.localStartTime,s=e.localEndTime,d=e.startTime,f=e.endTime,h=e.toolchain,p=e.renderDebugWithAI,g=e.ports,v=e.renderPortsIntegration;switch(i){case P.kH.EXECUTION:return(0,c.tZ)(em,{isCollapsed:n,setIsCollapsed:t,openPane:r,isDone:o,type:i,startTime:d,endTime:f,localStartTime:u,localEndTime:s,data:a,error:l,toolchain:h,renderDebugWithAI:p,ports:g,renderPortsIntegration:v});case P.kH.DEBUGGER:case P.kH.PACKAGER:case P.kH.UNIT_TEST:case P.kH.FORMATTER:return(0,c.tZ)(ey,{isCollapsed:n,setIsCollapsed:t,openPane:r,isDone:o,type:i,localStartTime:u,localEndTime:s,data:a,error:l,toolchain:h,renderDebugWithAI:p,ports:g,renderPortsIntegration:v});default:(0,ee.Z)(i)}}var ek=t(41084),eC=t(917),eZ=t(5621),eS=t(2038),eT=t(27187),eR=(0,y.X)({emptyStateWrapper:[f.l0.p(8),f.l0.display.block,{lineHeight:"32px"}],simpleRunButtonWrapper:[f.l0.rowWithGap(6),f.l0.backgroundColor.accentPositiveDimmest,f.l0.color.accentPositiveStrongest,f.l0.align.center,f.l0.borderRadius(8),f.l0.py(2),f.l0.px(6),f.l0.mx(4),f.l0.cursor.pointer,{"&:hover":[f.l0.color.white,f.l0.backgroundColor.accentPositiveDefault]}]});function eE(e){var n=e.runner;return(0,c.tZ)(u.G,{tag:"span",style:{display:"inline-block"},children:(0,c.BX)(u.G,{tag:"button",onClick:function(){return n.run()},css:eR.simpleRunButtonWrapper,children:[(0,c.tZ)(eT.Z,{size:12}),(0,c.tZ)(W.xv,{children:"Run"})]})})}function eD(e){var n=e.runner,t=(0,l._)((0,d.useState)(function(){return n.getRunState()}),2),r=t[0],o=t[1];return((0,d.useEffect)(function(){var e=n.onStateChanged(function(e){o(e)});return function(){return e()}},[n]),r===P.Ah.OFFLINE)?(0,c.tZ)(u.G,{css:eR.emptyStateWrapper,children:"The Repl is booting..."}):r===P.Ah.RUNNING||r===P.Ah.BEFORE_RUN?(0,c.tZ)(u.G,{css:eR.emptyStateWrapper,children:"Running..."}):(0,c.BX)(u.G,{css:eR.emptyStateWrapper,children:["Results of your code will appear here when you"," ",(0,c.tZ)(eE,{runner:n})," the project."]})}var eP=t(32911),e_=(0,x.$)(["blockMinHeight","terminalBackgroundColor","previewHeight"]),eA=e_.cssVars,eL=e_.styleTokens,eI=(0,y.X)({outputsListParent:[f.l0.height("100%"),f.l0.overflow("hidden"),f.l0.borderRadius(0,0,8,8)],outputsListWrapper:[f.l0.height("100%")],outputsList:[f.l0.height("100%"),f.l0.overflowY("scroll")],outputsListSnapToBottom:{scrollSnapType:"y mandatory"},scrollSnap:[f.l0.height(1),{marginTop:-1,pointerEvents:"none",scrollSnapAlign:"end"}],outputBlockCollapsingWrapper:[f.l0.minHeight(eL.blockMinHeight)],outputBlockTerminalWrapper:[f.l0.minHeight(eL.blockMinHeight),{backgroundColor:eL.terminalBackgroundColor}],outputBlockClosingBorder:[f.l0.height(1),f.l0.zIndex(1),f.l0.border({direction:"bottom",width:1,style:"solid",color:f.TV.backgroundHigher}),{marginTop:-1}],terminalLoadingWrapper:[f.l0.p(8),f.l0.height(eL.previewHeight)],terminalLoadingLine:[f.l0.borderRadius(2),I.p.foregroundPulse(),f.l0.height(16),f.l0.mb(4)]});function eq(e){var n=e.targetHeight,t=Math.min(Math.floor((n-8)/20),4),r=(0,d.useMemo)(function(){return Array.from({length:t}).map(function(e,n){return(0,c.tZ)(u.G,{css:[eI.terminalLoadingLine],style:{width:100*Math.random()+"%"}},n)})},[t]);return(0,c.tZ)(u.G,{css:eI.terminalLoadingWrapper,style:(0,o._)({},eA.previewHeight,n+"px"),children:(0,c.tZ)(u.G,{style:{position:"sticky",top:36},children:r})})}function eM(e){var n,t,r,s,f,h,p,v,m,y,b,w,x,k,C,Z,T,R,D,I=e.onInput,q=e.openFile,M=e.openPane,B=e.openAIWithMessage,G=e.openSearchAndReplace,F=e.listFiles,W=e.autoFocus,U=e.rootRef,X=e.maxHeight,N=e.onResizeTerminal,O=e.isDone,z=e.data,H=e.error,j=e.localStartTime,V=e.localEndTime,K=e.startTime,Y=e.endTime,$=e.type,J=e.toolchain,Q=e.renderDebugWithAI,ee=e.visualState,en=e.onSetVisualState,et=e.ports,er=e.renderPortsIntegration,eo=(0,d.useRef)(null),ea=(0,l._)((0,d.useState)(!0),2),el=ea[0],ec=ea[1],eu=(0,l._)((0,d.useState)(!1),2),es=eu[0],ed=eu[1],ef=(0,l._)((0,d.useState)(0),2),eh=ef[0],ep=ef[1],eg=(0,L.f)(),ev=(0,A.Z)(el,es?6e4:500),em=(0,ei.r4)(et,$===P.kH.EXECUTION?z.cgroup:void 0),ey=(0,l._)((0,d.useState)(0),2),eb=ey[0],ew=ey[1],ek=(0,d.useCallback)(function(e,n){M({type:"webview",data:{portType:"local",path:e,port:n}},!0)},[M]),eC=(t=(n={maxHeight:X,visualState:ee,onSetVisualState:en}).visualState,r=n.onSetVisualState,s=n.maxHeight,h=(f=(0,l._)((0,d.useState)(0),2))[0],p=f[1],v=(0,d.useRef)(null),y=(m=(0,l._)((0,d.useState)(t===P.MZ.EXPANDED?"expanded":"collapsed"),2))[0],b=m[1],x=(w=(0,l._)((0,d.useState)(void 0),2))[0],k=w[1],C=(0,g.Z)(function(e){var n=e.height;"expanded"===y&&p(n)},{type:"debounce",wait:200}),(0,d.useEffect)(function(){if(v.current)switch(y){case"start-collapsing":b("is-collapsing");break;case"is-collapsing":k(0);break;case"start-expanding":b("is-expanding");break;case"is-expanding":k(h);break;case"expanded":k(void 0)}},[y,h]),Z="expanded"!==y&&"is-expanding"!==y,T=(0,d.useCallback)(function(e){r(e?P.MZ.COLLAPSED:P.MZ.EXPANDED)},[r]),R=(0,d.useRef)(t),(0,d.useEffect)(function(){R.current===P.MZ.EXPANDED&&t===P.MZ.COLLAPSED&&v.current&&(b("start-collapsing"),k(Math.min(v.current.getBoundingClientRect().height,s)),b("start-collapsing")),R.current===P.MZ.COLLAPSED&&t===P.MZ.EXPANDED&&b("start-expanding"),R.current=t},[s,t]),{collapsedStep:y,isCollapsed:Z,setIsCollapsed:T,blockWrapperRef:v,blockWrapperProps:{style:{height:x,transition:"height 120ms ease-out",overflow:"expanded"===y||"start-collapsing"===y?"visible":"hidden"},onTransitionEnd:function(){"is-collapsing"===y&&b("collapsed"),"is-expanding"===y&&b("expanded")}},blockResizeRef:C,measuredBlockHeight:h}),eZ=eC.collapsedStep,eS=eC.isCollapsed,eT=eC.setIsCollapsed,eR=eC.blockWrapperRef,eE=eC.blockWrapperProps,eD=eC.blockResizeRef,e_=eC.measuredBlockHeight;(0,d.useEffect)(function(){if(U.current){var e,n=U.current,t=function(){var t,r;ep(Math.max(0,n.scrollTop-(null!==(r=null===(t=eo.current)||void 0===t?void 0:t.offsetTop)&&void 0!==r?r:0))),ed(!0),e&&clearTimeout(e),e=setTimeout(function(){ed(!1)},500)};return n.addEventListener("scroll",t),function(){clearInterval(e),n.removeEventListener("scroll",t)}}},[U,eo]),(0,d.useEffect)(function(){if(eo.current&&U.current)return(0,_.j)(eo.current,function(){return ec(!0),function(){ec(!1)}},{root:U.current,threshold:0})},[U,eo]);var eL=(0,g.Z)(function(e){var n=e.height;"expanded"===eZ&&ew(n)},{type:"debounce",wait:200}),eM=!1;return"collapsed"===eZ?eM=!1:(!O||ev)&&(eM=!0),(0,c.BX)(u.G,{innerRef:eo,children:[(0,c.tZ)(ex,{isCollapsed:eS,setIsCollapsed:eT,openPane:M,isDone:O,data:z,localStartTime:j,localEndTime:V,startTime:K,endTime:Y,type:$,error:H,toolchain:J,renderDebugWithAI:Q,ports:et,renderPortsIntegration:er}),er?(0,c.tZ)(u.G,{innerRef:eL,style:{position:"sticky",top:28},children:(0,c.tZ)(eP.ms,{configurations:em.map(function(e){return e.configuration}),openWebview:function(){ek("/",em[0].configuration.localPort)},openNetworkingTool:function(){M({type:"networking"},!0)}})}):null,(0,c.tZ)("div",(0,a._)((0,i._)({ref:eR},eE),{children:(0,c.tZ)(u.G,{css:eI.outputBlockTerminalWrapper,style:(D={},(0,o._)(D,eA.blockMinHeight,e_+"px"),(0,o._)(D,eA.terminalBackgroundColor,null==eg?void 0:eg.background),(0,o._)(D,S.topOffset,28+eb+"px"),D),children:eM?(0,c.tZ)(u.G,{innerRef:eD,children:(0,c.tZ)(E,{onMessage:z.onMessage,onInput:I,openFile:q,openAIWithMessage:B,openSearchAndReplace:G,openWebview:ek,listFiles:F,maxHeight:X-28-eb,onResizeTerminal:N,scrollPosition:eh,scrollParent:function(e){var n,t,r,o=e+(null!==(r=null===(n=eo.current)||void 0===n?void 0:n.offsetTop)&&void 0!==r?r:0);null===(t=U.current)||void 0===t||t.scrollTo({top:o})},autoFocus:W})}):(0,c.tZ)(eq,{targetHeight:e_})})})),(0,c.tZ)(u.G,{css:eI.outputBlockClosingBorder})]})}function eB(e){var n=e.performPaneOperation,t=e.isActive,r=e.runner,o=e.toolchain,i=e.ports,a=e.listFiles,f=e.renderEmptyStateMessage,h=e.renderDebugWithAI,p=void 0===h||h,v=e.renderSearchAndReplaceContextMenu,m=void 0===v||v,y=e.renderPortsIntegration,b=void 0===y||y,w=e.sendGhostwriterChatMessage,x=(0,l._)((0,d.useState)([]),2),k=x[0],C=x[1],Z=(0,l._)((0,d.useState)(0),2),S=Z[0],T=Z[1],R=(0,l._)((0,d.useState)(!0),2),E=R[0],_=R[1],A=(0,d.useRef)(null),L=(0,ek.Z)(eC.y.Output),I=(0,l._)((0,d.useState)(!1),2),q=I[0],M=I[1],B=(0,d.useRef)(0),G=(0,eS.T3)(),F=(0,g.Z)(function(e){T(e.height)},{type:"throttle",wait:200}),W=(0,d.useCallback)(function(e){n({operation:"open",secondary:!0,pane:{type:(0,D.Dp)(e),data:e}})},[n]),U=(0,d.useCallback)(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];n({operation:"open",secondary:t,pane:e})},[n]),X=(0,d.useCallback)(function(e){n({operation:"open",secondary:!0,pane:{type:"searchReplace",data:{initialQuery:e}}})},[n]),N=(0,d.useCallback)(function(e){w({chatMessage:e}),n({operation:"open",secondary:!0,pane:{type:"ghostwriterChat"}})},[n,w]);return(0,d.useEffect)(function(){return r.onStateChanged(function(e){M(e===P.Ah.BEFORE_RUN)})},[r]),(0,d.useEffect)(function(){C(r.getOutputBlocks())},[r]),(0,d.useEffect)(function(){var e=r.onAllBlocksChanged(function(e){C(e)}),n=r.onBlockChanged(function(e){!k.find(function(n){return n.id===e.id})&&A.current&&(A.current.scrollTo(0,A.current.scrollHeight),_(!0)),C((0,s.Uy)(function(n){var t=n.findIndex(function(n){return n.id===e.id});t>=0?n[t]=e:n.push(e)}))});return function(){n(),e()}},[r,k,A]),(0,c.BX)(u.G,{css:eI.outputsListParent,innerRef:L,children:[q?(0,c.tZ)(eZ.Z,{}):null,(0,c.BX)(u.G,{css:eI.outputsListWrapper,innerRef:F,children:[0===k.length&&(void 0===f||f)?(0,c.tZ)(eD,{runner:r}):null,(0,c.BX)(u.G,{css:[eI.outputsList,E&&eI.outputsListSnapToBottom],innerRef:A,onScroll:function(){A.current&&(A.current.scrollTop<B.current?_(!1):_(A.current.scrollHeight-A.current.scrollTop-20<S),B.current=A.current.scrollTop)},children:[k.map(function(e,n){var l=n===k.length-1;return(0,c.tZ)(eM,{rootRef:A,maxHeight:S,onInput:r.sendInput,openFile:W,openAIWithMessage:p?N:void 0,openSearchAndReplace:m?X:void 0,openPane:U,listFiles:a,onResizeTerminal:function(n){e.isDone||e.type!==P.kH.EXECUTION||r.resizeTerminalForBlock(e.id,n)},autoFocus:t&&l&&!G,isDone:e.isDone,type:e.type,error:e.error,visualState:e.visualState,onSetVisualState:function(n){return r.setBlockVisualState(e.id,n)},localStartTime:e.localStartTime,localEndTime:e.localEndTime,startTime:e.startTime,endTime:e.endTime,data:e.data,toolchain:o,renderDebugWithAI:p,ports:i,renderPortsIntegration:b},e.id)}),E?(0,c.tZ)(u.G,{css:eI.scrollSnap}):null]})]})]})}},32911:function(e,n,t){t.d(n,{ms:function(){return P}});var r=t(32477),o=t(8182),i=t(56596),a=t(35375),l=t(40028),c=t(74833),u=t(1498),s=t(15146),d=t(58003),f=t(58719),h=t(93918),p=t(29287),g=t(66985),v=t(43429),m=t(25425),y=t(73157),b=t(50494),w=(0,h.X)({wrapper:[p.l0.py(6),p.l0.flex.row,p.l0.align.center,p.l0.backgroundColor.accentPrimaryDimmest],wrapperWarning:[p.l0.py(6),p.l0.flex.row,p.l0.align.center,p.l0.backgroundColor.orangeDimmest],body:[p.l0.flex.growAndShrink(1)],firstLine:[p.l0.px(6),p.l0.rowWithGap(2),p.l0.align.center,p.l0.flex.wrap,p.l0.maxWidth("100%"),p.l0.overflow("hidden")],secondLine:[p.l0.px(6),p.l0.rowWithGap(2),p.l0.align.center,p.l0.flex.wrap,p.l0.maxWidth("100%"),p.l0.overflow("hidden"),p.l0.color.accentPrimaryStronger],secondLineWarning:[p.l0.px(6),p.l0.rowWithGap(2),p.l0.align.center,p.l0.flex.wrap,p.l0.maxWidth("100%"),p.l0.overflow("hidden"),p.l0.color.orangeStrongest],buttons:[p.l0.flex.row,p.l0.pr(6)],verticalDivider:[p.l0.ml(6),p.l0.mr(6),p.l0.height("1em"),p.l0.width(1),p.l0.backgroundColor.foregroundDefault]});function x(e){var n=e.openNetworkingTool,t=e.onClose,r=e.firstLine,a=e.secondLine,l=e.renderSecondLine,c=e.isWarning,u=void 0!==c&&c;return(0,o.BX)(i.G,{css:u?w.wrapperWarning:w.wrapper,children:[(0,o.BX)(i.G,{css:w.body,children:[(0,o.tZ)(i.G,{css:w.firstLine,children:r}),l?(0,o.tZ)(i.G,{css:u?w.secondLineWarning:w.secondLine,children:a}):null]}),(0,o.BX)(i.G,{css:w.buttons,children:[(0,o.tZ)(s.hU,{alt:"Networking tool",onClick:n,children:(0,o.tZ)(d.Z,{})}),(0,o.tZ)(s.hU,{alt:"Close",onClick:t,children:(0,o.tZ)(f.Z,{})})]})]})}function k(){return(0,m.P5)({controlName:"flag-dot-dev-url",logFlagToAnalytics:!1})?"replit.dev":"repl.co"}function C(e){var n=e.configuration,t=e.openWebview,r=e.openNetworkingTool,i=e.onClose,a=e.renderSecondLine,l=k(),s=(0,g.O2)(n.externalPort)?"{...}.".concat(l):"{...}.".concat(l,":").concat(n.externalPort);return(0,o.tZ)(x,{openNetworkingTool:r,onClose:i,firstLine:(0,o.BX)(o.HY,{children:[(0,o.BX)(c.xv,{children:["Port :",n.localPort," opened on"]}),(0,o.tZ)(u.zx,{variant:"underlined",text:s,onClick:t})]}),secondLine:(0,o.BX)(o.HY,{children:[(0,o.tZ)(c.xv,{children:"You can manage this config in the"}),(0,o.tZ)(u.zx,{variant:"underlined",text:"Networking tool",onClick:r})]}),renderSecondLine:a})}function Z(e){var n=e.configuration,t=e.openNetworkingTool,r=e.onClose,i=e.renderSecondLine;return(0,o.tZ)(x,{openNetworkingTool:t,onClose:r,firstLine:"Port :".concat(n.localPort," opened, but not exposed to the web."),secondLine:(0,o.tZ)(u.zx,{variant:"underlined",text:"Expose this port?",onClick:t}),renderSecondLine:i})}function S(e){var n=e.openNetworkingTool,t=e.configuration,r=e.onClose,i=e.renderSecondLine;return(0,o.tZ)(x,{isWarning:!0,openNetworkingTool:n,onClose:r,firstLine:"Port :".concat(t.localPort," opened, but all available external ports are reserved."),secondLine:(0,o.BX)(o.HY,{children:[(0,o.tZ)(c.xv,{children:"Remove an external port in"}),(0,o.tZ)(u.zx,{variant:"underlined",text:"port configuration",onClick:n}),(0,o.tZ)(c.xv,{children:"to open a new port."})]}),renderSecondLine:i})}function T(e){var n=e.openNetworkingTool,t=e.configuration,r=e.onClose,i=e.renderSecondLine;return(0,o.tZ)(x,{isWarning:!0,openNetworkingTool:n,onClose:r,firstLine:"Port :".concat(t.localPort," opened, but is not configured properly."),secondLine:(0,o.BX)(o.HY,{children:[(0,o.tZ)(c.xv,{children:"You can fix this in the"}),(0,o.tZ)(u.zx,{variant:"underlined",text:"Networking tool",onClick:n})]}),renderSecondLine:i})}function R(e){var n=e.openNetworkingTool,t=e.configuration,r=e.onClose,i=e.renderSecondLine;return(0,o.tZ)(x,{isWarning:!0,openNetworkingTool:n,onClose:r,firstLine:"Port :".concat(t.localPort," opened, but has missing configuration."),secondLine:(0,o.BX)(o.HY,{children:[(0,o.tZ)(c.xv,{children:"You can fix this in the"}),(0,o.tZ)(u.zx,{variant:"underlined",text:"Networking tool",onClick:n})]}),renderSecondLine:i})}function E(e){var n=e.configuration,t=e.openWebview,r=e.openNetworkingTool,i=e.onClose,c=e.renderSecondLine,u=n.type;switch(u){case a.DL.FORWARDED:return(0,o.tZ)(C,{configuration:n,openWebview:t,openNetworkingTool:r,onClose:i,renderSecondLine:c});case a.DL.INTERNAL_ONLY:return(0,o.tZ)(Z,{configuration:n,openNetworkingTool:r,onClose:i,renderSecondLine:c});case a.DL.NO_MORE_EXTERNAL_PORTS_AVAILABLE:return(0,o.tZ)(S,{configuration:n,openNetworkingTool:r,onClose:i,renderSecondLine:c});case a.DL.MISCONFIGURED:return(0,o.tZ)(T,{configuration:n,openNetworkingTool:r,onClose:i,renderSecondLine:c});case a.DL.CONFIG_MISSING:return(0,o.tZ)(R,{configuration:n,openNetworkingTool:r,onClose:i,renderSecondLine:c});default:(0,l.Z)(u)}}function D(e){var n=e.configurations,t=e.openWebview,r=e.openNetworkingTool,l=e.onClose,s=e.renderSecondLine,d=k(),f=n.filter(function(e){return e.type===a.DL.FORWARDED}),h=n.filter(function(e){return e.type!==a.DL.FORWARDED});return(0,o.tZ)(x,{isWarning:0===f.length&&h.length>0,openNetworkingTool:r,onClose:l,firstLine:(0,o.BX)(o.HY,{children:[f.length>0?(0,o.BX)(o.HY,{children:[(0,o.BX)(c.xv,{children:[f.length," ",(0,y.Z)("port",f.length)," ","opened on"]}),(0,o.tZ)(u.zx,{variant:"underlined",text:"{...}.".concat(d),onClick:t})]}):null,f.length>0&&h.length>0?(0,o.tZ)(i.G,{css:w.verticalDivider}):null,h.length>0?(0,o.BX)(c.xv,{children:[h.length," ",(0,y.Z)("port",h.length)," ","failed to open"]}):null]}),secondLine:(0,o.BX)(o.HY,{children:[(0,o.tZ)(c.xv,{children:"You can manage this config in the"}),(0,o.tZ)(u.zx,{variant:"underlined",text:"Networking tool",onClick:r})]}),renderSecondLine:s})}function P(e){var n=e.configurations,t=e.openWebview,i=e.openNetworkingTool,a=e.onClose,l=(0,b.e)("port-nudges"),c=(0,r._)((0,v.useState)(!1),2),u=c[0],s=c[1],d=!l.isDone,f=(0,r._)((0,v.useState)(!0),2),h=f[0],p=f[1];function g(){p(!1),null==a||a()}return((0,v.useEffect)(function(){0===n.length&&p(!0)},[n]),(0,v.useEffect)(function(){if(!l.isDone){if(n.length>0&&!u){s(!0);return}0===n.length&&u&&l.setAsDone()}},[n,l,u]),h&&0!==n.length)?1===n.length?(0,o.tZ)(E,{configuration:n[0],openNetworkingTool:i,openWebview:t,renderSecondLine:d,onClose:g}):(0,o.tZ)(D,{configurations:n,openNetworkingTool:i,openWebview:t,renderSecondLine:d,onClose:g}):null}},19562:function(e,n,t){t.d(n,{j:function(){return C}});var r=t(34142),o=t(87682),i=t(8182),a=t(88978),l=t(10041),c=t(48728),u=t(5344),s=t(73030),d=t(19408),f=t(82723),h=t(41140),p=t(27308),g=t(43429),v=t(80259),m=t(25425),y=t(29287),b=t(47030),w=t(25934),x=t(74652),k=t(29620);function C(e){var n,t,C,Z,S,T,R,E,D,P,_,A,L=e.xterm,I=e.openAIWithMessage,q=e.openShellSearch,M=e.openSearchAndReplace,B=e.openGeneratePrompt,G=e.isOutputsTerminal,F=(t=(n={xterm:L,openAIWithMessage:I,openGeneratePrompt:B}).xterm,C=n.openAIWithMessage,Z=n.openGeneratePrompt,S=(0,m.P5)({controlName:"flag-killswitch-ghostwriter-chat",logFlagToAnalytics:!1}),T=(0,m.P5)({controlName:"flag-ai-in-the-shell",logFlagToAnalytics:!1}),R=(0,x.gf)(k.CH.id),(0,g.useMemo)(function(){if(!S){var e=[];if(T&&Z&&e.push({match:v.pl,data:{type:"action",label:"Generate",icon:(0,i.tZ)(w.Z,{color:y.TV.blurpleStronger}),keyboardShortcut:R,run:function(){Z()}}}),C&&e.push({match:v.pl,data:{type:"action",label:"Explain",icon:(0,i.tZ)(d.Z,{color:y.TV.blurpleStronger}),run:function(){var e,n;C({type:"chat",text:(n=null!==(e=null==t?void 0:t._term.getSelection())&&void 0!==e?e:"","\nCan you explain this shell output?\n\n```\n".concat(n,"\n```\n"))})}}}),0!==e.length)return{data:{type:"context",label:"AI",icon:(0,i.tZ)(s.Z,{})},commands:function(){return e}}}},[T,S,C,R,Z,null==t?void 0:t._term])),W=(D=(E={xterm:L,openShellSearch:q,openSearchAndReplace:M,isOutputsTerminal:void 0!==G&&G}).xterm,P=E.openShellSearch,_=E.openSearchAndReplace,A=E.isOutputsTerminal,(0,g.useMemo)(function(){var e=[];if(P){var n=A?(0,i.tZ)(b.Z,{}):(0,i.tZ)(h.Z,{});e.push({match:v.pl,data:{type:"action",label:A?"Find in Console":"Find in Shell",icon:n,run:function(){var e;P(null!==(e=null==D?void 0:D._term.getSelection())&&void 0!==e?e:"")}}})}if(_&&e.push({match:v.pl,data:{type:"action",label:"Find in Repl",icon:(0,i.tZ)(f.Z,{}),run:function(){var e;_(null!==(e=null==D?void 0:D._term.getSelection())&&void 0!==e?e:"")}}}),0!==e.length)return{data:{type:"context",label:"Search",icon:(0,i.tZ)(f.Z,{})},commands:function(){return e}}},[D,P,_,A])),U=(0,g.useMemo)(function(){return{data:{type:"context",label:"Clipboard",icon:(0,i.tZ)(c.Z,{})},commands:function(){return[{match:v.pl,data:{type:"action",label:"Copy",icon:(0,i.tZ)(u.Z,{}),keyboardShortcut:(0,p.l2)({cmdOrCtrl:!0,key:"c"}),run:function(){var e,n=null!==(e=null==L?void 0:L._term.getSelection())&&void 0!==e?e:"";(0,l.Z)(n)}}},{match:v.pl,data:{type:"action",label:"Paste",icon:(0,i.tZ)(c.Z,{}),keyboardShortcut:(0,p.l2)({cmdOrCtrl:!0,key:"v"}),run:function(){return(0,r._)(function(){var e,n;return(0,o.Jh)(this,function(t){switch(t.label){case 0:e="",t.label=1;case 1:return t.trys.push([1,3,,4]),[4,window.navigator.clipboard.readText()];case 2:return e=t.sent(),[3,4];case 3:return n=t.sent(),a.kg.error("Shell context menu paste failed",{message:n.message}),[2];case 4:return null==L||L._term.paste(e),[2]}})})()}}}]}}},[L]);return(0,g.useMemo)(function(){var e=[];return F&&e.push(F),W&&e.push(W),U&&e.push(U),{data:{type:"context",label:"Search actions",icon:(0,i.tZ)(f.Z,{})},commands:function(){return e}}},[F,W,U])}},14675:function(e,n,t){t.d(n,{R:function(){return u}});var r=t(8182),o=t(94450),i=t.n(o),a=t(29287),l=t(83848),c=t(43429);function u(e){var n=e.searchValue,t=e.setSearchValue,o=e.findNext,u=e.findPrevious,s=e.exit,d=(0,c.useRef)(null);(0,c.useEffect)(function(){d.current&&d.current.focus()},[]);var f=function(e){if("Escape"===e.key){s();return}"Enter"===e.key&&(e.shiftKey?u(n):o(n))};return(0,r.BX)("div",{className:"jsx-cae03adee2975d4 search",children:[(0,r.tZ)("input",{ref:d,placeholder:"Find",value:n,onChange:function(e){return t(e.target.value)},onKeyDown:function(e){return f(e)},css:[a.l0.focusRing],className:"jsx-cae03adee2975d4"}),(0,r.tZ)(l.Z,{size:"small",onClick:function(){return o(n)},children:"Next"}),(0,r.tZ)(l.Z,{size:"small",onClick:function(){return u(n)},children:"Previous"}),(0,r.tZ)(l.Z,{size:"small",onClick:s,children:"Exit"}),(0,r.tZ)(i(),{id:"cae03adee2975d4",children:".search.jsx-cae03adee2975d4{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;height:30px}input.jsx-cae03adee2975d4{padding:4px var(--space-8)var(--space-4);background-color:var(--background-default);color:var(--foreground-default);height:24px;width:85px;border:none;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);-webkit-box-shadow:none;-moz-box-shadow:none;box-shadow:none}input.jsx-cae03adee2975d4::-webkit-input-placeholder{color:var(--foreground-default)}input.jsx-cae03adee2975d4:-moz-placeholder{color:var(--foreground-default)}input.jsx-cae03adee2975d4::-moz-placeholder{color:var(--foreground-default)}input.jsx-cae03adee2975d4:-ms-input-placeholder{color:var(--foreground-default)}input.jsx-cae03adee2975d4::-ms-input-placeholder{color:var(--foreground-default)}input.jsx-cae03adee2975d4::placeholder{color:var(--foreground-default)}input.jsx-cae03adee2975d4:focus{outline:none;border:var(--accent-primary-default)}input.jsx-cae03adee2975d4,.search button{margin:0 var(--space-4)}"})]})}},29620:function(e,n,t){t.d(n,{S1:function(){return R},CH:function(){return E},St:function(){return _}});var r=t(39698),o=t(32477),i=t(8182),a=t(75159),l=t(72067),c=t(80502),u="\x1b[200~",s="\x1b[201~",d=t(43429),f=t(94106),h=t(9669),p=t(77589),g=t(2038),v=t(40028),m=t(26851),y=t(93918),b=t(29287),w=t(1643),x=t(74652),k=t(56596),C=t(74833),Z=t(78402),S=t(27308),T=t(25425),R="shell",E={id:"shell.generateWithAI",name:"Generate with AI in the shell",scope:R,default:(0,S.l2)({cmdOrCtrl:!0,key:"i"})},D=(0,y.X)({container:[b.l0.rowWithGap(2),b.l0.flex.row,b.l0.align.center,b.l0.textAlign.center,b.l0.cursor.pointer,b.l0.justify.end,{opacity:.6},b.l0.height("100%")],text:[b.l0.rowWithGap(4),b.l0.color.foregroundDimmest,b.l0.font.code],shortcut:[b.l0.ml(4),{"& > div > div":{fontSize:"0.8em",paddingLeft:(0,w.fP)(4),paddingRight:(0,w.fP)(4),paddingTop:(0,w.fP)(2),paddingBottom:(0,w.fP)(2)}}]}),P=function(e){var n=e.onClick,t=e.renderShortcut,r=e.shortcut;return(0,i.BX)(k.G,{css:D.container,onClick:function(e){e.stopPropagation(),n()},children:[(0,i.tZ)("div",{css:D.text,children:(0,i.tZ)(C.xv,{variant:"small",children:"Generate"})}),(0,i.tZ)("div",{css:D.shortcut,children:t&&r?(0,i.tZ)(x.bM,{keyCombo:r,small:!0}):null})]})};function _(e){var n,t,y,b,w,k,C=e.onShellKey,S=e.onOutput,R=e.onShellMetadata,D=e.container,_=e.initialPwd,A=e.openFile,L=e.listFiles,I=e.openWebview,q=e.onOpenGeneratePrompt,M=e.onUpdateCurrentPromptLineNumber,B=(0,d.useRef)(null),G=(0,d.useRef)(null),F=(0,g.T3)(),W=(0,x.gf)(E.id),U=(0,d.useRef)(null),X=(0,T.P5)({controlName:"flag-ai-in-the-shell",logFlagToAnalytics:!1}),N=(0,d.useCallback)(function(e,n){if("B"===n&&X){var t,r,o=e.buffer.active,a=o.cursorX,l=o.cursorY;M(l),B.current&&B.current.dispose(),G.current&&G.current.dispose(),U.current&&(U.current.unmount(),U.current=null),B.current=e.registerMarker(0),G.current=null!==(r=e.registerDecoration({marker:B.current,x:e.cols-14,width:14,layer:"top"}))&&void 0!==r?r:null,null===(t=G.current)||void 0===t||t.onRender(function(n){for(var t=!1,r=e.buffer.active._buffer.lines._array[l],o=a;o<e.cols;o++)if((null==r?void 0:r.hasContent(o))!==0){t=!0;break}var c=!t;U.current||(U.current=(0,Z.createRoot)(n)),U.current.render(c?(0,i.tZ)(P,{onClick:function(){return q()},renderShortcut:!F,shortcut:W}):null)})}},[X,q,M,F,W]),O=(0,o._)((0,c.Z)({openFile:A,listFiles:L,openWebview:I,onInBandOSCMessages:(0,r._)({},133,N)}),2),z=O[0],H=O[1],j=(0,l.Z)({service:"shell",container:D}),V=(0,m.K)({channelId:null==j?void 0:null===(k=j.channel)||void 0===k?void 0:k.id}),K=(0,d.useRef)(!1),Y="",$="",J="",Q=(0,d.useCallback)(function(e){if(!j.channel||!z)return!1;var n=D.client();if(!j.channel||"open"!==j.channel.status||n.getConnectionState()!==a.em.CONNECTED)return!1;var t=e.startsWith(u)&&e.endsWith(s)?e.slice(u.length,e.length-s.length):e;return j.channel.send({input:t}),!0},[z,j,D]);return t=(n={sendInput:Q,paste:function(e){return!!z&&(z.paste(e),!0)}}).sendInput,y=n.paste,b=(0,f.useRouter)(),w=(0,g.Vg)(b),(0,d.useEffect)(function(){if(w){var e=function(e,n){t(n)?(0,p.gU)(e):(0,p.pl)(e)},n=function(e){"unknown"===e||(0,v.Z)(e)},r=function(t){(0,p.gN)(t,function(t){var r=t.type;switch(r){case h.cF.SHELL_INSERT_INPUT:e(t.id,t.input);break;case h.cF.SHELL_COMMAND:n(t.command);break;case h.cF.SHELL_PASTE_TEXT:y(t.text)?(0,p.gU)(t.id):(0,p.pl)(t.id);break;default:(0,v.Z)(r)}})};return window.addEventListener("message",r),function(){window.removeEventListener("message",r)}}},[w,t,y]),(0,d.useEffect)(function(){if(j.channel&&"open"===j.channel.status)return j.channel.onCommand(function(e){e.shellMetadata&&(null==R||R(e.shellMetadata))})},[j.channel,R]),(0,d.useEffect)(function(){if(j.channel&&"open"===j.channel.status&&z){var e=z.onKey(function(e){var n=e.key,t=e.domEvent;if("\r"===n){var r=$;$.endsWith(Y)&&Y.length>0&&(r=$.slice(0,-Y.length)),V("user:shell:output:clean",{output:r,command:J}),V("user:shell:exec",{command:Y}),V("user:shell:output",{output:$}),J=Y,Y="",$=""}else Y+=n;C&&C(t)}),n=D.client(),t=z.onData(function(e){Q(e)});j.channel.onCommand(function(e){e.hint?z.write("\x1b[0m\x1b[33m".concat(e.hint.text,"\x1b[0m\r\n")):e.output&&(z.write(e.output),null==S||S(e.output),$+=e.output)});var r=function(){j.channel&&"open"===j.channel.status&&n.getConnectionState()===a.em.CONNECTED&&j.channel.send({resizeTerm:z.getSize()})};if(_&&!K.current){var o=_.replace(/"/g,'\\"');j.channel.send({input:'cd "'.concat(o,'"\n')}),K.current=!0}var i=z.onResize(r);return r(),function(){e.dispose(),t.dispose(),i.dispose()}}},[j.channel,z,C,S,R,D,Q,_]),[z,H,Q]}},75834:function(e,n,t){t.d(n,{Z:function(){return N}});var r,o,i=t(34142),a=t(32477),l=t(87682),c=t(8182),u=t(94450),s=t.n(u),d=t(43429),f=t(48900),h=t(26508),p=t(59868),g=t(28268),v=t(47001),m=t(86612),y=t(12834),b=t(88936),w=t(49344),x=t(45726),k=t(93918),C=t(29287),Z=t(56596),S=t(37951),T=t(1498),R=t(18931),E=t(25425),D=t(50782),P=t(58130),_=t(31811),A=t(94106),L=t(45903),I=t(93295),q=t(23982),M=t(77393);function B(){var e=(0,I._)(["\n  query WorkspaceVncOutput($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        slug\n        owner {\n          ... on Team {\n            id\n            username\n          }\n          ... on User {\n            id\n            username\n          }\n        }\n      }\n    }\n  }\n"]);return B=function(){return e},e}var G={},F=(0,q.Ps)(B()),W=t(75246),U=t(68333);(r=o||(o={})).Connecting="Connecting",r.Connected="Connected",r.Disconnected="Disconnected",r.Errored="Errored";var X="VNC_PASSWORD";function N(e){var n,r,o,u,k,C,Z,S,T,R,I,q=e.fs,B=e.container,W=(0,a._)(d.useState(null),2),U=W[0],N=W[1],O=(0,a._)(d.useState(void 0),2),H=O[0],j=O[1],V=(0,a._)(d.useState(!1),2),K=V[0],Y=V[1],$=(0,a._)(d.useState("Connecting"),2),J=$[0],Q=$[1],ee=(0,a._)(d.useState(null),2),en=ee[0],et=ee[1],er=(0,a._)(d.useState(!1),2),eo=er[0],ei=er[1],ea=(0,a._)(d.useState(!1),2),el=ea[0],ec=ea[1],eu=(0,a._)(d.useState(null),2),es=eu[0],ed=eu[1],ef=d.useRef(0),eh=(0,y.Z)(),ep=(0,E.P5)({controlName:"flag-vnc-error-status",logFlagToAnalytics:!1}),eg=(0,E.P5)({controlName:"flag-vnc-dash-url",logFlagToAnalytics:!1}),ev=(0,A.useRouter)().pathname,em=(I=null==(R=(null==(T=(r={skip:({skip:!(eg&&("/replEnvironmentDesktop"===ev||"/replEnvironmentMobile"===ev)&&!(0,_.Z)())}).skip,variables:{replId:(0,D.Z)()}},o=(0,L._)({},G,r),M.a(F,o)).data)?void 0:T.repl.__typename)==="Repl"?T.repl:null)?void 0:null===(n=R.owner)||void 0===n?void 0:n.username,R&&I&&!(R.slug.length+I.length+2>63)?(k=(u={username:I,replSlug:R.slug}).replSlug,C=u.username,Z=(0,_.Z)()?P.js:P.ck,S=(0,P.mZ)(Z),"".concat(S,"//").concat(k,"--").concat(C,".").concat(Z)):null),ey=(0,m.Z)(B);(0,E.P5)({controlName:"flag-dot-dev-url",logFlagToAnalytics:!1})&&ey&&(em=ey.replace("http","ws")),(0,p.j)(p.U3.VNC_OPENED),d.useEffect(function(){if(em){if(B.getConnectionState()===v.em.CONNECTED){if(!em)return;ed(em);return}return B.onConnectionStateChanged(function(e){e===v.em.CONNECTED&&em&&ed(em)})}},[B,em]),d.useEffect(function(){if(!em){if(B.getConnectionState()===v.em.CONNECTED){B.getVncUrl().then(function(e){return ed(e)});return}return B.onConnectionStateChanged(function(e){e===v.em.CONNECTED&&B.getVncUrl().then(function(e){return ed(e)})})}},[B,em]);var eb=(0,a._)(d.useState(null),2),ew=eb[0],ex=eb[1],ek=d.useRef(function(){return null});d.useEffect(function(){ek.current()},[ew]);var eC=(0,h.Z)(function(e){return ex(e.width&&e.height?{width:e.width,height:e.height}:null)},{type:"throttle",wait:100}),eZ=d.useRef(function(e){});d.useEffect(function(){eZ.current(el)},[el]),d.useEffect(function(){if(!U){var e=!1;return t.e(5925).then(t.bind(t,65925)).then(function(n){e||N(n)}),function(){e=!0}}},[U]),d.useEffect(function(){ep||"Disconnected"!==J||setTimeout(function(){eh.current&&Q("Connecting")},Math.random()*(Math.pow(2,ef.current)-1)*1e3)},[J,eh,ep]),d.useEffect(function(){if(ep&&"Disconnected"===J){var e=setTimeout(function(){Q("Connecting")},Math.random()*(Math.pow(2,ef.current)-1)*1e3);return function(){clearTimeout(e)}}},[J,eh,ep]);var eS=(0,D.Z)();d.useEffect(function(){if(es&&en&&U&&"Connecting"===J){ef.current++;var e=U.default,n=B.getConnectionMetadata(),t={credentials:{username:null==n?void 0:n.token,password:H||""}};(0,p.j)(p.U3.VNC_CONNECTED);var r=new e(en,es,t);r.scaleViewport=!0,r.resizeSession=!0;var o=function(){eh.current&&(ef.current=0,Q("Connected"))},a=function(e){var n=e.detail.capabilities.audio;ei(void 0!==window.MediaSource&&!!n)},c=function(e){if(ek.current=function(){return null},eZ.current=function(e){},r.removeEventListener("securityfailure",u),r.removeEventListener("disconnect",c),r.removeEventListener("capabilities",a),r.removeEventListener("connect",o),eh.current){if(ep&&!e.detail.clean){var n=B.getConnectionMetadata(),t=n?(0,P.he)(n.token):null;(0,p.j)(p.U3.VNC_ERRORED,{vncUrl:es,replId:eS,cluster:null==t?void 0:t.cluster}),Q("Errored");return}Q("Disconnected")}},u=function(){if(eh.current){var e,n=function(){Y(!0)};(e=(0,i._)(function(){var e,t,r;return(0,l.Jh)(this,function(o){switch(o.label){case 0:return[4,q.readFile(".env")];case 1:if(e=o.sent(),!eh.current)return[2];if(e.error||(t=e.content.toString("utf8"),!(X in(r=g.Z.parse(t)))))return n(),[2];return j(r[X]),[2]}})}),function(){return e.apply(this,arguments)})().catch(function(e){return f.Tb(e)})}};return r.addEventListener("connect",o),r.addEventListener("capabilities",a),r.addEventListener("disconnect",c),r.addEventListener("securityfailure",u),ek.current=function(){return r._windowResize()},ei(!1),ec(!1),eZ.current=function(n){n?((0,p.j)(p.U3.VNC_AUDIO_ENABLED),r.enableAudio(2,window.MediaSource.isTypeSupported("audio/webm;codecs=opus")?e.audioCodecs.OpusWebM:e.audioCodecs.MP3,32768)):r.disableAudio()},function(){eh.current||(ek.current=function(){return null},eZ.current=function(e){},r.removeEventListener("securityfailure",u),r.removeEventListener("disconnect",c),r.removeEventListener("capabilities",a),r.removeEventListener("connect",o),r.disconnect())}}},[U,en,B,es,q,H,J,eh,ep,eS]);var eT="vnc-output-".concat(J.toLowerCase());return(0,c.BX)("div",{className:"jsx-612fb0831fb3a82c vnc",children:[eo?(0,c.BX)("label",{className:"jsx-612fb0831fb3a82c vnc-audio",children:["\uD83C\uDFA7"," ",(0,c.tZ)("input",{type:"checkbox",checked:el,onChange:function(e){return ec(e.target.checked)},className:"jsx-612fb0831fb3a82c"})]}):null,(0,c.tZ)("div",{ref:function(e){eC(e),et(e)},"data-cy":eT,className:"jsx-612fb0831fb3a82c vnc-target"}),"Connecting"===J||"Disconnected"===J?(0,c.tZ)("div",{className:"jsx-612fb0831fb3a82c vnc-overlay",children:(0,c.tZ)(b.Z,{size:32})}):null,"Errored"===J?(0,c.tZ)(z,{vncUrl:es,onRetry:function(){return Q("Connecting")}}):null,(0,c.tZ)(w.u,{isOpen:K,onRequestClose:function(){return Y(!1)},children:(0,c.tZ)(x.Z,{prompt:"Password",desc:"The output is password protected, please input it",placeholder:"password",type:"text",onCancel:function(){return Y(!1)},onConfirm:function(e){j(e),Y(!1)}})}),(0,c.tZ)(s(),{id:"612fb0831fb3a82c",children:".vnc.jsx-612fb0831fb3a82c{position:relative}.vnc.jsx-612fb0831fb3a82c,.vnc-target.jsx-612fb0831fb3a82c{height:100%;width:100%}.vnc-audio.jsx-612fb0831fb3a82c{position:absolute;bottom:0;right:0;padding:.2em}.vnc-overlay.jsx-612fb0831fb3a82c{top:0;position:absolute;height:100%;width:100%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;background:rgba(0,0,0,.85);color:var(--white)}"})]})}var O=(0,k.X)({root:[C.l0.coverContainer,C.l0.center,C.l0.p(16)],inner:[C.l0.colWithGap(8),C.l0.width(250)],diagnosisContent:[C.l0.py(8)]});function z(e){var n=e.vncUrl,t=e.onRetry,r=null;if(n){var o=new URL("wss://10622591-6a32-44be-aa89-1421705f33ea.id.repl.co").hostname;r=(0,c.tZ)(W.Q,{headerContent:"Diagnosis",children:(0,c.tZ)(Z.G,{css:[O.diagnosisContent],children:(0,c.tZ)(U.ZP,{children:"Open this link and check if you can visit this URL from your browser:\n[".concat(o,"](https://").concat(o,").\n\nIf you see a browser error, it's possible that your ISP have security settings blocking the URL. Please contact your ISP and ask them to unblock the URL above. Here are the support links for common ISPs:\n- [Xfinity](https://www.xfinity.com/support/articles/report-blocked-website)\n- [Spectrum.net](https://www.spectrum.net/support/forms/unblock_site)\n")})})})}return(0,c.tZ)(Z.G,{css:O.root,children:(0,c.BX)(Z.G,{css:O.inner,children:[(0,c.tZ)(S.E,{colorway:"warning",text:"There was an error connecting to the server"}),r,(0,c.tZ)(T.zx,{iconLeft:(0,c.tZ)(R.Z,{}),text:"Try again",onClick:t})]})})}},66985:function(e,n,t){function r(e){return 80===e||443===e}function o(e,n){var t=new URL(e);return!n||r(n)?t.port&&(t.port=""):t.port=n.toString(),t}function i(e){var n=e.url,t=e.port,o=e.path,i=e.id,a=new URL(n);return r(t)?a.port="":a.port=t.toString(),a.searchParams.set("initialPath",o),a.searchParams.set("id",i),a}t.d(n,{Gz:function(){return i},O2:function(){return r},hw:function(){return o}})},25961:function(e,n,t){t.d(n,{Ih:function(){return m},bM:function(){return y},ir:function(){return x}});var r=t(39698),o=t(45903),i=t(25e3),a=t(8182);t(43429);var l=t(27308),c=t(93918),u=t(29287),s=t(56596),d=t(74833),f=t(21557),h=(0,t(91608).$)(["fontSize","gap"]),p=h.cssVars,g=h.styleTokens,v=(0,c.X)({chord:[u.l0.display.inlineFlex,u.l0.rowWithGap(12)],shortcut:[u.l0.display.inlineFlex,u.l0.flex.row,{fontSize:g.fontSize,"& > div":{marginRight:g.gap},"& > div:last-child":{marginRight:0}}]});function m(e){return((0,l.bU)(e)?e:[e]).map(function(e){return(0,l.QR)(e).map(function(e){var n;return null!==(n=w[e])&&void 0!==n?n:e.toUpperCase()}).join("")}).join(" ")}function y(e){if((0,l.bU)(e.keyCombo))return(0,a.tZ)(s.G,{"data-testid":"Keybinding:".concat(e.keyCombo.join(" ")),css:v.chord,children:e.keyCombo.map(function(n,t){return(0,a.tZ)(y,(0,i._)((0,o._)({},e),{keyCombo:n}),t)})});var n=(0,l.QR)(e.keyCombo);return(0,a.tZ)(s.G,{"data-testid":"Keybinding:".concat(e.keyCombo),css:v.shortcut,style:(0,r._)({},p.gap,e.hideBorder?"2px":"4px"),title:e.keyCombo,children:n.map(function(n){var t;return(0,a.tZ)(x,{text:n,hideBorder:e.hideBorder,small:e.small,isActive:null==e?void 0:null===(t=e.match)||void 0===t?void 0:t.includes(n.toLowerCase())},n)})})}var b=(0,c.X)({root:[u.l0.color.foregroundDimmest,u.l0.position.relative,u.l0.px(4),u.l0.py(1),{fontSize:"inherit",minWidth:u.TV.space16,textAlign:"center",textTransform:"capitalize"},u.l0.font.default],border:[u.l0.coverContainer,u.l0.borderRadius(4),{opacity:.5,minWidth:u.TV.space16,border:"1px solid",borderColor:u.TV.outlineStrongest}]}),w={Ctrl:f.V5?"⌃":"Ctrl",Cmd:f.V5?"⌘":"Cmd",Alt:f.V5?"⌥":"Alt",Shift:f.V5?"⇧":"Shift",Enter:f.V5?"Return":"Enter",ArrowLeft:"←",ArrowRight:"→",ArrowUp:"↑",ArrowDown:"↓"," ":"Space"};function x(e){var n,t,o=e.text,i=e.small,l=void 0!==i&&i,c=e.isActive,f=void 0!==c&&c,h=e.hideBorder,g=(n={},(0,r._)(n,p.fontSize,l?u.TV.fontSizeSmall:u.TV.fontSizeDefault),(0,r._)(n,"height",l?20:24),n);f&&(g.fontWeight=u.TV.fontWeightMedium,g.color=u.TV.foregroundDefault);var v={borderColor:u.TV.foregroundDefault,opacity:1};return(0,a.BX)(s.G,{css:b.root,style:g,children:["string"==typeof o?(0,a.tZ)(d.xv,{variant:l?"small":"text",children:null!==(t=w[o])&&void 0!==t?t:o}):o,void 0!==h&&h?null:(0,a.tZ)(s.G,{css:b.border,style:f?v:void 0})]})}},74652:function(e,n,t){t.d(n,{GO:function(){return c},Ih:function(){return l.Ih},Il:function(){return i.Il},bM:function(){return l.bM},gf:function(){return i.gf}});var r=t(8182),o=t(43429),i=t(96003),a=t(27308),l=t(25961);function c(e){var n=(0,i.ns)(e);return(0,r.BX)(i.Ge.Provider,{value:n,children:[e.children,(0,r.tZ)(u,{})]})}function u(){var e=(0,i.Sy)(),n=(0,o.useRef)(null);return(0,o.useEffect)(function(){var t=function(t){var r=(0,a.IX)(t);if(r){var o=r;n.current&&(o=(0,a.cZ)(n.current,r));var l=e(o);switch(l.kind){case i.Xp.NoMatch:n.current=null;break;case i.Xp.WaitingForChord:n.current=l.key,t.preventDefault();break;case i.Xp.MatchFound:n.current=null;var c=!0,u=!1,s=void 0;try{for(var d,f=l.matches[Symbol.iterator]();!(c=(d=f.next()).done);c=!0){var h=d.value,p=h.run,g=h.bubble,v=void 0===g||g;if(!1!==p()&&(t.preventDefault(),!v))break}}catch(e){u=!0,s=e}finally{try{c||null==f.return||f.return()}finally{if(u)throw s}}}}};return document.addEventListener("keydown",t),function(){document.removeEventListener("keydown",t)}},[e]),null}},52902:function(e,n,t){t.d(n,{kz:function(){return k},F3:function(){return h},fK:function(){return b},ME:function(){return u},DQ:function(){return d},Dp:function(){return l},WQ:function(){return f},Ur:function(){return s},RX:function(){return c},b:function(){return g},Se:function(){return x}});var r=t(30084),o=t(51384),i=t(29287),a=t(19659);function l(e){var n=e.path;return n?(0,a.hj)(n)?"binary":(0,a.T3)(n)?"media":(0,a.sL)(n)?"draw":(0,a.IQ)(n)?"pedit":"codeEditor":"codeEditor"}function c(e){return"codeEditor"===e||"binary"===e||"media"===e||"pedit"===e||"draw"===e||"history"===e}function u(e){return e.filter(function(e){return e.type===r.Tv.File}).map(function(e){return{type:l({path:e.path}),data:{path:e.path}}})}function s(e){return c(e.type)}function d(e){return s(e)?e.data.path:null}function f(e){return"extension"===e.type}var h=(0,o.iv)([i.l0.width("100%"),i.l0.maxWidth(600),{marginLeft:"auto",marginRight:"auto"}]),p=["autograder","education","instructions","markdown","threadInbox","extensionStore","chat","docs","webview","vnc","runnerOutput","git","packager","envEditor","debugger","tutorial","database","neon","replAuth","autograder","unitTests","education","preferences","deployments","ghostwriterChat","extensionDevtools","problems","networking","objectStorage"];function g(e,n){return n&&p.indexOf("webview")>=0&&p.splice(p.indexOf("webview"),1),p.includes(e)}var v=t(8182),m=t(43429),y={type:"commands",data:{autoFocus:!1}};function b(e){var n=e.config;return{Icon:function(e){var t=e.pane,r=e.size,o=n[t.type]?t:y,i=n[o.type].Icon;return(0,v.tZ)(i,{pane:o,size:void 0===r?16:r})},Content:function(e){var t=e.pane,r=e.options,o=n[t.type]?t:y,i=n[o.type].Content;return(0,v.tZ)(i,{pane:o,options:r})},getTitle:function(e){var t=n[e.type]?e:y;return n[t.type].getTitle(t)},decode:function(e,t){var r,o=null;try{o=null===(r=n[e])||void 0===r?void 0:r.decode(t)}catch(e){}return o}}}var w=(0,m.createContext)(null);function x(){var e=(0,m.useContext)(w);if(!e)throw Error("Expected PaneUI in context");return e}var k=w.Provider},80502:function(e,n,t){t.d(n,{Z:function(){return q}});var r,o=t(34142),i=t(32477),a=t(87682),l=t(48900),c=t(7444),u=t(25632),s=t(10041),d=t(40473),f=t(63009),h=t(43429),p=t(26508),g=t(72282),v=t.n(g)()(function(){if("undefined"!=typeof AudioContext){var e=(r||(r=new AudioContext),r),n=e.createBufferSource();e.decodeAudioData(function(e){for(var n=window.atob(e),t=n.length,r=new Uint8Array(t),o=0;o<t;o++)r[o]=n.charCodeAt(o);return r.buffer}("SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjMyLjEwNAAAAAAAAAAAAAAA//tQxAADB8AhSmxhIIEVCSiJrDCQBTcu3UrAIwUdkRgQbFAZC1CQEwTJ9mjRvBA4UOLD8nKVOWfh+UlK3z/177OXrfOdKl7pyn3Xf//WreyTRUoAWgBgkOAGbZHBgG1OF6zM82DWbZaUmMBptgQhGjsyYqc9ae9XFz280948NMBWInljyzsNRFLPWdnZGWrddDsjK1unuSrVN9jJsK8KuQtQCtMBjCEtImISdNKJOopIpBFpNSMbIHCSRpRR5iakjTiyzLhchUUBwCgyKiweBv/7UsQbg8isVNoMPMjAAAA0gAAABEVFGmgqK////9bP/6XCykxBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq"),function(t){n.buffer=t,n.connect(e.destination),n.start(0)})}},500,{leading:!0,trailing:!0}),m="replit-icons-font",y=t(47507),b="BESbswy";function w(e){return x.apply(this,arguments)}function x(){return(x=(0,o._)(function(e){return(0,a.Jh)(this,function(n){switch(n.label){case 0:if(!document.fonts)return[3,2];return[4,function(e,n){return C.apply(this,arguments)}(document.fonts,e)];case 1:case 3:return n.sent(),[2];case 2:return[4,Promise.all([Z("serif",e),Z("sans-serif",e),Z("monospace",e)])]}})})).apply(this,arguments)}function k(e){var n=e.family,t=e.style,r=e.weight;return"".concat(void 0===t?"normal":t," ").concat(void 0===r?"normal":r," 100px ").concat(n)}function C(){return(C=(0,o._)(function(e,n){var t,r,o,i,l,c;return(0,a.Jh)(this,function(a){return t=n.fontInfo,o=void 0===(r=n.characters)?b:r,l=void 0===(i=n.timeout)?3e3:i,c=k(t),[2,new Promise(function(n,r){var i=!1,a=y.kg.timeStart({family:t.family,style:t.style,weight:t.weight}),u=setTimeout(function(){i=!0,a("xterm font loading timed out"),n()},l);e.load(c,o).then(function(){i||(clearTimeout(u),n())}).catch(function(e){i||(clearTimeout(u),r(e))})})]})})).apply(this,arguments)}function Z(e,n){return S.apply(this,arguments)}function S(){return(S=(0,o._)(function(e,n){var t,r,o,i,l,c,u,s,d;return(0,a.Jh)(this,function(a){return(t=n.fontInfo,o=void 0===(r=n.characters)?b:r,l=void 0===(i=n.timeout)?3e3:i,c=k(t),(u=document.createElement("span")).innerText=o,u.style.font="normal normal 100px ".concat(e),u.style.position="absolute",u.style.left="-9999px",u.style.top="-9999px",document.body.appendChild(u),s=u.offsetWidth,u.style.font=c,(d=function(){return s!==u.offsetWidth})())?[2]:[2,new Promise(function(e,n){var r=setInterval(function(){d()&&(clearInterval(r),clearTimeout(o),document.body.removeChild(u),e())},50),o=setTimeout(function(){if(clearInterval(r),document.body.removeChild(u),d()){e();return}n(Error("Font loading timed out "+t.family))},l)})]})})).apply(this,arguments)}function T(e){l.Tb(e)}var R='"ReplitHack"',E=String.fromCharCode(61095);function D(){return(D=(0,o._)(function(){return(0,a.Jh)(this,function(e){switch(e.label){case 0:return!function(){if(!document.getElementById(m)){var e=document.createElement("style");e.id=m,e.type="text/css",e.appendChild(document.createTextNode("\n@font-face {\n  font-family: 'replit-icons';\n  font-style: normal;\n  font-weight: normal;\n  font-stretch: normal;\n  src: url(".concat("/public/fonts/replit-icons.woff",") format('woff'),\n    url(").concat("/public/fonts/replit-icons.ttf",") format('truetype');\n}"))),document.head.appendChild(e)}}(),[4,Promise.all([w({fontInfo:{family:"replit-icons"},characters:E}).catch(T),w({fontInfo:{family:R,weight:"400"}}).catch(T),w({fontInfo:{family:R,weight:"400",style:"italic"}}).catch(T),w({fontInfo:{family:R,weight:"700"}}).catch(T),w({fontInfo:{family:R,weight:"700",style:"italic"}}).catch(T)])];case 1:return e.sent(),[2]}})})).apply(this,arguments)}var P=t(58200),_=t(96003),A=t(27308),L=t(56337),I=t(89106);function q(e){var n,r,g,m,y=(0,i._)((0,h.useState)(null),2),b=y[0],w=y[1],x=(0,i._)((0,h.useState)(null),2),k=x[0],C=x[1],Z=(0,P.f)(),S=(0,u.Gn)("fontSize","accessibleTerminal","shellBellAudio").preferences,T=S.fontSize,E=S.accessibleTerminal,q=S.shellBellAudio,M=(0,f.uV)(),B=(0,L.Z)(),G=null==e?void 0:e.openFile,F=(0,c.Z)(null==e?void 0:e.openWebview),W=null==e?void 0:e.listFiles,U=(0,h.useMemo)(function(){return G&&W?{openFile:G,listFiles:W}:null},[G,W]),X=(0,c.Z)(null==e?void 0:e.onInBandOSCMessages),N={screenReaderMode:E,fileLinking:U,terminalTheme:Z,fontSize:T,scrollback:null==e?void 0:e.scrollback},O=(0,c.Z)(N),z=(0,p.Z)(function(){(null==e?void 0:e.autoFit)!==!1&&(null==k||k.fit())},{type:"debounce",wait:200}),H=(0,h.useRef)(null),j=(0,c.Z)(null==e?void 0:e.size),V=(0,_.Sy)();return(0,h.useLayoutEffect)(function(){if(b){var e=[];return(function(){return n.apply(this,arguments)})().catch(function(e){if(e.message&&e.message.toLowerCase().includes("loading chunk")){l.$e(function(n){n.setExtra("message",e.message),n.setExtra("stack",e.stack),l.Tb(Error("Loading chunk failed"))});return}M({error:e,origin:"Xterm: init"})}),function(){e.forEach(function(e){return e()})}}function n(){return(n=(0,o._)(function(){var n,r,o,c,u,f,h,p,g,v,m,y,w,x,k,Z,S,T,E,P,L;return(0,a.Jh)(this,function(a){switch(a.label){case 0:return[4,Promise.all([Promise.all([(0,d.Z)(function(){return t.e(9784).then(t.t.bind(t,54095,23))}),(0,d.Z)(function(){return t.e(5030).then(t.t.bind(t,5030,23))}),(0,d.Z)(function(){return t.e(380).then(t.t.bind(t,10774,23))}),(0,d.Z)(function(){return t.e(1225).then(t.t.bind(t,41225,23))}),(0,d.Z)(function(){return t.e(5564).then(t.t.bind(t,5564,23))}),(0,d.Z)(function(){return t.e(3900).then(t.bind(t,53900))}),(0,d.Z)(function(){return t.e(9286).then(t.t.bind(t,19286,23))}),(0,d.Z)(function(){return t.e(2971).then(t.t.bind(t,62792,23))})]),function(){return D.apply(this,arguments)}()])];case 1:var q;if(o=i._.apply(void 0,[a.sent(),1]),u=(c=(0,i._)(o[0],8))[0].Terminal,f=c[1].FitAddon,h=c[2].SearchAddon,p=c[3].WebLinksAddon,g=c[4].Unicode11Addon,v=c[5].FileLinkAddon,m=c[6].CanvasAddon,y=c[7].WebglAddon,!b)return[2];return x={allowProposedApi:!0,cursorBlink:!1,scrollback:null!==(w=O.current.scrollback)&&void 0!==w?w:1e3,tabStopWidth:4,fontFamily:"".concat(R,', replit-icons, Monaco, "Ubuntu Mono", Consolas, monospace'),fontSize:O.current.fontSize,lineHeight:1,fontWeight:400,fontWeightBold:700,drawBoldTextInBrightColors:!1,minimumContrastRatio:4.5,theme:O.current.terminalTheme,screenReaderMode:O.current.screenReaderMode},(null===(n=j.current)||void 0===n?void 0:n.cols)!==void 0&&(x.cols=j.current.cols),(null===(r=j.current)||void 0===r?void 0:r.rows)!==void 0&&(x.rows=j.current.rows),k=new u(x),O.current.fileLinking?(H.current=new v(O.current.fileLinking.openFile,O.current.fileLinking.listFiles),k.loadAddon(H.current)):H.current=null,Z=new f,k.loadAddon(Z),S=new p((q=function(e){B?I.X.openExternalUrl(e):window.open(e,"_blank")},function(e,n){var t;try{t=new URL(n)}catch(e){return}if(("0.0.0.0"===t.hostname||"localhost"===t.hostname)&&void 0!==F.current){F.current(t.pathname,parseInt(t.port,10));return}q(n)})),k.loadAddon(S),T=new h,k.loadAddon(T),E=new g,k.loadAddon(E),k.unicode.activeVersion="11",k.open(b),e.push(function(){return k.dispose()}),function(){try{if(!(!function(){if(!/^((?!chrome|android).)*safari/i.test(window.navigator.userAgent))return!1;var e=window.navigator.userAgent.match(/Version\/(\d+)/);return null===e||e.length<2||16>parseInt(e[1],10)}()&&document.createElement("canvas").getContext("webgl2"))){var e=new m;k.loadAddon(e);return}var n=new y;k.loadAddon(n)}catch(e){var t=new m;k.loadAddon(t)}}(),P=!1,L=null,k.attachCustomKeyEventHandler(function(e){var n=(0,A.IX)(e);if(n){var t=n;L&&(t=(0,A.cZ)(L,n));var r=V(t);switch(r.kind){case _.Xp.NoMatch:L=null;break;case _.Xp.WaitingForChord:return L=r.key,!1;case _.Xp.MatchFound:return L=null,!1}}return(!window.navigator.clipboard||"c"!==e.key.toLowerCase()||!e.ctrlKey||!e.shiftKey||("keyup"===e.type&&k.hasSelection()&&(0,s.Z)(k.getSelection()).catch(function(e){l.$e(function(n){n.setTag("xterm-clipboard",!0),n.setExtra("type","copy"),l.Tb(e)})}),e.preventDefault(),e.stopPropagation(),!1))&&("shift"===e.key.toLowerCase()||"ctrl"===e.key.toLowerCase()||"alt"===e.key.toLowerCase()||"meta"===e.key.toLowerCase()||("tab"!==e.key.toLowerCase()||!P)&&(P="escape"===e.key.toLowerCase(),!0))}),X.current&&Object.entries(X.current).forEach(function(e){var n=(0,i._)(e,2),t=n[0],r=n[1];k.parser.registerOscHandler(Number(t),function(e){return r(k,e),!0})}),C({onKey:k.onKey.bind(k),onData:k.onData.bind(k),onResize:k.onResize.bind(k),write:k.write.bind(k),fit:function(){var e=b.getBoundingClientRect(),n=e.width,t=e.height;n>0&&t>0&&Z.fit()},focus:function(){return k.focus()},clear:function(){return k.clear()},findPrevious:function(e,n){return T.findPrevious(e,n)},findNext:function(e,n){return T.findNext(e,n)},getSize:function(){return{cols:k.cols,rows:k.rows}},paste:function(e){return k.paste(e)},_term:k}),z(b),[2]}})})).apply(this,arguments)}},[b,z,O,M,j,V,B,F,X]),n=null==k?void 0:k._term,r=N.screenReaderMode,g=N.fileLinking,m=N.terminalTheme,(0,h.useEffect)(function(){n&&m&&(n.options.theme=m)},[n,m]),(0,h.useEffect)(function(){n&&(n.options.screenReaderMode=r)},[n,r]),(0,h.useEffect)(function(){if(n){if(!g){H.current&&H.current.deactivate();return}if(!H.current){var e=!1;return t.e(3900).then(t.bind(t,53900)).then(function(t){var r=t.FileLinkAddon;e||(H.current=new r(g.openFile,g.listFiles),n.loadAddon(H.current))}),function(){e=!0}}H.current.update(g.openFile,g.listFiles),H.current.reactivate()}},[n,g,H]),(0,h.useEffect)(function(){var e=null==k?void 0:k._term;e&&T&&e.options.fontSize!==T&&(e.options.fontSize=T,e.refresh(0,e.rows-1),k.fit())},[T,k]),(0,h.useEffect)(function(){if(q){var e=null==k?void 0:k._term;if(e)return e.onBell(v).dispose}},[q,k]),[k,w]}},58200:function(e,n,t){t.d(n,{f:function(){return a}});var r=t(70671),o=t(49932),i=t(43429);function a(){var e=(0,r.F)().values;return(0,i.useMemo)(function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.Sj.values;return{foreground:e.global.foregroundDefault,background:e.global.backgroundDefault,cursor:e.global.foregroundDefault,cursorAccent:e.global.backgroundHigher,selectionBackground:e.global.foregroundDefault,black:e.global.backgroundRoot,red:e.global.redStronger,green:e.global.accentPositiveDefault,yellow:e.global.yellowDefault,blue:e.global.blueStronger,magenta:e.global.magentaDefault,cyan:e.global.tealDefault,white:e.global.foregroundDefault,brightBlack:e.global.outlineDimmest,brightRed:e.global.redStrongest,brightGreen:e.global.accentPositiveStronger,brightYellow:e.global.yellowStronger,brightBlue:e.global.blueStrongest,brightMagenta:e.global.magentaStronger,brightCyan:e.global.tealStronger,brightWhite:e.global.foregroundDefault}}(e)},[e])}},45434:function(e,n,t){t.d(n,{J1:function(){return s},ce:function(){return m},hf:function(){return p},uL:function(){return u},yL:function(){return h}});var r,o,i=t(21289),a=t(74044),l=t(99149),c=t(52297);function u(e){return l.B4.Check(a.Dy.Union([c.LD,c.t3]),e)}function s(e){return l.B4.Check(c.vD,e)}(r=o||(o={})).Response="response",r.Error="error",r.Debug="debug",r.Intent="intent",r.TokenUsage="tokenUsage";var d={defaultLimit:{messageCharacters:2e3,responseTokens:1e3,fileContextCharacters:8e3,maxTotalTokens:4050},gpt35:{messageCharacters:5e3,responseTokens:4e3,fileContextCharacters:3e4,maxTotalTokens:16e3},gpt4:{messageCharacters:2e3,responseTokens:1e3,fileContextCharacters:1e4,maxTotalTokens:8e3},gpt4_32k:{messageCharacters:12e3,responseTokens:4e3,fileContextCharacters:6e4,maxTotalTokens:32e3}},f={"gemini-pro":{messageCharacters:5e3,responseTokens:4e3,fileContextCharacters:3e4,maxTotalTokens:16e3},"gpt-3.5-turbo-instruct":d.defaultLimit,"gpt-3.5-turbo":d.defaultLimit,"gpt-3.5-turbo-0613":d.defaultLimit,"gpt-3.5-turbo-0301":d.defaultLimit,"gpt-3.5-turbo-16k-0613":d.gpt35,"gpt-3.5-turbo-1106":d.gpt35,"gpt-4":d.gpt4,"gpt-4-0613":d.gpt4,"gpt-4-32k":d.gpt4_32k,"gpt-4-32k-0613":d.gpt4_32k,"gpt-4-1106-preview":{messageCharacters:12e3,responseTokens:4e3,fileContextCharacters:6e4,maxTotalTokens:32e3}};function h(e){return f[e]}var p={model:"gpt-4-1106-preview",weeklyTokenLimit:621e3},g=c.LD.anyOf.map(function(e){return e.const}),v=c.t3.const,m=(0,i._)(g).concat([v])},13090:function(e,n,t){t.d(n,{BP:function(){return i},BY:function(){return o},U4:function(){return r.U4},Vh:function(){return a},fF:function(){return r.fF},tr:function(){return r.tr}});var r=t(16385);function o(e){var n;if(!e)throw Error("Expected baseUrl");try{n=new URL(e)}catch(e){throw Error("baseUrl failed to parse as URL")}if("https:"!==n.protocol)throw Error("baseUrl must use https");return n.href.replace(/\/$/,"")}function i(e){return a(e,"extension.json")}function a(e,n){var t=o(e);return new URL(n,t).href}},16385:function(e,n,t){t.d(n,{MU:function(){return T},U4:function(){return C},fF:function(){return S},tr:function(){return Z}});var r=t(32477),o=t(74044),i=t(99149),a=t(80290),l=t.n(a),c=t(94998),u=t(61314),s=t.n(u),d=t(10602),f=t.n(d),h=t(34471),p=o.Dy.String({minLength:1,maxLength:64}),g=o.Dy.Object({path:o.Dy.String({minLength:1}),label:o.Dy.String({minLength:1})}),v=o.Dy.Object({image:(0,h.K5)(o.Dy.String({minLength:1})),title:o.Dy.String({minLength:1,maxLength:60}),body:o.Dy.String({minLength:1,maxLength:512})}),m=o.Dy.Object({glob:o.Dy.String({minLength:1}),handler:o.Dy.String({minLength:1}),name:(0,h.K5)(o.Dy.String({minLength:1})),icon:(0,h.K5)(o.Dy.String({minLength:1}))}),y=o.Dy.Object({handler:o.Dy.String({minLength:1}),name:(0,h.K5)(o.Dy.String({minLength:1})),icon:(0,h.K5)(o.Dy.String({minLength:1}))}),b=o.Dy.Union(c.l.map(function(e){return o.Dy.Literal(e)})),w=o.Dy.Object({name:b,reason:o.Dy.String()}),x=o.Dy.Object({page:o.Dy.String()}),k=o.Dy.Object({name:o.Dy.String({minLength:1,maxLength:60}),description:o.Dy.String({minLength:1,maxLength:255}),scopes:(0,h.K5)(o.Dy.Array(w)),longDescription:(0,h.K5)(o.Dy.String({minLength:1})),icon:(0,h.K5)(o.Dy.String({minLength:1})),tags:(0,h.K5)(o.Dy.Array(p,{maxItems:16})),coverImages:(0,h.K5)(o.Dy.Array(g,{maxItems:16})),fileHandlers:(0,h.K5)(o.Dy.Array(m,{maxItems:4})),tools:(0,h.K5)(o.Dy.Array(y,{maxItems:4})),website:(0,h.K5)(o.Dy.String()),authorEmail:(0,h.K5)(o.Dy.String()),background:(0,h.K5)(x),features:(0,h.K5)(o.Dy.Array(v,{minItems:1,maxItems:10}))});function C(e){var n=function(n,t,r){return{manifest:null,error:new h.Jg([{type:t,schema:k,path:n,value:e,message:r}])}};if(i.B4.Check(k,e)){if(e.website&&!s()(e.website))return n("website",i.B0.StringFormat,"website must be a valid url");if(e.authorEmail&&!f()(e.authorEmail))return n("authorEmail",i.B0.StringFormat,"authorEmail must be a valid email");var t=null!==(u=e.fileHandlers)&&void 0!==u?u:[],o=!0,a=!1,c=void 0;try{for(var u,d,p=t.entries()[Symbol.iterator]();!(o=(d=p.next()).done);o=!0){var g=(0,r._)(d.value,2),v=g[0],m=g[1];if(!l()(m.glob))return n("fileHandlers[".concat(v,"].glob"),i.B0.StringFormat,"glob must be a valid glob pattern")}}catch(e){a=!0,c=e}finally{try{o||null==p.return||p.return()}finally{if(a)throw c}}if(t&&t.length>1){var y=!0,b=!1,w=void 0;try{for(var x,C=t.entries()[Symbol.iterator]();!(y=(x=C.next()).done);y=!0){var Z=(0,r._)(x.value,2),S=Z[0],T=Z[1];if(!(T.icon&&T.name))return n("fileHandlers[".concat(S,"]"),i.B0.ObjectRequiredProperty,"When at least two fileHandlers are provided, they must all specify a name and icon")}}catch(e){b=!0,w=e}finally{try{y||null==C.return||C.return()}finally{if(b)throw w}}}var R=null!==(_=e.tools)&&void 0!==_?_:[];if(R&&R.length>1){var E=!0,D=!1,P=void 0;try{for(var _,A,L=R.entries()[Symbol.iterator]();!(E=(A=L.next()).done);E=!0){var I=(0,r._)(A.value,2),q=I[0],M=I[1];if(!(M.icon&&M.name))return n("tool[".concat(q,"]"),i.B0.ObjectRequiredProperty,"When at least two tools are provided, they must all specify a name and icon")}}catch(e){D=!0,P=e}finally{try{E||null==L.return||L.return()}finally{if(D)throw P}}}return{manifest:e,error:null}}return{manifest:null,error:(0,h.ZA)(k,e)}}function Z(e){var n=C(e);if(n.manifest)return n.manifest;throw n.error}function S(){var e,n,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{name:null!==(e=t.name)&&void 0!==e?e:"Unnamed Extension",description:null!==(n=t.description)&&void 0!==n?n:"(no description)"}}function T(e,n){return!!e.scopes&&void 0!==e.scopes.find(function(e){return e.name===n})}},94998:function(e,n,t){t.d(n,{k:function(){return r},l:function(){return o}});var r=[{key:"read",friendlyName:"Read files",description:"Read any file in your Repl"},{key:"write-exec",friendlyName:"Write & Execute",description:"Write to any file in your Repl and execute any code"},{key:"repldb:read",friendlyName:"ReplDB Read",description:"Read any key, or list all keys under any prefix in the repldb belonging to your Repl"},{key:"repldb:write",friendlyName:"ReplDB Write",description:"Write or delete any key in the repldb belonging to your Repl"},{key:"experimental-api",friendlyName:"Experimental APIs",description:"Use experimental APIs that may be unstable, change in behavior, or be removed entirely"}],o=r.map(function(e){return e.key})},34471:function(e,n,t){t.d(n,{Jg:function(){return g},K5:function(){return p},ZA:function(){return v}});var r=t(23026),o=t(3194),i=t(21289),a=t(92635),l=t(2543),c=t(74044),u=t(99149),s=t(31345),d=t.n(s),f=t(90390),h=t.n(f);c.lv.Set("uuid",function(e){return d()(e)}),c.lv.Set("date-time",function(e){return h()(e)});var p=function(e){return c.Dy.Optional(c.Dy.Union([c.Dy.Null(),e]))},g=function(e){"use strict";(0,o._)(t,e);var n=(0,l._)(t);function t(e){var o;return(0,r._)(this,t),(o=n.call(this)).name="Schema validation error",o.message=e.map(function(e){return"".concat(e.path,": ").concat(e.message)}).join("\n"),o.issues=e,o}return t}((0,a._)(Error));function v(e,n){return new g((0,i._)(u.B4.Errors(e,n)))}}}]);
//# sourceMappingURL=6645-4e170012b537191e.js.map