!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=Error().stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="f030629e-2c88-4a87-973c-27cf4df024a9",e._sentryDebugIdIdentifier="sentry-dbid-f030629e-2c88-4a87-973c-27cf4df024a9")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"d103cf55"};"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3838],{48813:function(e,n,t){t.d(n,{M:function(){return y},_d:function(){return h},bg:function(){return f},fP:function(){return g}});var r=t(45903),i=t(93295),o=t(23982),a=t(10561),l=t(68399),s=t(72986);function c(){var e=(0,i._)(["\n  fragment TipReplFragment on Repl {\n    id\n    slug\n    user {\n      id\n    }\n    totalCyclesTips\n    currentUserTotalTips\n  }\n"]);return c=function(){return e},e}function u(){var e=(0,i._)(["\n  fragment TipThemeFragment on CustomTheme {\n    id\n    slug\n    author {\n      id\n    }\n    totalCyclesTips\n    currentUserTotalTips\n  }\n"]);return u=function(){return e},e}function p(){var e=(0,i._)(["\n  mutation TipSendTip($input: SendTipInput!) {\n    sendTip(input: $input) {\n      ... on UserError {\n        __typename\n        message\n      }\n      ... on NotFoundError {\n        __typename\n        message\n      }\n      ... on UnauthorizedError {\n        __typename\n        message\n      }\n      ... on SendTipResult {\n        __typename\n        repl {\n          id\n          ...TipReplFragment\n          ...TopTipperReplLeaderboard\n        }\n        theme {\n          id\n          ...TipThemeFragment\n          ...TopTipperThemeLeaderboard\n        }\n        currentUser {\n          id\n          ...CyclesBalanceFragment\n        }\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return p=function(){return e},e}function d(){var e=(0,i._)(["\n  mutation TippingCyclesPurchaseStripeCheckoutSession(\n    $input: CreateCyclesStripeCheckoutSessionInput!\n  ) {\n    createCyclesStripeCheckoutSession(input: $input) {\n      ... on CreateCyclesStripeCheckoutSessionResult {\n        sessionUrl\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return d=function(){return e},e}var m={},f=(0,o.Ps)(c()),h=(0,o.Ps)(u()),T=(0,o.Ps)(p(),f,a.pT,h,a.h1,l.KD);function g(e){var n=(0,r._)({},m,e);return s.D(T,n)}var v=(0,o.Ps)(d());function y(e){var n=(0,r._)({},m,e);return s.D(v,n)}},9809:function(e,n,t){t.d(n,{R1:function(){return h},SI:function(){return y},ir:function(){return b},rd:function(){return g}});var r=t(45903),i=t(93295),o=t(23982),a=t(48813),l=t(10561),s=t(77393);function c(){var e=(0,i._)(["\n  fragment IsTippingAvailableForRecipient on User {\n    id\n    hasPrivacyRole\n    isVerified\n  }\n"]);return c=function(){return e},e}function u(){var e=(0,i._)(["\n  fragment TipSurfaceOwnerFragment on User {\n    id\n    username\n    ...IsTippingAvailableForRecipient\n  }\n  ","\n"]);return u=function(){return e},e}function p(){var e=(0,i._)(["\n  fragment IsTippingAvailableForSender on CurrentUser {\n    id\n    hasPrivacyRole\n    isVerified\n  }\n"]);return p=function(){return e},e}function d(){var e=(0,i._)(["\n  query TipRepl($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        user {\n          ... on User {\n            id\n            ...TipSurfaceOwnerFragment\n          }\n        }\n        ...TipReplFragment\n        ...TopTipperReplLeaderboard\n      }\n    }\n    currentUser {\n      id\n      ...IsTippingAvailableForSender\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return d=function(){return e},e}function m(){var e=(0,i._)(["\n  query TipTheme($input: CustomThemeByIdInput!) {\n    customThemeById(input: $input) {\n      ... on CustomTheme {\n        author {\n          ... on User {\n            id\n            ...TipSurfaceOwnerFragment\n          }\n        }\n        ...TipThemeFragment\n        ...TopTipperThemeLeaderboard\n      }\n    }\n    currentUser {\n      id\n      ...IsTippingAvailableForSender\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return m=function(){return e},e}var f={},h=(0,o.Ps)(c()),T=(0,o.Ps)(u(),h),g=(0,o.Ps)(p()),v=(0,o.Ps)(d(),T,a.bg,l.pT,g);function y(e){var n=(0,r._)({},f,e);return s.a(v,n)}var x=(0,o.Ps)(m(),T,a._d,l.h1,g);function b(e){var n=(0,r._)({},f,e);return s.a(x,n)}},93838:function(e,n,t){t.d(n,{ZP:function(){return ey},L0:function(){return ef},mU:function(){return em}});var r=t(39698),i=t(32477),o=t(8182),a=t(29287),l=t(74833),s=t(56596),c=t(74094),u=t(88936),p=t(34142),d=t(21289),m=t(87682),f=t(48813),h=t(30983),T=t(1498),g=t(60814),v=t(43429),y=t(55534),x=t(59868),b=t(51384),_=t(38080),S=t(49996),C=t(22326),w=(0,b.F4)({"0%":{width:"100%"},"100%":{width:"0%"}}),Z=function(e){var n,t=e.tipAmount,i=e.onUndo,u=e.show,p=e.undoTime;return u?(0,o.BX)(_.Tg,{tag:"button",css:[a.l0.focusRing,a.l0.position.fixed,a.l0.bottom(24),a.l0.right(24),a.l0.zIndex(100),a.l0.borderRadius(8),a.l0.backgroundColor.accentPrimaryDimmer,a.l0.cursor.pointer,a.l0.overflow("hidden"),(n={},(0,r._)(n,(0,S.EM)("mobileMax"),[a.l0.bottom(16),a.l0.left(16),a.l0.width("calc(100% - 32px)")]),(0,r._)(n,"&:focus-visible",{outlineColor:a.TV.accentPrimaryStrongest,outlineOffset:0}),n)],onClick:i,children:[(0,o.BX)(s.G,{css:[a.l0.pb(24),a.l0.pt(12),a.l0.px(12),a.l0.zIndex(2),a.l0.rowWithGap(48),a.l0.align.center,a.l0.justify.spaceBetween],children:[(0,o.BX)(s.G,{css:[a.l0.colWithGap(8)],children:[(0,o.tZ)(l.xv,{variant:"subheadBig",multiline:!1,css:[a.l0.textAlign.left],children:"Woohoo!"}),(0,o.BX)(s.G,{css:[a.l0.rowWithGap(2),a.l0.align.center],children:[(0,o.tZ)(l.xv,{multiline:!1,children:"You just tipped"}),(0,o.tZ)(c.Z,{size:16}),(0,o.BX)(l.xv,{multiline:!1,children:[" ","".concat((0,C.d)(t))]})]})]}),(0,o.tZ)(s.G,{css:[a.l0.colWithGap(4),a.l0.align.end],children:(0,o.tZ)(l.xv,{css:[a.l0.textAlign.center,a.l0.fontWeight.medium,a.l0.pt(4)],children:"Cancel Tip"})})]}),(0,o.tZ)(s.G,{css:[a.l0.height(6),a.l0.position.absolute,a.l0.bottom(0),a.l0.left(0),a.l0.right(24),a.l0.zIndex(1),a.l0.backgroundColor.accentPrimaryDefault,{animation:"".concat(w," ").concat(p+100,"ms linear")}]})]}):null},U=t(90351),G=t(48796),B={100:"\uD83C\uDF6C",500:"\uD83C\uDF55",1e3:"\uD83C\uDF2F"};function I(e){var n=e.tipAmount;return e.sending?(0,o.tZ)(o.HY,{children:"Sending…"}):(0,o.BX)(s.G,{css:[a.l0.colWithGap(8)],children:[(0,o.tZ)(l.xv,{variant:"subheadBig",multiline:!1,children:B[n]}),(0,o.BX)(s.G,{css:[a.l0.rowWithGap(2),a.l0.align.center],children:[(0,o.tZ)(l.xv,{css:[a.l0.pr(4)],multiline:!1,children:"Tip"}),(0,o.tZ)(c.Z,{size:16}),(0,o.tZ)(l.xv,{multiline:!1,children:"".concat((0,C.d)(n))})]})]})}var R=t(94106),X=t(75582),P=t(34396),k=t(40699),E=t(40028),F=(0,b.F4)({"10%":{transform:"translate3d(-1px, 0, 0)"},"20%":{transform:"translate3d(2px, 0, 0)"},"30%":{transform:"translate3d(-4px, 0, 0)"},"50%":{transform:"translate3d(-4px, 0, 0)"},"70%":{transform:"translate3d(-4px, 0, 0)"},"80%":{transform:"translate3d(2px, 0, 0)"},"40%":{transform:"translate3d(4px, 0, 0)"},"60%":{transform:"translate3d(4px, 0, 0)"},"90%":{transform:"translate3d(-1px, 0, 0)"}}),W=function(e){return e.charAt(0).toUpperCase()+e.slice(1)};function D(e){var n,t,l=e.tipAmount,c=e.currentUser,u=e.tipTarget,b=e.tipStatus,_=e.textOnly,S=void 0!==_&&_,C=e.setTipStatus,w=u.id,B=u.type,D=u.slug,A=u.owner,O=A.id,z=A.username,j="@".concat(z,"/").concat(D),q=(0,y.Z)().showError,Y=(0,v.useRef)(void 0),$=(0,i._)((0,v.useState)(!1),2),M=$[0],V=$[1],L=(0,g.Z)({forceFetch:!1}).cycles,H=(0,U.$0)().fireCircularBurstFrom,N=(0,v.useRef)(null),K=(0,G.T)(),J=(0,i._)((0,v.useState)(!1),2),Q=J[0],ee=J[1],en="repl"===B?"replId":"themeId",et=(0,i._)((0,f.fP)({onError:function(e){return q(e.message)},onCompleted:function(e){C("ready"),"SendTipResult"!==e.sendTip.__typename&&(e.sendTip.message?q(e.sendTip.message):q("Something went wrong"))}}),2),er=et[0],ei=et[1].loading,eo=(0,R.useRouter)(),ea=(0,i._)((0,f.M)({onCompleted:function(e){var n=e.createCyclesStripeCheckoutSession;if(n&&void 0!==n.__typename){if("UnauthorizedError"===n.__typename||"UserError"===n.__typename){C("ready"),q(n.message);return}"CreateCyclesStripeCheckoutSessionResult"===n.__typename&&eo.push(n.sessionUrl)}}}),2),el=ea[0],es=ea[1].loading,ec="ready"===b&&!!(null==c?void 0:c.isVerified)&&c.id!==O&&!ei&&!M&&!es,eu=(n=(0,p._)(function(){var e,n,t,i;return(0,m.Jh)(this,function(o){switch(o.label){case 0:if(!ec)return[2];if((0,x.j)(x.U3.TIP_USED,(e={action:"tip-send-requested"},(0,r._)(e,B,j),(0,r._)(e,"tipTargetType",B),(0,r._)(e,"amount",l),e)),!(!L||l>L))return[3,2];switch((0,x.j)(x.U3.TIP_USED,(n={action:"insufficient-balance"},(0,r._)(n,B,j),(0,r._)(n,"tipTargetType",B),(0,r._)(n,"amount",l),n)),C("toppingUp"),ee(!0),t=Math.max(l,k.q2),B){case"repl":i=P.oj.Repl;break;case"theme":i=P.oj.Theme;break;default:(0,E.Z)(B)}return[4,el({variables:{input:{purchaseType:X.pO.OneTime,quantity:t,redirectDestination:P.ac.TipSurface,redirectTipSurface:{desiredAmount:l,slug:D,surfaceType:i,username:z}}}})];case 1:return o.sent(),[2];case 2:return C("sending"),N.current&&!K&&H({element:N.current}),V(!0),Y.current=setTimeout(function(){V(!1),er({variables:{input:(0,r._)({amount:l},en,w)}})},5e3),[2]}})}),function(){return n.apply(this,arguments)});ec?t=(l>=1e3?"Super-donor — ":l>=500?"Benefactor — ":"Supporter —\xa0")+"Tip this ".concat(W(B)," to show your support for @").concat(u.owner.username):c&&!c.isVerified?t="You must be verified to tip":c&&c.id===O?t="You cannot tip your own ".concat(W(B)):c||(t="You must be logged in to tip");var ep=(0,o.tZ)(s.G,{innerRef:N,css:(0,d._)(Q?[{animation:"".concat(F," 1s"),"animation-iteration-count":1,"transition-timing-function":"cubic-bezier(0.4, 0, 0.2, 1)"}]:[]).concat((0,d._)(S?[a.l0.flex.grow(1)]:[])),onAnimationEnd:function(){ee(!1)},children:(0,o.tZ)(h.u,{tooltip:t,placement:"top",isDisabled:ei||M||"ready"!==b,children:(0,o.tZ)(T.zx,{disabled:!ec,css:S?[a.l0.flex.grow(1)]:[a.l0.px(12),a.l0.py(8),a.l0.height(72),a.l0.width(96)],onClick:function(){ec&&eu()},text:S?(0,o.BX)(o.HY,{children:["Tip $",Math.floor(l/100)]}):(0,o.tZ)(I,{tipAmount:l,sending:ei||M})})})});return(0,o.BX)(o.HY,{children:[ep,(0,o.tZ)(Z,{tipAmount:l,undoTime:5e3,show:M,onUndo:function(){var e;(0,x.j)(x.U3.TIP_USED,(e={action:"tip-undone"},(0,r._)(e,B,j),(0,r._)(e,"tipTargetType",B),(0,r._)(e,"amount",l),e)),clearTimeout(Y.current),ee(!0),V(!1),C("ready")}})]})}var A=t(9809),O=t(79378),z=t(49344),j=t(93496),q=t(50862),Y=t(5542);function $(e){var n=e.leaderboardTitle,t=e.topTippers;return(0,o.BX)(s.G,{css:[a.l0.colWithGap(24),a.l0.maxHeight("70vh"),a.l0.overflowY("scroll")],children:[(0,o.tZ)(l.xv,{variant:"headerDefault",multiline:!1,children:n}),(0,o.tZ)(s.G,{css:[a.l0.flex.column],children:t.map(function(e,n){var t=e.user,r=e.totalCyclesTipped;return t?(0,o.BX)(s.G,{tabIndex:0,css:[a.l0.cursor.pointer,a.l0.rowWithGap(12),a.l0.align.center,a.l0.borderRadius(8),a.l0.px(12),a.l0.py(8),j.gU.listItem,{flex:1,"> .popover-control-container":[{width:"100%"},a.l0.mr(0)]}],children:[(0,o.tZ)(l.xv,{css:[a.l0.fontWeight.medium],multiline:!1,children:n+1}),(0,o.tZ)(q.Z,{username:t.username,children:(0,o.tZ)(Y.ZP,{user:t,children:(0,o.BX)(s.G,{css:[a.l0.flex.row,a.l0.justify.spaceBetween,a.l0.align.center],children:[(0,o.BX)(s.G,{css:[a.l0.rowWithGap(8),a.l0.align.center],children:[(0,o.tZ)(O.q,{src:t.image,username:t.username,size:32,layout:"intrinsic"}),(0,o.tZ)(l.xv,{multiline:!1,children:t.username})]}),(0,o.BX)(s.G,{css:[a.l0.rowWithGap(4),a.l0.pl(4),a.l0.align.center],children:[(0,o.tZ)(c.Z,{size:16}),(0,o.BX)(l.xv,{multiline:!1,children:[" ","".concat((0,C.d)(r))]})]})]})})})]},n):null})})]})}var M=t(93918),V=(0,M.X)({userCardWrapper:[a.l0.focusRingOnAfter,{background:"transparent","::after":{cursor:"pointer",borderRadius:a.TV.space32,content:'""',position:"absolute",top:0,right:0,bottom:0,left:0,display:"block",zIndex:1}}],userCard:[a.l0.rowWithGap(8),a.l0.align.center],userCardText:[a.l0.rowWithGap(8),a.l0.align.center],cyclesTipped:[a.l0.rowWithGap(2),a.l0.pl(4),a.l0.align.center]}),L=function(e){var n=e.tipTarget,t=n.topTippers,a=n.type,u=n.slug,p=n.totalCyclesTips,d=e.textOnly,m=(0,i._)((0,v.useState)(!1),2),f=m[0],T=m[1],g=t[0],y=g.user,b=g.totalCyclesTipped;if(!y)return null;var _=null;_=void 0!==d&&d?(0,o.BX)(s.G,{css:V.userCardText,children:[(0,o.tZ)(l.xv,{multiline:!1,children:y.username}),(0,o.BX)(l.xv,{children:[" ","$".concat((0,C.d)(Math.floor(b/100)))]})]}):(0,o.BX)(s.G,{css:V.userCard,children:[(0,o.tZ)(O.q,{src:y.image,username:y.username,size:24,layout:"intrinsic"}),(0,o.tZ)(l.xv,{multiline:!1,children:y.username}),(0,o.BX)(s.G,{css:V.cyclesTipped,children:[(0,o.tZ)(c.Z,{size:16}),(0,o.BX)(l.xv,{multiline:!1,children:[" ","".concat((0,C.d)(b))]})]})]});var S=s.K.button,w=1===t.length?_:(0,o.tZ)(h.u,{tooltip:"See the leaderboard of the best supporters",children:(0,o.tZ)(S,{onClick:function(){var e;T(!0),(0,x.j)(x.U3.TIP_USED,(e={action:"leaderboard-opened"},(0,r._)(e,a,u),(0,r._)(e,"tipTargetType",a),(0,r._)(e,"amount",p),e))},css:V.userCardWrapper,children:_})});return(0,o.BX)(o.HY,{children:[w,(0,o.tZ)(z.u,{isOpen:f,onRequestClose:function(){return T(!1)},children:(0,o.tZ)($,{leaderboardTitle:"Supporters Leaderboard",topTippers:t})})]})},H=t(45903),N=t(25e3),K=t(68399),J="12px",Q=a.TV.accentPrimaryDefault,ee=a.TV.orangeDefault,en="-".concat("2px"," ").concat("2px"),et="".concat("2px"," ").concat("2px"),er="".concat("2px"," -").concat("2px"),ei="-".concat("2px"," -").concat("2px"),eo=(0,b.F4)("\n  0% { box-shadow: ".concat(en," ").concat(J," ").concat(Q,", ").concat(er," ").concat(J," ").concat(ee,"; }\n  25% { box-shadow: ").concat(et," ").concat(J," ").concat(Q,", ").concat(ei," ").concat(J," ").concat(ee,"; }\n  50% { box-shadow: ").concat(er," ").concat(J," ").concat(Q,", ").concat(en," ").concat(J," ").concat(ee,"; }\n  75% { box-shadow: ").concat(ei," ").concat(J," ").concat(Q,", ").concat(et," ").concat(J," ").concat(ee,"; }\n  100% { box-shadow: ").concat(en," ").concat(J," ").concat(Q,", ").concat(er," ").concat(J," ").concat(ee,"; }\n")),ea=(0,b.F4)("\n  from { text-shadow: 0 0 8px rgba(255, 255, 255, 0.3); }\n  to { text-shadow: 0 0 8px rgba(255, 255, 255, 0.7); }\n"),el=function(e){var n="string"==typeof e.query.replUrl?e.query.replUrl:void 0;e.replace({pathname:e.pathname,query:(0,N._)((0,H._)({},e.query),{checkout:void 0,amount:void 0})},n)},es=(0,M.X)({modal:[a.l0.colWithGap(16),a.l0.p(8)],buttonContainer:[a.l0.flex.row,a.l0.justify.center],button:[a.l0.px(12),a.l0.py(8),a.l0.height(72),a.l0.width(144),(0,b.iv)({marginTop:16,transition:"box-shadow 240ms ease-out, border-color 120ms ease-out, transform 240ms ease-out, background-color 120ms ease-out",boxShadow:"-".concat("2px"," ").concat("2px"," ").concat(J," ").concat(Q,", ").concat("2px"," -").concat("2px"," ").concat(J," ").concat(ee),animation:eo+" 1500ms linear infinite 240ms"," span":{textShadow:"0 0 8px #ffffff80",animation:ea+" 1200ms ease-in-out infinite alternate 120ms"}})]}),ec={query:K.s8},eu=function(e){var n=e.desiredAmount,t=e.tipTarget,a=e.setTipStatus,c=t.id,u=t.type,p=t.slug,d=(0,R.useRouter)(),m=(0,i._)((0,v.useState)(!0),2),h=m[0],g=m[1],b=(0,y.Z)().showError,_=(0,U.$0)().fireCircularBurstFrom,S=(0,v.useRef)(null),C=(0,G.T)(),w="repl"===u?"replId":"themeId",Z=(0,i._)((0,f.fP)({onError:function(e){return b(e.message)},onCompleted:function(e){a("ready"),"SendTipResult"!==e.sendTip.__typename?e.sendTip.message?b(e.sendTip.message):b("Something went wrong"):el(d)},refetchQueries:[ec]}),2),B=Z[0],X=Z[1].loading;return(0,o.tZ)(z.u,{isOpen:h,onRequestClose:function(){if(!X){var e;g(!1),el(d),(0,x.j)(x.U3.TIP_USED,(e={action:"post-checkout-modal-closed"},(0,r._)(e,u,p),(0,r._)(e,"tipTargetType",u),(0,r._)(e,"amount",n),e))}},children:(0,o.BX)(s.G,{css:es.modal,children:[(0,o.tZ)(l.xv,{variant:"subheadBig",multiline:!1,children:"Awesome!"}),(0,o.tZ)(l.xv,{children:"You successfully topped up your Cycles balance. You can now tip this creator and show them your support."}),(0,o.tZ)(s.G,{css:es.buttonContainer,children:(0,o.tZ)(T.zx,{ref:S,text:(0,o.tZ)(I,{tipAmount:n,sending:X}),disabled:X,onClick:function(){var e;X||((0,x.j)(x.U3.TIP_USED,(e={action:"tip-send-requested"},(0,r._)(e,u,p),(0,r._)(e,"tipTargetType",u),(0,r._)(e,"amount",n),e)),a("sending"),S.current&&!C&&_({element:S.current}),B({variables:{input:(0,r._)({amount:n},w,c)}}))},css:es.button})})]})})};function ep(e){var n=e.tipTarget,t=e.currentUser,r=e.setTipStatus,i=(0,R.useRouter)();if(!(null==t?void 0:t.isVerified)||t.id===n.owner.id)return null;var a=i.query,l=a.checkout,s=parseInt(a.amount,10);return"success"===l&&s&&(100===s||500===s||1e3===s)&&"success"===l&&s?(0,o.tZ)(eu,{tipTarget:n,desiredAmount:s,setTipStatus:r}):null}var ed=t(25425),em=function(){return(0,ed.P5)({controlName:"flag-usage-utopia",type:"boolean",logFlagToAnalytics:!0})},ef=function(e){var n=e.replOwner,t=e.currentUser;return!!n&&!!n.isVerified&&!n.hasPrivacyRole&&(null==t||!t.hasPrivacyRole)},eh=(0,M.X)({tips:[a.l0.colWithGap(16),a.l0.justify.center],tipButtons:[a.l0.rowWithGap(12),(0,r._)({},(0,S.EM)("tabletMin"),[a.l0.mr(0)])],tipsStats:[a.l0.rowWithGap(16)],totalTipsYouTippedWrapper:[a.l0.rowWithGap(16),(0,r._)({},(0,S.EM)("mobileMax"),[a.l0.mr(0),a.l0.justify.center])],tipSection:[a.l0.colWithGap(4)],tipSectionTitle:[a.l0.color.foregroundDimmer,a.l0.pb(2)],tipSectionCycles:[a.l0.py(8),a.l0.px(16),a.l0.borderRadius(4),a.l0.rowWithGap(2),a.l0.justify.center,a.l0.backgroundColor.backgroundDefault,a.l0.height(40),a.l0.align.center,{borderRadius:"40px",minWidth:70}],tipSectionCyclesText:[a.l0.py(0),a.l0.px(0),a.l0.height("auto"),a.l0.justify.start,{background:"transparent"}],topTipperContainer:[a.l0.py(8),a.l0.pl(8),a.l0.pr(16),a.l0.borderRadius(4),a.l0.rowWithGap(2),a.l0.justify.spaceEvenly,a.l0.backgroundColor.backgroundDefault,j.gU.filled,a.l0.position.relative,{borderRadius:"100px",minWidth:80}],topTipperContainerText:[a.l0.px(0),a.l0.py(0),{background:"transparent","&&:hover":[{background:"transparent"}]}]}),eT=function(e){var n,t,r,u=e.tipTarget,p=e.textOnly,d=void 0!==p&&p,m=e.currentUser,f=(0,i._)((0,v.useState)("ready"),2),h=f[0],T=f[1],g=m&&m.id===u.owner.id;return(0,o.BX)(o.HY,{children:[(0,o.tZ)(s.G,{css:[a.l0.colWithGap(8)],id:"tips",children:(0,o.BX)(s.G,{css:eh.tips,children:[g?null:(0,o.BX)(s.G,{css:[eh.tipButtons],children:[(0,o.tZ)(D,{currentUser:m,tipAmount:100,tipTarget:u,tipStatus:h,textOnly:d,setTipStatus:T}),(0,o.tZ)(D,{currentUser:m,tipAmount:500,tipTarget:u,tipStatus:h,textOnly:d,setTipStatus:T}),(0,o.tZ)(D,{currentUser:m,tipAmount:1e3,tipTarget:u,tipStatus:h,textOnly:d,setTipStatus:T})]}),(0,o.BX)(s.G,{css:[eh.tipsStats],children:[(0,o.BX)(s.G,{css:eh.totalTipsYouTippedWrapper,children:[(0,o.BX)(s.G,{css:eh.tipSection,children:[(0,o.tZ)(l.xv,{css:eh.tipSectionTitle,multiline:!1,children:"Total Tips"}),d?(0,o.tZ)(l.xv,{multiline:!1,children:"$".concat((0,C.d)(u.totalCyclesTips/100))}):(0,o.BX)(s.G,{css:eh.tipSectionCycles,children:[(0,o.tZ)(c.Z,{css:[a.l0.mt(2)],size:16}),(0,o.tZ)(l.xv,{multiline:!1,children:"".concat((0,C.d)(u.totalCyclesTips))})]})]}),u.currentUserTotalTips&&u.currentUserTotalTips>0?(0,o.BX)(s.G,{css:eh.tipSection,children:[(0,o.tZ)(l.xv,{css:eh.tipSectionTitle,multiline:!1,children:"You tipped"}),(0,o.BX)(s.G,{css:[eh.tipSectionCycles,d&&eh.tipSectionCyclesText],children:[d?null:(0,o.tZ)(c.Z,{css:[a.l0.mt(2)],size:16}),(0,o.tZ)(l.xv,{multiline:!1,children:d?"$".concat((0,C.d)(Math.floor(u.currentUserTotalTips/100))):"".concat((0,C.d)(u.currentUserTotalTips))})]})]}):null]}),(null===(n=u.topTippers)||void 0===n?void 0:n.length)>0&&(null===(t=u.topTippers[0])||void 0===t?void 0:t.user)!==null?(0,o.BX)(s.G,{css:eh.tipSection,children:[(0,o.BX)(l.xv,{css:eh.tipSectionTitle,multiline:!1,children:["Top Supporter",(null===(r=u.topTippers)||void 0===r?void 0:r.length)>1?"s":""]}),(0,o.tZ)(s.G,{css:[eh.topTipperContainer,d&&eh.topTipperContainerText],children:(0,o.tZ)(L,{tipTarget:u,textOnly:d})})]}):null]})]})}),(0,o.tZ)(ep,{tipTarget:u,currentUser:m,setTipStatus:T})]})},eg=function(e){var n,t,r,i=e.replId,a=e.textOnly,l=(0,A.SI)({variables:{id:i}}),s=l.data,c=l.loading,p=(null==s?void 0:s.repl.__typename)==="Repl"?s.repl:null,d=(null==s?void 0:null===(n=s.currentUser)||void 0===n?void 0:n.__typename)==="CurrentUser"?s.currentUser:null;if(!p||!ef({replOwner:null==p?void 0:p.user,currentUser:d}))return null;if(!(null==p?void 0:null===(t=p.user)||void 0===t?void 0:t.id)||!(null==p?void 0:null===(r=p.user)||void 0===r?void 0:r.username))throw Error("Expected repl id to be set");if(c)return(0,o.tZ)(u.Z,{});var m={id:p.id,slug:p.slug,type:"repl",owner:p.user,totalCyclesTips:p.totalCyclesTips,topTippers:p.topTippers,currentUserTotalTips:p.currentUserTotalTips};return(0,o.tZ)(eT,{tipTarget:m,currentUser:d,textOnly:void 0!==a&&a})},ev=function(e){var n,t=e.themeId,r=(0,A.ir)({variables:{input:{themeId:t}}}),i=r.data,a=r.loading,l=(null==i?void 0:i.customThemeById.__typename)==="CustomTheme"?i.customThemeById:null,s=(null==i?void 0:null===(n=i.currentUser)||void 0===n?void 0:n.__typename)==="CurrentUser"?i.currentUser:null;if(!l||!ef({replOwner:null==l?void 0:l.author,currentUser:s}))return null;if(a)return(0,o.tZ)(u.Z,{});if(!l.author)return null;var c={id:l.id,slug:l.slug,type:"theme",owner:l.author,totalCyclesTips:l.totalCyclesTips,topTippers:l.topTippers,currentUserTotalTips:l.currentUserTotalTips};return(0,o.tZ)(eT,{tipTarget:c,currentUser:s})};function ey(e){if("replId"in e)return(0,o.tZ)(eg,{replId:e.replId,textOnly:e.textOnly});if("themeId"in e)return(0,o.tZ)(ev,{themeId:e.themeId});throw Error("Tips component requires a tippable target.")}},10561:function(e,n,t){t.d(n,{h1:function(){return u},pT:function(){return c}});var r=t(93295),i=t(23982);function o(){var e=(0,r._)(["\n  fragment TopTippersFragment on TipperUser {\n    user {\n      id\n      username\n      url\n      image\n    }\n    totalCyclesTipped\n  }\n"]);return o=function(){return e},e}function a(){var e=(0,r._)(["\n  fragment TopTipperReplLeaderboard on Repl {\n    id\n    topTippers {\n      ...TopTippersFragment\n    }\n  }\n  ","\n"]);return a=function(){return e},e}function l(){var e=(0,r._)(["\n  fragment TopTipperThemeLeaderboard on CustomTheme {\n    id\n    topTippers {\n      ...TopTippersFragment\n    }\n  }\n  ","\n"]);return l=function(){return e},e}var s=(0,i.Ps)(o()),c=(0,i.Ps)(a(),s),u=(0,i.Ps)(l(),s)}}]);
//# sourceMappingURL=3838-e67e51f8fcfd5e5b.js.map