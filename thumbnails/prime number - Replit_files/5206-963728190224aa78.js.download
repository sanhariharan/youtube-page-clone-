!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=Error().stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="5ab00587-19b0-43fb-a241-8bea1e1b08e2",e._sentryDebugIdIdentifier="sentry-dbid-5ab00587-19b0-43fb-a241-8bea1e1b08e2")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"d103cf55"};"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5206],{95206:function(e,n,t){t.d(n,{Z:function(){return eg}});var r,o,i=t(32477),l=t(8182),s=t(75582),u=t(20399),a=t(43429),d=t(49344),c=t(56596),p=t(29287),m=t(74833),h=t(1498),f=t(18836),v=t(45903),b=t(93295),g=t(23982),Z=t(72986);function w(){var e=(0,b._)(["\n  mutation ReportRepl($replId: String, $reason: String!) {\n    createBoardReport(replId: $replId, reason: $reason) {\n      id\n    }\n  }\n"]);return w=function(){return e},e}var y={},C=(0,g.Ps)(w()),D=t(55534),T=t(75875),_=c.K.form;function R(e){var n,t=e.replId,r=e.onDone,o=(0,i._)((0,a.useState)(""),2),s=o[0],u=o[1],d=(0,D.Z)(),b=d.showConfirm,g=d.showError,w=(0,i._)((n=(0,v._)({},y,{variables:{replId:t,reason:s},onCompleted:function(){b("Repl reported"),r()},onError:function(e){g(e.message)}}),Z.D(C,n)),2),R=w[0],G=w[1].loading;return(0,l.BX)(c.G,{css:[p.l0.colWithGap(24)],children:[(0,l.tZ)(m.xv,{variant:"subheadBig",multiline:!1,children:"Report Repl"}),(0,l.BX)(_,{onSubmit:function(e){e.preventDefault(),s?R():g("Not reported. No reason specified.")},css:[p.l0.colWithGap(32)],children:[(0,l.tZ)(c.G,{css:[p.l0.colWithGap(8)],children:(0,l.tZ)(f.B,{placeholder:"Why do you want to report this Repl?",value:s,onChange:function(e){return u(e.currentTarget.value)},css:[p.l0.minHeight(64),p.l0.maxHeight(128),{resize:"vertical"}]})}),(0,l.BX)(c.G,{css:[p.l0.rowWithGap(16),p.l0.justify.end],children:[(0,l.tZ)(c.G,{children:(0,l.tZ)(h.zx,{type:"button",text:"Cancel",onClick:function(){return r()}})}),(0,l.tZ)(c.G,{children:(0,l.tZ)(h.zx,{disabled:G,text:G?"Reporting":"Report Repl",type:"submit",colorway:"negative",iconLeft:(0,l.tZ)(T.Z,{}),onClick:function(){return r()}})})]})]})]})}function G(){var e=(0,b._)(["\n  mutation WarnUser($username: String!, $reason: String!) {\n    warnUser(username: $username, reason: $reason) {\n      ... on Warning {\n        id\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return G=function(){return e},e}var x={},P=(0,g.Ps)(G()),E=t(20573),U=c.K.form;function B(e){var n,t=e.username,r=e.onDone,o=(0,i._)((0,a.useState)(""),2),s=o[0],u=o[1],d=(0,D.Z)(),b=d.showConfirm,g=d.showError,w=(0,i._)((n=(0,v._)({},x,{onCompleted:function(e){var n=e.warnUser;"UserError"===n.__typename?g(n.message):b("The user has been warned.")}}),Z.D(P,n)),2),y=w[0],C=w[1].loading;return(0,l.BX)(c.G,{css:[p.l0.colWithGap(24)],children:[(0,l.tZ)(m.h4,{level:1,variant:"headerDefault",children:"Warn the author of the Repl?"}),(0,l.BX)(U,{onSubmit:function(e){e.preventDefault(),s&&t?(y({variables:{username:t,reason:s}}),r()):g("Please provide a reason.")},css:[p.l0.colWithGap(24)],children:[(0,l.tZ)(f.B,{placeholder:"Reason for warning the user",value:s,onChange:function(e){return u(e.currentTarget.value)},css:{resize:"none",minHeight:40}}),(0,l.BX)(c.G,{css:[p.l0.rowWithGap(8),p.l0.justify.end],children:[(0,l.tZ)(h.zx,{type:"button",text:"Cancel",onClick:function(){return r()}}),(0,l.tZ)(h.zx,{disabled:C,colorway:"negative",text:C?"Warning user...":"Yes, warn this user",type:"submit",iconLeft:(0,l.tZ)(E.Z,{})})]})]})]})}function H(){var e=(0,b._)(["\n  mutation BanUserFromCommunity($username: String!, $reason: String!) {\n    banCommunityUser(username: $username, reason: $reason) {\n      ... on BannedBoardUser {\n        id\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return H=function(){return e},e}var W={},k=(0,g.Ps)(H()),I=t(24890),S=c.K.form;function A(e){var n,t=e.username,r=e.onDone,o=(0,i._)((0,a.useState)(""),2),s=o[0],u=o[1],d=(0,D.Z)(),b=d.showConfirm,g=d.showError,w=(0,i._)((n=(0,v._)({},W,{onCompleted:function(e){var n=e.banCommunityUser;"UserError"===n.__typename?g(n.message):b("The user has been banned.")}}),Z.D(k,n)),2),y=w[0],C=w[1].loading;return(0,l.BX)(c.G,{css:[p.l0.colWithGap(24)],children:[(0,l.tZ)(m.h4,{level:1,variant:"headerDefault",children:"Ban the author of the Repl?"}),(0,l.tZ)(m.xv,{children:"Are you sure you want to ban this user? All their Repls will be deleted and they will no longer be able to access their account."}),(0,l.BX)(S,{onSubmit:function(e){e.preventDefault(),s&&t?(y({variables:{username:t,reason:s}}),r()):g("Please provide a reason.")},css:[p.l0.colWithGap(24)],children:[(0,l.tZ)(c.G,{css:[p.l0.colWithGap(8)],children:(0,l.tZ)(f.B,{placeholder:"Reason for banning the user",value:s,onChange:function(e){return u(e.currentTarget.value)},css:{resize:"none",minHeight:40}})}),(0,l.BX)(c.G,{css:[p.l0.rowWithGap(8),p.l0.justify.end],children:[(0,l.tZ)(h.zx,{type:"button",text:"Cancel",onClick:function(){return r()}}),(0,l.tZ)(h.zx,{disabled:C,colorway:"negative",text:C?"Banning user...":"Yes, ban this user",type:"submit",iconLeft:(0,l.tZ)(I.Z,{})})]})]})]})}var X=t(5693),$=t(34142),z=t(87682),O=t(56353);function q(){var e=(0,b._)(["\n  mutation UnpublishTemplate($input: DeleteReplDeploymentInput!) {\n    deleteReplDeployment(input: $input) {\n      ... on Repl {\n        id\n        ...PublishReplData\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n  ","\n"]);return q=function(){return e},e}var N={},M=(0,g.Ps)(q(),O.FW),L=t(98859),j=c.K.form;function Y(e){var n,t,r=e.replId,o=e.onDone,s=(0,D.Z)(),u=s.showConfirm,a=s.showError,d=(0,i._)((n=(0,v._)({},N,{variables:{input:{replId:r}}}),Z.D(M,n)),2),f=d[0],b=d[1];return(0,l.BX)(c.G,{css:[p.l0.colWithGap(24)],children:[(0,l.tZ)(m.h4,{level:1,variant:"headerDefault",children:"Unpublish Template from Community?"}),(0,l.BX)(j,{onSubmit:(t=(0,$._)(function(e){var n,t,r,i;return(0,z.Jh)(this,function(l){switch(l.label){case 0:e.preventDefault(),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,f()];case 2:return i=l.sent(),[3,4];case 3:return l.sent(),a("Something went wrong. Please try again."),[3,4];case 4:if((null==i?void 0:null===(n=i.data)||void 0===n?void 0:n.deleteReplDeployment.__typename)==="Repl")u("Template successfully unpublished");else if((null==i?void 0:null===(t=i.data)||void 0===t?void 0:t.deleteReplDeployment.__typename)==="NotFoundError"||(null==i?void 0:null===(r=i.data)||void 0===r?void 0:r.deleteReplDeployment.__typename)==="UserError")return a(i.data.deleteReplDeployment.message),[2];return o(),[2]}})}),function(e){return t.apply(this,arguments)}),css:[p.l0.colWithGap(24)],children:[(0,l.tZ)(m.xv,{children:"Unpublishing a Template will remove it from the Templates page. The Repl itself will not be deleted, and you can always re-publish the Template again later."}),(0,l.BX)(c.G,{css:[p.l0.rowWithGap(8),p.l0.justify.end],children:[(0,l.tZ)(h.zx,{type:"button",text:"Cancel",onClick:function(){return o()}}),(0,l.tZ)(h.zx,{disabled:b.loading,colorway:"negative",text:b.loading?"Unpublishing Template...":"Yes, unpublish this Template",type:"submit",iconLeft:(0,l.tZ)(L.Z,{})})]})]})]})}var F=t(73931);function K(){var e=(0,b._)(["\n  mutation ReviewTemplateReview($input: ReviewTemplateInput!) {\n    reviewTemplate(input: $input) {\n      ... on TemplateReview {\n        id\n        repl {\n          id\n          ...ReplViewReplActionsPermissions\n        }\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return K=function(){return e},e}var J={},V=(0,g.Ps)(K(),F.jN),Q=t(41831),ee=t(77615),en=c.K.form;function et(e){var n,t,r=e.replId,o=e.reviewType,s=e.onDone,u=(0,D.Z)(),a=u.showConfirm,d=u.showError,f="Something went wrong ".concat("promote"===o?"promoting":"demoting"," this Template"),b=(0,i._)((n=(0,v._)({},J,{variables:{input:{replId:r,shouldPromote:"promote"===o}},onError:function(e){d(e.message)},onCompleted:function(e){"TemplateReview"===e.reviewTemplate.__typename?(a("Template successfully ".concat("promote"===o?"promoted":"demoted")),s()):"UnauthorizedError"===e.reviewTemplate.__typename||"UserError"===e.reviewTemplate.__typename?d(e.reviewTemplate.message):d(f)}}),Z.D(V,n)),2),g=b[0],w=b[1];return(0,l.BX)(c.G,{css:[p.l0.colWithGap(24)],children:[(0,l.tZ)(m.h4,{level:1,variant:"headerDefault",children:"promote"===o?"Promote Template":"Demote Template?"}),(0,l.BX)(en,{onSubmit:(t=(0,$._)(function(e){return(0,z.Jh)(this,function(n){return e.preventDefault(),g(),[2]})}),function(e){return t.apply(this,arguments)}),css:[p.l0.colWithGap(24)],children:["promote"===o?(0,l.tZ)(m.xv,{children:"Promoting a Template will show the Template in the Create Repl modal."}):(0,l.tZ)(m.xv,{children:"Demoting a Template will remove the Template from the Create Repl modal."}),(0,l.BX)(c.G,{css:[p.l0.rowWithGap(8),p.l0.justify.end],children:[(0,l.tZ)(h.zx,{type:"button",text:"Cancel",onClick:function(){return s()}}),"promote"===o?(0,l.tZ)(h.zx,{type:"submit",disabled:w.loading,colorway:"primary",iconLeft:(0,l.tZ)(Q.Z,{}),text:w.loading?"Promoting Template...":"Promote Template"}):(0,l.tZ)(h.zx,{type:"submit",disabled:w.loading,colorway:"negative",iconLeft:(0,l.tZ)(ee.Z,{}),text:w.loading?"Demoting Template...":"Demote Template"})]})]})]})}var er=t(74883),eo=t(52924),ei=t(23291),el=t(80339);function es(){var e=(0,b._)(["\n  mutation HidePostToggleHiddenPost($postId: Int!, $isHidden: Boolean!) {\n    toggleHiddenPost(postId: $postId, isHidden: $isHidden) {\n      ... on Post {\n        id\n        isHidden\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return es=function(){return e},e}var eu={},ea=(0,g.Ps)(es()),ed=c.K.form;function ec(e){var n,t,r=e.post,o=e.onDone,s=(0,D.Z)(),u=s.showConfirm,a=s.showError,d=(0,i._)((n={variables:{postId:r.id,isHidden:!r.isHidden},onCompleted:function(e){"Post"===e.toggleHiddenPost.__typename?r.isHidden?u("Post removed from the community."):u("Post allowed on community."):"NotFoundError"===e.toggleHiddenPost.__typename||"UserError"===e.toggleHiddenPost.__typename?a(e.toggleHiddenPost.message):a("An unexpected error occurred."),o()},onError:function(){a("Something went wrong. Please try again.")}},t=(0,v._)({},eu,n),Z.D(ea,t)),2),f=d[0],b=d[1].loading,g=r.isHidden?"Yes, show this post":"Yes, hide this post",w=r.isHidden?"Showing...":"Hiding...",y=r.isHidden?"Show this post to the Community":"Hide this post from the Community";return(0,l.BX)(c.G,{css:[p.l0.colWithGap(24)],children:[(0,l.tZ)(m.xv,{variant:"subheadBig",children:y}),(0,l.BX)(ed,{onSubmit:function(e){e.preventDefault(),f()},css:[p.l0.colWithGap(32)],children:[(0,l.tZ)(m.xv,{children:"Hiding a post will remove it from the Community feeds, but the post will still be viewable to the creator. Showing a post will make it so all users will be able to discover this post though community feeds."}),(0,l.BX)(c.G,{css:[p.l0.rowWithGap(8),p.l0.justify.end],children:[(0,l.tZ)(c.G,{children:(0,l.tZ)(h.zx,{type:"button",text:"Cancel",onClick:o})}),(0,l.tZ)(c.G,{children:(0,l.tZ)(h.zx,{disabled:b,colorway:"negative",text:b?w:g,type:"submit",iconLeft:(0,l.tZ)(L.Z,{})})})]})]})]})}var ep=t(94106),em=t(25061),eh=t(25770),ef=t(71498),ev=t(93918);(r=o||(o={})).warnAuthor="warnAuthor",r.banAuthor="banAuthor",r.reportRepl="reportRepl",r.unpublish="unpublish",r.unpublishTemplate="unpublishTemplate",r.promoteTemplate="promoteTemplate",r.demoteTemplate="demoteTemplate",r.modUnpublish="modUnpublish",r.modHide="modHide",r.update="update";var eb=(0,ev.X)({item:[p.l0.rowWithGap(8),p.l0.align.center],destructiveItem:[p.l0.color.accentNegativeStronger],modPill:[p.l0.color.foregroundDefault,{textTransform:"uppercase"}]});function eg(e){var n,t,r,o=e.repl,p=e.post,h=e.currentUser,f=e.source,v=(0,i._)(a.useState(null),2),b=v[0],g=v[1],Z=new Map,w=(0,ep.useRouter)(),y="/replEnvironmentDesktop"===w.pathname||"/replEnvironmentMobile"===w.pathname,C=(0,eh.aq)(o);if(o.currentUserPermissions.containerWrite&&!y&&Z.set("edit",{label:"Edit in Workspace",onClick:function(){return w.push(C.href,C.as)},icon:(0,l.tZ)(eo.Z,{})}),o.currentUserPermissions.publish&&o.publishedAs&&o.publishedAs!==s.O2.Template&&Z.set("update",{label:"Add an update",onClick:function(){return g("update")},icon:(0,l.tZ)(er.Z,{})}),Z.set("report",{label:"Report",isDestructive:!0,onClick:function(){return g("reportRepl")},icon:(0,l.tZ)(T.Z,{})}),(null==h?void 0:h.isModerator)&&(Z.set("warning",{label:"Warning",isMod:!0,icon:(0,l.tZ)(E.Z,{}),onClick:function(){return g("warnAuthor")},isDestructive:!0}),Z.set("banauthor",{label:"Ban author",isMod:!0,icon:(0,l.tZ)(I.Z,{}),onClick:function(){return g("banAuthor")},isDestructive:!0}),null!==o.lastPublishedAt)){var D=(null==p?void 0:p.isHidden)?(0,l.tZ)(el.Z,{}):(0,l.tZ)(L.Z,{}),_=(null==p?void 0:p.isHidden)?"Show post to Community":"Hide post from Community";p&&Z.set("visibility",{label:_,icon:D,isMod:!0,isDestructive:!0,onClick:function(){return g("modHide")}}),Z.set("modunpublish",{label:"Unpublish Repl",isMod:!0,icon:(0,l.tZ)(I.Z,{}),isDestructive:!0,onClick:function(){return g("modUnpublish")}})}return((null==h?void 0:h.isAdmin)&&o.publishedAs===s.O2.Template&&((null===(r=o.templateReview)||void 0===r?void 0:r.promoted)?Z.set("demote",{label:"Demote Template",icon:(0,l.tZ)(ee.Z,{}),isDestructive:!0,onClick:function(){return g("demoteTemplate")}}):Z.set("promote",{label:"Promote Template",icon:(0,l.tZ)(Q.Z,{}),onClick:function(){return g("promoteTemplate")}})),o.currentUserPermissions.publish&&null!==o.lastPublishedAt&&Z.set("unpublish",{label:"Unpublish from Community",icon:(0,l.tZ)(L.Z,{}),isDestructive:!0,onClick:function(){return g("unpublish")}}),o.publishedAs===s.O2.Template&&o.currentUserPermissions.publish&&Z.set("unpublishtemplate",{label:"Unpublish Template",icon:(0,l.tZ)(L.Z,{}),isMod:!0,isDestructive:!0,onClick:function(){return g("unpublishTemplate")}}),Z.size)?(0,l.BX)(l.HY,{children:[(0,l.tZ)(u.ZE,{icon:(0,l.tZ)(ef.Z,{}),onAction:function(e){var n;return null===(n=Z.get(e))||void 0===n?void 0:n.onClick()},children:Array.from(Z).map(function(e){var n=(0,i._)(e,2),t=n[0],r=n[1];return(0,l.tZ)(u.ck,{children:(0,l.BX)(c.G,{css:[eb.item,r.isDestructive&&eb.destructiveItem],children:[r.icon,(0,l.tZ)(m.xv,{multiline:!1,children:r.label}),r.isMod?(0,l.tZ)(ei.D,{text:"mod",css:eb.modPill}):null]})},t)})}),(0,l.tZ)(d.u,{isOpen:"reportRepl"===b,onRequestClose:function(){return g(null)},children:(0,l.tZ)(R,{replId:o.id,onDone:function(){return g(null)}})}),(0,l.tZ)(d.u,{isOpen:"unpublish"===b,onRequestClose:function(){return g(null)},children:(0,l.tZ)(X.Z,{repl:o,onDone:function(){return g(null)},source:f})}),(0,l.tZ)(d.u,{isOpen:"warnAuthor"===b,onRequestClose:function(){return g(null)},children:(0,l.tZ)(B,{username:null===(n=o.owner)||void 0===n?void 0:n.username,onDone:function(){return g(null)}})}),(0,l.tZ)(d.u,{isOpen:"banAuthor"===b,onRequestClose:function(){return g(null)},children:(0,l.tZ)(A,{username:null===(t=o.owner)||void 0===t?void 0:t.username,onDone:function(){return g(null)}})}),(0,l.tZ)(d.u,{isOpen:"unpublishTemplate"===b,onRequestClose:function(){return g(null)},children:(0,l.tZ)(Y,{replId:o.id,onDone:function(){return g(null)}})}),(0,l.tZ)(d.u,{isOpen:"demoteTemplate"===b,onRequestClose:function(){return g(null)},children:(0,l.tZ)(et,{replId:o.id,reviewType:"demote",onDone:function(){return g(null)}})}),(0,l.tZ)(d.u,{isOpen:"promoteTemplate"===b,onRequestClose:function(){return g(null)},children:(0,l.tZ)(et,{replId:o.id,reviewType:"promote",onDone:function(){return g(null)}})}),(0,l.tZ)(d.u,{isOpen:"modUnpublish"===b,onRequestClose:function(){return g(null)},children:(0,l.tZ)(X.Z,{repl:o,onDone:function(){return g(null)},source:f})}),(0,l.tZ)(d.u,{isOpen:"update"===b,onRequestClose:function(){return g(null)},children:(0,l.tZ)(em.Z,{repl:o,onDone:function(){return g(null)},source:f})}),p&&(0,l.tZ)(d.u,{isOpen:"modHide"===b,onRequestClose:function(){return g(null)},children:(0,l.tZ)(ec,{post:p,onDone:function(){return g(null)}})})]}):null}}}]);
//# sourceMappingURL=5206-963728190224aa78.js.map