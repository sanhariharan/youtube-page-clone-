!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="5bb8a264-16f1-4d35-8f33-cf1cf2594e0f",e._sentryDebugIdIdentifier="sentry-dbid-5bb8a264-16f1-4d35-8f33-cf1cf2594e0f")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"d103cf55"};"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7660],{11134:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(8182),i=n(94450),o=n.n(i);n(43429);var a=n(69832),l=n.n(a);function c(e){var t=e.unreadDot,n=e.size,i=void 0===n?12:n,a=e.count,c=void 0===a?null:a,s=c&&c>99,u=s?"99+":null==c?void 0:c.toString();return(0,r.BX)("span",{className:"jsx-1c7f3b9066c4c334",children:[(0,r.tZ)("svg",{width:i,height:i,viewBox:"0 0 24 24",fill:"none",style:{color:"currentColor"},xmlns:"http://www.w3.org/2000/svg",className:"jsx-1c7f3b9066c4c334",children:(0,r.tZ)("path",{d:"M21 15C21 15.5304 20.7893 16.0391 20.4142 16.4142C20.0391 16.7893 19.5304 17 19 17H7L3 21V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H19C19.5304 3 20.0391 3.21071 20.4142 3.58579C20.7893 3.96086 21 4.46957 21 5V15Z",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",className:"jsx-1c7f3b9066c4c334"})}),t?(0,r.tZ)("div",{className:"jsx-1c7f3b9066c4c334 unread-indicator"}):null,!!c&&(0,r.tZ)("div",{className:"jsx-1c7f3b9066c4c334 "+(l()("count",{overflow:s})||""),children:u}),(0,r.tZ)(o(),{id:"1c7f3b9066c4c334",children:"span.jsx-1c7f3b9066c4c334{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex}.unread-indicator.jsx-1c7f3b9066c4c334{width:5px;height:5px;-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px;background-color:var(--accent-red-default);-webkit-transform:translate(8px,-1px);-moz-transform:translate(8px,-1px);-ms-transform:translate(8px,-1px);-o-transform:translate(8px,-1px);transform:translate(8px,-1px);position:absolute}.count.jsx-1c7f3b9066c4c334{-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px;background-color:var(--accent-negative-default);-webkit-transform:translate(50%,-50%);-moz-transform:translate(50%,-50%);-ms-transform:translate(50%,-50%);-o-transform:translate(50%,-50%);transform:translate(50%,-50%);position:absolute;min-width:16px;padding:2px 3px;height:16px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;color:white;font-size:var(--font-size-small)}.overflow.jsx-1c7f3b9066c4c334{-webkit-transform:translate(25%,-50%);-moz-transform:translate(25%,-50%);-ms-transform:translate(25%,-50%);-o-transform:translate(25%,-50%);transform:translate(25%,-50%)}"})]})}},55846:function(e,t,n){n.d(t,{AS:function(){return T},Hj:function(){return A},Rp:function(){return D},Tt:function(){return N},gE:function(){return G},j7:function(){return _},xT:function(){return E},yi:function(){return S}});var r=n(45903),i=n(93295),o=n(23982),a=n(77393),l=n(72986),c=n(19441);function s(){var e=(0,i._)(["\n  fragment AnnotationsUser on User {\n    id\n    username\n    fullName\n    image\n  }\n"]);return s=function(){return e},e}function u(){var e=(0,i._)(["\n  fragment AnnotationMessageContent on MessageContentType {\n    __typename\n    ... on TextMessageContentType {\n      text\n    }\n    ... on PreviewMessageContentType {\n      preview\n    }\n    ... on StatusMessageContentType {\n      status\n    }\n  }\n"]);return u=function(){return e},e}function d(){var e=(0,i._)(["\n  fragment AnnotationsUIMessage on AnnotationMessage {\n    id\n    user {\n      id\n      ...AnnotationsUser\n    }\n    anchor {\n      id\n    }\n    timeCreated\n    content {\n      __typename\n      ...AnnotationMessageContent\n    }\n    currentUserIsAuthor\n    seen\n  }\n  ","\n  ","\n"]);return d=function(){return e},e}function f(){var e=(0,i._)(["\n  fragment AnnotationsUIAnchor on AnnotationAnchor {\n    id\n    user {\n      id\n      ...AnnotationsUser\n    }\n    path\n    otVersion\n    indexStart\n    indexEnd\n    isResolved\n    isGeneral\n    messages {\n      id\n      ...AnnotationsUIMessage\n    }\n  }\n  ","\n  ","\n"]);return f=function(){return e},e}function h(){var e=(0,i._)(["\n  query AnnotationAnchorsByRepl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        annotationAnchors {\n          id\n          ...AnnotationsUIAnchor\n        }\n      }\n    }\n    currentUser {\n      id\n      username\n      fullName\n      image\n    }\n  }\n  ","\n"]);return h=function(){return e},e}function p(){var e=(0,i._)(["\n  mutation CreateAnnotationAnchor(\n    $annotationAnchor: AnnotationAnchorInput!\n    $annotationMessage: AnnotationMessageInput\n    $highlight: AnnotationHighlightInput\n  ) {\n    createAnnotationAnchor(\n      annotationAnchor: $annotationAnchor\n      annotationMessage: $annotationMessage\n      highlight: $highlight\n    ) {\n      ... on UserError {\n        message\n      }\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n  }\n  ","\n"]);return p=function(){return e},e}function m(){var e=(0,i._)(["\n  mutation UpdateAnnotationAnchor(\n    $id: String!\n    $changes: AnnotationAnchorChangesInput!\n  ) {\n    updateAnnotationAnchor(id: $id, changes: $changes) {\n      ... on UserError {\n        message\n      }\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n  }\n  ","\n"]);return m=function(){return e},e}function v(){var e=(0,i._)(["\n  mutation CreateAnnotationMessage(\n    $replId: String!\n    $anchorId: String!\n    $annotationMessage: AnnotationMessageInput!\n    $highlight: AnnotationHighlightInput\n  ) {\n    createAnnotationMessage(\n      replId: $replId\n      anchorId: $anchorId\n      annotationMessage: $annotationMessage\n      highlight: $highlight\n    ) {\n      ... on UserError {\n        message\n      }\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n  }\n  ","\n"]);return v=function(){return e},e}function g(){var e=(0,i._)(["\n  mutation updateThreadPreview(\n    $threadId: String!\n    $messageId: String!\n    $message: String\n  ) {\n    updateThreadPreview(\n      threadId: $threadId\n      messageId: $messageId\n      message: $message\n    )\n  }\n"]);return g=function(){return e},e}function y(){var e=(0,i._)(["\n  subscription AnnotationUpdates($replId: String!) {\n    updatedAnnotation: annotationUpdatesByRepl(replId: $replId) {\n      id\n      ...AnnotationsUIAnchor\n    }\n  }\n  ","\n"]);return y=function(){return e},e}function b(){var e=(0,i._)(["\n  subscription MessagePreview($threadId: String!) {\n    threadPreview(threadId: $threadId) {\n      userId\n      messageId\n      message\n    }\n  }\n"]);return b=function(){return e},e}var Z={},w=(0,o.Ps)(s()),x=(0,o.Ps)(u()),C=(0,o.Ps)(d(),w,x),_=(0,o.Ps)(f(),w,C),S=(0,o.Ps)(h(),_);function E(e){var t=(0,r._)({},Z,e);return a.a(S,t)}var k=(0,o.Ps)(p(),_);function T(e){var t=(0,r._)({},Z,e);return l.D(k,t)}var R=(0,o.Ps)(m(),_);function D(e){var t=(0,r._)({},Z,e);return l.D(R,t)}var I=(0,o.Ps)(v(),_);function G(e){var t=(0,r._)({},Z,e);return l.D(I,t)}var B=(0,o.Ps)(g());function A(e){var t=(0,r._)({},Z,e);return l.D(B,t)}var P=(0,o.Ps)(y(),_);function N(e){var t=(0,r._)({},Z,e);return c.m(P,t)}b()},8482:function(e,t,n){n.d(t,{Ft:function(){return d},Vy:function(){return m},kL:function(){return p}});var r=n(34142),i=n(32477),o=n(87682),a=n(48900),l=n(84357);function c(){return(c=(0,r._)(function(e,t,n){var r;return(0,o.Jh)(this,function(i){switch(i.label){case 0:if(!e.path||"number"!=typeof e.indexStart||"number"!=typeof e.indexEnd||!e.otVersion)return[2];if(n===e.otVersion)return[2,{path:e.path,indexStart:e.indexStart,indexEnd:e.indexEnd,otVersion:e.otVersion}];return[4,t({indexStart:e.indexStart,indexEnd:e.indexEnd,versionFrom:e.otVersion,versionTo:n})];case 1:return r=i.sent(),[2,{path:e.path,indexStart:r.indexStart,indexEnd:r.indexEnd,otVersion:n}]}})})).apply(this,arguments)}var s=n(54916),u=n(43429);function d(e){return f.apply(this,arguments)}function f(){return(f=(0,r._)(function(e){var t,n,r,i,s,u,d;return(0,o.Jh)(this,function(o){switch(o.label){case 0:if(t=e.anchor,n=e.version,r=e.transformSelection,i=e.content,!t.path)return[2,null];return[4,function(e,t,n){return c.apply(this,arguments)}(t,r,n)];case 1:if(!(s=o.sent()))return[2,null];return d=function(){if(s){var e=s.indexStart,t=s.indexEnd;try{var n=l.xv.of(i.split("\n")),r=n.lineAt(e),o=n.lineAt(t),c=n.sliceString(n.line(Math.max(r.number-2,1)).from,e),u=n.sliceString(t,n.line(Math.min(o.number+2,n.lines)).to);return{precode:c,code:n.sliceString(e,t),postcode:u}}catch(e){a.Tb(e)}}},[2,{anchor:t,newSelection:s,newPosition:u,getHighlight:d,snippet:h(i,s)}]}})})).apply(this,arguments)}var h=function(e,t){var n=l.xv.of(e.split("\n")),r=n.lineAt(t.indexStart).number,i=n.lineAt(t.indexEnd).number,o=[];r===i&&(r=Math.max(1,r-1),i=Math.min(n.lines,i+1));for(var a=r;a<=i;a++)o.push(n.line(a).text);return{startLineNumber:r,lines:o}};function p(e){var t=(0,s.Z)().fs,n=u.useRef(null),r=u.useRef(null),o=(0,i._)(u.useState(!1),2),a=o[0],l=o[1];return u.useEffect(function(){if(e){var i=function(){r.current=null,l(!1)},o=t.watchTextFile(e,{onReady:function(e){var t=e.transformSelection,i=e.initialContent;n.current=i.toString(),r.current=t,l(!0)},onMoveOrDelete:function(){i()},onError:function(){i()},onChange:function(e){var t=e.latestContent;n.current=t}});return function(){i(),o()}}},[e,t]),{contentRef:n,transformSelectionRef:r,loadedFile:a}}function m(e){var t=(0,s.Z)().fs,n=(0,i._)(u.useState(null),2),r=n[0],o=n[1],l=p(null==e?void 0:e.path),c=l.contentRef,f=l.loadedFile,h=l.transformSelectionRef;return u.useEffect(function(){(null==e?void 0:e.path)&&f&&h.current&&null!==c.current&&d({anchor:e,version:t.getOTVersion(e.path),transformSelection:h.current,content:c.current}).then(function(e){o(e)}).catch(function(e){o(null),a.Tb(e)})},[t,e,f,h,c]),r}},19229:function(e,t,n){n.d(t,{n:function(){return u}});var r=n(45903),i=n(93295),o=n(23982),a=n(72986);function l(){var e=(0,i._)(["\n  mutation MarkMessagesAsSeen(\n    $replId: String!\n    $threadId: String\n    $messageIds: [String!]\n  ) {\n    markMessagesAsSeen(\n      replId: $replId\n      threadId: $threadId\n      messageIds: $messageIds\n    ) {\n      ... on AnnotationMessageList {\n        messages {\n          id\n          seen\n        }\n      }\n    }\n  }\n"]);return l=function(){return e},e}var c={},s=(0,o.Ps)(l());function u(e){var t=(0,r._)({},c,e);return a.D(s,t)}},59725:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(32477),i=n(43429),o=n(50782),a=n(19229);function l(e){var t=(0,o.Z)(),n=(0,r._)((0,a.n)(),1)[0];i.useEffect(function(){if(e){var r=e.messages.filter(function(e){return!e.seen}).map(function(e){return e.id});0!==r.length&&n({variables:{replId:t,threadId:e.id,messageIds:r},optimisticResponse:{__typename:"RootMutationType",markMessagesAsSeen:{messages:r.map(function(e){return{id:e,seen:!0,__typename:"AnnotationMessage"}}),__typename:"AnnotationMessageList"}}})}},[t,e,n])}},30456:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(45903),i=n(93295),o=n(23982),a=n(77393);function l(){var e=(0,i._)(["\n  query ThreadReplCollaborators($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        owner {\n          ... on User {\n            id\n            username\n            image\n            fullName\n          }\n          ... on Team {\n            id\n            username\n            image\n          }\n        }\n        permissions {\n          id\n          user {\n            id\n            username\n            image\n            fullName\n          }\n        }\n      }\n    }\n  }\n"]);return l=function(){return e},e}var c={},s=(0,o.Ps)(l()),u=n(50782);function d(){var e=(l={variables:{replId:(0,u.Z)()}},d=(0,r._)({},c,l),a.a(s,d)).data;if((null==e?void 0:e.repl.__typename)!=="Repl")return[];var t=[];(null===(f=e.repl.owner)||void 0===f?void 0:f.username)&&"User"===e.repl.owner.__typename&&t.push(e.repl.owner);var n=!0,i=!1,o=void 0;try{for(var l,d,f,h,p=e.repl.permissions[Symbol.iterator]();!(n=(h=p.next()).done);n=!0){var m,v=h.value;(null===(m=v.user)||void 0===m?void 0:m.username)&&t.push(v.user)}}catch(e){i=!0,o=e}finally{try{n||null==p.return||p.return()}finally{if(i)throw o}}return t}},58626:function(e,t,n){n.d(t,{q:function(){return G},J:function(){return I}});var r,i,o,a=n(45903),l=n(25e3),c=n(70322),s=n(32477),u=n(8182),d=n(23026),f=n(3194),h=n(2543),p=n(84357),m=n(38265),v=n(54340),g=m.tk.baseTheme({".cm-diff-inserted":{backgroundColor:"#0053A644",borderLeft:"#0053A6 solid 3px"},".cm-diff-deleted":{backgroundColor:"#c93c3733",borderLeft:"#c93c37 solid 3px"}}),y=m.p.line({attributes:{class:"cm-diff-inserted"}}),b=m.p.line({attributes:{class:"cm-diff-deleted"}}),Z=p.Py.define({map:function(e,t){return e.map(t)}}),w=function(e){"use strict";(0,f._)(n,e);var t=(0,h._)(n);function n(){return(0,d._)(this,n),t.apply(this,arguments)}var r=n.prototype;return r.toDOM=function(){var e=document.createElement("div");return e.className="cm-diff-alignment cm-line",e.innerHTML="&nbsp;",e},r.ignoreEvent=function(){return!1},n}(m.l9);function x(e){var t=new p.f_,n=new w;e.sort(function(e,t){return e.character-t.character});var r=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done);r=!0)for(var c=a.value,s=c.character,u=c.padding,d=0;d<u;d++)t.add(s,s,m.p.widget({widget:n,side:-1,block:!0}))}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return t.finish()}function C(e){var t=e.coloredLines,n=e.colorDecoration;return[g,m.lg.fromClass(function e(r){"use strict";(0,d._)(this,e);var i=new p.f_,o=!0,a=!1,l=void 0;try{for(var c,s=t[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var u=c.value,f=r.state.doc.line(u);i.add(f.from,f.from,n)}}catch(e){a=!0,l=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}this.decorations=i.finish()},{decorations:function(e){return e.decorations}}),p.QQ.define({create:function(){return m.p.none},update:function(e,t){var n=!0,r=!1,i=void 0;try{for(var o,a=t.effects[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;if(l.is(Z))return l.value}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t.docChanged?e.map(t.changes):e},provide:function(e){return m.tk.decorations.from(e)}})]}var _=n(20142),S=n(81013),E=n(43429),k=n(4498),T=(r=function(e,t){return m.tk.domEventHandlers({scroll:function(n,r){if(r===e&&n.target){var i=n.target;if(i.scrollTop){var o=i.scrollTop;t.scrollDOM.scrollTo({top:o})}}}})},i=new p.F6,o=new p.F6,{extensions:function(){return{right:i.of([]),left:o.of([])}},setup:function(e,t){e.dispatch({effects:o.reconfigure(r(e,t))}),t.dispatch({effects:i.reconfigure(r(t,e))})}}),R=T.extensions,D=T.setup;function I(e){var t=e.left,n=e.right,r=e.showDiffDecorations,i=void 0===r||r,o=t.code,u=(0,c._)(t,["code"]),d=n.code,f=(0,c._)(n,["code"]),h=(0,S.Z)(),m=h.ref,g=h.view,w=(0,S.Z)(),_=w.ref,k=w.view,T=E.useMemo(function(){var e=R().left;return u.extensions?[u.extensions,e]:e},[u.extensions]),I=E.useMemo(function(){var e=R().right;return f.extensions?[f.extensions,e]:e},[f.extensions]);u=(0,l._)((0,a._)({},u),{extensions:T}),f=(0,l._)((0,a._)({},f),{extensions:I});var G=(0,s._)(E.useState(!1),2),B=G[0],A=G[1],P=(0,s._)(E.useState(!1),2),N=P[0],U=P[1];return E.useEffect(function(){if(g&&k&&B&&N&&i){var e=setTimeout(function(){var e;D(g,k),e=(0,v.Bz)(g.state.doc.sliceString(0),k.state.doc.sliceString(0)),g.dispatch({effects:[p.Py.appendConfig.of(C({coloredLines:e.leftColored.sort(function(e,t){return e-t}),colorDecoration:b})),Z.of(x(e.leftPadded))]}),k.dispatch({effects:[p.Py.appendConfig.of(C({coloredLines:e.rightColored.sort(function(e,t){return e-t}),colorDecoration:y})),Z.of(x(e.rightPadded))]})});return function(){return clearTimeout(e)}}},[g,k,B,N,i]),E.useEffect(function(){g&&(g.dispatch({changes:{from:0,to:g.state.doc.length,insert:o}}),A(!0))},[o,g]),E.useEffect(function(){k&&(k.dispatch({changes:{from:0,to:k.state.doc.length,insert:d}}),U(!0))},[d,k]),{left:{view:g,ref:m,code:o,options:u,ready:B},right:{view:k,ref:_,code:d,options:f,ready:N}}}function G(e){var t=e.diffViewer,n=(0,c._)(e,["diffViewer"]),r=(0,a._)({},t.options,n);return(0,u.BX)(u.HY,{children:[(0,u.tZ)(_.ZP,(0,a._)({ref:t.ref,css:{height:t.ready?0:"auto"},initialDoc:t.code,lineWrapping:!1,readOnly:!0},r)),!t.ready&&(0,u.tZ)(k.Z,{code:t.code,language:r.language,filePath:r.filePath,lineNumbers:!r.hideGutter,fontSize:r.fontSize})]})}},54340:function(e,t,n){n.d(t,{Bz:function(){return p},PO:function(){return m}});var r=n(23026),i=n(32477),o=n(87682),a=n(37443),l=n.n(a),c=l().DIFF_DELETE,s=l().DIFF_INSERT,u=l().DIFF_EQUAL;function d(e,t){var n=new(l()),r=n.diff_linesToChars_(e,t),i=r.chars1,o=r.chars2,a=r.lineArray,c=n.diff_main(i,o,!1);return n.diff_charsToLines_(c,a),c}function f(e){return e.split("\n").length-1}function h(e,t,n){if(e>0){var r=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(0===n)return 0;var i=t.indexOf("\n",r);return -1===i?null:1===n?i+1:e(t,n-1,i+1)}(n,t);if(null!==r)return{lineNumber:t,character:r,padding:e}}return null}function p(e,t){var n=!1,r=!1;n="\n"===e[e.length-1],r="\n"===t[t.length-1];for(var o=d(e+(n?"":"\n"),t+(r?"":"\n")),a=0,l=0,p=[],m=[],v=[],g=[],y=0,b=0,Z=0;Z<o.length;Z++){var w=(0,i._)(o[Z],2),x=w[0],C=f(w[1]);switch(x){case c:var _,S=(0,i._)(null!==(_=o[Z+1])&&void 0!==_?_:[],2),E=S[0],k=S[1];a+=C;for(var T=0;T<C;T++)p.push(a-T);var R=C;E===s&&(R-=f(k));var D=h(R,l,t);D&&g.push(D);break;case s:var I,G=(0,i._)(null!==(I=o[Z-1])&&void 0!==I?I:[],2),B=G[0],A=G[1];l+=C;for(var P=0;P<C;P++)m.push(l-P);var N=C;B===c&&(N-=f(A));var U=h(N,a,e);U&&v.push(U);break;case u:l>b&&(b=l),a>y&&(y=a),a+=C,l+=C}}return{leftPadded:v.filter(function(e){return e.lineNumber<b}),rightPadded:g.filter(function(e){return e.lineNumber<y}),leftColored:p,rightColored:m,changedTrailingNewline:n!==r,leftTrailingNewline:n,rightTrailingNewline:r}}var m=function(){"use strict";function e(t,n){(0,r._)(this,e),this.deleted=new Set,this.inserted=new Map,this.linePositions=new Map,this.lineLengths=new Map,this.currentTrailingNewline="\n"===t[t.length-1],this.otherTrailingNewline="\n"===n[n.length-1],this.changedTrailingNewline=this.currentTrailingNewline!==this.otherTrailingNewline;var o=d(t,n),a=[],l=!0,f=!1,h=void 0;try{for(var p,m=o[Symbol.iterator]();!(l=(p=m.next()).done);l=!0){var v=(0,i._)(p.value,2),g=v[0],y=v[1].split("\n");""===y[y.length-1]&&y.pop();var b=!0,Z=!1,w=void 0;try{for(var x,C=y[Symbol.iterator]();!(b=(x=C.next()).done);b=!0){var _=x.value;a.push([g,_])}}catch(e){Z=!0,w=e}finally{try{b||null==C.return||C.return()}finally{if(Z)throw w}}}}catch(e){f=!0,h=e}finally{try{l||null==m.return||m.return()}finally{if(f)throw h}}this.currentTrailingNewline&&!this.otherTrailingNewline?a.push([c,""]):!this.currentTrailingNewline&&this.otherTrailingNewline?a.push([s,""]):this.currentTrailingNewline&&this.otherTrailingNewline&&a.push([u,""]);var S=1,E=0,k=1,T=!0,R=!1,D=void 0;try{for(var I,G=a[Symbol.iterator]();!(T=(I=G.next()).done);T=!0){var B=(0,i._)(I.value,2),A=B[0],P=B[1];switch(A){case c:this.linePositions.set(S,E),this.lineLengths.set(S,P.length),this.deleted.add(S),E+=P.length+1,S++;break;case s:var N=S-1,U=this.inserted.get(N);U||(U=[],this.inserted.set(N,U)),U.push({number:k,content:P}),k++;break;case u:this.linePositions.set(S,E),this.lineLengths.set(S,P.length),E+=P.length+1,S++,k++}}}catch(e){R=!0,D=e}finally{try{T||null==G.return||G.return()}finally{if(R)throw D}}}var t=e.prototype;return t.startInsertions=function(){var e=this.inserted.get(0);return e&&0!==e.length?e:null},t.lineIsDeleted=function(e){return this.deleted.has(e)},t.lineInsertions=function(e){var t=this.inserted.get(e);return t&&0!==t.length?t:null},t.lineInsertedContent=function(e){var t=this.lineInsertions(e);return t?t.map(function(e){return e.content}).join("\n"):null},t.offsetFor=function(e){var t,n,r;r=0+(null!==(n=null===(t=this.inserted.get(0))||void 0===t?void 0:t.length)&&void 0!==n?n:0);for(var i=1;i<e;i++){this.lineIsDeleted(i)&&r--;var o=this.lineInsertions(i);o&&(r+=o.length)}return r},t.linePosition=function(e){var t;return null!==(t=this.linePositions.get(e))&&void 0!==t?t:null},t.lineLength=function(e){var t;return null!==(t=this.lineLengths.get(e))&&void 0!==t?t:null},t.line=function(e){var t=this.linePosition(e),n=this.lineLength(e);if(null===t||null===n)return null;var r=this.offsetFor(e),i=this.lineIsDeleted(e),o=this.lineInsertions(e);return{number:e,from:t,to:t+n,length:n,offset:r,isDeleted:i,insertions:o}},t.lines=function(){var e,t,n,r,a,l,c,s;return(0,o.Jh)(this,function(o){switch(o.label){case 0:e=!0,t=!1,n=void 0,o.label=1;case 1:o.trys.push([1,6,7,8]),r=this.linePositions[Symbol.iterator](),o.label=2;case 2:if(e=(a=r.next()).done)return[3,5];if(l=(0,i._)(a.value,1)[0],!(c=this.line(l)))throw Error("line should not be null");return[4,c];case 3:o.sent(),o.label=4;case 4:return e=!0,[3,2];case 5:return[3,8];case 6:return s=o.sent(),t=!0,n=s,[3,8];case 7:try{e||null==r.return||r.return()}finally{if(t)throw n}return[7];case 8:return[2]}})},e}()},30804:function(e,t,n){n.d(t,{z:function(){return a}});var r=n(23026),i=n(87682),o=n(31157),a=function(){"use strict";function e(t,n,i,o){(0,r._)(this,e),this.a=t,this.b=n,this.chunks=i,this.map=o}var t=e.prototype;return t.line=function(e,t){return t===o.MF.A?this.a.line(e):this.b.line(e)},t.bounds=function(e){if(0===this.chunks.length)return null;var t=(0,o.Cf)(this.chunks[0],e),n=(0,o.Cf)(this.chunks[this.chunks.length-1],e),r=e===o.MF.A?this.a.length:this.b.length,i=Math.min(n.to,r);return{from:t.from,to:i}},t.hasChanges=function(){return this.chunks.length>0},t.updateA=function(t,n){var r=this.b,i=(0,o.U_)(t,r,{chunks:this.chunks,changesA:n}),a=(0,o.XW)(t,r,i);return new e(t,r,i,a)},t.updateB=function(t,n){var r=this.a,i=(0,o.U_)(r,t,{chunks:this.chunks,changesB:n}),a=(0,o.XW)(r,t,i);return new e(r,t,i,a)},t.getContainingChunk=function(e,t){for(var n=0,r=this.chunks.length-1;n<=r;){var i=n+r>>>1,a=this.chunks[i],l=(0,o.Cf)(a,t);if(e>=l.from&&e<=l.to)return a;e<l.from?r=i-1:e>l.to&&(n=i+1)}return null},t.getCorrespondingLine=function(e,t){var n=this.map.get(t===o.MF.A?-e:e);return n?this.line(n,(0,o.rN)(t)):null},t.getLineChangeType=function(e,t){if(this.map.get(t===o.MF.A?-e:e))return o.dQ.UNCHANGED;var n=this.line(e,t),r=this.getContainingChunk(n.from,t);return r?(0,o.dx)(n,t,r.changes,r):o.dQ.UNCHANGED},t.iterLines=function(e){var t,n,r,a;return(0,i.Jh)(this,function(i){switch(i.label){case 0:t=e===o.MF.A?this.a:this.b,n=1,i.label=1;case 1:if(!(n<=t.lines))return[3,4];return r=t.line(n),a=this.getCorrespondingLine(r.number,e),[4,{line:r,correspondingLine:a}];case 2:i.sent(),i.label=3;case 3:return n++,[3,1];case 4:return[2]}})},t.iterRanges=function(){var e,t,n,r,o;return(0,i.Jh)(this,function(i){switch(i.label){case 0:e=0,i.label=1;case 1:if(!(e<this.chunks.length))return[3,6];t=this.chunks[e].fromA,n=this.chunks[e].fromB,r=0,i.label=2;case 2:if(!(r<this.chunks[e].changes.length))return[3,5];return o=this.chunks[e].changes[r],[4,{fromA:t+o.fromA,toA:t+o.toA,fromB:n+o.fromB,toB:n+o.toB}];case 3:i.sent(),i.label=4;case 4:return r++,[3,2];case 5:return e++,[3,1];case 6:return[2]}})},e.create=function(t,n){var r=(0,o.U_)(t,n),i=(0,o.XW)(t,n,r);return new e(t,n,r,i)},e}()},10814:function(e,t,n){n.d(t,{p:function(){return q}});var r,i=n(84357),o=n(23026),a=n(57953),l=n(3194),c=n(2543),s=n(38265),u=n(74633),d=n(81232),f=n(30804),h=n(67075),p=i.r$.define({combine:function(e){var t;return null!==(t=e.filter(Boolean)[0])&&void 0!==t?t:null}}),m=i.QQ.define({create:function(){return{diff:null,tree:d.mp.empty}},update:function(e,t){var n,r,i=t.state.facet(p),o=null===(n=t.state.facet(u.dK))||void 0===n?void 0:n.parser;if(!i)return null===e.diff&&e.tree===d.mp.empty?e:{diff:null,tree:d.mp.empty};var a=e.diff,l=e.tree;return(a&&a.a.eq(i)?t.docChanged&&(a=a.updateB(t.newDoc,t.changes)):(a=f.z.create(i,t.newDoc),l=d.mp.empty),(null===(r=t.startState.facet(u.dK))||void 0===r?void 0:r.parser)!==o&&(l=d.mp.empty),o&&l.length!==a.a.length)?(l=(0,h.p)({parser:o,text:a.a,maxTime:16,base:l}),{diff:a,tree:l}):e.diff===a&&e.tree===l?e:{diff:a,tree:l}}}),v=n(39698),g=n(29287),y="cm-inline-diff-line-deletion-base",b="cm-inline-diff-line-deletion",Z="cm-inline-diff-text-deletion",w="cm-inline-diff-line-insertion-base",x="cm-inline-diff-line-insertion",C="cm-inline-diff-text-insertion",_="rgba(180, 0, 0, 0.075)",S="rgba(180, 0, 0, 0.125)",E="rgba(0, 180, 0, 0.075)",k="rgba(0, 180, 0, 0.125)",T="cm-inline-diff-marker",R="cm-inline-diff-marker-left",D="cm-inline-diff-marker-right";function I(e,t){var n="linear-gradient(to right, ".concat(e,", ").concat(e,")");return t&&(n+=", linear-gradient(to right, ".concat(t,", ").concat(t,")")),n}var G=s.tk.theme((r={},(0,v._)(r,".".concat(y,", .").concat(b),{cursor:"text","&.cm-line ::selection":{backgroundColor:"".concat(g.TV.accentPrimaryDimmest," !important")}}),(0,v._)(r,".".concat(y),{background:I(_)}),(0,v._)(r,".".concat(b),{background:I(_,S)}),(0,v._)(r,".".concat(w),{background:I(E)}),(0,v._)(r,".".concat(x),{background:I(E,k)}),(0,v._)(r,".".concat(C),{display:"inline-block",background:k,"&:first-of-type":{backgroundClip:"padding-box",borderLeft:"3px solid ".concat(k),paddingLeft:"3px",marginLeft:"-6px"}}),(0,v._)(r,".".concat(Z),{display:"inline-block",background:S,"&:first-of-type":{backgroundClip:"padding-box",borderLeft:"3px solid ".concat(S),paddingLeft:"3px",marginLeft:"-6px"}}),(0,v._)(r,".".concat(T),{display:"flex",width:"100%",justifyContent:"space-between"}),(0,v._)(r,".".concat(R),{width:"calc(50% - 1ch)",textAlign:"right"}),(0,v._)(r,".".concat(D),{width:"50%",textAlign:"right"}),r)),B=n(31157),A=n(15658),P=n(3756),N=n.n(P),U=function(e){"use strict";(0,l._)(n,e);var t=(0,c._)(n);function n(e,r,i){var a;return(0,o._)(this,n),(a=t.call(this)).line=e,a.index=r,a.changed=i,a}var r=n.prototype;return r.toDOM=function(){var e=this,t=document.createElement("div");if(t.className=this.changed?"cm-line ".concat(y):"cm-line ".concat(b),!this.changed||!this.changed.length){var n=!0,r=!1,i=void 0;try{for(var o,a=this.line[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value,c=l.text,s=l.tags,u=document.createElement("span");u.textContent=c||"\xa0",u.className=null!=s?s:"",t.appendChild(u)}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t}for(var d=0,f=0,h=null,p=null,m=function(t,n){if(!h)throw Error("range is null");var r=e.line[f],i=r.text,o=r.tags,a=i.slice(d-h.from,n-h.from),l=document.createElement("span");l.textContent=a||"\xa0",l.className=null!=o?o:"",t.appendChild(l),d+=a.length};f<this.line.length;){if(!h){var v=this.line[f].text;h={from:d,to:d+v.length}}if(!p){var g=!0,w=!1,x=void 0;try{for(var C,_=this.changed[Symbol.iterator]();!(g=(C=_.next()).done);g=!0){var S=C.value;if(!(S.from>=h.to)&&!(S.to<=d)){var E=document.createElement("span");E.className=Z,p={from:S.from,to:S.to,dom:E},d<p.from&&m(t,p.from),t.appendChild(E);break}}}catch(e){w=!0,x=e}finally{try{g||null==_.return||_.return()}finally{if(w)throw x}}}p?(d<p.to&&m(p.dom,p.to),d>=p.to&&(p=null)):m(t,h.to),d>=h.to&&(h=null,f++)}return t},r.eq=function(e){var t,r;return e instanceof n&&this.index===e.index&&this.line.length===e.line.length&&(null===(t=this.changed)||void 0===t?void 0:t.length)===(null===(r=e.changed)||void 0===r?void 0:r.length)&&N()(this.line,e.line)&&N()(this.changed,e.changed)},r.ignoreEvent=function(e){return e.stopImmediatePropagation(),!0},(0,a._)(n,[{key:"estimatedHeight",get:function(){return 21}}]),n}(s.l9),L=s.p.line({class:w}),O=s.p.line({class:x}),M=s.p.mark({class:C}),X=s.tk.decorations.compute([m],function(e){var t=function(e,t){if(r.getLineChangeType(e.number,B.MF.B)===B.dQ.COVERED)o.push(O.range(e.from));else{o.push(L.range(e.from));var n=!0,i=!1,a=void 0;try{for(var l,c=(0,B.Po)(e,t,B.MF.B,!1)[Symbol.iterator]();!(n=(l=c.next()).done);n=!0){var s=l.value;o.push(M.range(s.from,s.to))}}catch(e){i=!0,a=e}finally{try{n||null==c.return||c.return()}finally{if(i)throw a}}}},n=e.field(m,!1);if(!n||!n.diff)return s.p.none;var r=n.diff,i=n.tree,o=[],a=!0,l=!1,c=void 0;try{for(var u,d=r.chunks[Symbol.iterator]();!(a=(u=d.next()).done);a=!0){var f=u.value;if(f.fromB!==f.endB)for(var h=r.b.lineAt(f.fromB),p=r.b.lineAt(f.endB),v=h.number;v<=p.number;v++)t(r.b.line(v),f);else f.fromA===f.endA&&t(r.b.lineAt(f.fromB),f);if(f.fromA!==f.toA)for(var g=r.a.lineAt(f.fromA),y=(0,A.CT)(i,r.a,e,f.fromA,f.endA),b=0;b<y.length;b++){var Z=y[b],w=r.a.line(g.number+b),x=r.getLineChangeType(w.number,B.MF.A)===B.dQ.COVERED?null:(0,B.Po)(w,f,B.MF.A,!0),C=s.p.widget({widget:new U(Z,w.number,x),block:!0,side:-(y.length-b)});o.push(C.range(f.fromB))}}}catch(e){l=!0,c=e}finally{try{a||null==d.return||d.return()}finally{if(l)throw c}}return s.p.set(o,!0)}),F=n(92708),W=(0,s.v5)({class:F.Tr,renderEmptyElements:!0,lineMarker:function(e,t){var n=e.state.field(m,!1);if(!n||!n.diff||!n.diff.hasChanges())return null;if(0===n.diff.a.length)return F.vP;var r=e.state.doc.lineAt(t.from);switch(n.diff.getLineChangeType(r.number,B.MF.B)){case B.dQ.COVERED:case B.dQ.MODIFIED:return F.vP;default:return null}},widgetMarker:function(e,t){if(!(t instanceof U))return null;var n=e.state.field(m,!1);if(!n||!n.diff||!n.diff.hasChanges())return null;switch(n.diff.getLineChangeType(t.index,B.MF.A)){case B.dQ.COVERED:case B.dQ.MODIFIED:return F.We;default:return null}},initialSpacer:function(e){var t=e.state.field(m,!1);return(null==t?void 0:t.diff)?F.vP:F.Do},updateSpacer:function(e,t){var n=t.state.field(m,!1),r=(null==n?void 0:n.diff)?F.vP:F.Do;return e===r?e:r}}),H=n(3917),V=function(e){"use strict";(0,l._)(n,e);var t=(0,c._)(n);function n(e,r){var i;return(0,o._)(this,n),(i=t.call(this)).left=e,i.right=r,i}var r=n.prototype;return r.toDOM=function(e){var t=e.state.doc.lines.toString().length,n=document.createElement("div"),r=document.createElement("span"),i=document.createElement("span");return n.className=T,r.className=R,i.className=D,n.style.width="".concat(2*t+1,"ch"),null!==this.left&&(r.textContent=this.left.toString()),null!==this.right&&(i.textContent=this.right.toString()),n.appendChild(r),n.appendChild(i),n},r.eq=function(e){return e instanceof n&&this.left===e.left&&this.right===e.right},n}(s.SJ),z=H.X4.of(function(e,t){if(t instanceof U)return new V(t.index,null)}),j=[H.gy.of(function(e,t){var n,r=e.state.field(m,!1);if(r&&r.diff&&r.diff.hasChanges()){var i=e.state.doc.lineAt(t.from),o=r.diff.getCorrespondingLine(i.number,B.MF.B);return new V(null!==(n=null==o?void 0:o.number)&&void 0!==n?n:null,i.number)}}),z],q=i.r$.define({enables:function(e){return[p.computeN([e],function(t){return t.facet(e)}),F.Lw,m,G,X,j,W]}})},92708:function(e,t,n){n.d(t,{Do:function(){return D},Lw:function(){return S},Tr:function(){return d},Vt:function(){return R},We:function(){return k},vP:function(){return E},wp:function(){return T}});var r,i=n(23026),o=n(39698),a=n(3194),l=n(2543),c=n(38265),s=n(29287),u=s.TV.space2,d="cm-diff-gutter",f="".concat(d,"-element"),h="".concat(f,"-insertion"),p="".concat(f,"-modified"),m="".concat(f,"-deleted"),v="".concat(f,"-file-added"),g=s.TV.greenDefault,y=s.TV.greenStronger,b=s.TV.blueDefault,Z=s.TV.blueStronger,w=s.TV.redDefault,x=s.TV.redStronger,C=s.TV.greenDimmer,_=s.TV.greenDefault,S=c.tk.theme((r={},(0,o._)(r,".".concat(d,":first-of-type, .").concat(f),{width:u}),(0,o._)(r,".".concat(h),{backgroundColor:g,"&.cm-activeLineGutter":{backgroundColor:y}}),(0,o._)(r,".".concat(p),{backgroundColor:b,"&.cm-activeLineGutter":{backgroundColor:Z}}),(0,o._)(r,".".concat(m),{backgroundColor:w,"&.cm-activeLineGutter":{backgroundColor:x}}),(0,o._)(r,".".concat(v),{backgroundColor:C,"&.cm-activeLineGutter":{backgroundColor:_}}),r)),E=new(function(e){"use strict";(0,a._)(n,e);var t=(0,l._)(n);function n(){var e;return(0,i._)(this,n),e=t.apply(this,arguments),e.elementClass="".concat(f," ").concat(h),e}return n}(c.SJ)),k=new(function(e){"use strict";(0,a._)(n,e);var t=(0,l._)(n);function n(){var e;return(0,i._)(this,n),e=t.apply(this,arguments),e.elementClass="".concat(f," ").concat(m),e}return n}(c.SJ)),T=new(function(e){"use strict";(0,a._)(n,e);var t=(0,l._)(n);function n(){var e;return(0,i._)(this,n),e=t.apply(this,arguments),e.elementClass="".concat(f," ").concat(p),e}return n}(c.SJ)),R=new(function(e){"use strict";(0,a._)(n,e);var t=(0,l._)(n);function n(){var e;return(0,i._)(this,n),e=t.apply(this,arguments),e.elementClass="".concat(f," ").concat(v),e}return n}(c.SJ)),D=new(function(e){"use strict";(0,a._)(n,e);var t=(0,l._)(n);function n(){return(0,i._)(this,n),t.apply(this,arguments)}return n}(c.SJ))},14044:function(e,t,n){n.d(t,{el:function(){return c},er:function(){return u},iG:function(){return s}});var r=n(48900),i=n(84357),o=n(54450),a=i.Py.define(),l=i.Py.define(),c=function(e){var t=e.view,n=e.insert,r=e.scrollIntoView;if(e.overwrite)t.dispatch({changes:{from:0,to:t.state.doc.length,insert:n},effects:a.of(null),scrollIntoView:r,annotations:o.Z.of(!0)});else{var i=t.state.selection.main.head;t.dispatch({changes:{from:t.state.selection.main.from,insert:n},selection:{anchor:i+n.length},effects:a.of(null),scrollIntoView:r,annotations:o.Z.of(!0)})}},s=function(e){var t=e.state.field(u,!1);if(!t){r.Tb(Error("RevetGhostwriterCodeInsertState not found when trying to revert"));return}e.dispatch({changes:t,effects:l.of(null)})},u=i.QQ.define({create:function(){return null},update:function(e,t){e&&(e=e.map(t.changes));var n=!0,r=!1,i=void 0;try{for(var o,c=t.effects[Symbol.iterator]();!(n=(o=c.next()).done);n=!0){var s=o.value;s.is(a)&&(e=t.changes.invert(t.startState.doc)),s.is(l)&&(e=null)}}catch(e){r=!0,i=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw i}}return e}})},77858:function(e,t,n){n.d(t,{i:function(){return d},o:function(){return u}});var r=n(98188),i=n(89061),o=n(76804),a=n(63185),l=n(54450),c=n(4753),s=n(27783),u=function(e){var t=e.state.field(a.WF,!1),n=e.state.facet(o.t);if(!t||!t.change||!t.timestamp||Date.now()-t.timestamp<150)return!1;var u=e.state.selection.main.head,d=e.state.doc.lineAt(u);if(u<=d.from+d.length-d.text.trimStart().length){var f=t.change.closestRange(u);if(f.value instanceof c.Yf){var h=f.value.unfulfilled.toString(),p=(0,s.L)(h,e.state.tabSize);if(p>0&&p>=e.state.tabSize)return!1}}var m=t.change.asChangeSpec(),v=e.state.changes(m),g=t.change.extendSelection(e.state.selection);return(0,r._B)(e),e.dispatch({changes:v,selection:g,scrollIntoView:!0,effects:a.OK.of(t.dismiss()),annotations:[l.Z.of(!0),i.Iv.of("full")]}),n.onSuggestionAccepted(e,v),!0},d=function(e){var t=e.state.field(a.WF,!1),n=e.state.facet(o.t);return!!t&&!!t.change&&!!t.presented&&(e.dispatch({effects:a.OK.of(t.dismiss())}),n.onSuggestionExplicitlyDismissed(e),!0)}},76804:function(e,t,n){n.d(t,{t:function(){return r}});var r=n(84357).r$.define({combine:function(e){var t=e.filter(Boolean);return{onDismiss:function(e){return t.forEach(function(t){var n;return null===(n=t.onDismiss)||void 0===n?void 0:n.call(t,e)})},onRequestIgnoredBackendOnly:function(e){return t.forEach(function(t){var n;return null===(n=t.onRequestIgnoredBackendOnly)||void 0===n?void 0:n.call(t,e)})},onRequestFirstEmit:function(e){return t.forEach(function(t){var n;return null===(n=t.onRequestFirstEmit)||void 0===n?void 0:n.call(t,e)})},onRequestEndedWithNoSuggestion:function(e){return t.forEach(function(t){var n;return null===(n=t.onRequestEndedWithNoSuggestion)||void 0===n?void 0:n.call(t,e)})},onRequestCompletelyPresented:function(e){return t.forEach(function(t){var n;return null===(n=t.onRequestCompletelyPresented)||void 0===n?void 0:n.call(t,e)})},onSuggestionExplicitlyDismissed:function(e){return t.forEach(function(t){var n;return null===(n=t.onSuggestionExplicitlyDismissed)||void 0===n?void 0:n.call(t,e)})},onSuggestionAccepted:function(e,n){return t.forEach(function(t){var r;return null===(r=t.onSuggestionAccepted)||void 0===r?void 0:r.call(t,e,n)})}}}})},20916:function(e,t,n){n.d(t,{Z:function(){return f}});var r=n(25632),i=n(20798),o=n(45903),a=n(93295),l=n(23982),c=n(77393);function s(){var e=(0,a._)(['\n  query CompleteCodeEngine {\n    currentUser {\n      id\n      defaultEngine: gateVariation(feature: "flag-ghostwriter-complete-engine")\n      hasOverride: gate(feature: "flag-code-suggestion-engine")\n    }\n  }\n']);return s=function(){return e},e}var u={},d=(0,l.Ps)(s());function f(){var e,t,n,a,l=(0,r.Gn)("completeCodeEngine").preferences,s=(e=(0,o._)({},u,void 0),c.a(d,e)).data,f=null==l?void 0:l.completeCodeEngine;if(f&&(null==s?void 0:null===(t=s.currentUser)||void 0===t?void 0:t.hasOverride)&&i.vw.has(f))return{engine:f,settings:i.Uw[f]};var h=null!==(a=null==s?void 0:null===(n=s.currentUser)||void 0===n?void 0:n.defaultEngine)&&void 0!==a?a:i.OO;return{engine:h,settings:i.Uw[h]}}},21012:function(e,t,n){n.d(t,{Yy:function(){return i},ZP:function(){return m},G_:function(){return p}});var r,i,o=n(25425),a=n(45903),l=n(93295),c=n(23982),s=n(77393);function u(){var e=(0,l._)(['\n  query CompleteCode {\n    currentUser {\n      id\n      userPowerUpsByType {\n        __typename\n        ... on UnauthorizedError {\n          message\n        }\n        ... on UserPowerUpsTypes {\n          ghostwriter {\n            active\n          }\n        }\n      }\n      hasKillswitch: gate(feature: "flag-killswitch-ghostwriter")\n    }\n  }\n']);return u=function(){return e},e}var d={},f=(0,c.Ps)(u()),h=n(85172);function p(e){return"None"!==e&&"BackendOnly"!==e}function m(){var e,t,n,r,i=(e=(0,a._)({},d,void 0),s.a(f,e)).data,l=(0,o.P5)({controlName:"flag-gw-charmander",logFlagToAnalytics:!0}),c=(0,o.P5)({controlName:"flag-gw-charizard",logFlagToAnalytics:!0});if((0,h.v)().isTeamWithAiDisabled)return"None";var u=(null==i?void 0:null===(n=i.currentUser)||void 0===n?void 0:null===(t=n.userPowerUpsByType)||void 0===t?void 0:t.__typename)==="UserPowerUpsTypes"&&(null==i?void 0:i.currentUser.userPowerUpsByType.ghostwriter.active);return(null==i?void 0:null===(r=i.currentUser)||void 0===r?void 0:r.hasKillswitch)?"None":u?"Pro":l?c?"Basic":"BackendOnly":"None"}(r=i||(i={})).None="None",r.Basic="Basic",r.Pro="Pro",r.BackendOnly="BackendOnly"},70408:function(e,t,n){n.d(t,{S:function(){return h},t:function(){return f}});var r=n(45903),i=n(25e3),o=n(32477),a=n(11516),l=n(43429),c=n(90234),s=n(71999),u=n(25425),d="ai.codecomplete.lastTooltipHintTimestamp",f=(0,c.cn)({tooltipOpen:!1,consecutiveRejections:0});function h(){var e=(0,o._)((0,s.KO)(f),2),t=e[0],n=e[1],c=(0,u.P5)({controlName:"flag-killswitch-pichu",logFlagToAnalytics:!1});return(0,l.useEffect)(function(){if(c&&t.tooltipOpen){var e=setTimeout(function(){return n(function(e){return(0,i._)((0,r._)({},e),{tooltipOpen:!1})})},2500);return function(){return clearTimeout(e)}}},[c,t.tooltipOpen,n]),(0,l.useMemo)(function(){return c?{recordAccept:function(){n(function(e){return(0,i._)((0,r._)({},e),{consecutiveRejections:0})})},recordReject:function(){n(function(e){var t=e.consecutiveRejections+1;if(t>=5){var n=a.Z.get(d,"number");if(!n||Date.now()-n>=432e6)return a.Z.set(d,Date.now()),(0,i._)((0,r._)({},e),{consecutiveRejections:t,tooltipOpen:!0})}return(0,i._)((0,r._)({},e),{consecutiveRejections:t})})}}:null},[c,n])}},578:function(e,t,n){n.d(t,{Z:function(){return em}});var r=n(45903),i=n(25e3),o=n(25632),a=n(50782),l=n(50199),c=n(43429),s=n(95683),u=n(23026),d=n(32477),f=n(22470),h=n(43647),p=function(){"use strict";function e(){(0,u._)(this,e),this.cache=new f.L(h.vq)}var t=e.prototype;return t.find=function(e){if(this.cache.has(e))return this.cache.get(e);var t=null,n=!0,r=!1,i=void 0;try{for(var o,a=this.cache.entries()[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=(0,d._)(o.value,2),c=l[0],s=l[1];if(!(c.length>e.length)&&!(c.length+s.length<=e.length)){var u=c+s;if(u.startsWith(e)){var f=u.slice(e.length);if(f.trim().length<5)continue;var h=s.lastIndexOf("\n");if(-1!==h&&h<=e.length-c.length)continue;t=f,this.cache.set(c,s);break}}}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t},t.get=function(e){var t=this.find(e);return null===t?null:JSON.stringify({text:t})+"\n"},t.set=function(e,t){this.cache.set(e,t)},e}(),m=n(20916),v=n(34142),g=n(87682),y=n(25425),b=n(54916),Z=n(19659),w=n(58091),x={javascript:["javascript","typescript"],python:["python","python3"],python3:["python","python3"],typescript:["javascript","typescript"]},C=["json"],_=n(96003),S=n(93748),E=n(21012),k=n(95867),T=n(5453),R=n(67073),D=n(12338),I=n(12621),G=n(48900),B=n(47507),A=new Map,P={beforeCompletion:function(e){G.n_({category:"ghostwriter",message:"Called completeCode: "+e.engine,level:"debug"});var t=I.YX.add(e),n=B.kg.timeStart({language:e.language,engine:e.engine,replid:e.replId,codeLength:e.code.length});return A.set(t,n),t},afterCompletion:function(e,t,n,r){switch(e){case"aborted":I.YX.abort(r),A.delete(r);break;case"success":G.n_({category:"ghostwriter",message:"Suggestion emitted: "+n.partialSuggestion,level:"debug"});var i=A.get(r);if(!i)throw Error("No latency logger found for handle: "+JSON.stringify(r));i("code suggestion",{type:"success"}),A.delete(r);break;case"finished":I.YX.complete(r,{__typename:"CompleteCodeResult",id:Date.now().toString(),code:n.completeSuggestion});break;default:throw Error("Unknown completion kind: "+e)}},erroredCompletion:function(e,t){t&&(I.YX.abort(t),A.delete(t)),B.kg.error("CompleteCode: error in completion provider",{err:String(e)})}},N=n(70408);function U(){return(U=(0,R._)(function(e){var t,n,r,i;return(0,g.Jh)(this,function(o){switch(o.label){case 0:t=e.getReader(),o.label=1;case 1:return[4,(0,T._)(t.read())];case 2:if(r=(n=o.sent()).done,i=n.value,r)return[3,4];return[4,i];case 3:return o.sent(),[3,1];case 4:return t.releaseLock(),[2]}})})).apply(this,arguments)}function L(){return(L=(0,R._)(function(e){var t,n,r,i,o,a,l,c;return(0,g.Jh)(this,function(s){switch(s.label){case 0:t=new TextDecoder("utf-8"),n=!1,r=!1,s.label=1;case 1:s.trys.push([1,7,8,13]),o=(0,k._)(function(e){return U.apply(this,arguments)}(e)),s.label=2;case 2:return[4,(0,T._)(o.next())];case 3:if(!(n=!(a=s.sent()).done))return[3,6];return l=a.value,[4,t.decode(l,{stream:!0})];case 4:s.sent(),s.label=5;case 5:return n=!1,[3,2];case 6:return[3,13];case 7:return c=s.sent(),r=!0,i=c,[3,13];case 8:if(s.trys.push([8,,11,12]),!(n&&null!=o.return))return[3,10];return[4,o.return()];case 9:s.sent(),s.label=10;case 10:return[3,12];case 11:if(r)throw i;return[7];case 12:return[7];case 13:return[2]}})})).apply(this,arguments)}var O=n(59868),M=n(84357),X=n(38265),F=n(77858),W=M.r$.define({combine:function(e){var t;return null!==(t=e.filter(Boolean)[0])&&void 0!==t?t:null}}),H=n(83684),V=n(63185),z=n(86865),j=n(54450),q=M.QQ.define({create:function(){return null},update:function(e,t){if(t.annotation(j.Z)||!t.state.field(V.WF).stopped)return null;if(!t.docChanged&&!t.selection)return e;var n=t.newDoc,r=t.newSelection.main.head;return t.annotation(M.YW.remote)?null!==e&&(0,H.zV)(n,r)&&(0,H.to)(n,r)?e:null:t.selection&&t.isUserEvent("select")?(0,H.zV)(n,r)&&(0,H.to)(n,r)?Date.now():null:t.docChanged&&null!==e?(0,H.zV)(n,r)&&(0,H.to)(n,r)?e:null:e}}),Y=function(){"use strict";function e(t){(0,u._)(this,e),this.view=t,this.timeout=null}var t=e.prototype;return t.update=function(e){var t=this,n=e.startState.field(q),r=e.state.field(q);n!==r&&(null!==this.timeout&&(clearTimeout(this.timeout),this.timeout=null),null!==r&&(this.timeout=setTimeout(function(){t.timeout=null,t.view.dispatch({effects:[z.mb.of(z.xz.NOW)]})},2500)))},t.destroy=function(){null!==this.timeout&&(clearTimeout(this.timeout),this.timeout=null)},e}(),$=X.lg.fromClass(Y,{provide:function(){return q}}),J=n(57953),K=n(74633),Q=n(76804),ee=n(17925),et=function(){"use strict";function e(t){var n=this;(0,u._)(this,e),this.config=t,this.finished=!1,this.abortController=new AbortController,this.suggestion="",this.promise=this.start(),this.abortController.signal.addEventListener("abort",function(){if(!n.finished){var e,t;n.finished=!0,null===(e=(t=n.config).onFinished)||void 0===e||e.call(t,null)}})}var t=e.prototype;return t.start=function(){var e=this;return(0,v._)(function(){var t,n,r,i,o,a,l,c,s,u,d,f,h,p,m,v,y,b,Z,w,x,C,_,S,E,T,R,D;return(0,g.Jh)(this,function(g){switch(g.label){case 0:g.trys.push([0,13,,14]),r="",i=!0,o=!1,a=void 0;try{for(l=e.config.prefix.iter(-1)[Symbol.iterator]();!(i=(c=l.next()).done)&&(u=(s=c.value).trimEnd(),r=(s?s.slice(u.length):"\n")+r,!(u.length>0));i=!0);}catch(e){o=!0,a=e}finally{try{i||null==l.return||l.return()}finally{if(o)throw a}}d=e.config.prefix.length-r.length,f=r?e.config.prefix.slice(0,d):e.config.prefix,h=e.config.request({language:e.config.language,filePath:e.config.filePath,code:f.toString(),suffix:e.config.suffix?e.config.suffix.toString():void 0,maxTokens:e.config.maxTokens,signal:e.abortController.signal}),p=!0,m=!!r,v="",y=!1,b=!1,g.label=1;case 1:g.trys.push([1,6,7,12]),w=(0,k._)(h),g.label=2;case 2:return[4,w.next()];case 3:if(!(y=!(x=g.sent()).done))return[3,5];if(C=x.value,m){if(v+=C,(0,H.xb)(C))return[3,4];if(m=!1,_=(0,H.O8)(v),S=(0,H.O8)(r),!_.indentation.startsWith(S.indentation)||!!S.newlines!=!!_.newlines)return e.abort(),[3,5];C=_.indentation.slice(S.indentation.length)+_.content}if(e.suggestion+=C,e.config.onTextReceived&&!1===e.config.onTextReceived(e.suggestion,p))return e.abort(),[3,5];p=!1,g.label=4;case 4:return y=!1,[3,2];case 5:return[3,12];case 6:return E=g.sent(),b=!0,Z=E,[3,12];case 7:if(g.trys.push([7,,10,11]),!(y&&null!=w.return))return[3,9];return[4,w.return()];case 8:g.sent(),g.label=9;case 9:return[3,11];case 10:if(b)throw Z;return[7];case 11:return[7];case 12:return[3,14];case 13:return T=g.sent(),e.aborted||e.abort(),T instanceof DOMException&&"AbortError"===T.name||null===(R=(D=e.config).onError)||void 0===R||R.call(D,T),[3,14];case 14:if(e.aborted)return[2,null];return e.finished=!0,null===(t=(n=e.config).onFinished)||void 0===t||t.call(n,e.suggestion),[2,e.suggestion]}})})()},t.abort=function(){this.aborted||this.abortController.abort()},t.then=function(e,t){return this.promise.then(e,t)},(0,J._)(e,[{key:"aborted",get:function(){return this.abortController.signal.aborted}}]),e}(),en=n(66899),er=n(89798),ei=n(7612),eo=n(73164),ea=function(){"use strict";function e(t){(0,u._)(this,e),this.view=t,this.destroyed=!1,this.stream=null,this.debounceTimeout=null,this.queued=!1,this.lastPrefixLength=0}var t=e.prototype;return t.dispatchSuggestion=function(e){this.view.dispatch({effects:V.OK.of(e)})},t.dismiss=function(){this.queued=!1,null!==this.debounceTimeout&&(clearTimeout(this.debounceTimeout),this.debounceTimeout=null),!this.stream||this.stream.finished||this.stream.aborted||this.stream.abort(),this.destroyed||this.suggestion.stopped||this.dispatchSuggestion(this.suggestion.dismiss()),this.listeners.onDismiss(this.view)},t.requestSuggestion=function(e){var t,n,r=this;if(null!==this.config&&null!==this.fileTypeConfig){if(null!==this.debounceTimeout&&(clearTimeout(this.debounceTimeout),this.debounceTimeout=null),!this.config.debounceAlways&&e===z.xz.NOW){this.requestSuggestionImmediately();return}var i=this.view.state.selection.main.head,o=this.view.state.wordAt(i),a=o&&o.from!==i?null!==(n=this.config.debounceTimeInsideWord)&&void 0!==n?n:0:null!==(t=this.config.debounceTimeOutsideWord)&&void 0!==t?t:0;0===a?this.requestSuggestionImmediately():this.debounceTimeout=setTimeout(function(){r.debounceTimeout=null,r.requestSuggestionImmediately()},a)}},t.requestSuggestionImmediately=function(){var e,t,n,r,i=this;if(this.dismiss(),null!==this.config&&null!==this.fileTypeConfig&&!this.destroyed&&this.view.hasFocus&&(0,H.zV)(this.view.state.doc,this.view.state.selection.main.head)){var o=this.config,a=this.view.state,l=a.selection.main.head,c=a.doc,s=(0,K.qz)(a),u=null!==(t=null===(e=a.facet(K.dK))||void 0===e?void 0:e.parser)&&void 0!==t?t:null,d=this.fileTypeConfig,f=null!==(n=d.excludeLastIndent)&&void 0!==n&&n,p=null!==(r=d.skipComplexProcessing)&&void 0!==r&&r,m=a.facet(ee.r),v=(0,H.$j)(c,a.facet(K.c),l),g=o.infill?(0,H.WN)(c,l,f):null,y=h.uV.DEFAULT;(0,en.ib)(c,s,l)&&(y=o.supportsExpandedMaximumTokens?h.uV.EMPTY_BLOCK_EXPANDED:h.uV.EMPTY_BLOCK),this.lastPrefixLength=v.length,o.backendOnly||this.dispatchSuggestion(this.suggestion.start());var b=ee.q.create("",l,c,s,u);this.stream=new et({request:o.request,language:d.id,filePath:d.path,maxTokens:y,prefix:v,suffix:g,onTextReceived:function(e,t){if(t&&i.listeners.onRequestFirstEmit(i.view),o.backendOnly){i.listeners.onRequestIgnoredBackendOnly(i.view);return}if(i.suggestion.stopped||(b=b.with({source:e}).process({excludeLastIndent:f,skipComplexProcessing:p,syntaxBasedCutting:m})).empty)return!1;var n=i.suggestion.merge(b.insertions);if(n.stopped)return!1;i.dispatchSuggestion(n)},onFinished:function(e){var t=i.queued;if(i.queued=!1,!o.backendOnly){if(e&&!i.suggestion.stopped&&!(b=b.with({source:e}).process({excludeLastIndent:f,skipComplexProcessing:p,syntaxBasedCutting:m})).empty){var n=i.suggestion.merge(b.insertions);if(!n.stopped){i.dispatchSuggestion(n.present()),i.listeners.onRequestCompletelyPresented(i.view);return}}i.dismiss(),t&&i.requestSuggestion(z.xz.ENQUEUE),""===e&&i.listeners.onRequestEndedWithNoSuggestion(i.view)}},onError:function(e){G.$e(function(t){t.setExtra("prefix",v.toString()),t.setExtra("maxTokens",y),t.setExtra("language",d.id),t.setExtra("selection-head",l),t.setExtra("previous-character",c.sliceString(l-1,l)),o.onErrorExtras&&t.setExtras(o.onErrorExtras(i)),t.setTag("ghostwriter",!0),G.Tb(e)})}})}},t.postUpdate=function(e){(0,ei.a)(e,W,er.Yp)&&this.dismiss(),(0,ei.a)(e,V.WF)&&this.suggestion.stopped&&this.streaming&&this.dismiss();var t=(0,z.Io)(e.transactions);switch(t){case z.xz.STOP:this.active&&this.dismiss();break;case z.xz.ENQUEUE:case z.xz.NOW:this.active?this.queued=!0:this.requestSuggestion(t)}},t.destroy=function(){this.destroyed=!0,this.dismiss()},(0,J._)(e,[{key:"config",get:function(){return this.view.state.facet(W)}},{key:"listeners",get:function(){return this.view.state.facet(Q.t)}},{key:"suggestion",get:function(){return this.view.state.field(V.WF)}},{key:"fileTypeConfig",get:function(){var e,t=this.view.state.facet(er.Yp);if(!t)return null;var n=eo.$R.from(t);if(!n)return null;var o=null===(e=n.getFeature("ai"))||void 0===e?void 0:e.complete;return(null==o?void 0:o.enabled)?(0,i._)((0,r._)({},o),{id:n.id,path:null!=t?t:""}):null}},{key:"streaming",get:function(){return null!==this.debounceTimeout||null!==this.stream&&!this.stream.finished}},{key:"active",get:function(){return this.streaming||!this.suggestion.stopped}}]),e}(),el=X.lg.fromClass(ea,{provide:function(e){return X.tk.updateListener.of(function(t){var n;null===(n=t.view.plugin(e))||void 0===n||n.postUpdate(t)})}}),ec=function(){"use strict";function e(t){(0,u._)(this,e),this.view=t,this.gesture=null,this.touchstart=this.touchstart.bind(this),this.touchmove=this.touchmove.bind(this),this.touchend=this.touchend.bind(this),this.touchcancel=this.touchcancel.bind(this),t.dom.addEventListener("touchstart",this.touchstart)}var t=e.prototype;return t.shouldAllowSwiping=function(){if(!this.view.hasFocus)return!1;var e=this.view.state.selection.main.head,t=this.view.viewport;if(t.from>e||t.to<e)return!1;var n=this.view.state.field(V.WF,!1);return!!n&&!!n.change&&!!n.presented},t.stop=function(){this.gesture&&(this.gesture=null,document.removeEventListener("touchmove",this.touchmove),document.removeEventListener("touchend",this.touchend),document.removeEventListener("touchcancel",this.touchcancel))},t.touchFor=function(e){if(!this.gesture)return null;var t=!0,n=!1,r=void 0;try{for(var i,o=e.changedTouches[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;if(a.identifier===this.gesture.id)return a}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}return null},t.touchstart=function(e){if(this.gesture&&!this.gesture.time)return this.stop();if(!this.gesture&&this.shouldAllowSwiping()&&1===e.changedTouches.length){var t=e.changedTouches[0];this.gesture={id:t.identifier,start:{x:t.clientX,y:t.clientY},end:{x:t.clientX,y:t.clientY},time:null},document.addEventListener("touchmove",this.touchmove,{passive:!1}),document.addEventListener("touchend",this.touchend,{passive:!1}),document.addEventListener("touchcancel",this.touchcancel)}},t.touchmove=function(e){var t=this.touchFor(e);if(this.gesture&&t){if(this.gesture.end.x=t.clientX,this.gesture.end.y=t.clientY,this.gesture.time&&Date.now()-this.gesture.time>500)return this.stop();var n=Math.abs(this.gesture.start.y-this.gesture.end.y),r=Math.abs(this.gesture.start.x-this.gesture.end.x);if(n>20)return this.stop();if(r>10){if(this.gesture.start.x>this.gesture.end.x)return this.stop();this.gesture.time||(this.gesture.time=Date.now()),e.preventDefault()}}},t.touchend=function(e){var t=this.touchFor(e);if(this.gesture&&t){this.gesture.end.x=t.clientX,this.gesture.end.y=t.clientY;var n=Math.abs(this.gesture.start.y-this.gesture.end.y),r=Math.abs(this.gesture.start.x-this.gesture.end.x);n<=20&&r>75&&this.gesture.start.x<this.gesture.end.x&&(!this.gesture.time||Date.now()-this.gesture.time<500)&&((0,F.o)(this.view),e.preventDefault()),this.stop()}},t.touchcancel=function(e){this.touchFor(e)&&this.stop()},t.update=function(){this.gesture&&!this.shouldAllowSwiping()&&this.stop()},t.destroy=function(){this.view.dom.removeEventListener("touchstart",this.touchstart),document.removeEventListener("touchmove",this.touchmove),document.removeEventListener("touchend",this.touchend),document.removeEventListener("touchcancel",this.touchcancel)},e}(),es=X.lg.fromClass(ec),eu=n(27308),ed=M.r$.define({combine:function(e){var t;return null!==(t=e.filter(Boolean)[0])&&void 0!==t?t:null},enables:function(e){return[W.compute([e],function(t){return t.facet(e)}),V.WF,z._v,el,es,$,M.Wl.high(X.$f.compute([e],function(t){var n=t.facet(e),r=[];return(null==n?void 0:n.keyAcceptSuggestion)&&r.push({key:(0,eu.cU)(n.keyAcceptSuggestion),run:F.o}),(null==n?void 0:n.keyDismissSuggestion)&&r.push({key:(0,eu.cU)(n.keyDismissSuggestion),run:F.i}),r}))]}}),ef=n(75023),eh=new ef.j(function(e,t,n,r,i,o,a,l,c,s,u,d){var f,p;return e?(n===E.Yy.Pro?(f=h.Dz,p=s?h.Dd:h.Dz):(f=c,p=s?h.VF:c),[ed.of({request:a,infill:o,backendOnly:n===E.Yy.BackendOnly,debounceTimeOutsideWord:f,debounceTimeInsideWord:p,debounceAlways:n!==E.Yy.Pro,supportsExpandedMaximumTokens:"replit-v1-5-3b"===t||"replit-repltuned-v1-5-3b"===t,keyAcceptSuggestion:r,keyDismissSuggestion:i,onErrorExtras:function(){return l}}),z._b.of(u),ee.r.of(d)]):null}),ep=new ef.j(function(e,t,n){if(!e)return null;var o,a,l=(o=null,a=function(){},{queue:function(e){if(!(Math.random()>.1)){o&&clearTimeout(o);var t=function(){(0,O.j)(O.U3.CODE_SUGGESTION_USED,(0,r._)({type:"suggestionPresented"},e))};o=setTimeout(t,500),a=t}},flush:function(){o&&clearTimeout(o),a()},cancel:function(){o&&clearTimeout(o)}});return Q.t.of({onDismiss:function(){l.cancel()},onRequestIgnoredBackendOnly:function(){G.n_({category:"ghostwriter",message:"called completeCode for free user but did not show the ghost text.",level:"info"}),(0,O.j)(O.U3.CODE_SUGGESTION_USED,(0,i._)((0,r._)({type:"suggestionNotPresented"},t),{reason:"ghostTextNotEnabledForFreeUser"}))},onRequestFirstEmit:function(e){var n=e.plugin(el);n&&(G.n_({category:"ghostwriter",message:"Suggestion presented",level:"debug"}),l.queue((0,i._)((0,r._)({},t),{prefixLength:n.lastPrefixLength})))},onRequestEndedWithNoSuggestion:function(){G.n_({category:"ghostwriter",message:"Exited completeCode iteration with no suggestion.",level:"info"}),(0,O.j)(O.U3.CODE_SUGGESTION_USED,(0,i._)((0,r._)({type:"suggestionNotPresented"},t),{reason:"noSuggestion"}))},onSuggestionAccepted:function(e,o){var a=e.plugin(el);if(a){l.flush();var c=Math.abs(o.newLength-o.length);(0,O.j)(O.U3.CODE_SUGGESTION_USED,(0,i._)((0,r._)({type:"suggestionAccepted"},t),{prefixLength:a.lastPrefixLength,suggestionLength:c})),G.n_({category:"ghostwriter",message:"Suggestion accepted",level:"info"}),null==n||n.recordAccept()}},onSuggestionExplicitlyDismissed:function(e){var o=e.plugin(el);o&&(l.flush(),(0,O.j)(O.U3.CODE_SUGGESTION_USED,(0,i._)((0,r._)({type:"suggestionDismissed"},t),{prefixLength:o.lastPrefixLength})),G.n_({category:"ghostwriter",message:"Suggestion explicitly dismissed",level:"info"}),null==n||n.recordReject())}})});function em(e){var t,n,i,u,f,G,B,A,U,O,M,X=e.filePath,F=(0,a.Z)(),W=(0,o.Gn)("codeSuggestion").preferences,H=(0,E.ZP)(),V=W.codeSuggestion&&H!==E.Yy.None;(0,c.useEffect)(function(){I.YX.toggle(V)},[V]);var z=(0,m.Z)(),j=z.engine,q=z.settings,Y=(0,_.gf)(S.CN.acceptPrimaryCompletion.id),$=(0,_.gf)(S.CN.cancelCompletion.id),J=null!==(M=null==q?void 0:q.infill)&&void 0!==M&&M,K=(0,s.S)(X),Q=function(e,t){var n,r,i,o,a,l,u,f,h,p,m=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,_=arguments.length>3&&void 0!==arguments[3]?arguments[3]:6,S=(0,b.Z)().fs,E=(r=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6,r=(0,y.P5)({controlName:"flag-ghostwriter-neighboring-context",logFlagToAnalytics:!0}),i=(0,w.Bx)(),o=(0,d._)((0,c.useState)(null),2),a=o[0],l=o[1];return(0,c.useEffect)(function(){l(r?i.filter(function(n){var r,i;return(!!((r=(0,s.S)(n).toLowerCase())===(i=e.toLowerCase())||C.includes(r))||!!x[r]&&x[r].includes(i))&&n!==t&&(0,Z.Mb)(n)}).slice(0,n):null)},[e,t,r,n,i]),a}(e,t,_),i=(0,c.useCallback)(function(e,t){var n;return{type:"file",code:(n=e.split("\n")).slice(Math.max(0,n.length-m)).join("\n"),path:t}},[m]),o=(0,c.useCallback)((n=(0,v._)(function(e){return(0,g.Jh)(this,function(t){switch(t.label){case 0:return[4,S.readFile(e)];case 1:return[2,t.sent()]}})}),function(e){return n.apply(this,arguments)}),[S]),l=(a=(0,d._)((0,c.useState)([]),2))[0],u=a[1],h=(f=(0,d._)((0,c.useState)(!1),2))[0],p=f[1],(0,c.useEffect)(function(){r&&(p(!0),(0,v._)(function(){var e;return(0,g.Jh)(this,function(t){switch(t.label){case 0:var n;return[4,Promise.all(r.map((n=(0,v._)(function(e){var t;return(0,g.Jh)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,o(e)];case 1:if((t=n.sent()).error)return[2,!1];return[2,i(t.content.toString(),e)];case 2:return n.sent(),[2,!1];case 3:return[2]}})}),function(e){return n.apply(this,arguments)})))];case 1:return e=t.sent().filter(Boolean),p(!1),u(e),[2]}})})())},[r,o,i]),{cachedFiles:l,loading:h}).cachedFiles;return null!=E?E:[]}(K,X),ee=(0,l.Z)(function(){return new p},[K,X,F,j]),et=(n=(t={engine:j,replId:F,context:Q,settings:{infill:J},provider:(0,l.Z)(function(){var e;return e=(0,v._)(function(e,t){var n,r,i,o,a,l;return(0,g.Jh)(this,function(c){switch(c.label){case 0:return[4,fetch("/ai/complete",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},signal:t,body:JSON.stringify(e)})];case 1:if(r=(n=c.sent()).body,!(200!==(i=n.status)))return[3,3];return o=Error.bind,l=(a="Error (".concat(i,") response from /ai/complete: ")).concat,[4,n.text()];case 2:throw new(o.apply(Error,[void 0,l.apply(a,[c.sent()])]));case 3:if(!r)throw Error("No body in response");return[2,function(){return function(e){return L.apply(this,arguments)}(r)}]}})}),function(t,n){return e.apply(this,arguments)}},[]),cache:ee,hooks:P}).engine,i=t.replId,u=t.context,f=t.settings,G=t.provider,B=t.cache,A=t.hooks,U=f.infill,(0,c.useCallback)((O=(0,R._)(function(e){var t,o,a,l,c,s,d,f,h,p,m,v,y,b,Z,w,x,C,_,S,E,I,P,N,L,O;return(0,g.Jh)(this,function(M){switch(M.label){case 0:if(t=e.language,o=e.filePath,a=e.code,l=e.suffix,c=e.signal,s=e.maxTokens,!a)return[2];if(d="markdown"===t?{maxTokens:75,stop:[]}:{},f=(0,r._)({language:t,code:a,suffix:U?l:void 0,replId:i,filePath:o,engine:n,maxTokens:s,context:u,stop:["\n\n","```"]},d),h=null==A?void 0:A.beforeCompletion(f),!(null!=(m=B.get(a))))return[3,1];return p=(0,R._)(function(){return(0,g.Jh)(this,function(e){switch(e.label){case 0:return[4,m];case 1:return e.sent(),[2]}})}),[3,4];case 1:return M.trys.push([1,3,,4]),[4,(0,T._)(G(f,c))];case 2:return p=M.sent(),[3,4];case 3:if((null==(v=M.sent())?void 0:v.name)==="AbortError")return[2];return null==A||A.erroredCompletion(v instanceof Error?v:Error("Unknown error"),h),[2];case 4:y="",b="",Z=!0,w=!1,c.addEventListener("abort",function(){h&&(null==A||A.afterCompletion("aborted",f,{},h)),w=!0}),x=!1,C=!1,M.label=5;case 5:M.trys.push([5,13,14,19]),S=(0,k._)(p()),M.label=6;case 6:return[4,(0,T._)(S.next())];case 7:if(!(x=!(E=M.sent()).done))return[3,12];I=E.value,b+=I,P=void 0,M.label=8;case 8:if(!(-1!==(P=b.indexOf("\n"))))return[3,11];if(N=JSON.parse(b.substring(0,P)).text,b=b.substring(P+1),L=(0,D.Hy)(N,t).replacementSuggestion,y+=L,w)return[3,10];return[4,L];case 9:M.sent(),M.label=10;case 10:return!w&&Z&&h&&(null==A||A.afterCompletion("success",f,{fromCache:!!m,partialSuggestion:L},h)),Z=!1,(0,D.cx)(y).haltAfter&&(w=!0),[3,8];case 11:return x=!1,[3,6];case 12:return[3,19];case 13:return O=M.sent(),C=!0,_=O,[3,19];case 14:if(M.trys.push([14,,17,18]),!(x&&null!=S.return))return[3,16];return[4,S.return()];case 15:M.sent(),M.label=16;case 16:return[3,18];case 17:if(C)throw _;return[7];case 18:return[7];case 19:if(null===m&&y.trim().length&&B.set(a,y),!(!w&&b))return[3,21];return[4,b];case 20:M.sent(),M.label=21;case 21:return h&&(null==A||A.afterCompletion("finished",f,{completeSuggestion:y,fromCache:!!m},h)),[2]}})}),function(e){return O.apply(this,arguments)}),[n,i,u,U,B,A,G])),en=(0,N.S)(),er=(0,c.useMemo)(function(){return{filePath:X,language:K,engine:j,additionalContextCount:Q.length,additionalContextLength:Q.reduce(function(e,t){return e+t.code.length},0)}},[X,K,j,Q]),ei=(0,y.P5)({controlName:"flag-gw-magikarp-bounce-time",logFlagToAnalytics:!1,default:h.yr,type:"number"}),eo=(0,y.P5)({controlName:"flag-ghostwriter-alternate-debounce",logFlagToAnalytics:!0}),ea=(0,y.P5)({controlName:"flag-completely-different-tree-trigger",logFlagToAnalytics:!0}),el=(0,y.P5)({controlName:"flag-completely-different-tree-cutting",logFlagToAnalytics:!0}),ec=[eh.use(V,j,H,Y,$,J,et,er,ei,eo,ea,el),ep.use(V,er,en)];return(0,c.useMemo)(function(){return ec},ec)}},32517:function(e,t,n){n.d(t,{Bc:function(){return B},$_:function(){return G},II:function(){return k},Xs:function(){return R},fL:function(){return S},If:function(){return E},k4:function(){return D},U1:function(){return I}});var r=n(32477),i=n(21289),o=n(8182),a=n(87659),l=n(30376),c=n(93918),s=n(56596),u=n(43704),d=n(29287),f=n(26508),h=n(93496),p=n(12880),m=n(74833),v=n(39511),g=n(43429),y=n(25753),b=n(88936),Z=n(30983),w=[d.l0.p(4),d.l0.center,d.l0.borderRadius(4)],x=(0,c.X)({root:(0,i._)(w).concat([d.l0.cursor.pointer,(0,a.ec)("blurple")]),disabled:(0,i._)(w).concat([(0,a.ec)("grey")])});function C(e){return e.disabled?(0,o.tZ)(s.G,{css:x.disabled,tag:"button","data-cy":"ghostwriter-inline-submit",children:(0,o.tZ)(v.Z,{size:12})}):(0,o.tZ)(s.G,{"data-cy":"ghostwriter-inline-submit",css:x.root,tag:"button",onClick:e.onClick,children:e.loading?(0,o.tZ)(y.Z,{size:12}):(0,o.tZ)(v.Z,{size:12})})}var _=(0,c.X)({root:[d.l0.py(8),d.l0.pr(8),d.l0.maxWidth(800),{fontFamily:d.TV.fontFamilyDefault}],container:[d.l0.position.relative,d.l0.backgroundColor.backgroundDefault],input:[h.gU.outlined,d.l0.borderRadius(4),{paddingBottom:36,"@media (hover: hover)":{":not([disabled]):hover":{backgroundColor:"transparent"}}}],textarea:[d.l0.p(8),d.l0.pb(0),{caretColor:"initial",fontFamily:d.TV.fontFamilyDefault,border:"0 none",resize:"none",height:"1em",backgroundColor:"transparent","@media (hover: hover)":{":not([disabled]):focus":{outline:"0 none"}},"::placeholder":{color:d.TV.foregroundDimmest}}],footer:[d.l0.px(8),d.l0.pr(6),d.l0.rowWithGap(8),d.l0.align.center,d.l0.position.absolute,d.l0.bottom(0),d.l0.left(0),d.l0.width("100%"),{height:36}],footerLeft:[d.l0.rowWithGap(8),d.l0.flex.growAndShrink(1),d.l0.align.center],iconText:[d.l0.rowWithGap(4),d.l0.align.center],footerRight:[d.l0.rowWithGap(4),d.l0.align.center,{"& button":[d.l0.height(22),d.l0.py(6),d.l0.py(4),d.l0.borderRadius(4)]}],error:[d.l0.color.accentNegativeStronger]}),S=function(e){var t=e.requestMeasure,n=e.type,r=e.children,i=e.isCodeMirrorPocket,a=(0,f.Z)(t);return(0,o.tZ)(l.Z,{bsod:!0,tags:{ai:!0},extras:{type:n},origin:"ErrorBoundary: InlineAiWidget",children:(0,o.tZ)(s.G,{css:_.root,innerRef:a,className:void 0===i||i?"cm-pocket-widget":void 0,children:r})})},E=function(e){var t=e.requestMeasure,n=e.type,r=e.children,i=e.isCodeMirrorPocket;return(0,o.tZ)(S,{type:n,requestMeasure:t,isCodeMirrorPocket:void 0===i||i,children:(0,o.tZ)(s.G,{css:_.container,children:r})})};function k(e){var t=(0,u.Z)();return(0,o.tZ)(s.G,{css:_.input,children:(0,o.tZ)("textarea",{value:e.value,onChange:e.onChange,placeholder:e.placeholder,css:_.textarea,ref:t.ref,onKeyDown:e.onKeyDown,autoFocus:e.autoFocus,"data-cy":"ghostwriter-inline-input"})})}var T={generateCode:"Generate new code based on this file.",transformCode:"Modify selected code based on the context of this file."};function R(e){var t=e.type;return(0,o.tZ)(Z.u,{tooltip:T[t],children:(0,o.BX)(s.G,{css:_.iconText,children:[(0,o.tZ)(p.Z,{size:12,color:d.TV.foregroundDimmest}),(0,o.tZ)(m.xv,{variant:"small",color:"dimmest",children:"transformCode"===t?"Modify":"Generate"})]})})}function D(e){var t=e.loading,n=e.disabled,r=e.onClick;return(0,o.BX)(o.HY,{children:[t?(0,o.BX)(s.G,{css:_.iconText,children:[(0,o.tZ)(b.Z,{size:12,color:d.TV.blurpleDefault}),(0,o.tZ)(m.xv,{variant:"small",color:"dimmest",children:"AI is writing"})]}):(0,o.tZ)(m.xv,{variant:"small",color:"dimmest",children:"Esc to close, Enter to submit"}),(0,o.tZ)(C,{loading:t,disabled:n,onClick:r})]})}function I(e){var t=e.onClose,n=e.loading,i=e.onSubmit,o=(0,r._)((0,g.useState)(""),2),a=o[0],l=o[1];return{value:a,setValue:l,onKeyDown:function(e){switch(e.key){case"Escape":e.preventDefault(),t();break;case"Enter":if(e.preventDefault(),n)break;e.shiftKey?l(function(e){return e+"\n"}):e.metaKey||i()}}}}var G=function(e){var t=(0,r._)(e.children,2),n=t[0],i=t[1];return(0,o.BX)(s.G,{css:_.footer,children:[(0,o.tZ)(s.G,{css:_.footerLeft,children:n}),(0,o.tZ)(s.G,{css:_.footerRight,children:i})]})},B=function(e){var t=e.error;return(0,o.tZ)(m.xv,{css:_.error,children:t})}},50686:function(e,t,n){n.d(t,{W:function(){return tw}});var r,i,o,a=n(84357),l=n(38265),c=n(60417),s=n(23026),u=n(57953),d=n(3194),f=n(2543),h=n(39698),p=n(29287),m="cm-transform-diff-line-deletion-base",v="cm-transform-diff-line-deletion",g="cm-transform-diff-text-deletion",y="cm-transform-diff-line-insertion-base",b="cm-transform-diff-line-insertion",Z="cm-transform-diff-text-insertion",w="cm-transform-diff-number-marker",x="rgba(180, 0, 0, 0.1)",C="rgba(180, 0, 0, 0.125)",_="rgba(0, 180, 0, 0.1)",S="rgba(0, 180, 0, 0.125)";function E(e,t){var n="linear-gradient(to right, ".concat(e,", ").concat(e,")");return t&&(n+=", linear-gradient(to right, ".concat(t,", ").concat(t,")")),n}var k=l.tk.theme((i={},(0,h._)(i,".".concat(y,", .").concat(b),{cursor:"text","&.cm-line ::selection":{backgroundColor:"".concat(p.TV.accentPrimaryDimmest," !important")}}),(0,h._)(i,".".concat(m),{background:E(x),backgroundClip:"content-box"}),(0,h._)(i,".".concat(v),{background:E(x,C),backgroundClip:"content-box"}),(0,h._)(i,".".concat(y),{background:E(_),backgroundClip:"content-box"}),(0,h._)(i,".".concat(b),{background:E(_,S),backgroundClip:"content-box"}),(0,h._)(i,".".concat(Z),{display:"inline-block",background:S}),(0,h._)(i,".".concat(g),{display:"inline-block",background:C}),(0,h._)(i,".".concat(w),{opacity:.5}),i)),T=n(74633),R=n(81232),D=n(30804),I=n(67075),G=a.r$.define({combine:function(e){var t;return null!==(t=e.filter(Boolean)[0])&&void 0!==t?t:null}}),B=a.QQ.define({create:function(){return{diff:null,tree:R.mp.empty}},update:function(e,t){var n,r,i=t.state.facet(G),o=null===(n=t.state.facet(T.dK))||void 0===n?void 0:n.parser;if(!i)return null===e.diff&&e.tree===R.mp.empty?e:{diff:null,tree:R.mp.empty};var a=e.diff,l=e.tree;return(a&&a.b.eq(i)?t.docChanged&&(a=a.updateA(t.newDoc,t.changes)):(a=D.z.create(t.newDoc,i),l=R.mp.empty),(null===(r=t.startState.facet(T.dK))||void 0===r?void 0:r.parser)!==o&&(l=R.mp.empty),o&&l.length!==a.b.length)?(l=(0,I.p)({parser:o,text:a.b,maxTime:16,base:l}),{diff:a,tree:l}):e.diff===a&&e.tree===l?e:{diff:a,tree:l}}}),A=n(31157),P=n(15658),N=n(3756),U=n.n(N),L=function(e){"use strict";(0,d._)(n,e);var t=(0,f._)(n);function n(e,r,i){var o;return(0,s._)(this,n),(o=t.call(this)).line=e,o.index=r,o.changed=i,o}var r=n.prototype;return r.toDOM=function(){var e=this,t=document.createElement("div");if(t.className=this.changed?"cm-line ".concat(y):"cm-line ".concat(b),!this.changed||!this.changed.length){var n=!0,r=!1,i=void 0;try{for(var o,a=this.line[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value,c=l.text,s=l.tags,u=document.createElement("span");u.textContent=c||"\xa0",u.className=null!=s?s:"",t.appendChild(u)}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t}for(var d=0,f=0,h=null,p=null,m=function(t,n){if(!h)throw Error("range is null");var r=e.line[f],i=r.text,o=r.tags,a=i.slice(d-h.from,n-h.from),l=document.createElement("span");l.textContent=a||"\xa0",l.className=null!=o?o:"",t.appendChild(l),d+=a.length};f<this.line.length;){if(!h){var v=this.line[f].text;h={from:d,to:d+v.length}}if(!p){var g=!0,w=!1,x=void 0;try{for(var C,_=this.changed[Symbol.iterator]();!(g=(C=_.next()).done);g=!0){var S=C.value;if(!(S.from>=h.to)&&!(S.to<=d)){var E=document.createElement("span");E.className=Z,p={from:S.from,to:S.to,dom:E},d<p.from&&m(t,p.from),t.appendChild(E);break}}}catch(e){w=!0,x=e}finally{try{g||null==_.return||_.return()}finally{if(w)throw x}}}p?(d<p.to&&m(p.dom,p.to),d>=p.to&&(p=null)):m(t,h.to),d>=h.to&&(h=null,f++)}return t},r.eq=function(e){var t,r;return e instanceof n&&this.index===e.index&&this.line.length===e.line.length&&(null===(t=this.changed)||void 0===t?void 0:t.length)===(null===(r=e.changed)||void 0===r?void 0:r.length)&&U()(this.line,e.line)&&U()(this.changed,e.changed)},r.ignoreEvent=function(e){return e.stopImmediatePropagation(),!0},(0,u._)(n,[{key:"estimatedHeight",get:function(){return 21}}]),n}(l.l9),O=l.p.line({class:m}),M=l.p.line({class:v}),X=l.p.mark({class:g}),F=l.tk.decorations.compute([B],function(e){var t=function(e,t){if(r.getLineChangeType(e.number,A.MF.A)===A.dQ.COVERED)o.push(M.range(e.from));else{o.push(O.range(e.from));var n=!0,i=!1,a=void 0;try{for(var l,c=(0,A.Po)(e,t,A.MF.A,!1)[Symbol.iterator]();!(n=(l=c.next()).done);n=!0){var s=l.value;o.push(X.range(s.from,s.to))}}catch(e){i=!0,a=e}finally{try{n||null==c.return||c.return()}finally{if(i)throw a}}}},n=e.field(B,!1);if(!n||!n.diff)return l.p.none;var r=n.diff,i=n.tree,o=[],a=!0,c=!1,s=void 0;try{for(var u,d=r.chunks[Symbol.iterator]();!(a=(u=d.next()).done);a=!0){var f=u.value;if(f.fromA!==f.endA)for(var h=r.a.lineAt(f.fromA),p=r.a.lineAt(f.endA),m=h.number;m<=p.number;m++)t(r.a.line(m),f);else f.fromB===f.endB&&t(r.a.lineAt(f.fromA),f);if(f.fromB!==f.toB)for(var v=r.b.lineAt(f.fromB),g=(0,P.CT)(i,r.b,e,f.fromB,f.endB),y=0;y<g.length;y++){var b=g[y],Z=r.b.line(v.number+y),w=r.getLineChangeType(Z.number,A.MF.B)===A.dQ.COVERED?null:(0,A.Po)(Z,f,A.MF.B,!0),x=l.p.widget({widget:new L(b,Z.number,w),block:!0,side:y+1}),C=Math.min(f.endA,r.a.length);o.push(x.range(C))}}}catch(e){c=!0,s=e}finally{try{a||null==d.return||d.return()}finally{if(c)throw s}}return l.p.set(o,!0)}),W=n(3917),H=function(e){"use strict";(0,d._)(n,e);var t=(0,f._)(n);function n(e){var r;return(0,s._)(this,n),(r=t.call(this)).index=e,r}var r=n.prototype;return r.toDOM=function(){var e=document.createElement("span");return e.className=w,e.textContent=String(this.index),e},r.eq=function(e){return this.index===e.index},n}(l.SJ),V=W.X4.of(function(e,t){if(t instanceof L)return new H(t.index)}),z=a.r$.define({enables:function(e){return[G.computeN([e],function(t){return t.facet(e)}),B,k,F,V]}}),j=n(53466);(r=o||(o={}))[r.Compare=0]="Compare",r[r.Original=1]="Original",r[r.Suggestion=2]="Suggestion";var q=n(51944),Y=a.Py.define(),$=a.QQ.define({create:function(){return o.Suggestion},update:function(e,t){var n=!0,r=!1,i=void 0;try{for(var a,l=t.effects[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var c=a.value;if(c.is(Y))e=c.value;else if(c.is(q.Q))e=null;else if(c.is(q.h)){var s=t.state.field(j.$);if((null==s?void 0:s.type)==="transformCode"&&c.value){var u=t.startState.field(j.u),d=c.value;!u&&d&&(e=o.Suggestion)}}}}catch(e){r=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw i}}return e}}),J=n(89798),K=n(7612),Q=a.QQ.define({create:function(){return null},update:function(e,t){if(!(0,K.a)(t,"doc",j.$,J.Yp,$,j.u))return e;var n,r=t.state.field(j.$),i=t.state.facet(J.Yp),a=t.state.field($);if(!r||!i||r.codeReference.filePath!==i||a!==o.Suggestion)return null;var l=r.codeReference.range.indexFrom,c=r.codeReference.range.indexTo,s=t.state.doc.slice(l,c),u=null!==(n=t.state.field(j.u))&&void 0!==n?n:"",d=s.lines,f=u.split(t.state.lineBreak).length-d;return e&&e.after===l&&e.offset===f?e:{after:l,offset:f}}}),ee=W.gy.of(function(e,t){var n=e.state.doc.lineAt(t.from),r=e.state.field(Q);if(r&&!(n.from<=r.after))return new W.un(n.number+r.offset)}),et=W.X4.of(function(e,t){if(t instanceof en)return new W.un(t.index)}),en=function(e){"use strict";(0,d._)(n,e);var t=(0,f._)(n);function n(e,r,i){var o;return(0,s._)(this,n),(o=t.call(this)).line=e,o.block=r,o.index=i,o}var r=n.prototype;return r.toDOM=function(){var e=document.createElement(this.block?"div":"span");e.className=this.block?"cm-line":"";var t=!0,n=!1,r=void 0;try{for(var i,o=this.line[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value,l=a.text,c=a.tags,s=document.createElement("span");s.textContent=l||"\xa0",c&&(s.className=c),e.appendChild(s)}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}return e},r.eq=function(e){return this.index===e.index&&(0,P.gj)(this.line,e.line)},r.ignoreEvent=function(){return!1},(0,u._)(n,[{key:"estimatedHeight",get:function(){return 21}}]),n}(l.l9),er=[Q,ee,et,l.tk.decorations.compute([T.dK,j.$,j.u,$,B,J.Yp,a.yy.lineSeparator],function(e){var t=e.field(j.$),n=e.facet(J.Yp),r=e.field($);if(!t||"transformCode"!==t.type||!n||t.codeReference.filePath!==n||r!==o.Suggestion)return l.p.none;var i=t.codeReference.range.indexFrom,a=t.codeReference.range.indexTo,c=e.doc.lineAt(i),s=e.doc.lineAt(a),u=e.toText(null!==(Z=e.field(j.u))&&void 0!==Z?Z:""),d=e.changes({from:i,to:a,insert:u}),f=d.apply(e.doc),h=i+u.length,p=null===(b=e.facet(T.dK))||void 0===b?void 0:b.parser,m=null;if(p)m=(0,I.p)({parser:p,text:f,changes:d,base:e,upTo:h}),w=(0,P.CT)(m,f,e,i,h);else{w=[];var v=!0,g=!1,y=void 0;try{for(var b,Z,w,x,C=u.iterLines()[Symbol.iterator]();!(v=(x=C.next()).done);v=!0){var _=x.value;w.push([{text:_}])}}catch(e){g=!0,y=e}finally{try{v||null==C.return||C.return()}finally{if(g)throw y}}}var S=[];w.length>1&&i!==a&&0!==s.length&&a===s.to&&a<e.doc.length?S.push(l.p.replace({inclusive:!1,block:!0}).range(i,a)):S.push(l.p.replace({inclusiveStart:!1,block:!0}).range(i,a));for(var E=0;E<w.length;E++){var k=w[E],R=c.number+E,D=l.p.widget({widget:new en(k,E>0,R),inlineOrder:!0,side:E+1,block:E>0});S.push(D.range(i))}return l.p.set(S,!0)})],ei=n(49932),eo=n(8182),ea=n(54472),el=n(75023),ec=n(1643),es=n(2038),eu=n(59868),ed=n(74833),ef=n(56596),eh=n(93918),ep=n(25961),em=n(67795),ev=n(7730),eg=n.n(ev),ey=n(74652),eb=n(50586),eZ=n(63185),ew=n(69543),ex=(0,eh.X)({container:[p.l0.rowWithGap(2),p.l0.flex.row,p.l0.align.center,p.l0.textAlign.center,p.l0.cursor.pointer,p.l0.pr(4),{opacity:.6},p.l0.height("100%")],text:[p.l0.rowWithGap(4),p.l0.color.foregroundDimmest,{textTransform:"capitalize"}],shortcut:[p.l0.ml(4),{"& > div > div":{fontSize:"0.8em",paddingLeft:(0,ec.fP)(4),paddingRight:(0,ec.fP)(4),paddingTop:(0,ec.fP)(2),paddingBottom:(0,ec.fP)(2)}}]}),eC=new ea.Jf(function(e){var t=e.onGenerateCode,n=e.onEditCode,r=e.hasSelection,i=(0,es.T3)(),o=r?"edit":"generate",a=(0,ey.gf)(eb.x.id);return(0,eo.BX)(ef.G,{css:ex.container,onClick:function(){(0,eu.j)(em.U3.GHOSTWRITER_CHAT_INLINE_HINT_CLICKED,{action:o}),r?n():t()},children:[(0,eo.tZ)("div",{css:ex.text,children:(0,eo.tZ)(ed.xv,{variant:"small",children:o})}),(0,eo.tZ)("div",{css:ex.shortcut,children:!i&&a?(0,eo.tZ)(ep.bM,{keyCombo:a,small:!0}):null})]})}),e_=l.tk.theme({".cm-ghostwriter-hint-layer":{width:"100%"}}),eS=function(e){var t=e.selection.main.head;return e.doc.lineAt(t)},eE=new el.j(function(e,t){return a.QQ.define({create:function(e){return eS(e)},compare:eg(),update:function(e,t){return eS(t.state)},provide:function(n){return[e_,a.Wl.high((0,l.EY)({above:!0,class:"cm-ghostwriter-hint-layer",update:function(e){return(0,K.a)(e,n,j.$,eZ.WF)},markers:function(r){var i=r.state.field(n,!1);if(!i)return[];var o=!r.state.selection.main.empty;if(o)return[];var a=r.state.field(j.$,!1),l=0===r.state.doc.length,c=(0,ew.o)(r.state);if(i.length>0||a||c||l)return[];var s=r.dom.querySelector(".cm-minimap-gutter"),u=(null==s?void 0:s.clientWidth)||0,d=i.to,f=r.lineBlockAt(d),h=f.top,p=f.height;return[new ek({top:h+r.documentPadding.top,height:p,right:u,pocketOpen:null!==a,hasSelection:o,activeEditor:r.hasFocus,onGenerateCode:e,onEditCode:t})]}}))]}})}),ek=function(){"use strict";function e(t){(0,s._)(this,e),this.options=t}var t=e.prototype;return t.position=function(e){e.style.top=this.options.top+"px",e.style.height=this.options.height+"px",e.style.right=this.options.right+"px",e.style.paddingRight="8px"},t.draw=function(){var e=eC.create({onEditCode:this.options.onEditCode,onGenerateCode:this.options.onGenerateCode,hasSelection:this.options.hasSelection});return e.className="cm-ghostwriter-hint-marker",this.options.activeEditor||(e.style.visibility="hidden"),this.position(e),e},t.eq=function(e){return this.options.top===e.options.top&&this.options.hasSelection===e.options.hasSelection&&this.options.pocketOpen===e.options.pocketOpen&&this.options.activeEditor===e.options.activeEditor},e}(),eT=n(43429),eR=n(25425),eD=n(14044),eI=n(64461),eG=n(1498),eB=n(15146),eA=n(18931),eP=n(92032),eN=n(66820),eU=n(83898),eL=n(32517),eO=n(14917),eM=n(29217),eX=new ea.Jf(function(e){var t=e.requestMeasure,n=e.codeReference,r=e.updateCodeBlock,i=e.acceptSuggestion,o=e.onClose,a=e.autoFocus,l=function(){d?(i(d),(null==u?void 0:u.id)&&(p(u.id),m(n.filePath)),(0,eu.j)(eu.U3.GHOSTWRITER_CHAT_INLINE_ACCEPTED,{action:"GENERATE"})):g()},c=function(){w.current=C,s({chatMessage:{type:"generateCode",text:C,codeReference:n}})},s=(0,eU.ql)(),u=(0,eO.oQ)(n.filePath),d=(0,eP.n)(u),f=(0,eN.tz)(),h=(0,eN.WS)(u),p=(0,eM.$0)(),m=(0,eM.PM)();(0,eT.useEffect)(function(){return r(d)},[d,r]);var v=(0,eT.useCallback)(function(){h&&u&&f({messageId:u.id})},[f,u,h]),g=(0,eT.useCallback)(function(){v(),o()},[v,o]),y=!!((null==u?void 0:u.loading)||(null==u?void 0:u.streaming)),b=!!((null==u?void 0:u.stopReason)||(null==u?void 0:u.aborted)),Z=(0,eT.useCallback)(function(){(0,eu.j)(eu.U3.GHOSTWRITER_CHAT_INLINE_CLOSED,{action:"GENERATE"}),g()},[g]),w=(0,eT.useRef)(null),x=(0,eL.U1)({loading:y,onSubmit:function(){E?l():c()},onClose:Z}),C=x.value,_=x.setValue,S=x.onKeyDown,E=b&&w.current===C;return(0,eo.BX)(eL.If,{requestMeasure:t,type:"generateCode",children:[(0,eo.tZ)(eL.II,{value:C,onChange:function(e){return _(e.currentTarget.value)},placeholder:"Enter a prompt to generate new code",onKeyDown:S,autoFocus:a}),(0,eo.BX)(eL.$_,{children:[(0,eo.BX)(eo.HY,{children:[(0,eo.tZ)(eL.Xs,{type:"generateCode"}),b?(0,eo.tZ)(eB.hU,{alt:"Rerun the same prompt",onClick:function(){return c()},size:12,colorway:"grey",children:(0,eo.tZ)(eA.Z,{})}):null]}),E?(0,eo.BX)(eo.HY,{children:[(0,eo.tZ)(eG.zx,{variant:"outlined",size:"small",text:"Reject",onClick:function(){(0,eu.j)(eu.U3.GHOSTWRITER_CHAT_INLINE_DISCARDED,{action:"GENERATE"}),Z()}}),(0,eo.tZ)(eG.zx,{size:"small",text:"Accept",colorway:"blurple",onClick:l,dataCy:"ghostwriter-inline-accept-suggestion"})]}):(0,eo.tZ)(eL.k4,{loading:y,disabled:!C,onClick:function(){y?v():c()}})]})]})}),eF=n(99952),eW=n(7444),eH=new ea.Jf(function(e){var t=e.requestMeasure,n=e.codeReference,r=e.updateCodeBlock,i=e.acceptSuggestion,a=e.onClose,l=e.autoFocus,c=e.updateDiffSelection,s=function(){h?((0,eu.j)(eu.U3.GHOSTWRITER_CHAT_INLINE_ACCEPTED,{action:"TRANSFORM"}),i(h)):y()},u=function(){x.current=_,d({chatMessage:{type:"transformCode",text:_,codeReference:n}})},d=(0,eU.ql)(),f=(0,eF.iH)(n.filePath),h=(0,eP.n)(f),p=(0,eN.tz)(),m=(0,eN.WS)(f);(0,eT.useEffect)(function(){return r(h)},[h,r]);var v=(0,eW.Z)(c);(0,eT.useEffect)(function(){if(f){var e=f.loading||f.streaming?o.Suggestion:o.Compare;v.current(e)}},[f,v]);var g=(0,eT.useCallback)(function(){m&&f&&p({messageId:f.id})},[p,f,m]),y=(0,eT.useCallback)(function(){g(),a()},[g,a]),b=!!((null==f?void 0:f.loading)||(null==f?void 0:f.streaming)),Z=!!((null==f?void 0:f.stopReason)||(null==f?void 0:f.aborted)),w=(0,eT.useCallback)(function(){(0,eu.j)(eu.U3.GHOSTWRITER_CHAT_INLINE_CLOSED,{action:"TRANSFORM"}),y()},[y]),x=(0,eT.useRef)(null),C=(0,eL.U1)({loading:b,onSubmit:function(){k?s():u()},onClose:w}),_=C.value,S=C.setValue,E=C.onKeyDown,k=Z&&x.current===_;return(0,eo.BX)(eL.If,{requestMeasure:t,type:"generateCode",children:[(0,eo.tZ)(eL.II,{value:_,onChange:function(e){return S(e.currentTarget.value)},placeholder:"Enter a prompt to modify selection",onKeyDown:E,autoFocus:l}),(0,eo.BX)(eL.$_,{children:[(0,eo.BX)(eo.HY,{children:[(0,eo.tZ)(eL.Xs,{type:"transformCode"}),Z?(0,eo.tZ)(eB.hU,{alt:"Rerun the same prompt",onClick:function(){return u()},size:12,colorway:"grey",children:(0,eo.tZ)(eA.Z,{})}):null]}),k?(0,eo.BX)(eo.HY,{children:[(0,eo.tZ)(eG.zx,{variant:"outlined",size:"small",text:"Reject",onClick:function(){(0,eu.j)(eu.U3.GHOSTWRITER_CHAT_INLINE_DISCARDED,{action:"TRANSFORM"}),w()}}),(0,eo.tZ)(eG.zx,{size:"small",text:"Accept",colorway:"blurple",onClick:s,dataCy:"ghostwriter-inline-accept-suggestion"})]}):(0,eo.tZ)(eL.k4,{loading:b,disabled:!_,onClick:function(){b?g():u()}})]})]})}),eV=n(54450),ez=n(89061),ej=n(32477),eq=n(74997),eY=n(50199),e$=n(92101),eJ=n(88936),eK=n(22580),eQ=n(39469),e0=n(74883),e1=n(475),e2=n(58719),e8=n(43409),e4=n(21113),e3=n(19615),e5=a.r$.define({combine:function(e){var t;return null!==(t=e[0])&&void 0!==t?t:function(){}}}),e6=new el.j(function(e){return e5.of(e)}),e9=(0,eh.X)({root:[p.l0.colWithGap(8),p.l0.border({color:p.TV.outlineDimmest}),p.l0.p(8),p.l0.borderRadius(4)],header:[p.l0.rowWithGap(8),p.l0.align.center,p.l0.justify.spaceBetween,p.l0.minHeight(28)],headerLeft:[p.l0.flex.growAndShrink(1),p.l0.rowWithGap(8),p.l0.align.center],footer:[p.l0.rowWithGap(8),p.l0.align.center,p.l0.justify.end]}),e7=new ea.Jf(function(e){var t=e.requestMeasure,n=e.codeReference,r=e.onReplyInChat,i=e.onClose,o=function(){c&&((0,eu.j)(eu.U3.GHOSTWRITER_CHAT_INLINE_REGENERATED,{action:"EXPLAIN"}),a({responseId:c.id,action:"EXPLAIN"}))},a=(0,eU.Gd)(),l=(0,ej._)((0,e4.Ni)(),1)[0],c=(0,eq.j)(n.filePath),s=(0,eN.tz)(),u=(0,eN.WS)(c),d=(0,eT.useCallback)(function(){u&&c&&s({messageId:c.id})},[s,c,u]),f=(null==c?void 0:c.attribution)==="Assistant",h=!!((null==c?void 0:c.loading)||(null==c?void 0:c.streaming)),p=!!((null==c?void 0:c.stopReason)||(null==c?void 0:c.aborted)),m=null==c?void 0:c.error,v=(0,eY.Z)(function(){return(0,e$.BW)(null==c?void 0:c.id)},[null==c?void 0:c.id]);return(0,eo.tZ)(eL.fL,{requestMeasure:t,type:"explainCode",children:(0,eo.BX)(ef.G,{css:e9.root,dataCy:"ghostwriter-inline-explain-content",children:[(0,eo.BX)(ef.G,{css:e9.header,children:[(0,eo.BX)(ef.G,{css:e9.headerLeft,children:[(0,eo.tZ)(e3.R,{advanced:"advanced"===l}),(0,eo.tZ)(e8.As,{intent:"EXPLAIN"})]}),p?(0,eo.tZ)(eB.hU,{alt:"Close",dataCy:"ghostwriter-inline-close",children:(0,eo.tZ)(e2.Z,{onClick:function(){return i()}})}):(0,eo.tZ)(eG.zx,{iconLeft:(0,eo.tZ)(e1.Z,{}),size:"small",text:"Stop",onClick:function(){return d()}})]}),h&&!h?(0,eo.tZ)(eJ.Z,{}):null,c?(0,eo.tZ)(eK.J,{text:c.text,codeComponent:v}):null,f&&"string"==typeof m?(0,eo.tZ)(eL.Bc,{error:m}):null,(0,eo.tZ)(ef.G,{css:e9.footer,children:p?(0,eo.BX)(eo.HY,{children:[(0,eo.tZ)(ed.xv,{variant:"small",color:"dimmer",children:"Esc to close"}),(0,eo.tZ)(eG.zx,{iconLeft:(0,eo.tZ)(eQ.Z,{}),variant:"outlined",size:"small",text:"Retry",onClick:function(){o()}}),(0,eo.tZ)(eG.zx,{dataCy:"ghostwriter-inline-reply-in-chat",iconLeft:(0,eo.tZ)(e0.Z,{}),size:"small",text:"Reply in Chat",colorway:"blurple",onClick:function(){(0,eu.j)(eu.U3.GHOSTWRITER_CHAT_INLINE_REPLY_IN_CHAT),r()}})]}):null})]})})});function te(e,t){e.dispatch({effects:q.Q.of(null),selection:{anchor:t.range.indexTo,head:t.range.indexTo}}),e.hasFocus||e.focus()}function tt(e,t){(0,eD.el)({view:e,insert:t,scrollIntoView:!0}),e.dispatch({effects:q.Q.of(null)}),e.hasFocus||e.focus()}function tn(e,t){e.dispatch({effects:q.h.of(t)})}function tr(e,t,n){e.dispatch({changes:{from:n.range.indexFrom,to:n.range.indexTo,insert:t},scrollIntoView:!0,effects:q.Q.of(null),annotations:[eV.Z.of(!0),ez.Iv.of("full")]}),e.hasFocus||e.focus()}function ti(e,t){return e.range.indexFrom===t.range.indexFrom&&e.range.indexTo===t.range.indexTo&&e.filePath===t.filePath&&e.fileVersion===t.fileVersion}var to=function(e){"use strict";(0,d._)(n,e);var t=(0,f._)(n);function n(e){var r,i=e.codeReference;return(0,s._)(this,n),(r=t.call(this)).codeReference=i,r}var r=n.prototype;return r.toDOM=function(e){var t=this.codeReference;return eX.create({requestMeasure:function(){return e.requestMeasure()},codeReference:t,onClose:function(){return te(e,t)},acceptSuggestion:function(t){return tt(e,t)},updateCodeBlock:function(t){return tn(e,t)},autoFocus:!0})},r.updateDOM=function(e,t){var n=this.codeReference;return eX.update(e,function(e){return(0,eI.Uy)(e,function(e){e.requestMeasure=function(){return t.requestMeasure()},e.codeReference=n,e.onClose=function(){return te(t,n)},e.acceptSuggestion=function(e){return tt(t,e)},e.updateCodeBlock=function(e){return tn(t,e)},e.autoFocus=!1})}),!0},r.eq=function(e){return ti(this.codeReference,e.codeReference)},n}(l.l9),ta=function(e){"use strict";(0,d._)(n,e);var t=(0,f._)(n);function n(e){var r,i=e.codeReference;return(0,s._)(this,n),(r=t.call(this)).codeReference=i,r}var r=n.prototype;return r.toDOM=function(e){var t=this.codeReference;return eH.create({requestMeasure:function(){return e.requestMeasure()},codeReference:t,onClose:function(){return te(e,t)},acceptSuggestion:function(n){return tr(e,n,t)},updateCodeBlock:function(t){tn(e,t)},updateDiffSelection:function(t){e.dispatch({effects:Y.of(t)})},autoFocus:!0})},r.updateDOM=function(e,t){var n=this.codeReference;return eH.update(e,function(e){return(0,eI.Uy)(e,function(e){e.requestMeasure=function(){return t.requestMeasure()},e.codeReference=n,e.onClose=function(){return te(t,n)},e.acceptSuggestion=function(e){return tr(t,e,n)},e.updateCodeBlock=function(e){return tn(t,e)},e.updateDiffSelection=function(e){t.dispatch({effects:Y.of(e)})},e.autoFocus=!1})}),!0},r.eq=function(e){return ti(this.codeReference,e.codeReference)},n}(l.l9),tl=function(e){"use strict";(0,d._)(n,e);var t=(0,f._)(n);function n(e){var r,i=e.codeReference;return(0,s._)(this,n),(r=t.call(this)).codeReference=i,r}var r=n.prototype;return r.toDOM=function(e){var t=this.codeReference;return e7.create({requestMeasure:function(){return e.requestMeasure()},codeReference:t,onClose:function(){return te(e,t)},onReplyInChat:function(){return e.state.facet(e5)()}})},r.updateDOM=function(e,t){var n=this.codeReference;return e7.update(e,function(e){return(0,eI.Uy)(e,function(e){e.requestMeasure=function(){return t.requestMeasure()},e.codeReference=n,e.onClose=function(){return te(t,n)}})}),!0},r.eq=function(e){return ti(this.codeReference,e.codeReference)},n}(l.l9),tc=a.r$.define({combine:function(e){var t;return null!==(t=e[0])&&void 0!==t&&t}}),ts=n(24796),tu=(0,eh.X)({root:[p.l0.rowWithGap(8),p.l0.border({color:p.TV.outlineDimmest}),p.l0.p(8),p.l0.borderRadius(4)],text:[p.l0.flex.growAndShrink(1)]}),td=new ea.Jf(function(e){var t=e.onClose,n=e.requestMeasure;return(0,eo.tZ)(eL.fL,{requestMeasure:n,type:"ghostwriterKillswitch",children:(0,eo.BX)(ef.G,{css:tu.root,children:[(0,eo.tZ)(ef.G,{css:tu.text,children:(0,eo.tZ)(ts.r,{textVariant:"text"})}),(0,eo.tZ)(eB.hU,{alt:"Close",onClick:t,type:"button",children:(0,eo.tZ)(e2.Z,{})})]})})}),tf=function(e){"use strict";(0,d._)(n,e);var t=(0,f._)(n);function n(e){var r,i=e.codeReference;return(0,s._)(this,n),(r=t.call(this)).codeReference=i,r}return n.prototype.toDOM=function(e){var t=this;return td.create({onClose:function(){return te(e,t.codeReference)},requestMeasure:function(){return e.requestMeasure()}})},n}(l.l9),th=ei.TV.blurpleDimmest,tp=ei.TV.accentPrimaryDimmest,tm=l.tk.theme({".cm-pocket-highlight":{backgroundColor:"rgba(120, 95, 255, 0.2)"},"@keyframes moveGradient":{"0%":{backgroundPositionX:"100%"},"100%":{backgroundPositionX:"0%"}},".cm-pocket-highlight-loading":{background:"linear-gradient(90deg, ".concat(ei.TV.blurpleDimmest,", ").concat(tp,", ").concat(th,", ").concat(tp,")"),backgroundSize:"300% 100%",backgroundPositionX:"0%",animation:"moveGradient 2s linear infinite"}}),tv=l.tk.decorations.compute([j.$,$,J.Yp],function(e){var t=e.field(j.$),n=e.facet(J.Yp);if(!t||!n||t.codeReference.filePath!==n)return l.p.none;var r=e.doc.lineAt(t.codeReference.range.indexFrom).from,i={generateCode:to,transformCode:ta,explainCode:tl,ghostwriterKillswitch:tf}[t.type],o=l.p.widget({widget:new i({codeReference:t.codeReference}),block:!0,side:0}).range(r);return l.p.set(o)}),tg=(0,l.EY)({above:!1,update:function(e){return(0,K.a)(e,j.$)},markers:function(e){var t=e.state.field(j.$),n=e.state.facet(J.Yp);if(!t||!n||t.codeReference.filePath!==n)return[];var r=t.codeReference.range.indexFrom,i=t.codeReference.range.indexTo,o=e.state.doc.lineAt(i);o.from>=r&&o.to===i&&i<e.state.doc.length&&(i+=1);var c=a.jT.range(r,i),s=t.loading&&t.codeReference.range.indexFrom<t.codeReference.range.indexTo?"cm-pocket-highlight-loading":"cm-pocket-highlight";return l.dc.forRange(e,s,c)}}),ty=z.compute([j.$,j.u,J.Yp,$],function(e){var t=e.field(j.$),n=e.field(j.u),r=e.facet(J.Yp),i=e.field($);return t&&n&&r&&t.codeReference.filePath===r&&"transformCode"===t.type&&i===o.Compare?a.as.of({from:t.codeReference.range.indexFrom,to:t.codeReference.range.indexTo,insert:n},e.doc.length).apply(e.doc):null}),tb=c.V.compute([j.$,j.u,J.Yp],function(e){var t=e.field(j.$),n=e.field(j.u),r=e.facet(J.Yp);return t&&n&&r&&t.codeReference.filePath===r&&"generateCode"===t.type?a.as.of({from:t.codeReference.range.indexTo,to:t.codeReference.range.indexTo,insert:n},e.doc.length):null}),tZ=new el.j(function(e){return tc.of(e)});function tw(e){var t=e.onGenerateCode,n=e.onEditCode,r=e.onReplyInChat,i=(0,eR.P5)({controlName:"flag-inline-generate-2"}),o=e6.use(r),a=tZ.use(i),l=eE.use(t,n);return(0,eT.useMemo)(function(){return[tm,j.$,j.u,tv,tg,$,ty,er,tb,l,a,o]},[l,a,o])}},53466:function(e,t,n){n.d(t,{$:function(){return f},u:function(){return h}});var r=n(45903),i=n(25e3),o=n(84357),a=n(38265),l=n(51944),c=n(82200),s=n(40497),u=n(59868);function d(e){var t=e.state.field(f);if(t){var n=t.type;return"explainCode"===n?(0,u.j)(u.U3.GHOSTWRITER_CHAT_INLINE_CLOSED,{action:"EXPLAIN"}):"generateCode"===n?(0,u.j)(u.U3.GHOSTWRITER_CHAT_INLINE_CLOSED,{action:"GENERATE"}):"transformCode"===n&&(0,u.j)(u.U3.GHOSTWRITER_CHAT_INLINE_CLOSED,{action:"TRANSFORM"}),e.dispatch({effects:l.Q.of(null)}),!0}return!1}var f=o.QQ.define({create:function(){return null},update:function(e,t){if((0,s.j)(t,l.Q,function(t){e=t.value?{codeReference:t.value.codeReference,type:t.value.type,loading:t.value.loading,data:t.value.data}:null}),!e||t.changes.empty)return e;var n=e.codeReference.range.indexFrom>t.newDoc.length?t.newDoc.length:t.changes.mapPos(e.codeReference.range.indexFrom),o=e.codeReference.range.indexTo>t.newDoc.length?t.newDoc.length:t.changes.mapPos(e.codeReference.range.indexTo);return n>=o?null:e=(0,i._)((0,r._)({},e),{codeReference:(0,i._)((0,r._)({},e.codeReference),{range:{indexFrom:n,indexTo:o,lineFrom:t.newDoc.lineAt(n).number,lineTo:t.newDoc.lineAt(o).number}})})},provide:function(e){return[o.Wl.highest(a.$f.of([{key:"Escape",run:d}])),c.gb.from(e,function(e){var t;return null!==(t=(null==e?void 0:e.loading)&&e.codeReference.range.indexFrom===e.codeReference.range.indexTo)&&void 0!==t?t:null})]}}),h=o.QQ.define({create:function(){return null},update:function(e,t){if(!t.state.field(f))return null;var n=!0,r=!1,i=void 0;try{for(var o,a=t.effects[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var c=o.value;c.is(l.Q)&&(e=null),c.is(l.h)&&(e=c.value)}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return e}})},92032:function(e,t,n){n.d(t,{n:function(){return a}});var r=n(43429),i=RegExp(".*?```(\\w+)\\n(.*?)(?:$|\\n$|\\n`$|\\n``$|\\n```)","gs"),o=function(e,t){for(var n,r=[];null!==(n=i.exec(e));){var o=n[1],a=n[2];if(!1===t){var l=a.substring(0,a.lastIndexOf("\n"));r.push({language:o,code:l})}else r.push({language:o,code:a})}return r};function a(e){return(0,r.useMemo)(function(){if(!(null==e?void 0:e.text))return null;var t=o((null==e?void 0:e.text)||"");return t.length>0?t[0].code:null},[null==e?void 0:e.text])}},54450:function(e,t,n){var r=n(84357).q6.define();t.Z=r},92994:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(43429),i=n(84357);function o(e){var t=e.view,n=e.initialExtension,o=void 0===n?[]:n,a=(0,r.useRef)();return a.current||(a.current=new i.F6),(0,r.useEffect)(function(){if(t){var e=a.current;if(void 0===e.get(t.state))t.dispatch({effects:i.Py.appendConfig.of(e.of(o))});else throw Error("Did not expect useEffect hook to rerun in useCompartment");return function(){t.dispatch({effects:e.reconfigure([])})}}},[t]),a.current}},56981:function(e,t,n){n.d(t,{EE:function(){return m},Gj:function(){return l},ZF:function(){return v},_j:function(){return c},f3:function(){return h},fI:function(){return p},gm:function(){return f},yK:function(){return u}});var r=n(32477),i=n(6634),o=n(61314),a=n.n(o),l={regexp:/-?\b\d+\.?\d*\b/g,cursor:"ew-resize",onDrag:function(e,t,n){var r=Number(e)+n.movementX;isNaN(r)||t(r.toString())}},c={regexp:/true|false/g,cursor:"pointer",onClick:function(e,t){switch(e){case"true":return t("false");case"false":return t("true")}}};function s(e){var t=RegExp("".concat(e,"\\(-?\\b\\d+\\.?\\d*\\b\\s*(,\\s*-?\\b\\d+\\.?\\d*\\b)?"),"g"),n=new RegExp("".concat(e,"\\((?<x>-?\\b\\d+\\.?\\d*\\b)\\s*(,\\s*(?<y>-?\\b\\d+\\.?\\d*\\b))?"));return{regexp:t,cursor:"move",onDrag:function(t,r,i){var o,a,l=n.exec(t),c=Number(null==l?void 0:null===(o=l.groups)||void 0===o?void 0:o.x),s=Number(null==l?void 0:null===(a=l.groups)||void 0===a?void 0:a.y);isNaN(c)||(isNaN(s)&&(s=c),r("".concat(e,"(").concat(c+i.movementX,", ").concat(s+i.movementY)))}}}var u=s("vec2");function d(e){var t=RegExp("".concat(e,"\\(.*\\)"),"g"),n=new RegExp("".concat(e,"\\((?<r>\\d+)\\s*,\\s*(?<g>\\d+)\\s*,\\s*(?<b>\\d+)\\)"));return{regexp:t,cursor:"pointer",onClick:function(t,o){var a,l,c,s=n.exec(t),u=Number(null==s?void 0:null===(a=s.groups)||void 0===a?void 0:a.r),d=Number(null==s?void 0:null===(l=s.groups)||void 0===l?void 0:l.g),f=Number(null==s?void 0:null===(c=s.groups)||void 0===c?void 0:c.b),h=document.createElement("input");h.type="color",isNaN(u+d+f)||(h.value=(0,i.C)(u,d,f)),h.addEventListener("input",function(t){var n=t.target;if(n.value){var a=(0,r._)((0,i.w)(n.value),3),l=a[0],c=a[1],s=a[2];o("".concat(e,"(").concat(l,", ").concat(c,", ").concat(s,")"))}}),h.click()}}}s("ellipse"),s("circle"),s("point"),s("rect"),s("square"),s("vertex");var f=d("rgb"),h=d("background"),p=d("fill"),m=d("stroke"),v={regexp:/https?:\/\/[^\s)"']+/g,cursor:"pointer",onClick:function(e){a()(e)&&window.open(e,"_blank")}}},13358:function(e,t,n){n.d(t,{Z:function(){return N},f:function(){return L}});var r=n(34142),i=n(45903),o=n(25e3),a=n(87682),l=n(84357),c=n(38265),s=n(89798),u=n(82200),d=n(92631),f=n(8182),h=n(22487),p=n(72310),m=n(1498),v=n(15146),g=n(74833),y=n(56596),b=n(93918),Z=n(32377),w=n(58719),x=n(29287),C=n(29358),_=n(43429),S=n(64975),E=(0,b.X)({headerContainer:[x.l0.flex.row,x.l0.align.center,x.l0.pr(4)],bodyContainer:[x.l0.justify.center,x.l0.align.center,x.l0.p(8),x.l0.pt(4)],input:[x.l0.p(4),x.l0.borderRadius(4)],wrapper:[x.l0.flex.column,x.l0.justify.center,x.l0.borderRadius(4),x.l0.shadow(2),x.l0.width(200)]});function k(e){var t=(0,h.Z)(e.onClose,[e.onClose]),n=(0,_.useRef)(null),r=(0,p.Y)(e.currentValue,function(t){return t?t===e.currentValue?{message:"Must pick a new name"}:void 0:{message:"New name can't be empty"}});return(0,f.tZ)(S.ZP,{children:(0,f.tZ)(y.G,{"data-testid":"RenameInput",innerRef:t,css:E.wrapper,onKeyDown:function(t){"Escape"===t.key&&e.onClose(),t.stopPropagation()},children:(0,f.BX)("form",{onSubmit:function(t){t.preventDefault(),r.error||e.onRename(r.value)},children:[(0,f.BX)(y.G,{css:E.headerContainer,children:[(0,f.tZ)(g.h4,{level:2,variant:"subheadDefault",css:[x.l0.p(4),x.l0.pl(8)],children:"Rename"}),(0,f.tZ)(g.h4,{level:2,variant:"subheadDefault",color:"dimmer",css:[x.l0.maxWidth(100),x.l0.overflow("hidden"),{whiteSpace:"nowrap",textOverflow:"ellipsis"}],children:e.currentValue}),(0,f.tZ)(v.hU,{alt:"Close rename input",tooltipHidden:!0,onClick:e.onClose,css:[x.l0.position.absolute,x.l0.top(4),x.l0.right(4)],children:(0,f.tZ)(w.Z,{})})]}),(0,f.tZ)(y.G,{css:E.bodyContainer,children:(0,f.tZ)(C.ZP,{css:E.input,name:"rename",ref:n,onBlur:r.handleBlur,onChange:function(e){r.setValue(e.target.value)},value:r.value,placeholder:"New name",autoFocus:!0,autoCorrect:"off",autoCapitalize:"off",autoComplete:"off",validationResults:r.error?[{message:r.error.message,state:"error"}]:void 0})}),(0,f.tZ)(y.G,{css:[x.l0.flex.rowReverse,x.l0.p(8),x.l0.pt(0)],children:(0,f.tZ)(m.zx,{type:"submit",text:"Rename",colorway:"primary",iconLeft:(0,f.tZ)(Z.Z,{}),disabled:!!r.error||!r.value})})]})})})}var T=n(23758),R=n(54472),D=n(40497),I=n(74106),G=n(72526),B=l.Py.define(),A=l.Py.define();function P(e){var t,n;return null!==(n=null===(t=e.facet(d.N))||void 0===t?void 0:t.isRenameSupported)&&void 0!==n&&n}var N=function(e){if(!P(e.state))return!1;var t=e.state.selection.main.head;return e.state.wordAt(t)?(e.dispatch({effects:B.of(t)}),!0):((0,T.J)(e,{message:"You cannot rename this element",offset:t}),!1)},U=l.QQ.define({create:function(){return null},update:function(e,t){return(null!==e&&(e=t.changes.mapPos(e,-1,l.gc.TrackDel)),(0,D.j)(t,B,function(t){e=t.value}),e&&(e>t.state.doc.length||!t.state.wordAt(e)||!P(t.state)))?null:e},provide:function(e){var t=new R.Jf(k),n=function(t){var n=t.field(e);if(null==n)throw Error("Expected non-null offset");var r=t.wordAt(n);if(!r)throw Error("Expected non-null range");return t.sliceDoc(r.from,r.to)},r=function(r){var a=r.state.field(e);if(null==a)throw Error("Expected non-null offset");if(!r.state.wordAt(a))throw Error("Expected non-null range");var l=t.create({currentValue:n(r.state),onClose:function(){r.dispatch({effects:B.of(null)}),r.focus()},onRename:function(e){r.dispatch({effects:A.of(e)})}});return l.classList.add("replit-tooltip"),l.style.padding="0",{dom:l,update:function(e){t.update(l,function(t){var r=n(e.state);return r!==t.currentValue?(0,o._)((0,i._)({},t),{currentValue:r}):t})}}};return c.hJ.from(e,function(e){return null===e?null:{pos:e,create:r}})}});function L(e,t){return[U,c.lg.define(function(n){var i=null;return{onRename:function(o){return(0,r._)(function(){var r,l,c,d;return(0,a.Jh)(this,function(a){switch(a.label){case 0:if(!P(n.state))return[2,this.cancelInflightRequest()];if(this.cancelInflightRequest(),!(r=n.state.facet(s.Yp)))throw Error("Expected non-null file path");if(!(l=n.state.field(U)))return[2];return i=t.generateId(),[4,t.request.rename(r,(0,I.sg)(n.state.doc,l),o,{id:i,tap:function(e){return(0,u.SC)(n,e)}})];case 1:if((c=a.sent()).cancelled)return[2];if("error"in c)throw Error("Something went wrong renaming ".concat(c.error.message));if(!(d=c.result))return[2];return(0,G.w)({edit:d,fs:e,client:t}),n.dispatch({effects:B.of(null)}),[2]}})}).apply(this)},cancelInflightRequest:function(){i&&(t.notify.cancelRequest(i),i=null)},update:function(e){var t=!0,n=!1,r=void 0;try{for(var i,o=e.transactions[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value,l=!0,c=!1,s=void 0;try{for(var u,d=a.effects[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var f=u.value;f.is(A)&&this.onRename(f.value)}}catch(e){c=!0,s=e}finally{try{l||null==d.return||d.return()}finally{if(c)throw s}}}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}},destroy:function(){this.cancelInflightRequest()}}})]}},61018:function(e,t,n){n.d(t,{hx:function(){return p},l:function(){return f},sy:function(){return h}});var r=n(84357),i=n(38265),o=n(89798),a=n(89446),l=n(61314),c=n.n(l),s=n(19659),u=n(38041),d=n(75023);function f(e){var t=e.view,n=e.event,i=e.clipboardText,o=e.filePath,a=t.state.selection;if(!o||!(0,s.gK)(o)||a.ranges.length>1||a.main.from===a.main.to||!i||!c()(i)){!function(){if(!n){var e=i||"";if(a.main.empty){var o=a.main.from+e.length;t.dispatch({changes:[{from:a.main.from,insert:e}],selection:r.jT.range(o,o)})}else t.dispatch(t.state.replaceSelection(e))}}();return}n&&n.preventDefault();var l=t.state.sliceDoc(a.main.from,a.main.to),u="[".concat(l,"](").concat(i,")"),d=a.main.from+u.length;t.dispatch({changes:{from:a.main.from,to:a.main.to,insert:u},selection:r.jT.range(d,d)})}var h=i.tk.domEventHandlers({paste:function(e,t){var n;f({filePath:t.state.facet(o.Yp),view:t,event:e,clipboardText:null===(n=e.clipboardData)||void 0===n?void 0:n.getData("Text")})}}),p=new d.j(function(e,t){return i.tk.domEventHandlers({paste:function(n,r){var i=r.state.facet(o.Yp),l=null==n?void 0:null===(p=n.clipboardData)||void 0===p?void 0:p.files,c=function(e){var t=r.state.selection.main.head;r.dispatch({changes:{from:t,insert:e},selection:{anchor:t,head:t+e.length}})};if(l){var d=!0,f=!1,h=void 0;try{for(var p,m,v=l[Symbol.iterator]();!(d=(m=v.next()).done);d=!0){var g=m.value;e?(0,a.L0)(g).then(function(e){return c('"'+e+'"')}):i&&(0,s.gK)(i)&&(0,u.r)(g,t,i).then(c)}}catch(e){f=!0,h=e}finally{try{d||null==v.return||v.return()}finally{if(f)throw h}}}}})})},35895:function(e,t,n){n.d(t,{ZB:function(){return Z},qs:function(){return x},Lo:function(){return b},xv:function(){return R},xg:function(){return D},uh:function(){return y},Do:function(){return T},$X:function(){return I},Yt:function(){return w},Gv:function(){return G},Pz:function(){return C}});var r=n(23026),i=n(3194),o=n(45903),a=n(25e3),l=n(2543),c=n(84357),s=n(38265),u=n(59868),d=n(32477),f={"AWS API Key":/AKIA[0-9A-Z]{16}/g,"AWS AppSync GraphQL Key":/da2-[a-z0-9]{26}/g,"AWS MWS ID":/mzn\.mws\.[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}/g,"AWS client ID":/(A3T[A-Z0-9]|AKIA|AGPA|AIDA|AROA|AIPA|ANPA|ANVA|ASIA)[A-Z0-9]{16}/g,"Discord Bot Token":/(?:N|M|O)[a-zA-Z0-9]{23}\\.[a-zA-Z0-9-_]{6}\\.[a-zA-Z0-9-_]{27}/g,"Discord Webhook Url":/https?:\/\/(?:ptb\.|canary\.)?discord\.com\/api(?:\/v\d{1,2})?\/webhooks\/(\d{17,19})\/([\w-]{68})/gi,"Dynatrace Token":/dt0[a-zA-Z]{1}[0-9]{2}\\.[A-Z0-9]{24}\\.[A-Z0-9]{64}/gi,"Facebook Access Token":/EAACEdEose0cBA[0-9A-Za-z]+/g,"Facebook OAuth":/[fF][aA][cC][eE][bB][oO][oO][kK].*['|"][0-9a-f]{32}['|"]/g,"Github Personal Access Token":/ghp_[0-9a-zA-Z]{36}/g,"Github OAuth Access Token":/gho_[0-9a-zA-Z]{36}/g,"Github App Installation Access Token":/(ghu|ghs)_[0-9a-zA-Z]{36}/g,"Github App Refresh Token":/ghr_[0-9a-zA-Z]{76}/g,"Generic API Key":/[aA][pP][iI]_?[kK][eE][yY].*['|"][0-9a-zA-Z]{32,45}['|"]/g,"Generic Secret":/[sS][eE][cC][rR][eE][tT].*['|"][0-9a-zA-Z]{32,45}['|"]/g,"Google API Key":/AIza[0-9A-Za-z\\-_]{35}/g,"Google Gmail API Key":/AIza[0-9A-Za-z\\-_]{35}/g,"Google OAuth Access Token":/ya29\\.[0-9A-Za-z\\-_]+/g,"Google YouTube API Key":/AIza[0-9A-Za-z\\-_]{35}/g,"Heroku API Key":/[hH][eE][rR][oO][kK][uU].*[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}/g,"MailChimp API Key":/[0-9a-f]{32}-us[0-9]{1,2}/g,"Mailgun API Key":/key-[0-9a-zA-Z]{32}/g,"Mapbox, Public Key":/([s,p]k.eyJ1Ijoi[\w.-]+)/g,"Mapbox, Secret Key":/([s,p]k.eyJ1Ijoi[\w.-]+)/g,"npm Access Token":/npm_[0-9a-zA-Z]{36}/g,"NuGet API Key":/oy2[a-z0-9]{43}/g,"OpenAI API Key":/sk-[a-zA-Z0-9]{48}/g,"PGP private key block":/-----BEGIN PGP PRIVATE KEY BLOCK-----/g,"Picatic API Key":/sk_live_[0-9a-z]{32}/g,"PyPI API Token":/pypi-AgEIcHlwaS5vcmc[A-Za-z0-9-_]{50,1000}/g,"SSH (DSA) private key":/-----BEGIN DSA PRIVATE KEY-----/g,"SSH (EC) private key":/-----BEGIN EC PRIVATE KEY-----/g,"SSH (RSA) private key":/-----BEGIN RSA PRIVATE KEY-----/g,"SendGrid API Key":/SG\\.[0-9A-Za-z\\-_]{22}\\.[0-9A-Za-z-_]{43}/g,"Shopify Access Token":/shpat_[a-fA-F0-9]{32}/g,"Shopify App Shared Secret":/shpss_[a-fA-F0-9]{32}/g,"Shopify Custom App Access Token":/shpca_[a-fA-F0-9]{32}/g,"Shopify Private App Password":/shppa_[a-fA-F0-9]{32}/g,"Slack Token":/(xox[pborsa]-[0-9]{12}-[0-9]{12}-[0-9]{12}-[a-z0-9]{32})/g,"Slack API Token":/xox[baprs]-([0-9a-zA-Z]{10,48})?/g,"Slack Live API Key":/(?:r|s)k_live_[0-9a-zA-Z]{24}/g,"Slack Test API Key":/(?:r|s)k_test_[0-9a-zA-Z]{24}/g,"Slack, OAuth v2 Bot Access Token":/xoxb-[0-9]{11}-[0-9]{11}-[0-9a-zA-Z]{24}/g,"Slack, OAuth v2 Configuration Token":/xoxe.xoxp-1-[0-9a-zA-Z]{166}/g,"Slack, OAuth v2 Refresh Token":/xoxe-1-[0-9a-zA-Z]{147}/g,"Slack, OAuth v2 User Access Token":/xoxp-[0-9]{11}-[0-9]{11}-[0-9a-zA-Z]{24}/g,"Slack Webhook":/https:\/\/hooks.slack.com\/services\/T[a-zA-Z0-9_]{10}\/B[a-zA-Z0-9_]{10}\/[a-zA-Z0-9_]{24}/g,"Square Access Token":/sq0atp-[0-9A-Za-z\\-_]{22}/g,"Square OAuth Secret":/sq0csp-[0-9A-Za-z\\-_]{43}/g,"Stripe API Key":/sk_live_[0-9a-zA-Z]{24}/g,"Stripe Restricted API Key":/rk_live_[0-9a-zA-Z]{24}/g,"Twilio API Key":/SK[0-9a-fA-F]{32}/g,"Twitter Access Token":/[tT][wW][iI][tT][tT][eE][rR].*[1-9][0-9]+-[0-9a-zA-Z]{40}/g,"Twitter OAuth":/[tT][wW][iI][tT][tT][eE][rR].*['|"][0-9a-zA-Z]{35,44}['|"]/g,"Vault Token":/([sb]\.[a-zA-Z0-9]{24})/g},h={"Instagram oauth":/[0-9a-fA-F]{7}.[0-9a-fA-F]{32}/g},p=n(86865),m=function(e){"use strict";(0,i._)(n,e);var t=(0,l._)(n);function n(e,i){var o;return(0,r._)(this,n),(o=t.call(this)).id=e,o.result=i,o}return n.range=function(e,t,n){return new this(e,n).range(t.from,t.to)},n.generateId=function(){return this.secretId++},n}(c.uU);m.secretId=0;var v=function(e){"use strict";(0,i._)(n,e);var t=(0,l._)(n);function n(e){var i;return(0,r._)(this,n),(i=t.call(this)).key=e,i}return n.from=function(e){return new this(e)},n}(c.uU),g=c.Py.define({map:function(e,t){var n=c.Xs.of(e).map(t).iter(),r=n.from,i=n.to;return m.range(e.value.id,c.jT.cursor(r,i),e.value.result)}}),y=c.Py.define(),b=c.Py.define(),Z=c.Py.define(),w=c.Py.define(),x=c.Py.define(),C=function(e){var t=e.state.field(D);if(!t.size)return!1;for(var n=t.iter(),r=[];n.value;){var i=n.from,o=n.to,a=n.value;r.push({from:i,to:o,value:a}),n.next()}var l=e.state.doc.length,s=c.as.empty(l),d=[],f=[],h=!0,p=!1,m=void 0;try{for(var v,g=r[Symbol.iterator]();!(h=(v=g.next()).done);h=!0)!function(){var e=v.value,t=e.from,n=e.to,r=e.value,i=r.result.secret,o=c.as.of({from:t,to:n,insert:i},l).map(s,!0);d=d.map(function(e){return e.map(o)});var a=(s=s.compose(o)).mapPos(t)+i.length;d.push(c.jT.cursor(a)),f.push(y.of(r.id)),(0,u.j)(u.U3.PASTE_SCANNER_USED,{action:"original_accepted",provider:r.result.provider})}()}catch(e){p=!0,m=e}finally{try{h||null==g.return||g.return()}finally{if(p)throw m}}return e.dispatch({changes:s,effects:f,selection:c.jT.create(d)}),!0},_=function(e){return!!e.state.facet(I)&&!!e.state.field(D).size&&(e.dispatch({effects:e.state.selection.ranges.map(function(e){return b.of(e)})}),!0)},S=function(e){return!e.state.facet(I)&&E(e)},E=function(e){return!!e.state.field(D).size&&(e.dispatch({effects:e.state.selection.ranges.map(function(e){return y.of(e)})}),!0)};function k(e,t){var n,r=null===(n=e.clipboardData)||void 0===n?void 0:n.getData("text/plain");if(!r)return!1;var i=function(e){if(e.length>2e3)return!1;var t=!0,n=!1,r=void 0;try{for(var i,o=[f,h][Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value,l=!0,c=!1,s=void 0;try{for(var u,p=Object.entries(a)[Symbol.iterator]();!(l=(u=p.next()).done);l=!0){var m=(0,d._)(u.value,2),v=m[0],g=m[1],y=e.search(g);if(!(y<0)){var b=e.match(g);if(b){var Z=y+b[0].length;return{start:y,end:Z,secret:e.slice(y,Z),provider:v}}}}}catch(e){c=!0,s=e}finally{try{l||null==p.return||p.return()}finally{if(c)throw s}}}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}return!1}(r);if(!i)return!1;e.preventDefault(),e.stopPropagation();var l=r.slice(0,i.start)+r.slice(i.end),s=m.generateId();return t.dispatch((0,a._)((0,o._)({},t.state.changeByRange(function(e){var t=e.from,n=e.to,r=c.jT.cursor(t+i.start);return{range:r,changes:{from:t,to:n,insert:l},effects:g.of(m.range(s,r,i))}})),{scrollIntoView:!0})),(0,u.j)(u.U3.PASTE_SCANNER_USED,{action:"secret_detected",provider:i.provider}),!0}var T=c.QQ.define({create:function(){return c.Xs.empty},update:function(e,t){e=e.map(t.changes);var n=!0,r=!1,i=void 0;try{for(var o,a=t.effects[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;if(l.is(w)){var s=l.value,u=s.from,d=s.to,f=s.secret;e=e.update({add:[v.from(f).range(u,d)],filter:function(){return!1}})}l.is(x)&&(e=c.Xs.empty)}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return e}}),R=c.QQ.define({create:function(){return null},update:function(e,t){var n=t.state.field(D,!1),r=!0,i=!1,o=void 0;try{for(var a,l=t.effects[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var s=a.value;n&&s.is(b)&&(s.value instanceof c.xm?n.between(s.value.from,s.value.to,function(t,n,r){e=r}):e=s.value),s.is(Z)&&(e=null)}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return e}}),D=c.QQ.define({create:function(){return c.Xs.empty},update:function(e,t){e=e.map(t.changes);var n=!0,r=!1,i=void 0;try{for(var o,a=t.effects[Symbol.iterator]();!(n=(o=a.next()).done);n=!0)!function(){var t=o.value;t.is(g)&&(e=e.update({add:[t.value],sort:!0})),t.is(y)&&(e=t.value instanceof c.xm?e.update({filter:function(){return!1},filterFrom:t.value.from,filterTo:t.value.to}):e.update({filter:function(e,n,r){return r.id!==t.value}}))}()}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return e},provide:function(){return[s.tk.domEventHandlers({paste:k}),c.Wl.highest(s.$f.of([{key:"Mod-z",run:E},{key:"Enter",run:C},{key:"Tab",run:_,stopPropagation:!0},{key:"Escape",run:S}]))]}}),I=c.r$.define({combine:function(e){return e.some(Boolean)}}),G=p.RR.of(function(e){var t=e.state.field(D,!1);if(!t||!t.size)return!1;var n=!1;return t.between(e.newSelection.main.from,e.newSelection.main.to,function(){return n=!0,!1}),n})},81031:function(e,t,n){n.d(t,{F:function(){return C},V:function(){return _}});var r=n(32477),i=n(8182),o=n(43429),a=n(38265),l=n(57468),c=n(56596),s=n(29287),u=n(15146),d=n(99741),f=n(74833),h=n(73157),p=n(74106),m=n(20142),v=n(51384),g=n(81013),y=n(75023),b=(0,v.iv)({scrollbarWidth:"thin",outline:"none",overflow:"auto",".cm-content":{paddingBottom:0},"::-webkit-scrollbar":{width:4},".cm-gutters":{minWidth:"unset"}}),Z=(0,v.iv)({overflow:"hidden",".cm-scroller":{overflow:"hidden"}}),w={root:s.l0.backgroundColor.backgroundRoot,higher:s.l0.backgroundColor.backgroundHigher,highest:s.l0.backgroundColor.backgroundHighest,default:s.l0.backgroundColor.backgroundDefault},x=new y.j(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return(0,a.Eu)({formatNumber:function(t,n){for(var r=String(n.doc.lines).length,i=String(t+e-1);r>i.length;)i="\xa0"+i;return i}})});function C(e){var t=e.path,n=e.initialDoc,r=e.maxHeight,a=e.minHeight,l=e.extensions,c=e.allowScroll,s=e.fontSize,u=e.hideGutter,d=e.startLineNumber,f=e.style,h=e.elevation,y=e.onNavigateToCode,C=(0,g.Z)(),_=C.ref,S=C.view,E=o.useMemo(function(){var e;return e=w[null!=h?h:"default"],(0,v.iv)({".cm-editor":e,".cm-gutters":e})},[h]),k=x.use(d);return(0,i.tZ)("div",{style:f,children:(0,i.tZ)(m.ZP,{ref:_,initialDoc:n,css:[b,E,void 0===c||c?null:Z],extensions:[k,void 0===l?[]:l],style:{minHeight:a,maxHeight:null!=r?r:"10em"},hideGutter:u,filePath:t,fontSize:s,readOnly:!0,onClick:function(e){if(y&&S){var t=e.clientX,n=e.clientY,r=S.posAtCoords({x:t,y:n});y(null!==r?(0,p.sg)(S.state.doc,r):null)}}})})}function _(e){var t=e.path,n=e.doc,a=e.extensions,p=e.numMatches,m=e.onNavigateToCode,v=e.initiallyExpanded,g=(0,r._)(o.useState(v),2),y=g[0],b=g[1];return(0,i.BX)(c.G,{children:[(0,i.BX)(c.G,{css:[s.l0.width("100%"),s.l0.p(4),s.l0.rowWithGap(8),{alignItems:"center"}],children:[(0,i.tZ)(l.Z,{path:t}),(0,i.tZ)(f.xv,{multiline:!1,title:t,css:[s.l0.flex.shrink(1),{textOverflow:"ellipsis"}],children:t}),(0,i.tZ)(f.xv,{color:"dimmest",multiline:!1,children:(0,h.Z)("match",p,!0)}),(0,i.tZ)(c.G,{css:s.l0.flex.grow(1)}),(0,i.tZ)(u.hU,{alt:y?"Collapse snippet":"Expand snippet",tooltipHidden:!0,onClick:function(){return b(function(e){return!e})},children:(0,i.tZ)(d.Z,{rotate:y?180:0,style:{transition:"200ms ease"}})})]}),(0,i.tZ)(c.G,{css:[s.l0.p(4),{display:y?"block":"none"}],children:(0,i.tZ)(C,{path:t,initialDoc:n,extensions:void 0===a?[]:a,maxHeight:"max-content",allowScroll:!0,hideGutter:!0,onNavigateToCode:m})})]})}},95032:function(e,t,n){n.d(t,{Z:function(){return p}});var r=n(23026),i=n(3194),o=n(2543),a=n(38265),l=n(84357),c=n(29287),s=n(73157),u=new(function(e){"use strict";(0,i._)(n,e);var t=(0,o._)(n);function n(){var e;return(0,r._)(this,n),(e=t.call(this)).elementClass="cm-gutterElement-hidden",e}return n.prototype.toDOM=function(){var e=document.createElement("span");e.classList.add("cm-hidden-lines-gutter");var t=document.createElement("span");return t.classList.add("cm-dot"),e.appendChild(t),e},n}(a.SJ)),d=function(e){"use strict";(0,i._)(n,e);var t=(0,o._)(n);function n(e){var i;return(0,r._)(this,n),(i=t.call(this)).numLines=e,i}var a=n.prototype;return a.eq=function(e){return e.numLines===this.numLines},a.toDOM=function(){var e=document.createElement("span");return e.textContent="".concat(this.numLines," hidden ").concat((0,s.Z)("line",this.numLines)),e.className="cm-hidden-lines",e},n}(a.l9),f=a.p.mark({class:"cm-searchResultMatch"}),h=a.tk.baseTheme({".cm-hidden-lines":{color:"var(--foreground-dimmer)",backgroundColor:"var(--background-highest)",display:"inline-block",width:"100%"},".cm-gutterElement-hidden":{backgroundColor:"var(--background-highest)"},".cm-hidden-lines-gutter":{backgroundColor:"var(--background-highest)",display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%"},".cm-dot":{height:"5px",width:"5px",backgroundColor:"var(--foreground-dimmest)",borderRadius:"50%",display:"inline-block"},".cm-tooltip .cm-scroller":{border:"2px solid var(--background-highest)",borderRadius:"var(--border-radius-4)"},".cm-tooltip .cm-scroller:hover":{border:"2px solid var(--accent-primary-dimmest)",boxShadow:"var(--shadow-1)",cursor:"pointer"},".cm-searchResultMatch":{color:c.TV.foregroundDefault,backgroundColor:c.TV.accentPrimaryDimmest,outline:c.TV.accentPrimaryDimmer+" solid 1px"},".cm-searchResultMatch span":{color:c.TV.foregroundDefault},".cm-tooltip .cm-searchResultMatch:hover":{opacity:.8},".cm-tooltip .cm-gutterElement":{display:"flex",marginTop:0,textAlign:"center",alignItems:"center",justifyContent:"center",lineHeight:"21px"},".cm-tooltip .cm-line":{padding:0},".cm-tooltip .cm-gutters":{padding:0},".cm-tooltip .cm-content":{paddingTop:0},".cm-tooltip .cm-lineWrapping":{whiteSpace:"pre"},".cm-tooltip .cm-cursor":{display:"none"},".cm-tooltip .cm-selectionBackground":{display:"none"}});function p(e,t){var n=e.sort(function(e,t){return e.from-t.from}),r=n.map(function(e){var t=e.from,n=e.to;return f.range(t,n)});return[a.lg.define(function(){return{}},{decorations:function(){return a.p.set(r)}}),function(e,t){var n=[],r=1;e.forEach(function(i,o){var a=t.lineAt(i.from),l=t.lineAt(i.to);r<a.number-2&&n.push({startLine:r,endLine:a.number-2}),r=l.number+2,o===e.length-1&&r<t.lines&&n.push({startLine:r,endLine:t.lines})});var i=n.map(function(e){var n=t.line(e.startLine),r=t.line(e.endLine);return a.p.replace({widget:new d(e.endLine-e.startLine+1)}).range(n.from,r.to)}),o=n.map(function(e){var n=t.line(e.startLine);return a.p.line({class:"cm-line-hidden"}).range(n.from)}),c=l.QQ.define({create:function(){return a.p.set(i)},update:function(e){return e},provide:function(e){return a.tk.decorations.from(e)}}),s=l.QQ.define({create:function(){return a.p.set(o)},update:function(e){return e},provide:function(e){return a.tk.decorations.from(e)}}),f=n.map(function(e){var n=t.line(e.startLine);return u.range(n.from)});return[c,s,h,a.p2.of(l.Xs.of(f))]}(n,t)]}},11570:function(e,t,n){n.d(t,{Ny:function(){return f},_S:function(){return d},oZ:function(){return u}});var r=n(45903),i=n(25e3),o=n(32477),a=n(43429),l=n(84357),c=n(89061),s=n(22470);function u(e){return JSON.stringify({fileMap:Array.from(e.fileMap.entries()).map(function(e){var t,n=(0,o._)(e,2);return[n[0],(t=n[1],(0,i._)((0,r._)({},t),{editorState:t.editorState.toJSON({history:c.cE})}))]})})}function d(e){var t=JSON.parse(e).fileMap,n=new s.L(20);return t.forEach(function(e){var t=(0,o._)(e,2),a=t[0],s=t[1];n.set(a,(0,i._)((0,r._)({},s),{editorState:l.yy.fromJSON(s.editorState,void 0,{history:c.cE})}))}),{fileMap:n}}function f(){return{fileMap:new s.L(20)}}var h=a.createContext(null);t.ZP=h},10028:function(e,t,n){n.d(t,{AL:function(){return w},GD:function(){return m},VO:function(){return p},Y:function(){return b},tT:function(){return g}});var r=n(45903),i=n(93295),o=n(23982),a=n(55846),l=n(77393),c=n(72986);function s(){var e=(0,i._)(["\n  query CodemirrorThread($id: String!) {\n    thread: annotationAnchor(id: $id) {\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n    currentUser {\n      id\n      username\n      fullName\n      image\n    }\n  }\n  ","\n"]);return s=function(){return e},e}function u(){var e=(0,i._)(["\n  mutation CreateThread(\n    $thread: AnnotationAnchorInput!\n    $message: AnnotationMessageInput\n    $highlight: AnnotationHighlightInput\n  ) {\n    createThread: createAnnotationAnchor(\n      annotationAnchor: $thread\n      annotationMessage: $message\n      highlight: $highlight\n    ) {\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return u=function(){return e},e}function d(){var e=(0,i._)(["\n  mutation UpdateThread($id: String!, $changes: AnnotationAnchorChangesInput!) {\n    updateThread: updateAnnotationAnchor(id: $id, changes: $changes) {\n      ... on UserError {\n        message\n      }\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n  }\n  ","\n"]);return d=function(){return e},e}function f(){var e=(0,i._)(["\n  mutation CreateThreadMessage(\n    $replId: String!\n    $threadId: String!\n    $threadMessage: AnnotationMessageInput!\n    $highlight: AnnotationHighlightInput\n  ) {\n    createThreadMessage: createAnnotationMessage(\n      replId: $replId\n      anchorId: $threadId\n      annotationMessage: $threadMessage\n      highlight: $highlight\n    ) {\n      ... on UserError {\n        message\n      }\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n  }\n  ","\n"]);return f=function(){return e},e}var h={},p=(0,o.Ps)(s(),a.j7);function m(e){var t=(0,r._)({},h,e);return l.a(p,t)}var v=(0,o.Ps)(u(),a.j7);function g(e){var t=(0,r._)({},h,e);return c.D(v,t)}var y=(0,o.Ps)(d(),a.j7);function b(e){var t=(0,r._)({},h,e);return c.D(y,t)}var Z=(0,o.Ps)(f(),a.j7);function w(e){var t=(0,r._)({},h,e);return c.D(Z,t)}},66610:function(e,t,n){n.d(t,{Z:function(){return x}});var r=n(45903),i=n(25e3),o=n(32477),a=n(21289),l=n(43429),c=n(55534),s=n(10028),u=n(17491),d=n(55846),f=n(30456),h=n(50782),p=n(66959),m=n(54916),v=n(50220),g=n(50199),y=n(72282),b=n.n(y);function Z(e,t){if(!e)return null;var n,r=e.state.field(v.OQ),i=e.state.field(v.ZS);return(null!==(n=r[t])&&void 0!==n?n:(null==i?void 0:i.id)===t?i:null)||null}function w(e,t){if(!e)return null;var n=Z(e,t);if(!n)return null;var r=Math.min(n.indexStart,n.indexEnd),i=Math.max(n.indexStart,n.indexEnd),o=e.state.doc.lineAt(r),a=e.state.doc.lineAt(i),l=e.state.doc.sliceString(e.state.doc.line(Math.max(o.number-2,1)).from,r),c=e.state.doc.sliceString(i,e.state.doc.line(Math.min(a.number+2,e.state.doc.lines)).to);return{precode:l,code:e.state.doc.sliceString(r,i),postcode:c}}function x(e,t,n){var y=(0,c.Z)().showError,x=(0,h.Z)(),C=(0,f.Z)().map(function(e){return e.username}),_=(0,m.Z)().fs,S=(0,s.GD)({variables:{id:e}}),E=S.data,k=S.error,T=S.loading,R=S.client,D=function(){if(T||!E){var n;return!!t&&(null===(n=t.state.field(v.ZS))||void 0===n?void 0:n.id)===e}return"AnnotationAnchor"!==E.thread.__typename}(),I=l.useMemo(function(){return T||!E?null:"UserError"===E.thread.__typename?{id:e,__typename:"AnnotationAnchor",messages:[],isGeneral:!1,isResolved:!1}:"AnnotationAnchor"===E.thread.__typename?E.thread:null},[E,e,T]),G=(0,o._)((0,s.tT)({onError:function(e){return y(e.message)},update:function(e,t){var n,r;if(t.errors){t.errors.forEach(function(e){return y(e.message)});return}if((null===(r=t.data)||void 0===r?void 0:null===(n=r.createThread)||void 0===n?void 0:n.__typename)==="UserError"){y(t.data.createThread.message);return}}}),1)[0],B=(0,o._)((0,s.AL)({onError:function(e){return y(e.message)},update:function(e,t){if(t.errors){t.errors.forEach(function(e){return y(e.message)});return}var n,r=null===(n=t.data)||void 0===n?void 0:n.createThreadMessage;r&&"UserError"===r.__typename&&y(r.message)}}),1)[0],A=(0,o._)((0,s.Y)({onError:function(e){return y(e.message)},update:function(e,t){if(t.errors){t.errors.forEach(function(e){return y(e.message)});return}var n,r=null===(n=t.data)||void 0===n?void 0:n.updateThread;r&&"UserError"===r.__typename&&y(r.message)}}),1)[0],P=(0,o._)((0,d.Hj)(),1)[0],N=(0,g.Z)(function(){return b()(P,1e3,{trailing:!1})},[P]),U=function(){var e=null==E?void 0:E.currentUser;return e?{user:{__typename:"User",id:e.id,username:e.username,fullName:e.fullName,image:e.image}}:{}};return{thread:I,isPlaceholder:D,error:k,loading:T,getHighlight:w,getLatestAnchor:function(){return Z(t,e)},updateThread:function(e){var t,n=e.changes,o=(null==E?void 0:null===(t=E.thread)||void 0===t?void 0:t.__typename)==="AnnotationAnchor"?E.thread:null;if(!o)throw Error("expected thread");A({variables:{id:o.id,changes:n},optimisticResponse:{__typename:"RootMutationType",updateThread:(0,i._)((0,r._)({},o,n),{isResolved:"boolean"==typeof n.isResolved?n.isResolved:o.isResolved})}})},finalizeThreadMessage:function(o){var l=o.message,c=o.messageId,d=(0,p.kW)(l,{users:(0,a._)(C).concat(["everyone"])}),f={id:c,text:l,mentions:d.mentions};if(D&&t&&n){var h=t.state.field(v.ZS),m={id:e,replId:x,indexStart:null==h?void 0:h.indexStart,indexEnd:null==h?void 0:h.indexEnd,otVersion:_.getOTVersion(n),path:n};G({variables:{thread:m,message:f,highlight:w(t,e)},optimisticResponse:{__typename:"RootMutationType",createThread:(0,i._)((0,r._)({__typename:"AnnotationAnchor"},m,U()),{messages:[(0,i._)((0,r._)({id:c,timeCreated:new Date().toISOString(),currentUserIsAuthor:!0},U()),{content:{text:l,__typename:"TextMessageContentType"},anchor:{id:m.id,__typename:"AnnotationAnchor"},__typename:"AnnotationMessage",seen:!0})],isResolved:!1,isGeneral:!1})}}),R.writeQuery({query:s.VO,variables:{id:e},data:{__typename:"RootQueryType",thread:(0,i._)((0,r._)((0,i._)((0,r._)({},m),{isResolved:!1,isGeneral:!1}),U()),{messages:[(0,i._)((0,r._)({id:c,timeCreated:new Date().toISOString(),currentUserIsAuthor:!0},U()),{content:{text:l,__typename:"TextMessageContentType"},anchor:{id:m.id,__typename:"AnnotationAnchor"},__typename:"AnnotationMessage",seen:!0})],__typename:"AnnotationAnchor"}),currentUser:null==E?void 0:E.currentUser}});var g=R.readQuery({query:u.Jq,variables:{replId:x,path:n}});if(g){var y,b,Z=(null===(b=g.threadsByFile)||void 0===b?void 0:b.__typename)==="ThreadsByFileResult"?g.threadsByFile.threads:[],S=U().user;R.writeQuery({query:u.Jq,variables:{replId:x,path:n},data:{__typename:"RootQueryType",threadsByFile:{__typename:"ThreadsByFileResult",threads:(0,a._)(Z).concat([(0,r._)({messageCount:1,unreadCount:0,__typename:"AnnotationAnchor",isGeneral:!1,user:S,isResolved:!1,participants:[S]},m)])}}})}return}var k=(null==E?void 0:null===(y=E.thread)||void 0===y?void 0:y.__typename)==="AnnotationAnchor"?E.thread:null;if(!k)throw Error("expected thread");B({variables:{replId:x,threadId:k.id,threadMessage:f,highlight:w(t,k.id)},optimisticResponse:{__typename:"RootMutationType",createThreadMessage:(0,i._)((0,r._)({},k),{messages:(0,a._)(k.messages.filter(function(e){return!e.id.startsWith("chat-")})).concat([(0,i._)((0,r._)({},U(),f),{content:{text:f.text,__typename:"TextMessageContentType"},anchor:{id:k.id,__typename:"AnnotationAnchor"},__typename:"AnnotationMessage",timeCreated:new Date().toISOString(),currentUserIsAuthor:!0,seen:!0})])})}})},changeThreadMessage:function(t){N({variables:{threadId:e,messageId:t.messageId,message:null}})}}}},17491:function(e,t,n){n.d(t,{Jq:function(){return s},eR:function(){return u}});var r=n(45903),i=n(93295),o=n(23982),a=n(77393);function l(){var e=(0,i._)(["\n  query ThreadsByFileHook($replId: String!, $path: String!) {\n    threadsByFile(replId: $replId, path: $path) {\n      ... on ThreadsByFileResult {\n        threads {\n          id\n          path\n          otVersion\n          indexStart\n          indexEnd\n          messageCount\n          unreadCount\n          user {\n            id\n            image\n            username\n          }\n          participants {\n            id\n            image\n            username\n          }\n          isGeneral\n          isResolved\n        }\n      }\n    }\n  }\n"]);return l=function(){return e},e}var c={},s=(0,o.Ps)(l());function u(e){var t=(0,r._)({},c,e);return a.a(s,t)}},62609:function(e,t,n){n.d(t,{B:function(){return o}});var r=n(84357),i=n(40497);function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return e},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=r.Py.define(),o=r.QQ.define({create:function(){return t},update:function(t,r){return(0,i.j)(r,n,function(n){t=e(n.value,t)}),t}});return{effect:n,state:o}}},97703:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(8182),i=n(4498),o=n(43429);function a(e){var t=e.json,n=(0,o.useMemo)(function(){return JSON.stringify(t,null,2)},[t]);return(0,r.tZ)(i.Z,{language:"json",code:n})}},48528:function(e,t,n){n.d(t,{j:function(){return m},m:function(){return p}});var r=n(45903),i=n(25e3),o=n(70322),a=n(32477),l=n(8182),c=n(43429),s=n(1498),u=n(10041),d=n(30983),f=n(15146),h=n(13729);function p(e){var t=e.textToCopy,n=e.tooltip,f=e.timeout,p=void 0===f?4e3:f,m=(0,o._)(e,["textToCopy","tooltip","timeout"]),v=(0,a._)(c.useState(!1),2),g=v[0],y=v[1],b=c.useRef(null);return c.useEffect(function(){return function(){b.current&&clearTimeout(b.current)}},[]),(0,l.tZ)(d.u,{isOpen:g,tooltip:null!=n?n:"".concat(t," copied to clipboard"),placement:"bottom-end",children:function(e,n){return(0,l.tZ)(s.zx,(0,i._)((0,r._)({},(0,h.dG)(m,e)),{ref:n,onClick:function(e){(0,u.Z)(t),y(!0),b.current&&clearTimeout(b.current),b.current=setTimeout(function(){return y(!1)},p),m.onClick&&m.onClick(e)}}))}})}function m(e){var t=e.textToCopy,n=e.tooltip,s=e.timeout,p=void 0===s?4e3:s,m=e.children,v=(0,o._)(e,["textToCopy","tooltip","timeout","children"]),g=(0,a._)(c.useState(!1),2),y=g[0],b=g[1],Z=c.useRef(null);return c.useEffect(function(){return function(){Z.current&&clearTimeout(Z.current)}},[]),(0,l.tZ)(d.u,{isOpen:y,tooltip:null!=n?n:"".concat(t," copied to clipboard"),placement:"bottom-end",children:function(e,n){return(0,l.tZ)(f.hU,(0,i._)((0,r._)({},(0,h.dG)(e,v)),{ref:n,onClick:function(e){(0,u.Z)(t),b(!0),Z.current&&clearTimeout(Z.current),Z.current=setTimeout(function(){return b(!1)},p),v.onClick&&v.onClick(e)},children:m}))}})}},42098:function(e,t,n){n.d(t,{E:function(){return p}});var r=n(32477),i=n(8182),o=n(59868),a=n(1498),l=n(74833),c=n(49344),s=n(29287),u=n(56596),d=n(54916),f=n(32377),h=n(43429);function p(){var e=(0,d.Z)().replspaceApi,t=(0,r._)((0,h.useState)(null),2),n=t[0],p=t[1];return(0,h.useEffect)(function(){return e.onConfirmSendToken(function(e){e&&(0,o.j)(o.U3.MODAL_VIEWED,{modalName:"git_token_modal"}),p(function(){return e})})},[e]),(0,i.tZ)(c.u,{isOpen:"function"==typeof n,onRequestClose:function(){null==n||n(!1),(0,o.j)(o.U3.GIT_TOKEN_MODAL_ACCEPTED,{response:"close"}),p(null)},children:(0,i.BX)(u.G,{css:[s.l0.colWithGap(16)],children:[(0,i.tZ)(l.h4,{variant:"headerDefault",level:3,children:"Pass GitHub Credentials"}),(0,i.tZ)(l.xv,{children:"It looks like you're trying to connect to your GitHub repository through the shell. Pass your token to the shell?"}),(0,i.tZ)(l.xv,{children:"If you did not initiate a git command, you should deny this."}),(0,i.BX)(u.G,{css:[s.l0.justify.end,s.l0.rowWithGap(16)],children:[(0,i.tZ)(a.zx,{onClick:function(){null==n||n(!1),(0,o.j)(o.U3.GIT_TOKEN_MODAL_ACCEPTED,{response:"deny"}),p(null)},text:"Deny"}),(0,i.tZ)(a.zx,{onClick:function(){null==n||n(!0),(0,o.j)(o.U3.GIT_TOKEN_MODAL_ACCEPTED,{response:"confirm"}),p(null)},iconLeft:(0,i.tZ)(f.Z,{}),text:"Confirm for this session",colorway:"primary"})]})]})})}},96298:function(e,t,n){n.d(t,{Z:function(){return w}});var r=n(8182),i=n(10041),o=n(70002),a=n(15146),l=n(24463),c=n(74833),s=n(29287),u=n(30983),d=n(56596),f=n(70671),h=n(12874),p=n(48728),m=n(45903),v=n(25e3);n(43429);var g=n(26),y=function(e){return(0,r.tZ)(g.Z,(0,v._)((0,m._)({viewBox:"0 0 800.5 907.77"},e),{children:(0,r.tZ)("path",{d:"M303.36,238.61c31.36-21.37,71.76-12.97,65-6.53c-12.89,12.28,4.26,8.65,6.11,31.31 c1.36,16.69-4.09,25.88-8.78,31.11c-9.79,1.28-21.69,3.67-36.02,8.33c-8.48,2.76-15.85,5.82-22.31,8.9 c-1.7-1.11-3.55-2.47-5.74-4.36C279.5,288.19,280.24,254.37,303.36,238.61 M490.68,370.72c5.69-4.41,31.55-12.72,55.49-15.55 c12.57-1.48,30.49-2.34,34.31-0.2c7.59,4.19,7.59,17.16,2.39,29.14c-7.57,17.4-18.27,36.63-30.39,38.21 c-19.77,2.61-38.46-8.09-59.8-24.03C485.06,392.56,480.38,378.68,490.68,370.72 M526.75,201.27c29.19,13.58,25.37,39.42,26.18,54.6 c0.22,4.36,0.15,7.3-0.22,9.32c-4.04-2.19-10.43-3.8-20.56-3.35c-2.96,0.12-5.84,0.47-8.63,0.91c-10.77-5.77-17.21-17.06-23.1-29.06 c-0.54-1.11-0.96-2.1-1.36-3.06c-0.17-0.44-0.35-0.91-0.52-1.31c-0.07-0.22-0.12-0.39-0.2-0.59c-3.23-10.25-1.06-12.3,0.3-15.46 c1.41-3.23,6.68-5.89-1.11-8.58c-0.67-0.25-1.5-0.39-2.44-0.57C500.25,197.72,515.7,196.17,526.75,201.27 M367.62,510.22 c-31.45-20.19-63.99-49.15-78.22-65.18c-2.39-1.8-2-9.79-2-9.79c12.84,9.98,66.11,48.04,122.44,65.42 c19.87,6.14,50.36,8.46,76.81-6.53c20.21-11.46,44.54-31.43,59.06-52.01l2.66,4.61c-0.1,3.06-6.78,17.97-10.18,23.96 c6.14,3.53,10.72,4.49,17.55,6.36l46.64-7.27c16.74-27.04,28.74-70.65,15.95-112.16c-7.3-23.81-45.36-71.22-48.09-73.83 c-9.56-9.19,1.6-44.69-17.35-83.42C532.86,159.41,480.67,116.69,458,98.1c6.68,4.88,47.82,21.47,67,44.62 c1.8-2.39,2.54-14.82,4.19-17.97c-16.47-21.57-17.75-59.95-17.75-70.21c0-18.81-9.56-40.13-9.56-40.13s16.47,13.04,20.73,35.5 c5.03,26.6,15.75,47.55,29.93,65.28c26.84,33.43,51.08,50.58,63.33,38.23C630.53,138.58,601,72.2,563.28,35.15 C519.25-8.09,507.74-2.52,481.91,6.7c-20.61,7.35-31.75,65.87-85.47,64.71c-9.1-1.06-32.54-1.63-44.13-1.53 c6.04-8.43,11.22-14.94,11.22-14.94s-18.02,7.25-33.38,16.44l-1.18-1.77c5.18-10.92,10.75-17.82,10.75-17.82s-14.4,8.65-27.54,19.01 c2.39-13.02,11.44-21.27,11.44-21.27s-18.19,3.28-41.36,28.77c-26.33,7.2-32.66,11.93-53.64,21.22 c-34.12-7.44-50.21-19.45-65.55-41.56c-11.68-16.89-32.47-19.45-53.71-10.72c-30.97,12.8-70.14,30.33-70.14,30.33 s12.77-0.52,26.08,0.05c-18.22,6.9-35.72,16.39-35.72,16.39s8.53-0.3,19.06-0.12c-7.27,6.04-11.29,8.92-18.22,13.51 c-16.66,12.1-30.17,26.08-30.17,26.08s11.31-5.15,21.47-8.04c-7.1,16.27-21.18,28.25-18.59,48.17 c2.49,18.19,24.82,55.66,53.64,78.66c2.49,2,41.86,38.43,71.56,23.47c29.68-14.94,41.39-28.25,46.27-48.66 c5.74-23.44,2.47-41.17-9.79-92.05c-4.04-16.79-14.57-51.37-19.65-67.91l1.13-0.81c9.71,20.49,34.56,74.5,44.57,110.78 c15.63,56.57,10.75,85.27,3.6,95.79c-21.57,31.73-76.84,35.92-101.98,18.34c-3.85,60.91,9.76,87.73,14.37,101.24 c-2.29,15.53,7.77,44.37,7.77,44.37s1.13-13.11,5.74-20.02c1.23,15.41,9,33.72,9,33.72s-0.47-11.31,3.06-21.08 c4.98,8.43,8.63,10.43,13.34,16.76c4.71,16.47,14.15,28.5,14.15,28.5s-1.53-8.83-0.69-18.02c23.05,22.14,27.02,54.45,29.31,79.28 c6.46,68.26-107.63,122.54-129.74,165.24c-16.76,25.29-26.8,65.3,1.58,88.89c68.6,56.97,42.25,72.65,76.59,97.69 c47.11,34.34,106.05,18.96,126.11-8.97c27.93-38.92,20.76-75.63,10.38-109.97c-8.11-26.85-30.15-71.46-57.41-88.72 c-27.86-17.65-54.95-20.95-77.9-18.59l2.12-2.44c33.01-6.56,67.52-2.96,92.49,13.14c28.35,18.22,54.28,49.47,67.84,97.37 c15.38-2.19,17.55-3.18,31.63-5.18l-31.7-246.76L367.62,510.22z M385.94,819.52l-3.65-34.22l71.29-108.74l80.93,23.64l69.59-116.23 L687.52,639l63.38-132.92l22.53,242.07L385.94,819.52z M774.27,456.51l-254.72,46.17c-6.31,8.13-21.91,22.41-29.41,26.13 c-32.17,16.2-53.91,11.51-72.7,6.63c-12.08-3.06-19.08-4.78-29.11-9.29l-62.17,8.53l37.74,314.87l436.35-78.66L774.27,456.51z"})}))},b=n(75875),Z=n(1498);function w(e){var t=e.replId,n=e.showFlag,m=e.buttonsOnly,v=(0,f.F)().isDarkColorScheme;return(0,r.BX)(r.HY,{children:[(0,r.tZ)(o.Z,{href:"https://app.datadoghq.com/logs?"+new URLSearchParams({query:"@replid:".concat(t)}).toString(),iconLeft:(0,r.tZ)(y,{color:v?"#FFFFFF":"#632CA6"}),iconRight:(0,r.tZ)(h.Z,{}),target:"_blank",text:"View Datadog Logs"}),void 0!==m&&m?(0,r.tZ)(u.u,{maxWidth:300,tooltip:(0,r.tZ)(c.xv,{multiline:!1,children:t}),children:(0,r.tZ)(Z.zx,{iconLeft:(0,r.tZ)(p.Z,{}),text:"Copy Repl ID",onClick:function(){return(0,i.Z)(t)}})}):(0,r.BX)(d.G,{css:[s.l0.rowWithGap(2),{alignItems:"center"}],children:[void 0!==n&&n?(0,r.BX)(u.u,{tooltip:"You are seeing this functionality because you have special permissions.",children:[(0,r.tZ)(b.Z,{})," "]}):null,(0,r.BX)(c.xv,{css:[s.l0.align.center],multiline:!1,children:["Repl ID: ",(0,r.tZ)(l.Z,{children:t})]}),(0,r.tZ)(a.hU,{alt:"Copy to clipboard",onClick:function(){return(0,i.Z)(t)},children:(0,r.tZ)(p.Z,{})})]})]})}},66932:function(e,t,n){n.d(t,{$:function(){return l},i:function(){return a}});var r=n(75582),i=n(40028),o=n(40699);function a(e,t){if(void 0!==t)switch(t){case r.DZ.HostingTierE2Micro:return e.hostingTierE2Micro;case r.DZ.HostingTierE2Small:return e.hostingTierE2Small;case r.DZ.HostingTierE2Medium:return e.hostingTierE2Medium;case r.DZ.HostingTierN1Custom_1_4:return e.hostingTierN1Custom1_4;case r.DZ.HostingTierE2Standard_2:return e.hostingTierE2Standard2;case r.DZ.HostingTierE2Standard_4:return e.hostingTierE2Standard4;default:(0,i.Z)(t)}}function l(e){var t=o.r4[e],n=t.vCpu,r=t.ram,i=t.dedicated;return"".concat(i?"Dedicated ":"").concat(n," vCPU / ").concat(r," GiB RAM")}},84096:function(e,t,n){n.d(t,{e:function(){return p}});var r=n(8182),i=n(7877),o=n(63388),a=n(75582),l=n(93918),c=n(29287),s=n(5039),u=n(30983),d=n(56596),f=n(74833),h=(0,l.X)({root:[c.l0.py(4),c.l0.rowWithGap(4),c.l0.align.center]});function p(e){var t=e.deployment,n=e.small,l=t.currentBuild,c=o.VR[l.status],p=c.title,m=c.color,v=(0,s.Z)(new Date(l.timeCreated),Date.now(),{addSuffix:!0}),g="Deployed ".concat(v," by ").concat(l.user.displayName),y=l.status===a.Fe.Success?"Deployed":p;return(0,r.tZ)(u.u,{tooltip:g,children:(0,r.BX)(d.G,{css:h.root,children:[(0,r.tZ)(i.Z,{size:n?12:16,color:m}),(0,r.tZ)(f.xv,{variant:n?"small":void 0,color:"dimmest",multiline:!1,children:y})]})})}},31577:function(e,t,n){n.d(t,{$:function(){return s}});var r=n(32477),i=n(8182),o=n(43429),a=n(90234),l=n(60427),c=n(64420);function s(e){var t=(0,r._)((0,o.useState)(function(){var t,n,r,i,o;return n=(t={fs:e.fs,container:e.container,dotReplit:e.dotReplit}).container,r=t.fs,i=t.dotReplit,(o=(0,a.MT)()).set(l.CK,n),o.set(l.bA,r),o.set(l.My,i),o}),1)[0];return(0,i.BX)(c.aT.Provider,{value:t,children:[e.children,(0,i.tZ)(l.jd,{replId:e.replId})]})}},92977:function(e,t,n){n.d(t,{Gs:function(){return f},Qw:function(){return d},un:function(){return h}});var r=n(45903),i=n(32477),o=n(8182),a=n(51384),l=n(56596),c=n(93918),s=n(43429),u=n(49275),d=(0,c.X)({maxWidth:{width:"100%",maxWidth:600,marginLeft:"auto",marginRight:"auto"}}),f=function(e,t){return(0,a.F4)("\n  0% {\n    opacity: 0;\n    height: ".concat((null==t?void 0:t.from)?t.from:0,"px;\n  }\n  99% {\n    opacity: 1;\n    height: ").concat(e,"px;\n  }\n  ").concat((null==t?void 0:t.noAuto)?"100% {\n        opacity: 1;\n        height: ".concat(e,"px;\n      }"):"100% {\n    height: auto;\n  }","\n"))};function h(e){var t,n,a,c=e.children,d=e.render,f=e.timeout,h=void 0===f?300:f,p=e.initialHeight,m=(0,s.useRef)(null),v=(0,s.useRef)(null),g=(n=(t=(0,i._)((0,s.useState)(0),2))[0],a=t[1],(0,s.useEffect)(function(){if(v.current){var e=new ResizeObserver(function(e){var t=!0,n=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var l=i.value.borderBoxSize[0].blockSize;a(l)}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}});return e.observe(v.current),function(){return e.disconnect()}}},[n,v]),n),y=g>0?g:p,b={transition:h+"ms ease-out",transitionProperty:"height, opacity",opacity:0,height:0,visibility:"hidden"},Z={entering:{opacity:1,height:y},entered:{transitionProperty:"opacity",opacity:1,height:y,visibility:"visible"},exiting:{opacity:0,height:0,visibility:"visible"},exited:{opacity:0,height:0,visibility:"hidden"}};return(0,o.tZ)(u.ZP,{nodeRef:m,timeout:h,in:d,children:function(e){return(0,o.tZ)(l.G,{innerRef:m,style:(0,r._)({},b,Z[e]),children:(0,o.tZ)(l.G,{innerRef:v,children:c})})}})}},14186:function(e,t,n){var r,i,o,a;n.d(t,{a:function(){return i},k:function(){return r}}),(o=r||(r={})).Intro="intro",o.Deployment="deployment",o.DeploymentInProgress="deployment_in_progress",o.Analytics="analytics",o.Logs="logs",o.Settings="settings",o.ReservedVMTierSelection="reserved_vm_tier_selection",o.AutoscaleMachineConfiguration="autoscale_machine_configuration",(a=i||(i={})).SendDeploymentLifecycleCommand="send_deployment_lifecycle_command",a.ChangeView="change_view"},59121:function(e,t,n){n.d(t,{E:function(){return r},c:function(){return i}});var r="Procfile";function i(e){var t={};return e.split("\n").forEach(function(e){if(""!==e){var n=e.match(/^([A-Za-z0-9_]+):\s*(.+)$/);if(n){var r=n[2].trim().split(" ");t[n[1]]={command:r[0],options:r.slice(1)}}}}),t}},69470:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(43429);function i(){return(0,r.useMemo)(function(){return function(){if("undefined"==typeof document)return!1;var e=document.createElement("input");return"webkitdirectory"in e||"mozdirectory"in e||"msdirectory"in e||"odirectory"in e||"directory"in e}()},[])}},13225:function(e,t,n){var r=n(43429);t.Z=function(e,t,n){r.useEffect(function(){var t=setTimeout(e,n);return function(){clearTimeout(t)}},t)}},62789:function(e,t,n){n.d(t,{f6:function(){return c},oj:function(){return l},xZ:function(){return u}});var r=n(32477),i=n(43429),o=n(54916);function a(e){var t=(0,r._)(i.useState(!1),2),n=t[0],a=t[1],l=(0,o.Z)().dotReplit;return i.useEffect(function(){var t=!1;return l.getConfig().then(function(n){t||n.error||n.config.language!==e||a(!0)}),function(){t=!0}},[e,l]),n}function l(){return a("kaboom")}function c(){return a("kaboomdraw")}var s=/^draw.[tj]s$/;function u(e){return c()&&!!(null==e?void 0:e.match(s))}},85172:function(e,t,n){n.d(t,{v:function(){return d}});var r=n(45903),i=n(93295),o=n(23982),a=n(77393);function l(){var e=(0,i._)(["\n  query ReplTeamOrgSettings($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        owner {\n          __typename\n          ... on Team {\n            id\n            organization {\n              id\n              isAiEnabled\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return l=function(){return e},e}var c={},s=(0,o.Ps)(l()),u=n(50782);function d(){var e,t,n,i,o=(n={variables:{replId:(0,u.Z)()}},i=(0,r._)({},c,n),a.a(s,i)).data;return{isTeamWithAiDisabled:(null==o?void 0:o.repl.__typename)==="Repl"&&(null===(e=o.repl.owner)||void 0===e?void 0:e.__typename)==="Team"&&(null===(t=o.repl.owner.organization)||void 0===t?void 0:t.isAiEnabled)===!1}}},76433:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(94106),i=n.n(r),o=n(54916),a=n(43429),l=n(30084),c=n(21557),s=n(56337),u="You have unsaved changes";function d(){var e=(0,s.Z)(),t=(0,o.Z)().fs,n=(0,r.useRouter)(),d=(0,a.useRef)(!1),f=(0,a.useCallback)(function(){if(!e&&!d.current&&t.getStatus()!==l.kO.Clean&&!window.confirm(u))throw i().events.emit("routeChangeError"),Error("Abort route change. Please ignore this error.")},[t,e]);return(0,a.useEffect)(function(){function r(n){if(!e&&!d.current&&t.getStatus()!==l.kO.Clean)return n.preventDefault(),n.returnValue=u,u}return window.addEventListener("beforeunload",r),c.gn||n.events.on("routeChangeStart",f),function(){window.removeEventListener("beforeunload",r),c.gn||n.events.off("routeChangeStart",f)}},[n.events,t,f,e]),function(e){return d.current=e}}},31147:function(e,t,n){n.d(t,{Z:function(){return m}});var r=n(32477),i=n(43429),o=n(45903),a=n(93295),l=n(23982),c=n(72986);function s(){var e=(0,a._)(["\n  mutation ReplFsUpdated($replId: String!) {\n    updateReplTimeUpdated(id: $replId) {\n      ... on Repl {\n        id\n        timeUpdated\n      }\n    }\n  }\n"]);return s=function(){return e},e}var u={},d=(0,l.Ps)(s()),f=n(25202),h=n(66349),p=n(54916);function m(){var e,t=(0,r._)((e=(0,o._)({},u,void 0),c.D(d,e)),1)[0],n=(0,p.Z)().fs,a=(0,h.Z)(),l=null==a?void 0:a.currentUserPermissions.containerWrite,s=null==a?void 0:a.id;(0,i.useEffect)(function(){if(l&&s){var e=(0,f.Z)(function(){return t({variables:{replId:s}})},{wait:6e4,maxWait:6e5}),r=n.onStatusChange(function(){e()});return function(){e.isScheduled()&&e.flush(),r()}}},[n,s,l,t])}},12435:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(32477),i=n(21289),o=n(43429),a=n(6187),l=n(45903),c=n(25e3),s=function(e){return/\s/.test(e)};function u(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=(0,r._)(o.useState(null),2),a=i[0],u=i[1],d=o.useCallback(u,[u]),f=o.useRef(t);o.useEffect(function(){f.current=t},[t]);var h=(0,r._)(o.useState(null),2),p=h[0],m=h[1];return o.useEffect(function(){if(a){var e=function(){var e=a.value,t=a.selectionStart;if(!t){m(null);return}var n=1===t||s(e[t-2]||""),r=e.length?e[t-1]:null;m(function(i){if(i&&(t<i.index||0===t))return null;if(!r||!i&&!n)return i;var o=f.current.includes(r);return i||o?i?s(r)?null:(0,c._)((0,l._)({},i),{text:e.slice(i.index,t)}):{index:t,text:"",match:r}:i})},t=function(){m(null)};return a.addEventListener("focus",e),a.addEventListener("keyup",e),a.addEventListener("blur",t),function(){m(null),a.removeEventListener("focus",e),a.removeEventListener("keyup",e),a.removeEventListener("blur",t)}}},[a,m]),[p,d]}function d(e){var t=o.useRef(e);o.useEffect(function(){t.current=e},[e]);var n=(0,r._)(o.useState(!1),2),l=n[0],c=n[1],s=(0,r._)(o.useState(null),2),d=s[0],f=s[1],h=(0,r._)(u.apply(void 0,(0,i._)(Object.keys(e))),2),p=h[0],m=h[1],v=o.useRef(p);o.useEffect(function(){v.current=p},[p]);var g=(0,a.Z)(p,100);return o.useEffect(function(){if(!g){f(null);return}var e=g.match,n=g.text,r=t.current[e]?t.current[e]:null;if(!r){f(null);return}var i=!1;return c(!0),r(n).then(function(e){i||v.current!==g||(c(!1),f({textTrigger:g,results:e,applySuggestion:function(e){var t=e.targetValue,n=e.suggestionValue,r=t.slice(0,g.index),i=n,o=t.slice(g.index+g.text.length);o&&o.startsWith(" ")||(i+=" ");var a=r+i+o;return{cursorIndex:(r+i).length+(o&&o.startsWith(" ")?1:0),fullValue:a}}}))}),function(){i=!0}},[g,f]),[{isLoading:l,suggestions:d},m]}},23896:function(e,t,n){n.d(t,{T:function(){return o}});var r=n(54916),i=n(16643);function o(){var e=(0,r.Z)().toolchain;return(0,i.Z)(e.configs)}},64457:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(32477),i=n(43429),o=n(2038),a=n(35614);function l(){var e=(0,i.useRef)(0),t=(0,r._)((0,i.useState)(!1),2),n=t[0],l=t[1],c=(0,o.T3)(),s=(0,o.rv)(),u=(0,a.u)();return(0,i.useEffect)(function(){var t,n=window.visualViewport;if(n){if(s){l(null!==(t=null==u?void 0:u.isShown)&&void 0!==t&&t);return}if(c){var r=function(){l(n.height<.8*e.current)};return e.current=n.height,n.addEventListener("resize",r),function(){n.removeEventListener("resize",r)}}}},[c,s,null==u?void 0:u.isShown]),n}},99672:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(45903),i=n(25e3),o=n(47507),a=n(32477),l=n(58130),c=n(54916),s=n(43429),u=n(39426);function d(e,t){var n,d,f,h,p=(n=(0,c.Z)().container,f=(d=(0,a._)((0,s.useState)(null),2))[0],h=d[1],(0,s.useEffect)(function(){if(n)return n.onConnectionStateChanged(function(){h(n.getConnectionMetadata())})},[n]),(0,s.useMemo)(function(){return f?(0,l.he)(f.token):null},[f]));(0,s.useEffect)(function(){if(e&&t){var n,a,l,c=(null===(n=e.origin)||void 0===n?void 0:n.__typename)==="Repl"?e.origin.id:null,s=(0,u.cR)(e.rootOriginReplUrl);return(0,o.Fy)((0,i._)((0,r._)({id:e.id,slug:e.slug,originId:c,roles:t.roles&&t.roles.map(function(e){return e.name}),rootOriginReplUrl:e.rootOriginReplUrl,rootOriginReplReleaseId:null===(l=e.source)||void 0===l?void 0:null===(a=l.release)||void 0===a?void 0:a.id},0!==s.length&&{languages:s}),{tokenCluster:null==p?void 0:p.cluster})),function(){(0,o.dv)()}}},[e,t,p])}},6634:function(e,t,n){n.d(t,{C:function(){return i},w:function(){return r}});var r=function(e){var t=parseInt(e.substring(1),16);return[t>>16&255,t>>8&255,255&t]},i=function(e,t,n){return"#"+e.toString(16)+t.toString(16)+n.toString(16)}},24227:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(34142),i=n(87682),o=n(19659),a=/\(copy\)( \d+)?$/,l=/\d+$/,c=n(39756);function s(e,t){return u.apply(this,arguments)}function u(){return(u=(0,r._)(function(e,t){var n,r,s,u,d,f;return(0,i.Jh)(this,function(i){switch(i.label){case 0:return n=(0,o.Il)(e),[4,t.readDir(0===n.length?c.Ql:n)];case 1:if((r=i.sent()).error)throw r.error;return s=new Set(r.children.map(function(e){return e.filename})),u=function(e,t){for(var n=(0,o.r6)(e),r=(0,o.eb)(e),i=a.test(r)?e:"".concat(r," (copy)").concat(n.length>0?".".concat(n):""),c=1;c<=t.size&&t.has(i);c++){var s=(0,o.eb)(i),u=s.split(" ");l.test(s)&&u.pop(),i="".concat(u.join(" ")," ").concat(c),n.length>0&&(i+=".".concat(n))}return i}((0,o.UO)(e),s),d=n?"".concat(n,"/").concat(u):u,[4,t.copyFile(e,d)];case 2:if((f=i.sent()).error)throw f.error;return[2,d]}})})).apply(this,arguments)}},56320:function(e,t,n){n.d(t,{Z:function(){return P}});var r=n(32477),i=n(8182);n(43429);var o=n(56596),a=n(29287),l=n(38080),c=n(18836),s=n(74833),u=n(4070),d=n(93918),f=n(76566),h=n(55534),p=n(45903),m=n(93295),v=n(23982),g=n(77393),y=n(72986);function b(){var e=(0,m._)(["\n  query MultiplayerInviteUrl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        inviteUrl\n        owner {\n          ... on User {\n            id\n          }\n          ... on Team {\n            id\n            capabilities {\n              isBusinessPlan\n              hasValidSubscription\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return b=function(){return e},e}function Z(){var e=(0,m._)(["\n  mutation MultiplayerRefreshInviteUrl($replId: String!) {\n    refreshMultiplayerInviteLink(replId: $replId) {\n      id\n      ... on Repl {\n        id\n        inviteUrl\n      }\n    }\n  }\n"]);return Z=function(){return e},e}function w(){var e=(0,m._)(["\n  mutation DeleteMultiplayerInviteUrl($replId: String!) {\n    deleteMultiplayerInviteLink(replId: $replId) {\n      ... on Repl {\n        id\n        inviteUrl\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return w=function(){return e},e}var x={},C=(0,v.Ps)(b()),_=(0,v.Ps)(Z()),S=(0,v.Ps)(w()),E=n(39390),k=n(48528),T=n(8017),R=n(88936),D=n(20573),I=n(10041),G=n(59868),B=(0,d.X)({container:[a.l0.colWithGap(12),a.l0.px(16),a.l0.pt(12),{borderTop:"solid 1px ".concat(a.TV.outlineDimmest)}],header:[a.l0.flex.row,a.l0.justify.spaceBetween],globeIconContainer:[a.l0.width(40),a.l0.height(40),a.l0.backgroundColor.accentPrimaryDimmer,a.l0.borderRadius("full"),a.l0.align.center,a.l0.justify.center],title:[a.l0.fontWeight.medium],loading:[a.l0.rowWithGap(4),a.l0.align.center],inviteUrlContainer:[a.l0.borderRadius(8),a.l0.flex.row],input:[a.l0.borderRadius(8,0,0,8),a.l0.color.foregroundDimmer],copyToClipboard:[a.l0.borderRadius(0,8,8,0)],titleGroup:[a.l0.rowWithGap(12)]}),A=function(){return(0,i.BX)(o.G,{css:B.titleGroup,children:[(0,i.tZ)(o.G,{css:B.globeIconContainer,children:(0,i.tZ)(E.Z,{color:a.TV.accentPrimaryStrongest,size:20})}),(0,i.BX)(o.G,{children:[(0,i.tZ)(s.xv,{css:B.title,id:"link-switch-label",multiline:!1,children:"Private join link"}),(0,i.tZ)(s.xv,{variant:"small",color:"dimmest",multiline:!1,children:"Anyone with this link can edit files"})]})]})};function P(e){var t,n,d,m,v,b,Z,w,E,P,N,U=e.replId,L=(0,h.Z)(),O=L.showConfirm,M=L.showError,X=(t=(0,p._)({},x,{variables:{replId:U}}),g.a(C,t)),F=X.data,W=X.loading,H=X.error,V=X.refetch,z=(0,r._)((n=(0,p._)({},x,{variables:{replId:U},onError:function(e){return M(e.message)},onCompleted:function(){return O("Join link created")}}),y.D(_,n)),2),j=z[0],q=z[1],Y=(0,r._)((d=(0,p._)({},x,{variables:{replId:U},optimisticResponse:{deleteMultiplayerInviteLink:{id:U,inviteUrl:null,__typename:"Repl"},__typename:"RootMutationType"},onError:function(e){return M(e.message)},onCompleted:function(e){if("UserError"===e.deleteMultiplayerInviteLink.__typename){M(e.deleteMultiplayerInviteLink.message);return}"Repl"===e.deleteMultiplayerInviteLink.__typename&&O("Join link deleted")}}),y.D(S,d)),2),$=Y[0],J=Y[1],K=(null==F?void 0:null===(m=F.repl)||void 0===m?void 0:m.__typename)==="Repl"?F.repl:null,Q=q.loading||J.loading,ee=(null==F?void 0:null===(v=F.repl)||void 0===v?void 0:v.__typename)==="Repl"&&(null==K?void 0:null===(b=K.owner)||void 0===b?void 0:b.__typename)==="Team",et=(null==F?void 0:null===(Z=F.repl)||void 0===Z?void 0:Z.__typename)==="Repl"&&(null==K?void 0:null===(w=K.owner)||void 0===w?void 0:w.__typename)==="Team"&&(null==K?void 0:null===(E=K.owner.capabilities)||void 0===E?void 0:E.isBusinessPlan)&&(null==K?void 0:null===(P=K.owner.capabilities)||void 0===P?void 0:P.hasValidSubscription),en=(null==F?void 0:null===(N=F.repl)||void 0===N?void 0:N.__typename)==="Repl"&&(null==K?void 0:K.inviteUrl)?window.location.origin+(null==K?void 0:K.inviteUrl):null;return W||ee&&!et?null:H?(0,i.BX)(o.G,{css:B.container,children:[(0,i.BX)(o.G,{css:B.header,children:[(0,i.tZ)(A,{}),(0,i.tZ)(u.r,{isSelected:!1,isDisabled:!0,"aria-labelledby":"link-switch-label"})]}),(0,i.tZ)(f.u,{css:[a.l0.textAlign.left],icon:(0,i.tZ)(D.Z,{color:a.TV.accentNegativeStrongest}),colorway:"negative",text:"Error loading join link. Click here to try again, or contact support.",onClick:function(){return V({replId:U})}})]}):(0,i.BX)(o.G,{css:B.container,children:[(0,i.BX)(o.G,{css:B.header,children:[(0,i.tZ)(A,{}),W?(0,i.BX)(o.G,{css:B.loading,children:[(0,i.tZ)(R.Z,{color:a.TV.foregroundDimmer}),(0,i.tZ)(s.xv,{color:"dimmer",multiline:!1,children:"Loading..."})]}):(0,i.tZ)(u.r,{isSelected:!!en,isDisabled:Q,onChange:function(e){Q||(e?j():$())},"aria-labelledby":"link-switch-label"})]}),!W&&en?(0,i.BX)(i.HY,{children:[(0,i.BX)(l.Tg,{css:B.inviteUrlContainer,children:[(0,i.tZ)(c.II,{type:"url",readOnly:!0,disabled:!0,value:Q?"Loading...":en,css:B.input}),(0,i.tZ)(k.m,{textToCopy:en,onClick:function(){en?((0,I.Z)(en),(0,G.j)(G.U3.JOIN_LINK_COPIED,{replId:null==K?void 0:K.id,isTeamRepl:ee,source:"replEnvironment"}),O("Link copied")):M("Could not copy link")},tooltip:"Copied to clipboard",text:"Copy join link",iconLeft:(0,i.tZ)(T.Z,{}),css:B.copyToClipboard,colorway:"primary",disabled:Q})]}),(0,i.tZ)(o.G,{children:(0,i.BX)(s.xv,{color:"dimmer",variant:"small",multiline:!1,children:["Want to revoke access to this link?"," ",(0,i.tZ)("a",{css:a.l0.linkStyle,role:"button",tabIndex:0,onKeyDown:function(e){"Enter"!==e.key||(e.preventDefault(),Q||j())},onClick:function(e){e.preventDefault(),Q||j()},children:"Generate a new link"})]})})]}):null]})}},70712:function(e,t,n){n.d(t,{Jh:function(){return C},RJ:function(){return k},U:function(){return w},dE:function(){return g},mH:function(){return b},z8:function(){return S}});var r=n(45903),i=n(93295),o=n(23982),a=n(77393),l=n(72986);function c(){var e=(0,i._)(["\n  fragment MultiplayerManagerUser on User {\n    id\n    image\n    username\n    url\n  }\n"]);return c=function(){return e},e}function s(){var e=(0,i._)(["\n  fragment MultiplayerManagerEmailInviteReplPermission on ReplPermission {\n    id\n    type\n    user {\n      id\n      image\n      username\n      url\n    }\n  }\n"]);return s=function(){return e},e}function u(){var e=(0,i._)(["\n  query MultiplayerManager($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        isOwner\n        multiplayers {\n          ...MultiplayerManagerUser\n        }\n        currentUserPermissions {\n          editMultiplayers\n        }\n        multiplayerInvites {\n          email\n          type\n        }\n      }\n    }\n    currentUser {\n      id\n      isSubscribed\n    }\n  }\n  ","\n"]);return u=function(){return e},e}function d(){var e=(0,i._)(["\n  mutation MultiplayerManagerAddMultiplayerUser(\n    $replId: String!\n    $username: String!\n    $type: String!\n  ) {\n    addMultiplayerUser(replId: $replId, username: $username, type: $type) {\n      id\n      type\n      user {\n        ...MultiplayerManagerUser\n      }\n      repl {\n        id\n        multiplayers {\n          ...MultiplayerManagerUser\n        }\n        multiplayerInvites {\n          email\n          type\n        }\n      }\n    }\n  }\n  ","\n"]);return d=function(){return e},e}function f(){var e=(0,i._)(["\n  mutation MultiplayerManagerRemoveMultiplayerUser(\n    $replId: String!\n    $username: String!\n  ) {\n    removeMultiplayerUser(replId: $replId, username: $username) {\n      id\n      user {\n        id\n        ...MultiplayerManagerUser\n      }\n      repl {\n        id\n        multiplayers {\n          ...MultiplayerManagerUser\n        }\n      }\n    }\n  }\n  ","\n"]);return f=function(){return e},e}function h(){var e=(0,i._)(["\n  mutation MultiplayerManagerCreateMultiplayerInvite(\n    $replId: String!\n    $email: String!\n    $type: String!\n  ) {\n    createMultiplayerInvite2(replId: $replId, email: $email, type: $type) {\n      ... on MultiplayerInvite {\n        email\n        repl {\n          id\n          multiplayers {\n            ...MultiplayerManagerUser\n          }\n          multiplayerInvites {\n            email\n            type\n          }\n        }\n      }\n      ... on UserError {\n        message\n      }\n      ... on ReplPermission {\n        id\n        ...MultiplayerManagerEmailInviteReplPermission\n      }\n    }\n  }\n  ","\n  ","\n"]);return h=function(){return e},e}function p(){var e=(0,i._)(["\n  mutation MultiplayerManagerDeleteMultiplayerInvite(\n    $replId: String!\n    $email: String!\n  ) {\n    deleteMultiplayerInvite(replId: $replId, email: $email) {\n      ... on MultiplayerInvite {\n        email\n        type\n        repl {\n          id\n          multiplayers {\n            ...MultiplayerManagerUser\n          }\n          multiplayerInvites {\n            email\n            type\n          }\n        }\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return p=function(){return e},e}var m={},v=(0,o.Ps)(c()),g=(0,o.Ps)(s()),y=(0,o.Ps)(u(),v);function b(e){var t=(0,r._)({},m,e);return a.a(y,t)}var Z=(0,o.Ps)(d(),v);function w(e){var t=(0,r._)({},m,e);return l.D(Z,t)}var x=(0,o.Ps)(f(),v);function C(e){var t=(0,r._)({},m,e);return l.D(x,t)}var _=(0,o.Ps)(h(),v,g);function S(e){var t=(0,r._)({},m,e);return l.D(_,t)}var E=(0,o.Ps)(p(),v);function k(e){var t=(0,r._)({},m,e);return l.D(E,t)}},14267:function(e,t,n){n.d(t,{_U:function(){return R},ln:function(){return D}});var r=n(32477),i=n(21289),o=n(8182),a=n(4773),l=n(55534),c=n(2038),s=n(59868),u=n(44343),d=n(3630),f=n(38080),h=n(74833),p=n(56596),m=n(29287),v=n(1128),g=n(88936),y=n(94106),b=n(43429),Z=n(94376),w=n(70712),x=n(6836),C=n(58091),_=n(10602),S=n.n(_),E=n(30983),k=n(97615);function T(e,t){return t.some(function(t){return t.id===e})}var R={root:[m.l0.color.foregroundDefault,m.l0.flex.column,m.l0.colWithGap(12),m.l0.align.stretch,m.l0.flex.growAndShrink(1)],header:[m.l0.flex.row,m.l0.justify.spaceBetween,m.l0.align.center,m.l0.px(16)],header_mobile:[m.l0.px(0)],titleContainer:[m.l0.flex.row,m.l0.rowWithGap(4),m.l0.align.center],limitsContainer:[m.l0.align.center,m.l0.rowWithGap(8)],loading:[m.l0.rowWithGap(4),m.l0.align.center,m.l0.flex.grow(1),m.l0.justify.center],measureBar:[m.l0.height(8),m.l0.width(60)],searchContainer:[m.l0.px(16),m.l0.position.relative,m.l0.maxHeight(32)],userList:[m.l0.flex.column,m.l0.colWithGap(16),m.l0.scrollbar.thin,m.l0.position.relative,m.l0.overflowY("auto"),m.l0.flex.growAndShrink(1),m.l0.pb(8),{maxHeight:300,"::-webkit-scrollbar-thumb":[m.l0.backgroundColor.backgroundHighest,m.l0.borderRadius(4)],scrollbarColor:"".concat(m.TV.backgroundDefault," ").concat(m.TV.backgroundHighest)}],userGroup:{root:[m.l0.colWithGap(8)],titleContainer:[m.l0.rowWithGap(4),m.l0.align.center,m.l0.px(16)],title:[m.l0.fontWeight.medium]},emptyContainer:[m.l0.position.relative,m.l0.flex.row,m.l0.rowWithGap(12),m.l0.py(64),m.l0.center,m.l0.px(16),{maxHeight:220,borderBottom:"solid 1px ".concat(m.TV.outlineDimmest)}]},D=function(e){var t=e.title,n=e.count,r=e.color,i=e.tooltip;return(0,o.BX)(p.G,{css:R.userGroup.titleContainer,children:[(0,o.tZ)(v.Z,{color:r,size:6}),(0,o.tZ)(h.xv,{variant:"small",css:R.userGroup.title,multiline:!1,children:t}),(0,o.tZ)(h.xv,{multiline:!1,variant:"small",color:"dimmest",css:R.userGroup.title,children:n}),i?(0,o.tZ)(E.u,{tooltip:i,children:(0,o.tZ)(k.Z,{})}):null]})};t.ZP=function(e){var t=e.replId,n=e.handleUpgradeTriggered,v=(0,y.useRouter)(),_=(0,c.Vg)(v),E=(0,l.Z)(),k=E.showConfirm,I=E.showError,G=(0,C.aG)(),B=(0,w.mH)({variables:{replId:t},pollInterval:8e3}),A=B.data,P=B.loading,N=(0,r._)((0,w.U)({onCompleted:function(e){var n,r=null===(n=e.addMultiplayerUser.user)||void 0===n?void 0:n.username;r&&((0,s.j)(s.U3.MULTIPLAYER_INVITED,{replId:t,inviteMethod:"username"}),k("Added @".concat(r)))}}),2),U=N[0],L=N[1],O=(0,r._)((0,w.z8)({update:function(e,n){var r=null===(a=n.data)||void 0===a?void 0:a.createMultiplayerInvite2;if(r){if("UserError"===r.__typename){I(r.message);return}if("MultiplayerInvite"===r.__typename){var o=r.email;(0,s.j)(s.U3.MULTIPLAYER_INVITED,{replId:t,inviteMethod:"email"}),k("Invited ".concat(o," via email"));return}if("ReplPermission"===r.__typename){e.modify({id:e.identify({__typename:"Repl",id:t}),fields:{permissions:function(t){var n=e.writeFragment({data:r,fragment:w.dE});return(0,i._)(t).concat([n])}}});var a,l,c=null===(l=r.user)||void 0===l?void 0:l.username;if(!c)return;(0,s.j)(s.U3.MULTIPLAYER_INVITED,{replId:t,inviteMethod:"email"}),k("Invited @".concat(c))}}}}),2),M=O[0],X=O[1];(0,b.useEffect)(function(){var e=L.error||X.error;if(e){if(e.message.includes("reached the limit")){_?I("You have reached the invite limit for a free account, visit https://replit.com/pricing to upgrade."):n&&n(!0);return}I(e.message)}},[L.error,X.error,I,_,n]);var F=(null==A?void 0:A.repl.__typename)==="Repl"?A.repl:null,W=null==A?void 0:A.currentUser,H=null==F?void 0:F.multiplayers.reduce(function(e,t){return(0,i._)(e).concat([t.username])},[]),V=(null==F?void 0:F.currentUserPermissions.editMultiplayers)||!1,z=!!(F&&!F.multiplayers.length&&!F.multiplayerInvites.length),j=null==F?void 0:F.multiplayers.filter(function(e){return e.id!==(null==W?void 0:W.id)}),q=null==j?void 0:j.filter(function(e){return e&&T(e.id,G)}),Y=null==j?void 0:j.filter(function(e){return e&&!T(e.id,G)}),$=j?j.length:null;return(0,o.BX)(f.Tg,{background:"default",css:R.root,children:[(0,o.BX)(p.G,{css:[R.header,_&&R.header_mobile],children:[(0,o.tZ)(p.G,{css:R.titleContainer,children:(0,o.tZ)(h.xv,{variant:"subheadDefault",multiline:!1,children:"Multiplayers"})}),(0,o.BX)(p.G,{css:R.limitsContainer,children:[P?(0,o.BX)(p.G,{css:R.loading,children:[(0,o.tZ)(g.Z,{color:m.TV.foregroundDimmer}),(0,o.tZ)(h.xv,{color:"dimmer",multiline:!1,children:"Loading..."})]}):null,null===$||(null==W?void 0:W.isSubscribed)?null:(0,o.BX)(o.HY,{children:[(0,o.BX)(h.xv,{variant:"small",color:"dimmest","aria-hidden":!0,multiline:!1,children:[$," / ",Z.z]}),(0,o.tZ)(d.J,{css:R.measureBar,total:Z.z,current:$,tooltip:"".concat(Z.z-$," free editors remaining")})]}),P||(null==W?void 0:W.isSubscribed)||_?null:(0,o.tZ)(a.Z,{size:"small",context:"workspace_multiplayer_header",onClickCallback:function(){n&&n(!0)},onCancel:function(){n&&n(!1)}})]})]}),V&&H&&F?(0,o.tZ)(p.G,{css:R.searchContainer,children:(0,o.tZ)(u.Z,{existingUsernames:H,onSubmit:function(e){if(!P||(null==W?void 0:W.isSubscribed)){if(S()(e)&&!X.loading){M({variables:{replId:t,email:e,type:"rw"}});return}L.loading||U({variables:{username:e,replId:t,type:"rw"}})}}})}):null,z?(0,o.tZ)(p.G,{css:R.emptyContainer,children:(0,o.tZ)(p.G,{children:(0,o.tZ)(h.xv,{variant:"subheadDefault",color:"dimmer",multiline:!1,children:"No one else is here"})})}):(0,o.BX)(f.Tg,{css:R.userList,children:[(null==q?void 0:q.length)?(0,o.BX)(p.G,{css:R.userGroup.root,children:[(0,o.tZ)(D,{title:"Online",count:q.length||0,color:m.TV.greenStrongest}),q.map(function(e){return e?(0,o.tZ)(x.Z,{isPendingInvitation:!1,replId:t,canEditMultiplayers:V,user:e},e.id):null})]}):null,(null==Y?void 0:Y.length)?(0,o.BX)(p.G,{css:R.userGroup.root,children:[(0,o.tZ)(D,{title:"Offline",count:Y.length||0,color:m.TV.outlineStrongest}),null==Y?void 0:Y.map(function(e){return e?(0,o.tZ)(x.Z,{canEditMultiplayers:V,isPendingInvitation:!1,user:e,replId:t},e.id):null})]}):null,(null==F?void 0:F.multiplayerInvites.length)?(0,o.BX)(p.G,{css:R.userGroup.root,children:[(0,o.tZ)(D,{title:"Pending Invitations",count:(null==F?void 0:F.multiplayerInvites.length)||0,color:m.TV.outlineStrongest}),F.multiplayerInvites.map(function(e){return(0,o.tZ)(x.Z,{canEditMultiplayers:V,replId:t,isPendingInvitation:!0,email:e.email},e.email)})]}):null]})]})}},6836:function(e,t,n){var r=n(32477),i=n(8182),o=n(46056),a=n(15146),l=n(74833),c=n(54254),s=n(56596),u=n(93918),d=n(29287),f=n(17216),h=n(58719),p=n(50862),m=n(36010),v=n.n(m),g=n(70712),y=n(55534),b=(0,u.X)({root:[d.l0.px(16),d.l0.py(4),d.l0.flex.row,d.l0.rowWithGap(8),d.l0.align.center,d.l0.cursor.default,d.l0.justify.spaceBetween],userContainer:d.l0.color.foregroundDefault,userContainer_pending:[d.l0.flex.grow(1),d.l0.flex.row,d.l0.rowWithGap(8),d.l0.align.center,{fontStyle:"italic"}],permissionsContainer:[d.l0.flex.row,d.l0.rowWithGap(8),d.l0.align.center]});t.Z=function(e){var t,n=e.isPendingInvitation,u=e.canEditMultiplayers,m=e.replId,Z=(0,y.Z)(),w=Z.showError,x=Z.showConfirm,C=(0,r._)((0,g.Jh)({onError:function(e){return w(e.message)},onCompleted:function(e){var t,n=null===(t=e.removeMultiplayerUser.user)||void 0===t?void 0:t.username;n&&x("".concat(n," removed"))}}),2),_=C[0],S=C[1],E=(0,r._)((0,g.RJ)({onError:function(e){return w(e.message)},onCompleted:function(e){if("UserError"===e.deleteMultiplayerInvite.__typename){w(e.deleteMultiplayerInvite.message);return}if("MultiplayerInvite"===e.deleteMultiplayerInvite.__typename){var t=e.deleteMultiplayerInvite.email;x("Invite canceled for ".concat(t))}}}),2),k=E[0],T=E[1],R=!n,D=R?(0,i.tZ)(o.Z,{size:"m",url:e.user.image,username:e.user.username,fullName:e.user.fullName}):(0,i.tZ)(f.Z,{color:d.TV.outlineDefault,size:32}),I=R?e.user.username:e.email;return(0,i.BX)(s.G,{css:b.root,children:[R?(0,i.tZ)(p.Z,{username:e.user.username,children:(0,i.tZ)(v(),{legacyBehavior:!0,href:"/@".concat(e.user.username),passHref:!0,children:(0,i.tZ)(s.G,{tag:"a",css:b.userContainer,children:(0,i.tZ)(c.n,{username:e.user.username,src:null!==(t=e.user.image)&&void 0!==t?t:null})})})}):(0,i.BX)(s.G,{css:[b.userContainer_pending],children:[D,(0,i.tZ)(l.xv,{color:R?"default":"dimmest",multiline:!1,children:I})]}),(0,i.BX)(s.G,{css:b.permissionsContainer,children:[(0,i.tZ)(l.xv,{color:"dimmest",variant:"small",multiline:!1,children:e.isPendingInvitation?"Invited":"Can edit"}),u?(0,i.tZ)(a.hU,{alt:R?"Remove member":"Cancel invitation",onClick:function(){!u||S.loading||T.loading||(R?_({variables:{replId:m,username:e.user.username}}):k({variables:{replId:m,email:e.email}}))},children:(0,i.tZ)(h.Z,{size:12})}):null]})]})}},44343:function(e,t,n){n.d(t,{Z:function(){return E}});var r=n(45903),i=n(25e3),o=n(32477),a=n(8182),l=n(46056),c=n(6187),s=n(55534),u=n(1498),d=n(18836),f=n(38080),h=n(74833),p=n(56596),m=n(93918),v=n(29287),g=n(32377),y=n(88936),b=n(63130),Z=n(43429),w=n(10981),x=n(10602),C=n.n(x),_=n(57574),S=(0,m.X)({form:[v.l0.align.start,v.l0.display.flex,v.l0.rowWithGap(8),v.l0.width("100%")],searchContainer:[v.l0.position.relative,v.l0.flex.growAndShrink(1)],dropdownMenu:[v.l0.borderRadius(8),v.l0.overflow("hidden"),v.l0.mt(2),v.l0.zIndex(2),v.l0.border({color:v.TV.outlineDimmer,width:1,style:"solid"}),v.l0.maxHeight(280),v.l0.overflowY("auto"),v.l0.scrollbar.thin,{scrollbarColor:v.TV.backgroundHigher+" "+v.TV.backgroundHighest,"&::-webkit-scrollbar-thumb":{backgroundColor:v.TV.backgroundHighest}}],result:[v.l0.p(8),v.l0.rowWithGap(8),v.l0.justify.spaceBetween,v.l0.align.center,v.l0.cursor.pointer],result_active:[v.l0.backgroundColor.accentPrimaryDimmer],userContainer:[v.l0.rowWithGap(8),v.l0.align.center],loadingContainer:[v.l0.align.center,v.l0.m(8),v.l0.rowWithGap(8),v.l0.align.center],emptyText:[v.l0.m(8)]});function E(e){var t=e.onSubmit,n=e.existingUsernames,m=e.isDisabled,x=e.onChange,E=e.placeholder,k=(0,o._)(Z.useState(""),2),T=k[0],R=k[1],D=(0,w.U)(),I=(0,c.Z)(T.trim().replace(/^@/,""),250),G=(0,_.sk)({skip:!I||C()(T),variables:{query:I,limit:6}}),B=G.data,A=G.loading,P=G.error,N=(0,s.Z)().showError;Z.useEffect(function(){P&&N(P.message)},[P,N]);var U=null==B?void 0:B.usernameSearch,L=function(e){R(e.currentTarget.value),null==x||x(e.currentTarget.value)},O=function(e){"Enter"===e.key&&T.match(/.+@.+/)&&(t(T),R(""),e.currentTarget.blur())};return(0,a.BX)("form",{onSubmit:function(e){e.preventDefault(),t(T),R("")},css:S.form,children:[(0,a.tZ)(b.ZP,{onChange:function(e){e&&R(e.username)},itemToString:function(e){return(null==e?void 0:e.username)||""},initialHighlightedIndex:0,defaultHighlightedIndex:0,children:function(e){var t=e.getInputProps,o=e.getItemProps,c=e.getMenuProps,s=e.isOpen,u=e.highlightedIndex,m=e.getRootProps;return(0,a.BX)(p.G,(0,i._)((0,r._)({css:S.searchContainer},m({refKey:"innerRef"})),{children:[(0,a.tZ)(d.II,(0,r._)({id:D("username-search")},t({ref:null,value:T,onChange:L,placeholder:null!=E?E:"Add people by username or email",autoComplete:"off",onKeyDown:O}))),s?(0,a.BX)(p.G,{children:[U&&U.length?(0,a.tZ)(f.Tg,(0,i._)((0,r._)({elevated:!0,css:S.dropdownMenu,tag:"ul"},c({refKey:"innerRef"})),{children:U.map(function(e,t){return(0,a.BX)(p.G,(0,i._)((0,r._)({tag:"li"},o({item:e,index:t})),{css:[S.result,t===u&&S.result_active],children:[(0,a.BX)(p.G,{css:S.userContainer,children:[(0,a.tZ)(l.Z,{size:"m",url:e.image,username:e.username,fullName:e.fullName}),(0,a.tZ)(h.xv,{multiline:!1,children:e.username})]}),n.includes(e.username)?(0,a.tZ)(p.G,{children:(0,a.tZ)(g.Z,{color:v.TV.accentPositiveStronger})}):null]}),t)})})):null,A?(0,a.tZ)(f.Tg,{elevated:!0,css:S.dropdownMenu,children:(0,a.BX)(p.G,{css:S.loadingContainer,children:[(0,a.tZ)(y.Z,{}),(0,a.tZ)(h.xv,{color:"dimmer",multiline:!1,children:"Loading…"})]})}):null,U&&0===U.length?(0,a.tZ)(f.Tg,{elevated:!0,css:S.dropdownMenu,children:(0,a.BX)(h.xv,{css:S.emptyText,color:"dimmer",multiline:!1,children:['No results found for "',T,'"']})}):null]}):null]}))}}),(0,a.tZ)(p.G,{children:(0,a.tZ)(u.zx,{colorway:"primary",type:"submit",disabled:m||!T,text:"Invite"})})]})}},68866:function(e,t,n){n.d(t,{s:function(){return eJ}});var r=n(8182),i=n(41588),o=n(59868),a=n(89960),l=n(34142),c=n(45903),s=n(25e3),u=n(32477),d=n(87682),f=n(64697),h=n(60814),p=n(84460),m=n(88211),v=n(7755),g=n(29287),y=n(74833),b=n(56596),Z=n(74094);function w(e){var t=e.amount,n=e.includeUsd,i=e.variant,o=e.color,a=void 0===o?"default":o,l=(0,v.$E)(t),c=(0,v.H2)(t);return(0,r.BX)(b.G,{css:[g.l0.rowWithGap(2),g.l0.align.center],children:[(0,r.tZ)(Z.Z,{size:"small"===i?12:16,css:[y.E_[a]]}),(0,r.BX)(y.xv,{variant:i,color:a,multiline:!1,children:[c,n?" (".concat(l,")"):""]})]})}var x=n(32450),C=n(75582),_={boost:C.kL.Boost,hosting_tier:C.kL.HostingTier},S={boost_2cpu_2ram:C.s2.Boost_2cpu_2ram,boost_4cpu_4ram:C.s2.Boost_4cpu_4ram,boost_8cpu_8ram:C.s2.Boost_8cpu_8ram,boost_16cpu_16ram:C.s2.Boost_16cpu_16ram,hosting_tier_e2_micro:C.s2.HostingTierE2Micro,hosting_tier_e2_small:C.s2.HostingTierE2Small,hosting_tier_e2_medium:C.s2.HostingTierE2Medium,hosting_tier_n1_custom_1_4:C.s2.HostingTierN1Custom_1_4,hosting_tier_e2_standard_2:C.s2.HostingTierE2Standard_2,hosting_tier_e2_standard_4:C.s2.HostingTierE2Standard_4},E=n(28585),k=n(90777),T=n(1498),R=n(68514),D=n(15146),I=n(93918),G=n(52924),B=n(88936),A=n(99656),P=n(91685),N=n(88817),U=n(43429),L=n(40699),O=n(98965),M=n(93295),X=n(23982),F=n(33248),W=n(19762),H=n(66496);function V(){var e=(0,M._)(["\n  query RefetchPowerUps($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        ...MultiBoostReplPowerUps\n        ...ReplPowerUpMutationReturnFields\n      }\n    }\n    currentUser {\n      ...PowerUpMutationReturnFields\n    }\n  }\n  ","\n  ","\n  ","\n"]);return V=function(){return e},e}var z={},j=(0,X.Ps)(V(),F.s1,W.sh,W.E_),q=function(e){var t,n=e.productCost,r=e.cyclesBalance;if(n<=r)return{cyclesToBePurchased:0,cyclesBalanceAfterUpgrade:r,excessPurchaseExplanation:"no-purchase"};var i=n-r,o="no-excess";i>=L.gp?(t=i,o="no-excess"):(t=L.gp,o="minimum");var a=r+t-n;return{cyclesToBePurchased:t,cyclesBalanceAfterUpgrade:a,excessPurchaseExplanation:o}};function Y(e){var t=e.cycles,n=e.description;return(0,r.BX)(b.G,{css:[g.l0.rowWithGap(8),g.l0.align.center],children:[(0,r.tZ)(y.xv,{color:"dimmest",multiline:!1,children:n}),(0,r.tZ)(R.R,{}),(0,r.tZ)(w,{amount:t,includeUsd:!1,color:"dimmest"})]})}var $=(0,I.X)({iconBackground:[g.l0.width(40),g.l0.height(40),g.l0.borderRadius(8),g.l0.justify.center,g.l0.align.center,g.l0.backgroundColor.blueDimmer],loadingContainer:[g.l0.justify.center,g.l0.align.center,g.l0.minHeight(80)]});function J(e){var t=e.powerUpCategory,n=e.cyclesCost,o=e.description,a=i.S0[t];return(0,r.tZ)(b.G,{css:[g.l0.colWithGap(16)],children:(0,r.BX)(b.G,{css:[g.l0.flex.row,g.l0.justify.spaceBetween],children:[(0,r.BX)(b.G,{css:[g.l0.rowWithGap(8),g.l0.align.center],children:[(0,r.tZ)(b.G,{css:$.iconBackground,children:(0,r.tZ)(a.iconComponent,{size:24})}),(0,r.BX)(b.G,{css:[g.l0.px(8),g.l0.py(2),g.l0.colWithGap(4),g.l0.justify.spaceBetween],children:[(0,r.tZ)(y.xv,{variant:"subheadDefault",multiline:!1,children:a.name}),(0,r.tZ)(y.xv,{variant:"small",color:"dimmer",multiline:!1,children:o})]})]}),(0,r.BX)(b.G,{css:[g.l0.px(8),g.l0.py(2),g.l0.colWithGap(4),g.l0.justify.spaceBetween,g.l0.align.end],children:[(0,r.tZ)(w,{amount:n,includeUsd:!0}),(0,r.BX)(y.xv,{variant:"small",color:"dimmer",multiline:!1,children:["per / ",a.orderDuration]})]})]})})}function K(e){var t,n,o,a=e.product,v=e.goToCheckoutSuccess,Z=e.goToNewPaymentMethodForm,w=(0,f.useStripe)(),C=(0,h.Z)({forceFetch:!0}),I=C.cycles,M=C.loading,X=(0,k.Q)(),F=X.paymentMethod,W=X.loading,V=i.S0[a.powerUpCategory],K=i.$[a.powerUpSku].provisionDescription,Q=(0,u._)((0,U.useState)(null),2),ee=Q[0],et=Q[1],en=(0,u._)((0,U.useState)(!1),2),er=en[0],ei=en[1],eo=(0,u._)((0,U.useState)(!1),2),ea=eo[0],el=eo[1],ec=(0,E.M)().createCheckoutSession,es=(0,u._)((t={variables:{replId:a.replId}},n=(0,c._)({},z,t),H.t(j,n)),1)[0],eu=(0,O.B)().startPolling,ed=(0,p.kr)({defaultAutoRefillEnabledValue:!0}),ef=ed.autoRefillEnabled,eh=ed.autoRefillMonthlyBudget,ep=ed.autoRefillHasError,em=ed.autoRefillHasChanged,ev=ed.cardAutoRefillPreferencesProps,eg=q({productCost:a.cyclesCostNow,cyclesBalance:null!=I?I:0}),ey="This will purchase ".concat(eg.cyclesToBePurchased.toLocaleString()," Cycles for ").concat((0,L.qJ)(eg.cyclesToBePurchased)," and activate your ").concat(V.name,".");"minimum"===eg.excessPurchaseExplanation&&(ey="This will purchase the minimum purchase amount of ".concat(eg.cyclesToBePurchased.toLocaleString()," Cycles for ").concat((0,L.qJ)(eg.cyclesToBePurchased)," and activate your ").concat(V.name,"."));var eb=(0,u._)((0,U.useState)("Processing..."),2),eZ=eb[0],ew=eb[1],ex=(0,N.i)(),eC=ex.isPurchaseAllowed,e_=ex.reasonPurchaseNotAllowed;if(!eC&&e_)return(0,r.tZ)(P.Z,{reason:e_});var eS=function(){ei(!1)},eE=(o=(0,l._)(function(){return(0,d.Jh)(this,function(e){switch(e.label){case 0:var t;if(ei(!0),null==F)throw Error("paymentMethod is null");if(null==w)throw Error("stripe is null");return ew("Checking out..."),[4,ec({input:{cyclesQuantity:eg.cyclesToBePurchased,postPurchasePowerUp:{replPowerUp:{replId:a.replId,sku:S[a.powerUpSku],type:_[a.powerUpCategory]}},cyclesAutoRefillConfiguration:em?{enabled:ef,monthlyBudget:eh}:null},onError:function(e){et(e),eS()},onSucceed:(t=(0,l._)(function(e){var t,n;return(0,d.Jh)(this,function(r){switch(r.label){case 0:return ew("Processing payment..."),[4,w.confirmCardPayment(e.clientSecret)];case 1:if(t=r.sent().error)return et(null!==(n=t.message)&&void 0!==n?n:"An error occurred. Please try again."),eS(),[2];return ew("Provisioning Power Up..."),eu({checkoutSessionId:{checkoutSessionId:e.checkoutSessionId}.checkoutSessionId,onSucceeded:function(){el(!0),es(),v(a)},onFailed:function(){et("Payment failed. Please try again."),eS(),es()},onError:function(e){et(e),eS(),es()}}),[2]}})}),function(e){return t.apply(this,arguments)})})];case 1:return e.sent(),[2]}})}),function(){return o.apply(this,arguments)}),ek=W||M||null==I,eT=null!=F&&!ek&&!er;return(0,r.BX)(b.G,{css:[g.l0.colWithGap(16)],children:[(0,r.tZ)(J,{powerUpCategory:a.powerUpCategory,cyclesCost:L.z4[a.powerUpSku],description:K}),(0,r.tZ)(R.R,{}),ek?(0,r.tZ)(b.G,{css:$.loadingContainer,children:(0,r.tZ)(B.Z,{})}):(0,r.tZ)(b.G,{css:[g.l0.colWithGap(12),g.l0.align.start],children:null==F?(0,r.BX)(r.HY,{children:[(0,r.tZ)(y.xv,{color:"dimmer",children:"You need to add a payment method to complete this purchase."}),(0,r.tZ)(T.zx,{iconLeft:(0,r.tZ)(A.Z,{}),text:"Add Payment Method",size:"big",onClick:Z,colorway:"primary",stretch:!0})]}):(0,r.tZ)(r.HY,{children:(0,r.tZ)(b.G,{css:[g.l0.colWithGap(16)],children:(0,r.BX)(b.G,{css:[g.l0.colWithGap(4)],children:[(0,r.BX)(b.G,{css:[g.l0.rowWithGap(8),g.l0.align.center],children:[(0,r.tZ)(D.hU,{alt:"Update Payment Method",onClick:Z,children:(0,r.tZ)(G.Z,{})}),(0,r.tZ)(m.R,{last4:F.last4})]}),(0,r.tZ)(b.G,{css:[g.l0.pl(24),g.l0.pr(16),g.l0.colWithGap(8)],children:(0,r.tZ)(p.OK,(0,s._)((0,c._)({},ev),{loading:ev.loading||er,showSaveButton:!1}))})]})})})}),null!==F?(0,r.BX)(r.HY,{children:[(0,r.tZ)(R.R,{}),(0,r.tZ)(y.xv,{variant:"small",css:[g.l0.color.foregroundDimmer],children:ey}),(0,r.tZ)(x.q,{isMakingPayment:!0,showSuccessState:ea,showProcessingState:er,disabled:!eT||ep,initialStateTextOverride:"Purchase ".concat(eg.cyclesToBePurchased.toLocaleString()," Cycles & Upgrade ").concat(V.name),processingStateTextOverride:eZ,size:"big",onClick:eE}),null!=ee?(0,r.tZ)(y.xv,{css:[g.l0.color.accentNegativeDefault],children:ee}):null,(0,r.BX)(b.G,{css:[g.l0.colWithGap(4)],children:[(0,r.tZ)(Y,{description:"Cycles balance after purchase",cycles:eg.cyclesToBePurchased}),(0,r.tZ)(Y,{description:"1st ".concat(V.orderDuration," of ").concat(V.name),cycles:-1*a.cyclesCostNow}),(0,r.tZ)(Y,{description:"Cycles balance after upgrade",cycles:eg.cyclesBalanceAfterUpgrade})]})]}):null]})}var Q=n(77393);function ee(){var e=(0,M._)(["\n  query CheckOutSuccess($replId: String!) {\n    currentUser {\n      id\n      cyclesAutoRefillConfiguration {\n        ... on CyclesAutoRefillConfiguration {\n          id\n          enabled\n          refillAmount\n          monthlyBudget\n        }\n        ... on UnauthorizedError {\n          message\n        }\n      }\n    }\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        owner {\n          ... on Team {\n            id\n          }\n          ... on User {\n            id\n          }\n        }\n      }\n    }\n  }\n"]);return ee=function(){return e},e}var et={},en=(0,X.Ps)(ee()),er=n(37951),ei=n(57122),eo=n(20573),ea=(0,I.X)({powerUpIconBackground:[g.l0.width(32),g.l0.height(32),g.l0.borderRadius(8),g.l0.justify.center,g.l0.align.center,g.l0.backgroundColor.blueDimmer],autoRefillIconBackground:[g.l0.width(32),g.l0.height(32),g.l0.borderRadius(8),g.l0.justify.center,g.l0.align.center,g.l0.backgroundColor.greyDimmer]});function el(e){var t,n,o,a,l,s,u,d=e.product,f=e.goToCardPreferences,p=e.goToPowerUpDetails,m=(0,h.Z)({forceFetch:!0}).cycles,v=(t={variables:{replId:d.replId}},n=(0,c._)({},et,t),Q.a(en,n)),Z=v.data,x=v.loading,C=(null==Z?void 0:null===(s=Z.currentUser)||void 0===s?void 0:null===(l=s.cyclesAutoRefillConfiguration)||void 0===l?void 0:l.__typename)==="CyclesAutoRefillConfiguration"?Z.currentUser.cyclesAutoRefillConfiguration:null,_=(null==Z?void 0:Z.repl.__typename)==="Repl"&&(null===(u=Z.repl.owner)||void 0===u?void 0:u.__typename)==="Team",S=!!(null==C?void 0:C.enabled),E=i.S0[d.powerUpCategory],k=i.$[d.powerUpSku];return(0,r.BX)(b.G,{css:[g.l0.colWithGap(16)],children:[(0,r.BX)(b.G,{css:[g.l0.rowWithGap(8),g.l0.justify.spaceBetween,g.l0.align.center],children:[(0,r.BX)(b.G,{css:[g.l0.rowWithGap(8),g.l0.align.center],children:[(0,r.tZ)(b.G,{css:ea.powerUpIconBackground,children:(0,r.tZ)(E.iconComponent,{size:20})}),(0,r.BX)(b.G,{css:[g.l0.flex.column],children:[(0,r.BX)(y.xv,{multiline:!1,children:[E.name," activated"]}),(0,r.BX)(b.G,{css:g.l0.rowWithGap(8),children:[(0,r.tZ)(y.xv,{variant:"small",color:"dimmer",multiline:!1,children:k.provisionDescription}),_?null:(0,r.BX)(b.G,{css:[g.l0.rowWithGap(4)],children:[(0,r.tZ)(w,{amount:L.z4[d.powerUpSku],includeUsd:!0,variant:"small",color:"dimmer"}),(0,r.BX)(y.xv,{variant:"small",color:"dimmer",multiline:!1,children:["/ ",E.orderDuration]})]})]})]})]}),(0,r.tZ)(y.xv,{multiline:!1,children:(0,r.tZ)("a",{role:"button",tabIndex:0,onKeyDown:function(){return p(d.powerUpCategory)},onClick:function(){return p(d.powerUpCategory)},css:[g.l0.color.foregroundDimmer,{textDecoration:"underline"}],children:"Edit"})})]}),_||x?null:(0,r.BX)(b.G,{css:[g.l0.rowWithGap(8),g.l0.justify.spaceBetween,g.l0.align.center],children:[(0,r.BX)(b.G,{css:[g.l0.rowWithGap(8),g.l0.align.center],children:[(0,r.tZ)(b.G,{css:ea.autoRefillIconBackground,children:(0,r.tZ)(ei.Z,{size:20})}),(0,r.BX)(b.G,{css:[g.l0.flex.column],children:[(0,r.BX)(y.xv,{multiline:!1,children:["Auto-Refill is"," ",(a=(o={autoRefillEnabled:S,loadingAutoRefill:x}).autoRefillEnabled,o.loadingAutoRefill?"...":a?"on":"off")]}),(0,r.tZ)(b.G,{css:g.l0.rowWithGap(4),children:null==m?(0,r.tZ)(B.Z,{}):(0,r.BX)(r.HY,{children:[(0,r.tZ)(w,{amount:m,includeUsd:!1,variant:"small",color:"dimmer"}),(0,r.tZ)(y.xv,{variant:"small",color:"dimmer",multiline:!1,children:"left"})]})})]})]}),(0,r.tZ)(y.xv,{multiline:!1,children:(0,r.tZ)("a",{role:"button",tabIndex:0,onKeyDown:function(){return f(d.powerUpCategory)},onClick:function(){return f(d.powerUpCategory)},css:[g.l0.color.foregroundDimmer,{textDecoration:"underline"}],children:"Edit"})})]}),x||S||_?null:(0,r.tZ)(er.E,{colorway:"warning",icon:(0,r.tZ)(eo.Z,{}),text:"Add a payment method and enable Auto-Refill to prevent your ".concat(E.name," Power Up from being disabled when you run out of Cycles.")})]})}var ec=n(97764),es=n(40102),eu=n(32377),ed=n(40028),ef=n(66766),eh=n(48272),ep=n(38080),em=n(51384),ev=n(66932),eg={tier:(0,em.iv)([g.l0.borderRadius(12),g.l0.colWithGap(12),g.l0.p(12)]),tierHeader:(0,em.iv)([g.l0.rowWithGap(8),g.l0.flex.grow(1),g.l0.justify.spaceBetween,g.l0.align.baseline]),tierHeaderTitle:(0,em.iv)(g.l0.rowWithGap(8)),tierHeaderCost:(0,em.iv)([g.l0.rowWithGap(4),g.l0.align.baseline]),tierFeatures:(0,em.iv)(g.l0.colWithGap(8)),tierFeature:(0,em.iv)(g.l0.rowWithGap(4),g.l0.align.center),tierPicker:(0,em.iv)([g.l0.border({color:g.TV.outlineDefault})])},ey=function(e){var t=e.selectedOption,n=e.onChange,i=e.disabled,o=L.r4[t.sku].egress,a="INCLUDED_IN_SUBSCRIPTION"!==t.cost.explanation&&"NOT_SUPPORTED_FOR_TEAMS"!==t.cost.explanation;return(0,r.BX)(ep.Tg,{elevated:!0,css:eg.tier,children:[(0,r.BX)(b.G,{css:eg.tierHeader,children:[(0,r.tZ)(b.G,{css:eg.tierHeaderTitle,children:(0,r.tZ)(y.xv,{variant:"subheadBig",multiline:!1,children:"Reserved VM"})}),(0,r.tZ)(b.G,{css:g.l0.rowWithGap(4),children:a?(0,r.BX)(b.G,{css:[g.l0.rowWithGap(2),g.l0.align.center],children:[(0,r.tZ)(Z.Z,{}),(0,r.BX)(b.G,{css:[eg.tierHeaderCost],children:[(0,r.tZ)(y.xv,{variant:"subheadDefault",multiline:!1,children:t.cost.cyclesCostRecurring}),(0,r.tZ)(y.xv,{color:"dimmer",variant:"small",multiline:!1,children:"per day"})]})]}):null})]}),(0,r.tZ)(eh.P,{css:eg.tierPicker,initialSelectedItem:{title:(0,ev.$)(t.sku),sku:t.sku},items:Object.keys(L.r4).map(function(e){return{title:(0,ev.$)(e),sku:e}}),onChange:function(e){return n(e.sku)},disabled:i}),(0,r.tZ)(b.G,{css:eg.tierFeatures,children:["".concat(o," GiB egress"),"Deploy to any URL, cover page optional","Configurable machine","Always on"].map(function(e,t){return(0,r.BX)(b.G,{css:eg.tierFeature,children:[(0,r.tZ)(eu.Z,{}),(0,r.tZ)(y.xv,{multiline:!1,children:e})]},t)})})]})},eb=n(50782),eZ=n(30983),ew=n(97615),ex=n(73524),eC=n(48900),e_=n(12834),eS=n(55534),eE=n(12874),ek=n(58378),eT=function(e){var t,n,i=e.context,a=e.selectedOption,c=e.currentOption,s=e.onBuyMoreCycles,f=e.onPowerUpUpdated,h=e.onPowerUpRequested,m=(0,eb.Z)(),v=(0,e_.Z)(),y=(0,eS.Z)().showError,b=(0,u._)(U.useState(!1),2),Z=b[0],w=b[1],x=(0,p.kr)({}).autoRefillEnabled,_=(0,u._)((0,ek.IN)({onCompleted:(t=(0,l._)(function(e){var t;return(0,d.Jh)(this,function(n){switch(n.label){case 0:if("UserError"===(t=e.setHostingTier).__typename)return y(t.message),[2];return w(!0),[4,new Promise(function(e){return setTimeout(e,2e3)})];case 1:return n.sent(),f({type:"powerUp",powerUpCategory:"hosting_tier",powerUpSku:a.sku,cyclesCostNow:a.cost.cyclesCostNow,replId:m}),v.current,[2]}})}),function(e){return t.apply(this,arguments)}),onError:function(e){h(!1),eC.Tb(e),y(e.message)}}),2),S=_[0],E=_[1].loading;if(Z)return(0,r.tZ)(T.zx,{text:"Tier Purchased",colorway:"positive",loading:!0,css:{color:"".concat(g.TV.accentPositiveStronger," !important")}});var k=(null==c?void 0:c.sku)===a.sku,R=!0;switch(a.cost.explanation){case C.Ch.IncludedInExistingOrder:case C.Ch.ActivateExistingOrder:case C.Ch.SpendCycles:case C.Ch.NeedsCycles:case C.Ch.IncludedInSubscription:R=!1}return E?(R=!0,n="Processing"):k?(R=!0,n="Current tier"):n="INCLUDED_IN_SUBSCRIPTION"===a.cost.explanation?"Activate and deploy":"NOT_SUPPORTED_FOR_TEAMS"===a.cost.explanation?"Not available for teams":"Purchase and deploy",(0,r.tZ)(T.zx,{text:n,disabled:R,loading:E,colorway:E||!R?"primary":void 0,iconRight:E?void 0:(0,r.tZ)(eE.Z,{}),onClick:function(){var e;if(h(!0),!E){if(a.cost.explanation===C.Ch.NeedsCycles){s({type:"powerUp",powerUpCategory:"hosting_tier",powerUpSku:a.sku,cyclesCostNow:a.cost.cyclesCostNow,replId:m});return}S({variables:{input:{replId:m,sku:a.sku}}}),null!==(e=a.cost.cyclesCostNow)&&void 0!==e&&e&&((0,o.j)(o.U3.CHECKOUT_REQUESTED,{source:i,powerUpCategory:"boost"}),(0,o.j)(o.U3.CYCLES_USED,{powerUp:"hosting_tier",sku:a.sku,source:i}),(0,o.j)(o.U3.CHECKOUT_COMPLETED,{source:i,powerUpCategory:"boost",autoRefill:x}))}},css:E&&{color:"".concat(g.TV.accentPrimaryStronger," !important")}})},eR=function(e){var t=e.context,n=e.onBuyMoreCycles,i=e.onPowerUpUpdated,o=(0,eb.Z)(),a=(0,u._)(U.useState("ready"),2),l=a[0],c=a[1],s=(0,u._)(U.useState(null),2),d=s[0],f=s[1],h=(0,u._)(U.useState(null),2),p=h[0],m=h[1],Z=(0,u._)(U.useState(null),2),w=Z[0],x=Z[1];if((0,ek.s7)({fetchPolicy:"network-only",ssr:!1,variables:{replId:o},onCompleted:function(e){if((null==e?void 0:e.repl.__typename)==="Repl"&&(null===(n=e.repl)||void 0===n?void 0:null===(t=n.powerUps)||void 0===t?void 0:t.__typename)==="ReplPowerUpTypes"&&(null===(i=e.repl)||void 0===i?void 0:null===(r=i.powerUpCosts)||void 0===r?void 0:r.__typename)==="PowerUpCostsType"){var t,n,r,i,o,a,l=null===(o=e.repl.powerUps.hostingTier)||void 0===o?void 0:o.sku,c=l||((null===(a=e.repl.owner)||void 0===a?void 0:a.__typename)==="Team"?C.DZ.HostingTierE2Micro:C.DZ.HostingTierE2Small),s=(0,ev.i)(e.repl.powerUpCosts,l),u=(0,ev.i)(e.repl.powerUpCosts,c);s&&l&&m({sku:l,cost:s}),u&&f({sku:c,cost:u}),x(e.repl.powerUpCosts)}}}).loading||!d||!w)return(0,r.tZ)(b.G,{css:[g.l0.flex.row,g.l0.justify.center],children:(0,r.tZ)(B.Z,{})});var _=null;if("INCLUDED_IN_SUBSCRIPTION"===d.cost.explanation)_="Included in your subscription plan.";else if(d.cost.cyclesCostRecurring>0){var S=(0,v.$E)(d.cost.cyclesCostRecurring),E=(0,v.$E)(d.cost.cyclesCostRecurring*ex.Dj);_="".concat(S,"/day (Approximately ").concat(E,"/month).")}var k=null;switch(d.cost.explanation){case C.Ch.IncludedInExistingOrder:break;case C.Ch.NeedsCycles:k="You'll be able to purchase Cycles while activating.";break;case C.Ch.SpendCycles:k="Today's charge will be ".concat(d.cost.cyclesCostNow," Cycles.")}return(0,r.BX)(b.G,{css:g.l0.colWithGap(16),children:[(0,r.tZ)(ey,{selectedOption:d,onChange:function(e){var t=(0,ev.i)(w,e);t&&f({sku:e,cost:t})},disabled:"requesting"===l}),(0,r.tZ)(b.G,{css:[g.l0.colWithGap(12)],children:(0,r.BX)(b.G,{css:[g.l0.colWithGap(8)],children:[(0,r.BX)(b.G,{css:[g.l0.minHeight(50),g.l0.colWithGap(16),g.l0.justify.end,g.l0.mb(16)],children:[null!=_?(0,r.tZ)(y.xv,{css:[g.l0.textAlign.center],multiline:!1,children:_}):null,null!=k?(0,r.BX)(b.G,{css:[g.l0.rowWithGap(8),g.l0.justify.center,g.l0.color.foregroundDimmer],children:[(0,r.tZ)(y.xv,{multiline:!1,children:k}),(0,r.tZ)(eZ.u,{tooltip:"Upgrades and downgrades are immediate. Upgrading within a 24 hour period following a downgrade will incur a charge.",children:(0,r.tZ)(ew.Z,{})})]}):null]}),(0,r.tZ)(eT,{context:t,selectedOption:d,currentOption:p,onBuyMoreCycles:n,onPowerUpUpdated:i,onPowerUpRequested:function(e){return c(e?"requesting":"ready")}})]})})]})},eD=n(47957),eI=n(56337),eG=n(70002);n(49344),n(31850);var eB=n(28079),eA=n(8279),eP=n(5542),eN=n(89106),eU=n(30845),eL=n(25491),eO=n(16166),eM=n(67795),eX=(0,I.X)({self:[g.l0.flex.column],content:[g.l0.pt(16),g.l0.px(12),g.l0.pb(12),g.l0.colWithGap(16)],contentSlim:[g.l0.colWithGap(8)],header:[g.l0.p(12),g.l0.rowWithGap(8),g.l0.justify.start,g.l0.align.center,g.l0.border({color:g.TV.outlineDefault,width:1,style:"solid",direction:"bottom"})],actions:[g.l0.colWithGap(8)],footer:[g.l0.rowWithGap(16),g.l0.justify.spaceBetween,g.l0.align.center,g.l0.pt(4)],loadingWrapper:[g.l0.center],storageBarWrapper:[g.l0.colWithGap(8)],summaryWrapper:[g.l0.colWithGap(8),g.l0.align.start],totalSummaryDot:[g.l0.backgroundColor.backgroundHigher,g.l0.width(8),g.l0.height(8),{borderRadius:"50%"}],replSummaryDot:[g.l0.backgroundColor.accentPrimaryDefault,g.l0.width(8),g.l0.height(8),{borderRadius:"50%"}],summaryRow:[g.l0.rowWithGap(8),g.l0.justify.start,g.l0.align.center,g.l0.fontSize(14),g.l0.height(14)],replSummaryText:[g.l0.color.accentPrimaryStronger],replSummaryUsage:[g.l0.color.accentPrimaryStrongest],replUsagePlaceholder:[eA.p.backgroundPulse(g.TV.backgroundHigher,g.TV.backgroundRoot),{opacity:.5},g.l0.borderRadius(4),g.l0.height("100%"),g.l0.width(64)],totalUsagePlaceholder:[eA.p.backgroundPulse(g.TV.backgroundHigher,g.TV.backgroundRoot),{opacity:.5},g.l0.borderRadius(4),g.l0.height("100%"),g.l0.width(140)],availablePlaceholder:[eA.p.backgroundPulse(g.TV.backgroundHigher,g.TV.backgroundRoot),{opacity:.5},g.l0.borderRadius(4),g.l0.height("100%"),g.l0.width(64)],availableText:[g.l0.color.foregroundDimmest]}),eF=function(e){var t,n=e.isInDesktopApp,i=e.loading,a=e.data,l=e.setShowUpgradeModal,u=e.slim;if((0,U.useEffect)(function(){var e;if(a&&(null===(e=a.currentUser)||void 0===e?void 0:e.__typename)==="CurrentUser"&&"StorageQuota"===a.currentUser.storageInfo.storageQuota.__typename&&"AccountStorageUtilization"===a.currentUser.storageInfo.accountStorageUtilization.__typename&&!i)try{var t=parseInt(a.currentUser.storageInfo.storageQuota.quota,10),n=parseInt(a.currentUser.storageInfo.accountStorageUtilization.total,10);(0,o.j)(eM.U3.MODAL_VIEWED,{modalName:"workspace_storage_modal",storageQuota:t,storageUtilization:n,storageUtilizationPercentage:n/t})}catch(e){}},[a,i]),i&&!a)return(0,r.BX)(b.G,{css:u?eX.contentSlim:eX.content,children:[(0,r.tZ)(eU.M,{}),(0,r.tZ)(b.G,{css:eX.footer,children:n?(0,r.tZ)(T.zx,{onClick:function(){eN.X.openExternalUrl(eB.$I.as)},text:"Manage Repls"}):(0,r.tZ)(eG.Z,{href:eB.$I.href,as:eB.$I.as,text:"Manage Repls"})})]});if(a&&(null===(t=a.currentUser)||void 0===t?void 0:t.__typename)==="CurrentUser"&&"StorageQuota"===a.currentUser.storageInfo.storageQuota.__typename&&"AccountStorageUtilization"===a.currentUser.storageInfo.accountStorageUtilization.__typename){var d=a.currentUser.username,f=a.currentUser.userSubscriptionType===C.HP.HackerPro;return(0,r.BX)(b.G,{css:u?eX.contentSlim:eX.content,children:[a?(0,r.tZ)(eU.l,{data:a}):(0,r.tZ)(eU.M,{}),(0,r.BX)(b.G,{css:eX.footer,children:[(0,r.tZ)(eG.Z,(0,s._)((0,c._)({},(0,eP.Ru)(d)),{text:"Manage Repls"})),(0,r.tZ)(eO.U,{isPro:f,setShowUpgradeModal:l,source:"workspace_storage_modal_upgrade_button"})]})]})}return(0,r.BX)(b.G,{css:u?eX.contentSlim:eX.content,children:[(0,r.tZ)(y.xv,{color:"dimmest",multiline:!1,children:"We had trouble loading your storage information. Please try again later."}),(0,r.tZ)(b.G,{css:eX.footer,children:(0,r.tZ)(eG.Z,{href:eB.$I.href,as:eB.$I.as,text:"Manage Repls"})})]})},eW=(0,I.X)({self:[g.l0.flex.column]}),eH=function(){var e=(0,eI.Z)(),t=(0,u._)((0,U.useState)(!1),2),n=t[0],i=t[1],o=(0,eD.Pf)({fetchPolicy:"network-only",ssr:!1,notifyOnNetworkStatusChange:!0}),a=o.data,l=o.loading,c=o.refetch;return(0,r.BX)(r.HY,{children:[(0,r.tZ)(b.G,{css:eW.self,children:(0,r.tZ)(eF,{loading:l,isInDesktopApp:e,data:a,setShowUpgradeModal:i,slim:!0})}),(0,r.tZ)(eL.Z,{isOpen:n,context:"workspace_info_modal",powerUp:"storage",uponPurchaseGoTo:"workspace",onRequestClose:function(){c(),i(!1)}})]})},eV=n(15670),ez=n(24635),ej=n(47648),eq="workspace_info_modal";function eY(e){var t=e.powerUpCategory,n=e.goToCheckout,i=e.goToCheckoutSuccess,o=e.onRequestPowerUp,a=(0,u._)(U.useState(null),2),l=a[0],c=a[1];switch(t){case"boost":return(0,r.tZ)(ef.Z,{isCheckoutFlow:!0,powerUp:t,onPowerUpUpdated:i,onBuyMoreCycles:n,context:eq});case"hosting_tier":return(0,r.tZ)(eR,{context:"workspace_hosting_pane",onPowerUpUpdated:i,onBuyMoreCycles:n});case"storage":return(0,r.tZ)(eH,{});case"always-on":return(0,r.BX)(r.HY,{children:[(0,r.tZ)(ej.Z,{initialTab:"default",isOpen:l===ez.x.BuyCycles,onRequestClose:function(){return c(null)},uponPurchaseGoTo:"workspace",context:eq,allowCyclesPage:!1}),(0,r.tZ)(eV.Z,{onRequestBuyMore:function(){return c(ez.x.BuyCycles)},powerUp:"always-on",context:eq,onRequestPowerUp:o})]});case"gpu":return(0,r.BX)(r.HY,{children:[(0,r.tZ)(ej.Z,{initialTab:"default",isOpen:l===ez.x.BuyCycles,onRequestClose:function(){return c(null)},uponPurchaseGoTo:"workspace",context:eq,allowCyclesPage:!1}),(0,r.tZ)(eV.Z,{onRequestBuyMore:function(){return c(ez.x.BuyCycles)},powerUp:"gpu",context:eq,onRequestPowerUp:o})]});default:throw Error("Unknown power up category: ".concat(t))}}function e$(e){var t=e.title,n=e.children,i=e.goBack,o=e.canGoBack,a=e.allowBack;return(0,r.BX)(r.HY,{children:[(0,r.BX)(b.G,{css:[g.l0.rowWithGap(8),g.l0.p(8),g.l0.align.center],children:[(void 0===a||a)&&o?(0,r.tZ)(D.hU,{alt:"Back",tooltipHidden:!0,onClick:function(){return i()},dataCy:"purchase-flow-back-button",children:(0,r.tZ)(es.Z,{})}):null,"string"==typeof t?(0,r.tZ)(y.xv,{variant:"subheadDefault",multiline:!1,children:t}):t]}),(0,r.tZ)(b.G,{css:[g.l0.colWithGap(8),g.l0.p(8)],children:n})]})}function eJ(e){var t=e.currentStep,n=e.goBack,l=e.canGoBack,c=e.goTo,s=e.analyticsContext,u=e.onRequestPowerUp;switch(t.step){case"power_up_details":var d=t.powerUpCategory,f=i.S0[d];return(0,r.tZ)(e$,{goBack:n,canGoBack:l,title:f.name,children:(0,r.tZ)(eY,{powerUpCategory:d,goToCheckout:function(e){c({step:"checkout",product:e}),(0,o.j)(o.U3.CHECKOUT_REQUESTED,{source:s,powerUpCategory:d})},goToCheckoutSuccess:function(e){c({step:"checkout_success",product:e})},onRequestPowerUp:u})});case"checkout":return(0,r.tZ)(e$,{goBack:n,canGoBack:l,title:"Checkout",children:(0,r.tZ)(K,{product:t.product,goToCheckoutSuccess:function(e){c({step:"checkout_success",product:e})},goToNewPaymentMethodForm:function(){return c({step:"new_payment_method_form"})},context:s})});case"checkout_success":return(0,r.tZ)(e$,{goBack:n,canGoBack:l,allowBack:!1,title:(0,r.BX)(b.G,{css:[g.l0.rowWithGap(8),g.l0.align.center],children:[l?(0,r.tZ)(D.hU,{tooltipHidden:!0,alt:"Back",onClick:function(){return n()},children:(0,r.tZ)(es.Z,{})}):null,(0,r.tZ)(y.xv,{multiline:!1,css:[g.l0.color.accentPositiveStronger],children:"Success"}),(0,r.tZ)(eu.Z,{color:g.TV.accentPositiveStronger})]}),children:(0,r.tZ)(el,{product:t.product,goToCardPreferences:function(e){return c({step:"card_preferences",powerUpCategory:e})},goToPowerUpDetails:function(e){return c({step:"power_up_details",powerUpCategory:e})}})});case"card_preferences":var h=t.powerUpCategory;return(0,r.tZ)(e$,{goBack:n,canGoBack:l,title:"Card Preferences",children:(0,r.tZ)(a.t,{goToNewPaymentMethodForm:function(){return c({step:"new_payment_method_form",powerUpCategory:h})}})});case"new_payment_method_form":var p=t.powerUpCategory;return(0,r.tZ)(e$,{goBack:n,canGoBack:l,title:"Update Payment Method",children:(0,r.tZ)(ec.q,{onSuccess:function(){return l&&n()},powerUpCategory:p,context:s})});case"not_shown":throw Error("This step should never be rendered");default:(0,ed.Z)(t)}}},63204:function(e,t,n){n.d(t,{e9:function(){return h},wd:function(){return d}});var r=n(45903),i=n(93295),o=n(23982),a=n(41538),l=n(77393);function c(){var e=(0,i._)(["\n  fragment PublishReleaseFormRepl on Repl {\n    id\n    title\n    description\n    slug\n    user {\n      username\n    }\n    ...PublishedReplShareInfoReplData\n    deployment {\n      id\n      activeRelease {\n        id\n      }\n    }\n    releases {\n      items {\n        id\n        timeCreated\n        description\n      }\n    }\n  }\n  ","\n"]);return c=function(){return e},e}function s(){var e=(0,i._)(["\n  query PublishReleaseFormCurrentUser {\n    currentUser {\n      id\n      username\n    }\n  }\n"]);return s=function(){return e},e}var u={},d=(0,o.Ps)(c(),a.B),f=(0,o.Ps)(s());function h(e){var t=(0,r._)({},u,e);return l.a(f,t)}},30609:function(e,t,n){n.d(t,{Z:function(){return d},_:function(){return p}});var r=n(32477),i=n(8182),o=n(43429),a=n(9617),l=n(35972),c=n(79217),s=n(83848),u=n(29287);function d(e){var t=(0,r._)(o.useState(!1),2),n=t[0],c=t[1],u=[],d=[];if(e.variables.length>0){var f=e.variables[0].parentVariableReference,h=!0,m=!1,v=void 0;try{for(var g,y=e.variables[Symbol.iterator]();!(h=(g=y.next()).done);h=!0){var b=g.value;b.parentVariableReference===f?u.push(b):d.push(b)}}catch(e){m=!0,v=e}finally{try{h||null==y.return||y.return()}finally{if(m)throw v}}}return(0,i.BX)(i.HY,{children:[(0,i.tZ)(a.Z,{truncate:!0,level:5,children:"Variables"}),(0,i.BX)(l.gC,{align:"stretch",constrainWidth:!0,children:[u.map(function(t){return(0,i.tZ)(p,{depth:0,variable:t,client:e.client},t.parentVariableReference+"/"+t.name)}),d.length>0&&(0,i.BX)(i.HY,{children:[(0,i.BX)(s.Z,{filled:!1,border:!1,onClick:function(){return c(function(e){return!e})},children:["See ",n?"Less":"More"]}),n&&d.map(function(t){return(0,i.tZ)(p,{depth:0,variable:t,client:e.client},t.parentVariableReference+"/"+t.name)})]})]})]})}function f(e){var t=e.variable,n=e.expanded;return t.variablesReference>0?(0,i.tZ)("div",{css:[u.l0.transition.snappy,{transform:"rotate(".concat(n?0:-90,"deg)")}],children:(0,i.tZ)(c.Z,{})}):null}function h(e){var t=e.expanded,n=e.depth,r=e.variable;return 0!==n||"parentVariableReference"in r?(0,i.tZ)("div",{css:[u.l0.flex.grow(0),u.l0.flex.shrink(0),u.l0.width(u.TV.space16),u.l0.display.flex,u.l0.align.center,u.l0.justify.end],children:(0,i.tZ)(f,{expanded:t,variable:r})}):(0,i.tZ)(f,{expanded:t,variable:r})}function p(e){var t=e.depth,n=e.variable,a=e.client,c=(0,r._)(o.useState(!1),2),s=c[0],u=c[1],d=(0,r._)(o.useState([]),2),f=d[0],m=d[1];return o.useEffect(function(){s&&a.fetchVariables(n.variablesReference).then(function(e){return m(e)},function(){return u(!1)})},[s,a,n.variablesReference]),(0,i.BX)(i.HY,{children:[(0,i.BX)("div",{className:"variable",onClick:function(){n.variablesReference>0&&u(function(e){return!e})},css:{"&":{display:"flex",alignItems:"center",maxWidth:"100%",height:"var(--space-32)",minHeight:"var(--space-32)",cursor:"pointer",color:"var(--foreground-dimmer)",borderRadius:"var(--border-radius-4)",fontSize:"var(--font-size-default)",paddingLeft:"calc(".concat(t," * var(--space-16))"),fontFamily:"var(--font-family-code)"},"&:hover":{backgroundColor:"var(--background-higher)",color:"var(--foreground-default)"},".label":{fontSize:"var(--font-size-default)",paddingLeft:"var(--space-8)",paddingRight:"var(--space-8)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",flex:"1 0 auto"},".type":{opacity:"0.5"},".value":{textAlign:"right",flexShrink:1}},children:[(0,i.tZ)(h,{expanded:s,variable:n,depth:t}),(0,i.BX)("div",{className:"label",children:[n.name,n.type?(0,i.BX)("span",{className:"type",children:[" ",n.type]}):null,""!==n.value&&": "]}),(0,i.tZ)("div",{className:"label value",children:(0,i.tZ)("pre",{children:n.value})})]}),s?(0,i.tZ)(l.gC,{align:"stretch",constrainWidth:!0,children:f.map(function(e){return(0,i.tZ)(p,{depth:t+1,variable:e,client:a},"parentVariableReference"in e?e.parentVariableReference+"/"+e.name:e.name)})}):null]})}},51780:function(e,t,n){n.d(t,{d:function(){return l}});var r=n(93295),i=n(23982),o=n(20708);function a(){var e=(0,r._)(["\n  fragment BulkDeleteConfirmationModalRepl on Repl {\n    id\n    iconUrl\n    title\n    hostingDeployment {\n      ... on HostingDeployment {\n        id\n        replitAppSubdomain\n        ...BuildStatusBadgeHostingDeployment\n      }\n    }\n  }\n  ","\n"]);return a=function(){return e},e}var l=(0,i.Ps)(a(),o.u)},15053:function(e,t,n){var r=n(32477),i=n(8182),o=n(43429),a=n(49344),l=n(56596),c=n(74833),s=n(29287),u=n(73157),d=n(1498),f=n(52682),h=n(2161),p=n(93918),m=n(84096),v=n(37951),g=n(20573),y=n(18836),b=(0,p.X)({wrapper:[s.l0.colWithGap(16)],repls:[s.l0.maxHeight("60vh"),s.l0.overflow("auto"),{"& > div":[s.l0.py(8),{borderTop:"1px solid "+s.TV.outlineDimmest}],"& > div:last-of-type":{borderBottom:"1px solid "+s.TV.outlineDimmest}}],row:[s.l0.colWithGap(8)],replRow:[s.l0.rowWithGap(8),s.l0.align.center],additionalReplsCount:[s.l0.pl(12),s.l0.pt(8)],buttons:[s.l0.rowWithGap(12),s.l0.justify.end]}),Z=function(e){var t,n=e.repl,a=e.onConfirmedChange,s=(0,r._)((0,o.useState)(""),2),u=s[0],d=s[1],f=(null===(t=n.hostingDeployment)||void 0===t?void 0:t.__typename)==="HostingDeployment"?n.hostingDeployment:null,p=(0,o.useRef)(!1);return(0,i.BX)(l.G,{css:b.row,children:[(0,i.BX)(l.G,{css:b.replRow,children:[(0,i.tZ)(h.ZP,{size:24,iconUrl:n.iconUrl,alt:""}),(0,i.tZ)(c.xv,{height:"singleLine",multiline:!1,children:n.title}),f?(0,i.tZ)(m.e,{deployment:f}):null]},n.id),f?(0,i.BX)(i.HY,{children:[(0,i.tZ)(v.E,{icon:(0,i.tZ)(g.Z,{}),colorway:"red",text:"This repl has been deployed. If you delete this Repl, the associated\nproduction deployment will also be shut down and deleted. To\nproceed, please type: ".concat(f.replitAppSubdomain)}),(0,i.tZ)(y.II,{placeholder:"Type here",value:u,onChange:function(e){var t=e.currentTarget.value;d(t);var n=t===f.replitAppSubdomain;n!==p.current&&a(n),p.current=n}})]}):null]})};t.Z=function(e){var t=e.selectedRepls,n=e.isOpen,s=e.onClose,h=e.onDelete,p=e.deleting,m=t.length,v=(0,u.Z)("Repl",m),g=t.filter(function(e){var t;return(null===(t=e.hostingDeployment)||void 0===t?void 0:t.__typename)==="HostingDeployment"}).length,y=(0,u.Z)("Deployment",g),w=g>0?" & ".concat(g>1?g+" ":""," ").concat(y):"",x=(0,r._)((0,o.useState)(0),2),C=x[0],_=x[1];return(0,o.useEffect)(function(){n||_(0)},[n]),(0,i.tZ)(a.u,{isOpen:n,onRequestClose:s,children:(0,i.BX)(l.G,{css:b.wrapper,children:[(0,i.BX)(c.h4,{variant:"subheadBig",level:2,children:["Delete ",v,g>0?" & ".concat(y):"","?"]}),(0,i.tZ)(c.xv,{color:"dimmer",children:"Are you sure? This cannot be undone. Some Repls may take a few minutes to finish deleting."}),(0,i.tZ)(l.G,{css:b.repls,children:t.map(function(e){return(0,i.tZ)(Z,{css:b.row,repl:e,onConfirmedChange:function(e){return _(function(t){return t+(e?1:-1)})}},e.id)})}),(0,i.BX)(l.G,{css:b.buttons,children:[(0,i.tZ)(d.zx,{text:"Cancel",onClick:s,disabled:p}),(0,i.tZ)(d.zx,{iconLeft:(0,i.tZ)(f.Z,{}),onClick:h,disabled:p||C<g,text:"Yes, delete ".concat(m>1?m+" ":""," ").concat(v).concat(w),colorway:"negative"})]})]})})}},24463:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(8182);n(43429);var i=n(29287),o=n(38080);function a(e){var t=e.className,n=e.children;return(0,r.tZ)(o.Tg,{elevated:!0,tag:"span",css:[{display:"inline",lineHeight:1},i.l0.fontSize(i.TV.fontSizeSmall),i.l0.borderRadius(4),i.l0.px(4),i.l0.font.code,t],children:n})}},47075:function(e,t,n){var r=n(45903),i=n(25e3),o=n(8182),a=n(51384),l=function(e){return{animationDuration:e?"2000ms":"800ms",animationIterationCount:"infinite",animationTimingFunction:"ease-in-out"}},c=(0,a.F4)("\n  0% { transform: translate(0px, 0px) }\n  25% { transform: translate(0px, 80px) }\n  50% { transform: translate(100px, 80px) }\n  75% { transform: translate(100px, 160px) }\n  100% { transform: translate(0px, 160px) }\n"),s=(0,a.F4)("\n  0% { transform: translate(0px, 0px) }\n  25% { transform: translate(0px, -80px) }\n  50% { transform: translate(-100px, -80px) }\n  100% { transform: translate(-100px, -80px) }\n"),u=(0,a.F4)("\n  0% { transform: translate(0px, 0px) }\n  50% { transform: translate(0px, 0px) }\n  75% { transform: translate(0px, -80px) }\n  100% { transform: translate(100px, -80px) }\n");t.Z=function(e){var t=e.height,n=void 0===t?24:t,a=e.color,d=e.slow,f=void 0!==d&&d,h={width:84,height:64,fill:void 0===a?"#F26207":a,rx:12};return(0,o.BX)("svg",{width:n/1.2,height:n,viewBox:"0 0 200 240",xmlns:"http://www.w3.org/2000/svg",children:[(0,o.tZ)("rect",(0,i._)((0,r._)({css:[l(f),{animationName:c}]},h),{x:8,y:8})),(0,o.tZ)("rect",(0,i._)((0,r._)({css:[l(f),{animationName:s}]},h),{x:108,y:88})),(0,o.tZ)("rect",(0,i._)((0,r._)({css:[l(f),{animationName:u}]},h),{x:8,y:168}))]})}},36227:function(e,t,n){n.d(t,{O:function(){return p}});var r=n(8182),i=n(87659),o=n(74833),a=n(29287),l=n(56596),c=n(15146),s=n(1498),u=n(58719),d=n(4995),f=n(9331),h=n(40282);function p(e){var t=e.title,n=e.content,h=e.colorway,p=void 0===h?"primary":h,v=e.totalSteps,g=void 0===v?1:v,y=e.currentStepIndex,b=void 0===y?0:y,Z=e.onDismiss,w=e.onCurrentStepChange,x=e.cypressCloseData;return(0,r.BX)(l.G,{css:[a.l0.p(8),{paddingBottom:12,paddingRight:t?void 0:32,backgroundColor:i.Br[p].dimmest,border:"1px solid "+i.Br[p].dimmer,position:"relative"},a.l0.borderRadius(8),a.l0.shadow(2),a.l0.colWithGap(8)],children:[(0,r.tZ)(c.hU,{alt:"Close",colorway:p,css:{position:"absolute",top:a.TV.space8,right:a.TV.space8},onClick:Z,dataCy:x,children:(0,r.tZ)(u.Z,{})}),t?(0,r.tZ)(o.xv,{variant:"subheadBig",multiline:!1,children:t}):null,"function"==typeof n?(0,r.tZ)(n,{}):(0,r.tZ)(o.xv,{children:n}),g>1&&w?(0,r.BX)(l.G,{css:[a.l0.flex.row,a.l0.align.center,a.l0.justify.spaceBetween],children:[(0,r.tZ)(s.zx,{css:{visibility:b<=0?"hidden":void 0},colorway:p,text:"Back",iconLeft:(0,r.tZ)(d.Z,{}),onClick:function(){return w(b-1)}}),(0,r.tZ)(m,{colorway:p,total:g,current:b}),(0,r.tZ)(s.zx,{"data-autofocus":!0,colorway:p,text:b>=g-1?"Done":"Next",iconLeft:(0,r.tZ)(f.Z,{}),onClick:function(){return b>=g-1?Z():w(b+1)}})]}):null]})}function m(e){var t=e.total,n=e.current,o=e.colorway;return(0,r.BX)(l.G,{children:[(0,r.tZ)(h.T,{children:(0,r.tZ)("progress",{value:n+1,max:t,"aria-label":"Step"})}),(0,r.tZ)(l.G,{"aria-hidden":!0,css:a.l0.rowWithGap(8),children:Array(t).fill(0).map(function(e,t){return(0,r.tZ)(l.G,{css:[a.l0.borderRadius("full"),{width:a.TV.space8,height:a.TV.space8,backgroundColor:t===n?i.Br[o].stronger:i.Br[o].dimmer}]},t)})})]})}},57118:function(e,t,n){n.d(t,{RY:function(){return m},U5:function(){return g},dW:function(){return v},iz:function(){return y},lq:function(){return p}});var r=n(45903),i=n(25e3),o=n(70322),a=n(8182);n(43429);var l=n(29287),c=n(56596),s=n(38080),u=n(60769),d=n(48272);n(54843);var f=c.K.label,h=function(e){var t=e.children,n=(0,o._)(e,["children"]);return(0,a.tZ)(f,(0,i._)((0,r._)({css:[l.l0.justify.spaceBetween,l.l0.align.center,l.l0.flex.row,{fontSize:l.TV.fontSizeDefault,lineHeight:l.TV.lineHeightDefault}]},n),{children:t}))},p=function(e){e.onChange;var t=(0,o._)(e,["onChange"]);return(0,a.tZ)(b,(0,i._)((0,r._)({label:"Date created"},t),{children:(0,a.tZ)(d.P,(0,r._)({},e))}))},m=function(e){e.onChange;var t=(0,o._)(e,["onChange"]);return(0,a.tZ)(b,(0,i._)((0,r._)({label:"Sort"},t),{children:(0,a.tZ)(d.P,(0,r._)({},e))}))},v=function(e){return(0,a.tZ)(s.Tg,{css:[l.l0.p(8)],children:(0,a.BX)(h,{htmlFor:e.id,children:["Exact match ",(0,a.tZ)(u.X,(0,r._)({},e))]})})},g=function(e){return(0,a.tZ)(s.Tg,{css:[l.l0.p(8)],children:(0,a.BX)(h,{htmlFor:e.id,children:["My code only ",(0,a.tZ)(u.X,(0,r._)({},e))]})})},y=function(){return(0,a.tZ)("div",{css:[l.l0.p(0),l.l0.m(0),{borderBottom:"1px solid",borderBottomColor:l.TV.backgroundHighest}]})},b=function(e){var t=e.children,n=e.label,r=e.className,i=(0,o._)(e,["children","label","className"]);return(0,a.BX)(c.G,{className:r,css:[l.l0.colWithGap(8),l.l0.pb(8)],children:[(0,a.tZ)(s.Tg,{css:[l.l0.p(8),l.l0.mb(0),l.l0.position.relative],children:(0,a.tZ)(h,{htmlFor:i.id,children:n})}),(0,a.tZ)(c.G,{css:[l.l0.px(8)],children:t})]},n)}},81106:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(34142),i=n(32477),o=n(87682),a=n(43429),l=n(72067),c=n(7444);function s(e){var t=(0,l.Z)({container:e,service:"exec"}).channel,n=(0,a.useRef)(!1),s=(0,a.useRef)([]),u=(0,c.Z)((0,r._)(function(){var e,r,a,l,c,d,f,h,p,m;return(0,o.Jh)(this,function(o){switch(o.label){case 0:if(n.current||!s.current.length||(null==t?void 0:t.status)!=="open")return[2];if(!(e=s.current.pop()))throw Error("Expected request");return l=(a=(r=(0,i._)(e,2))[0]).args,c=a.env,d=r[1],f="",h=t.onCommand(function(e){e.output&&(f+=e.output)}),n.current=!0,[4,t.request({exec:{args:l,env:c}})];case 1:return p=o.sent(),n.current=!1,h(),m=p.channelClosed?"Channel closed":p.error,d(m?{error:m,output:f||null}:{output:f,error:null}),u.current(),[2]}})})),d=null==t?void 0:t.status;return(0,a.useEffect)(function(){"open"===d&&u.current()},[d,u]),(0,a.useCallback)(function(e){var t=e.args,n=e.env;return new Promise(function(e){s.current.push([{args:t,env:n},e]),u.current()})},[u])}},66349:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(32477),i=n(43429),o=n(54916),a=n(47001);function l(){var e,t,n=(0,o.Z)().container,l=(0,r._)(i.useState(null!==(t=null===(e=n.getContext())||void 0===e?void 0:e.repl)&&void 0!==t?t:null),2),c=l[0],s=l[1];return i.useEffect(function(){return n.onConnectionStateChanged(function(e){var t,r;e===a.em.CONNECTED&&s(null!==(r=null===(t=n.getContext())||void 0===t?void 0:t.repl)&&void 0!==r?r:null)})},[s,n]),c}},88377:function(e,t,n){n.d(t,{H:function(){return t5}});var r,i,o,a,l,c,s,u,d,f,h,p=n(34142),m=n(45903),v=n(32477),g=n(87682),y=n(47001),b=n(90487);(r=c||(c={})).USER_JOIN="USER_JOIN",r.USER_LEAVE="USER_LEAVE",r.USERS_UPDATE="USERS_UPDATE",r.USER_OPENED_FILE="USER_OPENED_FILE",r.FOLLOWED_USER_CHANGED="FOLLOWED_USER_CHANGED",r.FOLLOWING_USERS_CHANGED="FOLLOWING_USERS_CHANGED";var Z=n(21289),w=n(58962),x=n(80388),C=n(83493),_=n(19659),S=n(7730),E=n.n(S),k=n(25e3);(i=s||(s={})).DEEPLINK_CHANGED="DEEPLINK_CHANGED",i.SESSION_STATE_CHANGED="SESSION_STATE_CHANGED";var T=n(85492),R=n(33829),D=n(1660),I=n(48900),G=n(32902);(u||(u={})).MESSAGE_RECEIVED="MESSAGE_RECEIVED";var B=n(56158),A=n(24418),P=n(47507),N=n(65490),U=n(93295),L=n(23982);function O(){var e=(0,U._)(["\n  query GitHubAuth {\n    currentUser {\n      id\n      gitHubInfo {\n        accessToken\n      }\n    }\n  }\n"]);return O=function(){return e},e}var M=(0,L.Ps)(O()),X=n(59868);function F(){return(F=(0,p._)(function(){var e;return(0,g.Jh)(this,function(t){switch(t.label){case 0:if(!N.l)throw Error("Expected apollo");return[4,N.l.query({query:M})];case 1:if(!(null==(e=t.sent().data)?void 0:e.currentUser))throw Error("Expected current user");return[2,e.currentUser]}})})).apply(this,arguments)}function W(){document.activeElement instanceof HTMLElement&&document.activeElement.blur()}(o=d||(d={})).OUTPUT="OUTPUT",o.ERROR="ERROR",o.STATE_CHANGED="STATE_CHANGED",o.CHANNEL_OPENED="CHANNEL_OPENED";var H=n(53941),V=n(5038),z=n(36098),j=n(96164),q=n.n(j),Y=n(8701),$=n(3756),J=n.n($),K=n(70322),Q=n(4755),ee=n(19012),et=function(e){var t=e.configurationSupport;return{textDocument:{synchronization:{dynamicRegistration:!0,didSave:!0},signatureHelp:{dynamicRegistration:!0,signatureInformation:{documentationFormat:["markdown","plaintext"]}},publishDiagnostics:{relatedInformation:!0,tagSupport:{valueSet:[1,2]}},formatting:{dynamicRegistration:!0},documentSymbol:{dynamicRegistration:!0,hierarchicalDocumentSymbolSupport:!0,symbolKind:{valueSet:ee.Z}},definition:{dynamicRegistration:!0,linkSupport:!0},typeDefinition:{dynamicRegistration:!0},implementation:{dynamicRegistration:!0},references:{dynamicRegistration:!0},rename:{dynamicRegistration:!0,prepareSupport:!0},completion:{dynamicRegistration:!0,completionItem:{documentationFormat:["markdown","plaintext"],snippetSupport:!0}},codeAction:{dynamicRegistration:!0,codeActionLiteralSupport:{codeActionKind:{valueSet:Object.values(Q.CodeActionKind)}}},hover:{dynamicRegistration:!0,contentFormat:["markdown","plaintext"]}},workspace:{applyEdit:!0,didChangeConfiguration:t.clientToServer||t.serverToClient?{dynamicRegistration:!0}:void 0,configuration:t.serverToClient,executeCommand:{dynamicRegistration:!0},workspaceEdit:{documentChanges:!0,resourceOperations:[Q.ResourceOperationKind.Create,Q.ResourceOperationKind.Delete,Q.ResourceOperationKind.Rename]}}}},en=n(20298),er=n(36846),ei=n.n(er),eo=n(79543),ea=n(23026),el=function(){"use strict";function e(){(0,ea._)(this,e)}var t=e.prototype;return t.supports=function(e){return e.includes("css-language-server")},t.onResponse=function(e,t){return"textDocument/hover"===e?this.onHover(t):t},t.onHover=function(e){if("error"in e)return e;var t=e.result;return"cancelled"in e&&!1!==e.cancelled||!t?e:(Array.isArray(t.contents)&&(t.contents={kind:"markdown",value:["```html",t.contents[0],"```",t.contents[1],""].join("\n")}),(0,k._)((0,m._)({},e),{result:t}))},e}(),ec=[new(function(){"use strict";function e(){(0,ea._)(this,e)}var t=e.prototype;return t.supports=function(e){return e.includes("typescript-language-server")},t.onResponse=function(e,t){return"textDocument/completion"===e?this.onCompletion(t):t},t.onCompletion=function(e){if("error"in e||"cancelled"in e&&!1!==e.cancelled)return e;var t=e.result;if(!t)return e;Array.isArray(t)&&(t={isIncomplete:!1,items:t});for(var n=0;n<t.items.length;n++){var r=t.items[n];r.sortText&&r.sortText.startsWith("￿")&&(r.sortText=r.sortText.replace("￿",""))}return(0,k._)((0,m._)({},e),{result:t})},e}()),new el],es=function(){"use strict";function e(){(0,ea._)(this,e)}var t=e.prototype;return t.supports=function(){return!0},t.onResponse=function(e,t){return t},e}(),eu=n(73164),ed=n(88422).lW;function ef(e,t){var n,r;return null!==(r=null===(n=eu.$R.from(e))||void 0===n?void 0:n.id)&&void 0!==r?r:t}function eh(e,t){return e.line<t.line||e.line===t.line&&e.character<=t.character}function ep(){return Math.floor(2147483647*Math.random())}function em(e){var t=JSON.stringify((0,k._)((0,m._)({},e),{jsonrpc:"2.0"})),n=ed.byteLength(t,"utf8");return"Content-Length: ".concat(n,"\r\n\r\n").concat(t)}(a=f||(f={})).INITIALIZED="INITIALIZED",a.READY="READY",a.DIAGNOSTICS="DIAGNOSTICS",a.SERVER_STATE_CHANGE="SERVER_STATE_CHANGE",a.SERVER_HEALTH_CHANGE="SERVER_HEALTH_CHANGE",a.SERVER_CAPABILITIES_CHANGE="SERVER_CAPABILITIES_CHANGE",a.REQUEST="REQUEST",a.RESPONSE="RESPONSE",a.CANCEL_REQUEST="CANCEL_REQUEST",a.SEND_NOTIFICATION="SEND_NOTIFICATION";var ev=n(72526),eg=n(15482);function ey(e,t){var n,r,i,o,a,l;return t&&t?!!(J()(null==e?void 0:e.fileTypeAttrs,t.fileTypeAttrs)&&J()(null==e?void 0:null===(n=e.config)||void 0===n?void 0:n.startCommand,null===(r=t.config)||void 0===r?void 0:r.startCommand)&&J()(null==e?void 0:null===(i=e.config)||void 0===i?void 0:i.initializationOptionsJson,null===(o=t.config)||void 0===o?void 0:o.initializationOptionsJson)&&J()(null==e?void 0:null===(a=e.config)||void 0===a?void 0:a.configurationJson,null===(l=t.config)||void 0===l?void 0:l.configurationJson)):!!t==!!t}function eb(e,t){return eZ.apply(this,arguments)}function eZ(){return(eZ=(0,p._)(function(e,t){var n;return(0,g.Jh)(this,function(r){switch(r.label){case 0:return[4,e.exec("pwd")];case 1:if(null!==(n=r.sent()).error){if(!t())return[2,{error:Error("LSPNix: Could not get working directory "+n.error),workingDirectory:null}];return[2,eb(e,t)]}return[2,{error:null,workingDirectory:n.output.replace("\n","")}]}})})).apply(this,arguments)}var ew=n(39698),ex=n(10122);(l=h||(h={})).CHANNEL_OPENED="CHANNEL_OPENED",l.EVENT_SENT="EVENT_SENT";var eC=n(50431),e_=["git diff -z --name-only --diff-filter=U","echo -n ".concat("\x1f"),"{ git grep -z -l -E '<{7,}|={7,}|>{7,}' || exit $(( $? == 1 ? 0 : $? )); }"].join(" && ");function eS(e){return eE.apply(this,arguments)}function eE(){return(eE=(0,p._)(function(e){var t,n,r,i,o,a,l,c,s,u,d;return(0,g.Jh)(this,function(f){switch(f.label){case 0:return[4,e(e_,{serviceMethod:"git-get-conflicting-files"})];case 1:if((t=f.sent()).error)return[2,t];if(r=(n=(0,v._)(t.output.split("\x1f").map(function(e){return(0,eC.so)(e,"\x00")}),2))[0],i=n[1],!r.length)return[2,{files:new Map,error:null}];o=new Map,a=!0,l=!1,c=void 0;try{for(s=r[Symbol.iterator]();!(a=(u=s.next()).done);a=!0)d=u.value,o.set(d,!i.includes(d))}catch(e){l=!0,c=e}finally{try{a||null==s.return||s.return()}finally{if(l)throw c}}return[2,{files:o,error:null}]}})})).apply(this,arguments)}var ek=n(57369),eT=n(75813);function eR(e){return eD.apply(this,arguments)}function eD(){return(eD=(0,p._)(function(e){var t,n,r,i,o,a;return(0,g.Jh)(this,function(l){switch(l.label){case 0:return[4,(0,ek.ZP)(e)];case 1:if((t=l.sent()).error)return[2,t];if(t.state!==ek.yG.MERGING)return[2,{error:eT.aq.INVALID_STATE}];return[4,e("cat '.git/MERGE_HEAD'",{serviceMethod:"git-get-merging-refs"})];case 2:if((n=l.sent()).error)return[2,n];if(!(r=(0,eC.so)(n.output,"\n")).length)return[2,{commits:[],branches:[],error:null}];return i="{ grep -F '".concat(r.join("\n"),"' || exit 0; }"),[4,e("".concat('git for-each-ref --format="%(objectname)	%(refname)" refs/heads/ refs/remotes/'," | ").concat(i),{serviceMethod:"git-get-merging-refs"})];case 3:if((o=l.sent()).error)return[2,o];if(!o.output)return[2,{commits:r,branches:[],error:null}];return a=(0,eC.so)(o.output,"\n").map(function(e){return e.split("	")[1]}).map(eC.C),[2,{commits:r,branches:a,error:null}]}})})).apply(this,arguments)}function eI(e){return eG.apply(this,arguments)}function eG(){return(eG=(0,p._)(function(e){var t,n;return(0,g.Jh)(this,function(r){switch(r.label){case 0:return[4,e("if [ -f '.git/FETCH_HEAD' ]; then stat -c %Y '.git/FETCH_HEAD'; fi",{serviceMethod:"git-last-fetched"})];case 1:if((t=r.sent()).error)return[2,t];if(!t.output||isNaN(n=parseInt(t.output,10)))return[2,{lastFetched:null,error:null}];return[2,{lastFetched:new Date(n*=1e3),error:null}]}})})).apply(this,arguments)}var eB=n(21076),eA=n(80433);function eP(e,t){return eN.apply(this,arguments)}function eN(){return(eN=(0,p._)(function(e,t){var n,r,i,o,a,l;return(0,g.Jh)(this,function(c){switch(c.label){case 0:if(n=(t=(0,eB.Qj)(t)).startsWith("refs/heads/"),r=t.startsWith("refs/remotes/"),n)return[3,2];return i=r?t:"refs/remotes/".concat(t),[4,e("git show-ref --verify ".concat(i),{serviceMethod:"git-branch-exists"})];case 1:if(!(o=c.sent()).error)return[2,{exists:!0,ref:(0,eA.L)(i),error:null}];if(o.error!==eT.aq.INVALID_REFERENCE)return[2,o];c.label=2;case 2:if(r)return[3,4];return a=n?t:"refs/heads/".concat(t),[4,e("git show-ref --verify ".concat(a),{serviceMethod:"git-branch-exists"})];case 3:if(!(l=c.sent()).error)return[2,{exists:!0,ref:(0,eA.L)(a),error:null}];if(l.error!==eT.aq.INVALID_REFERENCE)return[2,l];c.label=4;case 4:return[2,{exists:!1,ref:null,error:null}]}})})).apply(this,arguments)}function eU(e,t,n){return eL.apply(this,arguments)}function eL(){return(eL=(0,p._)(function(e,t,n){var r,i,o;return(0,g.Jh)(this,function(a){switch(a.label){case 0:if((0,eB.Pi)(t,n)){if(t=(0,eB.bF)(t,!0),n=(0,eB.bF)(n),t===n)return[2,{canMerge:!0,error:null}]}else t=(0,eB.bF)(t),n=(0,eB.bF)(n);return t=(0,eC.Gw)(t),n=(0,eC.Gw)(n),r="git merge-base ".concat(t," ").concat(n),i='git merge-tree "$('.concat(r,')" ').concat(t," ").concat(n),[4,e("set -eo pipefail; (".concat(i," | ").concat("( (grep -q -e '^+<* \\.our$' && echo '1') || echo '0')",") || test $? -eq 141"),{serviceMethod:"git-can-merge-branches"})];case 1:if((o=a.sent()).error)return[2,o];return[2,{canMerge:"0"===o.output,error:null}]}})})).apply(this,arguments)}function eO(e,t){return eM.apply(this,arguments)}function eM(){return(eM=(0,p._)(function(e,t){var n,r,i,o,a,l,c,s,u;return(0,g.Jh)(this,function(d){switch(d.label){case 0:return n=t.branch,r=t.message,o=void 0!==(i=t.allowConflicts)&&i,[4,(0,ek.ZP)(e)];case 1:if((a=d.sent()).error)return[2,a];if(l=a.state,a.type!==ek.y5.NORMAL||l===ek.yG.DIRTY_WORKTREE||l===ek.yG.DIRTY_INDEX)return[2,{error:eT.aq.INVALID_STATE}];return[4,eP(e,n)];case 2:if((c=d.sent()).error)return[2,c];if(!c.exists)return[2,{error:eT.aq.INVALID_REFERENCE}];if(o)return[3,4];return[4,eU(e,n,"HEAD")];case 3:if((s=d.sent()).error)return[2,s];if(!s.canMerge)return[2,{error:eT.aq.MERGE_CONFLICT}];d.label=4;case 4:var f,h,p,m;return h=(f={branch:n,message:r}).branch,p=f.message,h=(0,eB.Qj)(h),m=["--quiet","--no-edit","--no-ff","--overwrite-ignore","--commit"],p&&m.push("-m",(0,eC.Gw)(p)),m.push((0,eC.Gw)(h)),[4,e("git merge ".concat(m.join(" ")),{serviceMethod:"git-merge"})];case 5:if((u=d.sent()).error!==eT.aq.MERGE_CONFLICT)return[3,8];if(o)return[3,7];return[4,e("git merge --abort")];case 6:return d.sent(),[2,u];case 7:return[2,{hasConflicts:!0,error:null}];case 8:if(u.error)return[2,u];return[2,{hasConflicts:!1,error:null}]}})})).apply(this,arguments)}function eX(e){return eF.apply(this,arguments)}function eF(){return(eF=(0,p._)(function(e){var t;return(0,g.Jh)(this,function(n){switch(n.label){case 0:return[4,e("git merge --abort",{serviceMethod:"git-merge-abort"})];case 1:if((t=n.sent()).error)return[2,t];return[2,{error:null}]}})})).apply(this,arguments)}function eW(e){return eH.apply(this,arguments)}function eH(){return(eH=(0,p._)(function(e){var t;return(0,g.Jh)(this,function(n){switch(n.label){case 0:return[4,e("GIT_EDITOR=/bin/true git merge --continue",{serviceMethod:"git-merge-continue"})];case 1:if((t=n.sent()).error)return[2,t];return[2,{error:null}]}})})).apply(this,arguments)}var eV=n(55103);function ez(e,t,n){return ej.apply(this,arguments)}function ej(){return(ej=(0,p._)(function(e,t,n){var r,i,o,a,l,c,s,u,d,f,h,p,m,v,y;return(0,g.Jh)(this,function(g){switch(g.label){case 0:if("string"==typeof t){if(""===t)return[2,{error:null}];t=[t]}if(!0!==t&&0===t.length)return[2,{error:null}];if(!(void 0!==n))return[3,2];return r=["--quiet","--no-overlay","--worktree","--source=".concat(n),!0===t?".":"-- ".concat(t.join(" "))],[4,e("git --literal-pathspecs restore ".concat(r.join(" ")),{serviceMethod:"git-restore-files"})];case 1:if((i=g.sent()).error)return[2,i];return[2,{error:null}];case 2:return[4,(0,eV.Z)(e)];case 3:if((o=g.sent()).error)return[2,o];a=[],l=[],c=!0,s=!1,u=void 0;try{for(d=o.changes[Symbol.iterator]();!(c=(f=d.next()).done);c=!0)if(h=f.value,!0===t||t.includes(h.path))switch(h.type.worktree){case eV.h.UNMODIFIED:continue;case eV.h.UNTRACKED:a.push((0,eC.Gw)(h.path));break;default:l.push((0,eC.Gw)(h.path))}}catch(e){s=!0,u=e}finally{try{c||null==d.return||d.return()}finally{if(s)throw u}}if(0===a.length&&0===l.length&&void 0===n)return[2,{error:null}];return p=[],a.length&&(m=["--quiet","--force","--",a.join(" ")],p.push("git --literal-pathspecs clean ".concat(m.join(" ")))),l.length&&(v=["--quiet","--no-overlay","--worktree","-- ".concat(l.join(" "))],p.push("git --literal-pathspecs restore ".concat(v.join(" ")))),[4,e(p,{serviceMethod:"git-restore-files"})];case 4:if((y=g.sent()).error)return[2,y];return[2,{error:null}]}})})).apply(this,arguments)}var eq=n(69451),eY=n.n(eq);function e$(e,t){return eJ.apply(this,arguments)}function eJ(){return(eJ=(0,p._)(function(e,t){var n,r,i;return(0,g.Jh)(this,function(o){switch(o.label){case 0:if(n=t.name,r=t.url,n=(0,eC.ss)(n),!(0,eB.GE)(n))return[2,{error:eT.aq.INVALID_REFERENCE}];return n=(0,eC.Gw)(n),r=(0,eC.Gw)(r),[4,e("git remote add ".concat(n," ").concat(r),{serviceMethod:"git-add-remote"})];case 1:if((i=o.sent()).error)return[2,i];return[2,{error:null}]}})})).apply(this,arguments)}function eK(e,t){return eQ.apply(this,arguments)}function eQ(){return(eQ=(0,p._)(function(e,t){var n;return(0,g.Jh)(this,function(r){switch(r.label){case 0:var i,o,a;return[4,e((i=t.message,o=t.files,a=["--allow-empty","--allow-empty-message","--cleanup=whitespace","--no-edit","--quiet","-m ".concat((0,eC.Gw)(i))],o&&a.push.apply(a,["--only","--"].concat((0,Z._)(o.map(eC.Gw)))),"git --literal-pathspecs commit ".concat(a.join(" "))),{serviceMethod:"git-commit"})];case 1:if((n=r.sent()).error)return[2,n];return[2,{error:null}]}})})).apply(this,arguments)}function e0(e,t){return e1.apply(this,arguments)}function e1(){return(e1=(0,p._)(function(e,t){var n,r,i,o,a,l;return(0,g.Jh)(this,function(c){switch(c.label){case 0:return[4,eP(e,t=(0,eB.Qj)(t,!0))];case 1:if((n=c.sent()).error)return[2,n];if(!n.exists)return[2,{error:eT.aq.INVALID_REFERENCE}];if(r=["--quiet","--no-guess"],n.ref.type!==eA.l.REMOTE_BRANCH)return[3,3];return i=n.ref.branch,o=n.ref.name,[4,eP(e,"refs/heads/".concat(i))];case 2:if((a=c.sent()).error)return[2,a];return a.exists?r.push((0,eC.Gw)(i),"--"):r.push("-t","-b",(0,eC.Gw)(i),(0,eC.Gw)(o),"--"),[3,4];case 3:r.push((0,eC.Gw)(n.ref.name),"--"),c.label=4;case 4:return[4,e("git checkout ".concat(r.join(" ")),{serviceMethod:"git-switch-branch"})];case 5:if((l=c.sent()).error)return[2,l];return[2,{error:null}]}})})).apply(this,arguments)}function e2(e,t){return e8.apply(this,arguments)}function e8(){return(e8=(0,p._)(function(e,t){var n,r,i,o,a,l,c,s,u,d,f;return(0,g.Jh)(this,function(h){switch(h.label){case 0:return n=t.name,i=void 0===(r=t.startPoint)?"HEAD":r,o=t.track,l=void 0!==(a=t.checkout)&&a,[4,eP(e,n=(0,eC.C)(n))];case 1:if((c=h.sent()).error)return[2,c];if(c.exists)return[2,{error:eT.aq.BRANCH_ALREADY_EXISTS}];if("HEAD"===i){if(!0===o)return[2,{error:eT.aq.INVALID_REFERENCE}];o=!1}if(!(!1!==o))return[3,3];return[4,eP(e,i)];case 2:if((s=h.sent()).error)return[2,s];if(!s.exists&&!0===o)return[2,{error:eT.aq.INVALID_REFERENCE}];s.exists&&s.ref.type===eA.l.REMOTE_BRANCH&&void 0===o&&(o=!0),h.label=3;case 3:return u=["--quiet",o?"--track":"--no-track",(0,eC.Gw)(n),(0,eC.Gw)(i)],[4,e("git branch ".concat(u.join(" ")),{serviceMethod:"git-create-branch"})];case 4:if((d=h.sent()).error)return[2,d];if(!l)return[3,6];return[4,e0(e,n)];case 5:if((f=h.sent()).error)return[2,f];h.label=6;case 6:return[2,{error:null}]}})})).apply(this,arguments)}function e4(e){return e3.apply(this,arguments)}function e3(){return(e3=(0,p._)(function(e){var t,n,r,i,o=arguments;return(0,g.Jh)(this,function(a){switch(a.label){case 0:return t=o.length>1&&void 0!==o[1]?o[1]:{},n=["--quiet"],t.depth&&(r=t.deepen?"--deepen":"--depth",n.push("".concat(r,"=").concat(t.depth))),t.remote?n.push((0,eC.Gw)(t.remote)):n.push("--all"),[4,e("git fetch ".concat(n.join(" ")),{serviceMethod:"git-fetch"})];case 1:if((i=a.sent()).error)return[2,i];return[2,{error:null}]}})})).apply(this,arguments)}var e5=["main","master","trunk","dev","develop","development","staging","prod","production"].map(function(e){return'if [ $(git rev-parse --verify --quiet "heads/'.concat(e,'") ]; then\n      echo "refs/heads/').concat(e,'"\n    fi')}).join("\n"),e6='\ngit remote | while IFS= read -r remote; do\n  if [ -z "$remote" ]; then continue; fi\n  branch="$('.concat('\nif [ -f ".git/refs/remotes/$remote/HEAD" ]; then\n  echo "$(sed -e "s/^ref: refs\\/remotes\\/$remote\\///" < .git/refs/remotes/$remote/HEAD)"\nelse\n  remote_result="$(git ls-remote --symref "$remote" HEAD)"\n  if [ -z "$remote_result" ]; then\n    echo ""\n  else\n    echo "$(\n      echo "$remote_result" | \\\n      head -1 | \\\n      awk \'{print $2}\' | \\\n      sed -e "s/^refs\\/heads\\///"\n    )"\n  fi\nfi\n'.trim(),')"\n  if [ -z "$branch" ]; then continue; fi\n  echo "refs/remotes/$remote/$branch"\n  if [ $(git rev-parse --verify --quiet "heads/$branch") ]; then\n    echo "refs/heads/$branch"\n  fi\ndone\n').concat(e5,"\n").trim();function e9(e){return e7.apply(this,arguments)}function e7(){return(e7=(0,p._)(function(e){var t;return(0,g.Jh)(this,function(n){switch(n.label){case 0:return[4,e(e6,{serviceMethod:"git-find-default-branches"})];case 1:if((t=n.sent()).error)return[2,t];return[2,{refs:(0,Z._)(new Set((0,eC.so)(t.output,"\n"))).map(function(e){return(0,eA.L)(e)}),error:null}]}})})).apply(this,arguments)}var te=n(75647);function tt(e,t){return tn.apply(this,arguments)}function tn(){return(tn=(0,p._)(function(e,t){var n,r,i,o,a,l,c,s,u,d,f,h;return(0,g.Jh)(this,function(p){switch(p.label){case 0:if(t=(0,eB.bF)(t,!0),!(0,eB.Dc)(t))return[2,{error:eT.aq.INVALID_REFERENCE}];return n=(0,eC.C)(t),i=(r=(0,v._)((0,eC.Tg)(t),2))[0],o=r[1],a=["refs/heads/".concat(n),"refs/remotes/*/".concat(n)],i&&o&&(a.push("refs/heads/".concat(o)),a.push("refs/remotes/".concat(i,"/").concat(o))),[4,(0,te.ZP)(e,{pattern:a})];case 1:if((l=p.sent()).error)return[2,l];if(0===l.branches.length)return[2,{error:eT.aq.INVALID_REFERENCE}];c=!0,s=!1,u=void 0;try{for(d=l.branches[Symbol.iterator]();!(c=(f=d.next()).done);c=!0)if((h=f.value).type!==te.HO.REMOTE&&h.name===n||i&&o&&h.type!==te.HO.LOCAL&&h.remote===i&&h.name===o)return[2,{branch:h,error:null}]}catch(e){s=!0,u=e}finally{try{c||null==d.return||d.return()}finally{if(s)throw u}}return[2,{error:eT.aq.INVALID_REFERENCE}]}})})).apply(this,arguments)}function tr(e,t){return ti.apply(this,arguments)}function ti(){return(ti=(0,p._)(function(e,t){var n,r,i,o,a;return(0,g.Jh)(this,function(l){switch(l.label){case 0:if(n=t.path,i=void 0===(r=t.revision)?"HEAD":r,""===n)return[2,{content:null,error:null}];return o=(0,eC.Gw)("".concat(i,":").concat(n)),[4,e((0,_.T3)(n)?"git --no-pager show ".concat(o," | base64"):"git --no-pager show ".concat(o),{verbatim:!0,serviceMethod:"git-get-file-contents"})];case 1:if((a=l.sent()).error){if(a.error===eT.aq.PATH_MATCHED_NO_FILES)return[2,{content:null,error:null}];return[2,a]}return[2,{content:a.output,error:null}]}})})).apply(this,arguments)}function to(e){return ta.apply(this,arguments)}function ta(){return(ta=(0,p._)(function(e){var t,n,r,i,o,a,l,c,s,u,d,f,h,p;return(0,g.Jh)(this,function(m){switch(m.label){case 0:return[4,e("git remote -v",{serviceMethod:"git-get-remotes"})];case 1:if((t=m.sent()).error)return[2,t];if(""===t.output)return[2,{remotes:new Map,error:null}];n=new Map,r=!0,i=!1,o=void 0;try{for(a=(0,eC.so)(t.output,"\n")[Symbol.iterator]();!(r=(l=a.next()).done);r=!0)c=l.value,u=(s=(0,v._)(c.split(/\s+/),3))[0],d=s[1],f=s[2],u&&d&&f&&(p=null!==(h=n.get(u))&&void 0!==h?h:{name:u,fetch:"",push:""},"(fetch)"===f?(p.fetch=d,""===p.push&&(p.push=d),n.set(u,p)):"(push)"===f&&(p.push=d,""===p.fetch&&(p.fetch=d),n.set(u,p)))}catch(e){i=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return[2,{remotes:n,error:null}]}})})).apply(this,arguments)}var tl='git commit --allow-empty --no-edit --quiet -m "Initial commit"',tc='git add -A && git commit --allow-empty --no-edit --quiet -m "Initial commit"';function ts(e){return tu.apply(this,arguments)}function tu(){return(tu=(0,p._)(function(e){var t,n,r,i,o,a,l,c,s,u=arguments;return(0,g.Jh)(this,function(d){switch(d.label){case 0:return r=void 0===(n=(t=u.length>1&&void 0!==u[1]?u[1]:{}).initialCommit)||n,o=void 0===(i=t.includeAllInitialFiles)||i,[4,(0,ek.ZP)(e)];case 1:if((a=d.sent()).error)return[2,a];if(a.type!==ek.y5.INITIALIZING)return[2,{error:eT.aq.ALREADY_INITIALIZED}];if(a.state!==ek.yG.ON_UNBORN_BRANCH)return[3,4];if(!r)return[3,3];return[4,e(o?tc:tl,{serviceMethod:"git-init"})];case 2:if((l=d.sent()).error)return[2,l];d.label=3;case 3:return[2,{error:null}];case 4:return[4,e(["git init","git checkout -b main"],{serviceMethod:"git-init"})];case 5:if((c=d.sent()).error)return[2,c];if(!r)return[3,7];return[4,e(o?tc:tl,{serviceMethod:"git-init"})];case 6:if((s=d.sent()).error)return[2,s];d.label=7;case 7:return[2,{error:null}]}})})).apply(this,arguments)}function td(e){return tf.apply(this,arguments)}function tf(){return(tf=(0,p._)(function(e){var t;return(0,g.Jh)(this,function(n){switch(n.label){case 0:return[4,e("git rev-parse --is-inside-work-tree",{serviceMethod:"git-is-initialized"})];case 1:if((t=n.sent()).error){if(t.error===eT.aq.NOT_INITIALIZED)return[2,{initialized:!1,error:null}];return[2,t]}return[2,{initialized:"true"===t.output,error:null}]}})})).apply(this,arguments)}function th(e){var t=(0,v._)(e.trimStart().split("\x1f"),11),n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],l=t[5],c=t[6],s=t[7],u=t[8],d=t[9],f=t[10],h=[],p=i?i.split(" "):null,m=!1,g=!0,y=!1,b=void 0;try{for(var Z,w=(0,eC.so)(n,",")[Symbol.iterator]();!(g=(Z=w.next()).done);g=!0){var x=Z.value;if("grafted"===x){m=!0;continue}h.push((0,eA.L)(x))}}catch(e){y=!0,b=e}finally{try{g||null==w.return||w.return()}finally{if(y)throw b}}return{refs:h,hash:r,parents:p,grafted:m,author:{name:o,email:a,date:1e3*parseInt(l,10)},committer:{name:c,email:s,date:1e3*parseInt(u,10)},subject:d?d.trim():"",body:f?f.trim():""}}function tp(e){return tm.apply(this,arguments)}function tm(){return(tm=(0,p._)(function(e){var t,n=arguments;return(0,g.Jh)(this,function(r){switch(r.label){case 0:var i,o,a,l,c,s,u;return[4,e((a=void 0===(o=(i=n.length>1&&void 0!==n[1]?n[1]:{}).max)?25:o,l=i.skip,c=i.revRange,s=i.path,u=["-z","--decorate=full","--full-history",'--format="format:%D%x1f%H%x1f%P%x1f%an%x1f%ae%x1f%at%x1f%cn%x1f%ce%x1f%ct%x1f%s%x1f%b"'],a=Math.max(1,Math.min(a,200)),u.push("-n ".concat(a)),l&&u.push("--skip ".concat(l)),c&&u.push(c),u.push("--"),s&&u.push(s),"git log ".concat(u.join(" "))),{serviceMethod:"git-log"})];case 1:if((t=r.sent()).error){if(t.error===eT.aq.NO_COMMITS)return[2,{commits:[],error:null}];return[2,t]}return[2,{commits:(0,eC.so)(t.output,"\x00").map(th),error:null}]}})})).apply(this,arguments)}function tv(e){return tg.apply(this,arguments)}function tg(){return(tg=(0,p._)(function(e){var t,n=arguments;return(0,g.Jh)(this,function(r){switch(r.label){case 0:return[4,e(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[];return e.cached&&t.push("--cached"),e.deleted&&t.push("--deleted"),e.modified&&t.push("--modified"),e.others&&t.push("--others"),e.ignored&&t.push("--ignored"),e.directory&&t.push("--directory"),e.noEmptyDirectory&&t.push("--no-empty-directory"),"git ls-files ".concat(t.join(" "))}(n.length>1&&void 0!==n[1]?n[1]:{}),{serviceMethod:"git-ls-files"})];case 1:if((t=r.sent()).error)return[2,t];return[2,{files:t.output.split("\n").filter(function(e){return e.length>0}),error:null}]}})})).apply(this,arguments)}var ty=n(91075);function tb(e){return tZ.apply(this,arguments)}function tZ(){return(tZ=(0,p._)(function(e){var t,n,r,i,o,a,l,c,s,u,d,f=arguments;return(0,g.Jh)(this,function(h){switch(h.label){case 0:return t=f.length>1&&void 0!==f[1]?f[1]:{},[4,(0,eV.Z)(e)];case 1:if((n=h.sent()).error)return[2,n];if(!n.branch)return[2,{error:eT.aq.HEAD_DETACHED}];if(r=null,i=null,t.publish){if(n.upstream)return[2,{error:eT.aq.BRANCH_ALREADY_EXISTS}];r=t.publish.remote,i=null!==(o=t.publish.name)&&void 0!==o?o:n.branch,r=(0,eC.C)(r),i=(0,eC.C)(i)}else{if(!n.upstream)return[2,{error:eT.aq.UPSTREAM_NOT_SET}];if(!t.force&&n.upstream.behind>0)return[2,{error:eT.aq.PUSH_REJECTED}];r=(a=(0,v._)((0,eC.Tg)(n.upstream.branch),2))[0],i=a[1]}if(!r||!i)return[2,{error:eT.aq.UPSTREAM_NOT_SET}];if(t.force)return[3,3];return[4,e4(e,{remote:r})];case 2:if((l=h.sent()).error)return[2,l];h.label=3;case 3:if(!t.publish)return[3,5];return[4,eP(e,"refs/remotes/".concat(r,"/").concat(i))];case 4:if((c=h.sent()).error)return[2,c];if(c.exists&&c.ref.type===eA.l.REMOTE_BRANCH)return[2,{error:eT.aq.BRANCH_ALREADY_EXISTS}];h.label=5;case 5:return s=["--quiet"],t.force&&!t.publish&&s.push("--force-with-lease"),t.publish&&s.push("--set-upstream"),u="refs/heads/".concat(n.branch,":refs/heads/").concat(i),s.push((0,eC.Gw)(r),(0,eC.Gw)(u)),[4,e("git push ".concat(s.join(" ")),{serviceMethod:"git-push"})];case 6:if((d=h.sent()).error)return[2,d];return[2,{error:null}]}})})).apply(this,arguments)}function tw(e,t){return tx.apply(this,arguments)}function tx(){return(tx=(0,p._)(function(e,t){var n;return(0,g.Jh)(this,function(r){switch(r.label){case 0:if(t=(0,eC.ss)(t),!(0,eB.GE)(t))return[2,{error:eT.aq.INVALID_REFERENCE}];return[4,e("git remote rm ".concat((0,eC.Gw)(t)),{serviceMethod:"git-remove-remote"})];case 1:if((n=r.sent()).error)return[2,n];return[2,{error:null}]}})})).apply(this,arguments)}function tC(e,t){return t_.apply(this,arguments)}function t_(){return(t_=(0,p._)(function(e,t){var n,r,i;return(0,g.Jh)(this,function(o){switch(o.label){case 0:if(n=t.remote,r=t.url,n=(0,eC.ss)(n),!(0,eB.GE)(n)||!(0,eB.LY)(r))return[2,{error:eT.aq.INVALID_REFERENCE}];return n=(0,eC.Gw)(n),r=(0,eC.Gw)(r),[4,e("git remote set-url ".concat(n," ").concat(r),{serviceMethod:"git-set-remote-url"})];case 1:if((i=o.sent()).error)return[2,i];return[2,{error:null}]}})})).apply(this,arguments)}function tS(e,t){return tE.apply(this,arguments)}function tE(){return(tE=(0,p._)(function(e,t){var n,r;return(0,g.Jh)(this,function(i){switch(i.label){case 0:if(!(n=function(e){if("all"in e)return e.all?["git add -A"]:["git reset -q -- ."];var t=e.add,n=e.reset;if(!(null==t?void 0:t.length)&&!(null==n?void 0:n.length))return null;var r=[];if(t){var i=t.map(eC.Gw).join(" ");r.push("git --literal-pathspecs add -- ".concat(i))}if(n){var o=n.map(eC.Gw).join(" ");r.push("git --literal-pathspecs reset -q -- ".concat(o))}return r}(t)))return[2,{error:null}];return[4,e(n,{serviceMethod:"git-stage-files"})];case 1:if((r=i.sent()).error)return[2,r];return[2,{error:null}]}})})).apply(this,arguments)}var tk=n(63043);function tT(){var e=(0,U._)(['\n  fragment GitServiceGitHubUser on CurrentUser {\n    image\n    username\n    email\n    gitHubInfo {\n      accessToken\n      userInfo {\n        username\n        email\n        avatarUrl\n      }\n    }\n    repositories(count: 1, after: "0") {\n      ... on RepositoryConnection {\n        items {\n          id\n        }\n      }\n    }\n  }\n']);return tT=function(){return e},e}function tR(){var e=(0,U._)(["\n  query GitServiceCurrentUser {\n    currentUser {\n      id\n      ...GitServiceGitHubUser\n    }\n  }\n  ","\n"]);return tR=function(){return e},e}var tD=(0,L.Ps)(tT()),tI=(0,L.Ps)(tR(),tD);function tG(e){return tB.apply(this,arguments)}function tB(){return(tB=(0,p._)(function(e){var t,n,r,i,o,a,l,c,s,u,d,f,h,p,m,v,y,b;return(0,g.Jh)(this,function(g){switch(g.label){case 0:return t=e.defaultUsername,n=e.defaultUserId,r=e.onProfiles,a=new Map,[4,null===N.l||void 0===N.l?void 0:N.l.query({query:tI,fetchPolicy:"network-only",context:{noBatch:!0}})];case 1:var Z,w;return d=(u=null!==(s=null==(c=(null!==(l=g.sent())&&void 0!==l?l:{data:null}).data)?void 0:c.currentUser)&&void 0!==s?s:{username:t,id:n}).id,f=u.username,d&&f&&(m={provider:eT.rG.REPLIT_DEFAULT,email:"".concat(d,"-").concat(f,"@").concat(tk.J),username:f,avatar:null!==(p=null==c?void 0:null===(h=c.currentUser)||void 0===h?void 0:h.image)&&void 0!==p?p:null},a.set(m.provider,m)),(v=null==c?void 0:null===(o=c.currentUser)||void 0===o?void 0:null===(i=o.gitHubInfo)||void 0===i?void 0:i.userInfo)&&v.email&&v.username&&(null==c?void 0:null===(w=c.currentUser)||void 0===w?void 0:null===(Z=w.repositories)||void 0===Z?void 0:Z.__typename)==="RepositoryConnection"&&(b={provider:eT.rG.GITHUB,email:v.email,username:v.username,avatar:null!==(y=v.avatarUrl)&&void 0!==y?y:null},a.set(b.provider,b)),r(a),[2]}})})).apply(this,arguments)}function tA(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.author,n=e.committer,r={GIT_AUTHOR_NAME:"",GIT_AUTHOR_EMAIL:"",GIT_COMMITTER_NAME:"",GIT_COMMITTER_EMAIL:"",GIT_ASKPASS:"replit-git-askpass",GIT_PAGER:"",GIT_EDITOR:"",PAGER:"",EDITOR:""};if(t){r.GIT_AUTHOR_NAME=t.username,r.GIT_COMMITTER_NAME=t.username;var i=tP(t);r.GIT_AUTHOR_EMAIL=i,r.GIT_COMMITTER_EMAIL=i,n&&(r.GIT_COMMITTER_NAME=n.username,r.GIT_COMMITTER_EMAIL=tP(n))}return r}function tP(e){if("id"in e)return"".concat(e.id,"-").concat(e.username,"@users.noreply.replit.com");if("email"in e)return e.email;throw Error("Invalid user")}var tN=n(39756),tU=n(30084),tL=".git",tO=n(59173),tM=function(){"use strict";function e(t,n){(0,ea._)(this,e),this.cache=new Map,this.lastInvalidation=0,this.ttl=t,this.debounceTime=n}var t=e.prototype;return t.has=function(e){return this.cache.has(e)},t.get=function(e){var t=this.cache.get(e);if(!t)throw Error("No value found for key: ".concat(e));return t.result},t.set=function(e,t){var n=this,r=this.cache.get(e);r&&(clearTimeout(r.timeout),this.cache.delete(e));var i={result:t,timeout:setTimeout(function(){return n.cache.delete(e)},this.ttl),pending:!0};t.finally(function(){return i.pending=!1}),this.cache.set(e,i)},t.invalidate=function(){if(!(Date.now()-this.lastInvalidation<this.debounceTime)){var e=new Map,t=!0,n=!1,r=void 0;try{for(var i,o=this.cache[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=(0,v._)(i.value,2),l=a[0],c=a[1];c.pending?e.set(l,c):clearTimeout(c.timeout)}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}this.cache=e,this.lastInvalidation=Date.now()}},t.clear=function(){var e=!0,t=!1,n=void 0;try{for(var r,i=this.cache.values()[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value;clearTimeout(o.timeout)}}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}this.cache.clear(),this.lastInvalidation=0},e}(),tX=n(97631),tF=/^(fatal: |error: |remote: error: |CONFLICT \([^)]+\): )/im,tW=/^cat: .*: No such file or directory$/im;function tH(e){return RegExp("^fatal: ".concat(e.source),"im")}function tV(e){return RegExp("^error: ".concat(e.source),"im")}var tz=[{error:eT.aq.NOT_INITIALIZED,match:[tH(/not a git repository/)]},{error:eT.aq.UNAUTHENTICATED,match:[tH(/Authentication failed/),tH(/unable to access/),tH(/repository \S+ not found/),tH(/could not read Username/),tH(/could not read Password/),tH(/Could not read from remote/)]},{error:eT.aq.INDEX_FILE_CORRUPT,match:[tH(/index file corrupt/),tH(/index file smaller than expected/),tV(/index file .*?\.idx is too small/)]},{error:eT.aq.UNKNOWN_REMOTE,match:[tH(/No such remote/),tV(/No such remote/)]},{error:eT.aq.INDEX_LOCKED,match:[tH(/Unable to create .*?\.git\/index\.lock/),tV(/Unable to create .*?\.git\/index\.lock/)]},{error:eT.aq.NO_COMMITS,match:[tH(/your current branch '.*?' does not have any commits yet/)]},{error:eT.aq.PATH_MATCHED_NO_FILES,match:[tH(/pathspec '.*?' did not match any files/),tH(/pathspec '.*?' did not match any file\(s\) known to git/),tH(/path '.*?' does not exist/),tH(/path '.*?' exists on disk, but not in/)]},{error:eT.aq.USER_NOT_CONFIGURED,match:[tH(/unable to auto-detect email address/),tH(/unable to auto-detect name/),tH(/empty ident name \(for <.*?>\) not allowed/)]},{error:eT.aq.INVALID_REFERENCE,match:[tH(/invalid reference: .*?$/),tH(/'.*?' - not a valid ref/)]},{error:eT.aq.BRANCH_ALREADY_EXISTS,match:[tH(/A branch named '.*?' already exists/)]},{error:eT.aq.MERGE_CONFLICT,match:[tH(/Not possible to fast-forward, aborting/),tH(/refusing to merge unrelated histories/),tH(/Exiting because of an unresolved conflict/),tH(/Exiting because of unfinished merge/),tV(/Failed to merge in the changes/),RegExp("^CONFLICT \\([^\\)]+\\): ".concat(/Merge conflict in/.source),"im")]},{error:eT.aq.UPSTREAM_NOT_SET,match:[tH(/The current branch \S+ has no upstream branch/),tH(/No configured push destination/)]},{error:eT.aq.HEAD_DETACHED,match:[tH(/HEAD does not point to a branch/),tH(/ref HEAD is not a symbolic ref/)]},{error:eT.aq.DIRTY_WORKTREE,match:[tV(/Your local changes to the following files would be overwritten/),tV(/The following untracked working tree files would be overwritten/),tV(/\S+ is not possible because you have unmerged files/),tV(/cannot rebase: You have unstaged changes/)]},{error:eT.aq.PROTECTED_BRANCH,match:[RegExp("^remote: error: ".concat(/.*? Protected branch update failed/.source),"im")]},{error:eT.aq.PUSH_REJECTED,match:[tV(/failed to push some refs to/)]},{error:eT.aq.REMOTE_ALREADY_EXISTS,match:[tH(/remote .*? already exists/),tV(/remote .*? already exists/)]},{error:eT.aq.INVALID_STATE,match:[tH(/There is no merge in progress/),tH(/There is no merge to abort/),tH(/No rebase in progress/)]}],tj=n(26572);function tq(){return(tq=(0,p._)(function(e,t,n,r){var i,o,a,l,c,s,u;return(0,g.Jh)(this,function(d){switch(d.label){case 0:if("open"!==e.status)return[2,{output:"JS Error\nchannel closed before command was run",error:eT.aq.CHANNEL_CLOSED}];d.label=1;case 1:return d.trys.push([1,3,,4]),i="",o=e.onCommand(function(e){null!==e.output&&void 0!==e.output&&(i+=e.output)}),a=void 0,(l=Promise.race([new Promise(function(e){return a=setTimeout(e,9e4)}),e.request({exec:{env:n,args:t,blocking:!0}})])).finally(function(){o(),clearTimeout(a)}),[4,l];case 2:if(void 0===(c=d.sent()))return P.kg.error("Git request timed out.",(0,m._)({appService:"git",command:t,gitEnv:JSON.stringify(n),TIMEOUT:9e4},r)),[2,{output:i,error:eT.aq.TIMEOUT}];if(!c.ok&&c.channelClosed)return[2,{output:"JS Error\nchannel closed during command execution",error:eT.aq.CHANNEL_CLOSED}];if(c.error||!c.ok)return[2,{output:s="".concat(c.error,"\n").concat(i),error:function(e){if(tF.test(e)){for(var t=0;t<tz.length;t++)for(var n=0;n<tz[t].match.length;n++)if(tz[t].match[n].test(e))return tz[t].error;return eT.aq.UNKNOWN}return tW.test(e)?eT.aq.PATH_MATCHED_NO_FILES:eT.aq.UNKNOWN_NOT_GIT}(s)}];return[2,{output:i,error:null}];case 3:return u=d.sent(),I.$e(function(e){e.setTag("service","git"),e.setExtra("command",t),e.setExtra("env",n),r&&e.setExtra("options",r),I.Tb(u)}),[2,{output:"JS Error\n".concat(String(u)),error:eT.aq.UNKNOWN_NOT_GIT}];case 4:return[2]}})})).apply(this,arguments)}var tY=function(){"use strict";function e(t){var n=t.container,r=t.getEnv,i=t.awaitPromise,o=this;(0,ea._)(this,e),this.cache=new tM(3e4,2e3),this.running=(0,tO.u)(!1),this.queue=[],n.openChannel({service:"exec"},function(e){var t,n,a=e.channel,l=(t=(0,p._)(function(e,t){var n,o;return(0,g.Jh)(this,function(l){switch(l.label){case 0:if(0===e.length)throw Error("Expected at least one command");if(!i)return[3,2];return[4,i];case 1:l.sent(),l.label=2;case 2:return n=Date.now(),[4,function(e,t,n,r){return tq.apply(this,arguments)}(a,["bash","-c",Array.isArray(e)?e.join(" && "):e],r(),t)];case 3:if(o=l.sent(),(0,tX.J)(e,o,!1,n),o.error)return[2,o];return[2,{output:(null==t?void 0:t.verbatim)?o.output:o.output.trim(),error:null}]}})}),function(e,n){return t.apply(this,arguments)}),c=function(e,t){if(0===e.length)throw Error("Expected at least one command");var n=Array.isArray(e)?e.join(" && "):e;if(o.cache.has(n)){var r=o.cache.get(n);return r.then(function(t){(0,tX.J)(e,t,!0)}),r}var i=l(n,t);return o.cache.set(n,i),i},s=function(e,t){return o.cache.clear(),l(e,t)},u=(n=(0,p._)(function(){var e;return(0,g.Jh)(this,function(t){switch(t.label){case 0:if(!(o.queue.length>0)||"open"!==a.status)return[3,7];if(!(e=o.queue.shift()))return[3,6];if("read"!==e.type)return[3,2];return[4,e.fn(c)];case 1:case 3:return t.sent(),[3,6];case 2:if("write"!==e.type)return[3,4];return[4,e.fn(s)];case 4:return[4,e.fn(l)];case 5:t.sent(),t.label=6;case 6:return[3,0];case 7:return 0===o.queue.length&&o.running.set(!1),[2]}})}),function(){return n.apply(this,arguments)});return o.running.current&&u(),o.running.subscribe(function(e){e&&u()})})}var t=e.prototype;return t.add=function(e,t){var n,r=(0,tj.Z)();return this.queue.push({type:t,fn:(n=(0,p._)(function(t){var n;return(0,g.Jh)(this,function(i){switch(i.label){case 0:return[4,e(t)];case 1:return n=i.sent(),r.resolve(n),[2]}})}),function(e){return n.apply(this,arguments)})}),this.running.current||this.running.set(!0),r.promise},t.wrap=function(e,t){var n=this;if("function"!=typeof e)throw Error("Expected a function");return function(){for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return n.add(function(t){return e.apply(void 0,[t].concat((0,Z._)(i)))},t)}},e}();function t$(e,t){return tJ.apply(this,arguments)}function tJ(){return(tJ=(0,p._)(function(e,t){var n,r,i,o;return(0,g.Jh)(this,function(a){switch(a.label){case 0:return n=t.upstream,r=t.branchName,i=["--set-upstream-to",n],r&&i.push((0,eC.Gw)(r)),[4,e("git branch ".concat(i.join(" ")),{serviceMethod:"git-set-branch-upstream"})];case 1:if((o=a.sent()).error)return[2,o];return[2,{error:null}]}})})).apply(this,arguments)}var tK=n(65307),tQ=n(23015),t0=n(67795),t1=n(43429),t2=n(35375),t8=n(17789),t4=n(30671),t3=n(10653);function t5(e){return(0,v._)((0,t1.useState)(function(){var t,n,r,i,o,a,l,f,S,N,U,L,O,M,j,$,J,Q,ee,er,ea,el,eu,ed,eZ,eC,e_,eE,eD,eG,eB,eA,eN,eL,eM,eF,eH,ej,eq,eJ,eQ,e1,e8,e3,e5,e6,e7,tn,ti,ta,tl,tc,tu,tf,th,tm,tg,tZ,tx,t_,tE,tk,tT,tR,tD,tI,tB,tP,tO,tM,tX,tF,tW,tH;return eq=(t=e).riverCtx,eQ=void 0===(eJ=t.runnerMode)?"outputs":eJ,e1=t.onUnrecoverableError,e8=t.openFile,e3=t.openMultipleFiles,e5=t.openMultipleURLs,e6=t.onFirewallDenied,e7=t.channelRequestPriority,tn=t.enableUserEvents,ti=t.autoUpdateDotReplitOnPortInfo,ta=t.dotdevUrlEnabled,tl=t.onPresenceCommand,tc=t.getColorForUser,tu=t.openTelemetryTracing,tf=t.ctx,tm=function(e){var t=e.container,n=e.enabled,r=e.onEventSent,i=(0,C.ZP)();r&&i.on(h.EVENT_SENT,r);var o=null;function a(e,t){return l.apply(this,arguments)}function l(){return(l=(0,p._)(function(e,r){var o,a,l,s,u,d,f,p;return(0,g.Jh)(this,function(g){switch(g.label){case 0:if(!n)return[2];return[4,function(){return c.apply(this,arguments)}()];case 1:if(l=g.sent(),u=null==(s=t.getContext())?void 0:null===(o=s.currentUser)||void 0===o?void 0:o.id,d=null==s?void 0:null===(a=s.repl)||void 0===a?void 0:a.id,f=window.location.href,p={userEvent:{eventName:e,eventData:function e(t){if(!("object"==typeof t&&null!==t&&null!==Object.getPrototypeOf(t)))throw Error("encodeBareStruct must be called with a plain object");return{fields:Object.entries(t).reduce(function(t,n){var r=(0,v._)(n,2),i=r[0],o=r[1];return void 0===o||"object"==typeof o&&o&&0===Object.keys(o).length?t:(0,k._)((0,m._)({},t),(0,ew._)({},i,function t(n){switch(void 0===n?"undefined":(0,ex._)(n)){case"string":return{kind:"stringValue",stringValue:n};case"number":return{kind:"numberValue",numberValue:n};case"boolean":return{kind:"boolValue",boolValue:n};case"object":if(null===n)return{kind:"nullValue",nullValue:null};if(Array.isArray(n))return{kind:"listValue",listValue:{values:n.map(t)}};return{kind:"structValue",structValue:e(n)};default:throw Error("Unexpected value: ".concat(n))}}(o)))},{})}}((0,m._)({userId:u,replId:d,url:f},r))}},"open"!==l.status)return I.$e(function(e){e.setTag("service","user-events"),e.setExtra("command",p),e.setExtra("userId",u),e.setExtra("replId",d),e.setExtra("url",f),e.setExtra("channelId",l.id),I.Tb(Error("UserEvents channel is not open: ".concat(l.status)))}),[2];return i.emit(h.EVENT_SENT,e,r),l.send(p),[2]}})})).apply(this,arguments)}function c(){return(c=(0,p._)(function(){return(0,g.Jh)(this,function(e){return o?[2,o]:[2,new Promise(function(e){i.once(h.CHANNEL_OPENED,function(t){e(t)})})]})})).apply(this,arguments)}return a("meta:start",{}),t.openChannel({service:"null",skip:function(){return!n}},function(e){var t=e.channel;return a("meta:ready",{}),o=t,i.emit(h.CHANNEL_OPENED,t),function(){o=null}}),{emit:a}}({container:th=(0,y.ZP)({riverCtx:eq,onUnrecoverableError:e1,onFirewallDenied:e6,ctx:tf}),enabled:!!(void 0!==tn&&tn)}),tg=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,C.ZP)();t.setMaxListeners(1e3);var n=null,r={openFiles:[],activeTab:0};function i(e){E()(r,e)||(r=e,t.emit(s.SESSION_STATE_CHANGED,r))}return{onSessionStateChanged:function(e){return t.on(s.SESSION_STATE_CHANGED,e),function(){t.removeListener(s.SESSION_STATE_CHANGED,e)}},onDeeplinkUpdated:function(e){return t.on(s.DEEPLINK_CHANGED,e),n&&(e(n),n=null),function(){t.removeListener(s.DEEPLINK_CHANGED,e)}},openFile:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e.openFile){e.openFile({path:t,newTab:n.newTab,newPane:n.newPane,newPaneEdge:n.newPaneEdge,col:n.col,line:n.line});return}var o=n.tabIndex,a=n.newTab;if(void 0!==o){!function(e,t){var n=t||r.openFiles.length;if(e<0||e>=n||!Number.isInteger(e))throw Error("Invalid index: ".concat(e,". Index must be an integer between 0 and ").concat(n))}(o,r.openFiles.length+1);var l=r.openFiles.slice(),c=r.openFiles.indexOf(t);if(-1===c){l.splice(o,1,t),i({openFiles:l,activeTab:l.indexOf(t)});return}if(c===o){i((0,k._)((0,m._)({},r),{activeTab:l.indexOf(t)}));return}l.splice(c,1),l.splice(o,0,t);var s=l.indexOf(t);i({openFiles:l,activeTab:s});return}if(r.openFiles.includes(t)){i((0,k._)((0,m._)({},r),{activeTab:r.openFiles.indexOf(t)}));return}var u=r.openFiles.slice();if(a){var d=0===u.length?0:r.activeTab+1;u.splice(d,0,t),i({openFiles:u,activeTab:d});return}var f=r.activeTab;u.splice(f,1,t),i({openFiles:u,activeTab:f})},updateDeeplink:function(e){t.emit(s.DEEPLINK_CHANGED,e),n=e},getActiveFile:function(){var e=r.openFiles,t=r.activeTab;if(0!==e.length)return e[t]},getState:function(){return r}}}({openFile:e8}),tZ=(0,R.Z)({container:th,channelRequestPriority:null==e7?void 0:e7.fs}),tx=function(e){var t=e.container,n=e.onCommand,r=e.getColorForUser,i=(0,C.ZP)();i.setMaxListeners(1/0);var o=[],a=null,l=[],s={},u=null;function d(){return f.apply(this,arguments)}function f(){return(f=(0,p._)(function(){return(0,g.Jh)(this,function(e){return u?[2,u]:[2,new Promise(function(e){i.once(c.USERS_UPDATE,function(){if(!u)throw Error("Expected presenceChannel to be set");e(u)})})]})})).apply(this,arguments)}function h(e){E()(a,e)||(a=e,i.emit(c.FOLLOWED_USER_CHANGED,e))}function m(){return(m=(0,p._)(function(e){var t,n;return(0,g.Jh)(this,function(r){switch(r.label){case 0:if((null==a?void 0:a.username)===e)throw Error("Already following user with username ".concat(e));if(!a)return[3,2];return[4,v()];case 1:r.sent(),r.label=2;case 2:return[4,d()];case 3:if(t=r.sent(),!(n=o.find(function(t){return t.username===e})))return[2];return h(n),n.sessions.forEach(function(e){t.send({followUser:{session:e.id}})}),[2]}})})).apply(this,arguments)}function v(){return y.apply(this,arguments)}function y(){return(y=(0,p._)(function(){var e,t;return(0,g.Jh)(this,function(n){switch(n.label){case 0:if(!a)throw Error("No user to unfollow");return e=a,h(null),[4,d()];case 1:return t=n.sent(),e.sessions.forEach(function(e){t.send({unfollowUser:{session:e.id}})}),[2]}})})).apply(this,arguments)}return t.openChannel({service:"presence",name:"presencer"},function(e){var t=e.channel;return t.onCommand(function(e){null==n||n(e);var t={cmd:e,emitter:i,activeUsers:o,userIdToFile:s,followedUser:a,setFollowedUser:h,followingUsers:l,getColorForUser:r};switch(e.body){case"roster":!function(e){var t=e.cmd,n=e.emitter,r=e.activeUsers,i=e.userIdToFile,o=e.followedUser,a=e.followingUsers,l=e.setFollowedUser,s=e.getColorForUser,u=t.roster;if(u){var d=u.user,f=u.files;if(d&&f){var h=new Set;if(r.splice(0,r.length),d.forEach(function(e){if(!(!e.id||!e.name||!e.roles||h.has(e.id))){var t=f.filter(function(t){return t.userId===e.id}).map(function(e){if(!e.session||!e.timestamp)throw Error("Expected session and associated with user");return{id:e.session,activeFile:e.file||null,timestamp:(0,x.gs)(e.timestamp)}}),n=null==s?void 0:s({userId:e.id});r.push({id:e.id,username:e.name,roles:e.roles,color:null!=n?n:(0,x.i7)(r),sessions:t}),h.add(e.id)}}),r.forEach(function(e){i[e.id]=(0,x.f0)(e)}),n.emit(c.USERS_UPDATE,(0,Z._)(r)),a.filter(function(e){return!r.some(function(t){return t.id===e.id})}).forEach(function(e){var t=a.indexOf(e);-1!==t&&(a.splice(t,1),n.emit(c.FOLLOWING_USERS_CHANGED,{followingUsers:(0,Z._)(a),user:e,type:"unfollow"}))}),o){if(!r.some(function(e){return e.id===o.id})){l(null);return}var p=i[o.id];n.emit(c.USER_OPENED_FILE,{user:o,file:p})}}}}(t);break;case"join":!function(e){var t=e.cmd,n=e.emitter,r=e.activeUsers,i=e.userIdToFile,o=e.getColorForUser,a=t.join;if(a.id&&a.name&&a.roles&&a.session){var l=r.find(function(e){return e.id===a.id}),s=Math.floor(Date.now()/1e3),u=w.google.protobuf.Timestamp.create({seconds:s}),d=(0,x.gs)(u);if(l)l.sessions.push({id:a.session,activeFile:null,timestamp:d});else{var f=null==o?void 0:o({userId:a.id}),h={id:a.id,username:a.name,roles:a.roles,color:null!=f?f:(0,x.i7)(r),sessions:[{id:a.session,activeFile:null,timestamp:d}]};i[a.id]=null,r.push(h),n.emit(c.USER_JOIN,h),n.emit(c.USERS_UPDATE,(0,Z._)(r))}}}(t);break;case"part":!function(e){var t=e.cmd,n=e.emitter,r=e.activeUsers,i=e.userIdToFile,o=e.followedUser,a=e.followingUsers,l=e.setFollowedUser;if(t.part&&t.part.id&&t.part.session){var s=t.part,u=s.id,d=s.session,f=r.findIndex(function(e){return e.id===u}),h=r[f];if(1===h.sessions.length){r.splice(f,1),delete i[h.id],n.emit(c.USER_LEAVE,h),n.emit(c.USERS_UPDATE,(0,Z._)(r)),o&&l(null);var p=a.findIndex(function(e){return e.id===h.id});-1!==p&&(a.splice(p,1),n.emit(c.FOLLOWING_USERS_CHANGED,{followingUsers:(0,Z._)(a),user:h,type:"unfollow"}))}else{h.sessions=h.sessions.filter(function(e){return e.id!==d});var m=(0,x.f0)(h);i[h.id]!==m&&(i[h.id]=m,n.emit(c.USER_OPENED_FILE,{user:h,file:m}))}}}(t);break;case"fileOpened":!function(e){var t=e.emitter,n=e.cmd,r=e.activeUsers,i=e.userIdToFile;if(n.fileOpened){var o=n.fileOpened,a=o.userId,l=o.file,s=o.timestamp,u=o.session,d=l||null;if(!a||!s)throw Error("Expected userId and timestamp associated with file opened command");var f=r.find(function(e){return e.id===a});if(!f)throw Error("Expected user with ID ".concat(a));var h=f.sessions.find(function(e){return e.id===u});if(!h)throw Error("Expected session with ID ".concat(h));h.activeFile=d,h.timestamp=(0,x.gs)(s),i[a]=d,t.emit(c.USER_OPENED_FILE,{user:f,file:d})}}(t);break;case"followUser":!function(e){var t=e.cmd,n=e.emitter,r=e.activeUsers,i=e.followingUsers,o=t.followUser;if(!o.session)throw Error("Expected session associated with follow user");var a=o.session,l=(0,x.N5)(a,r);i.some(function(e){return e.id===l.id})||(i.push(l),n.emit(c.FOLLOWING_USERS_CHANGED,{followingUsers:(0,Z._)(i),user:l,type:"follow"}))}(t);break;case"unfollowUser":!function(e){var t=e.cmd,n=e.emitter,r=e.activeUsers,i=e.followingUsers,o=t.unfollowUser;if(!o.session)throw Error("Expected session associated with follow user");var a=o.session,l=(0,x.N5)(a,r),s=i.findIndex(function(e){return e.id===l.id});-1!==s&&(i.splice(s,1),n.emit(c.FOLLOWING_USERS_CHANGED,{followingUsers:(0,Z._)(i),user:l,type:"unfollow"}))}(t);break;case"sessionTimestampUpdated":!function(e){var t=e.cmd,n=e.emitter,r=e.activeUsers,i=e.userIdToFile,o=t.sessionTimestampUpdated;if(!o.session||!o.timestamp)throw Error("Expected session and tiemstamp associated with update");var a=o.session,l=(0,x.N5)(a,r),s=i[l.id],u=l.sessions.find(function(e){return e.id===a});if(!u)throw Error("Expected user ".concat(l.id," to have a session with ID ").concat(a));u.timestamp=(0,x.gs)(o.timestamp);var d=u.activeFile;d!==s&&(i[l.id]=d,n.emit(c.USER_OPENED_FILE,{user:l,file:d}))}(t)}}),u=t,function(){u=null}}),{onUserLeave:function(e){return i.on(c.USER_LEAVE,e),function(){i.removeListener(c.USER_LEAVE,e)}},onUserJoin:function(e){return i.on(c.USER_JOIN,e),function(){i.removeListener(c.USER_LEAVE,e)}},onActiveUsersChange:function(e){return i.on(c.USERS_UPDATE,e),function(){i.removeListener(c.USERS_UPDATE,e)}},onUserOpenedFile:function(e){return i.on(c.USER_OPENED_FILE,e),function(){i.removeListener(c.USER_OPENED_FILE,e)}},onFollowedUserChanged:function(e){return i.on(c.FOLLOWED_USER_CHANGED,e),function(){i.removeListener(c.FOLLOWED_USER_CHANGED,e)}},onFollowingUsersChanged:function(e){return i.on(c.FOLLOWING_USERS_CHANGED,e),function(){i.removeListener(c.FOLLOWING_USERS_CHANGED,e)}},getActiveFileForUser:function(e){var t=s[e];if(void 0===t)throw Error("Expected file for user with ID ".concat(e," to be defined"));return t},updateOpenFile:function(e){return(0,p._)(function(){return(0,g.Jh)(this,function(t){switch(t.label){case 0:return[4,d()];case 1:return t.sent().send({openFile:{file:e}}),[2]}})})()},updateSessionTimestamp:function(){return(0,p._)(function(){return(0,g.Jh)(this,function(e){switch(e.label){case 0:return[4,d()];case 1:return e.sent().send({updateSessionTimestamp:{}}),[2]}})})()},followUser:function(e){return m.apply(this,arguments)},unfollowUser:v,getActiveUsers:function(){return o},getFollowedUser:function(){return a},getFollowingUsers:function(){return l},getUserIdToFile:function(){return s},getPathToUserIds:function(){var e=new Map;return o.forEach(function(t){var n=t.id,r=s[n];r&&function t(n,r){if(""!==n){e.has(n)||e.set(n,[]);var i,o=e.get(n);if(!o)throw Error("Expected user Ids");o.some(function(e){return e===r})||(null===(i=e.get(n))||void 0===i||i.push(r),t((0,_.Il)(n),r))}}(r,n)}),e}}}({container:th,onCommand:tl,getColorForUser:tc}),t_=(0,A.Z)({container:th,fs:tZ,channelRequestPriority:null==e7?void 0:e7.dotReplit,ctx:tf}),tE=function(e){var t,n,r,i=e.container,o=(0,C.ZP)(),a=null;function l(){return c.apply(this,arguments)}function c(){return(c=(0,p._)(function(){return(0,g.Jh)(this,function(e){return a&&"open"===a.status?[2,a]:[2,new Promise(function(e){o.once(d.CHANNEL_OPENED,function(t){e(t)})})]})})).apply(this,arguments)}function s(){return u.apply(this,arguments)}function u(){return(u=(0,p._)(function(){return(0,g.Jh)(this,function(e){return[2,(0,H.Y)({container:i,service:"nix"})]})})).apply(this,arguments)}return i.openChannel({service:"nix"},function(e){var t=e.channel;return a=t,o.emit(d.CHANNEL_OPENED,t),function(){a=null}}),{searchPackages:(t=(0,p._)(function(e){var t,n,r,i;return(0,g.Jh)(this,function(o){switch(o.label){case 0:return[4,s()];case 1:return n=(t=v._.apply(void 0,[o.sent(),2]))[0],r=t[1],[4,n.request({nixPackageSearchRequest:{query:e}})];case 2:if((i=o.sent()).channelClosed)return[2,{error:"Channel closed",packages:null}];if(r(),i.error)return[2,{error:i.error,packages:null}];if(!i.nixPackageSearchResponse)return[2,{error:"Response expected but none received",packages:null}];return[2,{packages:i.nixPackageSearchResponse.packages,error:null}]}})}),function(e){return t.apply(this,arguments)}),listPackages:(0,p._)(function(){var e,t,n,r;return(0,g.Jh)(this,function(i){switch(i.label){case 0:return[4,s()];case 1:return t=(e=v._.apply(void 0,[i.sent(),2]))[0],n=e[1],[4,t.request({nixPackageListRequest:{}})];case 2:if((r=i.sent()).channelClosed)return[2,{error:"Channel closed",packages:null}];if(n(),r.error)return[2,{error:r.error,packages:null}];if(!r.nixPackageListResponse)return[2,{error:"Response expected but none received",packages:null}];return[2,{packages:r.nixPackageListResponse.packages,error:null}]}})}),getChannels:(0,p._)(function(){var e,t,n,r;return(0,g.Jh)(this,function(i){switch(i.label){case 0:return[4,s()];case 1:return t=(e=v._.apply(void 0,[i.sent(),2]))[0],n=e[1],[4,t.request({nixChannelsRequest:{}})];case 2:if((r=i.sent()).channelClosed)return[2,{error:"Channel closed",channels:null}];if(n(),r.error)return[2,{error:r.error,channels:null}];if(!r.nixChannelsResponse)return[2,{error:"Response expected but none received",channels:null}];return[2,{channels:r.nixChannelsResponse.channels,error:null}]}})}),getLatestStableChannel:(0,p._)(function(){var e,t,n,r;return(0,g.Jh)(this,function(i){switch(i.label){case 0:return[4,s()];case 1:return t=(e=v._.apply(void 0,[i.sent(),2]))[0],n=e[1],[4,t.request({nixChannelLatestStableRequest:{}})];case 2:if((r=i.sent()).channelClosed)return[2,{error:"Channel closed",channel:null}];if(n(),r.error)return[2,{error:r.error,channel:null}];if(!r.nixChannelLatestStableResponse)return[2,{error:"Response expected but none received",channel:null}];return[2,{channel:r.nixChannelLatestStableResponse.channel,error:null}]}})}),addPackages:(n=(0,p._)(function(e){var t;return(0,g.Jh)(this,function(n){switch(n.label){case 0:return[4,l()];case 1:return[4,n.sent().request({nixPackageAddRequest:{packages:e}})];case 2:if((t=n.sent()).channelClosed)return[2,"channel closed"];if(t.error)return[2,t.error];if(!t.nixPackageAddResponse)return[2,"response expected but non received"];return[2,null]}})}),function(e){return n.apply(this,arguments)}),removePackages:(r=(0,p._)(function(e){var t;return(0,g.Jh)(this,function(n){switch(n.label){case 0:return[4,l()];case 1:return[4,n.sent().request({nixPackageRemoveRequest:{packages:e}})];case 2:if((t=n.sent()).channelClosed)return[2,"channel closed"];if(t.error)return[2,t.error];if(!t.nixPackageRemoveResponse)return[2,"response expected but non received"];return[2,null]}})}),function(e){return r.apply(this,arguments)})}}({container:th}),tk=(0,tQ.Z)({container:th,dotReplit:t_}),tT=(0,b.Z)({container:th,forceTrace:tu,track:X.j}),tR=(r=(n={container:th,fs:tZ,openMultipleFiles:e3,openMultipleURLs:e5}).container,i=n.fs,o=n.openMultipleFiles,a=n.openMultipleURLs,l=new Set,f=!1,S=null,r.openChannel({service:"open"},function(e){e.channel.onCommand(function(e){if("replspaceApiOpenMultipleFiles"===e.body){if(!e.replspaceApiOpenMultipleFiles)throw Error("Expected replspaceApiOpenMultipleFiles");var t=e.replspaceApiOpenMultipleFiles,n=t.files,r=t.urls;o&&n.length>0&&(W(),o({paths:n})),a&&r.length>0&&(W(),a({urls:r}))}})}),r.openChannel({service:"git"},function(e){var t,n=e.channel;return n.onCommand((t=(0,p._)(function(e){var t,r,a,c,s,u,d,h,p,m,v,y,b,Z,w,x;return(0,g.Jh)(this,function(g){switch(g.label){case 0:switch(e.body){case"replspaceApiOpenFile":return[3,1];case"replspaceApiGetGitHubToken":return[3,7]}return[3,9];case 1:if(!e.replspaceApiOpenFile)throw Error("Expected replspaceApiOpenFile");if(r=(t=e.replspaceApiOpenFile).file,a=t.waitForClose,c=t.nonce,o)return[3,3];if(!r.endsWith(".git/COMMIT_EDITMSG"))return a&&n.send({replspaceApiCloseFile:{file:r,nonce:c}}),window.alert("tried to open ".concat(r," but failed")),[2];return s=window.prompt("Enter a commit message"),[4,i.writeFile(r,null!=s?s:"")];case 2:if(g.sent(),!a)return[2];return[3,5];case 3:if(W(),o({paths:[r]}),!a||!S)return[2];return[4,S(r)];case 4:g.sent(),g.label=5;case 5:return[4,i.flush()];case 6:if(g.sent(),"open"!==n.status)return[2];return n.send({replspaceApiCloseFile:{file:r,nonce:c}}),[2];case 7:if(!e.replspaceApiGetGitHubToken)throw Error("Expected replspaceApiGetGitHubToken");return u=function(){var t;"open"===n.status&&n.send({replspaceApiGitHubToken:{token:"",nonce:null===(t=e.replspaceApiGetGitHubToken)||void 0===t?void 0:t.nonce}})},[4,function(){return F.apply(this,arguments)}()];case 8:if(null==(d=g.sent()).gitHubInfo)return u(),[2];if(!l.size)return u(),P.kg.error("Got a replspaceApiGetGitHubToken command but no confirm listener is set up"),[2];if(h=function(){var t,r;"open"===n.status&&n.send({replspaceApiGitHubToken:{token:null===(t=d.gitHubInfo)||void 0===t?void 0:t.accessToken,nonce:null===(r=e.replspaceApiGetGitHubToken)||void 0===r?void 0:r.nonce}})},f)return h(),[2];p=!1,m=function(){var e=!0,t=!1,n=void 0;try{for(var r,i=l[Symbol.iterator]();!(e=(r=i.next()).done);e=!0)(0,r.value)(null)}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}},v=!0,y=!1,b=void 0;try{for(Z=l[Symbol.iterator]();!(v=(w=Z.next()).done)&&(x=w.value,!p);v=!0)x(function(e){var t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(!p){if(p=!0,!e){u(),m();return}t&&(f=e),h(),m()}})}catch(e){y=!0,b=e}finally{try{v||null==Z.return||Z.return()}finally{if(y)throw b}}g.label=9;case 9:return[2]}})}),function(e){return t.apply(this,arguments)})),function(){}}),r.openChannel({service:"shelltracker"},function(e){e.channel.onCommand(function(e){null!=e.replspaceApiShellTracker&&(0,X.j)(X.U3.SHELL_COMMAND_EVALED,{context:e.replspaceApiShellTracker.cmd,api:"replspace",pwd:e.replspaceApiShellTracker.pwd})})}),{onConfirmSendToken:function(e){var t=function(t){return e(t)};return l.add(t),function(){l.delete(t)}},setWaitForFileClose:function(e){S=e}}),tD=(N=(0,p._)(function(e,t){var n;return(0,g.Jh)(this,function(r){var i;return n=(null==t?void 0:t.ctx)||t3.D.active(),[2,(0,t4.nO)(n,"beforeRun",(i=(0,p._)(function(n){var r,i,o,a,l,c,s,u,d,f,h,p,v,y,b,Z;return(0,g.Jh)(this,function(g){switch(g.label){case 0:return[4,(0,t4.nO)(n,"toolchain.getConfigs",function(){return tk.getConfigs()})];case 1:if((r=g.sent()).disableInstallBeforeRun)return[2];return i=(0,m._)({},t),delete i.ctx,tm.emit("user:run:prerun",(0,m._)({runnerMode:eQ},i)),[4,(0,t4.nO)(n,"fs.flush",function(){return tZ.flush({consistency:w.api.Flush.Consistency.Disk})})];case 2:if(g.sent(),e&&e("prerun flush finished"),!(null==r?void 0:r.packagers))return[3,10];o=!0,a=!1,l=void 0,g.label=3;case 3:g.trys.push([3,8,9,10]),c=r.packagers[Symbol.iterator](),g.label=4;case 4:if(o=(s=c.next()).done)return[3,7];if(!(u=s.value).guessImports)return[3,6];return d=performance.now(),f=r.disableGuessImports,[4,tT.installPackages(n,u.id,f)];case 5:h=g.sent(),p=performance.now()-d,e&&(h.error?e("prerun packager install finished",{packagerId:u.id,language:u.language,errorMessage:h.error,success:!1}):(b=(y=(null==(v=h.value)?void 0:v.guessedPkgs)||[]).length,e("prerun packager install finished",{packagerId:u.id,language:u.language,guessedPkgs:y,guessedPkgsCount:b,guessedAnyPkgs:b>0,upmGuessDurationMs:null==v?void 0:v.upmGuessDurationMs,upmAddDurationMs:null==v?void 0:v.upmAddDurationMs,upmLockDurationMs:null==v?void 0:v.upmLockDurationMs,backendTotalDurationMs:null==v?void 0:v.totalDurationMs,frontendTotalDurationMs:p,success:!0}),b>0&&(0,X.j)(t0.U3.PACKAGER_PACKAGES_GUESSED,{packages:y}))),g.label=6;case 6:return o=!0,[3,4];case 7:return[3,10];case 8:return Z=g.sent(),a=!0,l=Z,[3,10];case 9:try{o||null==c.return||c.return()}finally{if(a)throw l}return[7];case 10:return tm.emit("user:run:initiate",{}),[2]}})}),function(e){return i.apply(this,arguments)}))]})}),function(e,t){return N.apply(this,arguments)}),tI=(0,B.Z)({container:th,beforeRun:tD}),tB=(0,t2.TE)({container:th,dotReplit:t_,dotdevUrlEnabled:void 0!==ta&&ta,enableBetterPortHandling:void 0!==ti&&ti}),tP=(0,T.Z)({mode:eQ,container:th,toolchain:tk,beforeRun:tD,packager:tT,debuggest:tI}),tO=(L=(0,C.ZP)(),O=new Promise(function(e){return U=e}),M=null,j=new Map,th.openChannel({service:"chat",name:"broadcaster"},function(e){var t=e.channel,n=e.context;return n.currentUser&&(M=n.currentUser.username),t.onCommand(function(e){if("chatMessage"===e.body){var t=e.chatMessage;if(!t||!t.username||!t.text)throw Error("unexpected broadcast without a message");L.emit(u.MESSAGE_RECEIVED,{text:t.text,username:t.username})}}),U(t),function(){O=new Promise(function(e){return U=e})}}),{broadcastMessage:function(e,t){var n=t.text;return(0,p._)(function(){var t,r,i,o,a,l,c,s,u,d;return(0,g.Jh)(this,function(f){switch(f.label){case 0:return[4,O];case 1:if(t=f.sent(),!M)throw Error("Cannot broadcast without as username. Is currentUser in context?");r={text:n,username:M},i=!0,o=!1,a=void 0;try{for(l=j[Symbol.iterator]();!(i=(c=l.next()).done);i=!0)u=(s=(0,v._)(c.value,2))[0],d=s[1],u!==e&&d(r)}catch(e){o=!0,a=e}finally{try{i||null==l.return||l.return()}finally{if(o)throw a}}return t.send({chatMessage:r}),[2]}})})()},onBroadcastReceived:function(e,t){return j.set(e,t),L.on(u.MESSAGE_RECEIVED,t),function(){L.removeListener(u.MESSAGE_RECEIVED,t),j.delete(e)}}}),tM=function(e){var t=e.container,n=e.toolchain,r=e.fs,i=new Map,o=new Map,a={},l=!0;function c(e){var t=a[e];if(!t)throw Error("LSPNix: removeLanguage called with lspId never configured");var n=t.client;if(n){t.client=null,n.destroy();var r=!0,l=!1,c=void 0;try{for(var s,u=i[Symbol.iterator]();!(r=(s=u.next()).done);r=!0){var d=(0,v._)(s.value,2),f=d[0],h=d[1];if(o.get(f)===n){o.delete(f);var p=!0,m=!1,g=void 0;try{for(var y,b=h[Symbol.iterator]();!(p=(y=b.next()).done);p=!0)(0,y.value)(null)}catch(e){m=!0,g=e}finally{try{p||null==b.return||b.return()}finally{if(m)throw g}}}}}catch(e){l=!0,c=e}finally{try{r||null==u.return||u.return()}finally{if(l)throw c}}}t.closeChannel(),delete a[e]}function s(e,t){if(a[e])throw Error("LSPNix: addLanguage called with lspId already configured");a[e]={client:null,option:t,closeChannel:function(){}},l&&f(e)}var u=new Map;function d(e){if(!l)return!1;var t=a[e];return!!t&&!t.client}function f(e){return h.apply(this,arguments)}function h(){return(h=(0,p._)(function(e){var n,c,s,h,y,b,Z,x,_=arguments;return(0,g.Jh)(this,function(S){switch(S.label){case 0:if(n=_.length>1&&void 0!==_[1]?_[1]:0,!l)throw Error("LSPNix: Called startClient while not enabled");if(!a[e])throw Error("LSPNix: No config found for lspId: ".concat(e));if(!u.get(e))return[3,2];return[4,u.get(e)];case 1:if(S.sent())return[2];S.label=2;case 2:if(s=(c=a[e]).client,c.closeChannel,h=c.option,s)throw Error("LSPNix: A previous client is already set for language: ".concat(e));return y=function(){},b=new Promise(function(e){y=e}),u.set(e,b),Z=[],x=t.openChannel({service:"lsp2",skip:function(e){var t=e.repl.language,n=t.startsWith("nix")||t.startsWith("html");return n||(P.kg.error("Skipped opening lsp channel for non-nix repl",{language:t,appService:"lspnix"}),y(null)),!n}},function(c){var s=c.channel,b=null,_=!1,S=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!_){_=!0,t||(y(null),u.delete(e)),Z.forEach(function(e){return e()}),null==b||b.destroy(),(null===(s=a[e])||void 0===s?void 0:s.client)===b&&(a[e].client=null),t&&l||x();var n=!0,r=!1,c=void 0;try{for(var s,d,f=i[Symbol.iterator]();!(n=(d=f.next()).done);n=!0){var h=(0,v._)(d.value,2),p=h[0],m=h[1];if(o.get(p)===b){o.delete(p);var g=!0,w=!1,C=void 0;try{for(var S,E=m[Symbol.iterator]();!(g=(S=E.next()).done);g=!0)(0,S.value)(null)}catch(e){w=!0,C=e}finally{try{g||null==E.return||E.return()}finally{if(w)throw C}}}}}catch(e){r=!0,c=e}finally{try{n||null==f.return||f.return()}finally{if(r)throw c}}}};if("open"!==s.status){P.kg.error("LSPNix got a channel that wasn't open. This is expected to be impossible.",{lspId:e,appService:"lspnix"});return}var T=new Date;return s.request({startLSP:{languageServerId:e}}).then(function(c){if(!c.ok){P.kg.error("LSP server failed to start",{lspId:e,appService:"lspnix",serverError:c.error});return}if(l&&a[e]){Z.push(s.onCommand(function(t){if(t.state===w.api.State.Stopped){var r;P.kg.error("LSP server unexpectedly disconnected",{lspId:e,appService:"lspnix"}),S(),l&&(r=n,new Date().getTime()-T.getTime()<5e3?r<3?setTimeout(function(){d(e)&&f(e,r+1)},1e3*Math.pow(2,r)):P.kg.error("LSP server is crash-looping. Giving up.",{lspId:e,appService:"lspnix"}):setTimeout(function(){d(e)&&f(e)}))}}));var x=0;eb(t,function(){return x++<5&&l&&ey(a[e].option,h)&&"open"===s.status}).then(function(t){if(!ey(a[e].option,h)){P.kg.info("LSPNix: configuration changed while getting working directory",{lspId:e,appService:"lspnix"});return}if("open"!==s.status){P.kg.error("LSPNix: channel wasn't open after getting working directory",{lspId:e,appService:"lspnix"});return}if(t.error){P.kg.error("LSPNix: failed to get working directory",{lspId:e,appService:"lspnix",originalError:null===(c=t.error)||void 0===c?void 0:c.message});return}if(b=function(e){var t,n=e.connection,r=e.isSupportedFile,i=e.clientId,o=e.clientName,a=e.getWorkspaceConfiguration,l=e.onWorkspaceConfigurationChange,c=e.applyWorkspaceEdit,s=(0,C.ZP)();s.setMaxListeners(1/0);var u=null,d=Y.a.OFFLINE,f=Y.N.NOT_READY,h=null,v=!1,y=new Map,b=new Map,Z=null;function w(e){if(!u)throw Error("Expected rootUri");var t=e.slice(u.length+1);try{return decodeURIComponent(t)}catch(e){throw I.$e(function(n){n.setExtra("fragment_to_decode",t),I.Tb(e)}),e}}function x(e){if(!u)throw Error("Expected rootUri");if(e.startsWith("/"))throw Error("Path must be relative. Got: ".concat(e));return u+"/"+e}function _(e){d!==e&&(d!==Y.a.INITIALIZED&&S(Y.N.NOT_READY),d=e,s.emit("SERVER_STATE_CHANGE",d))}function S(e){f!==e&&(f=e,s.emit("SERVER_HEALTH_CHANGE",f))}function T(e){s.emit("SEND_NOTIFICATION",e),n.write(em(e))}function R(e){return D.apply(this,arguments)}function D(){return(D=(0,p._)(function(e){var t,r,o,a,l,c,u,f;return(0,g.Jh)(this,function(h){if(a=void 0===(o=(r=void 0===(t=e.options)?{}:t).id)?ep():o,l=r.signal,c=r.tap,u=(0,K._)(e,["options"]),!Number.isInteger(a))throw Error("Request ID must be an integer");return n.didClose()?[2,Promise.resolve({result:null,cancelled:!0})]:(s.emit("REQUEST",{id:a,data:u}),null==l||l.addEventListener("abort",function(){B(a)},{once:!0}),n.write(em((0,k._)((0,m._)({},u),{id:a}))),null===Z&&(Z=setTimeout(function(){S(Y.N.STALLED)},3e4)),f=new Promise(function(e){b.set(a,e)}),c&&c(f),[2,f.then(function(e){return null!==Z&&(clearTimeout(Z),Z=null),d!==Y.a.INITIALIZED||e.cancelled||S(Y.N.READY),(function(e){var t=!0,n=!1,r=void 0;try{for(var i,o=ec[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;if(a.supports(e))return a}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}return new es})(i).onResponse(u.method,e)})])})})).apply(this,arguments)}function G(e,t){n.write(em((0,k._)((0,m._)({},t),{id:e})))}function B(e){var t=b.get(e);t&&(s.emit("CANCEL_REQUEST",e),t({result:null,cancelled:!0}),b.delete(e),T({method:"$/cancelRequest",params:{id:e}}))}var A=new en.s(function(e){var t=b.get(e.id);if(e.id&&t){b.delete(e.id);var n=e.result,r=e.error;if((void 0!==n||r)&&s.emit("RESPONSE",e),void 0!==n){t({result:n,cancelled:!1});return}if(r){var o=r.code,l=r.message,u=r.data;P.kg.error("LSP request failed",{code:o,lspId:i,errorMessage:l,data:JSON.stringify(u)}),t({error:r});return}throw P.kg.error("LSP response message contained neither error nor result"),new eo.Z("Expected either message or error in LSP response").setExtra("message",JSON.stringify(e))}var d=e.method;if("client/registerCapability"===d){var f=e.params.registrations;if(!f||!Array.isArray(f))throw Error("Expected registrations array");f.forEach(function(e){var t=e.method;if(!t)throw Error("Expected registration method");if(!h)throw Error("Expected server capabilities");var n=e.registerOptions||!0;switch(t){case"textDocument/definition":h.definitionProvider=!0;break;case"textDocument/typeDefinition":h.typeDefinitionProvider=!0;break;case"textDocument/implementation":h.implementationProvider=!0;break;case"textDocument/references":h.referencesProvider=!0;break;case"textDocument/hover":h.hoverProvider=!0;break;case"textDocument/completion":h.completionProvider=n;break;case"textDocument/formatting":h.documentFormattingProvider=n;break;case"textDocument/rename":h.renameProvider=n;break;case"textDocument/codeAction":h.codeActionProvider=n;break;case"textDocument/signatureHelp":h.signatureHelpProvider=n;break;case"textDocument/didSave":if("number"==typeof h.textDocumentSync)break;h.textDocumentSync=(0,k._)((0,m._)({},h.textDocumentSync||{}),{save:n});break;case"textDocument/willSaveWaitUntil":if("number"==typeof h.textDocumentSync)break;h.textDocumentSync=(0,k._)((0,m._)({},h.textDocumentSync||{}),{willSave:!0});break;case"textDocument/didChange":if("number"==typeof h.textDocumentSync)break;h.textDocumentSync=(0,k._)((0,m._)({},h.textDocumentSync||{}),{change:n});break;case"textDocument/didOpen":case"textDocument/didClose":if("number"==typeof h.textDocumentSync)break;h.textDocumentSync=(0,k._)((0,m._)({},h.textDocumentSync||{}),{openClose:!0});break;case"workspace/executeCommand":h.executeCommandProvider=n;break;default:P.kg.info("Unexpected dynamically registered capability in LSP client",{method:t})}s.emit("SERVER_CAPABILITIES_CHANGE",h)}),G(e.id,{result:null,cancelled:!1});return}if("workspace/applyEdit"===d){var p=c(e.params);G(e.id,{result:p,cancelled:!1});return}if("textDocument/publishDiagnostics"===d){var v=w(e.params.uri),g=y.get(v);if(!g)return;var Z=e.params.diagnostics;if(E()(g.diagnostics,Z))return;g.diagnostics=Z,s.emit("DIAGNOSTICS",{path:v,diagnostics:Z});return}if("workspace/configuration"===d){var x,C=e.params,_=Array(C.items.length).fill(null),S=null!==(x=null==a?void 0:a())&&void 0!==x?x:null;S&&(_=C.items.map(function(e){return e.section?ei()(S,e.section):S})),G(e.id,{result:_,cancelled:!1})}});function N(e){if(!h)throw Error("Expected client to be initialized");if(!h[e])throw Error("LSP Server does not support ".concat(e.replace(/Provider$/,"")));return h[e]}function U(e){return u&&e?e.filter(function(e){return"uri"in e?e.uri.startsWith(u):e.targetUri.startsWith(u)}):e}n.read(A.read);var L=function(){};return{initialize:function(e){var n=e.pwd,r=e.initializationOptions;return(0,p._)(function(){var e,i;return(0,g.Jh)(this,function(o){switch(o.label){case 0:return _(Y.a.INITIALIZING),u="file://".concat(n),[4,R({method:"initialize",params:{initializationOptions:r,capabilities:et({configurationSupport:{serverToClient:!!a,clientToServer:!!l}}),processId:null,rootUri:u,workspaceFolders:[{name:u,uri:u}]}})];case 1:if("error"in(e=o.sent()))throw Error("Something went wrong initializing the LSP client: ".concat(e.error.message));if(e.cancelled)throw Error("Initialize request cancelled");if(!e.result)throw Error("Expected result in initialize request");return T({method:"initialized",params:{}}),h=e.result.capabilities,t=e.result.serverInfo,s.emit("SERVER_CAPABILITIES_CHANGE",h),_(Y.a.INITIALIZED),l&&(L=l(function(e){T({method:"workspace/didChangeConfiguration",params:{settings:e}})})),a&&(i=a())&&T({method:"workspace/didChangeConfiguration",params:{settings:i}}),[2]}})})()},generateId:ep,notify:{didOpen:function(e,t){if(!r(e))throw Error("Path not supported");var n,o=y.get(e);if(o&&0!==o.buffers){o.buffers++,y.set(e,o);return}var a=null!==(n=null==o?void 0:o.version)&&void 0!==n?n:0;y.set(e,{version:a,buffers:1,diagnostics:[]}),T({method:"textDocument/didOpen",params:{textDocument:{uri:x(e),languageId:ef(e,i),text:t,version:a}}})},didChange:function(e,t){var n=y.get(e);if(!n)throw Error('Document for "'.concat(e,'" is not open'));n.version++,T({method:"textDocument/didChange",params:{textDocument:{uri:x(e),version:n.version},contentChanges:t}})},didSave:function(e){if(!y.get(e))throw Error('Document for "'.concat(e,'" is not open'));N("textDocumentSync"),T({method:"textDocument/didSave",params:{textDocument:{uri:x(e)}}})},didClose:function(e){var t=y.get(e);if(!t)throw Error('Document for "'.concat(e,'" is not open'));t.buffers--,t.buffers>0||(T({method:"textDocument/didClose",params:{textDocument:{uri:x(e)}}}),y.delete(e))},cancelRequest:function(e){B(e)}},request:{completion:function(e,t,n,r){return N("completionProvider"),R({options:r,method:"textDocument/completion",params:{textDocument:{uri:x(e)},position:t,context:n}})},resolveCompletionItem:function(e){if(!N("completionProvider").resolveProvider)throw Error("LSP Server does not support resolving completion items");return R({method:"completionItem/resolve",params:e})},signatureHelp:function(e,t,n){return R({options:n,method:"textDocument/signatureHelp",params:{textDocument:{uri:x(e)},position:t}})},hover:function(e,t,n){return R({options:n,method:"textDocument/hover",params:{textDocument:{uri:x(e)},position:t}})},codeActions:function(e,t,n){var r=y.get(e);if(!r)throw Error("Document for path ".concat(e," is not open."));var i=r.diagnostics.filter(function(e){var n;return eh((n=e.range).start,t.end)&&eh(t.start,n.end)});return R({method:"textDocument/codeAction",params:{textDocument:{uri:x(e)},range:t,context:{diagnostics:i}},options:n})},executeCommand:function(e,t){return R({method:"workspace/executeCommand",params:{command:e,arguments:t}})},format:function(e,t){return N("documentFormattingProvider"),R({method:"textDocument/formatting",params:{textDocument:{uri:x(e)},options:t}})},formatRange:function(e,t,n){return N("documentRangeFormattingProvider"),R({method:"textDocument/rangeFormatting",params:{textDocument:{uri:x(e)},range:t,options:n}})},findDefinitions:function(e,t,n){var r=!(arguments.length>3)||void 0===arguments[3]||arguments[3];return(0,p._)(function(){var i,o;return(0,g.Jh)(this,function(a){switch(a.label){case 0:return N("definitionProvider"),[4,R({options:n,method:"textDocument/definition",params:{textDocument:{uri:x(e)},position:t}})];case 1:if(!1!==(i=a.sent()).cancelled)return[2,i];return(o=i.result)&&r&&(o=U(Array.isArray(o)?o:[o])),[2,(0,k._)((0,m._)({},i),{result:o})]}})})()},findTypeDefinitions:function(e,t,n){var r=!(arguments.length>3)||void 0===arguments[3]||arguments[3];return(0,p._)(function(){var i,o;return(0,g.Jh)(this,function(a){switch(a.label){case 0:return N("typeDefinitionProvider"),[4,R({options:n,method:"textDocument/typeDefinition",params:{textDocument:{uri:x(e)},position:t}})];case 1:if(!1!==(i=a.sent()).cancelled)return[2,i];return(o=i.result)&&r&&(o=U(Array.isArray(o)?o:[o])),[2,(0,k._)((0,m._)({},i),{result:o})]}})})()},findImplementations:function(e,t,n){var r=!(arguments.length>3)||void 0===arguments[3]||arguments[3];return(0,p._)(function(){var i,o;return(0,g.Jh)(this,function(a){switch(a.label){case 0:return N("implementationProvider"),[4,R({options:n,method:"textDocument/implementation",params:{textDocument:{uri:x(e)},position:t}})];case 1:if(!1!==(i=a.sent()).cancelled)return[2,i];return(o=i.result)&&r&&(o=U(Array.isArray(o)?o:[o])),[2,(0,k._)((0,m._)({},i),{result:o})]}})})()},findReferences:function(e,t,n){return N("referencesProvider"),R({method:"textDocument/references",params:{textDocument:{uri:x(e)},position:t,context:n}})},rename:function(e,t,n,r){return N("renameProvider"),R({options:r,method:"textDocument/rename",params:{textDocument:{uri:x(e)},position:t,newName:n}})},prepareRename:function(e,t){var n=N("renameProvider");if("boolean"==typeof n||!n.prepareProvider)throw Error("LSP server does not support prepare rename");return R({method:"textDocument/prepareRename",params:{textDocument:{uri:x(e)},position:t}})},documentHighlights:function(e,t,n){return(0,p._)(function(){return(0,g.Jh)(this,function(r){switch(r.label){case 0:return[4,R({options:n,method:"textDocument/documentHighlight",params:{position:t,textDocument:{uri:x(e)}}})];case 1:return[2,r.sent()]}})})()},documentSymbol:function(e,t){return(0,p._)(function(){var n;return(0,g.Jh)(this,function(r){switch(r.label){case 0:return[4,R({options:t,method:"textDocument/documentSymbol",params:{textDocument:{uri:x(e)}}})];case 1:if(!("result"in(n=r.sent())))return[2,n];if(n.result)return[2,{result:n.result,cancelled:!1}];return[2]}})})()}},onDiagnostics:(0,C.JV)(s,"DIAGNOSTICS"),onServerStateChange:(0,C.JV)(s,"SERVER_STATE_CHANGE"),onServerHealthChange:(0,C.JV)(s,"SERVER_HEALTH_CHANGE"),onServerCapabilitiesChange:(0,C.JV)(s,"SERVER_CAPABILITIES_CHANGE"),onRequest:(0,C.JV)(s,"REQUEST"),onResponse:(0,C.JV)(s,"RESPONSE"),onCancelRequest:(0,C.JV)(s,"CANCEL_REQUEST"),onSendNotification:(0,C.JV)(s,"SEND_NOTIFICATION"),shutdown:function(){for(var e in _(Y.a.EXITING),y.clear(),b)B(Number(e));L(),R({method:"shutdown"}).then(function(){T({method:"exit"}),_(Y.a.EXITED),s.removeAllListeners()})},isDestroyed:function(){return v},destroy:function(){for(var e in v=!0,y.clear(),b)B(Number(e));L(),_(Y.a.EXITED),s.removeAllListeners()},getServerState:function(){return d},getServerHealth:function(){return f},getServerCapabilities:function(){return h},getServerInfo:function(){return t},getDiagnostics:function(e){var t=y.get(e);if(!t)throw Error("File with path ".concat(e," is not open."));return t.diagnostics},isOpen:function(e){return y.has(e)},documentUriToPath:w,pathToDocumentURI:x,isSupportedFile:r,getLanguageId:function(e){return ef(e,i)},clientId:i,clientName:o}}({connection:{read:function(e){"open"===s.status&&s.onCommand(function(t){t.output&&e(t.output)})},write:function(e){if("open"!==s.status){(null==b?void 0:b.isDestroyed())&&P.kg.error("LSPNix: tried to write to channel but the lsp client is already destroyed");return}s.send({input:e})},didClose:function(){return"open"!==s.status}},clientId:e,clientName:a[e].option.name,isSupportedFile:function(e){return(0,eg.F)(e,h)},applyWorkspaceEdit:function(e){var t=e.edit;return b?(0,ev.w)({edit:t,fs:r,client:b}):{applied:!1}},getWorkspaceConfiguration:function(){if(!(null===(e=h.config)||void 0===e?void 0:e.configurationJson))return null;var e,t=null;try{t=JSON.parse(h.config.configurationJson)}catch(e){P.kg.error("Failed to parse LSP workspace configuration",{configurationJson:h.config.configurationJson})}return t}}),null===(l=h.config)||void 0===l?void 0:l.initializationOptionsJson)try{d=JSON.parse(h.config.initializationOptionsJson)}catch(e){P.kg.error("Failed to parse LSP initializationOptions",{initializationOptionsJson:h.config.initializationOptionsJson})}var n,l,c,d,f=b.initialize({pwd:t.workingDirectory,initializationOptions:d}).catch(function(t){if((null==t?void 0:t.message)!=="Initialize request cancelled")throw P.kg.error("LSPNix: failed to initialize client",{lspId:e,appService:"lspnix",originalError:null==t?void 0:t.message}),t});Z.push(b.onServerStateChange((n=(0,p._)(function(t){var n,r,l,c,d,p,m,Z,w,x,C,_,E;return(0,g.Jh)(this,function(g){switch(g.label){case 0:if("open"!==s.status)return P.kg.info("LSPNix: channel wasn't open on state change",{lspId:e,appService:"lspnix",state:t}),S(),[2];if(!b)return P.kg.info("LSPNix: client was null on state change. This should never happen",{lspId:e,appService:"lspnix",state:t}),S(),[2];if(!ey(a[e].option,h))return P.kg.info("LSPNix: configuration changed and received state change",{lspId:e,appService:"lspnix",state:t}),S(),[2];if(t===Y.a.EXITED)return P.kg.info("LSP server exited via 'exit' notification",{lspId:e,appService:"lspnix"}),S(),[2];if(t!==Y.a.INITIALIZED)return[2];return[4,f];case 1:if(g.sent(),"open"!==s.status)return P.kg.info("LSPNix: channel wasn't open after initialization",{lspId:e,appService:"lspnix"}),S(),[2];y(b),u.delete(e),a[e].client=b,n=!0,r=!1,l=void 0;try{for(c=i[Symbol.iterator]();!(n=(d=c.next()).done);n=!0)if(m=(p=(0,v._)(d.value,2))[0],Z=p[1],!(!(0,eg.F)(m,h)||o.has(m))){o.set(m,b),w=!0,x=!1,C=void 0;try{for(_=Z[Symbol.iterator]();!(w=(E=_.next()).done);w=!0)(0,E.value)(b)}catch(e){x=!0,C=e}finally{try{w||null==_.return||_.return()}finally{if(x)throw C}}}}catch(e){r=!0,l=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw l}}return[2]}})}),function(e){return n.apply(this,arguments)})))})}}),function(e){S(e.willReconnect)}}),a[e].closeChannel=x,[2]}})})).apply(this,arguments)}function y(e){var t=null==e?void 0:e.languageServers;if(!t||0===t.length){var n=!0,r=!1,i=void 0;try{for(var o,l=Object.keys(a)[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){var u=o.value;c(u)}}catch(e){r=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw i}}return}var d={},f=!0,h=!1,p=void 0;try{for(var m,v=t[Symbol.iterator]();!(f=(m=v.next()).done);f=!0){var g=m.value;d[g.id]=g}}catch(e){h=!0,p=e}finally{try{f||null==v.return||v.return()}finally{if(h)throw p}}var y=!0,b=!1,Z=void 0;try{for(var w,x=Object.keys(a)[Symbol.iterator]();!(y=(w=x.next()).done);y=!0){var C=w.value;d[C]||c(C)}}catch(e){b=!0,Z=e}finally{try{y||null==x.return||x.return()}finally{if(b)throw Z}}var _=!0,S=!1,E=void 0;try{for(var k,T=Object.keys(d)[Symbol.iterator]();!(_=(k=T.next()).done);_=!0){var R=k.value,D=a[R],I=d[R];if(!D){s(R,I);continue}ey(D.option,I)||(c(R),s(R,I))}}catch(e){S=!0,E=e}finally{try{_||null==T.return||T.return()}finally{if(S)throw E}}}function b(){return(b=(0,p._)(function(){var e;return(0,g.Jh)(this,function(t){try{e=n.configs.current,y(e),n.configs.subscribe(y)}catch(e){P.kg.error("LSP initialization failed: "+e.message)}return[2]})})).apply(this,arguments)}return!function(){b.apply(this,arguments)}(),{disable:function(){if(l){l=!1;var e=!0,t=!1,n=void 0;try{for(var r,c=Object.values(a)[Symbol.iterator]();!(e=(r=c.next()).done);e=!0){var s=r.value;s.closeChannel(),null===(h=s.client)||void 0===h||h.destroy(),s.client=null;var u=!0,d=!1,f=void 0;try{for(var h,p,m=i[Symbol.iterator]();!(u=(p=m.next()).done);u=!0){var g=(0,v._)(p.value,2),y=g[0],b=g[1];if(o.has(y)){o.delete(y);var Z=!0,w=!1,x=void 0;try{for(var C,_=b[Symbol.iterator]();!(Z=(C=_.next()).done);Z=!0)(0,C.value)(null)}catch(e){w=!0,x=e}finally{try{Z||null==_.return||_.return()}finally{if(w)throw x}}}}}catch(e){d=!0,f=e}finally{try{u||null==m.return||m.return()}finally{if(d)throw f}}}}catch(e){t=!0,n=e}finally{try{e||null==c.return||c.return()}finally{if(t)throw n}}}},enable:function(){if(!l){l=!0;var e=!0,t=!1,n=void 0;try{for(var r,i=Object.keys(a)[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value;f(o)}}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}}},onClient:function(e,t){i.has(e)||i.set(e,[]),null===(s=i.get(e))||void 0===s||s.push(t);var n=o.get(e);if(n)t(n);else{var r=!0,l=!1,c=void 0;try{for(var s,u,d=Object.values(a)[Symbol.iterator]();!(r=(u=d.next()).done);r=!0){var f=u.value;if((0,eg.F)(e,f.option)){f.client&&t(f.client);break}}}catch(e){l=!0,c=e}finally{try{r||null==d.return||d.return()}finally{if(l)throw c}}}return function(){var n,r=null!==(n=i.get(e))&&void 0!==n?n:[];i.set(e,r.filter(function(e){return e!==t}))}}}}({container:th,toolchain:tk,fs:tZ}),tX=(J=($={container:th,beforeRun:tD}).container,Q=$.beforeRun,ee=(0,C.ZP)(),er=z.Z.Idle,ea=new Date(0),el=!1,ee.on(z.z.TEST_RESULT,function(e){el=el&&"passed"===e.body}),eu=function(e){ee.emit(z.z.STATE_CHANGED,e),er=e},ed=(0,p._)(function(e,t){var n,r,i,o,a,l,c,s,u,d,f;return(0,g.Jh)(this,function(h){switch(h.label){case 0:if(n=V.api.Payload.fromObject(t),r=V.api.Payload.verify(n))throw r;return i=new(q())(function(e){var t=V.api.Response.fromObject(e),r=V.api.Response.verify(t);if(r){I.Tb(TypeError("invalid payload received"),function(i){return i.setExtras({validationError:r,payload:n,message:e,response:t})});return}switch(t.body){case"error":return ee.emit(z.z.ERROR,t.error);case"instructionResult":return ee.emit(z.z.INSTRUCTION_RESULT,t.instructionResult);case"testResult":return ee.emit(z.z.TEST_RESULT,t.testResult);case"status":switch(t.status){case V.api.Status.Ready:return eu(z.Z.Ready);case V.api.Status.Building:return eu(z.Z.Building);case V.api.Status.Running:return eu(z.Z.Running)}}}),o=e.onCommand(function(e){if(e.output)try{i.submit(e.output)}catch(t){I.Tb(SyntaxError("invalid response received from i/o testing binary"),function(r){return r.setExtras({err:t,payload:n,cmd:e})})}}),a=e.request({exec:{args:["io-tester"],splitStderr:!0,lifecycle:w.api.Exec.Lifecycle.STDIN,splitLogs:!0}}),[4,new Promise(function(e,t){var n,r=function(){n(),e()};ee.once(z.z.STATE_CHANGED,r);var i=setTimeout(function(){n(),t(Error("timeout while waiting for iotester to start"))},2e4);n=function(){clearTimeout(i),ee.off(z.z.STATE_CHANGED,r)}})];case 1:return h.sent(),[4,e.request({input:JSON.stringify(n)+"\n"})];case 2:if(!(l=h.sent()).ok)throw s=Error(null!==(c=l.error)&&void 0!==c?c:"unexpected error occurred while sending input to i/o testing binary"),I.Tb(s,function(e){return e.setExtra("status",l)}),s;return[4,a];case 3:return(u=h.sent()).ok||(f=Error(null!==(d=u.error)&&void 0!==d?d:"unexpected error occurred while executing i/o testing binary"),I.Tb(f,function(e){return e.setExtra("result",u)})),o(),[2]}})}),{run:function(e){if(er!==z.Z.Idle)throw Error("iotester already running");return eu(z.Z.Starting),ea=new Date,el=!0,Q().then(function(){return new Promise(function(t){var n=J.openChannel({service:"exec"},function(r){var i="",o="",a=r.channel.onCommand(function(e){e.log?i+=e.log:e.stderr&&(o+=e.stderr)});return t((function(e,t){return ed.apply(this,arguments)})(r.channel,e).finally(function(){a(),n(),(o||i)&&I.Tb(Error("logs received from IOTester"),function(t){return t.setExtras({logs:i,stderr:o,payload:e})})})),n})})}).catch(function(e){return el=!1,Promise.reject(e)}).finally(function(){return eu(z.Z.Idle)})},get lastRunAt(){return ea},get state(){return er},get lastRunDidPass(){return el},onInstructionResult:function(e){return ee.on(z.z.INSTRUCTION_RESULT,e),function(){ee.off(z.z.INSTRUCTION_RESULT,e)}},onStateChanged:function(e){return ee.on(z.z.STATE_CHANGED,e),function(){ee.off(z.z.STATE_CHANGED,e)}},onTestResult:function(e){return ee.on(z.z.TEST_RESULT,e),function(){ee.off(z.z.TEST_RESULT,e)}},onError:function(e){return ee.on(z.z.ERROR,e),function(){ee.off(z.z.ERROR,e)}}}),tF=(eC=(eZ={container:th,fs:tZ}).container,e_=eZ.fs,eD=void 0===(eE=eZ.provideProfiles)?tG:eE,(eG=(0,C.ZP)()).setMaxListeners(1/0),eB=tA(),eA=!1,eN=new Map,eL=null,eM=eC.getContext(),ej=new tY({container:eC,getEnv:function(){return eB},awaitPromise:(eF=(0,p._)(function(e){var t,n;return(0,g.Jh)(this,function(r){switch(r.label){case 0:return[4,eD({defaultUsername:null==eM?void 0:null===(t=eM.currentUser)||void 0===t?void 0:t.username,defaultUserId:null==eM?void 0:null===(n=eM.currentUser)||void 0===n?void 0:n.id,onProfiles:function(t){var n=!0,r=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=(0,v._)(o.value,2),c=l[0],s=l[1];eN.set(c,s),eG.emit(eT.dq.NEW_PROFILE)}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}t.has(eT.rG.GITHUB)||eN.delete(eT.rG.GITHUB);var u=eN.get(eT.rG.REPLIT_DEFAULT),d=eN.get(eT.rG.GITHUB);if(eL&&!e&&(e=eL.provider),e===eT.rG.GITHUB&&d)eL=d;else{if(!u)return;eL=u}eG.emit(eT.dq.CHANGED_PROFILE)}})];case 1:return[2,r.sent()]}})}),eH=function(e){return eF.apply(this,arguments)})(eT.rG.GITHUB)}),eG.on(eT.dq.FS_CHANGE,function(){return ej.cache.invalidate()}),eG.on(eT.dq.FORCED_REFRESH,function(){return ej.cache.invalidate()}),eG.on(eT.dq.NEW_PROFILE,function(){return ej.cache.invalidate()}),eG.on(eT.dq.CHANGED_PROFILE,function(){return ej.cache.invalidate()}),eG.on(eT.dq.CHANGED_PROFILE,function(){null!=eL&&(eB=tA({author:{username:eL.username,email:eL.email}}))}),{getEnv:function(){return eB},getProfiles:function(){return Array.from(eN.values())},hasProfile:function(e){return eN.has(e)},getProfile:function(e){var t=eN.get(e);if(!t)throw Error("Fetched a profile that has not been setup!");return t},addProfile:function(e){eN.set(e.provider,e),eG.emit(eT.dq.NEW_PROFILE)},getCurrentProfile:function(){return eL},setCurrentProfile:function(e){var t=eN.get(e);if(!t)throw Error("Can't set a non-existent profile!");eL=t,eB=tA({author:{username:t.username,email:t.email}}),eG.emit(eT.dq.CHANGED_PROFILE)},onProfileAdded:function(e){var t=function(){e(Array.from(eN.values()))};return eG.on(eT.dq.NEW_PROFILE,t),function(){eG.off(eT.dq.NEW_PROFILE,t)}},onCurrentProfileChanged:function(e){var t=function(){e(eL)};return eG.on(eT.dq.CHANGED_PROFILE,t),function(){eG.off(eT.dq.CHANGED_PROFILE,t)}},refreshProfiles:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).preferredProvider;return eH(e)},onRefresh:function(e){eA||(function(e,t,n){var r,i,o,a,l,c,s,u,d,f,h=!1,m=!1,v=(r=function(){return n.emit(eT.dq.FS_CHANGE)},a=(i={wait:1e3,cooldown:5e3,maxWait:5e3}).wait,l=i.cooldown,c=i.maxWait,s=null,u=!1,d=eY()(function(e){return s=setTimeout(function(){return s=null},l),u=!1,o=r.apply(void 0,(0,Z._)(e))},a,{maxWait:c}),(f=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return null!==s?o:(u||(u=!0),d(t))}).cancel=function(){null!==s?(clearTimeout(s),s=null):(d.cancel(),u=!1)},f.flush=function(){return null!==s?(clearTimeout(s),s=null,o):d.flush()},f.isPending=function(){return u},f.isInCooldown=function(){return null!==s},f);function y(){return(y=(0,p._)(function(){var n;return(0,g.Jh)(this,function(r){return n=!0,t.watchDir(tN.Ql,{onChange:function(r){!h&&r.find(function(e){return e.filename===tL&&e.type===tU.Tv.Directory})&&(function(){if(!h){h=!0;var n=!0;t.watchDir(tL,{onChange:function(){n?n=!1:v()},onMoveOrDelete:function(){h=!1,v()},onError:function(t,n){h=!1,RegExp(".+permission denied","im").test(t.message)||e.unrecoverableError(t,n)}})}}(),n||v()),n&&(n=!1)},onError:function(t,n){return e.unrecoverableError(t,n)}}),[2]})})).apply(this,arguments)}(function(){y.apply(this,arguments)})(),t.onStatusChange(function(e){h&&(e===tU.kO.Syncing&&v.isInCooldown()?m=!0:e===tU.kO.Clean&&(m||v(),m=!1))})}(eC,e_,eG),eA=!0);var t=function(){return e(eT.dq.FS_CHANGE)},n=function(){return e(eT.dq.FORCED_REFRESH)},r=function(){return e(eT.dq.NEW_PROFILE)},i=function(){return e(eT.dq.CHANGED_PROFILE)};return eG.on(eT.dq.FS_CHANGE,t),eG.on(eT.dq.FORCED_REFRESH,n),eG.on(eT.dq.NEW_PROFILE,r),eG.on(eT.dq.CHANGED_PROFILE,i),function(){eG.off(eT.dq.FS_CHANGE,t),eG.off(eT.dq.FORCED_REFRESH,n),eG.off(eT.dq.NEW_PROFILE,r),eG.off(eT.dq.CHANGED_PROFILE,i)}},forceRefresh:function(){eG.emit(eT.dq.FORCED_REFRESH)},isBusy:function(){return ej.running.current},onBusyChange:function(e){var t=!1,n=eY()(e,200);return ej.running.subscribe(function(e){t&&!e?(n(!1),t=!1):!t&&e&&(n(!0),t=!0)})},init:ej.wrap(ts,"write"),isInitialized:ej.wrap(td,"read"),lsFiles:ej.wrap(tv,"read"),status:ej.wrap(eV.Z,"read"),log:ej.wrap(tp,"read"),findDefaultBranches:ej.wrap(e9,"read"),listBranches:ej.wrap(te.ZP,"read"),setBranchUpstream:ej.wrap(t$,"write"),stageFiles:ej.wrap(tS,"write"),commit:ej.wrap(eK,"write"),switchBranch:ej.wrap(e0,"write"),branchExists:ej.wrap(eP,"read"),createBranch:ej.wrap(e2,"write"),getRemotes:ej.wrap(to,"read"),fetch:ej.wrap(e4,"write"),canMergeBranches:ej.wrap(eU,"read"),pull:ej.wrap(ty.Z,"write"),push:ej.wrap(tb,"write"),getRepositoryState:ej.wrap(ek.ZP,"read"),getFileContents:ej.wrap(tr,"read"),addRemote:ej.wrap(e$,"write"),removeRemote:ej.wrap(tw,"write"),setRemoteURL:ej.wrap(tC,"write"),getBranch:ej.wrap(tt,"read"),restoreFiles:ej.wrap(ez,"write"),lastFetched:ej.wrap(eI,"read"),merge:ej.wrap(eO,"write"),mergeContinue:ej.wrap(eW,"write"),mergeAbort:ej.wrap(eX,"write"),getConflictingFiles:ej.wrap(eS,"read"),getMergingRefs:ej.wrap(eR,"read"),getFilesForCommit:ej.wrap(tK.Z,"read")}),tW=function(e){var t,n,r=e.container,i=e.nixService;function o(e){return a.apply(this,arguments)}function a(){return(a=(0,p._)(function(e){return(0,g.Jh)(this,function(t){switch(t.label){case 0:if(e&&(n=void 0),!n){var r;n=new Promise((r=(0,p._)(function(e){var t,n;return(0,g.Jh)(this,function(r){switch(r.label){case 0:return[4,i.listPackages()];case 1:if(null==(n=r.sent())?void 0:null===(t=n.packages)||void 0===t?void 0:t.some(function(e){return"pkgs.postgresql"===e.name}))return[3,3];return[4,i.addPackages(["pkgs.postgresql"])];case 2:return r.sent(),e(),[3,4];case 3:e(),r.label=4;case 4:return[2]}})}),function(e){return r.apply(this,arguments)}))}return[4,n];case 1:return t.sent(),[2]}})})).apply(this,arguments)}return{ensureNixPsqlPackageInstalled:o,run:(t=(0,p._)(function(e){var t,n,i,a,l,c,s,u,d,f,h,p,m;return(0,g.Jh)(this,function(v){switch(v.label){case 0:return t=e.query,n=e.connectionString,[4,o()];case 1:v.sent(),i=(0,D.Z)({container:r}),a=[],l=null,c=new G.t(function(e){return a.push(e)}),s=null,u=!1,d=new Promise(function(e){var t=i.onStateChanged(function(n){var r=n.state,i=n.stderrBuffer;if(r===w.api.State.Running){u=!0;return}u&&(s=i,t(),e())})}),i.onOutput(function(e){try{c.process(e)}catch(t){l||(l=t,I.Tb(t,function(t){return t.setExtra("chunk",e)}))}}),v.label=2;case 2:return v.trys.push([2,,5,6]),[4,i.request({args:["psql",n,"--csv","--command",t],splitStderr:!0})];case 3:return f=v.sent(),[4,d];case 4:return v.sent(),f.error&&!s&&(s=f.error),c.flush(),[3,6];case 5:return i.dispose(),[7];case 6:if(s)return[2,{columns:c.headers(),rows:a,error:s}];if(l)return h=l.message,[2,{columns:null!==(p=c.headers())&&void 0!==p?p:[],rows:a,error:h}];return[2,{columns:null!==(m=c.headers())&&void 0!==m?m:[],rows:a,error:null}]}})}),function(e){return t.apply(this,arguments)})}}({container:th,nixService:tE}),tH=(0,t8.Z)({fs:tZ}),{session:tg,presence:tx,packager:tT,container:th,fs:tZ,runner:tP,debuggest:tI,broadcast:tO,dotReplit:t_,nixService:tE,lspnix:tM,iotester:tX,git:tF,psql:tW,userEvents:tm,replspaceApi:tR,toolchain:tk,ports:tB,secrets:tH}}),1)[0]}},41062:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(32477),i=n(43429);function o(e,t){var n=(0,r._)(i.useState(null),2),o=n[0],a=n[1];return i.useEffect(function(){var n=!1;return e.readFile(t).then(function(e){n||a(e)}),function(){n=!0}},[e,t]),o}},57369:function(e,t,n){n.d(t,{ZP:function(){return f},y5:function(){return a},yG:function(){return o}});var r,i,o,a,l=n(34142),c=n(87682),s=n(75813);function u(e,t){return"{ ".concat(e,"; } > /dev/null 2>&1 && echo -n '").concat(t,"' && exit 0")}(r=o||(o={})).NOT_INITIALIZED="NOT_INITIALIZED",r.ON_UNBORN_BRANCH="ON_UNBORN_BRANCH",r.MERGING="MERGING",r.REBASING="REBASING",r.REVERTING="REVERTING",r.CHERRY_PICKING="CHERRY_PICKING",r.APPLYING_MAILBOX="APPLYING_MAILBOX",r.BISECTING="BISECTING",r.DIRTY_WORKTREE="DIRTY_WORKTREE",r.DIRTY_INDEX="DIRTY_INDEX",r.CLEAN="CLEAN",r.DETACHED_HEAD="DETACHED_HEAD",(i=a||(a={})).INITIALIZING="INITIALIZING",i.INTERMEDIATE="INTERMEDIATE",i.NORMAL="NORMAL",i.DETACHED_HEAD="DETACHED_HEAD";var d=[u("! git rev-parse --is-inside-work-tree","NOT_INITIALIZED"),u('[ "$(! git rev-parse HEAD -- 2>&1)" = "fatal: bad revision \'HEAD\'" ]',"ON_UNBORN_BRANCH"),u("git rev-parse -q --verify MERGE_HEAD","MERGING"),u("[ -d '.git/rebase-apply' ] && [ -f '.git/rebase-apply/applying' ]","APPLYING_MAILBOX"),u("[ -d '.git/rebase-apply' ] || [ -d '.git/rebase-merge' ]","REBASING"),u("git rev-parse -q --verify REVERT_HEAD","REVERTING"),u("git rev-parse -q --verify CHERRY_PICK_HEAD","CHERRY_PICKING"),u("[ -f '.git/BISECT_LOG' ]","BISECTING"),u("! git symbolic-ref -q HEAD","DETACHED_HEAD"),"git update-index -q --refresh > /dev/null || exit $?",u('{ ! git diff-files --quiet; } || [ -n "$(git ls-files --others --exclude-standard)" ]',"DIRTY_WORKTREE"),u("! git diff-index --cached --quiet HEAD --","DIRTY_INDEX"),'echo -n "CLEAN"'].join(";");function f(e){return h.apply(this,arguments)}function h(){return(h=(0,l._)(function(e){var t,n,r;return(0,c.Jh)(this,function(i){switch(i.label){case 0:return[4,e(d,{serviceMethod:"git-get-repository-state"})];case 1:if((t=i.sent()).error)return[2,t];if(!(t.output in o))return[2,{error:s.aq.UNKNOWN}];return r=function(e){switch(e){case"NOT_INITIALIZED":case"ON_UNBORN_BRANCH":return"INITIALIZING";case"MERGING":case"REBASING":case"REVERTING":case"CHERRY_PICKING":case"APPLYING_MAILBOX":case"BISECTING":return"INTERMEDIATE";case"DIRTY_WORKTREE":case"DIRTY_INDEX":case"CLEAN":return"NORMAL";case"DETACHED_HEAD":return"DETACHED_HEAD"}}(n=t.output),[2,{state:n,type:r,error:null}]}})})).apply(this,arguments)}},65307:function(e,t,n){n.d(t,{Z:function(){return g},y:function(){return a}});var r,i,o,a,l=n(34142),c=n(32477),s=n(21289),u=n(87682);function d(e){switch(e){case"A":return"ADDED";case"C":return"COPIED";case"D":return"DELETED";case"M":return"MODIFIED";case"R":return"RENAMED";case"T":return"TYPE_CHANGED";case"U":return"UNMERGED";case"X":default:return"UNKNOWN";case"B":return"BROKEN"}}(r=a||(a={})).ADDED="ADDED",r.COPIED="COPIED",r.DELETED="DELETED",r.MODIFIED="MODIFIED",r.RENAMED="RENAMED",r.TYPE_CHANGED="TYPE_CHANGED",r.UNMERGED="UNMERGED",r.UNKNOWN="UNKNOWN",r.BROKEN="BROKEN";var f=(i=(0,l._)(function(e,t){var n;return(0,u.Jh)(this,function(r){switch(r.label){case 0:return[4,e("git log -1 --pretty=%P ".concat(t))];case 1:if((n=r.sent()).error)return[2,!1];return[2,n.output.trim().length>0]}})}),function(e,t){return i.apply(this,arguments)}),h=(o=(0,l._)(function(e,t){var n,r,i,o,a,l,c,s,d;return(0,u.Jh)(this,function(u){switch(u.label){case 0:return[4,e("git ls-tree --name-only -r ".concat(t),{serviceMethod:"git-get-files-for-commit"})];case 1:if((n=u.sent()).error)return[2,n];r=[],i=n.output.split("\n").filter(Boolean),o=!0,a=!1,l=void 0;try{for(c=i[Symbol.iterator]();!(o=(s=c.next()).done);o=!0)d=s.value,r.push({path:d,type:"ADDED"})}catch(e){a=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}return[2,{files:r,error:null}]}})}),function(e,t){return o.apply(this,arguments)});function p(){return(p=(0,l._)(function(e){return(0,u.Jh)(this,function(t){return[2,Array.from(e.matchAll(v)).map(function(e){var t=(0,c._)(e,4),n=t[1],r=t[2];return{path:t[3],originalPath:r,type:d(n)}})]})})).apply(this,arguments)}var m=/([ADMUXBT])\0([^\0]+)/g,v=/([RC])\d*\0([^\0]+)\0([^\0]+)/g;function g(e,t){return y.apply(this,arguments)}function y(){return(y=(0,l._)(function(e,t){var n,r,i;return(0,u.Jh)(this,function(o){switch(o.label){case 0:return[4,f(e,t)];case 1:if(!o.sent())return[2,h(e,t)];return[4,e("git diff-tree --no-commit-id --name-status -z -r -M ".concat(t),{serviceMethod:"git-get-files-for-commit"})];case 2:if((n=o.sent()).error)return[2,n];return[4,function(e){return p.apply(this,arguments)}(n.output)];case 3:return r=o.sent(),i=Array.from(n.output.matchAll(m)).map(function(e){var t=(0,c._)(e,3),n=t[1];return{path:t[2],type:d(n)}}),[2,{files:(0,s._)(r).concat((0,s._)(i)),error:null}]}})})).apply(this,arguments)}},21076:function(e,t,n){n.d(t,{CH:function(){return v},Dc:function(){return d},GE:function(){return f},LY:function(){return h},Pi:function(){return g},Qj:function(){return m},bF:function(){return p},dC:function(){return u}});var r=n(32477),i=n(50431),o=n(80433),a=n(75647),l=/[~^:?*[\\\0-\x20\x7F]/,c=/^(([A-Za-z0-9]+@|http(|s):\/\/)|(http(|s):\/\/[A-Za-z0-9]+@))([A-Za-z0-9.]+(:\d+)?)(?::|\/)([\d/\w.-]+?)$/,s=new RegExp([l,/^$/,/^\//,/\/$/,/\.lock$/,/\/{2,}/,/^\./,/\.$/,/\/\./,/\.\./,/@\{/,/^@$/,/^-/].map(function(e){return"(?:".concat(e.source,")")}).join("|"));function u(e){return 0===e.length||!l.test(e)}function d(e){return!s.test(e)}function f(e){return!s.test(e)}function h(e){return c.test(e)}function p(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"string"==typeof e?(0,i.C)(e):"commit"in e?e.type===a.HO.LOCAL||t&&e.type===a.HO.TRACKED?e.name:"".concat(e.remote,"/").concat(e.name):e.name}function m(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("string"==typeof e)return e;if("commit"in e)return e.type===a.HO.LOCAL||t&&e.type===a.HO.TRACKED?"refs/heads/".concat(e.name):"refs/remotes/".concat(e.remote,"/").concat(e.name);if(e.type===o.l.BRANCH)return"refs/heads/".concat(e.name);if(e.type===o.l.REMOTE_BRANCH)return"refs/remotes/".concat(e.remote,"/").concat(e.branch);throw Error("Unknown branch object")}function v(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("string"==typeof e)return t&&!e.startsWith("refs/remotes/")?null:(0,r._)((0,i.Tg)(e),1)[0];if("commit"in e)return t&&e.type!==a.HO.REMOTE?null:e.remote;if(e.type===o.l.BRANCH)return null;if(e.type===o.l.REMOTE_BRANCH)return e.remote;throw Error("Unknown branch object")}function g(e,t){return e===t||null!==e&&null!==t&&m(e)===m(t)}},80433:function(e,t,n){n.d(t,{L:function(){return function e(t){var n;switch("HEAD"===(n=t)||"refs/HEAD"===n||n.startsWith(l)?"HEAD":n.startsWith(c)?"BRANCH":n.startsWith(s)?f.test(n)?"REMOTE_HEAD":"REMOTE_BRANCH":n.startsWith(d)||n.startsWith(u)?"TAG":"BRANCH"){case"HEAD":if(t.startsWith(l)){if(t.endsWith("(detached)"))return{type:"HEAD",name:"HEAD",detached:!0,ref:null};return{type:"HEAD",name:"HEAD",detached:!1,ref:e(t.slice(l.length))}}return{type:"HEAD",name:"HEAD",detached:!1,ref:null};case"REMOTE_HEAD":var r=t.slice(s.length);return{type:"REMOTE_HEAD",name:"HEAD",remote:(0,o._)(r.split("/"),1)[0]};case"BRANCH":return{type:"BRANCH",name:t.startsWith(c)?t.slice(c.length):t};case"REMOTE_BRANCH":var i=t.slice(s.length),h=(0,a._)(i.split("/"));return{type:"REMOTE_BRANCH",name:i,remote:h[0],branch:h.slice(1).join("/")};case"TAG":return t.startsWith(u)&&(t=t.slice(u.length)),t.startsWith(d)&&(t=t.slice(d.length)),{type:"TAG",name:t}}}},l:function(){return i}});var r,i,o=n(32477),a=n(95025),l="HEAD -> ",c="refs/heads/",s="refs/remotes/",u="tag: ",d="refs/tags/",f=/^refs\/remotes\/([^/]+)\/HEAD$/;(r=i||(i={})).HEAD="HEAD",r.REMOTE_HEAD="REMOTE_HEAD",r.BRANCH="BRANCH",r.REMOTE_BRANCH="REMOTE_BRANCH",r.TAG="TAG"},75647:function(e,t,n){n.d(t,{HO:function(){return i},ZP:function(){return h},p3:function(){return d}});var r,i,o=n(34142),a=n(32477),l=n(21289),c=n(87682),s=n(50431),u=n(80433);function d(e,t){return!!e&&!!t&&(e===t||e.name===t.name&&e.remote===t.remote)}function f(e){var t=(0,a._)(e.split("	"),6),n=t[0],r=t[1],i=t[2],o=t[3],l=t[4],c=t[5],d=(0,u.L)(n),f={hash:i,author:{name:o,email:(0,s.tc)(l),date:1e3*parseInt(c,10)}};if(d.type===u.l.BRANCH){var h=r?(0,u.L)(r):null,p=h&&(h.type===u.l.REMOTE_BRANCH||h.type===u.l.BRANCH)?h:null;return{type:"LOCAL",name:d.name,push:p,remote:null,tracking:null,commit:f}}return d.type===u.l.REMOTE_BRANCH?{type:"REMOTE",name:d.branch,remote:d.remote,push:null,tracking:null,commit:f}:null}function h(e){return p.apply(this,arguments)}function p(){return(p=(0,o._)(function(e){var t,n,r=arguments;return(0,c.Jh)(this,function(i){switch(i.label){case 0:return[4,e(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!1===e.local&&!1===e.remote)throw Error("Cannot specify both local and remote as false");var t=[];if(t.push('--format="%(refname)%09%(push)%09%(objectname)%09%(authorname)%09%(authoremail)%09%(authordate:unix)"'),e.max&&t.push("--count=".concat(e.max)),e.pattern){if("string"==typeof e.pattern)t.push((0,s.Gw)(e.pattern));else{var n,r,i=e.pattern.map(function(e){return(0,s.Gw)(e)});t.push.apply(t,(0,l._)(i))}}else(null===(n=e.local)||void 0===n||n)&&t.push("refs/heads"),(null===(r=e.remote)||void 0===r||r)&&t.push("refs/remotes");return"git for-each-ref ".concat(t.join(" "))}(r.length>1&&void 0!==r[1]?r[1]:{}),{serviceMethod:"git-list-branches"})];case 1:if((t=i.sent()).error)return[2,t];return(n=function(e){var t=[],n=[],r=!0,i=!1,o=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done);r=!0){var s=a.value;"LOCAL"===s.type?t.push(s):"REMOTE"===s.type&&n.push(s)}}catch(e){i=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}var d=new Set,f=[],h=!0,p=!1,m=void 0;try{for(var v,g=n[Symbol.iterator]();!(h=(v=g.next()).done);h=!0)!function(){var e=v.value,n=t.find(function(t){return t.push&&t.push.type===u.l.REMOTE_BRANCH&&t.push.remote===e.remote&&t.push.branch===e.name&&t.name===e.name});n&&(d.add(e),d.add(n),f.push({type:"TRACKED",name:n.name,remote:e.remote,push:n.push,tracking:e,commit:n.commit}))}()}catch(e){p=!0,m=e}finally{try{h||null==g.return||g.return()}finally{if(p)throw m}}var y=e.filter(function(e){return!d.has(e)});return(0,l._)(y).concat((0,l._)(f))}((0,s.so)(t.output,"\n").map(f).filter(function(e){return null!==e}))).sort(function(e,t){return t.commit.author.date-e.commit.author.date}),[2,{branches:n,error:null}]}})})).apply(this,arguments)}(r=i||(i={})).LOCAL="LOCAL",r.REMOTE="REMOTE",r.TRACKED="TRACKED"},91075:function(e,t,n){n.d(t,{T:function(){return i},Z:function(){return d}});var r,i,o=n(34142),a=n(32477),l=n(87682),c=n(75813),s=n(50431),u=n(55103);function d(e){return f.apply(this,arguments)}function f(){return(f=(0,o._)(function(e){var t,n,r,i,o,d,f,h,p,m=arguments;return(0,l.Jh)(this,function(l){switch(l.label){case 0:return t=m.length>1&&void 0!==m[1]?m[1]:{},[4,(0,u.Z)(e)];case 1:if((n=l.sent()).error)return[2,n];if(!n.branch)return[2,{error:c.aq.HEAD_DETACHED}];if(!n.upstream||(i=(r=(0,a._)((0,s.Tg)(n.upstream.branch),2))[0],o=r[1],!i||!o))return[2,{error:c.aq.UPSTREAM_NOT_SET}];if(n.changes.length>0)return[2,{error:c.aq.DIRTY_WORKTREE}];if("FF_ONLY"===(f=null!==(d=t.mode)&&void 0!==d?d:"FF_ONLY")&&n.upstream.ahead>0)return[2,{error:c.aq.MERGE_CONFLICT}];switch("FF_ONLY"!==f&&0===n.upstream.ahead&&(f="FF_ONLY"),h=["--quiet","--no-edit"],f){case"FF_ONLY":h.push("--no-rebase","--ff-only");break;case"MERGE":h.push("--no-rebase","--ff");break;case"REBASE":h.push("--rebase")}return h.push((0,s.Gw)(i),(0,s.Gw)(o)),[4,e("git pull ".concat(h.join(" ")),{serviceMethod:"git-pull"})];case 2:if((p=l.sent()).error!==c.aq.MERGE_CONFLICT)return[3,8];if(t.allowConflicts)return[2,{hasConflicts:!0,error:null}];switch(f){case"MERGE":return[3,3];case"REBASE":return[3,5]}return[3,7];case 3:return[4,e("git merge --abort",{serviceMethod:"git-pull"})];case 4:case 6:return l.sent(),[3,7];case 5:return[4,e("git rebase --abort",{serviceMethod:"git-pull"})];case 7:return[2,p];case 8:if(p.error)return[2,p];return[2,{hasConflicts:!1,error:null}]}})})).apply(this,arguments)}(r=i||(i={})).FF_ONLY="FF_ONLY",r.MERGE="MERGE",r.REBASE="REBASE"},63043:function(e,t,n){n.d(t,{J:function(){return r},O:function(){return i}});var r="users.noreply.replit.com",i="users.noreply.github.com"},97631:function(e,t,n){n.d(t,{J:function(){return i},e:function(){return r}});var r=(0,n(59173).u)(null);function i(e,t,n){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Date.now();Array.isArray(e)||(e=[e]);var a=null!==(i=t.output)&&void 0!==i?i:"",l=t.error,c=n?o:Date.now(),s="".concat(o,"-").concat(Math.random());r.set({input:e,output:a,error:l,start:o,end:c,cached:n,key:s})}},75813:function(e,t,n){var r,i,o,a,l,c;n.d(t,{aq:function(){return r},dq:function(){return i},rG:function(){return o}}),(a=r||(r={})).UNKNOWN_NOT_GIT="UNKNOWN_NOT_GIT",a.UNKNOWN="UNKNOWN",a.TIMEOUT="TIMEOUT",a.CHANNEL_CLOSED="CHANNEL_CLOSED",a.NOT_INITIALIZED="NOT_INITIALIZED",a.UNAUTHENTICATED="UNAUTHENTICATED",a.INDEX_FILE_CORRUPT="INDEX_FILE_CORRUPT",a.UNKNOWN_REMOTE="UNKNOWN_REMOTE",a.INDEX_LOCKED="INDEX_LOCKED",a.NO_COMMITS="NO_COMMITS",a.PATH_MATCHED_NO_FILES="PATH_MATCHED_NO_FILES",a.USER_NOT_CONFIGURED="USER_NOT_CONFIGURED",a.INVALID_REFERENCE="INVALID_REFERENCE",a.BRANCH_ALREADY_EXISTS="BRANCH_ALREADY_EXISTS",a.MERGE_CONFLICT="MERGE_CONFLICT",a.UPSTREAM_NOT_SET="UPSTREAM_NOT_SET",a.HEAD_DETACHED="HEAD_DETACHED",a.DIRTY_WORKTREE="DIRTY_WORKTREE",a.PUSH_REJECTED="PUSH_REJECTED",a.REMOTE_ALREADY_EXISTS="REMOTE_ALREADY_EXISTS",a.ALREADY_INITIALIZED="ALREADY_INITIALIZED",a.INVALID_STATE="INVALID_STATE",a.PROTECTED_BRANCH="PROTECTED_BRANCH",(l=i||(i={})).FS_CHANGE="FS_CHANGE",l.FORCED_REFRESH="FORCED_REFRESH",l.NEW_PROFILE="NEW_PROFILE",l.CHANGED_PROFILE="CHANGED_PROFILE",(c=o||(o={})).REPLIT_DEFAULT="REPLIT_DEFAULT",c.GITHUB="GITHUB"},19858:function(e,t,n){n.d(t,{Z:function(){return f}});var r=n(32477),i=n(21289),o=n(7444),a=n(50199),l=n(75813),c=n(54916),s=n(43429),u=n(3756),d=n.n(u);function f(e){var t,n,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},h=(0,r._)((0,s.useState)(null),2),p=h[0],m=h[1],v=(0,o.Z)(p),g=null===(n=null!==(t=f.keepStaleResult)&&void 0!==t?t:f.refresh)||void 0===n||n,y=(0,s.useCallback)(function(e){d()(e,v.current)||m(e)},[v]),b=(0,a.Z)(function(){return e},(0,i._)(u)),Z=(0,c.Z)().git,w=(0,s.useRef)(null),x=(0,s.useCallback)(function(){w.current?w.current():g||y(null);var e=!1;b(Z).then(function(t){e||(y(t),w.current=null)}).catch(function(){e||(y({error:l.aq.UNKNOWN}),w.current=null)}),w.current=function(){e=!0,w.current=null,g||y(null)}},[y,b,Z,g]);return(0,s.useEffect)(function(){return x()},[x]),(0,s.useEffect)(function(){var e;if(null===(e=f.refresh)||void 0===e||e)return Z.onRefresh(x)},[Z,x,f.refresh]),p}},36098:function(e,t,n){var r,i,o,a;n.d(t,{Z:function(){return i},z:function(){return r}}),(o=r||(r={})).INSTRUCTION_RESULT="INSTRUCTION_RESULT",o.TEST_RESULT="TEST_RESULT",o.ERROR="ERROR",o.STATE_CHANGED="STATE_CHANGED",(a=i||(i={}))[a.Idle=0]="Idle",a[a.Starting=1]="Starting",a[a.Ready=2]="Ready",a[a.Building=3]="Building",a[a.Running=4]="Running"},69521:function(e,t,n){n.d(t,{Z:function(){return r}});function r(e){var t,n=e.getServerCapabilities();return{isAutoCompleteSupported:!!(null==n?void 0:n.completionProvider),isCompletionItemResolveSupported:!!(null==n?void 0:null===(t=n.completionProvider)||void 0===t?void 0:t.resolveProvider),isDocumentSymbolSupported:!!(null==n?void 0:n.documentSymbolProvider),isFindReferencesSupported:!!(null==n?void 0:n.referencesProvider),isFindDefinitionSupported:!!(null==n?void 0:n.definitionProvider),isFindTypeDefinitionSupported:!!(null==n?void 0:n.typeDefinitionProvider),isFindImplementationSupported:!!(null==n?void 0:n.implementationProvider),isFormatSupported:!!(null==n?void 0:n.documentFormattingProvider),isFormatRangeSupported:!!(null==n?void 0:n.documentRangeFormattingProvider),isTextDocumentSyncSupported:!!(null==n?void 0:n.textDocumentSync),isHoverSupported:!!(null==n?void 0:n.hoverProvider),isRenameSupported:!!(null==n?void 0:n.renameProvider),isCodeActionsSupported:!!(null==n?void 0:n.codeActionProvider),isSignatureHelpSupported:!!(null==n?void 0:n.signatureHelpProvider)}}},19012:function(e,t,n){var r=n(18672);t.Z=[r.SymbolKind.Array,r.SymbolKind.Boolean,r.SymbolKind.Class,r.SymbolKind.Constant,r.SymbolKind.Constructor,r.SymbolKind.Enum,r.SymbolKind.EnumMember,r.SymbolKind.Event,r.SymbolKind.Field,r.SymbolKind.File,r.SymbolKind.Function,r.SymbolKind.Interface,r.SymbolKind.Key,r.SymbolKind.Method,r.SymbolKind.Module,r.SymbolKind.Namespace,r.SymbolKind.Object,r.SymbolKind.Operator,r.SymbolKind.Package,r.SymbolKind.Property,r.SymbolKind.String,r.SymbolKind.Struct,r.SymbolKind.TypeParameter,r.SymbolKind.Variable]},8701:function(e,t,n){var r,i,o,a;n.d(t,{N:function(){return r},a:function(){return i}}),(o=r||(r={})).NOT_READY="NOT_READY",o.READY="READY",o.STALLED="STALLED",(a=i||(i={})).OFFLINE="OFFLINE",a.INITIALIZING="INITIALIZING",a.INITIALIZED="INITIALIZED",a.EXITING="EXITING",a.EXITED="EXITED"},69926:function(e,t,n){n.d(t,{Z:function(){return v}});var r=n(32477),i=n(43429),o=n(54916),a=n(45903),l=n(25e3),c=n(53304),s=n.n(c),u=n(47507),d=n(99071),f=n(8701);function h(e){return Math.floor(performance.now()-e.startTime)}var p=new WeakSet,m=n(50782);function v(e){var t=(0,m.Z)(),n=(0,o.Z)().lspnix,c=(0,r._)(i.useState(null),2),v=c[0],g=c[1];return i.useEffect(function(){if(e){var t=n.onClient(e,g);return function(){t(),g(null)}}},[n,e]),i.useEffect(function(){if(v)return function(e){var t=e.client,n=e.replId,r=e.language;if(!p.has(t)){p.add(t);var i=new Map,o=function(e){var i,o=t.getServerState(),a=null!==(i=t.getServerInfo())&&void 0!==i?i:{name:"unknown",version:"none"},l=o===f.a.INITIALIZED?"".concat(null==a?void 0:a.name,"@").concat(null==a?void 0:a.version):"not_ready: server is ".concat(o);return{method:e.method,replid:n,language:r,startTime:Math.floor(e.startTime),languageServerInfo:l,lspId:t.clientId}},c=s()(function(e,t){var n=h(t);n>1e4&&u.kg.time("LSP unresponsive request",n,o(t))}),m=setInterval(function(){i.forEach(function(e){c(e.id,e)})},2e3);return(0,d.uf)([t.onRequest(function(e){var t=e.id,n=e.data;.01>Math.random()&&i.set(t,{id:t,method:n.method,startTime:performance.now()})}),t.onResponse(function(e){var t=e.id,n=e.error,r=i.get(t);null!=r&&(i.delete(t),u.kg.time("LSP request",h(r),(0,l._)((0,a._)({},o(r)),{result:null==n?"ok":"error"})))}),t.onCancelRequest(function(e){var t=i.get(e);null!=t&&(i.delete(e),u.kg.time("LSP request",h(t),(0,l._)((0,a._)({},o(t)),{result:"cancelled"})))}),function(){return clearInterval(m)},function(){return p.delete(t)}])}}({client:v,replId:t,language:v.getLanguageId(e)})},[v,t,e]),v}},56729:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(32477),i=n(43429),o=n(69521);function a(e){var t=(0,r._)(i.useState(null),2),n=t[0],a=t[1];return i.useEffect(function(){if(!e){a(null);return}return a((0,o.Z)(e)),e.onServerCapabilitiesChange(function(){a((0,o.Z)(e))})},[e]),n}},73660:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(32477),i=n(43429),o=n(54916);function a(){var e=(0,o.Z)().presence,t=(0,r._)(i.useState(e.getFollowedUser()),2),n=t[0],a=t[1];return i.useEffect(function(){return a(e.getFollowedUser()),e.onFollowedUserChanged(a)},[e]),n}},1518:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(73660);function i(){var e=(0,r.Z)();return e?e.color:null}},15482:function(e,t,n){n.d(t,{F:function(){return o}});var r=n(73164),i=n(40728);function o(e,t){var n=(0,r.rF)(t.fileTypeAttrs);return!n&&(null==t?void 0:t.language)&&(n=r.$R.from(t.language)),!!(n&&(0,i.JW)(e,n))}},30845:function(e,t,n){n.d(t,{M:function(){return _},l:function(){return C}});var r=n(39698),i=n(45903),o=n(25e3),a=n(32477),l=n(8182),c=n(50782),s=n(93918),u=n(29287),d=n(74833),f=n(56596),h=n(75928),p=n(32078),m=n(93302),v=n(8279),g=n(43429),y=n(34785),b=n(42588),Z=n(91612),w=n(85838),x=(0,s.X)({storageBarWrapper:[u.l0.colWithGap(8)],summaryWrapper:[u.l0.colWithGap(8),u.l0.align.start],totalSummaryDot:[u.l0.backgroundColor.backgroundHigher,u.l0.width(8),u.l0.height(8),{borderRadius:"50%"}],replSummaryDot:[u.l0.backgroundColor.accentPrimaryDefault,u.l0.width(8),u.l0.height(8),{borderRadius:"50%"}],summaryRow:[u.l0.rowWithGap(8),u.l0.justify.start,u.l0.align.center,u.l0.fontSize(14),u.l0.height(14)],summaryRowWrap:[u.l0.rowWithGap(8),u.l0.justify.start,u.l0.align.center,u.l0.fontSize(14),{flexWrap:"wrap"}],replSummaryText:[u.l0.color.accentPrimaryStronger],replSummaryUsage:[u.l0.color.accentPrimaryStrongest],replSummaryTextPlaceholder:[v.p.backgroundPulse(u.TV.backgroundHigher,u.TV.backgroundRoot),{opacity:.5},u.l0.borderRadius(4),u.l0.height("100%"),u.l0.width(78)],replUsagePlaceholder:[v.p.backgroundPulse(u.TV.backgroundHigher,u.TV.backgroundRoot),{opacity:.5},u.l0.borderRadius(4),u.l0.height("100%"),u.l0.width(64)],totalUsagePlaceholder:[v.p.backgroundPulse(u.TV.backgroundHigher,u.TV.backgroundRoot),{opacity:.5},u.l0.borderRadius(4),u.l0.height("100%"),u.l0.width(140)],availablePlaceholder:[v.p.backgroundPulse(u.TV.backgroundHigher,u.TV.backgroundRoot),{opacity:.5},u.l0.borderRadius(4),u.l0.height("100%"),u.l0.width(64)],availableText:[u.l0.color.foregroundDimmest,(0,r._)({},u.BC.max(390),u.l0.pl(16))]}),C=function(e){var t=e.data,n=e.hideAlerts,r=(0,c.Z)(),s=(0,a._)((0,g.useState)(!1),2),u=s[0],v=s[1];if((0,g.useEffect)(function(){var e,n;t&&(null===(e=t.currentUser)||void 0===e?void 0:e.storageInfo.accountStorageUtilization.__typename)==="AccountStorageUtilization"&&(null===(n=t.currentUser.storageInfo.accountStorageUtilization.perRepl.find(function(e){return e.repl.id===r}))||void 0===n?void 0:n.__typename)==="ReplStorageUtilization"&&v(!0)},[t,r]),t&&(null===(C=t.currentUser)||void 0===C?void 0:C.__typename)==="CurrentUser"&&"StorageQuota"===t.currentUser.storageInfo.storageQuota.__typename&&"StorageGracePeriodQuota"===t.currentUser.storageInfo.storageGracePeriodQuota.__typename&&"AccountStorageUtilization"===t.currentUser.storageInfo.accountStorageUtilization.__typename&&"UserPowerUpsTypes"===t.currentUser.userPowerUpsByType.__typename&&u){var C,S,E,k=t.currentUser.username,T=t.currentUser.storageInfo.accountStorageUtilization,R=t.currentUser.storageInfo.storageQuota.quota,D=null!==(S=t.currentUser.userPowerUpsByType.storage.currentSku)&&void 0!==S?S:void 0,I=D?Z.zd[D]:void 0,G=T.total,B=T.perRepl,A=null!==(E=t.currentUser.userSubscriptionType)&&void 0!==E?E:void 0,P=A?Z.XR[A]:Z.XR.FREE,N=Math.max(Number(R)-Number(G),0),U="Bytes",L="(".concat((0,m.fZ)(N,{precision:1,resourceUsageType:U})," available)"),O=B.find(function(e){return e.repl.id===r}),M="0"!==R?(0,l.tZ)(d.xv,{css:x.availableText,multiline:!1,children:L}):null;return(0,l.BX)(f.G,{css:x.storageBarWrapper,children:[(0,l.tZ)(h.$,{context:{type:"workspace_info_modal",replId:r},summary:(0,p._4)((0,o._)((0,i._)({},T),{quota:R})),username:k,resourceUsageType:U}),(0,l.BX)(f.G,{css:x.summaryWrapper,children:[(0,l.BX)(f.G,{css:x.summaryRowWrap,children:[(0,l.BX)(d.xv,{multiline:!1,children:["Replit ",(0,y.s)(A)," storage: ",P," GiB",I?" + ".concat(I," GiB add-on"):null]}),M]}),(0,l.BX)(f.G,{css:x.summaryRow,children:[(0,l.tZ)("div",{css:x.replSummaryDot}),(0,l.tZ)(d.xv,{css:x.replSummaryText,multiline:!1,children:"This Repl:"}),O?(0,l.tZ)(d.xv,{css:x.replSummaryUsage,multiline:!1,children:(0,b.s)(Number(O.usage))}):(0,l.tZ)(f.G,{css:x.replUsagePlaceholder})]}),void 0!==n&&n?null:(0,l.tZ)(w.q,{})]})]})}return(0,l.tZ)(_,{})},_=function(){return(0,l.BX)(f.G,{css:x.storageBarWrapper,children:[(0,l.tZ)(h.X,{}),(0,l.BX)(f.G,{css:x.summaryWrapper,children:[(0,l.BX)(f.G,{css:x.summaryRow,children:[(0,l.tZ)(f.G,{css:x.totalUsagePlaceholder}),(0,l.tZ)(f.G,{css:x.availablePlaceholder})]}),(0,l.BX)(f.G,{css:x.summaryRow,children:[(0,l.tZ)(f.G,{css:x.replSummaryTextPlaceholder}),(0,l.tZ)(f.G,{css:x.replUsagePlaceholder})]})]})]})}},65243:function(e,t,n){n.d(t,{g:function(){return o}});var r=n(8182),i=n(51384);function o(){return(0,r.tZ)(i.xB,{styles:[{body:{overflow:"hidden"}}]})}},30601:function(e,t,n){n.d(t,{w:function(){return h}});var r=n(45903),i=n(32477),o=n(8182),a=n(72282),l=n.n(a),c=n(43429),s=n(38927),u=n(51384),d=n(26508),f=n(29287);function h(e){var t=e.targetElement,n=(0,i._)((0,c.useState)(null),2),a=n[0],h=n[1],m=(0,d.Z)(function(){t&&h({rect:t.getBoundingClientRect(),docWidth:document.documentElement.clientWidth,docHeight:document.documentElement.clientHeight})},{type:"throttle",wait:100});if((0,c.useEffect)(function(){t&&m(t)},[t,m]),(0,c.useEffect)(function(){if(t){var e=l()(function(){h({rect:t.getBoundingClientRect(),docWidth:document.documentElement.clientWidth,docHeight:document.documentElement.clientHeight})},100);return window.addEventListener("resize",e),window.addEventListener("scroll",e),function(){window.removeEventListener("resize",e),window.removeEventListener("scroll",e)}}},[t]),!a||!t)return null;var v=(0,u.iv)({backgroundColor:f.TV.backgroundOverlay,zIndex:f.n0+1,position:"fixed",transition:"all 0.5s ease-out"});return(0,s.createPortal)((0,o.BX)(o.HY,{children:[(0,o.tZ)("div",{id:"wat",css:[p((0,r._)({side:"left-top"},a)),v]}),(0,o.tZ)("div",{css:[p((0,r._)({side:"top-right"},a)),v]}),(0,o.tZ)("div",{css:[p((0,r._)({side:"right-bottom"},a)),v]}),(0,o.tZ)("div",{css:[p((0,r._)({side:"bottom-left"},a)),v]})]}),document.body)}function p(e){var t=e.side,n=e.rect,r=e.docWidth,i=e.docHeight;switch(t){case"left-top":return(0,u.iv)({top:0,left:0,width:Math.max(0,n.left),height:Math.max(0,n.bottom)});case"top-right":return(0,u.iv)({top:0,right:0,width:"calc(".concat(r,"px - ").concat(Math.max(0,n.left),"px)"),height:Math.max(0,n.top)});case"right-bottom":return(0,u.iv)({bottom:0,right:0,width:"calc(".concat(r,"px - ").concat(Math.max(0,n.right),"px)"),height:"calc(".concat(i,"px - ").concat(Math.max(0,n.top),"px)")});case"bottom-left":return(0,u.iv)({bottom:0,left:0,width:Math.max(0,n.right),height:"calc(".concat(i,"px - ").concat(Math.max(0,n.bottom),"px)")})}}},30869:function(e,t,n){n.d(t,{k:function(){return v}});var r=n(45903),i=n(25e3),o=n(32477),a=n(8182),l=n(30983),c=n(36227),s=n(43429),u=n(38927),d=n(2581),f=n(87659),h=n(29287),p=n(26508),m=n(22487);function v(e){var t=e.targetElement,n=e.activeStep,v=e.goto,g=e.currentStepIndex,y=e.totalSteps,b=e.done,Z=e.disableAnimation,w=e.placement,x=e.cypressCloseData,C=e.onClickOutside,_=e.innerRef,S=e.width,E=(0,o._)((0,s.useState)(null),2),k=E[0],T=E[1],R=(0,o._)((0,s.useState)(null),2),D=R[0],I=R[1],G=(0,d.D)(t,k,{placement:void 0===w?"right":w,modifiers:[{name:"arrow",options:{element:D,padding:8}},{name:"offset",options:{offset:[0,16]}},{name:"preventOverflow",options:{padding:8}},{name:"flip",options:{fallbackPlacements:["top","bottom","left","right"]}},{name:"computeStyles",options:{adaptive:!1}}]}),B=(0,p.Z)(function(){var e;null===(e=G.update)||void 0===e||e.call(G)},{type:"throttle",wait:100});(0,s.useEffect)(function(){B(t)},[t,B]),(0,s.useImperativeHandle)(_,function(){return{updateTooltip:function(){var e;null===(e=G.update)||void 0===e||e.call(G)}}});var A=(0,m.Z)(function(){C&&C()},[C]);return(0,u.createPortal)((0,a.BX)("div",(0,i._)((0,r._)({ref:function(e){A.current=e,T(e)},style:G.styles.popper,css:{transition:Z?"all":"all 0.5s ease-out",zIndex:h.n0+2,width:null!=S?S:320}},G.attributes.popper),{children:[(0,a.tZ)(c.O,{title:n.title,content:n.content,onDismiss:function(){b()},currentStepIndex:g,onCurrentStepChange:v,totalSteps:y,cypressCloseData:void 0===x?"tour-tooltip-close-button":x}),(0,a.tZ)("span",{style:G.styles.arrow,css:[l.wk,{"&::after":{backgroundColor:f.Br.primary.dimmest,border:"1px solid "+f.Br.primary.dimmer}}],ref:I})]})),document.body)}},70781:function(e,t,n){n.d(t,{r:function(){return g},e:function(){return y.e}});var r=n(39698),i=n(45903),o=n(25e3),a=n(32477),l=n(8182),c=n(26635),s=n(43429),u=n(14818),d=n(36227),f=n(49344);function h(){var e=(0,u.X)();if(!e)return null;var t=e.activeStep,n=e.goto,r=e.steps,i=e.done;return(0,l.tZ)(f.u,{preventClose:!0,isOpen:!!t.isModal,onRequestClose:function(){},centered:!0,maxWidth:"fit-content",noPadding:!0,children:(0,l.tZ)(d.O,{title:t.title,content:t.content,onDismiss:function(){i()},currentStepIndex:r.findIndex(function(e){return t.id===e.id}),onCurrentStepChange:n,totalSteps:r.length,cypressCloseData:"tour-tooltip-close-button"})})}var p=n(30601),m=n(30869),v=n(33212);function g(e){var t,n,d,f,g,y,b,Z,w,x,C,_=e.children,S=e.tour,E=e.isDoneInitialOverride,k=e.onStep,T=e.onDone,R=(0,a._)((0,s.useState)(S.steps[0]),2),D=R[0],I=R[1],G=(0,a._)((0,s.useState)({}),2),B=G[0],A=G[1],P=(t=S.id,f=(d=(0,c.Pp)({variables:{tours:t}})).data,g=d.loading,y=(0,a._)((0,c.oe)({variables:{name:t},optimisticResponse:{__typename:"RootMutationType",markTourAsSeen2:{__typename:"TourSeen",id:t,seen:!0}}}),1)[0],Z=(b=(0,a._)((0,s.useState)(E),2))[0],w=b[1],x=!!(null==f?void 0:null===(n=f.currentUser)||void 0===n?void 0:n.toursSeen[0].seen),"boolean"==typeof Z&&(x=Z),{isLoading:g,isDone:x,setIsDone:function(e){w(e),e&&y()}}),N=P.isDone,U=P.isLoading,L=P.setIsDone,O=S.steps.findIndex(function(e){return D.id===e.id});if(-1===O)throw Error("Current tour step is not in tour steps");function M(){L(!0),null==T||T(D.id)}var X=(0,s.useRef)();function F(e){X.current=D,null==k||k(e.id),I(e)}function W(e){if("number"==typeof e)t=e;else{var t;t=S.steps.findIndex(function(t){return e===t.id})}if(!(t<0)&&!(t>=S.steps.length)){for(var n=S.steps[t],r=t<O;!B[n.id]&&n.autoSkipIfNoTarget;){if((t=r?t-1:t+1)<0||t>=S.steps.length)return;n=S.steps[t]}F(n)}}function H(){W(0),L(!1)}var V=(0,s.useCallback)(function(e,t){var n=S.steps.findIndex(function(t){return e===t.id});if(-1===n)throw Error("Invalid step id");if(S.steps[n].isModal)throw Error("Trying to set a target element for a modal step");A(function(n){return n[e]===t?n:(0,o._)((0,i._)({},n),(0,r._)({},e,t))})},[S]),z=B[D.id],j=!N&&!U;window.startTour=function(){v.log("starting tour:",S.id,"from",S.steps[0].id),H()};var q=S.steps.filter(function(e){return!e.autoSkipIfNoTarget||!!B[e.id]}),Y=q.findIndex(function(e){return D.id===e.id});return(0,l.BX)(u.z,{value:(0,o._)((0,i._)({},S),{setStepTargetElement:V,activeStep:D,next:function(){var e=S.steps[O+1];if(e&&e.autoSkipIfNoTarget)for(var t=O+1;e&&e.autoSkipIfNoTarget&&!B[e.id];)t++,e=S.steps[t];if(!e){M();return}F(e)},prev:function(){var e=S.steps[O-1];if(e&&e.autoSkipIfNoTarget)for(var t=O-1;e&&e.autoSkipIfNoTarget&&!B[e.id];)t--,e=S.steps[t];e&&F(e)},goto:W,isDone:N,isLoading:U,done:M,restart:H}),children:[j&&D.isModal?(0,l.tZ)(h,{}):null,j&&z?(0,l.BX)(l.HY,{children:[(0,l.tZ)(p.w,{targetElement:z}),(0,l.tZ)(m.k,{targetElement:z,activeStep:D,currentStepIndex:Y,done:M,goto:function(e){W(e+O-Y)},totalSteps:q.length,disableAnimation:!!(0===O||(null===(C=X.current)||void 0===C?void 0:C.isModal))})]}):null,_]})}var y=n(89783)},24549:function(e,t,n){var r,i;n.d(t,{z:function(){return r}}),(i=r||(r={})).FileNode="FILE_NODE",i.FileHeaderTab="FILE_HEADER_TAB",i.Code="CODE",i.Pane="PANE",i.NewPane="NEW_PANE"},10099:function(e,t,n){var r=n(8182),i=n(94450),o=n.n(i),a=n(69832),l=n.n(a);n(43429);var c=n(10981);t.Z=function(e){var t=e.name,n=void 0===t?"toggle":t,i=e.id,a=e.elevation,s=void 0===a?"higher":a,u=e.isOn,d=e.onIcon,f=e.offIcon,h=e.onChange,p=e.dataCy,m=(0,c.U)(),v=null!=i?i:m(n);return(0,r.BX)("label",{"data-cy":p,htmlFor:v,className:o().dynamic([["8d56ad7b5afff72c",[s]]])+" "+(l()("toggle-label",{isOn:u})||""),children:[(0,r.tZ)("input",{name:n,checked:u,onChange:h,id:v,type:"checkbox",className:o().dynamic([["8d56ad7b5afff72c",[s]]])+" toggle-checkbox"}),(0,r.tZ)("span",{className:o().dynamic([["8d56ad7b5afff72c",[s]]])+" toggle-button",children:u&&d?d:f||null}),(0,r.tZ)(o(),{id:"8d56ad7b5afff72c",dynamic:[s],children:".toggle-checkbox.__jsx-style-dynamic-selector{height:0;width:0;visibility:hidden}.toggle-label.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;cursor:pointer;width:38px;height:24px;background:var(--background-".concat(s,');border:.5px solid var(--outline-dimmest);-webkit-border-radius:100px;-moz-border-radius:100px;border-radius:100px;position:relative;-webkit-transition:background-color.2s;-moz-transition:background-color.2s;-o-transition:background-color.2s;transition:background-color.2s}.toggle-button.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;content:"";position:absolute;left:1px;width:20px;height:20px;-webkit-border-radius:45px;-moz-border-radius:45px;border-radius:45px;-webkit-transition:.2s;-moz-transition:.2s;-o-transition:.2s;transition:.2s;background:var(--white);-webkit-box-shadow:var(--shadow-1);-moz-box-shadow:var(--shadow-1);box-shadow:var(--shadow-1);color:var(--foreground-dimmer)}.toggle-label.isOn.__jsx-style-dynamic-selector{background-color:var(--accent-primary-default);border-color:var(--accent-primary-default)}.toggle-checkbox.__jsx-style-dynamic-selector:checked+.toggle-button.__jsx-style-dynamic-selector{-webkit-transform:translatex(-webkit-calc(100% - 6px));-moz-transform:translatex(-moz-calc(100% - 6px));-ms-transform:translatex(calc(100% - 6px));-o-transform:translatex(calc(100% - 6px));transform:translatex(-webkit-calc(100% - 6px));transform:translatex(-moz-calc(100% - 6px));transform:translatex(calc(100% - 6px));color:var(--accent-primary-default)}.toggle-label.__jsx-style-dynamic-selector:active .toggle-button.__jsx-style-dynamic-selector{-webkit-box-shadow:var(--shadow-2);-moz-box-shadow:var(--shadow-2);box-shadow:var(--shadow-2)}')})]})}},47648:function(e,t,n){n.d(t,{Z:function(){return y}});var r=n(45903),i=n(25e3),o=n(70322),a=n(8182),l=n(49344),c=n(51965),s=n(93295),u=n(23982),d=n(77393);function f(){var e=(0,s._)(["\n  query UpgradeModal {\n    currentUser {\n      id\n      cycles {\n        transactions(count: 1) {\n          items {\n            id\n            time_created\n          }\n        }\n      }\n    }\n  }\n"]);return f=function(){return e},e}function h(){var e=(0,s._)(["\n  query CurrentUserSubscriptionIdentify {\n    currentUser {\n      id\n      userSubscriptionType\n    }\n  }\n"]);return h=function(){return e},e}var p={},m=(0,u.Ps)(f()),v=(0,u.Ps)(h()),g=n(87001);function y(e){var t,n,s=e.isOpen,u=e.onRequestClose,f=e.onPlanCheckoutComplete,h=(0,o._)(e,["isOpen","onRequestClose","onPlanCheckoutComplete"]);return t=(0,r._)({},p,{ssr:!1,context:{noBatch:!0}}),d.a(m,t),n=(0,r._)({},p,void 0),d.a(v,n),(0,a.tZ)(l.u,(0,i._)((0,r._)({noPadding:!0,maxWidth:c.W,fitContent:!0,isOpen:s,onRequestClose:u},h),{children:(0,a.tZ)(c.Z,(0,i._)((0,r._)({},h),{onCyclesCheckoutComplete:u,onPlanCheckoutComplete:function(e){"function"==typeof f&&f(e),e!==g.Pg&&u()}}))}))}},62808:function(e,t,n){n.d(t,{Y:function(){return x},Z:function(){return E}});var r=n(8182),i=n(43429),o=n(74633),a=n(84357),l=n(38265),c=n(92994),s=n(40497),u=n(16643),d=n(59173),f=n(29287),h=n(56596),p=n(63461),m=n(99071),v=n(86790),g=(0,d.u)(null),y=(0,d.u)(null),b=(0,d.u)({from:0,to:0}),Z=l.p.mark({class:"ast-hover"}),w=l.tk.baseTheme({".ast-hover":{background:f.TV.backgroundHighest}});function x(e){var t=e.view,n=(0,c.Z)({view:t}),r=(0,v.k)();(0,i.useEffect)(function(){if(r&&t){g.current=t.state;var e=a.Py.define(),i=(0,m.uf)([y.subscribe(function(n){t.dispatch({effects:e.of(n)})}),b.subscribe(function(e){t.dispatch({selection:{anchor:e.from,head:e.to}})})]);return t.dispatch({effects:n.reconfigure([l.tk.updateListener.of(function(e){(e.selectionSet||e.docChanged)&&(g.current=e.state)}),a.QQ.define({create:function(){return l.p.none},update:function(t,n){return t=t.map(n.changes),(0,s.j)(n,e,function(e){t=null==e.value?l.p.none:l.p.set([Z.range(e.value.from,e.value.to)])}),t},provide:function(e){return l.tk.decorations.from(e)}}),w])}),function(){g.current=null,i(),t.dispatch({effects:n.reconfigure([])})}}},[t,r,n])}var C=(0,i.memo)(function(e){var t=e.node,n=e.index,i=e.active,o=e.terminal,a=t.type.name,l={from:t.from,to:t.to};return(0,r.BX)(h.G,{css:[{marginLeft:4*n+(o?4:0)},f.l0.mb(4),f.l0.rowWithGap(2),f.l0.align.center,f.l0.cursor.pointer],onMouseEnter:function(){y.current=l},onClick:function(){y.current=null,b.current=l},children:[(0,r.tZ)(p.Z,{size:"small",fontFamily:a.length>1?"sans-serif":"monospace",fontWeight:i?"bold":"regular",children:a}),(0,r.BX)(p.Z,{size:"xsmall",truncate:!0,children:["(",t.from," – ",t.to,")"]})]})});function _(e,t){for(var n=[];t(e);)n.push(e.node);return n}var S=(0,i.memo)(function(e){var t=e.state,n=(0,o.qz)(t),a=t.selection.main.head,l=(0,i.useMemo)(function(){return _(n.cursorAt(a),function(e){return e.parent()}).reverse()},[n,a]),c=(0,i.useMemo)(function(){return _(n.cursorAt(a),function(e){return e.prevSibling()})},[n,a]),s=(0,i.useMemo)(function(){return _(n.cursorAt(a),function(e){return e.nextSibling()})},[n,a]);return(0,r.BX)(h.G,{css:f.l0.ml(4),onMouseLeave:function(){y.current=null},children:[l.map(function(e,t){return(0,r.tZ)(C,{node:e,index:t},t)}),c.map(function(e,t){return(0,r.tZ)(C,{node:e,index:l.length,terminal:!0},t)}),(0,r.tZ)(C,{node:n.resolveInner(t.selection.main.head),index:l.length,terminal:!0,active:!0}),s.map(function(e,t){return(0,r.tZ)(C,{node:e,index:l.length,terminal:!0},t)})]})});function E(e){var t=e.isHidden,n=(0,u.Z)(g);return t?null:n?(0,r.tZ)(S,{state:n}):null}},12621:function(e,t,n){n.d(t,{YX:function(){return Z},ho:function(){return w}});var r=n(23026),i=n(45903),o=n(25e3),a=n(32477),l=n(8182),c=n(43429),s=n(29287),u=n(74833),d=n(56596),f=n(71984),h=n(88936),p=n(34815),m=n(32377),v=n(61155),g=n(16643),y=n(59173),b=n(98463),Z=new(function(){"use strict";function e(){var t=this;(0,r._)(this,e),this.counter=0,this.enabled=!1,this.maxEntries=10,this.logs=(0,y.u)([]),this.clear=function(){t.logs.current=[]}}var t=e.prototype;return t.toggle=function(e){this.enabled=e},t.add=function(e){var t=this,n=this.counter++;if(!this.enabled)return{id:n};var r={id:n,request:e,requestTime:Date.now()};return this.logs.update(function(e){return[r].concat(e).slice(0,t.maxEntries)}),{id:n}},t.update=function(e,t){this.enabled&&this.logs.update(function(n){var r=n.findIndex(function(t){return t.id===e.id});if(-1===r)return n;var i=n.slice();return i[r]=t(i[r]),i})},t.complete=function(e,t){this.update(e,function(e){return(0,o._)((0,i._)({},e),{response:t,responseTime:Date.now()})})},t.abort=function(e){this.logs.update(function(t){return t.filter(function(t){return t.id!==e.id||null!=t.responseTime})})},e}()),w=function(e){var t=e.isHidden,n=(0,g.Z)(Z.logs);return t?null:(0,l.BX)(d.G,{css:[s.l0.flex.column],children:[(0,l.BX)(d.G,{css:[s.l0.flex.row,s.l0.align.center,s.l0.m(4),s.l0.position.sticky,s.l0.top(0),s.l0.backgroundColor.backgroundDefault,s.l0.zIndex(1)],children:[(0,l.tZ)(u.xv,{css:s.l0.flex.grow(1),multiline:!1,children:"Requests"}),(0,l.tZ)(f.Z,{onClick:Z.clear})]}),(0,l.BX)(d.G,{css:[s.l0.flex.grow(1),s.l0.flex.column,s.l0.overflow("auto")],children:[n.map(function(e){var t;return(0,l.tZ)(x,{log:e},null!==(t=e.id)&&void 0!==t?t:e.requestTime.valueOf())}),!n.length&&(0,l.tZ)(d.G,{css:s.l0.m(4),children:"\uD83D\uDE14 No logs yet..."})]})]})},x=(0,c.memo)(function(e){var t,n=e.log,r=n.requestTime,i=n.responseTime,o=n.request,c=n.response,f=(0,a._)((0,v.Z)(!0),2),g=f[0],y=f[1],Z=o.code.length>20?"...".concat(o.code.slice(-20)):o.code;return(0,l.BX)(d.G,{css:[s.l0.my(4),s.l0.mx(4)],children:[(0,l.BX)(d.G,{role:"button",onClick:y,onKeyDown:y,tabIndex:0,css:[s.l0.flex.row,s.l0.rowWithGap(4),{"&:hover":{cursor:"pointer",".lspLog-requestMethod":{textDecoration:"underline"}}}],children:[(0,l.BX)(d.G,{css:[s.l0.flex.grow(1),s.l0.rowWithGap(2)],children:[(0,l.tZ)(u.xv,{multiline:!1,children:(t=n.response)?"CompleteCodeResult"===t.__typename?(0,l.tZ)(m.Z,{}):(0,l.tZ)(p.Z,{}):(0,l.tZ)(h.Z,{})}),(0,l.tZ)(u.xv,{multiline:!1,children:(0,l.tZ)("code",{children:Z})})]}),(0,l.tZ)(d.G,{css:{opacity:.5},children:null!=i&&(0,l.BX)(u.xv,{css:s.l0.fontSize(13),multiline:!1,children:[i.valueOf()-r.valueOf()," ms"]})})]}),!g&&(0,l.BX)(l.HY,{children:[void 0!==o&&(0,l.tZ)(b.g,{name:"request",src:o}),void 0!==c&&("CompleteCodeResult"===c.__typename?(0,l.BX)("details",{children:[(0,l.tZ)("summary",{children:"Response"}),(0,l.tZ)("pre",{css:[s.l0.overflow("scroll"),s.l0.borderRadius(4),s.l0.p(4),{border:"1px solid ".concat(s.TV.outlineDimmest)}],children:c.code})]}):(0,l.tZ)(b.g,{name:"response",src:c}))]})]})})},87271:function(e,t,n){n.d(t,{Sj:function(){return l},Th:function(){return o},UB:function(){return c},a0:function(){return s},cF:function(){return i},ot:function(){return a}});var r=n(90234),i=function(e,t){var n=e.dir,r=e.channel,i=e.cmd;return(!t.direction||n===t.direction)&&(!t.regexp||!t.regexp.test||!!(r.name&&t.regexp.test(r.name))||!!(r.service&&t.regexp.test(r.service))||!!t.regexp.test(JSON.stringify(i)))},o=(0,r.cn)([]),a=(0,r.cn)({regexp:null,direction:"",highlightOnly:!1}),l=(0,r.cn)(function(e){var t,n;return t=e(o),((n=e(a)).regexp||n.direction)&&!n.highlightOnly?t.filter(function(e){return i(e,n)}):t}),c=(0,r.cn)(null,function(e,t){t(o,[])}),s=(0,r.cn)(!1)},28131:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(32477),i=n(21289),o=n(54916),a=n(71999),l=n(94106),c=n(43429),s=n(87271);function u(){var e=(0,l.useRouter)(),t=(0,o.Z)().container,n=(0,r._)((0,a.KO)(s.a0),2),u=n[0],d=n[1],f=(0,a.b9)(s.Th);(0,c.useEffect)(function(){e.query.debug&&"undefined"!==e.query.debug&&d(!0)},[d,e.query.debug]),(0,c.useEffect)(function(){if(u)return t.client().onDebugLog(function(e){if("log"===e.type){if(e.log.channel){if(n={name:e.log.channel.name,service:null},"string"==typeof e.log.channel.service)n.service=e.log.channel.service;else if(e.log.channel.service){var n,r=t.getContext();r&&(n.service=e.log.channel.service(r))}}f(function(t){return(0,i._)(t).concat([{index:t[t.length-1]?t[t.length-1].index+1:0,channel:n,dir:e.log.direction,cmd:e.log.cmd,timestamp:window.performance.now()}])})}})},[u,f,t])}},98463:function(e,t,n){n.d(t,{L:function(){return B},g:function(){return P}});var r=n(39698),i=n(45903),o=n(25e3),a=n(32477),l=n(21289),c=n(8182),s=n(43429),u=n(10981),d=n(58091),f=n(69926),h=n(15146),p=n(18836),m=n(29287),v=n(74833),g=n(56596),y=n(71984),b=n(60769),Z=n(10099),w=n(88936),x=n(80339),C=n(87279),_=n(69640),S=n(12036),E=n(97615),k=n(21869),T=n(58719),R=n(32377),D=n(61155),I=n(99071),G=n(97703),B=function(e){var t,n,r,w,C=e.isHidden,_=(n=(t=(0,a._)((0,s.useState)(null),2))[0],r=t[1],w=(0,d.R3)(),(0,s.useEffect)(function(){w!==n&&null!=w&&r(w)},[w,n]),n),S=(0,f.Z)(_||""),E=(0,u.U)(),T=(0,a._)((0,D.Z)(!0),2),R=T[0],G=T[1],B=(0,a._)((0,s.useState)(""),2),P=B[0],U=B[1],L=(0,a._)((0,s.useState)(function(){return[]}),2),O=L[0],M=L[1],X=(0,a._)((0,D.Z)(!0),2),F=X[0],W=X[1],H=(0,a._)((0,D.Z)(!0),2),V=H[0],z=H[1],j=(0,s.useCallback)(function(e){M(function(t){return[e].concat((0,l._)(t)).slice(0,100)})},[]),q=(0,s.useCallback)(function(e,t){M(function(n){for(var r=0;r<n.length;r++)if(n[r].id===e){n[r]=t(n[r]);break}return n.slice(0,100)})},[]),Y=(0,s.useCallback)(function(){M([])},[]),$=null==S?void 0:S.isOpen(_||""),J=(0,s.useCallback)(function(){j({canceled:!1,notification:{method:"probe",params:{filePath:_,state:null==S?void 0:S.getServerState(),capabilities:null==S?void 0:S.getServerCapabilities(),diagnostics:$?null==S?void 0:S.getDiagnostics(_||""):[],isOpen:$,isSupportedFile:null==S?void 0:S.isSupportedFile(_||"")}},requestTime:new Date,type:"probe"})},[j,S,_,$]),K=(0,s.useMemo)(function(){var e=P.split(",").map(function(e){return e.trim()}).filter(Boolean);if(!e.length)return O;var t=O;return F||(t=t.filter(function(e){return null==e.notification})),V||(t=t.filter(function(e){return null==e.request})),P&&(t=t.filter(function(t){return e.some(function(e){var n;return null===(n=t.request||t.notification)||void 0===n?void 0:n.method.toLowerCase().includes(e.toLowerCase())})})),t},[O,F,V,P]);return((0,s.useEffect)(function(){return(0,I.uf)([null==S?void 0:S.onRequest(function(e){R&&j({id:e.id,canceled:!1,request:e.data,requestTime:new Date})}),null==S?void 0:S.onResponse(function(e){R&&q(e.id,function(t){return(0,i._)((0,o._)((0,i._)({},t),{responseTime:new Date}),void 0!==e.result?{response:e.result}:{error:e.error})})}),null==S?void 0:S.onCancelRequest(function(e){R&&q(e,function(e){return(0,o._)((0,i._)({},e),{canceled:!0})})}),null==S?void 0:S.onDiagnostics(function(e){var t=e.path,n=e.diagnostics;R&&j({canceled:!1,notification:{method:"textDocument/publishDiagnostics for "+t,params:n},requestTime:new Date,type:"diagnostics"})}),null==S?void 0:S.onServerStateChange(function(e){R&&j({canceled:!1,notification:{method:"state",params:{serverState:e}},requestTime:new Date,type:"state"})}),null==S?void 0:S.onServerCapabilitiesChange(function(e){R&&j({canceled:!1,notification:{method:"capabilities",params:{serverCapabilities:e}},requestTime:new Date,type:"capabilities"})}),null==S?void 0:S.onSendNotification(function(e){R&&j({canceled:!1,notification:e,requestTime:new Date})})])},[S,j,q,R]),C)?null:(0,c.BX)(g.G,{css:[m.l0.flex.column],children:[(0,c.BX)(g.G,{css:[m.l0.flex.row,m.l0.align.center,m.l0.m(4),m.l0.position.sticky,m.l0.top(0),m.l0.backgroundColor.backgroundDefault,m.l0.zIndex(1)],children:[(0,c.tZ)(v.xv,{multiline:!1,children:S?(0,c.BX)(c.HY,{children:[(0,c.tZ)(N,{})," logs for ",(0,c.tZ)("code",{children:_})]}):"No LSP client available"}),(0,c.tZ)(h.hU,{alt:"Probe LSP",onClick:J,children:(0,c.tZ)(x.Z,{})}),(0,c.tZ)(g.G,{css:m.l0.flex.grow(1)}),(0,c.tZ)(Z.Z,{id:"toggleIsLogging",isOn:R,onChange:G})," "]}),(0,c.BX)(g.G,{css:[m.l0.rowWithGap(8),m.l0.m(4),m.l0.mb(8)],children:[(0,c.BX)(g.G,{css:m.l0.rowWithGap(4),children:[(0,c.tZ)(k.Z,{}),(0,c.tZ)(v.xv,{multiline:!1,children:"Show"})]}),(0,c.BX)(g.G,{css:m.l0.rowWithGap(4),children:[(0,c.tZ)(b.X,{id:E("showNotifications"),checked:F,onChange:W}),(0,c.tZ)("label",{htmlFor:E("showNotifications"),children:" Notifications"})]}),(0,c.BX)(g.G,{css:m.l0.rowWithGap(4),children:[(0,c.tZ)(b.X,{id:E("showRequests"),checked:V,onChange:z}),(0,c.tZ)("label",{htmlFor:E("showRequests"),children:" Requests"})]}),(0,c.tZ)(g.G,{css:m.l0.flex.growAndShrink(1)}),(0,c.tZ)(g.G,{css:m.l0.rowWithGap(4),children:(0,c.tZ)(y.Z,{onClick:Y})})]}),(0,c.tZ)(g.G,{css:m.l0.rowWithGap(4),children:(0,c.tZ)(p.II,{id:E("filterLsp"),placeholder:"Filter by method (Separate by ,)",onChange:function(e){return U(e.target.value)},value:P})}),(0,c.BX)(g.G,{css:[m.l0.flex.grow(1),m.l0.flex.column,m.l0.overflow("auto")],children:[K.map(function(e,t){var n;return(0,c.tZ)(A,{log:e},null!==(n=e.id)&&void 0!==n?n:e.requestTime.valueOf()+""+t)}),!K.length&&(0,c.tZ)(g.G,{css:m.l0.m(4),children:"\uD83D\uDE14 No logs yet..."})]})]})},A=s.memo(function(e){var t,n,r,i,o,l=e.log,s=l.requestTime,u=l.responseTime,d=l.request,f=l.response,h=l.notification,p=l.id,y=(0,a._)((0,D.Z)(!0),2),b=y[0],Z=y[1];return(0,c.BX)(g.G,{css:[m.l0.my(4),m.l0.mx(4)],children:[(0,c.BX)(g.G,{role:"button",onClick:Z,onKeyDown:Z,tabIndex:0,css:[m.l0.flex.row,m.l0.rowWithGap(4),{"&:hover":{cursor:"pointer",".lspLog-requestMethod":{textDecoration:"underline"}}}],children:[(0,c.BX)(g.G,{css:[m.l0.flex.grow(1),m.l0.rowWithGap(2)],children:[(0,c.tZ)(v.xv,{className:"lspLog-emoji",multiline:!1,children:(t=l.type,n=l.canceled,r=l.response,i=l.notification,"state"===t?(0,c.tZ)(S.Z,{}):"diagnostics"===t?(0,c.tZ)(C.Z,{}):"capabilities"===t?(0,c.tZ)(_.Z,{}):"probe"===t?(0,c.tZ)(x.Z,{}):n?(0,c.tZ)(T.Z,{}):i?(0,c.tZ)(E.Z,{}):void 0!==r?(0,c.tZ)(R.Z,{}):(0,c.tZ)(w.Z,{}))}),(0,c.BX)(v.xv,{className:"lspLog-requestMethod",multiline:!1,children:[(0,c.tZ)("code",{children:null===(o=d||h)||void 0===o?void 0:o.method}),null!=p&&(0,c.BX)("code",{className:"lspLog-logId",css:{opacity:.5},children:["#",p]})]})]}),(0,c.tZ)(g.G,{css:{opacity:.5},children:null!=u&&(0,c.BX)(v.xv,{css:m.l0.fontSize(13),multiline:!1,children:[u.valueOf()-s.valueOf()," ms"]})})]}),!b&&(0,c.BX)(c.HY,{children:[void 0!==d&&(0,c.tZ)(P,{name:"request.params",src:d.params}),void 0!==h&&(0,c.tZ)(P,{name:"notification.params",src:h.params}),void 0!==f&&(0,c.tZ)(P,{name:"response",src:f})]})]})}),P=(0,s.memo)(function(e){var t=e.name,n=e.src;return(0,c.tZ)(g.G,{css:{marginTop:5,".node-ellipsis":{letterSpacing:-2},".object-key span":{letterSpacing:0},".object-key-val":{paddingBottom:"0 !important"},'.object-key + span[style*="margin"], .array-key + span[style*="margin"]':{marginLeft:"0 !important"},".variable-row, .pushed-content .object-key-val":{paddingLeft:"10px !important",paddingBottom:"0 !important"}},children:(0,c.tZ)(G.Z,{json:(0,r._)({},t,n)})})}),N=function(){return(0,c.tZ)(v.xv,{multiline:!1,css:{display:"inline",fontStyle:"italic",fontWeight:600,textShadow:"".concat(m.TV.redDimmer," 2px 2px")},children:"LSP"})}},61155:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(32477),i=n(43429);function o(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(0,r._)((0,i.useState)(e),2),n=t[0],o=t[1];return[n,(0,i.useCallback)(function(){return o(function(e){return!e})},[])]}},46689:function(e,t,n){n.d(t,{AA:function(){return _},CH:function(){return y},Gg:function(){return v},Ne:function(){return E},pV:function(){return x},vk:function(){return Z}});var r=n(45903),i=n(93295),o=n(23982),a=n(79962),l=n(77393),c=n(72986);function s(){var e=(0,i._)(["\n  fragment AutograderTest on ReplTemplateTest {\n    id\n    name\n    input\n    output\n    name\n    type\n  }\n"]);return s=function(){return e},e}function u(){var e=(0,i._)(["\n  query Autograder($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        currentUserPermissions {\n          writeTests\n        }\n        template {\n          id\n        }\n        ioTests {\n          id\n          ...AutograderTest\n        }\n        unitTests {\n          meta {\n            id\n            ...UnitTestsReplUnitTestMeta\n          }\n          tests {\n            id\n            ...UnitTestsReplUnitTest\n            lastRun(replId: $replId) {\n              ... on ReplUnitTestLastRun {\n                status\n              }\n              ... on UserError {\n                message\n              }\n            }\n          }\n        }\n        isProject\n        isProjectFork\n        owner {\n          ... on Team {\n            id\n            isAdmin\n          }\n          ... on User {\n            id\n          }\n        }\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"]);return u=function(){return e},e}function d(){var e=(0,i._)(["\n  mutation SaveIOTestResults(\n    $teamId: Int!\n    $replId: String!\n    $results: [IOTestResultInput!]!\n  ) {\n    saveIOTestResults(teamId: $teamId, replId: $replId, results: $results) {\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n"]);return d=function(){return e},e}function f(){var e=(0,i._)(["\n  mutation CreateAutograderTest($input: CreateTemplateTestInput!) {\n    createTemplateTest(input: $input) {\n      ... on ReplTemplateTest {\n        id\n        ...AutograderTest\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return f=function(){return e},e}function h(){var e=(0,i._)(["\n  mutation UpdateAutograderTest($input: UpdateTemplateTestInput!) {\n    updateTemplateTest(input: $input) {\n      ... on ReplTemplateTest {\n        id\n        ...AutograderTest\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return h=function(){return e},e}function p(){var e=(0,i._)(["\n  mutation DeleteAutograderTest($testId: Int!) {\n    deleteTemplateTest(testId: $testId) {\n      ... on ReplTemplate {\n        id\n        tests {\n          id\n          ...AutograderTest\n        }\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return p=function(){return e},e}var m={},v=(0,o.Ps)(s()),g=(0,o.Ps)(u(),v,a.aA,a.Rb);function y(e){var t=(0,r._)({},m,e);return l.a(g,t)}var b=(0,o.Ps)(d());function Z(e){var t=(0,r._)({},m,e);return c.D(b,t)}var w=(0,o.Ps)(f(),v);function x(e){var t=(0,r._)({},m,e);return c.D(w,t)}var C=(0,o.Ps)(h(),v);function _(e){var t=(0,r._)({},m,e);return c.D(C,t)}var S=(0,o.Ps)(p(),v);function E(e){var t=(0,r._)({},m,e);return c.D(S,t)}},37054:function(e,t,n){n.d(t,{pZ:function(){return eR},aT:function(){return eT},jg:function(){return eS},fD:function(){return eE},Ls:function(){return e_}});var r=n(34142),i=n(87682),o=n(8182),a=n(48900),l=n(43429),c=n(59868),s=n(82723),u=n(38265),d=n(27308),f=n(10041),h=n(80259);function p(e){var t=[],n=[],r=!1,i=!0,o=!1,a=void 0;try{for(var l,c=e.selection.ranges[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;s.empty||(t.push(e.sliceDoc(s.from,s.to)),n.push(s))}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}if(!t.length){var u=-1,d=!0,f=!1,h=void 0;try{for(var p,m=e.selection.ranges[Symbol.iterator]();!(d=(p=m.next()).done);d=!0){var v=p.value.from,g=e.doc.lineAt(v);g.number>u&&(t.push(g.text),n.push({from:g.from,to:Math.min(e.doc.length,g.to+1)})),u=g.number}}catch(e){f=!0,h=e}finally{try{d||null==m.return||m.return()}finally{if(f)throw h}}r=!0}return{text:t.join(e.lineBreak),ranges:n,linewise:r}}var m=n(5344),v=n(64595),g=n(56729),y=n(69926),b=n(44620),Z=n(44680),w=n(74106),x=n(82200),C=n(23758),_=n(48282),S=n(52924),E=n(13358),k=n(32781),T=n(48728),R=n(61018),D=n(47507),I=n(8017),G=n(38806),B=n(87279),A=n(57111),P=n(74883),N=n(54916),U=n(51944),L=n(83898),O=n(14917),M=n(99952),X=n(78786),F=n(2454),W=n(9029),H=n(25425),V=n(84357),z=n(92994),j=n(73030),q=n(29287),Y=n(93918),$=n(25934),J=n(19408),K=n(12880),Q=n(75023),ee=n(8701),et=n(72526),en=n(32377),er=n(7444),ei=n(4832),eo=n(19724),ea=n(18440),el=n(67774),ec=n(74652),es=n(50586),eu=n(50978),ed=n(22031),ef=n(22421);function eh(e){var t=e.selection,n=e.doc,r=t.ranges.map(function(e){return e.extend(n.lineAt(e.from).from,n.lineAt(e.to).to)});return V.jT.create(r)}var ep=n(19659),em=n(83215),ev=n(81),eg=n(9135),ey=n(76363),eb=n(10711);function eZ(e,t,n){var r=e.selection.main,i=e.sliceDoc(r.from,r.to),o=(0,ep.r6)(t);return{code:i,filePath:t,fileVersion:n,fileContent:e.doc.toString(),range:{indexFrom:r.from,indexTo:r.to,lineFrom:e.doc.lineAt(r.from).number,lineTo:e.doc.lineAt(r.to).number},language:o}}var ew=(0,Y.X)({ghostwriterIcon:[q.l0.color.blurpleStronger]});function ex(e){var t=e.label,n=e.icon,r=e.run,i=e.keyboardShortcut,o=e.dataCy;return{match:h.pl,data:{type:"action",label:t,icon:n,run:r,keyboardShortcut:i,dataCy:o}}}function eC(e){var t=e.view,n=e.mainSelection,r=e.codeReference;t.dispatch({selection:{anchor:n.to},effects:[U.Q.of({codeReference:r,type:"ghostwriterKillswitch"}),u.tk.scrollIntoView(n.to,{y:"center"})]})}function e_(e){var t=e.path,n=(0,N.Z)().fs,r=(0,O.eD)(),i=(0,H.P5)({controlName:"flag-killswitch-ghostwriter-chat",logFlagToAnalytics:!1});return(0,l.useCallback)(function(e){r(t);var o=e.state,a=o.doc,l=o.selection,s=o.lineBreak,d=a.lineAt(l.main.head);d.length&&e.dispatch({changes:{from:d.to,insert:s},selection:V.jT.cursor(d.to+1)});var f=n.getOTVersion(t),h=eZ(e.state,t,f);if((0,c.j)(c.U3.GHOSTWRITER_CHAT_INLINE_OPENED,{action:"GENERATE"}),i){eC({view:e,mainSelection:e.state.selection.main,codeReference:h});return}var p=e.state.selection.main.to;e.dispatch({selection:{anchor:p},effects:[U.Q.of({codeReference:h,type:"generateCode"}),u.tk.scrollIntoView(p,{y:"center"})]})},[t,n,r,i])}function eS(e){var t=e.path,n=(0,N.Z)().fs,r=(0,M.Ef)(),i=(0,H.P5)({controlName:"flag-killswitch-ghostwriter-chat",logFlagToAnalytics:!1});return(0,l.useCallback)(function(e){r(t),e.dispatch({selection:eh(e.state)});var o=n.getOTVersion(t),a=eZ(e.state,t,o);if(i){eC({view:e,mainSelection:e.state.selection.main,codeReference:a});return}(0,c.j)(c.U3.GHOSTWRITER_CHAT_INLINE_OPENED,{action:"TRANSFORM"});var l=e.state.selection.main.to;e.dispatch({selection:{anchor:l},effects:[U.Q.of({type:"transformCode",codeReference:a}),u.tk.scrollIntoView(l,{y:"center"})]})},[t,n,r,i])}function eE(e){var t=e.path,n=(0,N.Z)().fs,r=(0,L.ql)(),i=(0,H.P5)({controlName:"flag-killswitch-ghostwriter-chat",logFlagToAnalytics:!1});return(0,l.useCallback)(function(e){e.dispatch({selection:eh(e.state)});var o=n.getOTVersion(t),a=eZ(e.state,t,o);if((0,c.j)(c.U3.GHOSTWRITER_CHAT_INLINE_OPENED,{action:"EXPLAIN"}),i){eC({view:e,mainSelection:e.state.selection.main,codeReference:a});return}r({chatMessage:{type:"explainCode",codeReference:a,text:"Explain code"}});var l=e.state.selection.main.to;e.dispatch({selection:{anchor:l},effects:[U.Q.of({codeReference:a,type:"explainCode"}),u.tk.scrollIntoView(l,{y:"center"})]})},[n,t,i,r])}var ek="Rename all occurrences";function eT(e){var t,n,U,L,O,M,V,q,Y,Q,eh,ep,eZ,eC,eT,eR,eD,eI,eG,eB,eA,eP,eN,eU,eL,eO,eM,eX,eF,eW=e.path,eH=e.openFile,eV=e.openSearchAndReplace,ez=e.view,ej=e.onCommand,eq=(t=e_({path:eW}),n=eS({path:eW}),U=eE({path:eW}),L=(0,ec.gf)(es.x.id),(0,l.useCallback)(function(e){var r=[],i=!e.state.selection.main.empty;return t&&!i&&r.push(ex({label:"Generate",icon:(0,o.tZ)($.Z,{css:ew.ghostwriterIcon}),keyboardShortcut:L,run:function(){t(e)},dataCy:"context-menu-GenerateCode"})),i&&(r.push(ex({label:"Explain",icon:(0,o.tZ)(J.Z,{css:ew.ghostwriterIcon}),dataCy:"context-menu-ExplainCode",run:function(){U(e)}})),r.push(ex({label:"Modify",icon:(0,o.tZ)(K.Z,{css:ew.ghostwriterIcon}),keyboardShortcut:L,dataCy:"context-menu-TransformCode",run:function(){n(e)}}))),r},[t,n,U,L])),eY=(O=(0,ec.gf)("editor.action.startThread"),(0,l.useCallback)(function(e){var t=[];return t.push(ex({label:"Start thread",icon:(0,o.tZ)(P.Z,{}),keyboardShortcut:O,run:function(){(0,eu.h$)(e)}})),t},[O])),e$=(0,l.useCallback)(function(e){var t=[ex({label:"Copy link to position",icon:(0,o.tZ)(I.Z,{}),run:function(){var t=(0,w.sg)(e.state.doc,e.state.selection.main.head),n=t.line,r=t.character,i=(0,G.dr)({path:eW,line:n+1,col:r});(0,f.Z)(i)}}),ex({label:"Copy",icon:(0,o.tZ)(m.Z,{}),keyboardShortcut:(0,d.l2)({cmdOrCtrl:!0,key:"c"}),run:function(){var t=p(e.state).text;(0,f.Z)(t)}}),ex({label:"Cut",icon:(0,o.tZ)(v.Z,{}),keyboardShortcut:(0,d.l2)({cmdOrCtrl:!0,key:"x"}),run:function(){var t=p(e.state),n=t.text,r=t.ranges;(0,f.Z)(n),e.state.readOnly||e.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"})}})];return window.navigator.clipboard&&"readText"in window.navigator.clipboard&&t.push(ex({label:"Paste",icon:(0,o.tZ)(T.Z,{}),keyboardShortcut:(0,d.l2)({cmdOrCtrl:!0,key:"v"}),run:function(){return(0,r._)(function(){var t,n;return(0,i.Jh)(this,function(r){switch(r.label){case 0:t="",r.label=1;case 1:return r.trys.push([1,3,,4]),[4,window.navigator.clipboard.readText()];case 2:return t=r.sent(),[3,4];case 3:return n=r.sent(),D.kg.error("CodeMirror context menu paste failed",{message:n.message}),[2];case 4:return(0,R.l)({filePath:eW,view:e,clipboardText:t}),[2]}})})()}})),t},[eW]),eJ=(V=(M={path:eW,openFile:eH,openSearchAndReplace:eV}).path,q=M.openFile,Y=M.openSearchAndReplace,Q=(0,y.Z)(V),eh=(0,g.Z)(Q),ep=(0,l.useRef)(null),eZ=(0,N.Z)().fs,eC=(0,H.P5)({controlName:"flag-clui-ctx-menu-rename-all",logFlagToAnalytics:!1}),eT=(0,H.P5)({controlName:"flag-code-actions-2",logFlagToAnalytics:!1}),eR=(0,ec.gf)("editor.action.goToDefinition"),eD=(0,ec.gf)("editor.action.goToTypeDefinition"),eI=(0,ec.gf)("editor.action.goToImplementation"),eG=(0,ec.gf)("editor.action.goToReferences"),eB=(0,ec.gf)("editor.selection.allOccurrences"),eA=(0,ec.gf)("editor.action.formatDocument"),eP=(0,ec.gf)("editor.action.codeActions"),(0,l.useCallback)(function(e){var t=[],n=eh&&Q;n&&eh.isFindDefinitionSupported&&q&&t.push(ex({label:"Go to definition",icon:(0,o.tZ)(b.Z,{}),dataCy:"context-menu-JumpToDefinition",run:function(t){(0,ed.wK)(e,t)},keyboardShortcut:eR})),n&&eh.isFindTypeDefinitionSupported&&q&&t.push(ex({label:"Go to type definition",icon:(0,o.tZ)(Z.Z,{}),run:function(){(0,ed.OM)(e)},keyboardShortcut:eD})),n&&eh.isFindImplementationSupported&&q&&t.push(ex({label:"Go to implementation",icon:(0,o.tZ)(_.Z,{}),run:function(){(0,ed.Zc)(e)},keyboardShortcut:eI})),n&&(eh.isFindDefinitionSupported||eh.isFindReferencesSupported)&&t.push(ex({label:"Go to references",icon:(0,o.tZ)(em.Z,{}),keyboardShortcut:eG,run:function(){(0,ef.Z)(e)}})),Y&&t.push(ex({label:"Find in Repl",icon:(0,o.tZ)(s.Z,{}),run:function(){Y(p(e.state).text)}})),n&&eh.isRenameSupported&&(eC?t.push(ex({label:ek,icon:(0,o.tZ)(S.Z,{}),keyboardShortcut:"F2",run:function(){(0,E.Z)(e)}})):t.push({match:h.pl,data:{type:"context",label:ek,icon:(0,o.tZ)(S.Z,{}),keyboardShortcut:"F2"},commands:function(t){var n=t.active,a=t.search;return n&&a?[{match:function(){return{score:1}},data:{type:"action",label:"Rename",icon:(0,o.tZ)(en.Z,{}),keyboardShortcut:"Enter",run:function(){return(0,r._)(function(){var t,n,r;return(0,i.Jh)(this,function(i){switch(i.label){case 0:if(t=e.state.selection.main.head,!e.state.wordAt(t))return[2,{type:"error",message:"You cannot rename this element"}];return ep.current&&Q.notify.cancelRequest(ep.current),ep.current=Q.generateId(),[4,Q.request.rename(V,(0,w.sg)(e.state.doc,t),a,{id:ep.current,tap:function(t){return(0,x.SC)(e,t)}})];case 1:if((n=i.sent()).cancelled)return[2];if("error"in n)return[2,{type:"error",message:"Something went wrong renaming ".concat(n.error.message)}];if(!(r=n.result))return[2];return(0,et.w)({edit:r,fs:eZ,client:Q}),[2]}})})()}}}]:[]}})),e.state.facet(eg.SD)&&t.push(ex({label:"Format document",icon:(0,o.tZ)(ev.Z,{}),keyboardShortcut:eA,run:function(){(0,eg.z1)(e)}})),!e.state.selection.main.empty&&e.state.facet(ey.R2)&&t.push(ex({label:"Format selection",icon:(0,o.tZ)(ev.Z,{}),run:function(){(0,eg.uy)(e)}})),t.push(ex({label:"Select all occurrences",icon:(0,o.tZ)(X.Z,{}),keyboardShortcut:eB,run:function(){(0,eu.SK)(e)}}));var l=void 0!==e.state.field(A.K0,!1);return n&&l&&t.push(ex({label:"Toggle breakpoint",icon:(0,o.tZ)(B.Z,{}),run:function(){(0,eu.QF)(e)}})),n&&eh.isCodeActionsSupported&&(eT?t.push(ex({label:"More actions",icon:(0,o.tZ)(k.Z,{}),keyboardShortcut:eP,run:function(){(0,eb.b)(e,!0)}})):t.push({match:h.pl,data:{type:"context",label:"More actions",icon:(0,o.tZ)(k.Z,{}),keyboardShortcut:eP},commands:function(t){var n=t.active;return(0,r._)(function(){var t,r,l;return(0,i.Jh)(this,function(i){switch(i.label){case 0:if(!n||Q.getServerState()!==ee.a.INITIALIZED)return[2,[]];return r=(t=e.state).selection.main,[4,Q.request.codeActions(V,{start:(0,w.sg)(t.doc,r.from),end:(0,w.sg)(t.doc,r.to)})];case 1:if(l=i.sent(),(0,c.j)(c.U3.EDITOR_CONTEXT_MENU_CODE_ACTIONS_REQUESTED,{success:!("error"in l),numActions:"result"in l&&l.result?l.result.length:null}),"error"in l)return a.Tb(Error(l.error.message)),[2,[]];if(null===l.result||0===l.result.length)return[2,[]];return[2,l.result.map(function(e){return ex({icon:(0,o.tZ)(F.Z,{}),label:e.title,run:function(){(0,W.S)(e,Q,eZ)}})})]}})})()}})),t},[eh,Q,q,Y,eB,eR,eD,eI,eG,eC,V,eZ,eA,eT,eP])),eK=(eN=(0,ea.s6)(eo.Y.EditorContextMenu),(0,l.useCallback)(function(e){var t=[];return t.push({data:{type:"group",key:"extensions"},commands:(0,r._)(function(){var t;return(0,i.Jh)(this,function(n){switch(n.label){case 0:var o;return t=[{data:{filePath:e.filePath,selection:e.view.state.selection.toJSON()}}],[4,Promise.all(eN.map((o=(0,r._)(function(e){var n;return(0,i.Jh)(this,function(r){switch(r.label){case 0:return[4,e.create({path:t})];case 1:if(!(n=r.sent()))return[2,null];return[2,(0,el.C)(n,{path:t})]}})}),function(e){return o.apply(this,arguments)})))];case 1:return[2,n.sent().filter(Boolean)]}})})}),t},[eN])),eQ=(0,l.useMemo)(function(){return ez?eJ(ez):[]},[ez,eJ]);return eL=(eU={view:ez,commands:eQ,onCommand:ej}).view,eO=eU.commands,eM=eU.onCommand,eX=(0,er.Z)(eM),eF=(0,z.Z)({view:eL}),(0,l.useEffect)(function(){if(eL){var e=[],t=!0,n=!1,r=void 0;try{for(var i,o=eO[Symbol.iterator]();!(t=(i=o.next()).done);t=!0)!function(){var t=i.value,n=t.data;if(("context"===n.type||"action"===n.type)&&n.keyboardShortcut){var r=Array.isArray(n.keyboardShortcut)?n.keyboardShortcut.join(" "):n.keyboardShortcut;e.push({run:function(){if("action"===n.type)return n.run(null),!0;var e=eL.state.selection.main.head;return"context"!==n.type||n.label!==ek||eL.state.wordAt(e)?eX.current(t):(0,C.J)(eL,{message:"You cannot rename this element",offset:e}),!0},key:r,preventDefault:!0})}}()}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}try{eL.dispatch({effects:eF.reconfigure(u.$f.of(e))})}catch(e){(0,u.OO)(eL.state,e,"contextMenu")}return function(){try{eL.dispatch({effects:eF.reconfigure([])})}catch(e){(0,u.OO)(eL.state,e,"contextMenu")}}}},[eL,eO,eF,eX]),(0,l.useCallback)(function(){var e=ez?[{data:{type:"context",label:"AI",icon:(0,o.tZ)(j.Z,{})},commands:function(){return eq(ez)}},{data:{type:"context",label:"Code actions",icon:(0,o.tZ)(k.Z,{})},commands:function(){return eJ(ez)}},{data:{type:"context",label:"Social",icon:(0,o.tZ)(P.Z,{})},commands:function(){return eY(ez)}},{data:{type:"context",label:"Clipboard",icon:(0,o.tZ)(T.Z,{})},commands:function(){return e$(ez)}},{data:{type:"context",label:"Extensions",icon:(0,o.tZ)(ei.Z,{})},commands:function(){return eK({view:ez,filePath:eW})}}]:[];return{data:{type:"context",label:"Search actions",icon:(0,o.tZ)(s.Z,{})},commands:function(){return e}}},[ez,eq,eJ,eY,e$,eW,eK])}var eR=new Q.j(function(e,t){return e?null:u.tk.domEventHandlers({contextmenu:function(e,n){var r=e.clientX,i=e.clientY,o=n.state.selection.main,a=n.posAtCoords({x:r,y:i}),l=n.state.doc.length,c=null===a?l:a;if(c<o.from||c>o.to){var s=V.jT.cursor(c);n.dispatch({selection:s})}return t(e),!0}})})},45549:function(e,t,n){n.d(t,{u:function(){return eb}});var r,i=n(32477),o=n(8182),a=n(43429),l=n(25934),c=n(31270),s=n(48282),u=n(23026),d=n(39698),f=n(7730),h=n.n(f),p=n(84357),m=n(38265),v=n(75023),g=n(93918),y=n(29287),b=n(56596),Z=n(74833),w=n(74652),x=n(54472),C=n(7612),_=n(53466),S=n(35895),E=(0,g.X)({root:[y.l0.p(16),y.l0.align.center,y.l0.colWithGap(8),{marginTop:"10%",pointerEvents:"none","*":{pointerEvents:"all"}}],button:[y.l0.reset.button,y.l0.rowWithGap(4),y.l0.align.center,y.l0.color.foregroundDimmest,y.l0.cursor.pointer,{fontFamily:y.TV.fontFamilyDefault,"*":{borderColor:y.TV.foregroundDimmest,color:y.TV.foregroundDimmest},":hover *":{borderColor:y.TV.foregroundDefault,color:y.TV.foregroundDefault}}]}),k={layer:"cm-empty-state-layer",dom:"cm-empty-state-dom"},T=m.tk.theme((r={},(0,d._)(r,".".concat(k.layer),{width:"100%",height:"100%",pointerEvents:"none",zIndex:"201 !important"}),(0,d._)(r,".".concat(k.dom),{position:"absolute",width:"100%",pointerEvents:"none",display:"flex",justifyContent:"center"}),r)),R=function(){"use strict";function e(t){(0,u._)(this,e),this.options=t}var t=e.prototype;return t.draw=function(){var e=this.options,t=e.ctas,n=e.view,r=e.width,i=(0,x.VV)((0,o.tZ)(b.G,{css:E.root,children:t.map(function(e){return(0,o.BX)(b.G,{css:E.button,onClick:function(){return e.onClick(n)},children:[e.icon,(0,o.tZ)(Z.xv,{variant:"small",children:e.text}),e.shortcut?(0,o.tZ)(w.bM,{keyCombo:e.shortcut,small:!0}):null]},e.text)})}));return i.className=k.dom,i.style.width=r+"px",i.style.visibility=r>240?"visibile":"hidden",i.style.left="0px",i},t.eq=function(e){return h()(e.options,this.options)},e}(),D=new v.j(function(e){var t=function(e){var t;return!(e.doc.length>0||e.field(_.$))&&(null===(t=e.field(S.xg,!1))||void 0===t||!t.size)},n=p.QQ.define({create:t,update:function(e,n){return t(n.state)}}),r=(0,m.EY)({above:!0,class:k.layer,update:function(e){return(0,C.a)(e,n)},markers:function(t){if(!t.state.field(n,!1))return[];var r=t.dom.getBoundingClientRect();return[new R({ctas:e,width:Math.round(t.contentDOM.getBoundingClientRect().right-r.left),view:t})]}});return[T,n,r]}),I=n(73164),G=n(75582),B=n(45903),A=n(93295),P=n(23982),N=n(77393);function U(){var e=(0,A._)(["\n  query EditorEmptyStateCurrentUser {\n    currentUser {\n      id\n      userSubscriptionType\n      userPowerUpsByType {\n        __typename\n        ... on UserPowerUpsTypes {\n          ghostwriter {\n            active\n            CTA\n          }\n        }\n      }\n    }\n  }\n"]);return U=function(){return e},e}var L={},O=(0,P.Ps)(U()),M=n(88883),X=n(73524),F={python:'from replit.ai.modelfarm import ChatExample, ChatMessage, ChatModel, ChatSession\n\nmodel = ChatModel("chat-bison")\nresponse = model.chat([\n  ChatSession(\n    context="You are philosophy bot.",\n    examples=[\n      ChatExample(\n        input=ChatMessage(content="1 + 1"),\n        output=ChatMessage(content="2")\n      )\n    ],\n    messages=[\n      ChatMessage(author="USER", content="How much wood can a woodchuck chuck?"),\n    ],\n  )\n], temperature=0.2)\n\nprint(response.responses[0].candidates[0].message.content)',typescript:"import * as replitai from '@replit/ai-modelfarm';\n\nconst result = await replitai.chat({\n  model: 'chat-bison',\n  temperature: 0.5,\n  messages: [{ author: 'user', content: 'how are you?' }],\n});\n\nconsole.log(result);"},W=n(59868),H=n(2038),V=n(38041),z=n(49344),j=n(40497),q=n(75595);function Y(){var e=(0,A._)(["\n  query ReplCodeExamples($language: String!) {\n    languageExamples(language: $language) {\n      ... on LanguageExamples {\n        examples {\n          ... on LanguageExample {\n            mainFile\n            name\n            code\n          }\n        }\n      }\n    }\n  }\n"]);return Y=function(){return e},e}var $={},J=(0,P.Ps)(Y());function K(e){var t=(0,B._)({},$,e);return N.a(J,t)}var Q=n(50586),ee=n(93496),et=n(29479),en=n(51384),er=n(88936),ei=n(4498),eo=b.K.button;function ea(e){var t=e.name,n=e.children,r=e.onClick;return(0,o.BX)(eo,{onClick:function(){return r()},css:[ee.gU.nofill,y.l0.p(8),y.l0.focusRing,y.l0.textAlign.left],children:[(0,o.tZ)(Z.xv,{variant:"subheadDefault",css:y.l0.pb(16),multiline:!1,children:t}),(0,o.tZ)(b.G,{css:[y.l0.backgroundColor.backgroundDefault,y.l0.p(8),y.l0.borderRadius(8)],children:n})]})}var el="@media (min-width: ".concat(et.j.tabletMax,"px)"),ec=(0,en.iv)([y.l0.colWithGap(16),(0,d._)({},el,{width:"calc(50%  - 8px)",flex:"0 0 auto",gap:"16px"})]);function es(e){var t=e.children;return(0,o.tZ)(b.G,{css:[(0,d._)({},el,[y.l0.rowWithGap(16)])],children:t})}function eu(e){var t=e.mainFile,n=e.examples,r=e.onSelect;return(0,o.BX)(b.G,{css:[y.l0.colWithGap(24)],children:[(0,o.tZ)(Z.h4,{level:1,variant:"headerDefault",children:"Code examples"}),(0,o.tZ)(Z.xv,{children:"Get started with some program examples."}),(0,o.BX)(es,{css:[y.l0.colWithGap(16)],children:[(0,o.tZ)(b.G,{css:ec,children:n.slice(0,(n.length+1)/2).map(function(e){return(0,o.tZ)(ea,{name:e.name,onClick:function(){return r(e)},children:(0,o.tZ)(ei.Z,{code:e.code,filePath:t,fontSize:12,disableCursorStyling:!0})},e.name)})}),(0,o.tZ)(b.G,{css:ec,children:n.slice((n.length+1)/2).map(function(e){return(0,o.tZ)(ea,{name:e.name,onClick:function(){return r(e)},children:(0,o.tZ)(ei.Z,{code:e.code,filePath:t,fontSize:12,disableCursorStyling:!0})},e.name)})})]})]})}function ed(e){var t=e.filePath,n=e.language,r=e.onSelect,i=K({variables:{language:n}}),a=i.data,l=i.loading,c=i.error;if(l)return(0,o.tZ)(b.G,{css:[y.l0.colWithGap(0),y.l0.justify.center,y.l0.align.center,y.l0.pt(32),y.l0.pb(32)],children:(0,o.tZ)(er.Z,{})});if(c)return(0,o.tZ)(b.G,{css:[y.l0.colWithGap(0),y.l0.justify.center,y.l0.align.center,y.l0.pt(32),y.l0.pb(32)],children:c.message});var s=(null==a?void 0:a.languageExamples.__typename)==="LanguageExamples"?a.languageExamples.examples:null;return(null==s?void 0:s.length)?(null==s?void 0:s.length)?(0,o.tZ)(eu,{mainFile:t,examples:s,onSelect:r}):(0,o.tZ)(b.G,{css:[y.l0.colWithGap(0),y.l0.justify.center,y.l0.align.center,y.l0.pt(32),y.l0.pb(32)],children:(0,o.BX)(Z.xv,{children:["Sorry, this language doesn’t have any examples. Want to add some? Contact us at ",(0,o.tZ)("a",{href:"mailto:support@replit.com",children:"support@replit.com"}),"!"]})}):null}var ef=n(917),eh=n(70781),ep=n(19659),em=p.Py.define(),ev=p.QQ.define({create:function(){return null},update:function(e,t){var n=e;return(0,j.j)(t,em,function(e){n=e.value}),n}}),eg=q.t.from(ev,function(e){if(!e)return null;var t=e.language,n=e.filePath;return{key:"examplesModal",node:function(e){var r=function(){e.dispatch({effects:em.of(null)})};return(0,o.tZ)(z.u,{maxWidth:872,isOpen:!0,onRequestClose:r,children:(0,o.tZ)(eZ,{onRequestClose:r,language:t,filePath:n})})}}}),ey=[ev,eg];function eb(e){var t,n,r,i,u,d,f,h,p,m,v,g,y,b,Z,x,C,_=e.isMobile,S=e.filePath,E=e.generateCode,k=e.openPane,T=(0,w.gf)(Q.x.id),R=null!==(x=null===(y=I.$R.from(S))||void 0===y?void 0:y.id)&&void 0!==x?x:null,A=K({variables:{language:R},skip:!R}).data,P=(u=(t={openPane:k,filePath:S,language:R}).filePath,d=t.language,f=t.openPane,h=(0,H.T3)(),m=((null==(p=(n=(0,B._)({},L,void 0),N.a(O,n)).data)?void 0:null===(r=p.currentUser)||void 0===r?void 0:r.userSubscriptionType)===G.HP.Hacker||(null==p?void 0:null===(i=p.currentUser)||void 0===i?void 0:i.userSubscriptionType)===G.HP.HackerPro)&&d&&["python","javascript","typescript","javascriptreact","typescriptreact"].includes(d),v=(0,M.Z)(u),g=(0,a.useCallback)(function(){if(d){var e="python"===d?"python":"typescript";(0,W.j)(W.U3.GHOSTWRITER_CHAT_MODELFARM_PLACEHOLDER_CLICKED,{language:e}),f({type:"docs",data:{url:X.TT.MODEL_FARM+"/".concat(e,"#installation")}}),v&&v({code:F[e],insertAt:0})}},[v,d,f]),h?null:m?g:null),U=(null!==(C=null==A?void 0:null===(Z=A.languageExamples)||void 0===Z?void 0:null===(b=Z.examples)||void 0===b?void 0:b.length)&&void 0!==C?C:0)>=1,z=(0,a.useMemo)(function(){var e=[];return(0,ep.gK)(S)||e.push({icon:(0,o.tZ)(l.Z,{}),text:"Generate Code with AI",shortcut:_?void 0:T,onClick:function(e){(0,V.S)({cta:"generate",version:"new"}),E(e)}}),P&&e.push({icon:(0,o.tZ)(c.Z,{}),text:"Build an AI app for free with ModelFarm",onClick:function(){(0,V.S)({cta:"modelFarm",version:"new"}),P()}}),R&&U&&e.push({icon:(0,o.tZ)(s.Z,{}),text:"Start with a code example",onClick:function(e){(0,V.S)({cta:"examples",version:"new"}),e.dispatch({effects:em.of({language:R,filePath:S})})}}),e},[_,T,P,R,U,E,S]);return[D.use(z),ey]}function eZ(e){var t=e.onRequestClose,n=e.language,r=e.filePath,l=(0,eh.e)(ef.y.Examples),c=(0,eh.e)(ef.y.Editor),s=(0,i._)((0,a.useState)(!1),2),u=s[0],d=s[1],f=(0,M.Z)(r),h=(0,a.useRef)(null==l?void 0:l.isActive),p=(0,a.useRef)();p.current=null==l?void 0:l.isActive;var m=(0,a.useRef)(null==l?void 0:l.goto);return(m.current=null==l?void 0:l.goto,(0,a.useEffect)(function(){return function(){var e;p.current&&(null===(e=m.current)||void 0===e||e.call(m,ef.y.Editor))}},[]),(0,a.useEffect)(function(){if((null==c?void 0:c.isActive)&&!h.current){if(!u){d(!0);return}c.goto(ef.y.Examples)}},[c,t,u]),(0,a.useEffect)(function(){if(null==l?void 0:l.isActive){h.current=!0;return}h.current&&t(null)},[t,null==l?void 0:l.isActive]),f)?(0,o.tZ)("div",{ref:null==l?void 0:l.delegateTooltip,children:(0,o.tZ)(ed,{filePath:r,language:n,onSelect:function(e){f({code:e.code,insertAt:0}),t({exampleName:e.name})}})}):(0,o.tZ)("div",{children:"Please make sure you have a file open"})}},50586:function(e,t,n){n.d(t,{x:function(){return $},W:function(){return J}});var r,i=n(8182),o=n(38265),a=n(27308),l=n(23026),c=n(39698),s=n(45903),u=n(25e3),d=n(7730),f=n.n(d),h=n(75023),p=n(93918),m=n(29287),v=n(56596),g=n(74833),y=n(74652),b=n(54472),Z=n(7612),w=n(53466),x=n(13900),C=n(38080),_=n(93496),S=n(43429),E=n(91608),k=n(84357),T=n(44166),R=n(30983),D=n(95684),I=n(40497),G=(0,E.$)(["opacity","transform"]),B=G.cssVars,A=G.styleTokens,P=[m.l0.display.flex,m.l0.reset.button,m.l0.cursor.pointer,m.l0.center,_.gU.nofill,m.l0.height("100%"),m.l0.borderRadius(0)],N=[P,m.l0.width(28),{"& svg":m.l0.display.block}],U=(0,p.X)({root:[m.l0.align.stretch,m.l0.flex.row,m.l0.borderRadius(6),m.l0.border({color:m.TV.outlineDefault}),m.l0.position.relative,m.l0.height(30),{opacity:A.opacity,transform:A.transform,transition:"opacity 120ms, transform 120ms","button:first-of-type":{borderTopLeftRadius:6,borderBottomLeftRadius:6},"button:last-of-type":{borderTopRightRadius:6,borderBottomRightRadius:6}}],moreButton:N,button:[P,m.l0.rowWithGap(4),m.l0.align.center,m.l0.pl(4),m.l0.pr(6),m.l0.flex.growAndShrink(1),m.l0.border({direction:"right",color:m.TV.outlineDefault}),{fontFamily:m.TV.fontFamilyDefault,"*":{color:m.TV.foregroundDimmer},":hover *":{color:m.TV.foregroundDefault},".shortcut":{color:m.TV.foregroundDimmest},":hover .shortcut":{color:m.TV.foregroundDimmer}}],iconButton:[N,m.l0.border({direction:"right",color:m.TV.outlineDefault})],tooltip:[m.l0.rowWithGap(2),m.l0.align.center]}),L=new b.Jf(function(e){var t,n=e.controls,r=e.verticalPlacement,o=e.onMoreClick,a=(0,S.useRef)(null),l=(0,D.xx)();(0,S.useEffect)(function(){var e;l(),(0,T.A)(a,(e={},(0,c._)(e,B.opacity,"1"),(0,c._)(e,B.transform,"translateY(calc(".concat("top"===r?1:-1," * ").concat(m.TV.space4,"))")),e))},[r,l]);var d=(0,S.useRef)((0,D.qm)());return(0,i.BX)(C.Tg,{innerRef:a,elevated:!0,css:U.root,style:(t={},(0,c._)(t,B.opacity,"0"),(0,c._)(t,B.transform,"translateY(calc(".concat("top"===r?1:-1," * ").concat(m.TV.space16,"))")),t),children:[n.map(function(e){if(d.current){var t=(0,i.BX)(v.G,{css:U.tooltip,children:[(0,i.tZ)(g.xv,{variant:"small",multiline:!1,children:e.text}),e.shortcut?(0,i.tZ)(g.xv,{variant:"small",className:"shortcut",color:"dimmest",children:(0,y.Ih)(e.shortcut)}):null]});return(0,i.tZ)(R.u,{tooltip:t,children:function(t,n){return(0,i.tZ)(v.G,(0,u._)((0,s._)({},t),{innerRef:n,css:U.iconButton,onClick:e.onClick,tag:"button",children:e.icon}))}},e.text)}return(0,i.BX)(v.G,{css:U.button,onClick:e.onClick,tag:"button",children:[e.icon,(0,i.tZ)(g.xv,{variant:"small",multiline:!1,children:e.text}),e.shortcut?(0,i.BX)(g.xv,{variant:"small",className:"shortcut",children:["(",(0,y.Ih)(e.shortcut),")"]}):null]},e.text)}),o?(0,i.tZ)(v.G,{"aria-label":"More",css:U.moreButton,onClick:function(e){var t=(a.current||e.currentTarget).getBoundingClientRect();o({top:t.top,right:t.right})},tag:"button",children:(0,i.tZ)(x.Z,{size:16})}):null]})}),O={layer:"cm-selection-controls-layer",dom:"cm-selection-controls-dom"},M=o.tk.theme((r={},(0,c._)(r,".".concat(O.layer),{width:"100%"}),(0,c._)(r,".".concat(O.dom),{position:"absolute"}),r)),X=function(){"use strict";function e(t){(0,l._)(this,e),this.options=t}var t=e.prototype;return t.draw=function(){var e=this.options,t=e.controls,n=e.onMoreClick,r=e.top,i=e.align,o=e.verticalPlacement,a=L.create({controls:t,onMoreClick:n,verticalPlacement:o});return a.className=O.dom,a.style.top=r+"px","left"===i.side?(a.style.left=i.value+"px",a.style.right=""):(a.style.right=i.value+"px",a.style.left=""),a},t.eq=function(e){return f()(e.options,this.options)},e}(),F=k.Py.define(),W=k.QQ.define({create:function(){return null},update:function(e,t){var n;return!t.state.selection||(null===(n=t.state.selection)||void 0===n?void 0:n.main.empty)?null:((0,I.j)(t,F,function(t){e=t.value}),e)}}),H=k.QQ.define({create:function(e){return!e.selection.main.empty},update:function(e,t){return!t.state.selection.main.empty}}),V=o.lg.define(function(e){var t=function(){var t=e.state.selection.main;e.dispatch({effects:F.of(t.empty?null:Date.now())})},n=function(e){"Shift"===e.key&&t()},r=function(){document.addEventListener("mouseup",t),document.addEventListener("keyup",n)},i=function(){document.removeEventListener("mouseup",t),document.removeEventListener("keyup",n)};return{update:function(e){(0,Z.a)(e,H)&&(e.state.field(H)?r():i())},destroy:i}}),z=new h.j(function(e){return[M,(0,o.EY)({above:!0,class:O.layer,update:function(e){return(0,Z.a)(e,w.$,W)},markers:function(t){var n=t.state.field(W)?t.state.selection.main:null;if(!n||t.state.field(w.$,!1))return[];var r=function(e,t){for(var n=Math.min(t.from,t.to),r=Math.max(t.from,t.to),i=null;n<=r;){var o=e.lineAt(n);n=o.to+1,null!==i&&o.length<i.length||(i=o)}return i}(t.state.doc,n);if(!r)return[];var i=t.coordsAtPos(r.to);if(!i)return[];var o=t.lineBlockAt(Math.min(n.anchor,n.head)),a=t.dom.getBoundingClientRect(),l=t.contentDOM.getBoundingClientRect(),c=o.top+t.documentPadding.top-30,s=l.right-i.left<200?{side:"right",value:a.right-l.right+16}:{side:"left",value:i.left-a.left},u="top";if(c<t.scrollDOM.scrollTop){var d=t.lineBlockAt(n.to);c=d.top+d.height,u="bottom"}return[new X({top:c,align:s,controls:e.controls(t),onMoreClick:e.onMoreClick,verticalPlacement:u})]}}),H,W,V]}),j=n(19408),q=n(12880),Y=n(49932),$={id:"editor.generateOrModifyWithAI",name:"AI",description:"Generate or modify selection with AI",default:(0,a.l2)({cmdOrCtrl:!0,key:"i"})};function J(e){var t=e.editCode,n=e.explainCode,r=e.generateCode,a=e.onMoreClick,l=(0,y.gf)($.id),c=(0,S.useMemo)(function(){if(!l)return[];var e=Array.isArray(l)?l.join(" "):l;return o.$f.of([{key:e,scope:"editor",run:function(e){return e.state.selection.main.empty?r(e):t(e),!0}}])},[l,r,t]),s=(0,S.useMemo)(function(){return{controls:function(e){return[{text:"Modify",icon:(0,i.tZ)(q.Z,{size:16,color:Y.TV.blurpleStronger}),onClick:function(){return t(e)},shortcut:l},{text:"Explain",icon:(0,i.tZ)(j.Z,{size:16,color:Y.TV.blurpleStronger}),onClick:function(){return n(e)}}]},onMoreClick:a}},[t,n,a,l]),u=z.use(s);return(0,S.useMemo)(function(){return[u,c]},[u,c])}},38041:function(e,t,n){n.d(t,{S:function(){return p},r:function(){return h}});var r,i=n(34142),o=n(87682),a=n(19659),l=n(39756),c=RegExp("_(?<num>\\d+)$");function s(){return(s=(0,i._)(function(e,t){var n,r,i,s;return(0,o.Jh)(this,function(o){switch(o.label){case 0:return n=(0,a.Il)(t),[4,e.readDir(n||l.Ql)];case 1:if((r=o.sent()).error)return[2,t];return s=(i=function(e){if(r.children.find(function(t){return"FILE"===t.type&&t.filename===e})){var t,n=(0,a.eb)(e),o=(0,a.r6)(e),l=n.match(c);if(null==l?void 0:null===(t=l.groups)||void 0===t?void 0:t.num){var s=Number(l.groups.num);return i("".concat(n.replace(c,""),"_").concat(s+1,".").concat(o))}return i("".concat(n,"_2.").concat(o))}return e})((0,a.UO)(t)),[2,n?n+"/"+s:s]}})})).apply(this,arguments)}var u=n(41500),d=n(89446),f=n(59868),h=(r=(0,i._)(function(e,t,n){var r,i,l,c,f,h;return(0,o.Jh)(this,function(o){switch(o.label){case 0:return r=encodeURI(e.name),[4,function(e,t){return s.apply(this,arguments)}(t,(i=(0,a.Il)(n))?i+"/"+r:r)];case 1:return l=o.sent(),[4,(0,d.pV)(e)];case 2:return c=o.sent(),[4,t.writeFile(l,u.Z.from(c))];case 3:return o.sent(),f=(0,a.eb)(e.name),h=(0,a.UO)(l),[2,"![".concat(f,"](").concat(h,")")]}})}),function(e,t,n){return r.apply(this,arguments)});function p(e){var t=e.cta,n=e.version;(0,f.j)(f.U3.EDITOR_EMPTY_STATE_CLICKED,{cta:t,version:n})}},11398:function(e,t,n){n.d(t,{Mp:function(){return l},ac:function(){return a},ev:function(){return o}});var r=n(51384),i=n(29287),o=(0,r.iv)({position:"relative",overflowY:"auto",width:"100%",height:"100%",zIndex:3}),a=(0,r.iv)({position:"relative",overflowY:"auto",width:"100%",height:"100%",fontSize:"14px",backgroundColor:i.TV.backgroundDefault}),l=(0,r.iv)({display:"flex",alignItems:"stretch",width:"100%",height:"100%","& > .cm-editor":{flex:"1 1 auto",width:"100%"}})},17225:function(e,t,n){n.d(t,{Q1:function(){return b},Rz:function(){return g},xy:function(){return Z}});var r=n(34142),i=n(21289),o=n(87682),a=n(8182),l=n(14339),c=n(69119),s=n(93918),u=n(29287),d=n(56596),f=n(57468),h=n(19659),p=(0,s.X)({root:[u.l0.rowWithGap(8),u.l0.align.center,u.l0.flex.growAndShrink(1),u.l0.px(8),{userSelect:"none"}],header:[{fontSize:u.TV.fontSizeSmall,opacity:.6},u.l0.color.foregroundDimmest,u.l0.truncate],result:[u.l0.colWithGap(0)],fileName:[u.l0.truncate,u.l0.flex.row]});function m(e){var t=e.height,n=e.active,r=e.match,i=r.directory,o=r.filename;return(0,a.BX)(d.G,{css:p.root,style:{height:t},children:[(0,a.tZ)(f.Z,{path:o.text,size:16}),(0,a.BX)(d.G,{css:p.result,children:[i?(0,a.tZ)(d.G,{css:p.header,children:(0,a.tZ)(c.x,{text:i.text+"/",highlight:i.ranges,dimmed:!n})}):null,(0,a.tZ)(d.G,{css:p.fileName,children:(0,a.tZ)(c.x,{text:o.text,highlight:o.ranges,dimmed:!n})})]})]})}var v={match:l.kN,forward:!1,tiebreakers:[function(e,t,n){return n(e.item).trim().length-n(t.item).trim().length}]};function g(e,t){return y.apply(this,arguments)}function y(){return(y=(0,r._)(function(e,t){return(0,o.Jh)(this,function(n){switch(n.label){case 0:return[4,new l.Zn(t,v).find(e)];case 1:return[2,n.sent().map(function(e){return{path:e.item,score:e.score,ranges:function(e){for(var t=(0,i._)(e.values()).sort(function(e,t){return e-t}),n=[],r=t[0],o=t[0],a=1;a<t.length;a++)t[a]===o+1?o++:(n.push({from:r,to:o+1}),r=t[a],o=t[a]);return n.push({from:r,to:o+1}),n}(e.positions)}})]}})})).apply(this,arguments)}function b(e){var t=e.ranges,n=e.path,r=(0,h.UO)(n),i=(0,h.Il)(n);if(!i)return{filename:{text:r,ranges:t.length?t:void 0}};var o=i.length,a=o+1,l=[],c=[],s=!0,u=!1,d=void 0;try{for(var f,p=t[Symbol.iterator]();!(s=(f=p.next()).done);s=!0){var m=f.value;if(m.from<o){l.push({from:m.from,to:Math.min(m.to,o)});var v=m.to-a;if(v<=0)continue;c.push({from:0,to:v});continue}m.from<a||c.push({from:m.from-a,to:m.to-a})}}catch(e){u=!0,d=e}finally{try{s||null==p.return||p.return()}finally{if(u)throw d}}return{filename:{text:r,ranges:c.length?c:void 0},directory:{text:i,ranges:l.length?l:void 0}}}function Z(e){var t=e.path,n=e.ranges,r=b({path:t,ranges:null!=n?n:[]}),i=r.directory?44:32;return{height:i,content:(0,a.tZ)(m,{match:r,height:i})}}},7727:function(e,t,n){n.d(t,{i:function(){return Z},w:function(){return g}});var r=n(34142),i=n(32477),o=n(87682),a=n(8182);n(43429);var l=n(31070),c=n(20573),s=n(80259),u=n(57468),d=n(56596),f=n(74833),h=n(29287),p=n(41500),m=n(17225),v=n(81764);function g(e){return y.apply(this,arguments)}function y(){return(y=(0,r._)(function(e){var t,n,r;return(0,o.Jh)(this,function(i){switch(i.label){case 0:if(t=e.search,n=e.paths,r=e.run,!t)return[2,n.map(function(e){return{data:{type:"action",label:e,icon:(0,a.tZ)(u.Z,{path:e}),run:function(){return r(e)}},match:function(){return{score:1,render:(0,m.xy)({path:e})}}}})];return[4,(0,m.Rz)(t,n)];case 1:return[2,i.sent().map(function(e){var t=e.path,n=e.score,i=e.ranges;return{data:{type:"action",label:t,icon:(0,a.tZ)(u.Z,{path:t}),run:function(){return r(t)}},match:function(){return{score:n,render:(0,m.xy)({path:t,ranges:i})}}}})]}})})).apply(this,arguments)}function b(){return(0,a.BX)(d.G,{css:[h.l0.rowWithGap(8)],children:[(0,a.tZ)(c.Z,{}),(0,a.tZ)(f.xv,{color:"dimmest",multiline:!1,children:"Something went wrong searching your Repl's files. Please try again."})]})}function Z(e){var t;return(0,s.fA)({type:"context",label:"Files",description:"Find a file",icon:(0,a.tZ)(l.Z,{}),keyboardShortcut:e.keyboardShortcut?e.keyboardShortcut:void 0},{match:(0,s.zf)({defaultScore:3}),commands:(t=(0,r._)(function(t){var n,l,s,d,f,h,m,y,Z,w,x,C,_,S,E,k;return(0,o.Jh)(this,function(T){switch(T.label){case 0:if(n=e.fs,l=e.shouldHideFile,!t.search&&(!t.active||e.lazyLoad))return[2,[]];return[4,Promise.resolve(e.getRecentFiles())];case 1:if(s=T.sent(),d=[],!(t.search||t.active))return[3,3];return[4,n.listFiles()];case 2:if((f=T.sent()).error)return[2,[{data:{type:"error",label:f.error,icon:(0,a.tZ)(c.Z,{})},match:function(){return{score:1,render:{content:(0,a.tZ)(b,{})}}}}]];if(!f.files)throw Error("Expected files");h=!0,m=!1,y=void 0;try{for(Z=f.files[Symbol.iterator]();!(h=(w=Z.next()).done);h=!0)x=w.value,l(x)||s.includes(x)||d.push(x)}catch(e){m=!0,y=e}finally{try{h||null==Z.return||Z.return()}finally{if(m)throw y}}T.label=3;case 3:return C=[],[4,Promise.all([g({search:t.search,paths:s,run:function(t){e.openFile({path:t})}}),g({search:t.search,paths:d,run:function(t){e.openFile({path:t})}})])];case 4:return S=(_=i._.apply(void 0,[T.sent(),2]))[0],E=_[1],S.length&&C.push({data:{type:"context",label:"Recent",icon:(0,a.tZ)(v.Z,{})},commands:function(){return S}}),E.length&&C.push({data:{type:"group",key:"files"},commands:function(){return E}}),0===E.length&&0===S.length&&t.active&&(k=t.search,C.push({data:{label:k,description:"Create a new file",icon:(0,a.tZ)(u.Z,{path:k}),type:"action",run:(0,r._)(function(){return(0,o.Jh)(this,function(t){switch(t.label){case 0:return[4,n.writeFile(k,p.Z.from(""))];case 1:if(t.sent().error)return[2,{type:"error",message:'Could not create "'+k+'"'}];return e.openFile({path:k}),[2]}})})},match:function(){return{score:1}}})),[2,C]}})}),function(e){return t.apply(this,arguments)})})}},56287:function(e,t,n){n.d(t,{F:function(){return S},q:function(){return _}});var r=n(34142),i=n(32477),o=n(87682),a=n(8182);n(43429);var l=n(43208),c=n(80259),s=n(39313),u=n(82723),d=n(20573),f=n(29287),h=n(56596),p=n(74833),m=n(93918),v=n(57468),g=n(27308),y=n(19924),b=(0,m.X)({root:[f.l0.colWithGap(4),f.l0.align.start,f.l0.flex.growAndShrink(1),f.l0.p(8)],header:[f.l0.rowWithGap(4),f.l0.align.center],singleLine:[{whiteSpace:"nowrap",fontFamily:f.TV.fontFamilyCode},f.l0.truncate,f.l0.color.foregroundDimmest]});function Z(e){var t=e.path,n=e.line;return(0,a.BX)(h.G,{css:b.root,children:[(0,a.BX)(h.G,{css:b.header,children:[(0,a.tZ)(v.Z,{path:t,size:12}),(0,a.BX)(p.xv,{variant:"small",color:"dimmest",multiline:!1,children:[t.replace(/^\.\//,""),":",n.lineNumber]})]}),(0,a.tZ)(h.G,{css:b.singleLine,children:(0,a.tZ)(s.xK,{source:n.content,matches:n.matches})})]})}function w(){return(0,a.BX)(h.G,{css:[f.l0.px(8),f.l0.rowWithGap(8),f.l0.align.center],children:[(0,a.tZ)(d.Z,{}),(0,a.tZ)(p.xv,{color:"dimmest",multiline:!1,children:"Something went wrong searching your Repl's contents. Please try again."})]})}function x(){return(0,a.BX)(h.G,{css:[f.l0.rowWithGap(8),f.l0.p(8),f.l0.align.center],children:[(0,a.tZ)(d.Z,{}),(0,a.tZ)(p.xv,{color:"dimmest",multiline:!1,children:"Displaying only part of the results, try being more specific with your search."})]})}function C(){return(0,a.tZ)(h.G,{css:[f.l0.rowWithGap(8),f.l0.p(8),f.l0.align.center],children:(0,a.tZ)(p.xv,{color:"dimmest",multiline:!1,children:"Nothing came up searching your Repl's content."})})}var _=(0,g.l2)({cmdOrCtrl:!0,shift:!0,key:"f"});function S(e){var t,n,s=(0,y.e)({container:e.container});return(0,c.fA)({type:"context",description:"Search through your files",label:"Search",icon:(0,a.tZ)(u.Z,{}),keyboardShortcut:e.keyboardShortcut?_:void 0},{match:(0,c.zf)({defaultScore:2}),commands:(t=(0,r._)(function(t){var r,c,u,f,p,m,g,y,b,_,S,E;return(0,o.Jh)(this,function(o){switch(o.label){case 0:if(!t.search||!t.active&&e.activeOnly)return[2,[]];return n=r=Math.random(),[4,s({query:t.search})];case 1:if(u=(c=o.sent()).results,f=c.error,p=c.isPartialResult,r!==n)return[2,[]];if(null!==f){if(!t.active)return[2,[]];return[2,[{data:{type:"error",label:"error",icon:(0,a.tZ)(d.Z,{})},match:function(){return{score:1,render:{content:(0,a.tZ)(w,{})}}}}]]}m=[],g=!0,y=!1,b=void 0;try{for(_=function(){var n=(0,i._)(E.value,2),r=n[0];n[1].forEach(function(n){var i=n.matches[0].column;m.push({match:function(){var e=l.Z.match(t.search,n.content);return{score:(null==e?void 0:e.score)||1,render:{height:60,content:(0,a.tZ)(Z,{path:r,line:n})}}},data:{type:"action",label:r,icon:(0,a.tZ)(v.Z,{path:r}),key:[r,n.lineNumber,i].join(":"),run:function(){e.openFile({path:r,line:n.lineNumber,col:i})}}})})},S=Object.entries(u)[Symbol.iterator]();!(g=(E=S.next()).done);g=!0)_()}catch(e){y=!0,b=e}finally{try{g||null==S.return||S.return()}finally{if(y)throw b}}if(0===m.length&&t.active)return[2,[{data:{type:"output",label:"",icon:(0,a.tZ)(h.G,{})},match:function(){return{score:1,render:{content:(0,a.tZ)(C,{})}}}}]];if(t.active){if(0===m.length)return[2,[{data:{type:"output",label:"",icon:(0,a.tZ)(h.G,{})},match:function(){return{score:1,render:{content:(0,a.tZ)(C,{})}}}}]];p&&m.push({data:{type:"error",label:"error",icon:(0,a.tZ)(d.Z,{})},match:function(){return{score:1/0,render:{content:(0,a.tZ)(x,{})}}}})}return[2,m]}})}),function(e){return t.apply(this,arguments)})})}},15011:function(e,t,n){n.d(t,{Z:function(){return ew}});var r,i,o=n(34142),a=n(45903),l=n(25e3),c=n(32477),s=n(87682),u=n(8182),d=n(43429),f=n(39426),h=n(72392),p=n(9521),m=n(94450),v=n.n(m),g=function(e){var t=(0,h._)({},(0,p._)(e));return(0,u.BX)(u.HY,{children:[(0,u.tZ)(v(),{id:"fcfe85a13ecbf46b",children:".one.jsx-fcfe85a13ecbf46b{opacity:.1;-webkit-animation:dot 1.5s ease-in-out infinite;-moz-animation:dot 1.5s ease-in-out infinite;-o-animation:dot 1.5s ease-in-out infinite;animation:dot 1.5s ease-in-out infinite;-webkit-animation-delay:0s;-moz-animation-delay:0s;-o-animation-delay:0s;animation-delay:0s}.two.jsx-fcfe85a13ecbf46b{opacity:.1;-webkit-animation:dot 1.5s ease-in-out infinite;-moz-animation:dot 1.5s ease-in-out infinite;-o-animation:dot 1.5s ease-in-out infinite;animation:dot 1.5s ease-in-out infinite;-webkit-animation-delay:.1s;-moz-animation-delay:.1s;-o-animation-delay:.1s;animation-delay:.1s}.three.jsx-fcfe85a13ecbf46b{opacity:.1;-webkit-animation:dot 1.5s ease-in-out infinite;-moz-animation:dot 1.5s ease-in-out infinite;-o-animation:dot 1.5s ease-in-out infinite;animation:dot 1.5s ease-in-out infinite;-webkit-animation-delay:.2s;-moz-animation-delay:.2s;-o-animation-delay:.2s;animation-delay:.2s}@-webkit-keyframes dot{0%{opacity:.1}50%{opacity:1}100%{opacity:.1}}@-moz-keyframes dot{0%{opacity:.1}50%{opacity:1}100%{opacity:.1}}@-o-keyframes dot{0%{opacity:.1}50%{opacity:1}100%{opacity:.1}}@keyframes dot{0%{opacity:.1}50%{opacity:1}100%{opacity:.1}}"}),(0,u.tZ)("span",(0,l._)((0,a._)({},t),{className:"jsx-fcfe85a13ecbf46b "+(t&&null!=t.className&&t.className||"one"),children:"."})),(0,u.tZ)("span",(0,l._)((0,a._)({},t),{className:"jsx-fcfe85a13ecbf46b "+(t&&null!=t.className&&t.className||"two"),children:"."})),(0,u.tZ)("span",(0,l._)((0,a._)({},t),{className:"jsx-fcfe85a13ecbf46b "+(t&&null!=t.className&&t.className||"three"),children:"."}))]})},y=n(18836),b=n(74833),Z=n(1498),w=n(93295),x=n(23982),C=n(77393),_=n(72986);function S(){var e=(0,w._)(["\n  query ConfigReplLanguage($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        language\n      }\n    }\n  }\n"]);return S=function(){return e},e}function E(){var e=(0,w._)(["\n  mutation ConfigUpdateRepl($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n      }\n    }\n  }\n"]);return E=function(){return e},e}var k={},T=(0,x.Ps)(S()),R=(0,x.Ps)(E()),D=n(54916),I=n(49344),G=n(35972),B=n(29287),A=n(93496),P=n(56596),N=n(72310),U=n(20573),L=n(24418),O=n(50782),M=n(59639),X=n(12834),F=n(7444),W=n(35273),H=n(82723),V=n(43208),z=n(63130),j=n(79217),q=n(51384),Y=n(31366),$=n(42308),J=(0,q.iv)([B.l0.py(8),B.l0.pl(8),B.l0.pr(32),{color:"inherit",outline:"0 none",border:"1px solid",fontSize:"inherit",lineHeight:B.TV.space16,display:"block",width:"100%","::placeholder, :disabled":{color:B.TV.foregroundDimmer,borderColor:"transparent"},cursor:"text"}]),K=(0,q.iv)([B.l0.reset.button,A.gU.listItem,B.l0.borderRadius(8),B.l0.center,{width:24,height:24}]),Q=P.K.button;function ee(e){var t,n,r,i,o,s,f,h,p,m,v,g=e.id,Z=e.onSelect,w=e.onInit,x=e.options,C=e.initialSelectedOption,_=e.placeholderText,S=e.autoFocus,E=e.disabled,k=d.useRef(null),T=(0,c._)(d.useState(null!=C?C:""),2),R=T[0],D=T[1],I=(n=(t={options:x,initialSelectedOption:C,inputRef:k,setInputValue:D}).options,r=t.initialSelectedOption,i=t.inputRef,o=t.setInputValue,f=(s=(0,c._)(d.useState(""),2))[0],h=s[1],p={options:n,filter:f},m=d.useMemo(function(){return p.filter?V.Z.filter(p.filter.toLowerCase(),p.options).map(function(e){return e.original}):p.options},[p.options,p.filter]),v=(0,z.Kb)({items:m,initialHighlightedIndex:0,initialSelectedItem:r,stateReducer:function(e,t){var n,r,c=t.type,s=t.changes;return((c===z.Kb.stateChangeTypes.ItemClick||c===z.Kb.stateChangeTypes.InputKeyDownEnter&&s.selectedItem)&&(null===(n=i.current)||void 0===n||n.blur()),c!==z.Kb.stateChangeTypes.InputBlur||s.selectedItem)?(c===z.Kb.stateChangeTypes.InputBlur&&s.selectedItem&&o(null!==(r=s.selectedItem)&&void 0!==r?r:""),s):(0,l._)((0,a._)({},s),{isOpen:!0})}}),{filteredOptions:m,combobox:v,setFilter:h,filter:f}),G=I.filteredOptions,A=I.filter,N=I.combobox,U=I.setFilter,L=(0,F.Z)(Z),O=(0,F.Z)(w);return d.useEffect(function(){C&&(O.current(C),D(C),U(""))},[C]),(0,W.Z)(function(){var e;N.selectedItem&&(null===(e=k.current)||void 0===e||e.blur(),L.current(N.selectedItem),D(N.selectedItem),U(""))},[N.selectedItem,L]),d.useEffect(function(){C&&(N.selectItem(C),D(C),U(""))},[C]),(0,u.BX)(P.G,{children:[(0,u.tZ)("div",(0,l._)((0,a._)({},N.getComboboxProps()),{children:(0,u.BX)(P.G,{css:[B.l0.flex.row,{position:"relative"}],children:[(0,u.tZ)(P.G,{css:[B.l0.flex.growAndShrink(1)],children:(0,u.tZ)(y.II,(0,l._)((0,a._)({},N.getInputProps({id:g,spellCheck:!1,autoFocus:S,onChange:function(e){U(e.currentTarget.value.toLowerCase()),D(e.currentTarget.value)},ref:k,onFocus:function(e){N.openMenu(),e.currentTarget.select()}})),{value:R,placeholder:null!=C?C:_,css:[J],disabled:E}))}),E?null:(0,u.tZ)(P.G,{css:[{position:"absolute",top:0,right:0,height:"100%"},B.l0.center],children:(0,u.tZ)(Q,(0,l._)((0,a._)({},N.getToggleButtonProps()),{css:K,type:"button",children:N.inputValue&&!N.isOpen?(0,u.tZ)(j.Z,{}):(0,u.tZ)(H.Z,{})}))})]})})),(0,u.BX)("div",(0,l._)((0,a._)({},N.getMenuProps()),{css:{position:"relative"},children:[N.isOpen&&G.length?(0,u.tZ)(Y.Z,{children:(0,u.tZ)("ul",{css:[B.l0.pt(4),B.l0.pb(8)],children:G.map(function(e,t){return(0,u.tZ)("li",(0,l._)((0,a._)({},N.getItemProps({item:e,index:t})),{children:(0,u.tZ)($.Z,(0,l._)((0,a._)({},{title:e,key:e.toLowerCase()}),{filter:A,selected:N.selectedItem===e,highlighted:N.highlightedIndex===t}))}),e.toLowerCase())})})}):null,A&&!G.length&&N.isOpen?(0,u.tZ)(Y.Z,{children:(0,u.tZ)(P.G,{css:[B.l0.p(16),B.l0.colWithGap(4)],children:(0,u.BX)(b.xv,{color:"dimmer",multiline:!1,children:['No results for "',A,'"']})})}):null]}))]})}var et=n(38080),en=n(19659);(r=i||(i={})).Unknown="UNKNOWN",r.Npm="NPM",r.Django="DJANGO",r.Rails="RAILS",r.DotNet="DOTNET",r.Cargo="CARGO",r.Make="MAKE",r.RegularRun="REGULAR_RUN";var er=RegExp("((index)|(main)|(app)|(run)|(start)|(server))\\..+","i"),ei=RegExp("((node_modules)|(venv)|(bower_components)|(vendor)|(build)|(dist)|(target)|(\\.git)|(\\.vscode)|(\\.idea)).+$","i"),eo=n(59868),ea=n(78975),el=n(76433),ec=n(37229),es=n(43891),eu=n(30084),ed=n(43778),ef=function(e){var t=e.split("/");if(1===t.length)return t;for(var n=[],r=0;r<t.length;r++)n.push(t.slice(0,r+1).join("/"));return n},eh=function(){var e=(0,D.Z)(),t=e.fs,n=e.dotReplit,r=(0,es.P)(n),i=(0,X.Z)(),a=(0,c._)(d.useState(null),2),l=a[0],u=a[1];return d.useEffect(function(){var e;(e=(0,o._)(function(){var e,n,o,a;return(0,s.Jh)(this,function(l){switch(l.label){case 0:if(!r)return[2];return[4,t.listFiles()];case 1:if(e=l.sent(),!i.current)return[2];if(e.error||!e.files)return u([]),[2];return[4,t.readFile(L.l)];case 2:return n=l.sent(),o=e.files,a=ed.uP.concat(ed.nh),u(o.filter(function(e){return(n.error===eu.Df.NotFound||!r.some(function(t){return ef(e).some(function(e){return null!=e.match(t)})}))&&!a.includes(e)})),[2]}})}),function(){return e.apply(this,arguments)})()},[r,t,i]),l},ep=n(55552),em=n(59121),ev=n(88936);function eg(e){var t=e.children;return(0,u.BX)(et.Tg,{background:"default",css:[B.l0.borderRadius(8),{width:"100%",height:"calc(100% - var(--space-2))",backgroundColor:"var(--background-default)",overflowY:"auto",marginTop:"0px"}],children:[(0,u.tZ)(P.G,{children:(0,u.tZ)(b.xv,{multiline:!1,variant:"subheadDefault",css:[B.l0.color.foregroundDimmest,B.l0.pl(16),B.l0.pt(16)],children:".replit"})}),(0,u.tZ)(P.G,{css:[B.l0.p(16),B.l0.justify.center,B.l0.align.center,{flex:"1 1 auto"}],children:t})]})}function ey(e){var t,n=!!e.hasInterpreter,r=e.initialRun,o=null!==(t=e.initialCompile)&&void 0!==t?t:"",s=e.isFrameworkRecommended,h=!!e.projType&&e.projType===i.Rails,p=e.isApplyingConfig,m=(0,c._)(d.useState("Unknown"===f.ZP.get(e.initialLanguage).displayName?"bash":e.initialLanguage),2),v=m[0];m[1];var g=(0,N.Y)(e.initialRun,function(e){if(!e)return{message:"Add a run command"}}),w=(0,c._)(d.useState(e.initialCompile),2),x=w[0],C=w[1];d.useEffect(function(){g.setValue(r)},[r]),d.useEffect(function(){C(null!=o?o:"")},[o]);var _=(0,N.Y)("",function(e){if(!e)return{message:"Choose an entry point file"}}),S=(0,c._)(d.useState(!!(n&&!s)),2),E=S[0],k=S[1];d.useEffect(function(){k(!!(n&&!s))},[n,s]);var T=P.K.a,R=(0,c._)(d.useState([]),2),D=R[0],L=R[1],O=(0,X.Z)(),F=eh();return d.useEffect(function(){F&&O.current&&L(F)},[O,F]),(0,u.BX)("form",{onSubmit:function(t){if(t.preventDefault(),e.setIsApplyingConfig(!0),!g.value&&!E){g.validate();return}e.onSubmit({run:g.value,compile:null!=x?x:"",entry:_.value,deleteInterp:!E,onDone:e.closeConfigPane,runChanged:g.value!==r,compileChanged:x!==o,projType:e.projType})},css:[B.l0.maxWidth(400),{width:"100%"}],children:[(0,u.BX)(P.G,{css:[B.l0.colWithGap(8)],children:[e.hasProcfile?(0,u.tZ)(P.G,{css:[B.l0.colWithGap(8)],children:(0,u.BX)(b.xv,{variant:"small",css:[B.l0.mb(24)],children:["Looks like you came from Heroku!",(0,u.tZ)(T,{target:"_blank",href:"https://docs.replit.com/tutorials/import-heroku",rel:"noopener noreferrer",children:"Read more about Replit and Heroku here."})]})}):null,n?(0,u.tZ)(P.G,{css:[B.l0.pb(16)],children:(0,u.BX)(M.hE,{disabled:p,name:"interpreterView",value:E.toString(),row:!0,onChange:function(){return k(function(e){return!e})},stretch:!0,primary:!0,children:[(0,u.tZ)(M.rK,{id:"interpreterFalse",value:"false",text:"Use run command"}),(0,u.tZ)(M.rK,{id:"interpreterTrue",value:"true",text:"Use default interpreter"})]})}):null,(0,u.BX)(P.G,{css:[B.l0.height(e.initialCompile?210:170),B.l0.colWithGap(8)],children:[E?null:(0,u.BX)(P.G,{css:[B.l0.maxWidth(400),B.l0.colWithGap(8)],children:[e.initialCompile?(0,u.BX)(P.G,{css:[B.l0.colWithGap(4)],children:[(0,u.tZ)("label",{htmlFor:"compile-sel",children:"Configure the Compile Command"}),(0,u.tZ)(b.xv,{variant:"small",color:"dimmest",children:"This is optional, and is executed before your run command."}),(0,u.tZ)(y.II,{disabled:p,id:"compile-sel",type:"text",value:x,placeholder:"Enter a command to compile the program",onChange:function(e){C(e.currentTarget.value)},css:{"&:disabled":{color:B.TV.foregroundDimmer}}})]}):null,(0,u.tZ)("label",{htmlFor:"run-sel",css:[B.l0.mt(4)],"data-cy":"import-config-run-command",children:"Configure the Run Command"}),(0,u.tZ)(y.II,{disabled:p,id:"run-sel",dataCy:"import-config-run-command-input",type:"text",value:g.value,placeholder:"Enter a command to run the program",onChange:function(e){g.setValue(e.currentTarget.value)},css:[{"&:disabled":{color:B.TV.foregroundDimmer,cursor:"auto"},cursor:"text"}]}),h?(0,u.BX)(b.xv,{variant:"small",color:"dimmest",children:["We detected this is a Rails project. You will need",(0,u.BX)("a",{target:"_blank",rel:"noopener noreferrer",href:"https://docs.replit.com/misc/rails-on-replit",children:[" ","additional changes"," "]}),"to your config files to use all of Replit’s features."]}):null,g.error||!g.value?(0,u.BX)(P.G,{css:[B.l0.color.accentNegativeDefault,B.l0.rowWithGap(4),B.l0.align.center],children:[(0,u.tZ)(U.Z,{size:12}),(0,u.tZ)(P.G,{children:g.error?g.error.message:"Add a run command"})]}):null]}),E?(0,u.BX)(P.G,{css:[{maxWidth:400},B.l0.colWithGap(8)],children:[(0,u.tZ)("label",{htmlFor:"entry-sel",children:"Configure entry point"}),(0,u.tZ)(b.xv,{variant:"small",css:[B.l0.color.foregroundDimmest],children:"The entry point is the file that’s run by default and shown first."}),0!==D.length?(0,u.tZ)(ee,(0,l._)((0,a._)({id:"config-selector",onSelect:_.setValue,onInit:_.setValue,options:D},D.length&&!!F&&{initialSelectedOption:D[0]}),{disabled:p})):(0,u.tZ)(y.II,{disabled:p,id:"entry-sel",type:"text",value:_.value,placeholder:"Choose entry point file",onChange:function(e){_.setValue(e.currentTarget.value)},css:[A.gU.filled,{cursor:"text"}]}),_.error?(0,u.BX)(P.G,{css:[{color:"var(--accent-negative-default)"},B.l0.rowWithGap(4),B.l0.align.center],children:[(0,u.tZ)(U.Z,{size:12}),(0,u.tZ)(P.G,{children:_.error.message})]}):null]}):null,(0,u.tZ)(T,{css:[B.l0.color.accentPrimaryStronger,{fontWeight:B.TV.fontWeightMedium}],target:"_blank",href:"https://docs.replit.com/programming-ide/running-github-repositories-replit",rel:"noopener noreferrer",children:"Not sure what to do?"}),(0,u.tZ)(P.G,{css:[B.l0.flex.row,B.l0.pt(16)],children:(0,u.tZ)(Z.zx,{colorway:"primary",variant:"outlined",type:"submit",text:p?"Saving...":"Done",disabled:p||!E&&(!!g.error||!g.value),css:[A.gU.filledAndOutlined,{fontWeight:B.TV.fontWeightMedium,color:B.TV.accentPrimaryStronger}],dataCy:"import-config-done"})})]})]}),(0,u.tZ)(I.u,{isOpen:!1,preventClose:!0,onRequestClose:function(){},children:(0,u.tZ)(P.G,{css:[B.l0.borderRadius(16),B.l0.p(32),{backgroundColor:"var(--background-default)"}],children:(0,u.BX)(G.gC,{align:"center",spacing:1,children:[(0,u.tZ)(ev.Z,{size:32}),(0,u.BX)(b.xv,{multiline:!1,children:["Upgrading to ",f.ZP.get(v).displayName]})]})})})]})}function eb(){return(0,u.BX)(P.G,{children:[(0,u.tZ)(P.G,{children:".replit looks a lil messed up :/"}),(0,u.tZ)("a",{css:[B.l0.pt(8),{fontSize:B.TV.fontSizeSmall}],target:"_blank",href:"https://docs.replit.com/programming-ide/configuring-repl",children:"View docs"})]})}function eZ(){return(0,u.tZ)(P.G,{children:(0,u.BX)("p",{children:["Initializing run configuration",(0,u.tZ)(g,{style:{color:"var(--foreground-default)"}})]})})}var ew=function(e){var t,n,r,l,f=(0,O.Z)(),h=(0,D.Z)(),p=h.fs,m=h.dotReplit,v=(0,c._)((t=(0,a._)({},k,void 0),_.D(R,t)),1)[0],g=(0,X.Z)(),y=(n=(0,a._)({},k,{variables:{replId:f}}),C.a(T,n)),b=(null===(l=y.data)||void 0===l?void 0:l.repl.__typename)==="Repl"?y.data.repl:null,Z=e.useReadFile(p,L.l),w=(0,c._)(d.useState(!1),2),x=w[0],S=w[1],E=(0,c._)(d.useState(!1),2),I=E[0],G=E[1],B=Z&&!Z.error?Z.content.toString("utf8"):"",A=(0,c._)(d.useState(""),2),P=A[0],N=A[1],U=(0,c._)(d.useState(""),2),M=U[0],F=U[1],W=(0,c._)(d.useState(!1),2),H=W[0],V=W[1],z=(0,c._)(d.useState(i.Unknown),2),j=z[0],q=z[1],Y=(0,c._)(d.useState(!1),2),$=Y[0],J=Y[1];d.useEffect(function(){function e(){return(e=(0,o._)(function(){var e,t,n,r,o,a,l,c,u,d,f,h,v,y,b,Z;return(0,s.Jh)(this,function(s){switch(s.label){case 0:return[4,m.getConfig()];case 1:if(t=(e=s.sent()).config,e.error)return[2];return r=(0,ep.Cq)(null!==(n=t.run)&&void 0!==n?n:void 0),a=(0,ep.Cq)(null!==(o=t.compile)&&void 0!==o?o:void 0),l=!!t.compile,c=!!t.interpreter,[4,p.listFiles()];case 2:if(u=s.sent(),!g.current||null!=u.error||null==u.files||0===u.files.length)return[2];return d=u.files,h=(f=function(e,t,n){if(0===n.length)return{projType:"UNKNOWN",runCommand:null,compileCommand:null};var r,i,o,a,l,c={initRunCommand:e,isCompiled:t,allFiles:n},s=(i=(r=c).initRunCommand,o=r.isCompiled,a=r.allFiles,(l=new Set(a)).has("Makefile")||l.has("makefile")?"MAKE":l.has("package.json")?"NPM":l.has("Cargo.toml")?"CARGO":o?"UNKNOWN":l.has("config/application.rb")?"RAILS":a.some(function(e){return"csproj"===(0,en.r6)(e)})?"DOTNET":l.has("manage.py")?"DJANGO":er.test(i)?"REGULAR_RUN":"UNKNOWN");return{projType:s,runCommand:function(e,t){var n=t.initRunCommand,r=t.allFiles;switch(e){case"NPM":return"npm run start";case"REGULAR_RUN":var i,o=null!==(i=r.filter(function(e){return!ei.test(e)}).find(function(e){return er.test(e)}))&&void 0!==i?i:null;if(null==o)return null;return n.replace(er,o);case"DJANGO":return"python3 manage.py runserver 0.0.0.0:3000";case"RAILS":return"bundle exec rails server --binding=0.0.0.0";case"DOTNET":return"dotnet run";case"CARGO":return"cargo run";default:return null}}(s,c),compileCommand:function(e){switch(e){case"MAKE":return"make";case"CARGO":case"DOTNET":case"NPM":return"";default:return null}}(s)}}(r,l,d)).projType,v=f.runCommand,y=f.compileCommand,b=x?null!=r?r:v:null!=v?v:r,Z=null!=y?y:a,S(d.includes(em.E)),N(b),F(Z),V(h!==i.Unknown&&h!==i.RegularRun),q(h),J(c),[2]}})})).apply(this,arguments)}B&&function(){e.apply(this,arguments)}()},[B,g]),d.useEffect(function(){(0,eo.j)(eo.U3.NIX_GH_IMPORT_USED,{action:ea.D.ImportEnded,replId:f})},[f]);var K=(0,el.Z)();d.useEffect(function(){K(!1)},[]);var Q=(r=(0,o._)(function(e){var t,n,r,i,o,a,l,c,u,d;return(0,s.Jh)(this,function(s){switch(s.label){case 0:var h;return t=e.run,n=e.compile,r=e.entry,i=e.deleteInterp,o=e.onDone,a=e.runChanged,l=e.compileChanged,c=e.projType,(0,eo.j)(eo.U3.NIX_GH_IMPORT_USED,{action:ea.D.ConfigDone,interpUsed:!i,isCompiled:""!==n,runChanged:a,compileChanged:l,projType:c,replId:f}),h=[],i?(h.push((0,ec.xz)("interpreter")),h.push((0,ec.xz)("entrypoint")),h.push((0,ec.KQ)(t)),h.push((0,ec.X6)(t)),n?(h.push((0,ec.D3)(n)),h.push((0,ec.pi)(n))):(h.push((0,ec.xz)("compile")),h.push((0,ec.xz)("deployment/build")))):(h.push((0,ec.xz)("run")),h.push((0,ec.If)(r))),u=h,d=v({variables:{input:{id:f}}}),[4,m.updateDotReplit(u)];case 1:return s.sent(),p.flush().then(function(){p.persist({skipDebounce:!0})}),[4,d];case 2:return s.sent(),o(),[2]}})}),function(e){return r.apply(this,arguments)});return b&&Z?(null==Z?void 0:Z.error)?(0,u.tZ)(eg,{children:(0,u.tZ)(eb,{})}):(0,u.tZ)(eg,{children:(0,u.tZ)(ey,{initialLanguage:"",initialRun:P,initialCompile:M,hasInterpreter:$,fs:p,hasProcfile:x,isApplyingConfig:I,setIsApplyingConfig:G,onSubmit:Q,isFrameworkRecommended:H,projType:j,closeConfigPane:e.closeConfigPane})}):(0,u.tZ)(eg,{children:(0,u.tZ)(eZ,{})})}},9626:function(e,t,n){var r=n(8182),i=n(43429),o=n(56596),a=n(1415),l=n(29287),c=n(47075),s=n(74833),u=function(e){var t=e.reason,n=e.children;return(0,r.BX)(o.G,{css:[l.l0.center,l.l0.minWidth(225),l.l0.height(225),l.l0.p(16),l.l0.color.foregroundDefault,l.l0.borderRadius(8),l.l0.backgroundColor.backgroundOverlay,l.l0.zIndex(5e5),{cursor:"not-allowed"}],children:[(0,r.tZ)(c.Z,{height:80}),(0,r.BX)(s.xv,{multiline:!1,variant:"subheadBig",css:[l.l0.mt(32)],dataCy:"import-loading-spinner",children:[t,"..."]}),n]})};t.Z=(0,i.memo)(function(e){var t=e.reason,n=e.children;return(0,r.tZ)(a.h,{children:(0,r.tZ)(o.G,{css:[l.l0.position.fixed,l.l0.flex.row,l.l0.align.center,l.l0.justify.center,l.l0.backgroundColor.backgroundOverlay,{top:0,bottom:0,left:0,right:0,zIndex:5e5,cursor:"not-allowed"}],children:(0,r.tZ)(u,{reason:null!=t?t:"Importing",children:n})})})})},27695:function(e,t,n){n.d(t,{Z:function(){return v}});var r=n(32477),i=n(8182),o=n(23026),a=function e(){"use strict";var t=this;(0,o._)(this,e),this.audioStart=0,this.feed=function(e){var n=t.getFormatedValue(e),r=new Float32Array(t.samples.length+n.length);r.set(t.samples,0),r.set(n,t.samples.length),t.samples=r},this.getFormatedValue=function(e){for(var t=new Float32Array(e.length),n=0;n<e.length;n++)t[n]=e[n]/2147483648;return t},this.stop=function(){if(t.bufferSource)try{t.bufferSource.stop()}catch(e){if("InvalidStateError"!==e.name&&"RangeError"!==e.name)throw e}},this.flush=function(e){if(t.audioCtx&&t.samples.length){var n,r,i,o=0,a=t.audioCtx.currentTime;if(0===e)t.startTime=a,t.audioStart=a;else{for(var l=Math.floor((a-t.audioStart)*44100);l>e-32896;)t.audioStart+=.7459410430839002,l-=32896;l>e&&(o=l-e,t.startTime=a),t.startTime=a}t.samples=t.samples.slice(o,t.samples.length);for(var c=t.audioCtx.createBufferSource(),s=t.samples.length/1,u=t.audioCtx.createBuffer(1,s,44100),d=0;d<1;d++)for(i=0,n=u.getChannelData(d),r=d;i<s;i++)n[i]=t.samples[r],r+=1;t.startTime<t.audioCtx.currentTime&&(t.startTime=t.audioCtx.currentTime),c.buffer=u,c.connect(t.gainNode),c.start(t.startTime),t.stop(),t.bufferSource=c,t.startTime+=u.duration,t.samples=new Float32Array}},this.samples=new Float32Array;var n=window.AudioContext||window.webkitAudioContext;this.audioCtx=new n,this.gainNode=this.audioCtx.createGain(),this.gainNode.gain.value=1,this.gainNode.connect(this.audioCtx.destination),this.startTime=this.audioCtx.currentTime},l=n(43429),c=n(29287),s=n(49344),u=n(56596),d=n(1498),f=n(74833),h=n(47001),p=n(32377),m=n(17867);function v(e){var t=e.container,n=(0,r._)((0,l.useState)(!1),2),o=n[0],v=n[1],g=(0,r._)((0,l.useState)(!1),2),y=g[0],b=g[1],Z=(0,m.Z)(t);(0,l.useEffect)(function(){if(Z===h.em.CONNECTED&&!0!==y){var e=setTimeout(function(){b(!0)},1e3);return function(){clearTimeout(e)}}},[Z,y]);var w=(0,l.useRef)(null);(0,l.useEffect)(function(){if(y&&t.getConnectionState()!==h.em.DISCONNECTED)return t.openChannel({name:"audio",service:"audio"},function(e){var t=e.channel,n=null,r=!1;return t.onCommand(function(e){var t;r||(r=!0,w.current=function(){n=new a,w.current=null},v(!0)),n&&(null==e?void 0:null===(t=e.audio2)||void 0===t?void 0:t.data)&&(e.audio2.samples||(e.audio2.samples=0),n.feed(Int32Array.from(e.audio2.data)),n.flush(e.audio2.samples))}),function(){v(!1),n&&(n.stop(),n=null),w.current=null}})},[t,y]);var x=function(){v(!1)};return(0,i.tZ)(s.u,{isOpen:o,onRequestClose:x,children:(0,i.BX)(u.G,{css:[c.l0.colWithGap(24)],children:[(0,i.tZ)(f.h4,{variant:"headerDefault",level:1,children:"We hear audio!"}),(0,i.BX)(u.G,{css:[c.l0.colWithGap(8)],children:[(0,i.tZ)(f.xv,{children:"Hey! It appears that this Repl is playing audio."}),(0,i.tZ)(f.xv,{children:"In order for us to hear the audio you’re receiving, please click confirm."})]}),(0,i.BX)(u.G,{css:[c.l0.rowWithGap(12),c.l0.justify.end],children:[(0,i.tZ)(d.zx,{onClick:x,text:"Cancel"}),(0,i.tZ)(d.zx,{colorway:"positive",onClick:function(){v(!1),w.current&&w.current()},text:"Confirm",iconLeft:(0,i.tZ)(p.Z,{})})]})]})})}},30249:function(e,t,n){n.d(t,{Z:function(){return y},e:function(){return w}});var r=n(45903),i=n(70322),o=n(8182),a=n(38080),l=n(74833),c=n(56596),s=n(93918),u=n(29287),d=n(19659),f=n(55534),h=n(15146),p=n(5344),m=n(1498),v=n(9331),g=(0,s.X)({code:[u.l0.font.code,u.l0.flex.grow(1)],surface:[u.l0.borderRadius(8),u.l0.p(8),u.l0.flex.row,u.l0.rowWithGap(8),u.l0.align.center]});function y(e){var t=w(e.filePath,e.keyName);if(!t)return null;var n=t.import,i=t.access;return(0,o.BX)(c.G,{css:u.l0.colWithGap(8),children:[n?(0,o.tZ)(b,(0,r._)({code:n},e)):null,(0,o.tZ)(b,(0,r._)({code:i},e))]})}function b(e){var t=e.code,n=e.onInsert,r=(0,i._)(e,["code","onInsert"]);return(0,o.BX)(a.Tg,{elevated:r.elevated,css:g.surface,children:[(0,o.tZ)(Z,{value:t}),(0,o.tZ)(l.xv,{variant:"small",css:g.code,multiline:!1,children:t}),n?(0,o.tZ)(m.zx,{variant:"outlined",size:"small",onClick:function(){return n(t)},text:"Insert",iconRight:(0,o.tZ)(v.Z,{})}):null]})}function Z(e){var t=e.value,n=(0,f.Z)();return(0,o.tZ)(h.hU,{alt:"Copy",tooltipHidden:!0,onClick:function(){navigator.clipboard.writeText(t).then(function(){n.showConfirm("Copied")})},children:(0,o.tZ)(p.Z,{})})}function w(e,t){if(!e)return null;switch((0,d.r6)(e)){case"js":case"ts":case"jsx":case"tsx":return{import:null,access:"const mySecret = process.env['".concat(t,"']")};case"py":return{import:"import os",access:"my_secret = os.environ['".concat(t,"']")};case"go":return{import:'import "os"',access:'mySecret := os.Getenv("'.concat(t,'")')};case"java":case"scala":return{import:null,access:'System.getenv("'.concat(t,'")')};case"rb":return{import:null,access:'ENV["'.concat(t,'"]')};case"c":case"cpp":return{import:"#include <stdlib.h>",access:'char* mySecret = getenv("'.concat(t,'")')};case"cs":return{import:"using System;",access:'string mySecret = System.Environment.GetEnvironmentVariable("'.concat(t,'");')};case"sh":return{import:null,access:'"$'.concat(t,'"')};default:return null}}},52489:function(e,t,n){n.d(t,{qi:function(){return el},$M:function(){return eu},u_:function(){return ep},BH:function(){return em},ZP:function(){return eZ}});var r=n(34142),i=n(45903),o=n(25e3),a=n(32477),l=n(87682),c=n(8182),s=n(43429),u=n(30084),d=n(28268),f=n(12834),h=n(52924),p=n(11516),m=n(66349),v=n(59868),g=n(88883),y=n(48900),b=n(68099),Z=n(38265),w=n(20142),x=n(81013),C=n(1498),_=n(49344),S=n(37951),E=n(38080),k=n(74833),T=n(56596),R=n(32377),D=n(52686),I=n(15006),G=n(29287),B=n(27308),A=v.U3.ENV_EDITOR_USED;function P(e){var t,n=e.secrets,i=e.update,o=(0,a._)((0,s.useState)(!1),2),u=o[0],d=o[1],f=(0,a._)((0,s.useState)(!1),2),h=f[0],p=f[1],m=(0,a._)((0,s.useState)(!1),2),g=m[0],P=m[1],U=(0,a._)((0,s.useState)(0),2),L=U[0],O=U[1],M=0===L,X=(0,s.useRef)();X.current||(X.current=(0,b.ir)(function(e){var t=N(e.state.doc.toString());return O(t),0!==t?(0,v.j)(A,{action:"rawEditorUpdatedError"}):(0,v.j)(A,{action:"rawEditorUpdated"}),[]}));var F=(0,x.Z)(),W=F.ref,H=F.view,V=function(){h||d(!1)},z=function(){P(!1),d(!0),(0,v.j)(A,{action:"rawEditorOpened"})},j=function(){if(!H)return!1;var e=N(H.state.doc.toString());return O(e),0===e},q=(t=(0,r._)(function(){var e;return(0,l.Jh)(this,function(t){switch(t.label){case 0:if(!H||!j())return[2];p(!0),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,i(JSON.parse(H.state.doc.toString()))];case 2:return t.sent(),p(!1),P(!0),setTimeout(function(){V(),setTimeout(function(){P(!1)},500)},500),[3,4];case 3:return e=t.sent(),y.Tb(e),(0,v.j)(A,{action:"rawEditorUpdatedError"}),O(3),p(!1),[3,4];case 4:return[2]}})}),function(){return t.apply(this,arguments)});return(0,s.useEffect)(function(){if(H){var e=JSON.stringify(n,null,2);"{}"===e&&(e="{\n  \n}"),H.dispatch({changes:{from:0,to:H.state.doc.length,insert:e}}),H.dispatch({selection:{anchor:H.state.doc.length-2}}),H.focus()}},[H,n]),(0,c.BX)(c.HY,{children:[(0,c.tZ)(C.zx,{onClick:function(){return z()},text:"Edit as JSON",iconLeft:(0,c.tZ)(D.Z,{}),size:"small"}),(0,c.tZ)(_.u,{isOpen:u,onRequestClose:function(){return V()},children:(0,c.BX)(T.G,{css:[G.l0.colWithGap(24)],children:[(0,c.tZ)(k.h4,{level:1,variant:"headerDefault",children:"Raw Secrets Editor"}),(0,c.tZ)(k.xv,{children:"Secrets are specified in JSON. Values must be strings."}),(0,c.tZ)(E.Tg,{css:[G.l0.borderRadius(8),G.l0.transition.snappy,G.l0.p(4),{border:"1px solid var(--outline-dimmer)",":hover":{borderColor:"var(--outline-stronger)"}}],elevated:!0,children:(0,c.tZ)(w.ZP,{ref:W,readOnly:h||g,extensions:[X.current,Z.$f.of([{key:(0,B.l2)({cmdOrCtrl:!0,key:"Enter"}),run:function(){return q(),!0},preventDefault:!0,stopPropagation:!0}])],language:"json",hideGutter:!0})}),(0,c.BX)(T.G,{css:[G.l0.rowWithGap(4),G.l0.justify.end],children:[!M&&(0,c.tZ)(S.E,{icon:(0,c.tZ)(I.Z,{}),colorway:"negative",text:function(e){switch(e){case 1:return"Make sure the data is valid JSON.";case 2:return"Make sure that all values are strings.";case 3:return"There was an error saving the secrets.";default:return""}}(L)}),(0,c.BX)(T.G,{css:[G.l0.rowWithGap(12)],children:[(0,c.tZ)(C.zx,{onClick:V,text:"Cancel"}),(0,c.tZ)(C.zx,{iconLeft:(0,c.tZ)(R.Z,{}),stretch:!0,colorway:g?"positive":"primary",text:g?"Saved!":"Save",disabled:!M||h||g,onClick:function(){return q()}})]})]})]})})]})}function N(e){try{var t=JSON.parse(e);for(var n in t)if("string"!=typeof n||"string"!=typeof t[n])return 2;return 0}catch(e){return 1}}var U=n(18836),L=n(88936),O=n(58091),M=n(15146),X=n(80339),F=n(98859),W=n(44680),H=n(99656),V=n(70002),z=n(52682),j=n(31900),q=n(55534),Y=n(5344),$=n(93918),J=n(48272),K=n(76588),Q=n(30249),ee=n(50199),et=n(18107),en=n(68514),er=n(30983),ei=(0,$.X)({addSecretContainer:[G.l0.flex.column,G.l0.colWithGap(8),G.l0.py(8)],secretItemEdit:[G.l0.colWithGap(8)],secretItemEditInputs:[G.l0.rowWithGap(8)],secretItem:[G.l0.flex.row,G.l0.rowWithGap(8),G.l0.align.center],headerStyle:[G.l0.flex.row,G.l0.rowWithGap(8),G.l0.align.center,G.l0.p(8)],accessSecrect:[G.l0.px(8),G.l0.py(16),G.l0.colWithGap(8)],accessSecrectHeader:[G.l0.rowWithGap(8),G.l0.align.center]}),eo={fontFamily:"text-security-disc"};function ea(e){var t=e.onClose,n=e.onAdd,r=e.otherKeys,l=(0,a._)(s.useState(!0),2),u=l[0],d=l[1],f=(0,a._)(s.useState({key:"",value:""}),2),h=f[0],p=f[1],m=h.key.length>0&&!r.includes(h.key);return(0,c.tZ)(c.HY,{children:(0,c.BX)(T.G,{css:ei.addSecretContainer,children:[(0,c.BX)(T.G,{css:G.l0.rowWithGap(8),children:[(0,c.BX)(T.G,{css:[G.l0.colWithGap(4),G.l0.width("40%")],children:[(0,c.tZ)(k.xv,{css:[G.l0.pt(2),G.l0.pb(4)],variant:"small",color:"dimmer",multiline:!1,children:"Key"}),(0,c.tZ)(U.II,{value:h.key,onChange:function(e){return p((0,o._)((0,i._)({},h),{key:e.target.value}))},placeholder:"SECRET_KEY",autoComplete:"off"}),r.includes(h.key)?(0,c.BX)(k.xv,{multiline:!1,variant:"small",css:{color:G.TV.accentNegativeDefault},children:['Secret "',h.key,'" already exists']}):null]}),(0,c.BX)(T.G,{css:[G.l0.colWithGap(4),G.l0.flex.growAndShrink(1)],children:[(0,c.BX)(T.G,{css:[G.l0.flex.row,G.l0.rowWithGap(4),G.l0.align.center],children:[(0,c.tZ)(k.xv,{variant:"small",color:"dimmer",multiline:!1,children:"Value"}),(0,c.tZ)(M.hU,{alt:"Toggle Visibility",tooltipHidden:!0,onClick:function(){return d(!u)},children:u?(0,c.tZ)(X.Z,{}):(0,c.tZ)(F.Z,{})})]}),(0,c.tZ)(U.II,{value:h.value,onChange:function(e){return p((0,o._)((0,i._)({},h),{value:e.target.value}))},style:u?eo:void 0,autoComplete:"off",placeholder:"Value"})]})]}),(0,c.BX)(T.G,{css:[G.l0.rowWithGap(8),G.l0.justify.end],children:[(0,c.tZ)(C.zx,{size:"small",text:"Cancel",onClick:function(){return t()}}),(0,c.tZ)(C.zx,{size:"small",text:"Add Secret",colorway:"primary",disabled:!m,onClick:function(){n({key:h.key.trim(),value:h.value}),p({key:"",value:""})}})]})]})})}function el(e){var t=e.value,n=(0,q.Z)();return(0,c.tZ)(M.hU,{alt:"Copy",tooltipHidden:!0,onClick:function(){navigator.clipboard.writeText(t).then(function(){n.showConfirm("Copied")})},children:(0,c.tZ)(Y.Z,{})})}var ec=[G.l0.flex.row,G.l0.rowWithGap(8),G.l0.align.center],es=(0,$.X)({root:[G.l0.height("100%"),G.l0.borderRadius(8),{'& [aria-haspopup="listbox"]':[G.l0.height(32)]}],item:ec,itemDanger:[ec,{color:G.TV.accentNegativeStronger}]});function eu(e){var t=e.onEdit,n=e.onDelete;return(0,c.tZ)(E.Tg,{elevated:!0,css:es.root,children:(0,c.tZ)(j.Z,{label:"Options",items:[{label:(0,c.BX)(T.G,{css:es.item,children:[(0,c.tZ)(h.Z,{}),(0,c.tZ)(k.xv,{multiline:!1,children:"Edit"})]}),onClick:t},{label:(0,c.BX)(T.G,{css:es.itemDanger,children:[(0,c.tZ)(z.Z,{}),(0,c.tZ)(k.xv,{multiline:!1,children:"Delete"})]}),isDescructive:!0,onClick:n}],onItemClick:function(e){var t;return null===(t=e.onClick)||void 0===t?void 0:t.call(e)}})})}var ed=[G.l0.p(4),G.l0.rowWithGap(4),G.l0.borderRadius(8)],ef=(0,$.X)({root:[ed,G.l0.width("40%"),G.l0.display.flex,G.l0.overflowX("hidden")],text:[G.l0.flex.growAndShrink(1)]}),eh=(0,$.X)({root:[ed,G.l0.flex.growAndShrink(1)],text:[G.l0.flex.growAndShrink(1),G.l0.truncate,{fontFamily:G.TV.fontFamilyCode}]});function ep(e){var t=e.value;return(0,c.BX)(E.Tg,{elevated:!0,css:ef.root,children:[(0,c.tZ)(el,{value:t}),(0,c.tZ)(er.u,{tooltip:(0,c.tZ)(k.xv,{children:t}),children:function(e,n){return(0,c.tZ)(k.xv,(0,o._)((0,i._)({ref:n},e),{multiline:!1,css:ef.text,children:t}))}})]})}function em(e){var t=e.value,n=(0,a._)(s.useState(!1),2),r=n[0],i=n[1];return(0,c.BX)(E.Tg,{elevated:!0,css:eh.root,children:[(0,c.tZ)(el,{value:t}),(0,c.tZ)(k.xv,{multiline:!1,css:eh.text,children:r?t:"•".repeat(12)}),(0,c.tZ)(M.hU,{alt:"Toggle Secret",tooltipHidden:!0,onClick:function(){return i(!r)},children:r?(0,c.tZ)(F.Z,{}):(0,c.tZ)(X.Z,{})})]})}function ev(e){var t=(0,a._)(s.useState(""===e.secret.value?{key:e.secret.key,value:""}:null),2),n=t[0],r=t[1],l=(0,a._)(s.useState(!1),2),u=l[0],d=l[1],f=(0,a._)(s.useState(!0),2),h=f[0],p=f[1],m=e.secret;if(n&&!e.readOnly){var v,g=e.onDeleteSecret,y=e.onUpdateSecret;return(0,c.BX)(c.HY,{children:[(0,c.BX)(T.G,{css:ei.secretItemEdit,children:[(0,c.BX)(T.G,{css:ei.secretItemEditInputs,children:[(0,c.BX)(T.G,{css:[G.l0.colWithGap(2),G.l0.width("40%")],children:[(0,c.tZ)(k.xv,{multiline:!1,css:[G.l0.pt(2),G.l0.pb(4)],variant:"small",color:"dimmer",children:"Key"}),(0,c.tZ)(T.G,{children:(0,c.tZ)(U.II,{value:null!==(v=null==n?void 0:n.key)&&void 0!==v?v:"",onChange:function(e){return r(function(t){return t?(0,o._)((0,i._)({},t),{key:e.target.value}):t})},placeholder:"SECRET_KEY",autoComplete:"off"})})]}),(0,c.BX)(T.G,{css:[G.l0.flex.growAndShrink(1),G.l0.colWithGap(2)],children:[(0,c.BX)(T.G,{css:[G.l0.flex.row,G.l0.rowWithGap(4),G.l0.align.center],children:[(0,c.tZ)(k.xv,{multiline:!1,css:[G.l0.pt(2),G.l0.pb(4)],variant:"small",color:"dimmer",children:"Value"}),(0,c.tZ)(M.hU,{alt:"Toggle Visibility",tooltipHidden:!0,onClick:function(){return p(!h)},children:h?(0,c.tZ)(X.Z,{}):(0,c.tZ)(F.Z,{})})]}),(0,c.tZ)(T.G,{children:(0,c.tZ)(U.II,{value:n.value,style:h?eo:void 0,onChange:function(e){return r(function(t){return t?(0,o._)((0,i._)({},t),{value:e.target.value}):t})}})})]})]}),(0,c.BX)(T.G,{css:[G.l0.flex.row,G.l0.rowWithGap(8)],children:[(0,c.tZ)(C.zx,{size:"small",text:"Delete",colorway:"negative",onClick:function(){return d(!0)}}),(0,c.tZ)(T.G,{css:G.l0.flex.grow(1)}),(0,c.tZ)(C.zx,{size:"small",text:"Cancel",onClick:function(){return r(null)}}),(0,c.tZ)(C.zx,{size:"small",colorway:"primary",text:""===e.secret.value?"Add Secret":"Update Secret",disabled:!(null==n?void 0:n.key.length),onClick:function(){n&&(y(m.key,{key:n.key.trim(),value:n.value}),r(null))}})]})]}),(0,c.tZ)(_.u,{isOpen:u,onRequestClose:function(){return d(!1)},children:(0,c.BX)(T.G,{children:[(0,c.BX)(k.xv,{variant:"subheadDefault",multiline:!1,children:["Delete ",m.key,"?"]}),(0,c.tZ)(k.xv,{color:"dimmer",multiline:!1,children:"Are you sure you would like to delete this secret? This cannot be undone."}),(0,c.BX)(T.G,{css:[G.l0.justify.end,G.l0.flex.row,G.l0.rowWithGap(8)],children:[(0,c.tZ)(C.zx,{text:"Cancel",onClick:function(){return d(!1)}}),(0,c.tZ)(C.zx,{text:"Delete",colorway:"negative",onClick:function(){return g(m.key)}})]})]})})]})}return(0,c.BX)(T.G,{css:ei.secretItem,children:[(0,c.tZ)(ep,{value:m.key}),(0,c.tZ)(em,{value:m.value}),e.readOnly?null:(0,c.BX)(c.HY,{children:[(0,c.tZ)(T.G,{children:(0,c.tZ)(eu,{onEdit:function(){return r(m)},onDelete:function(){return d(!0)}})}),(0,c.tZ)(_.u,{isOpen:u,onRequestClose:function(){return d(!1)},children:(0,c.BX)(T.G,{css:[G.l0.colWithGap(24)],children:[(0,c.BX)(k.xv,{multiline:!1,variant:"headerDefault",children:["Delete ",m.key,"?"]}),(0,c.tZ)(k.xv,{color:"dimmer",multiline:!1,children:"Are you sure you would like to delete this secret? This cannot be undone."}),(0,c.BX)(T.G,{css:[G.l0.justify.end,G.l0.flex.row,G.l0.rowWithGap(12)],children:[(0,c.tZ)(C.zx,{text:"Cancel",onClick:function(){return d(!1)}}),(0,c.tZ)(C.zx,{iconLeft:(0,c.tZ)(z.Z,{}),text:"Yes, delete secret",colorway:"negative",onClick:function(){return e.onDeleteSecret(m.key)}})]})]})})]})]})}function eg(e){var t=e.secrets,n=e.onUpdateSecret,r=e.onDeleteSecret,i=e.onAddSecret,o=e.showAddSecret,l=e.onClose,s=Object.entries(t).filter(function(e){var t=(0,a._)(e,2);return""===(t[0],t[1])}),u=Object.entries(t).filter(function(e){var t=(0,a._)(e,2);return""!==(t[0],t[1])});return(0,c.BX)(T.G,{css:[G.l0.colWithGap(8),G.l0.px(8),G.l0.py(8)],children:[0!==s.length&&(0,c.BX)(c.HY,{children:[(0,c.BX)(T.G,{css:[G.l0.colWithGap(8)],children:[(0,c.tZ)(k.xv,{variant:"subheadDefault",multiline:!1,children:"Configure missing Secret values"}),(0,c.tZ)(k.xv,{variant:"small",children:"This Repl contains Secrets that might be required. Add values to ensure the code runs as expected."}),(0,c.tZ)(T.G,{css:[G.l0.colWithGap(8)],children:s.map(function(e){var t=(0,a._)(e,2),i=t[0],o=t[1];return(0,c.tZ)(ev,{secret:{key:i,value:o},onUpdateSecret:n,onDeleteSecret:r},i)})})]}),(0,c.tZ)(en.R,{})]}),(0,c.BX)(T.G,{css:[G.l0.colWithGap(8)],children:[o?(0,c.tZ)(ea,{onClose:l,onAdd:i,otherKeys:Object.keys(t)}):null,u.map(function(e){var t=(0,a._)(e,2),i=t[0],o=t[1];return(0,c.tZ)(ev,{secret:{key:i,value:o},onUpdateSecret:n,onDeleteSecret:r},i)})]})]})}function ey(e){var t=e.secrets,n=e.activeFile,r=(0,a._)(s.useState(Object.keys(t)[0]),2),i=r[0],o=r[1];return(0,g.Z)(n)&&(0,Q.e)(n,i)&&0!==Object.keys(t).length?(0,c.BX)(T.G,{css:ei.accessSecrect,children:[(0,c.BX)(T.G,{css:ei.accessSecrectHeader,children:[(0,c.tZ)(k.xv,{multiline:!1,children:"Access secret"}),(0,c.tZ)(J.P,{css:G.l0.minWidth(48),items:Object.keys(t).map(function(e){return{title:e}}),selectedItem:{title:i},onChange:function(e){return o(e.title)}})]}),(0,c.tZ)(Q.Z,{elevated:!0,keyName:i,filePath:n})]}):null}function eb(e,t){var n=(0,i._)({},e);return"add"===t.type?n[t.key]=t.value:"update"===t.type?(delete n[t.oldKey],n[t.key]=t.value):delete n[t.key],n}function eZ(e){var t,n,o,h,g,y=e.readRawEnv,b=e.writeRawEnv,Z=e.getRunState,w=(0,O.R3)(),x=(0,f.Z)(),_=(0,a._)(s.useState(null),2),S=_[0],E=_[1],R=(0,a._)(s.useState(!1),2),D=R[0],I=R[1],B=function(){I(!1)},A=(0,m.Z)();s.useEffect(function(){(0,v.Cn)(v.U3.ENV_EDITOR_USED,{action:"opened"}),p.Z.set("enveditortour",!0)},[]),s.useEffect(function(){function e(){return(e=(0,r._)(function(){var e;return(0,l.Jh)(this,function(t){switch(t.label){case 0:return[4,y()];case 1:if((e=t.sent()).error===u.Df.NotFound)return x.current&&E({}),[2];if(e.error)throw Error("Error getting .env");if(!x.current)return[2];return E(d.Z.parse(e.content.toString())),[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[y,E,x]);var N=s.useRef(null),U=s.useRef([]),M=(t=(0,r._)(function(e){var t,n,r,i;return(0,l.Jh)(this,function(o){switch(o.label){case 0:if(!S)throw Error("trying to write secrets before loading");return E(t=eb(S,e)),U.current.push(e),n=Math.random(),N.current=n,[4,y()];case 1:if(i=o.sent(),N.current!==n)return[2];return i.error?r=t:(r=d.Z.parse(i.content.toString()),U.current.forEach(function(e){r=eb(r,e)}),E(r)),U.current=[],[4,b(d.Z.serialize(r))];case 2:return o.sent(),[2]}})}),function(e){return t.apply(this,arguments)}),X=(0,q.Z)().showConfirm,F=(n=(0,r._)(function(e){return(0,l.Jh)(this,function(t){return(0,v.j)(v.U3.ENV_EDITOR_USED,{action:"created",multiline:e.value.includes("\n")}),M((0,i._)({type:"add"},e)),Z()===et.Ah.RUNNING&&X("Re-run your Repl to use this secret"),B(),[2]})}),function(e){return n.apply(this,arguments)}),z=(o=(0,r._)(function(e,t){return(0,l.Jh)(this,function(n){return(0,v.j)(v.U3.ENV_EDITOR_USED,{action:"updated",multiline:t.value.includes("\n")}),M((0,i._)({type:"update",oldKey:e},t)),[2]})}),function(e,t){return o.apply(this,arguments)}),j=(h=(0,r._)(function(e){return(0,l.Jh)(this,function(t){return(0,v.j)(v.U3.ENV_EDITOR_USED,{action:"deleted"}),M({type:"delete",key:e}),[2]})}),function(e){return h.apply(this,arguments)}),Y=(0,ee.Z)(function(){return S&&Object.keys(S).length>0},[S]);return S&&A?(0,c.BX)(T.G,{css:[G.l0.flex.column],children:[(0,c.BX)(T.G,{css:ei.headerStyle,children:[(0,c.tZ)(k.xv,{css:G.l0.flex.growAndShrink(1),variant:"subheadDefault",multiline:!1,children:"Secrets"}),(0,c.tZ)(P,{secrets:S,update:(g=(0,r._)(function(e){return(0,l.Jh)(this,function(t){switch(t.label){case 0:return E(e),[4,b(d.Z.serialize(e))];case 1:return t.sent(),[2]}})}),function(e){return g.apply(this,arguments)})}),(0,c.tZ)(V.Z,{iconLeft:(0,c.tZ)(W.Z,{}),href:"https://docs.replit.com/programming-ide/workspace-features/secrets",size:"small",text:"Docs",target:"_blank"}),(0,c.tZ)(C.zx,{iconLeft:(0,c.tZ)(H.Z,{}),text:"New Secret",colorway:"primary",size:"small",onClick:function(){return I(!0)}})]}),(0,c.tZ)(T.G,{css:[G.l0.px(8)],children:(0,c.tZ)(en.R,{})}),0===Object.keys(S).length&&!1===D?(0,c.BX)(T.G,{css:[G.l0.center,G.l0.flex.shrink(1)],children:[(0,c.tZ)(K.Z,{alt:"A rotating key",src:"/public/images/secrets/secretskey.gif",height:200,width:200,objectFit:"contain"}),(0,c.tZ)(k.xv,{variant:"subheadDefault",multiline:!1,children:"Store sensitive information securely using Secrets."}),(0,c.tZ)(k.xv,{css:[G.l0.textAlign.center,G.l0.mt(8),G.l0.color],multiline:!1,children:(0,c.tZ)("a",{href:"https://docs.replit.com/programming-ide/workspace-features/secrets#how-replit-keeps-your-secrets-safe",target:"_blank",rel:"noopener",children:"How does Replit keep my Secrets safe?"})})]}):null,(0,c.tZ)(eg,{secrets:S,onUpdateSecret:z,onDeleteSecret:j,onAddSecret:F,showAddSecret:D,onClose:B}),w&&Y?(0,c.tZ)(ey,{secrets:S,activeFile:w}):null]}):(0,c.tZ)(T.G,{css:[G.l0.center,G.l0.coverContainer],children:(0,c.tZ)(L.Z,{size:24})})}},66995:function(e,t,n){n.d(t,{tr:function(){return U}});var r=n(39698),i=n(32477),o=n(8182),a=n(43429),l=n(30084),c=n(29287),s=n(56596),u=n(51384),d=n(50451),f=n(57468),h=n(19659),p=n(9331),m=n(72676),v=n(54916),g=n(21488),y=n(93918),b=n(25632),Z=n(1415),w=n(91608),x=n(22487),C=n(38080),_=n(93496),S=n(39756);function E(e){var t=e.node;return t.type===l.Tv.Directory?(0,o.tZ)(d.Z,{size:16}):(0,o.tZ)(f.Z,{size:16,path:t.path})}var k=(0,w.$)(["menuY","menuX"]),T=k.cssVars,R=k.styleTokens,D=(0,y.X)({root:[c.l0.maxHeight(400),c.l0.position.absolute,c.l0.borderRadius(8),c.l0.shadow(3),{border:"1px solid",borderColor:c.TV.outlineDefault,top:R.menuY,left:R.menuX,"& > div":[c.l0.maxHeight(400)]}]}),I=(0,u.iv)([_.gU.nofill,{transitionProperty:"background-color, box-shadow, opacity",opacity:.8,":focus":{zIndex:1,opacity:1}}]),G={button:(0,u.iv)([c.l0.reset.button,c.l0.p(2),c.l0.rowWithGap(4),c.l0.align.center,I]),text:(0,u.iv)({fontSize:c.TV.fontSizeSmall})},B={opacity:1};function A(e){var t,n=e.node,l=e.openFile,c=e.expandable,u=void 0===c||c,d=(0,i._)((0,a.useState)(!1),2),f=d[0],p=d[1],m=(0,a.useRef)(null),v=(0,x.Z)(function(e){var t;!f||e.target instanceof HTMLElement&&(null===(t=m.current)||void 0===t?void 0:t.contains(e.target))||p(!1)},[f]),g=(0,a.useId)(),y=(0,a.useId)(),b=(0,h.Il)(n.path)||S.Ql,w=(0,h.UO)(n.path);function _(){var e,t=null===(e=m.current)||void 0===e?void 0:e.getBoundingClientRect();t&&u&&p({x:t.x+"px",y:t.y+t.height+4+"px"})}return(0,o.BX)(o.HY,{children:[(0,o.BX)(s.G,{innerRef:m,tag:"button",id:g,style:f?B:void 0,"aria-haspopup":"true","aria-expanded":!!f,"aria-controls":y,css:G.button,onClick:function(){u&&(f?p(!1):_())},onKeyDown:function(e){switch(e.key){case" ":case"Enter":case"ArrowDown":if(!u)return;_()}},children:[(0,a.cloneElement)((0,o.tZ)(E,{node:n}),{size:12}),(0,o.tZ)(s.G,{css:G.text,children:w})]}),f&&u?(0,o.tZ)(Z.h,{children:(0,o.tZ)(C.Tg,{id:y,css:D.root,innerRef:v,style:(t={},(0,r._)(t,T.menuX,f.x),(0,r._)(t,T.menuY,f.y),t),onKeyDown:function(e){if("Escape"===e.key){var t;p(!1),null===(t=m.current)||void 0===t||t.focus()}},children:(0,o.tZ)(P,{openFile:l,parentPath:b,currentPath:n.path})})}):null]})}function P(e){var t=(0,v.Z)().fs,n=(0,b.Gn)("fontSize").preferences,r=(0,g.T)(!0),i=(0,a.useCallback)(function(e){return!r(e.filename)},[r]),l=(0,m.p)({fs:t,filter:i,focusedPath:e.currentPath,fontSize:n.fontSize,root:e.parentPath,manageWidth:!0,onFileSelect:function(t){var n=t.path;e.openFile(n)},alwaysShowCreateRow:!0});return(0,o.tZ)(m.s,{store:l.store})}var N=(0,u.iv)([c.l0.flex.row,c.l0.align.center,c.l0.height("100%"),c.l0.px(2)]),U=(0,a.memo)(function(e){var t,n,r=e.path,i=e.onFileClick,c=e.expandable,u=void 0===c||c,d=e.children,f=(n=(t=r.split("/")).length,t.map(function(e,r){return{type:r===n-1?l.Tv.File:l.Tv.Directory,path:t.slice(0,r+1).join("/")}}));return(0,o.BX)(s.G,{css:N,children:[f.map(function(e){return(0,o.BX)(a.Fragment,{children:[(0,o.tZ)(A,{node:e,openFile:i,expandable:u}),e.type===l.Tv.Directory?(0,o.tZ)(p.Z,{size:12}):null]},CSS.escape(e.path))}),d||null]})})},12506:function(e,t,n){n.d(t,{VY:function(){return B},HK:function(){return P},h4:function(){return R},Qc:function(){return I},H4:function(){return N},$E:function(){return A},Mp:function(){return U}});var r=n(34142),i=n(87682),o=n(8182),a=n(29287),l=n(56596),c=n(51384),s=n(66995),u=n(43429),d=n(52902),f=n(94106),h=n.n(f),p=n(50199),m=n(80259),v=n(5344),g=n(10041),y=n(38806),b=n(8017),Z=n(42463),w=n(58091),x=n(54916),C=n(24227),_=n(48728),S=n(19659);function E(){return(E=(0,r._)(function(e,t){var n,r,o,a,l;return(0,i.Jh)(this,function(i){return n=(0,S.yC)(e),r=(0,S.UO)(e),o=new Blob([t.toBuffer()],{type:n}),(a=document.createElement("a")).download=r,l=window.URL.createObjectURL(o),a.href=l,a.style.display="none",document.body.appendChild(a),a.click(),setTimeout(function(){document.body.removeChild(a),URL.revokeObjectURL(l)},1e4),[2]})})).apply(this,arguments)}var k=n(52682),T=(0,c.iv)([a.l0.height(28),a.l0.flex.row,a.l0.align.center,{borderBottom:"1px solid ".concat(a.TV.backgroundHigher),opacity:.8,":hover":{opacity:1}}]);function R(e){return"/replEnvironmentDesktop"!==h().pathname?null:(0,o.tZ)(l.G,{css:T,children:e.children})}var D=(0,c.iv)([a.l0.flex.row,a.l0.align.center,a.l0.flex.growAndShrink(1),a.l0.overflowX("auto"),a.l0.height("100%"),{"&::-webkit-scrollbar":{height:0},scrollbarWidth:"none"}]);function I(e){return(0,o.tZ)(l.G,{css:D,children:e.children})}var G=(0,c.iv)([a.l0.flex.growAndShrink(1),a.l0.position.relative,a.l0.overflow("hidden"),a.l0.borderRadius(0,0,8,8)]);function B(e){return(0,o.tZ)(l.G,{css:[G,e.children&&a.l0.center],children:e.children})}function A(e){return{type:(0,d.Dp)({path:e}),data:{path:e}}}function P(e){var t=e.path,n=e.performPaneOperation,r=(0,u.useCallback)(function(e){n({operation:"replace",pane:A(e)})},[n]);return(0,o.tZ)(R,{children:(0,o.tZ)(I,{children:(0,o.tZ)(s.tr,{path:t,onFileClick:r})})})}function N(e,t){return{match:m.pl,data:{label:"Download",icon:(0,o.tZ)(Z.Z,{}),type:"action",run:function(){return(0,r._)(function(){var n;return(0,i.Jh)(this,function(r){switch(r.label){case 0:return[4,t.readFile(e)];case 1:if((n=r.sent()).error)return[2,{type:"error",message:"Error downloading file"}];return[4,function(e,t){return E.apply(this,arguments)}(e,n.content)];case 2:return r.sent(),[2]}})})()}}}}function U(e){var t=e.path,n=e.performPaneOperation,l=(0,x.Z)(),c=(0,w._o)();return(0,p.Z)(function(){var e,s;return t?[{match:m.pl,data:{label:"Copy file path",icon:(0,o.tZ)(_.Z,{}),type:"action",run:function(){(0,g.Z)(t)}}},{match:m.pl,data:{label:"Copy link",icon:(0,o.tZ)(b.Z,{}),type:"action",run:function(){var e=(0,y.dr)({path:t});(0,g.Z)(e)}}},(e=l.fs,s=function(e){n({operation:"replace",pane:{type:(0,d.Dp)({path:e}),data:{path:e}}})},{match:m.pl,data:{label:"Duplicate file",icon:(0,o.tZ)(v.Z,{}),type:"action",run:function(){return(0,r._)(function(){var n;return(0,i.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,(0,C.Z)(t,e)];case 1:return n=r.sent(),[3,3];case 2:return r.sent(),[2,{type:"error",message:"Error duplicating file"}];case 3:return s(n),[2]}})})()}}}),N(t,l.fs),{match:m.pl,data:{label:"Delete",icon:(0,o.tZ)(k.Z,{color:a.TV.redDefault}),type:"action",run:function(){c(t)}}}]:null},[t,l.fs,n,c])}},85267:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(8182);n(43429);var i=n(19659),o=n(74833),a=n(56596),l=n(29287),c=n(1498),s=n(39469);function u(e){var t,n=e.paths,u=e.onCancel,d=e.onConfirm;return(0,r.BX)(a.G,{css:[l.l0.colWithGap(24)],children:[(0,r.tZ)(o.h4,{level:1,variant:"headerDefault",children:n.length>1?"Overwrite files?":"Overwrite file?"}),(0,r.BX)(o.xv,{children:[(t=(t=n).map(i.UO)).length<2?t[0]:"".concat(t.slice(0,-1).join(", ")," and ").concat(t.slice(-1))," already"," ",n.length>1?"exist":"exists"," in the destination, are you sure you want to overwrite ",n.length>1?"them":"it","? This cannot be undone."]}),(0,r.BX)(a.G,{css:[l.l0.rowWithGap(12),l.l0.justify.end],children:[(0,r.tZ)(c.zx,{onClick:function(){return u()},text:"Cancel"}),(0,r.tZ)(c.zx,{colorway:"negative",onClick:function(){return d()},text:"Yes, overwrite ".concat(n.length>1?"these files":"this file"),iconLeft:(0,r.tZ)(s.Z,{})})]})]})}},43409:function(e,t,n){n.d(t,{As:function(){return eR},v0:function(){return eI}});var r=n(45903),i=n(8182),o=n(29287),a=n(74833),l=n(56596),c=n(88936),s=n(43429),u=n(7730),d=n.n(u),f=n(78055),h=n(32477),p=n(59868),m=n(15146),v=n(1652),g=n(13660),y=n(36461),b=n(65434),Z=n(34815),w=n(75582),x=n(93295),C=n(23982),_=n(72986);function S(){var e=(0,x._)(["\n  mutation AIFeedback($input: CodexFeedback2Input!) {\n    giveCodexFeedback2(input: $input) {\n      ... on CodexFeedback2 {\n        id\n        __typename\n      }\n      ... on UnauthorizedError {\n        __typename\n      }\n      ... on NotFoundError {\n        __typename\n      }\n    }\n  }\n"]);return S=function(){return e},e}var E={},k=(0,C.Ps)(S()),T=n(92815),R=function(e){var t=e.provideFeedback;return(0,i.BX)(l.G,{css:[o.l0.rowWithGap(4),o.l0.align.center],children:[(0,i.tZ)(m.hU,{alt:"Helpful",colorway:"positive",children:(0,i.tZ)(y.Z,{css:{"&:not(:hover)":[o.l0.color.foregroundDimmer]},onClick:function(){return t(w.TY.Yes)}})}),(0,i.tZ)(m.hU,{alt:"Unhelpful",colorway:"negative",children:(0,i.tZ)(v.Z,{css:{"&:not(:hover)":[o.l0.color.foregroundDimmer]},onClick:function(){return t(w.TY.No)}})})]})},D=function(e){return e.feedback===w.TY.Yes?(0,i.tZ)(b.Z,{}):(0,i.tZ)(g.Z,{})};function I(e){var t,n=e.inferenceId,o=e.inferenceClass,a=(0,h._)((0,s.useState)(null),2),l=a[0],c=a[1],u=(0,T.v)(),d=(0,h._)((t=(0,r._)({},E,void 0),_.D(k,t)),2),f=d[0];return d[1].error?(0,i.tZ)(Z.Z,{}):(0,i.tZ)(i.HY,{children:l?(0,i.tZ)(D,{feedback:l}):(0,i.tZ)(R,{provideFeedback:function(e){o===w.Sg.Chat&&(0,p.j)(p.U3.GHOSTWRITER_CHAT_FEEDBACK_SUBMITTED,{feedback:e}),f({variables:{input:{feedback:e,inferenceClass:o,inferenceId:n}}}),c(e),u(!0)}})})}var G=n(96546),B=n.n(G),A=n(84657),P=n(45434),N=n(20573),U=n(50199),L=n(20766),O=n(83898),M=n(22580),X=n(48272),F=n(92101),W=n(93918),H=n(2038),V=n(1498),z=n(60769),j=n(30983),q=n(64992),Y=n(25e3),$=n(26);function J(e){return(0,i.tZ)($.Z,(0,Y._)((0,r._)({viewBox:"0 0 13 12"},e),{children:(0,i.tZ)("path",{d:"M6.25 0.721688C6.4047 0.632371 6.5953 0.632371 6.75 0.721688L10.9462 3.14434C11.1009 3.23365 11.1962 3.39872 11.1962 3.57735V8.42265C11.1962 8.60128 11.1009 8.76635 10.9462 8.85566L6.75 11.2783C6.5953 11.3676 6.4047 11.3676 6.25 11.2783L2.05385 8.85566C1.89915 8.76635 1.80385 8.60128 1.80385 8.42265V3.57735C1.80385 3.39872 1.89915 3.23365 2.05385 3.14434L6.25 0.721688Z",fill:"#5239CC",stroke:"#795EFF"})}))}var K=n(97615),Q=n(21113),ee=n(87001),et=(0,W.X)({footerContainer:[o.l0.rowWithGap(8),o.l0.flex.wrap],retryButton:[o.l0.width(100),{"@keyframes slideLeft":{"0%":{paddingLeft:30},"100%":{paddingLeft:8}},"@keyframes slideRight":{"0%":{paddingLeft:8},"100%":{paddingLeft:30}}}]}),en=function(e){var t,n=e.onRetry,r=e.limitReached,a=(0,h._)((0,Q.Ni)(),2),c=a[0],u=a[1],d=(0,s.useRef)(!1),f=(0,H.T3)(),v="advanced"===c&&!r,g=(0,s.useId)(),y=(0,Q.Lw)();t=!d.current||r?void 0:v?"slideLeft 300ms ease-out":"slideRight 300ms ease-out";var b=(0,i.BX)(i.HY,{children:[(0,i.tZ)(z.X,{onChange:function(e){d.current||(d.current=!0),(0,p.j)(p.U3.GHOSTWRITER_CHAT_MODEL_CHANGED,{source:"footer",model:e.target.checked?"advanced":"default"}),u(e.target.checked?"advanced":"basic")},id:g,disabled:r,checked:!r&&v}),(0,i.tZ)("label",{htmlFor:g,css:r?[o.l0.color.foregroundDimmer]:void 0,children:"Advanced model"})]}),Z=y?"You have reached the weekly limit.":"Upgrade to Replit ".concat(ee.we," for the advanced model");return(0,i.BX)(l.G,{css:[o.l0.rowWithGap(8),o.l0.flex.growAndShrink(1),{justifyContent:"flex-end"}],children:["advanced"!==c||d.current?(0,i.BX)(l.G,{css:[o.l0.rowWithGap(8),o.l0.align.center],children:[r?(0,i.tZ)(j.u,{tooltip:Z,children:(0,i.tZ)(l.G,{css:[o.l0.rowWithGap(8)],children:b})}):b,f?null:(0,i.tZ)(m.hU,{alt:r?Z:"Useful for more complex, vague, or creative requests.",size:24,children:(0,i.tZ)(K.Z,{})})]}):null,(0,i.tZ)(V.zx,{css:[et.retryButton,{paddingLeft:v?8:30,animation:t}],variant:"outlined",iconLeft:(0,i.tZ)(q.Z,{}),iconRight:(0,i.tZ)(J,{css:[{transition:"opacity 300ms ease-out",opacity:v?1:0}]}),text:"Retry",onClick:function(e){return n(!!v)}})]})},er=function(e){var t=e.onRetry,n=e.limitReached;return(0,i.tZ)(l.G,{css:et.footerContainer,children:(0,i.tZ)(en,{onRetry:t,limitReached:n})})},ei=n(99741),eo=n(67313),ea=function(e){var t=e.isOpen,n=e.onToggle,r=t?(0,i.tZ)(eo.Z,{}):(0,i.tZ)(ei.Z,{});return(0,i.tZ)(V.zx,{variant:"outlined",text:"Send feedback",iconRight:r,onClick:function(){(0,p.j)(p.U3.GHOSTWRITER_CHAT_INLINE_FEEDBACK_TOGGLED,{state:t?"closed":"opened"}),n()}})},el=n(18836);function ec(){var e=(0,x._)(["\n  mutation GiveChatGhostwriterFeedback($input: WorkflowFeedbackInputType!) {\n    giveWorkflowFeedback(input: $input) {\n      ... on WorkflowFeedbackOutputType {\n        __typename\n        id\n      }\n      ... on UnauthorizedError {\n        __typename\n        message\n      }\n      ... on UserError {\n        __typename\n        message\n      }\n      ... on TooManyRequestsError {\n        __typename\n        message\n      }\n    }\n  }\n"]);return ec=function(){return e},e}var es={},eu=(0,C.Ps)(ec()),ed=n(55534),ef=n(66820),eh=n(8279),ep=n(50782),em=(0,W.X)({wrapper:[o.l0.colWithGap(8)],textInput:[[o.l0.flex.growAndShrink(1),o.l0.width("100%"),o.l0.height(64),{resize:"none"}]],buttonGroup:[o.l0.rowWithGap(8),o.l0.justify.end]}),ev=function(e){var t,n=e.isOpen,a=e.message,u=e.closeFeedback,d=(0,h._)((0,s.useState)(""),2),f=d[0],m=d[1],v=(0,ed.Z)().showError,g=(0,O.zu)(),y=(0,ef.nS)(),b=(0,ep.Z)(),Z=(0,H.T3)(),w=(0,h._)((t=(0,r._)({},es,{onError:function(){v("Unable to provide feedback")},onCompleted:function(e){var t;(null===(t=e.giveWorkflowFeedback)||void 0===t?void 0:t.__typename)!=="WorkflowFeedbackOutputType"?v(e.giveWorkflowFeedback.message):(y({message:a,feedback:f}),m(""),u())}}),_.D(eu,t)),2),x=w[0],C=w[1].loading,S=(0,s.useCallback)(function(){(0,p.j)(p.U3.GHOSTWRITER_CHAT_INLINE_FEEDBACK_CANCELLED),u()},[u]),E=(0,s.useCallback)(function(){0!==f.length&&((0,p.j)(p.U3.GHOSTWRITER_CHAT_INLINE_FEEDBACK_SUBMITTED),x({variables:{input:{ghostwriterChatFeedback:{chatHistory:JSON.stringify(g),feedback:f,metadata:JSON.stringify({messageId:a.inferenceId,replId:b,chatMessageId:a.id,isMobile:Z})}}}}))},[g,x,Z,a.id,a.inferenceId,b,f]);if(!n)return null;var k=C?eh.p.backgroundPulse(o.TV.accentPrimaryDimmest,o.TV.accentPrimaryDimmer):null;return(0,i.BX)(l.G,{css:em.wrapper,children:[(0,i.tZ)(el.B,{css:[em.textInput],maxLength:5e3,autoFocus:!0,inputMode:"text",placeholder:"Let us know how we can improve this response",value:f,onChange:function(e){m(e.target.value)},onKeyDown:function(e){if("Escape"===e.key&&!C){S();return}"Enter"!==e.key||e.shiftKey||(e.stopPropagation(),E())}}),(0,i.BX)(l.G,{css:em.buttonGroup,children:[(0,i.tZ)(V.zx,{variant:"outlined",text:"Cancel",disabled:C,onClick:S}),(0,i.tZ)(V.zx,{css:k,iconLeft:C?(0,i.tZ)(c.Z,{}):void 0,text:C?"Submitting...":"Submit",disabled:C,colorway:"primary",onClick:E})]})]})},eg=n(4736),ey=n(67914),eb=n(19408),eZ=n(25934),ew=n(73030),ex=n(19615),eC=(0,W.X)({root:[o.l0.px(8),o.l0.py(12),o.l0.colWithGap(8)],header:[o.l0.rowWithGap(8),o.l0.align.center],headerLeft:[o.l0.flex.growAndShrink(1),o.l0.rowWithGap(8),o.l0.align.center],intent:[o.l0.rowWithGap(4),o.l0.align.center,o.l0.color.foregroundDimmest],intentSelect:[o.l0.color.foregroundDimmer,{backgroundColor:"transparent",padding:4,height:"auto","& div":o.l0.rowWithGap(4),"& div > span":{fontSize:o.TV.fontSizeSmall},"& div > svg":{width:"12px !important",height:"12px !important",minWidth:"12px !important",minHeight:"12px !important"}}],message:[o.l0.colWithGap(8),o.l0.flex.growAndShrink(1)],footerContainer:[o.l0.rowWithGap(4),o.l0.justify.spaceBetween,o.l0.flex.wrapReverse]}),e_=new Map([["GENERATE",(0,i.tZ)(eZ.Z,{},"generate")],["EXPLAIN",(0,i.tZ)(eb.Z,{},"explain")],["TRANSFORM",(0,i.tZ)(ey.Z,{},"transform")]]),eS=[{title:"Ask chat",value:"NONE"},{title:"Generate code",value:"GENERATE"},{title:"Explain code",value:"EXPLAIN"},{title:"Edit code",value:"TRANSFORM"},{title:"Ask Replit docs",value:"REPLIT_DOCS"}].map(function(e){return(0,r._)({icon:e_.get(e.value)||(0,i.tZ)(ew.Z,{})},e)}).sort(function(e,t){return e.title.localeCompare(t.title)}),eE=B()(function(){return n.e(4989).then(n.bind(n,54989))},{loadableGenerated:{webpack:function(){return[54989]}}}),ek=function(){return(0,i.BX)(l.G,{css:[o.l0.color.accentNegativeStronger,o.l0.flex.row,o.l0.rowWithGap(4),o.l0.align.center],children:[(0,i.tZ)(N.Z,{}),(0,i.tZ)(a.xv,{children:"Response reached maximum output length"})]})},eT=(0,W.X)({root:[o.l0.rowWithGap(4),o.l0.align.center,o.l0.color.foregroundDimmest]}),eR=function(e){var t=e.intent,n=eS.find(function(e){return e.value===t});return n?(0,i.BX)(l.G,{css:eT.root,children:[n.icon,(0,i.tZ)(a.xv,{variant:"small",color:"dimmest",children:n.title})]}):null},eD=function(e){var t=e.id,n=e.intent,r=e.regenerate,o=(0,O.gp)(),a="NONE"===n?null:eS.find(function(e){return e.value===n}),l=eS.filter(function(e){return e.value!==n});return(0,i.tZ)(X.P,{"aria-label":"Reclassify message",items:l,disabled:o,css:eC.intentSelect,placeholder:"Select action",selectedItem:a,onChange:function(e){(0,P.J1)(e.value)&&((0,p.j)(p.U3.GHOSTWRITER_CHAT_INTENT_RECLASSIFIED,{from:n,to:e.value}),r({responseId:t,action:e.value}))}})},eI=(0,s.memo)(function(e){var t=e.message,n=e.autoScroll,r=e.isLastAssistantMessage,u=void 0!==r&&r,d=t.text,h=t.loading,m=t.error,v=t.inferenceId,g=t.stopReason,y=(0,O.Gd)(),b=(0,L.d$)(),Z=!!(t.stopReason||t.aborted),x=(0,H.T3)(),C=(0,eg.ll)(),_=(0,eg.Tt)(),S=((t.tokenUsage||_)&&Z||t.aborted||t.error)&&u,E=(Z||void 0!==t.error)&&void 0!==v&&u,k=(0,T.M)(),R=(0,T.v)(),D=(0,s.useRef)(null),G=(0,A.rM)();(0,s.useLayoutEffect)(function(){n&&D.current&&requestAnimationFrame(function(){n&&D.current&&((0,f.Z)(D.current,{skipOverflowHiddenElements:!0,behavior:"auto",scrollMode:"always"}),G(!0))})},[d,n,G,S,k]);var B=(0,U.Z)(function(){return(0,F.BW)(t.id)},[t.id]);if("transformCode"===t.type&&!b)return null;var P="TRANSFORM"===t.intent?void 0:B,N="NONE"!==t.intent;return(0,i.BX)(l.G,{css:eC.root,children:[(0,i.tZ)(l.G,{css:eC.header,children:(0,i.BX)(l.G,{css:eC.headerLeft,children:[(0,i.tZ)(ex.R,{advanced:t.useAdvancedModel}),t.intent?(0,i.tZ)(l.G,{css:eC.intent,children:u?(0,i.tZ)(eD,{intent:t.intent,id:t.id,regenerate:y}):N&&(0,i.tZ)(eR,{intent:t.intent})}):null]})}),(0,i.BX)(l.G,{children:[h?(0,i.tZ)(c.Z,{}):null,(0,i.tZ)(l.G,{css:eC.message,children:(0,i.tZ)(M.J,{text:d,codeComponent:P})})]}),"string"==typeof m?(0,i.tZ)(l.G,{children:(0,i.tZ)(a.xv,{css:[o.l0.color.accentNegativeStronger,o.l0.fontSize(16)],children:m})}):null,"maxTokens"===g?(0,i.tZ)(ek,{}):null,(0,i.BX)(l.G,{css:eC.footerContainer,children:[E?(0,i.BX)(l.G,{css:[o.l0.rowWithGap(4)],children:[x?null:(0,i.tZ)(ea,{isOpen:k,onToggle:function(){return R(!k)}}),(0,i.tZ)(l.G,{css:[o.l0.rowWithGap(8),o.l0.align.center],children:(0,i.tZ)(I,{inferenceClass:w.Sg.Chat,inferenceId:v})})]}):null,S?(0,i.tZ)(er,{limitReached:!C,onRetry:function(e){(0,p.j)(p.U3.GHOSTWRITER_CHAT_RESPONSE_REGENERATED,{isAdvancedModel:e,timesRegenerated:(t.timesRegenerated||0)+1}),y({responseId:t.id,action:t.intent})}}):null]}),(0,i.tZ)(ev,{isOpen:E&&k,closeFeedback:function(){return R(!1)},message:t}),b?(0,i.tZ)(eE,{message:t}):null,n?(0,i.tZ)(l.G,{css:{marginTop:-8,marginBottom:0},innerRef:D}):null]})},function(e,t){return t.autoScroll===e.autoScroll&&t.isLastAssistantMessage===e.isLastAssistantMessage&&d()(t.message,e.message)})},22580:function(e,t,n){n.d(t,{J:function(){return m}});var r=n(45903),i=n(8182),o=n(68333),a=n(74833),l=n(56596),c=n(43429),s=n(8070),u=n(46299),d=[n(85768).Z,u.Z,s.Z],f=[],h=function(e){return(0,i.tZ)(l.G,{children:(0,i.tZ)(a.xv,{children:e.children})})},p={h1:h,h2:h,h3:h,h4:h,h5:h,h6:h},m=(0,c.memo)(function(e){var t=e.text,n=e.codeComponent;return(0,i.tZ)(o.ZP,{remarkPlugins:d,rehypePlugins:f,components:(0,r._)({},p,n?{code:n}:void 0),lineBreaks:!0,themed:!0,children:t})})},92101:function(e,t,n){n.d(t,{BW:function(){return I}});var r=n(45903),i=n(8182),o=n(57468),a=n(74833),l=n(56596),c=n(29287),s=n(73164),u=n(53326),d=n(32477),f=n(93918),h=n(1498),p=n(43429),m=n(51384),v=n(2532),g=n(10041),y=n(5344),b=n(59868),Z=n(30983),w=n(64992),x=(0,m.F4)({"0%":{opacity:0,transform:"translateX(8px)"},"10%":{opacity:1,transform:"translateX(0)"},"95%":{opacity:1},"100%":{opacity:0}}),C=(0,f.X)({buttonContainer:[c.l0.position.relative,{transition:"opacity 75ms linear",opacity:1}],buttonWrapper:[c.l0.flex.row],button:[c.l0.backgroundColor.backgroundDefault],buttonToast:{position:"absolute",display:"block",bottom:"100%",paddingBottom:c.TV.space4,paddingRight:c.TV.space8,animation:"".concat(x," 3s"),fontFamily:c.TV.fontFamilyDefault,fontSize:c.TV.fontSizeDefault,whiteSpace:"nowrap",userSelect:"none"}}),_=function(e){var t=e.code,n=e.language,r=(0,d._)((0,p.useState)(!1),2),o=r[0],a=r[1];return(0,i.BX)("div",{css:C.buttonContainer,children:[o?(0,i.tZ)("span",{css:C.buttonToast,onAnimationEnd:function(){requestAnimationFrame(function(){a(!1)})},"aria-hidden":!0,children:"Copied!"}):null,(0,i.tZ)(h.zx,{css:C.button,text:"Copy",size:"small",iconLeft:(0,i.tZ)(y.Z,{}),onClick:function(){(0,b.j)(b.U3.GHOSTWRITER_CHAT_CODE_COPIED,{language:n}),(0,g.Z)(t),a(!0)}})]})},S=function(e){var t=e.code,n=e.disabled,r=e.insertCode,o=(0,d._)((0,p.useState)(!1),2),a=o[0],l=o[1],c=(0,i.tZ)(h.zx,{css:C.button,text:"Insert",disabled:n,size:"small",iconLeft:(0,i.tZ)(v.Z,{}),onClick:function(){r&&(r(t),l(!0))}});return(0,i.BX)("div",{css:C.buttonContainer,children:[a?(0,i.tZ)("span",{css:C.buttonToast,onAnimationEnd:function(){requestAnimationFrame(function(){l(!1)})},"aria-hidden":!0,children:"Inserted!"}):null,(0,i.tZ)(Z.u,{placement:"bottom",tooltip:n?"Place cursor in a file to insert code":"Insert code at cursor position",children:c})]})},E=function(e){var t=e.revertCodeInsert,n=(0,d._)((0,p.useState)(!1),2),r=n[0],o=n[1],a=(0,i.tZ)(h.zx,{css:C.button,text:"Revert",size:"small",iconLeft:(0,i.tZ)(w.Z,{}),onClick:function(){t(),o(!0)}});return(0,i.BX)("div",{css:C.buttonContainer,children:[r?(0,i.tZ)("span",{css:C.buttonToast,onAnimationEnd:function(){requestAnimationFrame(function(){o(!1)})},"aria-hidden":!0,children:"Reverting..."}):null,(0,i.tZ)(Z.u,{placement:"bottom",tooltip:"Revert code insertion",children:a})]})},k=n(38080),T=n(6079),R=n(58091),D=n(29217),I=function(e){return function(t){return B(t,e)}},G=(0,f.X)({root:[c.l0.borderRadius(4),c.l0.border({color:c.TV.outlineDimmest})],header:[c.l0.rowWithGap(8),c.l0.border({color:c.TV.outlineDimmest,direction:"bottom"}),{fontFamily:c.TV.fontFamilyDefault}],headerLeft:[c.l0.rowWithGap(0),c.l0.pl(4),c.l0.flex.growAndShrink(1),c.l0.align.center],headerRight:[c.l0.rowWithGap(0),{"& button":{borderRadius:0},"& > div:last-of-type button":{borderTopRightRadius:4}}],blockStyles:{backgroundColor:"transparent"}}),B=function(e,t){if(e.inline)return(0,i.tZ)(u.Z,(0,r._)({},e));var n=(0,u.F)(e.className),d=n&&function(e){switch(e){case"crystal":return"main.cr";case"python":case"py":return"main.py";case"sh":case"fish":case"zsh":case"bash":return"main.sh";case"javascript":case"js":return"index.js";case"typescript":case"ts":return"index.ts";case"csharp":case"cs":return"main.cs";case"java":return"Main.java";case"go":return"main.go";case"ruby":case"rb":return"main.rb";case"php":return"main.php";case"rust":return"main.rs";case"swift":return"main.swift";case"kotlin":return"main.kt";case"scala":return"main.scala";case"c":return"main.c";case"cpp":case"c++":return"main.cpp";case"dart":return"main.dart";case"elixir":return"main.ex";case"haskell":return"Main.hs";case"lua":return"main.lua";case"perl":return"main.pl";case"r":return"main.r";case"sql":return"main.sql";case"ocaml":return"main.ml";case"html":return"index.html";case"json":return"main.json";case"css":return"main.css";default:return}}(n),f=d?s.$R.from(d):void 0,h=null==f?void 0:f.name,p=String(e.children);return(0,i.BX)(k.Tg,{css:G.root,children:[(0,i.BX)(l.G,{css:G.header,children:[(0,i.BX)(l.G,{css:G.headerLeft,children:[d?(0,i.tZ)(o.Z,{size:12,path:d}):null,h?(0,i.tZ)(a.xv,{multiline:!1,css:[c.l0.pl(4),c.l0.fontSize(12),c.l0.color.foregroundDimmer],children:h}):null]}),(0,i.BX)(l.G,{css:G.headerRight,children:[(0,i.tZ)(_,{code:p,language:n}),(0,i.tZ)(N,{messageId:t,code:p,language:n})]})]}),(0,i.tZ)(u.Z,(0,r._)({blockStyles:G.blockStyles,disableCopy:!0},e))]})},A=function(e){(0,b.j)(b.U3.GHOSTWRITER_CHAT_CODE_INSERTED,{language:e})},P=function(){(0,b.j)(b.U3.GHOSTWRITER_CHAT_CODE_INSERT_REVERTED)},N=function(e){var t=e.code,n=e.messageId,r=e.language,o=(0,T.$L)(),a=o.onInsertCode,l=o.onRevertCode,c=(0,R.R3)(),s=(0,R.ex)(),u=(0,D.$0)();return(0,T.y6)(n)?(0,i.tZ)(E,{revertCodeInsert:function(){l(P),u(null)}}):(0,i.tZ)(S,{code:t,disabled:!(null!=c?c:s),insertCode:function(){a({toInsert:t,onInsert:function(){return A(r)}}),n&&u(n)}})}},24796:function(e,t,n){n.d(t,{r:function(){return c}});var r=n(8182),i=n(74833),o=n(56596),a=n(76588),l=n(29287);function c(e){var t=e.textVariant;return(0,r.BX)(i.xv,{variant:t,children:["AI Chat is currently unavailable. For more information, visit"," ",(0,r.tZ)("a",{href:"https://status.replit.com",target:"_blank",children:"our status page."})]})}t.Z=function(e){var t=e.textVariant,n=e.showImage;return(0,r.BX)(o.G,{css:[l.l0.center,l.l0.textAlign.center,l.l0.px(16),l.l0.colWithGap(8),l.l0.flex.growAndShrink(1)],children:[(0,r.tZ)(c,{textVariant:t}),n?(0,r.tZ)(a.Z,{src:"/public/images/ghostwriter/orb.png",css:[{userSelect:"none",mixBlendMode:"screen",filter:"brightness(110%) saturate(1.2)",maskImage:"linear-gradient(".concat(l.TV.backgroundRoot,", transparent)")}],width:200,height:200,objectFit:"contain","aria-hidden":"true",alt:"",draggable:!1}):null]})}},6079:function(e,t,n){n.d(t,{$L:function(){return d},$h:function(){return u},y6:function(){return f}});var r=n(32477),i=n(29217),o=n(52902),a=n(58091),l=n(76568),c=n(34581),s=n(43429);function u(){var e=(0,i.n3)(),t=(0,i.PM)(),n=(0,c.Vu)();(0,s.useEffect)(function(){e&&(n.includes(e)||t(null))},[e,n,t])}var d=function(){var e,t,n=(0,a.R3)(),u=(0,c.ex)(),d=(0,i.PM)(),f=null!=n?n:u,h=(e=(0,c.nC)(),t=(0,l.dr)(),(0,s.useCallback)(function(n){if(!n)return null;var i=e().find(function(e){var t=(0,r._)(e,2),i=(t[0],t[1]);return(0,o.Ur)(i)&&i.data.path===n});if(!i)return null;var a=t(i[0]);if((null==a?void 0:a.type)!=="codeEditor")throw Error("Expected code editor pane to insert into");if(!a||!a.insertGhostwriterChatCode||!a.revertGhostwriterChatCode)throw Error("Expected ghostwriter pane bindings");return{insert:a.insertGhostwriterChatCode,revert:a.revertGhostwriterChatCode}},[t,e]));return{onInsertCode:(0,s.useCallback)(function(e){var t=e.toInsert,n=e.overwrite,r=e.onInsert,i=h(f);i&&(i.insert(t,n),d(f),null==r||r())},[h,f,d]),onRevertCode:(0,s.useCallback)(function(e){var t=h(f);t&&(t.revert(),d(null),null==e||e())},[f,h,d])}},f=function(e){var t=(0,i.n3)(),n=(0,i.U4)();return!!e&&t&&n&&n===e}},35515:function(e,t,n){n.d(t,{I:function(){return s}});var r=n(34142),i=n(87682),o=n(99149),a=n(74044);n(34471),a.Dy.Object({replId:a.Dy.String({format:"uuid"})});var l=a.Dy.Object({token:a.Dy.String()}),c=n(9384);function s(e){return u.apply(this,arguments)}function u(){return(u=(0,r._)(function(e){var t;return(0,i.Jh)(this,function(n){switch(n.label){case 0:return[4,fetch("/ai/auth",{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({replId:e})})];case 1:return[4,n.sent().json()];case 2:if(t=n.sent(),!o.B4.Check(l,t))throw(0,c.o)("Authentication to chat service failed",{detail:t});return[2,t.token]}})})).apply(this,arguments)}},9384:function(e,t,n){n.d(t,{o:function(){return i}});var r=n(48900);function i(e,t){var n=Error(e);return r.$e(function(e){e.setTag("ghostwriter-chat",!0),t&&e.setExtras(t),r.Tb(n)}),n}},78228:function(e,t,n){n.d(t,{Th:function(){return k},c8:function(){return I},fT:function(){return E}});var r=n(88032),i=n(95867),o=n(34142),a=n(5453),l=n(32477),c=n(21289),s=n(67073),u=n(87682),d=n(48900),f=n(25632),h=n(99149),p=n(50782),m=n(3590),v=n(4736),g=n(43429),y=n(27379),b=n(26572),Z=n(52297),w=n(83898),x=n(25425),C=n(9384),_=n(35515),S=n(15542),E={production:"wss://production-ai-chat.replit.com/ws",staging:"wss://staging-ai-chat.replit.com/ws",development:"ws://127.0.0.1:8000/ws"},k=function(){return(0,f.Gn)("ghostwriterChatServiceEnvironment").preferences.ghostwriterChatServiceEnvironment||E.production},T=function(e){if(h.B4.Check(Z.LD,e)||h.B4.Check(Z.t3,e))return e;throw(0,C.o)("Invalid model",{model:e})};function R(e){var t=h.B4.Convert(Z.EI,JSON.parse(e.data));if(!h.B4.Check(Z.EI,t)){var n=h.B4.Errors(Z.EI,t);throw(0,C.o)("Invalid Ghostwriter Chat service message",{errors:(0,c._)(n)})}return t}function D(e,t){return new Date(e.timeCreated).getTime()-new Date(t.timeCreated).getTime()}var I=function(){var e,t=(0,p.Z)(),n=(0,S.d)(),f=(0,m.jC)(),h=(0,w.kL)(),Z=(0,l._)((0,g.useState)(!1),2),E=Z[0],I=Z[1],G=(0,l._)((0,g.useState)(0),2),B=G[0],A=G[1],P=k(),N=(0,v.Lv)(),U=(0,l._)((0,g.useState)(function(){return(0,b.Z)()}),2),L=U[0],O=U[1],M=(0,x.P5)({controlName:"flag-blue-water-token"}),X=(0,x.P5)({controlName:"flag-ai-ws-client-2"}),F=(0,g.useCallback)((0,o._)(function(){var e,n;return(0,u.Jh)(this,function(r){switch(r.label){case 0:return[4,(0,_.I)(t)];case 1:return e=r.sent(),(n=new URL(P)).searchParams.set("authToken",e),[2,n.toString()]}})}),[P,t]),W=(0,y.ZP)(M?F:P,{shouldReconnect:function(){return B<10},reconnectInterval:function(e){var t=Math.min(1e3*Math.pow(2,Math.max(e,B)),1e4);return t+Math.floor(t/2*Math.random())},reconnectAttempts:10,onClose:function(){O((0,b.Z)()),I(!1)},onReconnectStop:function(){var e=(0,b.Z)();e.resolve(!1),O(e)},onOpen:(0,o._)(function(){return(0,u.Jh)(this,function(e){switch(e.label){case 0:if(M)return $?J():Y(),I(!0),L.resolve(!0),[2];return[4,q()];case 1:return H({authRequest:{authToken:e.sent()}},!1),[2]}})}),onError:function(e){B>=10&&(0,C.o)("Ghostwriter Chat websocket error",{endpoint:P,event:e})},onMessage:function(e){var r=R(e);r.authResponse?K(r):r.sessionCreationResponse?Q(r):r.usageQuota?en(r):r.chatReplSessions?et(r.chatReplSessions):r.invalidMessage&&(0,C.o)("Invalid request",{endpoint:P,replId:t,currentUserId:n,detail:r.invalidMessage.error})}},!X&&null!==n),H=W.sendJsonMessage,V=W.readyState,z=W.getWebSocket,j=V===y.kQ.OPEN&&E;(0,g.useEffect)(function(){if(j){var e,t=z();if(t){var n=function(){},r=!1;return(e=(0,o._)(function(){var e;return(0,u.Jh)(this,function(i){switch(i.label){case 0:if(!(!r&&t.readyState===y.kQ.OPEN))return[3,3];return[4,new Promise(function(e){var r=function(t){R(t).pong&&(n(),e({success:!0}))},i=setTimeout(function(){n(),e({success:!1})},2e3);t.addEventListener("message",r),n=function(){t.removeEventListener("message",r),clearTimeout(i),n=function(){}},H({ping:{}},!1)})];case 1:if(e=i.sent().success,r)return[2];if(!e)return t.close(),[2];return[4,new Promise(function(e){return setTimeout(e,2e4)})];case 2:return i.sent(),[3,0];case 3:return[2]}})}),function(){return e.apply(this,arguments)})(),function(){r=!0,n()}}}},[z,H,j]);var q=(0,g.useCallback)((0,o._)(function(){return(0,u.Jh)(this,function(e){return[2,(0,_.I)(t)]})}),[t]),Y=(0,g.useCallback)((0,o._)(function(){return(0,u.Jh)(this,function(e){if(!n)throw(0,C.o)("Cannot create session without a user id",{endpoint:P,replId:t});return H({sessionCreationRequest:{userId:n,replId:t}}),[2,null]})}),[n,P,t,H]),$=(0,x.P5)({controlName:"flag-gigantic-events"}),J=(0,g.useCallback)(function(){H({getReplSessionsRequest:{replId:t,includeFirstSessionEvents:!0,messagesLimit:1e3}})},[t,H]),K=(0,g.useCallback)(function(e){if(e.authResponse){if(e.authResponse.success)$?J():Y(),I(!0),L.resolve(!0),A(0);else throw A(function(e){return e+1}),(0,C.o)("Authentication failed",{endpoint:P,replId:t,currentUserId:n,detail:e.authResponse.error})}},[Y,n,P,t,A,$,J,L]),Q=(0,g.useCallback)(function(e){if(e.sessionCreationResponse){if(e.sessionCreationResponse.sessionId)f(e.sessionCreationResponse.sessionId);else throw(0,C.o)("Session creation failed",{endpoint:P,replId:t,currentUserId:n,detail:e.sessionCreationResponse.error})}},[n,P,t,f]),ee=(0,x.P5)({controlName:"flag-gigantic-events-display"}),et=(0,g.useCallback)(function(e){if(!e.sessions.length){Y();return}var t=function(e){var t=null,n=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;if(!t){t=l;continue}if(l.values.length){if(!t.values.length){t=l;continue}new Date(l.values[l.values.length-1].timeCreated)>new Date(t.values[t.values.length-1].timeCreated)&&(t=l)}}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t}(e.sessions);if(t){ee&&h((function(e){try{var t=[],n=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;if("this_message_was_retried"===l.parentEventId&&"Human"===l.role){if(t.length>1&&"Assistant"===t[t.length-1].role&&"Human"===t[t.length-2].role)t.pop(),t.pop();else throw Error("The last two messages do not have 'Assistant' and 'Human' roles.")}t.push(l)}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t}catch(t){return e}})((0,c._)(t.values).sort(D)).map(function(e){var t;return{id:e.id,text:e.content,attribution:"Human"===e.role?"Human":"Assistant",timeCreated:new Date(e.timeCreated),type:e.eventType,codeReference:e.codeReference,intent:null!==(t=e.intent)&&void 0!==t?t:"NONE"}})),f(t.sessionId);return}},[ee,Y,h,f]),en=(0,g.useCallback)(function(e){var t=e.usageQuota;t&&N({basicModelUsage:t.basicModelUsage,basicModelLimit:t.basicModelLimit,basicModelTTLEnd:1e3*t.basicLimitRefreshTime+Date.now(),advancedModelUsage:t.advancedModelUsage,advancedModelLimit:t.advancedModelLimit,advancedModelTTLEnd:1e3*t.advancedLimitRefreshTime+Date.now()})},[N]),er=(0,g.useCallback)((e=(0,o._)(function(e){var r,i,o,l,c,f,h,p,m,v,g,y,Z,w,x,_,S,k,D,I,G,B,A;return(0,u.Jh)(this,function(N){switch(N.label){case 0:return r=e.body,i=e.options,o=r.sessionId,l=r.message,c=r.chatHistory,f=r.model,h=r.context,p=r.useAdvancedModel,m={chatRequest:{sessionId:o,replId:t,message:l,chatHistory:c,model:T(f),context:h,useAdvancedModel:p}},v=[],g=(0,b.Z)(),y=!1,Z=0,w="",x=null,_=new Promise(function(e,r){x=setTimeout(function(){r((0,C.o)("Authentication timed out while sending a message",{endpoint:P,replId:t,currentUserId:n,requestId:w,finished:y,dispatched:Z,isAuthed:E,timeout:6e4}))},6e4)}),[4,Promise.race([L.promise,_])];case 1:if(N.sent(),x&&clearTimeout(x),!(S=z()))throw(0,C.o)("Websocket is not ready to send messages",{endpoint:P,isAuthed:E,replId:t,currentUserId:n,sessionId:o});return k=function(){y=!0,S.removeEventListener("message",I),S.removeEventListener("close",D)},i.abortSignal.onabort=function(){if(!w)throw(0,C.o)("Cannot abort request",{endpoint:P,replId:t,currentUserId:n});H({abortRequest:{requestId:w}})},D=function(){if(!y){var e=(0,C.o)("Request did not finished - websocket closed",{endpoint:P,replId:t,currentUserId:n,dispatched:Z});g.reject(e)}},I=function(e){e.data&&"string"==typeof e.data||g.reject((0,C.o)("Invalid Event - does not match Message Event",{event:e}));try{var r=R(e);if(r.invalidMessage&&!w)throw Error("Invalid request: ".concat(r.invalidMessage));if(r.chatResponseStart&&!w&&(w=r.chatResponseStart.requestId),r.chatResponseChunk){var i=r.chatResponseChunk;if(i.requestId!==w)return;v.push(i)}if(r.chatResponseEnd){var o,a=r.chatResponseEnd;if(a.requestId!==w)return;a.success||g.reject(Error("Chat request failed: ".concat(null!==(o=a.error)&&void 0!==o?o:"Unknown error"))),k()}if(r.abortResponse){var l=r.abortResponse;if((null==l?void 0:l.requestId)!==w)return;k()}g.resolve()}catch(e){d.$e(function(r){r.setExtra("requestId",w),r.setExtra("finished",y),r.setExtra("dispatched",Z),r.setExtra("userId",n),r.setExtra("replId",t),r.setTag("ghostwriter-chat",!0),d.Tb(e)}),g.reject(e)}},S.addEventListener("message",I),S.addEventListener("close",D),H(m),G=setTimeout(function(){var e=(0,C.o)("Message total timed out",{endpoint:P,replId:t,dispatched:Z});g.reject(e)},12e4),A=(B=function(){return setTimeout(function(){var e=(0,C.o)("Message chunk timed out",{endpoint:P,replId:t,dispatched:Z});g.reject(e)},2e4)})(),[2,(0,s._)(function(){return(0,u.Jh)(this,function(e){switch(e.label){case 0:e.trys.push([0,,8,9]),e.label=1;case 1:if(y)return[3,7];return[4,(0,a._)(g.promise)];case 2:e.sent(),A&&(clearTimeout(A),A=B()),g=(0,b.Z)(),e.label=3;case 3:if(!(Z<v.length))return[3,6];return[4,v[Z]];case 4:e.sent(),e.label=5;case 5:return Z++,[3,3];case 6:return[3,1];case 7:return[3,9];case 8:return k(),clearTimeout(G),clearTimeout(A),[7];case 9:return[2]}})})()]}})}),function(t){return e.apply(this,arguments)}),[n,P,z,E,t,H,L]);return(0,g.useCallback)(function(){return{sendMessage:function(e){var t=e.body,n=e.options;return(0,s._)(function(){var e;return(0,u.Jh)(this,function(o){switch(o.label){case 0:return[4,(0,a._)(er({body:t,options:n}))];case 1:return e=o.sent(),[5,(0,u.XA)((0,r._)((0,i._)(e),a._))];case 2:return o.sent(),[2]}})})()},createNewSession:Y}},[Y,er])}},99708:function(e,t,n){n.d(t,{yz:function(){return u}});var r=n(45903),i=n(93295),o=n(23982),a=n(77393);function l(){var e=(0,i._)(["\n  query GhostwriterChatCurrentUserQuery {\n    currentUser {\n      username\n      id\n      image\n      isStaff: hasRole(role: REPLIT_STAFF)\n      isVerified\n      userSubscriptionType\n      userPowerUpsByType {\n        ... on UserPowerUpsTypes {\n          ghostwriter {\n            active\n          }\n        }\n      }\n    }\n  }\n"]);return l=function(){return e},e}var c={},s=(0,o.Ps)(l());function u(e){var t=(0,r._)({},c,e);return a.a(s,t)}},92815:function(e,t,n){n.d(t,{M:function(){return a},v:function(){return o}});var r=n(78094),i=(0,n(90234).cn)(!1),o=function(){return(0,r.$X)(i)},a=function(){return(0,r.c1)(i)}},96556:function(e,t,n){n.d(t,{b:function(){return e0}});var r,i,o,a,l,c,s,u,d,f,h,p,m,v,g,y,b,Z,w,x,C,_,S,E,k,T,R=n(29217),D=n(43429),I=n(78228),G=function(){var e=(0,I.c8)();return(0,D.useCallback)(function(){return e()},[e])},B=n(25425),A=n(88032),P=n(95867),N=n(34142),U=n(5453),L=n(45903),O=n(25e3),M=n(32477),X=n(21289),F=n(67073),W=n(87682),H=n(47761),V=n(44193),z=n(56868),j=n(40438),q=n(74044);(r=v||(v={}))[r.BASIC=0]="BASIC",r[r.ADVANCED=1]="ADVANCED",r[r.OVERRIDE=2]="OVERRIDE";var Y=q.Dy.Enum(v);(i=g||(g={}))[i.CODE_REFERENCE_TYPE_UNKNOWN=0]="CODE_REFERENCE_TYPE_UNKNOWN",i[i.FILE=1]="FILE",i[i.INLINE=2]="INLINE";var $=q.Dy.Enum(g);(o=y||(y={}))[o.DEBUG_ERROR_SOURCE_UNKNOWN=0]="DEBUG_ERROR_SOURCE_UNKNOWN",o[o.CONSOLE=1]="CONSOLE",o[o.LSP=2]="LSP";var J=q.Dy.Enum(y);(a=b||(b={}))[a.EVENT_STATE_UNKNOWN=0]="EVENT_STATE_UNKNOWN",a[a.IN_PROGRESS=1]="IN_PROGRESS",a[a.COMPLETE=2]="COMPLETE";var K=q.Dy.Enum(b);(l=Z||(Z={}))[l.INLINE_MESSAGE_TYPE_UNKNOWN=0]="INLINE_MESSAGE_TYPE_UNKNOWN",l[l.EXPLAIN_CODE=1]="EXPLAIN_CODE",l[l.DEBUGGER=2]="DEBUGGER",l[l.GENERATE_CODE=3]="GENERATE_CODE",l[l.TRANSFORM_CODE=4]="TRANSFORM_CODE";var Q=q.Dy.Enum(Z);(c=w||(w={}))[c.USER_TYPE_UNKNOWN=0]="USER_TYPE_UNKNOWN",c[c.USER=1]="USER",c[c.AI=2]="AI",c[c.SERVICE=3]="SERVICE";var ee=q.Dy.Enum(w);(s=x||(x={}))[s.SESSION_TYPE_UNKNOWN=0]="SESSION_TYPE_UNKNOWN",s[s.CHAT=1]="CHAT",s[s.INLINE_CHAT=2]="INLINE_CHAT",s[s.SINGLE_USE_SESSION=3]="SINGLE_USE_SESSION";var et=q.Dy.Enum(x);(u=C||(C={}))[u.MESSAGE_STOP_REASON_UNKNOWN=0]="MESSAGE_STOP_REASON_UNKNOWN",u[u.MAX_TOKENS=1]="MAX_TOKENS",u[u.STOP_TOKEN=2]="STOP_TOKEN";var en=q.Dy.Enum(C);(d=_||(_={}))[d.MESSAGE_ACTION_UNKNOWN=0]="MESSAGE_ACTION_UNKNOWN",d[d.NONE=1]="NONE",d[d.REPLIT_DOCS=2]="REPLIT_DOCS",d[d.GENERATE=3]="GENERATE",d[d.EXPLAIN=4]="EXPLAIN",d[d.TRANSFORM=5]="TRANSFORM",d[d.DEBUG=6]="DEBUG",d[d.FIND_INTENT=7]="FIND_INTENT";var er=q.Dy.Enum(_);(f=S||(S={}))[f.MEMBERSHIP_TYPE_UNKNOWN=0]="MEMBERSHIP_TYPE_UNKNOWN",f[f.FREE=1]="FREE",f[f.CORE=2]="CORE";var ei=q.Dy.Enum(S);(h=E||(E={}))[h.EVENT_ERROR_TYPE_UNKNOWN=0]="EVENT_ERROR_TYPE_UNKNOWN",h[h.MANUALLY_ABORTED=1]="MANUALLY_ABORTED",h[h.INCOMPLETE_UPDATE=2]="INCOMPLETE_UPDATE",h[h.INTERNAL_SERVER_ERROR=3]="INTERNAL_SERVER_ERROR",h[h.USAGE_LIMIT=4]="USAGE_LIMIT",h[h.TEST_ERROR=5]="TEST_ERROR";var eo=q.Dy.Enum(E);(p=k||(k={}))[p.SET=0]="SET",p[p.ADD=1]="ADD",p[p.CLEAR=2]="CLEAR";var ea=q.Dy.Enum(k);(m=T||(T={}))[m.UNKNOWN=0]="UNKNOWN",m[m.ENGLISH=1]="ENGLISH",m[m.CRON=2]="CRON";var el=q.Dy.Enum(T),ec=q.Dy.Object({}),es=q.Dy.Object({indexFrom:q.Dy.Number(),indexTo:q.Dy.Number(),lineFrom:q.Dy.Number(),lineTo:q.Dy.Number()}),eu=q.Dy.Object({code:q.Dy.String(),filePath:q.Dy.String(),fileVersion:q.Dy.Number(),fileContent:q.Dy.String(),range:es,language:q.Dy.String(),referenceType:$}),ed=q.Dy.Object({identifier:q.Dy.String(),url:q.Dy.String(),mimeType:q.Dy.String()}),ef=q.Dy.Object({content:q.Dy.String(),intent:er,stopReason:en,debugFullPrompt:q.Dy.String(),codeReference:eu,debugErrorSource:J,media:q.Dy.Array(ed)}),eh=q.Dy.Object({messageType:Q,debugErrorSource:J,content:q.Dy.String(),codeReference:eu}),ep=q.Dy.Object({command:q.Dy.String(),result:q.Dy.String(),eventId:q.Dy.String(),index:q.Dy.Number(),exitCode:q.Dy.Number(),channelName:q.Dy.String()}),em=q.Dy.Object({contents:q.Dy.Union([q.Dy.Object({$kind:q.Dy.Literal("sessionCreationEventContents"),sessionCreationEventContents:ec}),q.Dy.Object({$kind:q.Dy.Literal("messageEventContents"),messageEventContents:ef}),q.Dy.Object({$kind:q.Dy.Literal("inlineActionEventContents"),inlineActionEventContents:eh}),q.Dy.Object({$kind:q.Dy.Literal("localShellExecutionEventContents"),localShellExecutionEventContents:ep})])}),ev=q.Dy.Object({}),eg=q.Dy.Object({type:Y,overrideModelName:q.Dy.String()}),ey=q.Dy.Object({mostRecentFile:q.Dy.String(),fileContext:q.Dy.Array(eu),modelSelector:eg}),eb=q.Dy.Object({mostRecentFile:q.Dy.String(),fileContext:q.Dy.Array(eu),modelSelector:eg}),eZ=q.Dy.Object({}),ew=q.Dy.Object({metadata:q.Dy.Union([q.Dy.Object({$kind:q.Dy.Literal("sessionCreationEventContext"),sessionCreationEventContext:ev}),q.Dy.Object({$kind:q.Dy.Literal("messageEventContext"),messageEventContext:ey}),q.Dy.Object({$kind:q.Dy.Literal("inlineActionEventContext"),inlineActionEventContext:eb}),q.Dy.Object({$kind:q.Dy.Literal("localShellExecutionEventContext"),localShellExecutionEventContext:eZ})])}),ex=q.Dy.Object({type:ee,id:q.Dy.String(),membership:ei,roles:q.Dy.Array(q.Dy.String()),isTeam:q.Dy.Boolean()}),eC=q.Dy.Object({id:q.Dy.String(),operationType:ea,key:q.Dy.String(),value:q.Dy.String()}),e_=q.Dy.Object({type:eo,message:q.Dy.String()}),eS=q.Dy.Object({id:q.Dy.String(),parentEventId:q.Dy.String(),contents:em,context:ew,state:K,created:q.Dy.Date(),updated:q.Dy.Date(),sender:ex,sessionId:q.Dy.String(),updateEventOperations:q.Dy.Array(eC),error:e_}),eE=q.Dy.Object({id:q.Dy.String(),title:q.Dy.String(),sessionType:et,replId:q.Dy.String(),events:q.Dy.Array(eS),sessionCreationEventId:q.Dy.String(),lastEventTime:q.Dy.Date(),created:q.Dy.Date(),updated:q.Dy.Date()});q.Dy.Object({user:ex,replIds:q.Dy.Array(q.Dy.String())}),q.Dy.Object({parentEventId:q.Dy.String(),sessionId:q.Dy.String(),state:K,contents:em,context:ew,eventId:q.Dy.String(),error:e_}),q.Dy.Object({eventId:q.Dy.String()}),q.Dy.Object({eventId:q.Dy.String(),operations:q.Dy.Array(eC),state:K,error:e_,requireCompletion:q.Dy.Optional(q.Dy.Boolean())}),q.Dy.Object({}),q.Dy.Object({eventId:q.Dy.String(),context:ew}),q.Dy.Object({}),q.Dy.Object({mimeType:q.Dy.String(),replId:q.Dy.String(),sessionId:q.Dy.String()}),q.Dy.Object({uploadUrl:q.Dy.String(),downloadUrl:q.Dy.String(),identifier:q.Dy.String()}),q.Dy.Object({eventId:q.Dy.String()}),q.Dy.Object({eventId:q.Dy.String()}),q.Dy.Object({beforeTimestamp:q.Dy.Date(),limit:q.Dy.Number(),includeFirstSessionEvents:q.Dy.Boolean(),firstSessionEventsLimit:q.Dy.Number(),replId:q.Dy.String(),sessionTypes:q.Dy.Array(et)}),q.Dy.Object({hasMore:q.Dy.Boolean(),sessions:q.Dy.Array(eE)}),q.Dy.Object({sessionId:q.Dy.String(),limit:q.Dy.Number()}),q.Dy.Object({events:q.Dy.Array(eS)}),q.Dy.Object({replId:q.Dy.String(),sessionType:et,title:q.Dy.String()}),q.Dy.Object({sessionId:q.Dy.String(),sessionCreationEventId:q.Dy.String()}),q.Dy.Object({replId:q.Dy.String()});var ek=q.Dy.Object({}),eT=q.Dy.Object({eventId:q.Dy.String(),parentEventId:q.Dy.String(),sessionId:q.Dy.String(),state:K,contents:em,sender:ex,error:e_}),eR=q.Dy.Object({sessionId:q.Dy.String(),title:q.Dy.String(),replId:q.Dy.String(),sessionCreationEventId:q.Dy.String()}),eD=q.Dy.Object({sessionId:q.Dy.String(),eventId:q.Dy.String(),operations:q.Dy.Array(eC),state:K,error:e_}),eI=q.Dy.Object({sessionId:q.Dy.String(),title:q.Dy.String(),sessionType:et});q.Dy.Object({message:q.Dy.Union([q.Dy.Object({$kind:q.Dy.Literal("subscriptionStatusMessage"),subscriptionStatusMessage:ek}),q.Dy.Object({$kind:q.Dy.Literal("createEventMessage"),createEventMessage:eT}),q.Dy.Object({$kind:q.Dy.Literal("createSessionMessage"),createSessionMessage:eR}),q.Dy.Object({$kind:q.Dy.Literal("updateEventMessage"),updateEventMessage:eD}),q.Dy.Object({$kind:q.Dy.Literal("updateSessionMessage"),updateSessionMessage:eI})])});var eG=q.Dy.Object({limit:q.Dy.Number(),usage:q.Dy.Number(),resetTime:q.Dy.Date()}),eB=q.Dy.Object({basicModelLimits:eG,advancedModelLimits:eG});q.Dy.Object({user:ex}),q.Dy.Object({limits:eB}),q.Dy.Object({id:q.Dy.String(),title:q.Dy.String(),sessionType:et}),q.Dy.Object({}),q.Dy.Object({replId:q.Dy.String(),contents:em,context:ew});var eA=q.Dy.Object({rootId:q.Dy.String()});q.Dy.Object({message:q.Dy.Union([q.Dy.Object({$kind:q.Dy.Literal("startMessage"),startMessage:eA}),q.Dy.Object({$kind:q.Dy.Literal("createEventMessage"),createEventMessage:eT}),q.Dy.Object({$kind:q.Dy.Literal("updateEventMessage"),updateEventMessage:eD})])}),q.Dy.Object({inputTarget:el,outputTarget:el,content:q.Dy.String(),extraContext:q.Dy.String()}),q.Dy.Object({content:q.Dy.String()});var eP=n(35515),eN=n(55534),eU=n(3590),eL=n(582),eO=n(9384);function eM(){return(eM=(0,F._)(function(e,t,n){var r,i,o,a,l,c,s,u,d,f;function h(){n.abortSignal.removeEventListener("abort",p),l.end(),clearTimeout(c),null!==s&&clearTimeout(s),n.onComplete()}function p(){a?(null!==s&&clearTimeout(s),s=setTimeout(function(){var e=(0,eO.o)("Message chunk timed out",{endpoint:n.endpoint,replId:t.replId,dispatched:l.readableLength});l.throw(e)},o.chunk),e.chatService.abortEvent.rpc({eventId:a})):h()}function m(){return(m=(0,N._)(function(){var e,t,n,r,i,o,c,s,d,f,p,m,v,g,y;return(0,W.Jh)(this,function(b){switch(b.label){case 0:e=!1,t=!1,b.label=1;case 1:b.trys.push([1,6,7,12]),r=(0,P._)(u),b.label=2;case 2:return[4,r.next()];case 3:if(!(e=!(i=b.sent()).done))return[3,5];if(!(o=i.value).ok)return l.throw(Error(o.payload.message)),[3,5];if("updateEventMessage"!==(c=o.payload.message).$kind)return[3,4];if(0===(s=c.updateEventMessage).operations.length)return l.push({sessionId:s.sessionId,responseStreamChunk:{data:"",isComplete:!0,stopReason:"stopToken"},responseId:s.eventId,requestId:s.eventId}),h(),[2];d=!0,f=!1,p=void 0;try{for(m=s.operations[Symbol.iterator]();!(d=(v=m.next()).done);d=!0)(g=v.value).operationType===k.ADD&&"content"===g.key&&l.push({sessionId:s.sessionId,responseStreamChunk:{data:g.value,isComplete:!1},responseId:a,requestId:""})}catch(e){f=!0,p=e}finally{try{d||null==m.return||m.return()}finally{if(f)throw p}}b.label=4;case 4:return e=!1,[3,2];case 5:return[3,12];case 6:return y=b.sent(),t=!0,n=y,[3,12];case 7:if(b.trys.push([7,,10,11]),!(e&&null!=r.return))return[3,9];return[4,r.return()];case 8:b.sent(),b.label=9;case 9:return[3,11];case 10:if(t)throw n;return[7];case 11:return[7];case 12:return[2]}})})).apply(this,arguments)}return(0,W.Jh)(this,function(Z){switch(Z.label){case 0:return o={chunk:null!==(r=n.chunkTimeout)&&void 0!==r?r:2e4,total:null!==(i=n.totalTimeout)&&void 0!==i?i:12e4},a="",l=(0,eL.dT)({objectMode:!0}),c=setTimeout(function(){var e=(0,eO.o)("Message total timed out",{endpoint:n.endpoint,replId:t.replId,dispatched:l.readableLength});l.throw(e)},o.total),s=null,n.abortSignal.addEventListener("abort",p),[4,(0,U._)(e.chatService.subscribeToReplEvents.subscribe({replId:t.replId}))];case 1:var w,x,S,k,T,R,D,I,G,B,N,L,O,X,F,H,V,z,j,q;return u=M._.apply(void 0,[Z.sent(),1])[0],H={code:(null===(w=(F=t.message).codeReference)||void 0===w?void 0:w.code)||"",filePath:(null===(x=F.codeReference)||void 0===x?void 0:x.filePath)||"",fileVersion:null!==(G=null===(S=F.codeReference)||void 0===S?void 0:S.fileVersion)&&void 0!==G?G:-1,fileContent:(null===(k=F.codeReference)||void 0===k?void 0:k.fileContent)||"",range:(null===(T=F.codeReference)||void 0===T?void 0:T.range)||{indexFrom:0,indexTo:0,lineTo:0,lineFrom:0},language:null!==(B=null===(R=F.codeReference)||void 0===R?void 0:R.language)&&void 0!==B?B:"",referenceType:g.CODE_REFERENCE_TYPE_UNKNOWN},V={content:null!==(N=t.message.text)&&void 0!==N?N:"",codeReference:H,intent:function(e){switch(e){case"REPLIT_DOCS":return _.REPLIT_DOCS;case"GENERATE":return _.GENERATE;case"EXPLAIN":return _.EXPLAIN;case"TRANSFORM":return _.TRANSFORM;case"DEBUG":return _.DEBUG;case"NONE":return _.NONE;default:return _.MESSAGE_ACTION_UNKNOWN}}(null!==(L=F.action)&&void 0!==L?L:"NONE"),stopReason:C.MESSAGE_STOP_REASON_UNKNOWN,debugFullPrompt:"",media:[],debugErrorSource:y.DEBUG_ERROR_SOURCE_UNKNOWN},z={type:t.useAdvancedModel?v.ADVANCED:v.BASIC,overrideModelName:""},j=(null!==(O=null===(D=t.context)||void 0===D?void 0:D.fileContext)&&void 0!==O?O:[]).map(function(e){return{language:e.language,code:e.code,fileContent:e.code,filePath:e.filePath,fileVersion:-1,referenceType:g.FILE,range:{indexFrom:0,indexTo:e.code.length,lineFrom:0,lineTo:0}}}),q={mostRecentFile:null!==(X=null===(I=t.context)||void 0===I?void 0:I.mostRecentFile)&&void 0!==X?X:"",fileContext:j,modelSelector:z},d={parentEventId:t.parentEventId,sessionId:t.sessionId,state:b.COMPLETE,context:{metadata:{$kind:"messageEventContext",messageEventContext:q}},contents:{contents:{$kind:"messageEventContents",messageEventContents:V}},eventId:"",error:{type:E.EVENT_ERROR_TYPE_UNKNOWN,message:""}},[4,(0,U._)(e.chatService.createEvent.rpc(d))];case 2:if(!(f=Z.sent()).ok)return h(),[2];return f.payload.eventId&&(a=f.payload.eventId),!function(){m.apply(this,arguments)}(),[5,(0,W.XA)((0,A._)((0,P._)(l),U._))];case 3:return Z.sent(),[2]}})})).apply(this,arguments)}var eX=n(70322),eF=n(90234),eW=n(64461),eH=n(78094),eV=(0,eF.cn)(new Map),ez=(0,eF.cn)(new Map),ej=(0,eF.cn)(null,function(e,t,n){var r=[];t(eV,function(e){return(0,eW.Uy)(e,function(e){var t=!0,i=!1,o=void 0;try{for(var a,l=n.sessions[Symbol.iterator]();!(t=(a=l.next()).done);t=!0){var c=a.value,s=c.events,u=(0,eX._)(c,["events"]);r.push.apply(r,(0,X._)(s)),e.set(u.id,u)}}catch(e){i=!0,o=e}finally{try{t||null==l.return||l.return()}finally{if(i)throw o}}})}),t(ez,function(e){return(0,eW.Uy)(e,function(e){var t=!0,n=!1,i=void 0;try{for(var o,a=r[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;e.set(l.id,l)}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}})})}),eq=n(83898),eY=n(4736),e$=n(21113),eJ=n(7444),eK=new Map([[_.REPLIT_DOCS,"REPLIT_DOCS"],[_.GENERATE,"GENERATE"],[_.EXPLAIN,"EXPLAIN"],[_.TRANSFORM,"TRANSFORM"],[_.DEBUG,"DEBUG"]]),eQ=n(85172);function e0(e){var t,n,r,i,o,a,l,c,s,u,d,f,h,p,m,v,g,y,b,Z,C,_=e.replId,E=e.currentUserId,k=(0,B.P5)({controlName:"flag-ai-ws-client-2"}),T=G(),q=(0,R.e)(),Y=(0,I.Th)(),$=(0,eH.$X)(R.Rr),J=(0,eQ.v)().isTeamWithAiDisabled;(0,D.useEffect)(function(){$(J)},[$,J]),(0,D.useEffect)(function(){if(!k)return q(T()),function(){q(null)}},[T,q,k]),u=(s={client:(n=(t={currentUserId:E,replId:_,endpoint:Y.replace(/ws$/,"river_ws"),disabled:!k}).disabled,r=t.currentUserId,i=t.replId,o=t.endpoint,l=(a=(0,M._)((0,D.useState)(null),2))[0],c=a[1],(0,D.useEffect)(function(){if(!n){var e=(0,M._)(function(e){var t=e.replId,n=e.endpoint,r=e.currentUserId;function i(){return(i=(0,N._)(function(){var e,r;return(0,W.Jh)(this,function(i){switch(i.label){case 0:return[4,(0,eP.I)(t)];case 1:return e=i.sent(),(r=new URL(n)).searchParams.set("auth_token",e),[2,new j.Z(r.toString())]}})})).apply(this,arguments)}var o=new V.k(function(){return i.apply(this,arguments)},r.toString(),"SERVER",{codec:z.f});return[(0,H.eI)(o),function(){return o.close()}]}({currentUserId:r,replId:i,endpoint:o}),2),t=e[0],a=e[1];return c(function(){return t}),function(){a()}}},[r,i,o,n]),l),replId:_,currentUserId:E}).client,d=s.replId,f=s.currentUserId,h=(0,eN.Z)().showError,p=(0,eU.jC)(),m=(0,R.e)(),v=(0,eH.$X)(ej),g=(0,eq.kL)(),y=(0,eH.Dm)(eV),b=(0,D.useCallback)(function(e){return y().get(e)},[y]),Z=(0,eY.Lv)(),C=(0,eJ.Z)((0,e$.Lw)()),(0,D.useEffect)(function(){var e=function(){return r.apply(this,arguments)},t=function(){return i.apply(this,arguments)};if(u){var n=!1;return m({createNewSession:function(){return(0,N._)(function(){var t;return(0,W.Jh)(this,function(n){switch(n.label){case 0:return[4,e()];case 1:return[2,(t=n.sent())?{sessionId:t,userId:f,success:!0}:{sessionId:null,userId:f,success:!1,error:"something went wrong"}]}})})()},sendMessage:function(e){var n=e.body,r=e.options;return(0,F._)(function(){var e,i,o;return(0,W.Jh)(this,function(a){switch(a.label){case 0:return o=null!==(i=null===(e=b(n.sessionId))||void 0===e?void 0:e.sessionCreationEventId)&&void 0!==i?i:"",[5,(0,W.XA)((0,A._)((0,P._)(function(e,t,n){return eM.apply(this,arguments)}(u,(0,O._)((0,L._)({},n),{replId:d,parentEventId:o}),(0,O._)((0,L._)({},r),{onComplete:t}))),U._))];case 1:return a.sent(),[2]}})})()}}),function(){o.apply(this,arguments)}(),function(){n=!0}}function r(){return(r=(0,N._)(function(){var e;return(0,W.Jh)(this,function(t){switch(t.label){case 0:return[4,null==u?void 0:u.chatService.createSession.rpc({sessionType:x.CHAT,replId:d,title:""})];case 1:return[2,(null==(e=t.sent())?void 0:e.ok)?e.payload.sessionId:null]}})})).apply(this,arguments)}function i(){return(i=(0,N._)(function(){var e,t,n,r,i,o;return(0,W.Jh)(this,function(a){switch(a.label){case 0:return e=C.current?S.CORE:S.FREE,[4,null==u?void 0:u.chatService.getUsageLimits.rpc({user:{type:w.USER,isTeam:!1,id:f.toString(),roles:[],membership:e}})];case 1:if(!(null==(t=a.sent())?void 0:t.ok))return h(null!==(n=null==t?void 0:t.payload.message)&&void 0!==n?n:"Something went wrong"),[2];return i=(r=t.payload.limits).basicModelLimits,o=r.advancedModelLimits,Z({basicModelUsage:i.usage,basicModelLimit:i.limit,basicModelTTLEnd:i.resetTime.getTime(),advancedModelUsage:o.usage,advancedModelLimit:o.limit,advancedModelTTLEnd:o.resetTime.getTime()}),[2]}})})).apply(this,arguments)}function o(){return(o=(0,N._)(function(){var r,i,o,a;return(0,W.Jh)(this,function(l){switch(l.label){case 0:if(!u)return[2];return t(),[4,u.chatService.getReplSessions.rpc({replId:d,includeFirstSessionEvents:!0,firstSessionEventsLimit:1e3,limit:1e3,beforeTimestamp:new Date("2099-01-01"),sessionTypes:[x.CHAT,x.INLINE_CHAT,x.SESSION_TYPE_UNKNOWN]})];case 1:if(r=l.sent(),n)return[2];if(!r.ok)return h(r.payload.message),[2];if(v(r.payload),!(null==(i=(0,M._)((0,X._)(r.payload.sessions).sort(function(e,t){return t.lastEventTime.getTime()-e.lastEventTime.getTime()}),1)[0])?void 0:i.id))return[3,3];return[4,u.chatService.getSessionEvents.rpc({sessionId:i.id,limit:1e3})];case 2:return(o=l.sent()).ok&&g(function(e){var t=[],n=e.sort(function(e,t){return new Date(e.created).getTime()-new Date(t.created).getTime()}),r=!0,i=!1,o=void 0;try{for(var a,l=n[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c,s=a.value,u=s.contents.contents;"messageEventContents"===u.$kind&&t.push({id:s.id,text:u.messageEventContents.content,attribution:s.sender.type===w.USER?"Human":"Assistant",timeCreated:s.created,codeReference:u.messageEventContents.codeReference,intent:null!==(c=eK.get(u.messageEventContents.intent))&&void 0!==c?c:"NONE",type:"chat"})}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return t}(o.payload.events)),p(i.id),[2];case 3:return[4,e()];case 4:if(!(a=l.sent()))return h("There was a error initializing AI"),[2];return p(a),[2]}})})).apply(this,arguments)}},[u,d,f,v,b,p,m,g,Z,h,C])}},46868:function(e,t,n){n.d(t,{CN:function(){return o},CT:function(){return i},bO:function(){return a}});var r=n(27308),i="git",o={gitCommit:{id:"git.commit",name:"Git: Commit",scope:i,default:(0,r.l2)({cmdOrCtrl:!0,key:"Enter"})}},a=Object.values(o)},31171:function(e,t,n){n.d(t,{Ai:function(){return g},BI:function(){return u},Jp:function(){return d},_H:function(){return f},_Z:function(){return v},bA:function(){return m},ox:function(){return y}});var r=n(45903),i=n(25e3),o=n(59173),a=n(90234),l=n(71999),c=n(43429),s=n(50199),u=(0,o.u)(function(){return null}),d=(0,o.u)(function(){return null});function f(e){var t=d.current();(0,c.useEffect)(function(){e!==t&&d.set(function(){return e})},[e,t])}var h=(0,a.cn)(null),p=(0,a.cn)(null,function(e,t,n){var o,a,l=e(h),c=l?(0,r._)({},l,n):(0,r._)({},n),s=null==c?void 0:c.changes,d=null==c?void 0:c.filePath;if(!d||!s)throw Error('"filePath", "changes", "users" required when initializing history state');var f=(a=(o=(0,i._)((0,r._)({},c),{changes:s,filePath:d})).changes.length,(0,r._)({users:{},count:a,version:Math.max(0,a-1),playing:!1,comparing:!1},o));u.set(function(){return f});var p=f.changes.length;if(0===p){t(h,f);return}(null==l?void 0:l.changes)&&f.changes!==l.changes&&(f.count=p,f.version=Math.min(f.version,p-1),f.playing=!1,f.comparing=!1),f.version===p-1&&(f.playing=!1),t(h,f)});function m(){return(0,l.Dv)(h,{store:b()})}function v(){return(0,l.b9)(p,{store:b()})}function g(){return(0,l.b9)((0,s.Z)(function(){return(0,a.cn)(null,function(e,t){t(h,null)})},[]),{store:b()})}var y=(0,c.createContext)(null);function b(){var e=(0,c.useContext)(y);if(!e)throw Error("Expected store in context");return e}},99418:function(e,t,n){n.d(t,{j:function(){return s},p:function(){return u}});var r=n(45903),i=n(59868),o=n(63009),a=n(43429),l=n(67795),c=n(31171);function s(){var e=(0,o.uV)();return(0,a.useCallback)(function(t,n,i){e({origin:"History2: useHistoryBSOD",error:t,tags:{source:"ws-history2",type:n},extras:(0,r._)({state:c.BI.current()},i)})},[e])}function u(e){(0,i.j)(l.U3.HISTORY_USED,{action:e,which:"ws"})}},92854:function(e,t,n){var r=n(8182);n(43429);var i=n(49344),o=n(74833),a=n(1498),l=n(56596),c=n(94106),s=n(39233),u=n(29287),d=(0,n(93918).X)({root:[u.l0.colWithGap(32)],header:[u.l0.rowWithGap(16),u.l0.align.center],icon:[u.l0.color.orangeStrongest],body:[u.l0.pr(32),u.l0.colWithGap(16)],list:[u.l0.colWithGap(16),u.l0.pl(16)],buttons:[u.l0.rowWithGap(16),u.l0.justify.end]});t.Z=function(e){var t=e.isOpen,n=(0,c.useRouter)();return(0,r.tZ)(i.u,{preventClose:!0,isOpen:t,centered:!0,onRequestClose:function(){},maxWidth:600,children:(0,r.BX)(l.G,{css:d.root,children:[(0,r.BX)(l.G,{css:d.header,children:[(0,r.tZ)(s.Z,{size:24,css:d.icon}),(0,r.tZ)(o.h4,{css:[{width:"fit-content"}],level:2,variant:"headerDefault",children:"You can’t join this Repl from Firewall Mode."})]}),(0,r.BX)(l.G,{css:d.body,children:[(0,r.tZ)(o.xv,{children:"This Repl was started by someone not in Firewall Mode. If you would like to join, please do one of the following:"}),(0,r.BX)(l.G,{css:d.list,children:[(0,r.tZ)(o.xv,{multiline:!1,children:"• Exit Firewall Mode."}),(0,r.tZ)(o.xv,{multiline:!1,children:"• Ask the creator to open this Repl in Firewall Mode."})]})]}),(0,r.BX)(l.G,{css:d.buttons,children:[(0,r.tZ)(a.zx,{text:"Exit Firewall Mode",onClick:function(){window.location.href="https://www.replit.com".concat(n.asPath)}}),(0,r.tZ)(a.zx,{text:"Leave",onClick:function(){n.push("/home","~/")}})]})]})})}},94655:function(e,t,n){n.d(t,{h:function(){return E},w:function(){return _}});var r=n(45903),i=n(25e3),o=n(8182),a=n(95571),l=n(18836),c=n(43429),s=n(64461),u=n(90234),d=n(32477),f=n(71999);function h(){return(0,d._)((0,c.useState)(function(){return(0,u.MT)()}),1)[0]}var p=(0,c.createContext)(null),m=function(e){return(0,f.b9)(e,{store:function(){var e=(0,c.useContext)(p);if(!e)throw Error("Expected store in context");return e}()})},v=n(50199),g=(0,u.cn)(-1),y=(0,u.cn)([]),b=(0,u.cn)(void 0),Z=(0,u.cn)(null,function(e,t,n){var r=e(b);switch(r&&(clearTimeout(r.id),r.cb()),n){case"forward":t(g,function(t){return Math.min(e(y).length,t+1)});break;case"backward":t(g,function(e){return Math.max(0,e-1)})}var i=e(y),o=e(g);return o>=i.length?"":i[o]}),w=(0,u.cn)(null,function(e,t,n){clearTimeout(null===(r=e(b))||void 0===r?void 0:r.id);var r,i=function(){if(n.length>0){var r=!1;t(y,function(t){return(0,s.Uy)(t,function(t){if(n!==t[e(g)])for(r=!0,t.push(n);t.length>20;)t.shift()})}),r&&t(g,e(y).length-1)}t(b,void 0)};t(b,{id:setTimeout(i,2e3),cb:i})});function x(e){var t,n=m(w),o=(t=m(Z),{forward:(0,v.Z)(function(){return function(){return t("forward")}},[t]),backward:(0,v.Z)(function(){return function(){return t("backward")}},[t])}),l=o.forward,s=o.backward,u=(0,c.useRef)(e.value);return(0,c.useEffect)(function(){e.value!==(null==u?void 0:u.current)&&(e.value&&n(e.value),u.current=e.value)},[n,e.value]),(0,i._)((0,r._)({},e),{onKeyDown:(0,v.Z)(function(){return function(t){if(t.shiftKey||(0,a.j)(t)){null===(r=e.onKeyDown)||void 0===r||r.call(e,t);return}var n,r,i=t.currentTarget,o=!!i.value.match(/\n/);if("ArrowUp"===t.key){if(o&&i.selectionStart&&i.selectionStart>0)return;e.onChange(s()),t.preventDefault(),t.stopPropagation();return}if("ArrowDown"===t.key){if(o&&i.selectionEnd&&i.selectionEnd<i.value.length)return;e.onChange(l()),t.preventDefault(),t.stopPropagation();return}null===(n=e.onKeyDown)||void 0===n||n.call(e,t)}},[s,l,e]),onChange:(0,v.Z)(function(){return function(t){e.onChange(t.target.value)}},[e])})}var C=c.forwardRef(function(e,t){var n=x(e);return(0,o.tZ)(l.B,(0,r._)({ref:t},n))}),_=c.forwardRef(function(e,t){var n=h();return(0,o.tZ)(p.Provider,{value:n,children:(0,o.tZ)(C,(0,r._)({ref:t},e))})}),S=c.forwardRef(function(e,t){var n=x(e);return(0,o.tZ)(l.II,(0,r._)({ref:t},e,n))}),E=c.forwardRef(function(e,t){var n=h();return(0,o.tZ)(p.Provider,{value:n,children:(0,o.tZ)(S,(0,r._)({ref:t},e))})})},80499:function(e,t,n){n.d(t,{m:function(){return p}});var r=n(8182);n(43429);var i=n(51384),o=n(56596),a=n(29287),l=n(30983),c=n(73858),s=n(4901),u=n(59811),d=n(88546),f=(0,i.F4)("0%,100%{opacity:1;}50%{opacity:0.25;}"),h={root:(0,i.iv)([a.l0.height(20),a.l0.width(20),a.l0.center]),pulse:(0,i.iv)({animation:"".concat(f," 2s infinite")})};function p(){var e=(0,c.Z)(),t=e.isSaving;return e.isOffline?(0,r.tZ)(l.u,{tooltip:"Reconnecting, changes will be synced when you’re online",placement:"right",children:(0,r.tZ)(o.G,{css:h.root,children:(0,r.tZ)(s.Z,{size:16,color:a.TV.redDefault})})}):t?(0,r.tZ)(l.u,{tooltip:"Saving",placement:"right",children:(0,r.tZ)(o.G,{css:[h.root,h.pulse],children:(0,r.tZ)(u.Z,{size:16,color:a.TV.foregroundDimmest})})}):(0,r.tZ)(l.u,{tooltip:"Saved",placement:"right",children:(0,r.tZ)(o.G,{css:h.root,children:(0,r.tZ)(d.Z,{size:16,color:a.TV.foregroundDimmest})})})}},16278:function(e,t,n){n.d(t,{I:function(){return f}});var r=n(45903),i=n(25e3),o=n(32477),a=n(25425),l=n(23896),c=n(66349),s=n(54916),u=n(43429),d={nodejs:["package.json","package-lock.json","yarn.lock","node_modules/"],python:["poetry.lock","pyproject.toml","requirements.txt",".venv/",".local"],ruby:["Gemfile","Gemfile.lock"],java:["pom.xml","target"]};function f(){var e=(0,c.Z)(),t=(0,l.T)(),n=(0,s.Z)(),f=(0,o._)((0,u.useState)(null),2),h=f[0],p=f[1],m=(0,a.P5)({controlName:"flag-system-dependencies-search-unstable"}),v=(0,a.P5)({controlName:"flag-system-dependencies-search-23_05"});return(0,u.useEffect)(function(){var e=n.dotReplit.watch(function(e){var t,n;null===e.error&&p(null!==(n=null===(t=e.config.nix)||void 0===t?void 0:t.channel)&&void 0!==n?n:null)});return function(){e()}},[n]),(0,u.useMemo)(function(){var n=(null==t?void 0:t.packagers)||[],o=(null==n?void 0:n.map(function(e){var t,n;return(0,i._)((0,r._)({},e),{title:e.language,packagerFiles:(null===(t=e.packagerFiles)||void 0===t?void 0:t.length)?e.packagerFiles:null!==(n=d[e.language])&&void 0!==n?n:[]})}))||[];((null==e?void 0:e.language)==="html"||(null==e?void 0:e.language)==="html_beta")&&o.push({id:"html",title:"html",name:"HTML Packager",language:"html",packageSearch:!0,guessImports:!1,packagerFiles:[]});var a="unstable"===h&&m||"stable-23_05"===h&&v;return o.push({id:"nix",title:"system",name:"System Dependencies",language:"nix",packageSearch:a,guessImports:!1,packagerFiles:["replit.nix"]}),o},[t,e,h,m,v])}},46801:function(e,t,n){n.d(t,{C:function(){return g}});var r,i,o,a=n(34142),l=n(39698),c=n(87682),s="index.html",u=/^\s*<script src="https:\/\/cdnjs\.cloudflare\.com\/ajax\/libs\/([^/]+)\/([^/]+)\/.+.js"><\/script>$/,d=(r={name:"html",getInstalledPackages:function(e){var t=e.services.fs;return(0,a._)(function(){return(0,c.Jh)(this,function(e){switch(e.label){case 0:return[4,t.stat(s)];case 1:var n;if(!e.sent().exists)return[2,[]];return[2,new Promise((n=(0,a._)(function(e){var n;return(0,c.Jh)(this,function(r){return n=t.watchTextFile(s,{onReady:function(t){var r=t.initialContent,i=[],o=!0,a=!1,l=void 0;try{for(var c,s=r.split("\n")[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var d=c.value.match(u);d&&i.push({name:d[1],version:d[2]})}}catch(e){a=!0,l=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}n(),e(i)},onError:function(){n(),e([])}}),[2]})}),function(e){return n.apply(this,arguments)}))]}})})()},getPackageInfo:function(e){var t=e.name;return(0,a._)(function(){var e,n;return(0,c.Jh)(this,function(r){switch(r.label){case 0:return[4,fetch("/data/cdnjs/info/".concat(encodeURIComponent(t)),{credentials:"same-origin",headers:{"Content-Type":"application/json",Accept:"application/json"}})];case 1:if(!(e=r.sent()).ok)return[2,void 0];r.label=2;case 2:return r.trys.push([2,4,,5]),[4,e.json()];case 3:if(n=r.sent())return[2,{name:n.name,version:n.version,description:n.description,homepageURL:n.link,sourceCodeURL:n.include}];return[3,5];case 4:return r.sent(),[2,void 0];case 5:return[2]}})})()},search:function(e){var t=e.query;return(0,a._)(function(){var e;return(0,c.Jh)(this,function(n){switch(n.label){case 0:return[4,fetch("/data/cdnjs/search/".concat(encodeURIComponent(t)),{credentials:"same-origin",headers:{"Content-Type":"application/json",Accept:"application/json"}})];case 1:if(!(e=n.sent()).ok)return[2,[]];return[4,e.json()];case 2:return[2,n.sent().map(function(e){return{name:e.name,version:e.version,description:e.description,homepageURL:e.link,sourceCodeURL:e.include}})]}})})()}},(0,l._)(r,"install",function(e){var t=e.pkgs,n=e.services.fs;return(0,a._)(function(){var e,r,i,o,l,u,d;return(0,c.Jh)(this,function(f){switch(f.label){case 0:return[4,n.stat(s)];case 1:if(!f.sent().exists)return[2];e=!0,r=!1,i=void 0,f.label=2;case 2:f.trys.push([2,7,8,9]),o=function(){var e;return(0,c.Jh)(this,function(t){switch(t.label){case 0:var r;return e=u.value,[4,new Promise((r=(0,a._)(function(t){var r;return(0,c.Jh)(this,function(i){return r=n.watchTextFile(s,{onReady:function(i){var o=i.initialContent,l=i.writeChange;return(0,a._)(function(){var i,a;return(0,c.Jh)(this,function(c){switch(c.label){case 0:i='<script src="'.concat(e.sourceCodeURL,'"></script>\n'),-1===(a=o.indexOf("<script"))&&(a=o.indexOf("</body>")),-1===a&&(a=o.length),l({from:a,insert:i}),c.label=1;case 1:return c.trys.push([1,3,4,5]),[4,n.flush()];case 2:case 3:return c.sent(),[3,5];case 4:return r(),t(),[7];case 5:return[2]}})})()},onError:function(){r(),t()}}),[2]})}),function(e){return r.apply(this,arguments)}))];case 1:return t.sent(),[2]}})},l=t[Symbol.iterator](),f.label=3;case 3:if(e=(u=l.next()).done)return[3,6];return[5,(0,c.XA)(o())];case 4:f.sent(),f.label=5;case 5:return e=!0,[3,3];case 6:return[3,9];case 7:return d=f.sent(),r=!0,i=d,[3,9];case 8:try{e||null==l.return||l.return()}finally{if(r)throw i}return[7];case 9:return[2]}})})()}),(0,l._)(r,"uninstall",function(e){var t=e.pkgs,n=e.services.fs;return(0,a._)(function(){var e,r,i,o,l,d,f;return(0,c.Jh)(this,function(h){switch(h.label){case 0:return[4,n.stat(s)];case 1:if(!h.sent().exists)return[2];e=!0,r=!1,i=void 0,h.label=2;case 2:h.trys.push([2,7,8,9]),o=function(){var e;return(0,c.Jh)(this,function(t){switch(t.label){case 0:var r;return e=d.value,[4,new Promise((r=(0,a._)(function(t){var r;return(0,c.Jh)(this,function(i){return r=n.watchTextFile(s,{onReady:function(i){var o=i.initialContent,l=i.writeChange;return(0,a._)(function(){var i,a,s,d,f,h,p,m,v;return(0,c.Jh)(this,function(c){switch(c.label){case 0:i=0,a=!0,s=!1,d=void 0;try{for(f=o.split("\n")[Symbol.iterator]();!(a=(h=f.next()).done);a=!0)(m=(p=h.value).match(u))&&(v=m[1],e.name===v&&l({from:i,to:i+p.length+1})),i+=p.length+1}catch(e){s=!0,d=e}finally{try{a||null==f.return||f.return()}finally{if(s)throw d}}c.label=1;case 1:return c.trys.push([1,3,4,5]),[4,n.flush()];case 2:case 3:return c.sent(),[3,5];case 4:return r(),t(),[7];case 5:return[2]}})})()},onError:function(){r(),t()}}),[2]})}),function(e){return r.apply(this,arguments)}))];case 1:return t.sent(),[2]}})},l=t[Symbol.iterator](),h.label=3;case 3:if(e=(d=l.next()).done)return[3,6];return[5,(0,c.XA)(o())];case 4:h.sent(),h.label=5;case 5:return e=!0,[3,3];case 6:return[3,9];case 7:return f=h.sent(),r=!0,i=f,[3,9];case 8:try{e||null==l.return||l.return()}finally{if(r)throw i}return[7];case 9:return[2]}})})()}),r),f=(i={name:"upm",getInstalledPackages:function(e){var t=e.id,n=e.services.packager;return(0,a._)(function(){var e;return(0,c.Jh)(this,function(r){switch(r.label){case 0:return[4,n.listSpecfile(t)];case 1:if((e=r.sent()).error||null===e.packages)return[2,[]];return[2,e.packages]}})})()}},(0,l._)(i,"getPackageInfo",function(e){var t=e.id,n=e.name,r=e.services.packager;return(0,a._)(function(){return(0,c.Jh)(this,function(e){return[2,r.fetchPackageInfo(n,t)]})})()}),(0,l._)(i,"search",function(e){var t=e.id,n=e.query,r=e.services.packager;return(0,a._)(function(){return(0,c.Jh)(this,function(e){return[2,r.searchPackages(n,t)]})})()}),(0,l._)(i,"install",function(e){var t=e.id,n=e.pkgs,r=e.services.packager;return(0,a._)(function(){return(0,c.Jh)(this,function(e){switch(e.label){case 0:return[4,r.addPackages(n,t)];case 1:if(!e.sent())throw Error("Package install failed");return[2]}})})()}),(0,l._)(i,"uninstall",function(e){var t=e.id,n=e.pkgs,r=e.services.packager;return(0,a._)(function(){var e;return(0,c.Jh)(this,function(i){switch(i.label){case 0:return e=n.filter(function(e){return e.name}).map(function(e){return e.name}),[4,r.removePackages(e,t)];case 1:if(!i.sent())throw Error("Package uninstall failed");return[2]}})})()}),i),h=n(93295),p=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.map(function(e,t){var r;return e+(null!==(r=n[t])&&void 0!==r?r:"")}).join("")};function m(){var e=(0,h._)(["\n        let\n          pkgs = import <nixpkgs> {};\n          pkg = pkgs."," or {};\n          meta = pkg.meta or {};\n        in {\n          name = pkg.pname or pkg.name or null;\n          version = pkg.version or null;\n          license = meta.license or null;\n          description = meta.description or null;\n          homepage = meta.homepage or null;\n         }\n     "]);return m=function(){return e},e}var v=(o={name:"nix",getInstalledPackages:function(e){var t=e.services.nixService;return(0,a._)(function(){var e;return(0,c.Jh)(this,function(n){switch(n.label){case 0:return[4,t.listPackages()];case 1:if(null!==(e=n.sent()).error)return[2,[]];return[2,e.packages.filter(function(e){return!!e.name}).map(function(e){return{name:e.name,version:e.version}})]}})})()}},(0,l._)(o,"getPackageInfo",function(e){var t=e.name,n=e.services.container;return(0,a._)(function(){var e,r,i,o,a,l,s,u,d,f;return(0,c.Jh)(this,function(c){switch(c.label){case 0:return e=t.replace(/^pkgs\./,""),[4,n.exec("nix-instantiate","--strict","--json","--eval","--expr",p(m(),e))];case 1:if(null!==(r=c.sent()).error)return[2,{name:t}];return a=null!==(o=(i=JSON.parse(r.output)).license)&&void 0!==o?o:void 0,void 0!==i.license&&"string"!=typeof i.license&&(a=null===(l=i.license)||void 0===l?void 0:l.fullName),[2,{name:t,prettyName:null!==(s=i.name)&&void 0!==s?s:void 0,version:null!==(u=i.version)&&void 0!==u?u:void 0,license:a,description:null!==(d=i.description)&&void 0!==d?d:void 0,homepageURL:null!==(f=i.homepage)&&void 0!==f?f:void 0}]}})})()}),(0,l._)(o,"search",function(e){var t=e.query,n=e.services.nixService;return(0,a._)(function(){var e;return(0,c.Jh)(this,function(r){switch(r.label){case 0:return[4,n.searchPackages(t)];case 1:if(null!==(e=r.sent()).error)throw Error("Could not search Nix packages");return[2,e.packages.map(function(e){return{name:"pkgs.".concat(e.name),version:e.version}})]}})})()}),(0,l._)(o,"install",function(e){var t=e.pkgs,n=e.services.nixService;return(0,a._)(function(){var e;return(0,c.Jh)(this,function(r){switch(r.label){case 0:return e=t.map(function(e){return e.name}).filter(function(e){return null!=e}),[4,n.addPackages(e)];case 1:return r.sent(),[2]}})})()}),(0,l._)(o,"uninstall",function(e){var t=e.pkgs,n=e.services.nixService;return(0,a._)(function(){var e;return(0,c.Jh)(this,function(r){switch(r.label){case 0:return e=t.map(function(e){return e.name}).filter(function(e){return null!=e}),[4,n.removePackages(e)];case 1:return r.sent(),[2]}})})()}),o);function g(e){switch(e){case"html":return d;case"nix":return v;default:return f}}},71071:function(e,t,n){n.d(t,{Z:function(){return v}});var r=n(34142),i=n(87682),o=n(8182),a=n(55534),l=n(59868),c=n(54916),s=n(69451),u=n.n(s),d=n(43429),f=n(16278),h=n(46801),p=n(59072);function m(){var e=(0,c.Z)(),t=(0,p.Hg)(p.NC),n=(0,p.Hg)(p.w$),o=(0,p.XD)(p.w$),s=(0,p.$X)(p.w$),m=(0,p.Hg)(p.vO),v=(0,p.Mi)(),g=(0,p.Zq)(),y=(0,p.OO)(),b=(0,p.np)(),Z=(0,a.Z)(),w=(0,f.I)(),x=(0,p.T9)();return(0,d.useEffect)(function(){if(0!==w.length){var t=[],n=!1,r=!0,i=!1,a=void 0;try{for(var l,c=w[Symbol.iterator]();!(r=(l=c.next()).done);r=!0)!function(){var r=l.value,i=Promise.resolve(),a=g(r.id),c=u()(function(){var t=g(r.id),a=o();if(t===p.C0.Idle||(null==a?void 0:a.id)!==r.id){var l=(0,h.C)(r.id);i=i.then(function(){if(!n)return l.getInstalledPackages({id:r.id,services:e}).then(function(e){n||(y(r.id,e),v(r.id,p.C0.Idle))})})}},500);if(r.packagerFiles.length>0){var s=!0,d=!1,f=void 0;try{for(var m,b=r.packagerFiles[Symbol.iterator]();!(s=(m=b.next()).done);s=!0)!function(){var n=m.value;if(!n.endsWith("/")){var r=null!==a&&a!==p.C0.Initializing&&a!==p.C0.Uninitialized,i=e.fs.watchFilePath(n,{onChange:function(){if(!r){r=!0;return}c()}});t.push(i)}}()}catch(e){d=!0,f=e}finally{try{s||null==b.return||b.return()}finally{if(d)throw f}}}}()}catch(e){i=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(i)throw a}}return function(){n=!0;var e=!0,r=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(e=(o=a.next()).done);e=!0)(0,o.value)()}catch(e){r=!0,i=e}finally{try{e||null==a.return||a.return()}finally{if(r)throw i}}}}},[w,e.fs]),(0,d.useEffect)(function(){var t,n=!1;return(t=(0,r._)(function(){var t,r,o,a,l,c;return(0,i.Jh)(this,function(i){t=!0,r=!1,o=void 0;try{for(a=function(){var t=c.value,r=g(t.id);if(r&&r!==p.C0.Uninitialized&&r!==p.C0.Initializing)return"continue";v(t.id,p.C0.Initializing),(0,h.C)(t.id).getInstalledPackages({id:t.id,services:e}).then(function(e){n||(y(t.id,e),v(t.id,p.C0.Idle))})},l=w[Symbol.iterator]();!(t=(c=l.next()).done);t=!0)a()}catch(e){r=!0,o=e}finally{try{t||null==l.return||l.return()}finally{if(r)throw o}}return[2]})}),function(){return t.apply(this,arguments)})(),function(){n=!0}},[w]),(0,d.useEffect)(function(){if(null===n&&0!==t.length){var e=t[0];g(e.id)===p.C0.Idle&&b(e)}},[m,n,t]),(0,d.useEffect)(function(){if(null!==n){var t,o=!1;return(t=(0,r._)(function(){var t,r,a,c,u,d,f,m,g,b,w,C,_,S,E,k,T,R;return(0,i.Jh)(this,function(i){switch(i.label){case 0:switch(t=(0,h.C)(n.id),n.kind){case p.TH.Install:return[3,1];case p.TH.Uninstall:return[3,6]}return[3,11];case 1:v(n.id,p.C0.Installing),r=!0,a=!1,c=void 0;try{for(u=n.pkgs[Symbol.iterator]();!(r=(d=u.next()).done);r=!0)f=d.value,(0,l.j)(l.U3.PACKAGE_MANAGER_USED,{action:"installed",packageId:f.name})}catch(e){a=!0,c=e}finally{try{r||null==u.return||u.return()}finally{if(a)throw c}}i.label=2;case 2:return i.trys.push([2,4,,5]),[4,t.install({id:n.id,pkgs:n.pkgs,services:e})];case 3:return i.sent(),1===n.pkgs.length?Z.showNotice("Installed ".concat(null!==(m=n.pkgs[0].name)&&void 0!==m?m:"package")):Z.showNotice("Installed ".concat(n.pkgs.length," packages")),[3,5];case 4:return i.sent(),1===n.pkgs.length?Z.showError("Failed to install ".concat(null!==(g=n.pkgs[0].name)&&void 0!==g?g:"package")):Z.showError("Failed to install ".concat(n.pkgs.length," packages")),x(n.id,n.pkgs),[3,5];case 5:return[3,11];case 6:v(n.id,p.C0.Uninstalling),b=!0,w=!1,C=void 0;try{for(_=n.pkgs[Symbol.iterator]();!(b=(S=_.next()).done);b=!0)E=S.value,(0,l.j)(l.U3.PACKAGE_MANAGER_USED,{action:"removed",packageId:E.name})}catch(e){w=!0,C=e}finally{try{b||null==_.return||_.return()}finally{if(w)throw C}}i.label=7;case 7:return i.trys.push([7,9,,10]),[4,t.uninstall({id:n.id,pkgs:n.pkgs,services:e})];case 8:return i.sent(),1===n.pkgs.length?Z.showNotice("Removed ".concat(null!==(k=n.pkgs[0].name)&&void 0!==k?k:"package")):Z.showNotice("Removed ".concat(n.pkgs.length," packages")),[3,10];case 9:return i.sent(),1===n.pkgs.length?Z.showError("Failed to remove ".concat(null!==(T=n.pkgs[0].name)&&void 0!==T?T:"package")):Z.showError("Failed to remove ".concat(n.pkgs.length," packages")),x(n.id,n.pkgs),[3,10];case 10:return[3,11];case 11:if(o)return[2];return[4,t.getInstalledPackages({id:n.id,services:e})];case 12:if(R=i.sent(),o)return[2];return y(n.id,R),v(n.id,p.C0.Idle),s(null),[2]}})}),function(){return t.apply(this,arguments)})(),function(){o=!0}}},[n]),null}function v(e){var t=e.children,n=(0,p.ns)();return(0,o.BX)(p.vN.Provider,{value:n,children:[(0,o.tZ)(m,{}),t]})}},59072:function(e,t,n){n.d(t,{$X:function(){return Z},$z:function(){return T},B2:function(){return G},C0:function(){return o},Hg:function(){return x},Mi:function(){return D},NC:function(){return B},OO:function(){return U},T9:function(){return S},TH:function(){return a},Wx:function(){return X},XD:function(){return w},Zq:function(){return R},cW:function(){return A},jh:function(){return O},np:function(){return W},ns:function(){return g},pN:function(){return _},te:function(){return N},vN:function(){return y},vO:function(){return k},w$:function(){return I},wY:function(){return E},zi:function(){return V}});var r,i,o,a,l=n(39698),c=n(45903),s=n(25e3),u=n(32477),d=n(95025),f=n(64461),h=n(90234),p=n(71999),m=n(28999),v=n(43429);function g(){return(0,u._)((0,v.useState)(function(){return(0,h.MT)()}),1)[0]}(0,h.cn)({replId:"",packageManagers:{}}),(r=o||(o={})).Uninitialized="Uninitialized",r.Initializing="Initializing",r.Installing="Installing",r.Uninstalling="Uninstalling",r.Idle="Idle",(i=a||(a={})).Install="Install",i.Uninstall="Uninstall";var y=(0,v.createContext)(null);function b(){var e=(0,v.useContext)(y);if(!e)throw Error("Expected store in context");return e}var Z=function(e){return(0,p.b9)(e,{store:b()})};function w(e){return(0,m.lV)((0,v.useCallback)(function(t){return t(e)},[e]),{store:b()})}function x(e){return(0,p.Dv)(e,{store:b()})}(0,h.cn)(null),(0,h.cn)(null);var C=(0,h.cn)({});function _(e){var t,n=x(C);return e&&null!==(t=n[e])&&void 0!==t?t:[]}function S(){var e=Z(C);return function(t,n){e(function(e){return(0,f.Uy)(e,function(e){var r=e[t];if(!r||0===r.length){e[t]=n;return}var i=!0,o=!1,a=void 0;try{for(var l,c=n[Symbol.iterator]();!(i=(l=c.next()).done);i=!0)!function(){var e=l.value;r.find(function(t){return t.name===e.name})||r.push(e)}()}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}})})}}function E(){var e=Z(C);return function(t,n){e(function(e){return(0,f.Uy)(e,function(e){var r=e[t];if(r&&0!==r.length){var i=!0,o=!1,a=void 0;try{for(var l,c=n[Symbol.iterator]();!(i=(l=c.next()).done);i=!0)!function(){var e=l.value,t=r.findIndex(function(t){return t.name===e.name});-1!==t&&r.splice(t,1)}()}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}}})})}}var k=(0,h.cn)({});function T(e){var t,n=x(k);return e&&null!==(t=n[e])&&void 0!==t?t:null}function R(){var e=w(k);return function(t){var n;return null!==(n=e()[t])&&void 0!==n?n:null}}function D(){var e=Z(k);return function(t,n){e(function(e){return(0,s._)((0,c._)({},e),(0,l._)({},t,n))})}}var I=(0,h.cn)(null);function G(){return x(I)}var B=(0,h.cn)([]);function A(){return x(B)}var P=(0,h.cn)({});function N(e){var t,n=x(P);return e&&null!==(t=n[e])&&void 0!==t?t:[]}function U(){var e=Z(P);return function(t,n){e(function(e){return(0,s._)((0,c._)({},e),(0,l._)({},t,n))})}}var L=(0,h.cn)(null,function(e,t,n){var r=n.id,i=n.pkg;if(!i.name)throw Error("Package does not have a name.");t(B,function(e){return(0,f.Uy)(e,function(e){if(!e.find(function(e){return e.pkgs.find(function(t){return e.id===r&&t.name===i.name})})){var t=e.find(function(e){return"Install"===e.kind});t?t.pkgs.push(i):e.push({kind:"Install",id:r,pkgs:[i]})}})})});function O(){return Z(L)}var M=(0,h.cn)(null,function(e,t,n){var r=n.id,i=n.pkg;if(!i.name)throw Error("Package does not have a name.");t(B,function(e){return(0,f.Uy)(e,function(e){if(!e.find(function(e){return e.pkgs.find(function(t){return e.id===r&&t.name===i.name})})){var t=e.find(function(e){return"Uninstall"===e.kind});t?t.pkgs.push(i):e.push({kind:"Uninstall",id:r,pkgs:[i]})}})})});function X(){return Z(M)}(0,h.cn)(null);var F=(0,h.cn)(null,function(e,t,n){var r=(0,d._)(e(B)),i=r[0],o=r.slice(1);n===i&&(t(B,o),t(I,n))});function W(){return Z(F)}var H=(0,h.cn)(null,function(e,t,n){t(B,function(e){return(0,f.Uy)(e,function(e){var t=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value,c=l.pkgs.findIndex(function(e){return e.name===n});-1!==c&&l.pkgs.splice(c,1)}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}})})});function V(){return Z(H)}},4662:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(21289),i=n(8182),o=n(24448),a=n.n(o),l=n(58091);function c(e){var t=e.replTitle,n=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,r._)(t.filter(Boolean)).concat(["Replit"]).join(" - ")}((0,l.ex)(),t);return(0,i.tZ)(a(),{children:(0,i.tZ)("title",{children:n},"title")})}},71914:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(8182),i=n(94450),o=n.n(i);n(43429);var a=n(96179),l=n(1518),c=n(29287);function s(e){var t=e.preventHighlightBorder,n=(0,l.Z)();return(0,r.BX)("div",{className:o().dynamic([["abfe52c92a5cedca",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])+" loader",children:[(0,r.tZ)("div",{className:o().dynamic([["abfe52c92a5cedca",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])+" wrap",children:(0,r.BX)(a.Z,{backgroundColor:c.TV.backgroundHighest,foregroundColor:c.TV.backgroundHigher,uniqueKey:"editorLoader",children:[(0,r.tZ)("rect",{x:"0",y:"0",rx:"3",ry:"3",width:"70",height:"10",className:o().dynamic([["abfe52c92a5cedca",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"80",y:"0",rx:"3",ry:"3",width:"100",height:"10",className:o().dynamic([["abfe52c92a5cedca",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"190",y:"0",rx:"3",ry:"3",width:"10",height:"10",className:o().dynamic([["abfe52c92a5cedca",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"15",y:"20",rx:"3",ry:"3",width:"130",height:"10",className:o().dynamic([["abfe52c92a5cedca",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"155",y:"20",rx:"3",ry:"3",width:"130",height:"10",className:o().dynamic([["abfe52c92a5cedca",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"15",y:"40",rx:"3",ry:"3",width:"90",height:"10",className:o().dynamic([["abfe52c92a5cedca",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"115",y:"40",rx:"3",ry:"3",width:"60",height:"10",className:o().dynamic([["abfe52c92a5cedca",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"185",y:"40",rx:"3",ry:"3",width:"60",height:"10",className:o().dynamic([["abfe52c92a5cedca",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"0",y:"60",rx:"3",ry:"3",width:"30",height:"10",className:o().dynamic([["abfe52c92a5cedca",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"15",y:"80",rx:"3",ry:"3",width:"70",height:"10",className:o().dynamic([["abfe52c92a5cedca",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"95",y:"80",rx:"3",ry:"3",width:"60",height:"10",className:o().dynamic([["abfe52c92a5cedca",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"165",y:"80",rx:"3",ry:"3",width:"30",height:"10",className:o().dynamic([["abfe52c92a5cedca",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"15",y:"100",rx:"3",ry:"3",width:"110",height:"10",className:o().dynamic([["abfe52c92a5cedca",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"135",y:"100",rx:"3",ry:"3",width:"100",height:"10",className:o().dynamic([["abfe52c92a5cedca",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"0",y:"120",rx:"3",ry:"3",width:"70",height:"10",className:o().dynamic([["abfe52c92a5cedca",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])})]})}),(0,r.tZ)(o(),{id:"abfe52c92a5cedca",dynamic:[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"],children:".loader.__jsx-style-dynamic-selector{z-index:3;height:100%;width:100%;background-color:var(--background-default);overflow:hidden;padding:var(--space-16);-webkit-border-bottom-right-radius:var(--border-radius-4);-moz-border-radius-bottomright:var(--border-radius-4);border-bottom-right-radius:var(--border-radius-4);-webkit-border-bottom-left-radius:var(--border-radius-4);-moz-border-radius-bottomleft:var(--border-radius-4);border-bottom-left-radius:var(--border-radius-4);-webkit-box-shadow:".concat(n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)",";-moz-box-shadow:").concat(n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)",";box-shadow:").concat(n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)","}.wrap.__jsx-style-dynamic-selector{overflow:hidden}.wrap.__jsx-style-dynamic-selector>svg{max-width:640px;min-width:500px;height:auto}@media screen and (min-width:900px){.loader.__jsx-style-dynamic-selector{padding:30px}}")})]})}},81662:function(e,t,n){n.d(t,{Ly:function(){return v},ZP:function(){return y},qm:function(){return Z}});var r=n(32477),i=n(21289),o=n(8182),a=n(25632),l=n(68514),c=n(18836),s=n(48272),u=n(4070),d=n(74833),f=n(93918),h=n(29287),p=n(18330),m=n(43429),v=[{value:"spaces",title:"spaces"},{value:"tabs",title:"tabs"}],g=(0,f.X)({sizeInput:[h.l0.py(6),h.l0.flex.growAndShrink(0),{border:"none"}]});function y(){var e=(0,a.Gn)("indentDetection","indentFormatPastes","indentIsSpaces","indentSize"),t=e.preferences,n=e.update;return(0,o.BX)(o.HY,{children:[(0,o.tZ)(p.$,{id:"indentDetection",title:(0,o.BX)(o.HY,{children:[(0,o.tZ)(d.xv,{multiline:!1,children:"Indentation detection"}),(0,o.tZ)(d.xv,{variant:"small",color:"dimmest",children:"Automatically detect indentation settings when opening a file."})]}),children:(0,o.tZ)(u.r,{"aria-label":"Indentation detection",isSelected:t.indentDetection,onChange:function(e){n({indentDetection:e})}})}),(0,o.tZ)(l.R,{}),(0,o.tZ)(p.$,{id:"indentFormatPastes",title:(0,o.BX)(o.HY,{children:[(0,o.tZ)(d.xv,{multiline:!1,children:"Format pasted text indentation"}),(0,o.tZ)(d.xv,{variant:"small",color:"dimmest",children:"Automatically format the indentation of pasted text."})]}),children:(0,o.tZ)(u.r,{"aria-label":"Format pasted text indentation",isSelected:t.indentFormatPastes,onChange:function(e){n({indentFormatPastes:e})}})}),(0,o.tZ)(l.R,{}),(0,o.tZ)(p.$,{id:"indentType",title:(0,o.BX)(o.HY,{children:[(0,o.tZ)(d.xv,{multiline:!1,children:"Indentation character"}),(0,o.tZ)(d.xv,{variant:"small",color:"dimmest",children:"The character used for indenting lines."})]}),children:(0,o.tZ)(s.P,{initialSelectedItem:v.find(function(e){return e.value===(t.indentIsSpaces?"spaces":"tabs")}),onChange:function(e){n({indentIsSpaces:(null==e?void 0:e.value)==="spaces"})},items:(0,i._)(v)})}),(0,o.tZ)(l.R,{}),(0,o.tZ)(p.$,{id:"indentSize",title:(0,o.BX)(o.HY,{children:[(0,o.tZ)(d.xv,{multiline:!1,children:"Indentation size"}),(0,o.tZ)(d.xv,{variant:"small",color:"dimmest",children:"The number of columns taken up by an indentation level."})]}),children:(0,o.tZ)(Z,{css:g.sizeInput,size:t.indentSize,onChange:function(e){n({indentSize:e})}})})]})}function b(e){return null==e?2:("string"==typeof e&&(e=parseInt(e,10)),isNaN(e))?2:(Number.isInteger(e)||(e=Math.round(e)),e<1)?1:e>16?16:e}function Z(e){var t=e.size,n=e.onChange,i=e.className,a=(0,r._)((0,m.useState)(null),2),l=a[0],s=a[1],u=null!==l?l:t.toString(),d=""===u?"6ch":u.length+5.5+"ch";return(0,o.tZ)(c.II,{type:"number",style:{width:d},className:i,min:1,max:16,value:u,onBlur:function(){return s(null)},onChange:function(e){var t=e.target.value.trim(),r=e.target.valueAsNumber;if(""===t||isNaN(r)){s(t);return}e.target.validity.valid?(s(null),n(b(r))):(s(t),""===t||isNaN(parseInt(t,10))||n(b(t)))}})}},18330:function(e,t,n){n.d(t,{$:function(){return s}});var r=n(8182),i=n(43429),o=n(56596),a=n(74833),l=n(29287),c=n(10981);function s(e){var t=e.id,n=e.title,s=e.children,u=(0,c.U)()(t);return(0,r.BX)(o.G,{css:[l.l0.rowWithGap(8),l.l0.justify.spaceBetween,l.l0.align.center],children:[(0,r.tZ)(o.G,{css:l.l0.flex.growAndShrink(1),tag:"label",htmlFor:u,children:"string"==typeof n?(0,r.tZ)(a.xv,{multiline:!1,children:n}):n}),i.cloneElement(s,{id:u})]})}},66636:function(e,t,n){n.d(t,{Z:function(){return e1}});var r,i,o,a=n(8182),l=n(43429),c=n(56596),s=n(29287),u=n(2038),d=n(21289),f=n(74833),h=n(38080),p=n(48272),m=n(18931),v=n(88936),g=n(18330),y=n(15146),b=n(32477),Z=n(1498),w=n(78272);function x(e){var t=e.context,n=e.text,r=(0,b._)(l.useState(!1),2),i=r[0],o=r[1];return(0,a.BX)(a.HY,{children:[(0,a.tZ)(Z.zx,{text:void 0===n?"Activate":n,colorway:"primary",onClick:function(){return o(!0)}}),(0,a.tZ)(w.Z,{isOpen:i,onClose:function(){return o(!1)},type:"purchase",analyticsContext:{upgrade:{context:t}}})]})}var C=n(39698),_=n(75582),S=n(18597);(r=i||(i={})).None="None",r.Activate="Activate",r.Activated="Activated",r.TrialOngoing="TrialOngoing",r.TrialExpired="TrialExpired";var E=(o={},(0,C._)(o,_.e4.Activate,"Activate"),(0,C._)(o,_.e4.Activated,"Activated"),(0,C._)(o,_.e4.TrialOngoing,"TrialOngoing"),(0,C._)(o,_.e4.TrialExpired,"TrialExpired"),o),k=n(79490),T=n(40028),R=n(20916),D=n(25425),I=n(25632),G=n(59868),B=n(30983),A=n(75875),P=n(20798),N=n(45903),U=n(93295),L=n(23982),O=n(77393);function M(){var e=(0,U._)(["\n  query CodeSuggestionPreferences {\n    currentUser {\n      id\n      userSubscriptionType\n      userPowerUpsByType {\n        __typename\n        ... on UnauthorizedError {\n          message\n        }\n        ... on UserPowerUpsTypes {\n          ghostwriter {\n            active\n          }\n        }\n      }\n    }\n  }\n"]);return M=function(){return e},e}var X={},F=(0,L.Ps)(M()),W=n(68514),H=n(4070),V=n(85172),z=n(87001),j=Array.from(P.vw,function(e){return{title:e,value:e}}),q={titleContainer:[s.l0.rowWithGap(8),s.l0.align.center],upgradeRow:[s.l0.rowWithGap(8),s.l0.align.center,s.l0.justify.spaceBetween]};function Y(){var e,t,n,r,i=(0,D.P5)({controlName:"flag-code-suggestion-engine",logFlagToAnalytics:!1}),o=(0,D.P5)({controlName:"flag-gw-charizard"}),l=(e=(0,N._)({},X,void 0),O.a(F,e)).data,u=(null==l?void 0:null===(t=l.currentUser)||void 0===t?void 0:t.userSubscriptionType)===_.HP.HackerPro,h=(0,V.v)().isTeamWithAiDisabled,m=(o||(null==l?void 0:null===(n=l.currentUser)||void 0===n?void 0:n.userPowerUpsByType.__typename)==="UserPowerUpsTypes"&&l.currentUser.userPowerUpsByType.ghostwriter.active)&&!h,v=(0,I.Gn)("codeSuggestion","completeCodeEngine"),y=v.preferences,b=v.update,Z=(0,R.Z)().engine,w={value:null,title:"default"},S=function(e,t){b((0,C._)({},e,t)),(0,G.j)(G.U3.SETTINGS_TOGGLED,{settingChanged:e,updatedValue:t})};return m?(0,a.BX)(c.G,{css:s.l0.colWithGap(12),children:[(0,a.tZ)(g.$,{id:"codeSuggestionToggle",title:(0,a.BX)(a.HY,{children:[(0,a.tZ)(c.G,{css:q.titleContainer,children:(0,a.tZ)(f.xv,{multiline:!1,children:"AI code completion"})}),(0,a.BX)(f.xv,{variant:"small",css:[s.l0.color.foregroundDimmest],children:["Code completion provides inline “ghost text” suggestions while you code.",(0,a.tZ)("br",{}),"Press tab or swipe right on your mobile device to accept."]})]}),children:(0,a.tZ)(a.HY,{children:(0,a.tZ)(H.r,{"aria-label":"Code complete",isSelected:y.codeSuggestion,onChange:function(e){S("codeSuggestion",e)}})})}),u?null:(0,a.BX)(c.G,{css:q.upgradeRow,children:[(0,a.tZ)(f.xv,{children:"Upgrade for full access to Replit AI"}),(0,a.tZ)(x,{text:"Upgrade to Replit ".concat(z.we),context:"workspace_settings_pane"})]}),i?(0,a.BX)(a.HY,{children:[(0,a.tZ)(W.R,{}),(0,a.tZ)(g.$,{id:"completeCodeEngine",title:(0,a.BX)(a.HY,{children:[(0,a.BX)(c.G,{css:[s.l0.flex.row,s.l0.rowWithGap(8),s.l0.center,s.l0.justify.start],children:[(0,a.BX)(f.xv,{multiline:!1,children:[o?"AI":"Ghostwriter"," code completion engine"]}),(0,a.tZ)(B.u,{tooltip:"You are seeing this functionality because you have special permissions.",children:(0,a.tZ)(A.Z,{})})]}),(0,a.BX)(f.xv,{variant:"small",css:[s.l0.color.foregroundDimmest],children:["Current applied engine: ",Z]})]}),children:(0,a.tZ)(a.HY,{children:(0,a.tZ)(p.P,{css:[s.l0.minWidth(184)],initialSelectedItem:null!==(r=j.find(function(e){return e.value===y.completeCodeEngine}))&&void 0!==r?r:w,onChange:function(e){return S("completeCodeEngine",null==e?void 0:e.value)},items:[w].concat((0,d._)(j))})})})]}):null]}):null}var $={titleContainer:[s.l0.rowWithGap(8),s.l0.align.center],surface:[s.l0.p(8),s.l0.colWithGap(8),s.l0.borderRadius(8),s.l0.align.start]};function J(){var e=function(){var e,t,n=(0,S.JC)(),r=n.data;if(n.loading)return{loading:!0};if((null==r?void 0:null===(e=r.currentUser)||void 0===e?void 0:e.userPowerUpsByType.__typename)==="UnauthorizedError");else if((null==r?void 0:null===(t=r.currentUser)||void 0===t?void 0:t.userPowerUpsByType.__typename)==="UserPowerUpsTypes"){var i=r.currentUser.userPowerUpsByType.ghostwriter,o=i.CTA,a=i.timeTrialExpiry;if(null!=o){var l=E[o];if(("TrialOngoing"===l||"TrialExpired"===l)&&a)return{cta:l,trialExpiryDate:new Date(a),loading:!1};if("Activate"===l||"Activated"===l)return{cta:l,loading:!1}}}return{cta:"None",loading:!1}}(),t=e.cta,n=e.loading,r=(0,u.rv)(),o=(0,D.P5)({controlName:"flag-gw-charizard"});if(n)return(0,a.tZ)(g.$,{id:"ghostwriter",title:"Ghostwriter",children:(0,a.tZ)(v.Z,{})});if(o&&!r)return(0,a.tZ)(Y,{});switch(t){case i.None:return null;case i.Activated:case i.TrialOngoing:return(0,a.tZ)(Y,{});case i.TrialExpired:case i.Activate:if(r)return null;return(0,a.tZ)(g.$,{id:"ghostwriter",title:(0,a.BX)(a.HY,{children:[(0,a.BX)(c.G,{css:$.titleContainer,children:[(0,a.tZ)(f.xv,{multiline:!1,children:"Ghostwriter"}),(0,a.tZ)(k.Z,{context:"workspace_settings_pane",powerUp:"ghostwriter"})]}),(0,a.tZ)(f.xv,{variant:"small",css:[s.l0.color.foregroundDimmest],multiline:!1,children:"Replit's AI pair programmer can complete, generate, explain, and edit code."})]}),children:(0,a.tZ)(x,{context:"workspace_settings_pane"})});default:(0,T.Z)(t)}}var K=n(72129),Q=n(99708),ee=n(18836),et=n(78228),en=n(32377),er=Array.from(n(45434).ce,function(e){return{title:e,value:e}}),ei=Array.from((0,d._)(Object.entries(et.fT)).concat([["custom",""]]),function(e){return{title:e[0],value:e[1]}});function eo(){var e,t,n,r=(0,D.P5)({controlName:"flag-ghostwriter-chat-engine-override",logFlagToAnalytics:!1}),i=(0,Q.yz)().data,o=(null==i?void 0:null===(e=i.currentUser)||void 0===e?void 0:e.isStaff)||!1,u=(0,I.Gn)("chatEngine","ghostwriterChatServiceEnvironment","ghostwriterUseAdvancedModel"),h=u.preferences,v=u.update,Z=(0,K.v)(),w={value:null,title:"default"},x=(0,et.Th)(),_=(0,b._)((0,l.useState)(!Object.values(et.fT).includes(x)),2),S=_[0],E=_[1],k=(0,b._)((0,l.useState)(""),2),T=k[0],R=k[1],P=function(e,t){v((0,C._)({},e,t)),(0,G.j)(G.U3.SETTINGS_TOGGLED,{settingChanged:e,updatedValue:t})};return(0,a.BX)(a.HY,{children:[r?(0,a.BX)(a.HY,{children:[(0,a.tZ)(W.R,{}),(0,a.tZ)(g.$,{id:"ghostwriterChatEngine",title:(0,a.BX)(a.HY,{children:[(0,a.BX)(c.G,{css:[s.l0.flex.row,s.l0.rowWithGap(8),s.l0.center,s.l0.justify.start],children:[(0,a.BX)(f.xv,{multiline:!1,children:["AI"," chat engine"]}),(0,a.tZ)(B.u,{tooltip:'You are seeing this functionality because you have special permissions. If set, this preference overrides "Use Advanced model" preference.',children:(0,a.tZ)(A.Z,{})})]}),(0,a.BX)(f.xv,{variant:"small",css:[s.l0.color.foregroundDimmest],children:["Current applied engine: ",Z]})]}),children:(0,a.tZ)(a.HY,{children:(0,a.tZ)(p.P,{css:[s.l0.minWidth(184)],initialSelectedItem:null!==(t=er.find(function(e){return e.value===h.chatEngine}))&&void 0!==t?t:w,onChange:function(e){return P("chatEngine",null==e?void 0:e.value)},items:[w].concat((0,d._)(er))})})})]}):null,(0,a.BX)(a.HY,{children:[(0,a.tZ)(W.R,{}),(0,a.tZ)(g.$,{id:"ghostwriterChatUseAdvancedModel",title:(0,a.BX)(a.HY,{children:[(0,a.tZ)(c.G,{css:[s.l0.flex.row,s.l0.rowWithGap(8),s.l0.center,s.l0.justify.start],children:(0,a.BX)(f.xv,{multiline:!1,children:["AI"," advanced model"]})}),(0,a.tZ)(f.xv,{variant:"small",css:[s.l0.color.foregroundDimmest],children:"Advanced models require a lot of power and have usage limits. They're most useful for tasks that are ambiguous or require creativity."})]}),children:(0,a.tZ)(a.HY,{children:(0,a.tZ)(H.r,{"aria-label":"Use Advanced model",isSelected:h.ghostwriterUseAdvancedModel,onChange:function(e){(0,G.j)(G.U3.GHOSTWRITER_CHAT_MODEL_CHANGED,{source:"settingsPane",model:e?"advanced":"default"}),P("ghostwriterUseAdvancedModel",e)}})})})]}),o?(0,a.BX)(a.HY,{children:[(0,a.tZ)(W.R,{}),(0,a.tZ)(g.$,{id:"ghostwriterChatService",title:(0,a.BX)(a.HY,{children:[(0,a.tZ)(c.G,{css:[s.l0.flex.row,s.l0.rowWithGap(8),s.l0.center,s.l0.justify.start],children:(0,a.tZ)(f.xv,{multiline:!1,children:"Ghostwriter Chat Service V2 "})}),(0,a.BX)(f.xv,{variant:"small",css:[s.l0.color.foregroundDimmest],children:["Current endpoint: ",x]})]}),children:(0,a.BX)(c.G,{css:s.l0.colWithGap(12),children:[(0,a.tZ)(p.P,{css:[s.l0.minWidth(184)],initialSelectedItem:null!==(n=ei.find(function(e){return e.value===h.ghostwriterChatServiceEnvironment}))&&void 0!==n?n:h.ghostwriterChatServiceEnvironment?ei[ei.length-1]:ei[0],onChange:function(e){(null==e?void 0:e.title)!=="custom"?(P("ghostwriterChatServiceEnvironment",null==e?void 0:e.value),E(!1)):E(!0)},items:ei}),S?(0,a.BX)(c.G,{css:s.l0.rowWithGap(4),children:[(0,a.tZ)(ee.II,{value:T,onChange:function(e){R(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&P("ghostwriterChatServiceEnvironment",T)}}),(0,a.tZ)(y.hU,{alt:"Update custom url",onClick:function(){return P("ghostwriterChatServiceEnvironment",T)},children:h.ghostwriterChatServiceEnvironment!==T?(0,a.tZ)(m.Z,{}):(0,a.tZ)(en.Z,{})})]}):null]})})]}):null]})}var ea=n(50560),el=n(67225),ec=n(95571),es=n(94106),eu=n(93918),ed=n(35034),ef=n(99656);function eh(e){return e.slice().sort(function(e,t){return e-t})}var ep=(0,eu.X)({ruler:[s.l0.py(4),s.l0.px(8),s.l0.rowWithGap(4),s.l0.align.center,s.l0.borderRadius(8)],remove:[s.l0.borderRadius(4)],title:[s.l0.pr(8),s.l0.overflow("visible"),s.l0.flex.shrink(0)],body:[s.l0.flex.row,s.l0.flex.wrapReverse,s.l0.align.start,s.l0.justify.end,s.l0.flex.growAndShrink(1),{gap:s.TV.space4}],list:[s.l0.flex.row,s.l0.flex.wrap,s.l0.flex.growAndShrink(1),s.l0.align.end,s.l0.justify.end,{gap:s.TV.space4}],add:[s.l0.rowWithGap(4),s.l0.align.center]});function em(e){var t=e.pos,n=e.onRemove;return(0,a.BX)(h.Tg,{css:ep.ruler,elevated:!0,children:[(0,a.tZ)(f.xv,{multiline:!1,children:t}),(0,a.tZ)(y.hU,{css:ep.remove,alt:"Remove ruler",onClick:n,children:(0,a.tZ)(ed.Z,{})})]})}function ev(){var e=(0,b._)((0,l.useState)(!1),2),t=e[0],n=e[1],r=(0,b._)((0,l.useState)(80),2),i=r[0],o=r[1],s=(0,l.useRef)(null),u=(0,l.useRef)(null),h=-1===i,p=i>=0&&i<=1e3,m=(0,I.Gn)("rulers"),v=m.preferences,y=m.update,w=eh(v.rulers);return(0,a.tZ)(g.$,{id:"rulers",title:(0,a.tZ)(f.xv,{css:ep.title,multiline:!1,children:"Rulers"}),children:(0,a.BX)(c.G,{css:ep.body,children:[(0,a.tZ)(c.G,{css:ep.list,children:w.map(function(e,t){return(0,a.tZ)(em,{pos:e,onRemove:function(){y({rulers:w.filter(function(e,n){return n!==t})})}},t)})}),t?(0,a.BX)(c.G,{css:ep.add,children:[(0,a.tZ)(ee.II,{ref:s,type:"number",style:{width:h?"6ch":i.toString().length+5.5+"ch"},value:i>=0?i.toString():"",onChange:function(e){if(""===e.target.value)o(-1);else{var t=parseInt(e.target.value,10);isNaN(t)||o(t)}},onKeyDown:function(e){"Escape"===e.key?(o(80),n(!1)):"Enter"===e.key&&p&&(y({rulers:eh((0,d._)(w).concat([i]))}),n(!1),o(80))},onBlur:function(e){e.relatedTarget!==u.current&&(n(!1),o(80))},onFocus:function(e){e.target.select()},autoFocus:!0}),(0,a.tZ)(Z.zx,{ref:u,text:"Accept",colorway:"primary",iconLeft:(0,a.tZ)(en.Z,{}),disabled:!p,onClick:function(){p&&(y({rulers:eh((0,d._)(w).concat([i]))}),n(!1),o(80))},onBlur:function(e){e.relatedTarget!==s.current&&(n(!1),o(80))}})]}):(0,a.tZ)(a.HY,{children:w.length>=10?null:(0,a.tZ)(Z.zx,{text:"Add Ruler",iconLeft:(0,a.tZ)(ef.Z,{}),onClick:function(){return n(!0)}})})]})})}var eg=(0,eu.X)({container:[s.l0.flex.row,s.l0.justify.spaceBetween,s.l0.align.start],title:[s.l0.flex.growAndShrink(1)],body:[s.l0.colWithGap(12)],switch:[s.l0.rowWithGap(8),s.l0.align.center,s.l0.justify.end]});function ey(){var e=(0,I.Gn)("showLeadingWhitespace","showTrailingWhitespace","showEnclosedWhitespace","showSelectedWhitespace"),t=e.preferences,n=e.update;return(0,a.BX)(c.G,{css:eg.container,children:[(0,a.BX)(c.G,{css:eg.title,children:[(0,a.tZ)(f.xv,{children:"Show whitespace"}),(0,a.tZ)(f.xv,{multiline:!0,variant:"small",css:[s.l0.color.foregroundDimmest],children:"Make whitespace characters visible, such as tabs and spaces."})]}),(0,a.BX)(c.G,{css:eg.body,children:[(0,a.BX)(c.G,{css:eg.switch,tag:"label",children:[(0,a.tZ)(f.xv,{variant:"small",children:"Leading"}),(0,a.tZ)(H.r,{"aria-label":"Show leading whitespace",isSelected:t.showLeadingWhitespace,onChange:function(e){n({showLeadingWhitespace:e})}})]}),(0,a.BX)(c.G,{css:eg.switch,tag:"label",children:[(0,a.tZ)(f.xv,{variant:"small",children:"Enclosed"}),(0,a.tZ)(H.r,{css:[s.l0.flex.rowReverse],"aria-label":"Show enclosed whitespace",isSelected:t.showEnclosedWhitespace,onChange:function(e){n({showEnclosedWhitespace:e})}})]}),(0,a.BX)(c.G,{css:eg.switch,tag:"label",children:[(0,a.tZ)(f.xv,{variant:"small",children:"Trailing"}),(0,a.tZ)(H.r,{"aria-label":"Show trailing whitespace",isSelected:t.showTrailingWhitespace,onChange:function(e){n({showTrailingWhitespace:e})}})]}),(0,a.BX)(c.G,{css:eg.switch,tag:"label",children:[(0,a.tZ)(f.xv,{variant:"small",children:"Selected"}),(0,a.tZ)(H.r,{"aria-label":"Show selected whitespace",isSelected:t.showSelectedWhitespace,onChange:function(e){n({showSelectedWhitespace:e})}})]})]})]})}var eb=n(60442),eZ=n(37951),ew=n(81662);function ex(e){var t=e.onBeforePreferencesUpdate,n=e.hideLayoutControl,r=e.className,i=e.resetLayout,o=(0,I.Gn)("isLayoutStacked","fontSize","minimapDisplay","wrapping","keyboardHandler","multiselectModifierKey","showFileTreeGitStatus","codeIntelligence","accessibleTerminal","shellBellAudio","webviewAutoOpenOnPortOpened","chatAudioNotification"),l=o.preferences,b=o.update,Z=(0,u.Vg)((0,es.useRouter)()),w=(0,u.T3)(),x=(0,eb.cR)(),C=(0,D.P5)({controlName:"flag-editor-visible-whitespace",logFlagToAnalytics:!1}),_=(0,D.P5)({controlName:"flag-chat-audio-notification"}),S=(0,D.P5)({controlName:"flag-filetree-git-status",logFlagToAnalytics:!1}),E=function(e){t&&t(e),Object.keys(e).forEach(function(t){var n=e[t];(0,G.j)(G.U3.SETTINGS_TOGGLED,{settingChanged:t,updatedValue:n})}),b(e)};if(!l)return null;var k=[{value:"side-by-side",title:"side-by-side"},{value:"stacked",title:"stacked"}],T=[{value:10,title:"tiny"},{value:12,title:"small"},{value:14,title:"normal"},{value:18,title:"large"},{value:24,title:"huge"}],R=[{value:"default",title:"default"},{value:"emacs",title:"emacs"},{value:"vim",title:"vim"}],B=[{value:"none",title:"none"},{value:"soft",title:"soft wrap"}],A=[{value:"none",title:"none"},{value:"blocks",title:"blocks"},{value:"characters",title:"characters"}],P=["cmdOrCtrlKey","altKey"].map(function(e){return{value:e,title:ec.U[e]}});return(0,a.BX)(h.Tg,{className:r,background:"default",css:[s.l0.p(16),s.l0.colWithGap(12)],children:[n?null:(0,a.BX)(a.HY,{children:[(0,a.tZ)(g.$,{id:"layout",title:"Default layout",children:(0,a.BX)(c.G,{css:[s.l0.align.center,s.l0.rowWithGap(8)],children:[i?(0,a.tZ)(y.hU,{alt:"Reset layout",onClick:function(){i.reset()},children:i.reseting?(0,a.tZ)(v.Z,{}):(0,a.tZ)(m.Z,{})}):null,(0,a.tZ)(p.P,{initialSelectedItem:k.find(function(e){return l.isLayoutStacked?"stacked"===e.value:"side-by-side"===e.value}),onChange:function(e){E({isLayoutStacked:(null==e?void 0:e.value)==="stacked"})},items:(0,d._)(k)})]})}),(0,a.tZ)(W.R,{})]}),(0,a.tZ)(g.$,{id:"fontSize",title:"Font size",children:(0,a.tZ)(p.P,{initialSelectedItem:T.find(function(e){return e.value===l.fontSize}),onChange:function(e){E({fontSize:"number"==typeof(null==e?void 0:e.value)?e.value:14})},items:(0,d._)(T)})}),(0,a.tZ)(W.R,{}),(0,a.tZ)(ew.ZP,{}),(0,a.tZ)(W.R,{}),(0,a.tZ)(g.$,{id:"wrapping",title:"Wrapping",children:(0,a.tZ)(p.P,{initialSelectedItem:B.find(function(e){return e.value===(l.wrapping?"soft":"none")}),onChange:function(e){E({wrapping:(null==e?void 0:e.value)==="soft"})},items:(0,d._)(B)})}),(0,a.tZ)(W.R,{}),w?null:(0,a.BX)(a.HY,{children:[(0,a.tZ)(g.$,{id:"minimap",title:"Minimap",children:(0,a.tZ)(p.P,{initialSelectedItem:A.find(function(e){return e.value===l.minimapDisplay}),onChange:function(e){E({minimapDisplay:e.value})},items:(0,d._)(A)})}),(0,a.tZ)(W.R,{})]}),(0,a.tZ)(ev,{}),(0,a.tZ)(W.R,{}),(0,a.tZ)(g.$,{id:"keybinds",title:"Keybinds",children:(0,a.tZ)(p.P,{initialSelectedItem:R.find(function(e){return["vim","emacs"].includes(e.value)?e.value===l.keyboardHandler:"default"===e.value&&!l.keyboardHandler}),onChange:function(e){E({keyboardHandler:["vim","emacs"].includes(e.value)?e.value:null})},items:(0,d._)(R),dataCy:"keybinds"})}),(0,a.tZ)(W.R,{}),(0,a.tZ)(g.$,{id:"multiselectModifier",title:(0,a.BX)(a.HY,{children:[(0,a.tZ)(f.xv,{multiline:!1,children:"Multiselect modifier key"}),(0,a.tZ)(f.xv,{variant:"small",css:[s.l0.color.foregroundDimmest],children:"Modifier key for selecting multiple items in the filetree."})]}),children:(0,a.tZ)(p.P,{initialSelectedItem:P.find(function(e){return e.value===l.multiselectModifierKey}),onChange:function(e){E({multiselectModifierKey:e.value})},items:(0,d._)(P)})}),(0,a.tZ)(W.R,{}),S?(0,a.BX)(a.HY,{children:[(0,a.tZ)(g.$,{id:"showFileTreeGitStatus",title:(0,a.BX)(a.HY,{children:[(0,a.tZ)(f.xv,{multiline:!1,children:"File tree Git status"}),(0,a.tZ)(f.xv,{variant:"small",css:[s.l0.color.foregroundDimmest],children:"Show the Git status of files in the file tree."})]}),children:(0,a.tZ)(H.r,{"aria-label":"File tree Git status",isSelected:l.showFileTreeGitStatus,onChange:function(e){E({showFileTreeGitStatus:e})}})}),(0,a.tZ)(W.R,{})]}):null,(0,a.tZ)(J,{}),(0,a.tZ)(eo,{}),(0,a.tZ)(W.R,{}),(0,a.tZ)(g.$,{id:"codeIntelligence",title:(0,a.BX)(a.HY,{children:[(0,a.tZ)(f.xv,{multiline:!1,children:"Code intelligence"}),(0,a.tZ)(f.xv,{variant:"small",css:[s.l0.color.foregroundDimmest],children:"Code intelligence gives you autocomplete, syntax highlighting, and hints as you type."})]}),children:(0,a.tZ)(H.r,{"aria-label":"Code Intelligence",isSelected:l.codeIntelligence,onChange:function(e){E({codeIntelligence:e})}})}),(0,a.tZ)(W.R,{}),C?(0,a.BX)(a.HY,{children:[(0,a.tZ)(ey,{}),(0,a.tZ)(W.R,{})]}):null,(0,a.tZ)(g.$,{id:"accessibleTerminal",title:(0,a.BX)(a.HY,{children:[(0,a.tZ)(f.xv,{multiline:!1,children:"Accessible terminal output"}),(0,a.tZ)(f.xv,{variant:"small",css:[s.l0.color.foregroundDimmest],children:"Enable this setting to use a screen reader. Warning: this can affect performance."})]}),children:(0,a.tZ)(H.r,{"aria-label":"Accessible terminal output",isSelected:l.accessibleTerminal,onChange:function(e){E({accessibleTerminal:e})}})}),(0,a.tZ)(W.R,{}),(0,a.tZ)(g.$,{id:"shellBellAudio",title:(0,a.BX)(a.HY,{children:[(0,a.tZ)(f.xv,{multiline:!1,children:"Shell bell audible indicator"}),(0,a.tZ)(f.xv,{variant:"small",css:[s.l0.color.foregroundDimmest],children:"Should the Shell play sounds when there is an issue like a failed tab completion?"})]}),children:(0,a.tZ)(H.r,{"aria-label":"Shell bell audible indicator",isSelected:l.shellBellAudio,onChange:function(e){E({shellBellAudio:e})}})}),(0,a.tZ)(W.R,{}),(0,a.tZ)(g.$,{id:"webviewAutoOpenOnPortOpened",title:(0,a.BX)(a.HY,{children:[(0,a.tZ)(f.xv,{multiline:!1,children:x?"Automatic webview (unavailable in this Repl)":"Automatic webview"}),(0,a.tZ)(f.xv,{variant:"small",css:[s.l0.color.foregroundDimmest],multiline:!1,children:"Open a webview automatically when a port is open"}),x?(0,a.tZ)(c.G,{css:[s.l0.pt(8),s.l0.maxWidth("calc(100% - 12px)")],children:(0,a.tZ)(eZ.E,{colorway:"orange",text:'This preference is unavailable in Extension Repls. To view custom tools in dev mode, click the "Preview" button in Extension Devtools instead.'})}):null]}),children:(0,a.tZ)(H.r,{"aria-label":"Automatic Webview",isSelected:l.webviewAutoOpenOnPortOpened,isDisabled:x,onChange:function(e){E({webviewAutoOpenOnPortOpened:e})}})}),Z?null:(0,a.BX)(a.HY,{children:[(0,a.tZ)(W.R,{}),(0,a.tZ)(g.$,{id:"theme",title:"Theme",children:(0,a.tZ)(ea.Z,{css:[s.l0.minWidth(184),s.l0.backgroundColor.backgroundHigher],context:el.HY.WorkspacePreferencesPane})})]}),_?(0,a.BX)(a.HY,{children:[(0,a.tZ)(W.R,{}),(0,a.tZ)(g.$,{id:"chat-audio",title:(0,a.BX)(a.HY,{children:[(0,a.tZ)(f.xv,{multiline:!1,children:"Chat Audio Notifications"}),(0,a.tZ)(f.xv,{variant:"small",css:[s.l0.color.foregroundDimmest],children:"Enables playing a sound when you receive a new chat message."})]}),children:(0,a.tZ)(H.r,{"aria-label":"Chat Audio Notifications",isSelected:l.chatAudioNotification,onChange:function(e){E({chatAudioNotification:e})}})})]}):null]})}var eC=n(10981),e_=n(96003),eS=n(93496),eE=n(20399),ek=n(52924),eT=n(1128),eR=n(22487),eD=n(46053),eI=n(20573),eG=n(27308),eB=n(25961),eA=n(43208),eP=n(89788),eN=n(69119),eU=n(13900),eL=n(50199),eO=n(51384);function eM(e){var t=(0,l.useRef)(null),n=(0,l.useRef)([]);function r(){t.current&&clearTimeout(t.current),n.current=[]}function i(t){e({type:"success",shortcut:t.length>1?[t[0],t[1]]:t[0]}),r()}return{onKeyDown:function(r){var o=t.current,a=n.current;r.preventDefault(),r.stopPropagation(),o&&clearTimeout(o);var l=(0,eG.lc)(r);if(l){if((0,eG.ZG)(l)){e({type:"update",recorded:a.length?[a[0],l]:[l]});return}if(a.length>0&&"Enter"===l){i(a);return}a.push(l),e({type:"update",recorded:a});var c=2===a.length?0:600;t.current=setTimeout(function(){return i(a)},c)}},startRecording:function(){r(),e({type:"start"})},stopRecording:function(){r(),e({type:"stop"})}}}var eX=(0,eu.X)({root:[s.l0.colWithGap(8)],row:[s.l0.rowWithGap(8),s.l0.align.center,s.l0.minHeight(28)],left:[s.l0.colWithGap(2),s.l0.flex.grow(0),s.l0.flex.shrink(1)],right:[s.l0.rowWithGap(4),s.l0.align.center,s.l0.justify.end,s.l0.position.relative,s.l0.flex.grow(1),s.l0.flex.shrink(0)],recordingRow:[s.l0.flex.column,s.l0.align.center,s.l0.justify.end,s.l0.pr(24)],recordingRowInner:[s.l0.rowWithGap(8),s.l0.align.center],recordingRowKeys:[s.l0.position.relative],recordingRowHint:[s.l0.position.absolute,s.l0.top(20),s.l0.right(0),{fontStyle:"italic"}],recordingRowPlaceholder:[s.l0.display.flex,s.l0.align.baseline,s.l0.rowWithGap(4),{fontStyle:"italic"}],keys:[s.l0.display.inlineFlex,s.l0.rowWithGap(12)],secondaryText:[s.l0.display.flex,s.l0.flex.row,s.l0.align.center,s.l0.rowWithGap(4)],secondaryTextId:[s.l0.flex.grow(1),s.l0.flex.shrink(0)],secondaryTextDescription:[s.l0.flex.grow(0),s.l0.flex.shrink(1),s.l0.color.foregroundDimmest],buttons:[s.l0.pl(8),s.l0.display.flex,s.l0.flex.row]}),eF=[s.l0.reset.button,eS.gU.listItem,s.l0.height(24),s.l0.width(24),s.l0.p(2)],eW=(0,eu.X)({root:[s.l0.rowWithGap(8),s.l0.align.center],recordingRow:[s.l0.rowWithGap(4),s.l0.align.center]});function eH(e){var t,n,r,i,o=e.command,s=e.filter,u=(0,e_.r3)(),d=(0,e_.wU)(),h=(0,e_.V_)(o.id),p=(0,b._)((0,l.useState)(null),2),m=p[0],v=p[1],g=(0,b._)((0,l.useState)(null),2),w=g[0],x=g[1],C=eM(function(e){switch(e.type){case"start":x({recorded:[]}),v(null);return;case"stop":x(null),v(null);return;case"update":x({recorded:e.recorded}),v(null);return;case"success":var t=(0,eG.SG)(e.shortcut);if(!t){x(null),v(null);return}var n=u(o.id,t);if(n){x(null),v('This shortcut conflicts with "'.concat(n.conflict.name,'"'));return}x(null);return;case"error":x(function(t){var n;return{error:e.message,recorded:null!==(n=null==t?void 0:t.recorded)&&void 0!==n?n:[]}});return}}),_=C.stopRecording,S=C.startRecording,E=C.onKeyDown,k=(0,eR.Z)(function(){return _()},[]),T=!!w;eY(T);var R=null!==(i=null==w?void 0:w.recorded)&&void 0!==i?i:[],D=null==w?void 0:w.error,I=s.length>0,G=null===(t=eA.Z.match(s,o.name))||void 0===t?void 0:t.ranges,B=null===(n=eA.Z.match(s,o.id))||void 0===n?void 0:n.ranges,A=(null==o?void 0:o.description)?null===(r=eA.Z.match(s,o.description))||void 0===r?void 0:r.ranges:void 0,P=(0,eL.Z)(function(){return s.replaceAll('"',"").split("-").map(function(e){return e.toLowerCase()})},[s]),N=[{label:"Remove",key:"remove"}];h&&h!==o.shortcut&&N.push({label:"Reset",key:"reset"});var U=(0,eL.Z)(function(){return function(e){switch(e){case"remove":d(o.id);break;case"reset":var t=u(o.id,h);t&&v("".concat(h,' conflicts with "').concat(t.conflict.name,'"'))}}},[o.id,h,u,d]);return(0,a.BX)(c.G,{css:eX.root,children:[(0,a.BX)(c.G,{css:eX.row,children:[(0,a.BX)(c.G,{css:eX.left,children:[(0,a.tZ)(eN.x,{text:o.name,highlight:G,dimmed:I}),(0,a.BX)(f.xv,{variant:"small",css:eX.secondaryText,multiline:!1,children:[I?(0,a.tZ)(eN.x,{css:eX.secondaryTextId,text:o.id,highlight:B,dimmed:I}):null,o.description?(0,a.BX)(a.HY,{children:[I?(0,a.tZ)(f.xv,{color:"dimmest",multiline:!1,children:"•"}):null,(0,a.tZ)(eN.x,{css:eX.secondaryTextDescription,text:o.description,highlight:A,dimmed:I})]}):null]})]}),(0,a.BX)(c.G,{innerRef:T?k:void 0,css:eX.right,children:[T?(0,a.tZ)(eD.MT,{autoFocus:!0,restoreFocus:!0,children:(0,a.tZ)("input",{onKeyDown:E,css:{opacity:0,width:1}})}):null,o.shortcut&&!T?(0,a.tZ)(eB.bM,{small:!0,keyCombo:o.shortcut,match:P}):null,o.shortcut||T?null:(0,a.tZ)(Z.zx,{size:"small",variant:"outlined",iconLeft:(0,a.tZ)(ef.Z,{}),text:"Add shortcut",onClick:function(){return S()}}),T?(0,a.tZ)(c.G,{css:eX.recordingRow,children:(0,a.BX)(c.G,{css:eX.recordingRowInner,children:[(0,a.tZ)(c.G,{css:eX.recordingRowKeys,children:R.length>0?(0,a.tZ)(c.G,{css:[eX.keys],children:R.map(function(e,t){return(0,a.tZ)(eB.bM,{small:!0,keyCombo:e},"".concat(e,"-").concat(t))})}):(0,a.tZ)(f.xv,{multiline:!1,color:"dimmest",css:eX.recordingRowPlaceholder,children:"Recording..."})}),(0,a.tZ)(y.hU,{alt:"Stop",onClick:function(){return _()},children:(0,a.tZ)(eK,{})})]})}):null,o.shortcut&&!T?(0,a.BX)(c.G,{css:eX.buttons,children:[(0,a.tZ)(y.hU,{alt:"Change",onClick:function(){return S()},children:(0,a.tZ)(ek.Z,{})}),(0,a.tZ)(eE.ZE,{"aria-label":"More",cssProps:eF,items:N,icon:(0,a.tZ)(eU.Z,{size:12}),placement:"bottom-end",onAction:U,children:N.map(function(e){return(0,a.tZ)(eE.ck,{textValue:e.label,children:(0,a.tZ)(f.xv,{multiline:!1,children:e.label})},e.key)})})]}):null]})]}),D?(0,a.tZ)(eZ.E,{icon:(0,a.tZ)(eI.Z,{}),colorway:"warning",text:D,closable:!0,closeAction:function(){return x(function(e){var t;return{recorded:null!==(t=null==e?void 0:e.recorded)&&void 0!==t?t:[]}})}}):null,m?(0,a.tZ)(eZ.E,{icon:(0,a.tZ)(eI.Z,{}),colorway:"warning",text:m,closable:!0,closeAction:function(){return v(null)}}):null]})}function eV(e){var t=e.flat();return t.length>1?t.map(function(e){return eV([e])}).join(" "):(0,eG.QR)(t[0]).map(function(e){return'"'.concat(e,'"')}).join("-").replaceAll(" ","space")}var ez=(0,eu.X)({root:[s.l0.colWithGap(8),s.l0.p(0)],surface:[s.l0.pt(8),s.l0.borderRadius(8),s.l0.colWithGap(12)]});function ej(e){var t=(0,b._)((0,l.useState)(""),2),n=t[0],r=t[1];function i(t){r(t),l.startTransition(function(){return e.onSearch(t)})}var o=(0,l.useRef)(null),s=(0,b._)((0,l.useState)(!1),2),u=s[0],d=s[1];eY(u);var h=eM(function(e){var t,n,r;switch(e.type){case"start":d(!0),i(""),null==o||null===(t=o.current)||void 0===t||t.focus();return;case"stop":case"error":d(!1),null==o||null===(n=o.current)||void 0===n||n.focus(),null==o||null===(r=o.current)||void 0===r||r.select();return;case"success":i(eV([e.shortcut]));return;case"update":i(eV(e.recorded));return}}),p=h.stopRecording,m=h.startRecording,v=h.onKeyDown;return(0,a.BX)(c.G,{css:eW.root,children:[(0,a.tZ)(eD.MT,{children:(0,a.tZ)(ee.II,{ref:o,placeholder:u?"Recording keys. Press Escape to exit":"Type to search keyboard shortcuts",onBlur:u?p:void 0,onChange:function(e){i(e.currentTarget.value)},onKeyDown:u?function(e){"Escape"===e.key?p():v(e)}:void 0,value:n})}),(0,a.tZ)(c.G,{css:eW.recordingRow,children:u?(0,a.BX)(a.HY,{children:[(0,a.tZ)(f.xv,{color:"dimmest",css:[{fontStyle:"italic"}],multiline:!1,children:"Recording..."}),(0,a.tZ)(y.hU,{alt:"Stop Recording",onClick:p,children:(0,a.tZ)(eK,{})})]}):(0,a.tZ)(y.hU,{alt:"Record Keys",onClick:m,children:(0,a.tZ)(eP.Z,{})})}),(0,a.tZ)(y.hU,{alt:"Clear Input",disabled:0===n.length,onClick:function(){var e;r(""),null==o||null===(e=o.current)||void 0===e||e.focus()},children:(0,a.tZ)(ed.Z,{})})]})}function eq(){var e=(0,b._)((0,l.useState)(""),2),t=e[0],n=e[1],r=(0,e_.xF)(),i=(0,eL.Z)(function(){return(0,d._)(r.values())},[r]),o=l.useMemo(function(){return eA.Z.filter(t,i,{extract:function(e){var t="".concat(e.name," ").concat(e.id);return e.description&&(t+=" ".concat(e.description)),e.shortcut&&(t+=" ".concat(eV([e.shortcut]))),t}})},[t,i]);return(0,a.BX)(c.G,{css:ez.root,children:[(0,a.tZ)(ej,{onSearch:n}),o.length>0?(0,a.tZ)(h.Tg,{css:ez.surface,children:o.map(function(e,n){return(0,a.BX)(l.Fragment,{children:[n>0?(0,a.tZ)(h.Tg,{elevated:!0,style:{height:1}}):null,(0,a.tZ)(eH,{command:e.original,filter:t})]},e.original.id)})}):null]})}function eY(e){var t="You have unsaved changes";(0,l.useEffect)(function(){var n=function(e){return e.preventDefault(),e.returnValue=t,t};if(e)return window.addEventListener("beforeunload",n),function(){window.removeEventListener("beforeunload",n)}},[e])}var e$=(0,eO.F4)("0%{transform:scale(1);}40%{transform:scale(1.3);}100%{transform:scale(1);}"),eJ=(0,eu.X)({background:[{animationName:e$,animation:"".concat(e$," 2s cubic-bezier(0.4, 0, 0.6, 1) infinite"),boxShadow:"0 0 10px ".concat(s.TV.redStronger)},s.l0.height(11),s.l0.width(11),s.l0.borderRadius("full"),s.l0.position.absolute],container:[s.l0.position.relative,s.l0.align.center,s.l0.justify.center],icon:[{zIndex:1}]});function eK(){return(0,a.BX)(c.G,{css:eJ.container,children:[(0,a.tZ)(eT.Z,{css:eJ.icon,color:s.TV.redStronger}),(0,a.tZ)(c.G,{css:eJ.background})]})}function eQ(){var e=(0,eC.U)()("keyboard_shortcuts");return(0,a.BX)(h.Tg,{background:"default",css:[s.l0.px(16),s.l0.pb(16),s.l0.colWithGap(12)],children:[(0,a.tZ)(c.G,{tag:"label",htmlFor:e}),(0,a.tZ)(eq,{})]})}var e0=n(83447);function e1(e){var t=e.hideLayoutControl,n=e.resetLayout,r=(0,u.T3)();return(0,a.BX)(a.HY,{children:[(0,a.BX)(c.G,{css:[s.l0.flex.column,s.l0.justify.center,s.l0.px(16),s.l0.py(8)],children:[(0,a.tZ)(f.h4,{variant:"subheadBig",level:3,children:"User Settings"}),(0,a.tZ)(f.xv,{variant:"small",css:[{fontStyle:"italic"},s.l0.color.foregroundDimmer],children:"The following settings apply to your account and will be used across all your Repls."})]}),r?(0,a.tZ)(ex,{hideLayoutControl:t,resetLayout:n}):(0,a.tZ)(c.G,{children:(0,a.BX)(e0.mQ,{css:[{width:"100%"}],children:[(0,a.BX)(e0.td,{withDividers:!1,css:[{"[aria-selected=true]":[s.l0.fontWeight.medium]}],children:[(0,a.tZ)(e0.OK,{css:[s.l0.py(8),s.l0.px(16)],children:"Editor preferences"}),(0,a.tZ)(e0.OK,{css:[s.l0.py(8),s.l0.px(16)],children:"Keyboard shortcuts"})]}),(0,a.BX)(e0.nP,{children:[(0,a.tZ)(e0.x4,{children:(0,a.tZ)(ex,{resetLayout:n})}),(0,a.tZ)(e0.x4,{children:(0,a.tZ)(eQ,{})})]})]})})]})}},71241:function(e,t,n){n.d(t,{BZ:function(){return _},HX:function(){return x},WM:function(){return k},ap:function(){return A},gF:function(){return D},l9:function(){return T},vi:function(){return G},zu:function(){return E}});var r=n(45903),i=n(93295),o=n(23982),a=n(78747),l=n(11707),c=n(83436),s=n(63204),u=n(51780),d=n(56353),f=n(77393),h=n(72986);function p(){var e=(0,i._)(["\n  fragment WorkspaceHeaderReplInfoRepl on Repl {\n    id\n    title\n    rawTemplateLabel: templateLabel(disableFallbackToTitle: true)\n    description\n    isPrivate\n    isRenamed\n    url\n    slug\n    workspaceCta\n    lastPublishedAt\n    publishedAs\n    owner {\n      ... on Team {\n        id\n      }\n      ... on User {\n        id\n      }\n    }\n    currentUserPermissions {\n      containerAttach\n      changeIconUrl\n      changeTemplateLabel\n      changeTitle\n      changeDescription\n      changePrivacy\n      delete\n      changeAlwaysOn\n      publish\n      fork\n    }\n    hostingDeployment {\n      ... on HostingDeployment {\n        id\n        currentBuild {\n          id\n        }\n      }\n    }\n    hostingDeploymentPermissions {\n      canDeploy\n    }\n    user {\n      id\n      image\n      ...UserLinkUser\n    }\n    ...WorkspaceHeaderReplMetadataRepl\n    ...ReplEnvironmentWebviewRepl\n    ...PublishReleaseFormRepl\n    ...BulkDeleteConfirmationModalRepl\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return p=function(){return e},e}function m(){var e=(0,i._)(["\n  query WorkspaceHeaderReplInfo($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        ...WorkspaceHeaderReplInfoRepl\n      }\n    }\n  }\n  ","\n"]);return m=function(){return e},e}function v(){var e=(0,i._)(["\n  query CurrentUserStates {\n    currentUser {\n      __typename\n      ... on CurrentUser {\n        id\n      }\n    }\n  }\n"]);return v=function(){return e},e}function g(){var e=(0,i._)(["\n  query ReplPowerUpStatus {\n    currentUser {\n      __typename\n      ... on CurrentUser {\n        id\n        userPowerUpsByType {\n          ... on UserPowerUpsTypes {\n            privateRepls {\n              active\n              cost {\n                cycles\n                explanation\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return g=function(){return e},e}function y(){var e=(0,i._)(["\n  mutation WorkspaceHeaderReplInfoUnpublishTemplate(\n    $input: DeleteReplDeploymentInput!\n  ) {\n    deleteReplDeployment(input: $input) {\n      ... on Repl {\n        id\n        ...PublishReplData\n      }\n    }\n  }\n  ","\n"]);return y=function(){return e},e}function b(){var e=(0,i._)(["\n  mutation WorkspaceHeaderReplInfoUpdateRepl($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        ...WorkspaceHeaderReplInfoRepl\n      }\n    }\n  }\n  ","\n"]);return b=function(){return e},e}function Z(){var e=(0,i._)(["\n  mutation WorkspaceHeaderReplInfoDeleteRepl($id: String!) {\n    deleteRepl(id: $id) {\n      id\n    }\n  }\n"]);return Z=function(){return e},e}var w={},x=(0,o.Ps)(p(),a._,l.s,c.sY,s.wd,u.d),C=(0,o.Ps)(m(),x);function _(e){var t=(0,r._)({},w,e);return f.a(C,t)}var S=(0,o.Ps)(v());function E(e){var t=(0,r._)({},w,e);return f.a(S,t)}var k=(0,o.Ps)(g());function T(e){var t=(0,r._)({},w,e);return f.a(k,t)}var R=(0,o.Ps)(y(),d.FW);function D(e){var t=(0,r._)({},w,e);return h.D(R,t)}var I=(0,o.Ps)(b(),x);function G(e){var t=(0,r._)({},w,e);return h.D(I,t)}var B=(0,o.Ps)(Z());function A(e){var t=(0,r._)({},w,e);return h.D(B,t)}},32604:function(e,t,n){n.d(t,{Z:function(){return e3}});var r=n(45903),i=n(25e3),o=n(32477),a=n(8182),l=n(94450),c=n.n(l),s=n(48900),u=n(43429),d=n(14819),f=n(38889),h=n(46835),p=n(60427),m=n(56337),v=n(68399),g=n(7444),y=n(55534),b=n(50782),Z=n(6189),w=n(22004),x=n(59868),C=n(73614),_=n(4895),S=n(34142),E=n(39698),k=n(87682),T=n(56596),R=n(74833),D=n(29287),I=n(18836),G=n(1498),B=n(37951),A=n(30983),P=n(60769),N=n(10981),U=n(75582),L=n(63204),O=n(72310),M=n(20573),X=n(81799),F=n(93295),W=n(23982),H=n(77393);function V(){var e=(0,F._)(["\n  query PendingChanges($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        deployment {\n          id\n          activeRelease {\n            id\n            pendingChanges {\n              fileName\n              changeType\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return V=function(){return e},e}var z={},j=(0,W.Ps)(V()),q=n(66555),Y=n(72986);function $(){var e=(0,F._)(["\n  mutation RevertTemplateRelease($input: RevertReplReleaseInput!) {\n    revertReplRelease(input: $input) {\n      ... on Repl {\n        id\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n"]);return $=function(){return e},e}var J={},K=(0,W.Ps)($()),Q=n(88936),ee=n(57468),et=n(48459),en=n(19659),er=n(83109),ei=n(73524),eo=T.K.form;function ea(e){if(0===e.length)return{message:"You cannot leave this empty."}}function el(e){var t,n,r=e.changeType;return r===U.J5.NewFile?(t=D.TV.accentPositiveStronger,n="Added"):r===U.J5.DeletedFile?(t=D.TV.accentNegativeStronger,n="Deleted"):(t=D.TV.foregroundDefault,n="Changed"),(0,a.tZ)(R.xv,{variant:"small",css:[{color:t}],multiline:!1,children:n})}function ec(e){var t=e.pendingChangesState,n=e.isReplitTemplate;if(t.loading)return(0,a.tZ)(T.G,{css:[D.l0.center],children:(0,a.tZ)(Q.Z,{})});if(t.error)return(0,a.tZ)(B.E,{icon:(0,a.tZ)(M.Z,{}),text:t.error.message||"Could not load modified files - please try again.",colorway:"negative"});if(!t.pendingChanges||0===t.pendingChanges.length)return n?null:(0,a.tZ)(R.xv,{children:"No changes to publish. Come back when you have made changes to your Repl."});var r=t.pendingChanges,i=r.slice(0,15);return(0,a.BX)(T.G,{css:[{display:"grid",gridTemplateColumns:"1fr 1fr",gap:D.TV.space8}],children:[i.map(function(e){return(0,a.BX)(u.Fragment,{children:[(0,a.BX)(T.G,{css:[D.l0.rowWithGap(4),D.l0.align.center],children:[(0,a.tZ)(ee.Z,{size:12,path:e.fileName}),(0,a.tZ)(R.xv,{multiline:!1,children:e.fileName})]},e.fileName),(0,a.tZ)(el,{changeType:e.changeType})]},e.fileName)}),r.length>i.length&&(0,a.BX)(R.xv,{multiline:!1,children:["And ",r.length-i.length," other files..."]})]})}function es(e){var t,n=e.repl,i=function(){var e,t=(0,o._)((e=(0,r._)({},J,{refetchQueries:["ReplEnvironmentHeader"]}),Y.D(K,e)),2),n=t[0];function i(){return(i=(0,S._)(function(e){var t;return(0,k.Jh)(this,function(r){switch(r.label){case 0:return[4,n({variables:{input:e.input}})];case 1:return[2,{data:(t=r.sent()).data,error:function(e){if(!e.data)return null;var t=e.data;if("revertReplRelease"in t){if("NotFoundError"===t.revertReplRelease.__typename||"UnauthorizedError"===t.revertReplRelease.__typename||"UserError"===t.revertReplRelease.__typename)return t.revertReplRelease.message;if("Repl"!==t.revertReplRelease.__typename)return"Something went wrong reverting your Template"}}(t)}]}})})).apply(this,arguments)}return{revertTemplateRelease:function(e){return i.apply(this,arguments)},state:t[1]}}(),l=(t=(0,S._)(function(e){return(0,k.Jh)(this,function(t){switch(t.label){case 0:return[4,i.revertTemplateRelease({input:{replId:n.id,releaseId:e}})];case 1:return t.sent(),[2]}})}),function(e){return t.apply(this,arguments)});return(0,a.BX)(T.G,{children:[(0,a.tZ)(R.h4,{level:1,variant:"subheadBig",css:[D.l0.mb(16)],children:"Existing Releases"}),(0,a.tZ)(T.G,{css:[{display:"grid",gridTemplateColumns:"2fr 3fr 1fr",gap:D.TV.space8}],children:n.releases.items.map(function(e){var t,r;return(0,a.BX)(u.Fragment,{children:[(0,a.tZ)("span",{children:(0,er.Z)(new Date(e.timeCreated),"do MMM, hh:mm a")}),(0,a.tZ)("span",{children:e.description}),(0,a.tZ)("span",{style:{justifySelf:"end"},children:e.id===(null===(r=n.deployment)||void 0===r?void 0:null===(t=r.activeRelease)||void 0===t?void 0:t.id)?(0,a.tZ)("span",{css:[D.l0.p(4),{display:"flex"}],children:"(active)"}):(0,a.tZ)(G.zx,{text:"revert",colorway:"primary",size:"small",onClick:function(){l(e.id)}})})]},e.id)})})]})}function eu(e){var t=e.children;return(0,a.tZ)(T.G,{css:[D.l0.rowWithGap(8),D.l0.py(2)],children:t})}function ed(e){var t,n,l,c,s,d,f,h,p,m=e.repl,v=(0,N.U)(),g=(0,o._)(u.useState(!1),2),y=g[0],b=g[1],Z=(0,o._)(u.useState(!1),2),w=Z[0],x=Z[1],C=(t=function(e){var t,n,i,o,a=(i={variables:{replId:e.replId},fetchPolicy:"cache-and-network",ssr:!1},o=(0,r._)({},z,i),H.a(j,o)),l=a.data,c=a.loading,s=a.error;if(c)return{loading:c,pendingChanges:null,error:null};if(s)return{loading:!1,pendingChanges:null,error:s};var u=(null==l?void 0:l.repl.__typename)==="Repl"?l.repl:null;return u?{loading:!1,pendingChanges:(null===(n=u.deployment)||void 0===n?void 0:null===(t=n.activeRelease)||void 0===t?void 0:t.pendingChanges)||[],error:s}:{loading:!1,pendingChanges:null,error:Error("Repl not found")}}({replId:{replId:m.id}.replId}),n=u.useMemo(function(){return t.pendingChanges?t.pendingChanges.slice().sort(function(e,t){return e.fileName.localeCompare(t.fileName)}).map(function(e){return{file:e,pathDepth:(0,en.U$)(e.fileName)}}).sort(function(e,t){return e.pathDepth-t.pathDepth}).map(function(e){return e.file}):[]},[t.pendingChanges]),(0,i._)((0,r._)({},t),{pendingChanges:n})),_=(0,q.r)(),P=(0,O.Y)("",ea),U=(null===(c=C.pendingChanges)||void 0===c?void 0:c.length)!==0,L=(null===(s=m.user)||void 0===s?void 0:s.username)===ei.IU||(null===(d=m.user)||void 0===d?void 0:d.username)==="templates",F=(0,o._)((0,u.useState)({ran:!1,tested:!1}),2),W=F[0],V=F[1];u.useEffect(function(){V({ran:!1,tested:!1})},[V]);var Y=!!(P.error||!L&&!U||_.loading||L&&(!W.ran||!W.tested)),$=L&&(null===(h=m.releases)||void 0===h?void 0:null===(f=h.items)||void 0===f?void 0:f.length)>1,J="";return(P.error?J="Please fill out the form":L||U||(J="No changes to publish in this release"),y)?(0,a.tZ)(et.q,{repl:m,isUpdate:!0}):w?(0,a.tZ)(T.G,{css:[D.l0.p(16),D.l0.colWithGap(16)],children:(0,a.tZ)(es,{repl:m})}):(0,a.BX)(eo,{onSubmit:(l=(0,S._)(function(e){return(0,k.Jh)(this,function(t){switch(t.label){case 0:if(e.preventDefault(),Y||P.validate())return[2];return[4,_.createRelease({input:{replId:m.id,description:P.value}})];case 1:if(t.sent().error)return[2];return b(!0),[2]}})}),function(e){return l.apply(this,arguments)}),css:[D.l0.colWithGap(24),D.l0.p(16)],children:[(0,a.tZ)(R.h4,{level:1,variant:"headerDefault",children:"Publish a new release"}),(0,a.BX)(T.G,{css:[D.l0.colWithGap(8)],children:[(0,a.tZ)(R.h4,{level:2,variant:"subheadDefault",children:"Modified files"}),(0,a.tZ)(ec,{pendingChangesState:C,isReplitTemplate:L})]}),L||U?(0,a.BX)(T.G,{css:[D.l0.colWithGap(4)],children:[(0,a.tZ)("label",{htmlFor:v("description"),css:[D.l0.color.foregroundDimmer,{fontSize:D.TV.fontSizeSmall,lineHeight:D.TV.lineHeightSmall}],children:"Description"}),(0,a.tZ)(I.B,{id:v("description"),"aria-label":"Description",onChange:function(e){return P.setValue(e.target.value)},css:[D.l0.width("100%"),D.l0.minHeight(64),D.l0.maxHeight(128),{resize:"vertical"}],placeholder:"Explain what has changed about your template"}),P.error?(0,a.tZ)(B.E,{icon:(0,a.tZ)(M.Z,{}),text:null===(p=P.error)||void 0===p?void 0:p.message,colorway:"negative"}):null]}):null,L?(0,a.tZ)(ef,{repl:m,state:W,onChange:function(e,t){return V(function(n){return(0,i._)((0,r._)({},n),(0,E._)({},e,t))})}}):null,(0,a.tZ)(T.G,{children:_.error?(0,a.tZ)(B.E,{icon:(0,a.tZ)(M.Z,{}),text:_.error,colorway:"negative"}):null}),(0,a.BX)(T.G,{css:[D.l0.rowWithGap(12),D.l0.justify.end],children:[$?(0,a.tZ)(G.zx,{text:"Revert to older",colorway:"negative",onClick:function(){return x(!0)}}):null,(0,a.tZ)(A.u,{tooltip:J,placement:"bottom",isDisabled:!J,children:(0,a.tZ)(G.zx,{text:"Publish release",type:"submit",colorway:"primary",iconLeft:(0,a.tZ)(X.Z,{}),disabled:Y})})]})]})}function ef(e){var t,n,r,i=e.repl,o=e.state,l=e.onChange,c=(0,N.U)(),s=(0,L.e9)(),u=s.data,d=s.loading,f=null==u?void 0:null===(t=u.currentUser)||void 0===t?void 0:t.username;return(0,a.BX)(T.G,{css:[D.l0.colWithGap(12)],children:[(0,a.tZ)(R.h4,{level:2,children:"Official Replit Template publishing checklist"}),(0,a.BX)(T.G,{children:[(0,a.BX)(eu,{children:[(0,a.tZ)(P.X,{id:c("ran"),checked:o.ran,onChange:function(e){return l("ran",e.target.checked)}}),(0,a.tZ)("label",{htmlFor:c("ran"),children:"Ran Repl:"}),(0,a.BX)("span",{children:["I ran the Repl to generate and cache package guesser result into"," ",(0,a.tZ)("code",{children:".upm"}),"."]})]}),(0,a.BX)(eu,{children:[(0,a.tZ)(P.X,{id:c("tested"),checked:o.tested,onChange:function(e){return l("tested",e.target.checked)}}),(0,a.tZ)("label",{htmlFor:c("tested"),children:"Ran tests:"}),(0,a.BX)("span",{children:['I ran "Test working copy" for @',null===(n=i.user)||void 0===n?void 0:n.username,"/",i.slug," in"," ",(0,a.tZ)("a",{href:"https://template-tester.replit.app/",target:"_blank",children:"template tester"}),". ",(0,a.tZ)("br",{}),"If there are no tests, consider adding one."]})]})]}),d||(null===(r=i.user)||void 0===r?void 0:r.username)!==f?null:(0,a.tZ)(B.E,{text:"You can't publish an update while impersonating. Add yourself as a member of the 'replit' team using CLUI tool 'add-remove-team-member', then open this Repl from your account.",colorway:"negative"})]})}var eh=n(25061),ep=n(5693),em=n(5315),ev=n(15053),eg=n(59639),ey=n(49344),eb=n(38080),eZ=n(29479),ew=n(7877),ex=n(39390),eC=n(97411),e_=n(78272),eS=n(94106),eE=n(40028),ek=n(71241),eT=n(78066),eR=n(52924),eD=n(85805),eI=n(35972),eG=n(6620),eB=n(43973),eA=n(88205);function eP(e){var t=u.useRef(null),n=(0,o._)(u.useState(e.value),2),r=n[0],i=n[1],l=(0,o._)(u.useState(null),2),s=l[0],d=l[1],f=(0,eD.Z)({onUpload:function(t){var n=t.url;e.onChange(n)},onUploadPreview:function(e){i(e.dataUrl)},onError:function(e){d(e.message)}});u.useEffect(function(){i(e.value)},[e.value]);var h=null==r?void 0:r.startsWith("data:");return(0,a.BX)(eI.gC,{spacing:"var(--space-4)",children:[(0,a.BX)("div",{onClick:function(){var e;null===(e=t.current)||void 0===e||e.click()},"aria-label":r?"Change icon":"Upload an icon","data-microtip-position":"right",role:"tooltip",className:c().dynamic([["649b73688aef77e0",[32,32]]])+" "+((r?"update-icon":"add-icon")||""),children:[r?(0,a.BX)(a.HY,{children:[(0,a.tZ)(eT.Z,{iconUrl:r,size:32,alt:"icon"}),h?(0,a.tZ)("div",{className:c().dynamic([["649b73688aef77e0",[32,32]]])+" loading-state",children:(0,a.tZ)("div",{className:c().dynamic([["649b73688aef77e0",[32,32]]])+" loading-icon",children:(0,a.tZ)(Q.Z,{})})}):(0,a.tZ)("div",{className:c().dynamic([["649b73688aef77e0",[32,32]]])+" hover-state",children:(0,a.tZ)(eR.Z,{})})]}):(0,a.tZ)(eG.Z,{}),(0,a.tZ)("input",{ref:t,accept:eB.W9.join(","),type:"file",onChange:function(e){var t=e.target,n=t.validity,r=t.files;n.valid&&(null==r?void 0:r.length)&&(d(null),f.uploadImage(r[0],eA.N.TemplateIcon))},className:c().dynamic([["649b73688aef77e0",[32,32]]])})]}),s?(0,a.tZ)("div",{className:c().dynamic([["649b73688aef77e0",[32,32]]])+" error",children:s}):null,(0,a.tZ)(c(),{id:"649b73688aef77e0",dynamic:[32,32],children:".add-icon.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;border:1px dashed var(--foreground-dimmest);background-color:var(--background-root);width:".concat(32,"px;height:").concat(32,"px}.add-icon.__jsx-style-dynamic-selector:hover{color:var(--accent-primary-default);border-color:var(--accent-primary-default)}.add-icon.__jsx-style-dynamic-selector,.update-icon.__jsx-style-dynamic-selector{position:relative;cursor:pointer;background-color:var(--background-higher);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);padding:2px}.update-icon.__jsx-style-dynamic-selector:hover .hover-state.__jsx-style-dynamic-selector{opacity:.8}.hover-state.__jsx-style-dynamic-selector{opacity:0}.loading-state.__jsx-style-dynamic-selector{opacity:.8}.loading-icon.__jsx-style-dynamic-selector{-webkit-animation:rotate 1s linear infinite;-moz-animation:rotate 1s linear infinite;-o-animation:rotate 1s linear infinite;animation:rotate 1s linear infinite;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}@-webkit-keyframes rotate{from{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-moz-keyframes rotate{from{-moz-transform:rotate(0deg);transform:rotate(0deg)}to{-moz-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes rotate{from{-o-transform:rotate(0deg);transform:rotate(0deg)}to{-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes rotate{from{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}.hover-state.__jsx-style-dynamic-selector,.loading-state.__jsx-style-dynamic-selector{color:var(--accent-primary-default);position:absolute;top:0;left:0;width:100%;height:100%;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);background-color:var(--background-root);overflow:hidden;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}input.__jsx-style-dynamic-selector{opacity:0;position:absolute;top:0;left:0;width:100%;height:100%;z-index:-1}.error.__jsx-style-dynamic-selector{font-size:var(--font-size-default);color:var(--accent-negative-default)}")})]})}var eN=n(25770),eU=n(79378),eL=n(70002),eO=n(15146),eM=n(5542),eX=n(74883),eF=n(58719),eW=n(80339),eH=n(98859),eV=n(8271),ez=n(52682),ej=n(89106),eq=n(20399),eY=n(93918),e$=n(8017),eJ=n(13900),eK=n(31811),eQ=n(24635),e0=n(48528),e1=(0,eY.X)({destructiveMenuItem:[D.l0.color.accentNegativeStronger]});function e2(e){var t=e.repl,n=(0,m.Z)(),o=(0,u.useMemo)(function(){return t.user?{text:t.user.username,css:[{"&, & span":D.l0.flex.shrink(1)}],iconLeft:(0,a.tZ)(eU.q,{src:t.user.image,username:t.user.username})}:{text:""}},[t]);if(!t.user)return null;var l=(0,eM.Ru)(t.user);return n?(0,a.tZ)(G.zx,(0,i._)((0,r._)({},o),{onClick:function(){ej.X.openExternalUrl(l.as)}})):(0,a.tZ)(eL.Z,(0,i._)((0,r._)({},o,l),{prefetch:!1}))}function e8(e){var t=e.setActiveDialog,n=e.repl,o=e.isTemplate,l=e.updateIconUrl,c=e.showCloseButton,s=e.setIsEditing,u=e.updateReplInfo,d=(0,eK.Z)(),h=!!n.publishedAs,p=n.currentUserPermissions.publish,v=(0,m.Z)(),g=!(null==n?void 0:n.publishedAs)&&!v,y=(null==n?void 0:n.publishedAs)===U.O2.RegularRepl,b=(0,f.g)().fork,Z=[];n.currentUserPermissions.fork&&Z.push({value:eQ.$.Fork,label:"Fork",icon:(0,a.tZ)(eV.Z,{})}),n.publishedAs===U.O2.RegularRepl&&p&&!v&&Z.push({value:eQ.$.Unpublish,label:"Unpublish",icon:(0,a.tZ)(eH.Z,{})}),o&&p&&!v&&Z.push({value:eQ.$.UnpublishTemplate,label:"Unpublish template",icon:(0,a.tZ)(eH.Z,{})}),h&&p&&!v&&Z.push({value:eQ.$.EditPublishSettings,label:"Edit Publish Settings",icon:(0,a.tZ)(eR.Z,{})}),n.currentUserPermissions.delete&&Z.push({isDestructive:!0,value:eQ.$.Delete,label:"Delete",icon:(0,a.tZ)(ez.Z,{})});var w=(null==n?void 0:n.isPrivate)||!(null==n?void 0:n.isRenamed),x="";return(null==n?void 0:n.isPrivate)?x="This Repl is private. You need to make it public in order to publish it!":(null==n?void 0:n.isRenamed)||(x="You need to give this Repl a name before publishing it."),(0,a.BX)(T.G,{css:[D.l0.colWithGap(8),D.l0.p(8)],children:[(0,a.BX)(T.G,{css:[D.l0.rowWithGap(8),D.l0.align.center,D.l0.justify.spaceBetween,(0,E._)({},D.BC.max("mobileMax"),[D.l0.flex.columnReverse,D.l0.align.start,{gap:D.TV.space8}])],children:[(0,a.BX)(T.G,{css:[D.l0.rowWithGap(8),D.l0.center,D.l0.flex.shrink(1)],children:[(0,a.tZ)(e2,{repl:n}),n.currentUserPermissions.changeIconUrl&&o?(0,a.tZ)(eP,{value:n.iconUrl,onChange:l}):null]}),(0,a.BX)(T.G,{css:[D.l0.align.center,D.l0.rowWithGap(8),(0,E._)({},D.BC.max("mobileMax"),{width:"100%",">*:not(div)":{flex:1}})],children:[v?null:(0,a.tZ)(eL.Z,(0,i._)((0,r._)({prefetch:!1},(0,eN.j3)(n)),{iconLeft:(0,a.tZ)(eW.Z,{}),colorway:"primary",text:"Cover page",target:"_blank"})),p&&g&&!d?(0,a.tZ)(A.u,{tooltip:x,isDisabled:!w,children:(0,a.tZ)(G.zx,{type:"button",iconLeft:(0,a.tZ)(eG.Z,{}),onClick:function(){t(eQ.x.Publish)},dataCy:"ws-publish-button",text:"Publish",disabled:w})}):null,o&&!v?(0,a.tZ)(G.zx,{type:"button",iconLeft:(0,a.tZ)(eG.Z,{}),onClick:function(){return t(eQ.x.UpdatePublishedTemplate)},text:"Update"}):null,y&&!v?(0,a.tZ)(G.zx,{type:"button",iconLeft:(0,a.tZ)(eX.Z,{}),onClick:function(){return t(eQ.x.UpdatePublishedRepl)},text:"Update"}):null,v?(0,a.tZ)(e0.j,{textToCopy:window.location.href,alt:"Copy Repl URL",tooltip:"Copied!",tooltipPlacement:"bottom-end",timeout:2e3,children:(0,a.tZ)(e$.Z,{})}):null,Z.length>0&&(0,a.tZ)(eq.ZE,{icon:(0,a.tZ)(eJ.Z,{size:16}),"aria-label":o?"Template Actions":"Repl Actions",cssProps:[D.l0.backgroundColor.backgroundDefault],placement:"bottom-end",onAction:function(e){switch(e){case eQ.$.Fork:b();return;case eQ.$.Unpublish:t(eQ.x.Unpublish);return;case eQ.$.UnpublishTemplate:t(eQ.x.UnpublishTemplate);return;case eQ.$.Delete:t(eQ.x.DeleteRepl);return;case eQ.$.EditPublishSettings:t(eQ.x.EditPublishSettings)}},children:Z.map(function(e){return(0,a.tZ)(eq.ck,{children:(0,a.BX)(T.G,{css:[D.l0.rowWithGap(8),e.isDestructive&&e1.destructiveMenuItem],children:[e.icon,(0,a.tZ)(T.G,{children:e.label})]})},e.value)})}),c?(0,a.tZ)(eO.hU,{alt:"Close",tooltipHidden:!0,onClick:function(){u(),s(!1)},children:(0,a.tZ)(eF.Z,{})}):null]})]}),n.lastPublishedAt&&p?(0,a.BX)(R.xv,{variant:"small",color:"dimmest",multiline:!1,children:["Last published on"," ",new Date(n.lastPublishedAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})]}):null]})}var e4={query:v.s8};function e3(e){var t=e.setIsEditing,n=e.showCloseButton,r=e.onDeployClick,i=(0,b.Z)(),o=(0,ek.BZ)({variables:{replId:i}}),l=o.data,c=o.refetch,s=(null==l?void 0:l.repl.__typename)==="Repl"?l.repl:null;return s?(0,a.tZ)(e5,{setIsEditing:t,showCloseButton:n,repl:s,refetch:c,onDeployClick:r}):(0,a.tZ)(T.G,{css:[D.l0.center,D.l0.p(16)],children:(0,a.tZ)(Q.Z,{})})}function e5(e){var t,n,l,v=e.repl,b=e.showCloseButton,S=e.setIsEditing,E=e.onDeployClick,k=(0,eS.useRouter)(),A=(0,m.Z)(),P=(0,o._)(u.useState(null),2),L=P[0],O=P[1],M=(0,o._)(u.useState(v.isRenamed?v.title:""),2),X=M[0],F=M[1],W=(0,o._)(u.useState(v.description||""),2),H=W[0],V=W[1],z=(0,o._)(u.useState(v.rawTemplateLabel),2),j=z[0],q=z[1],Y=(0,ek.zu)().data,$=(0,y.Z)().showError,J=v.publishedAs===U.O2.Template;u.useEffect(function(){V(v.description||"")},[v.description]);var K=(0,C.Z)(),Q=u.useRef(v),ee=(0,o._)((0,ek.ap)({variables:{id:v.id},onCompleted:function(){if(A){k.push("/desktopApp/home");return}k.push("/home","/~")},update:function(e,t){var n;(null===(n=t.data)||void 0===n?void 0:n.deleteRepl)&&(e.evict({id:e.identify(t.data.deleteRepl)}),e.gc())},onError:function(e){return $((0,Z.Z)(e.message))}}),2),et=ee[0],en=ee[1].loading,er=(0,o._)((0,ek.vi)({onError:function(e){return $((0,Z.Z)(e.message))},onCompleted:function(e){var t=e.updateRepl.repl,n=Q.current,r={};n.description!==t.description&&(r.description=t.description),n.title!==t.title&&(r.title=t.title),n.url!==t.url&&(r.url=t.url,k.push({pathname:K,query:{replUrl:t.url}},t.url+window.location.search+window.location.hash)),n.isRenamed!==t.isRenamed&&(r.isRenamed=!!t.isRenamed),Q.current=v,Object.keys(r).length>0&&S(!1)}}),2),ei=er[0],eo=er[1].loading,ea=(0,o._)((0,ek.gF)({variables:{input:{replId:v.id}},onError:function(e){s.Tb(e),$((0,Z.Z)(e.message))}}),2),el=ea[0],ec=ea[1],es=(0,ek.l9)({fetchPolicy:"cache-and-network",ssr:!1}),eu=es.data,ef=es.loading,eT=es.error,eR=u.useMemo(function(){return!!X&&X!==v.title||j!==v.rawTemplateLabel||(""!==H||!!v.description)&&H!==v.description},[v,X,H,j]),eD=(0,g.Z)(eR),eI=u.useCallback(function(){eR&&ei({variables:{input:{id:v.id,title:X.trim()||v.title,description:H,templateLabel:v.currentUserPermissions.changeTemplateLabel?j:void 0}}})},[eR,ei,v,X,H,j]),eG=(0,g.Z)(eI);u.useLayoutEffect(function(){return function(){eD.current&&eG.current()}},[eG,eD]);var eB=u.useCallback(function(e){switch(e){case"private":var t,n,r;return(null==eu?void 0:null===(t=eu.currentUser)||void 0===t?void 0:t.userPowerUpsByType.__typename)==="UserPowerUpsTypes"?null===(r=eu.currentUser.userPowerUpsByType)||void 0===r?void 0:null===(n=r.privateRepls.cost)||void 0===n?void 0:n.explanation:null;case"always-on":case"gpu":return null;default:(0,eE.Z)(e)}},[eu]),eA=function(){ei({variables:{input:{id:v.id,isPrivate:!v.isPrivate}},optimisticResponse:{__typename:"RootMutationType",updateRepl:{__typename:"UpdateReplPayload",repl:(0,i._)((0,r._)({},v),{isPrivate:!v.isPrivate})}},refetchQueries:[{query:ek.WM,variables:{replId:v.id}},e4]}),(0,x.j)(x.U3.PRIVATE_TOGGLED,{enabled:!v.isPrivate,source:"workspace_info_modal"})},eP=v.isRenamed?"Name your Repl":"Default name: ".concat(v.title),eN=[U.Sy.Submit,U.Sy.PublishTemplate,U.Sy.EditTemplate].includes(v.workspaceCta),eU=(0,N.U)(),eL=(null===(t=v.owner)||void 0===t?void 0:t.__typename)==="Team",eO=v.hostingDeploymentPermissions.canDeploy&&"function"==typeof E,eM="/replEnvironmentDesktop"===K&&eO,eX=(0,p.gg)(),eF=eX.isDeployableRepl,eW=eX.reason,eH=(null===(n=v.hostingDeployment)||void 0===n?void 0:n.__typename)==="HostingDeployment"&&v.hostingDeployment.currentBuild;return(0,a.BX)("div",{css:{overflow:"auto",maxHeight:"80vh"},className:c().dynamic([["e8f7dc262f842124",[v.currentUserPermissions.changeDescription?"auto":"not-allowed",eZ.j.mobileMax]]]),children:[(0,a.tZ)(f.b,{forkParams:{trackingData:{forkSource:"editReplPopoverMenuItem"}},repl:v,teamContext:null===(l=v.user)||void 0===l?void 0:l.username,children:(0,a.tZ)(e8,{repl:v,isTemplate:J,showCloseButton:b,setActiveDialog:O,setIsEditing:S,updateIconUrl:function(e){return ei({variables:{input:{id:v.id,iconUrl:e}},optimisticResponse:{__typename:"RootMutationType",updateRepl:{__typename:"UpdateReplPayload",repl:(0,i._)((0,r._)({},v),{iconUrl:e})}}})},updateReplInfo:eI})}),(0,a.tZ)("form",{onSubmit:function(e){e.preventDefault(),eI()},className:c().dynamic([["e8f7dc262f842124",[v.currentUserPermissions.changeDescription?"auto":"not-allowed",eZ.j.mobileMax]]]),children:(0,a.BX)(T.G,{css:[D.l0.align.stretch,D.l0.colWithGap(16)],children:[(0,a.BX)(eb.Tg,{background:"default",css:[D.l0.colWithGap(16)],children:[(0,a.tZ)(T.G,{css:[D.l0.flex.column],children:(0,a.BX)(T.G,{css:[D.l0.colWithGap(4)],children:[(0,a.BX)(T.G,{css:[D.l0.flex.row,D.l0.justify.spaceBetween,D.l0.align.end],children:[(0,a.tZ)("label",{htmlFor:eU("name"),className:c().dynamic([["e8f7dc262f842124",[v.currentUserPermissions.changeDescription?"auto":"not-allowed",eZ.j.mobileMax]]]),children:(0,a.tZ)(R.xv,{variant:"small",color:"dimmer",multiline:!1,children:"Name"})}),(0,a.tZ)(h.Z,{maxLength:60,value:X,hideLabel:!0})]}),(0,a.tZ)(I.II,{style:{cursor:v.currentUserPermissions.changeTitle?"auto":"not-allowed"},disabled:!v.currentUserPermissions.changeTitle,maxLength:60,placeholder:eP,value:X,onChange:function(e){return F(e.target.value)},spellCheck:!1,id:eU("name"),dataCy:"ws-repl-info-title-input"})]})}),(0,a.tZ)(T.G,{css:[D.l0.flex.column],children:(0,a.BX)(T.G,{css:[D.l0.colWithGap(4)],children:[(0,a.BX)(T.G,{css:[D.l0.flex.row,D.l0.justify.spaceBetween,D.l0.align.end],children:[(0,a.tZ)("label",{htmlFor:eU("description"),className:c().dynamic([["e8f7dc262f842124",[v.currentUserPermissions.changeDescription?"auto":"not-allowed",eZ.j.mobileMax]]]),children:(0,a.tZ)(R.xv,{variant:"small",color:"dimmer",multiline:!1,children:"Description"})}),(0,a.tZ)(h.Z,{maxLength:em.p,value:H,hideLabel:!0})]}),(0,a.tZ)(I.B,{onKeyDown:function(e){13===e.keyCode&&(e.ctrlKey||e.metaKey)},disabled:!v.currentUserPermissions.changeDescription,maxLength:em.p,value:H,onChange:function(e){return V(e.target.value)},placeholder:"What does this Repl do?",css:[D.l0.minHeight(96),D.l0.maxHeight(256),{resize:"vertical"}],id:eU("description")})]})})]}),J&&v.currentUserPermissions.changeTemplateLabel?(0,a.tZ)(eb.Tg,{background:"default",css:[D.l0.colWithGap(4)],children:(0,a.BX)(T.G,{css:[D.l0.colWithGap(4)],children:[(0,a.tZ)("label",{htmlFor:eU("template"),className:c().dynamic([["e8f7dc262f842124",[v.currentUserPermissions.changeDescription?"auto":"not-allowed",eZ.j.mobileMax]]]),children:(0,a.tZ)(R.xv,{color:"dimmer",variant:"small",multiline:!1,children:"Template label"})}),(0,a.tZ)(I.II,{value:j,maxLength:60,placeholder:"Template label",spellCheck:!1,onChange:function(e){return q(e.target.value)},id:eU("template")})]})}):null]})}),eN?null:(0,a.BX)(T.G,{css:[D.l0.colWithGap(24),D.l0.p(8),D.l0.pt(0)],children:[v.currentUserPermissions.changePrivacy===U.HA.Allowed&&(0,a.BX)(T.G,{css:[D.l0.colWithGap(8)],children:[(0,a.BX)(eg.hE,{tag:"fieldset",name:eU("privacy"),value:v.isPrivate.toString(),onChange:function(){if(!eo){if(v.isPrivate||v.currentUserPermissions.changePrivacy===U.HA.Allowed&&(null===(e=v.user)||void 0===e?void 0:e.id)!=null&&(null==Y?void 0:null===(t=Y.currentUser)||void 0===t?void 0:t.id)!=null&&v.user.id!==Y.currentUser.id){eA();return}var e,t,n,r,i=(null==eu?void 0:null===(n=eu.currentUser)||void 0===n?void 0:n.userPowerUpsByType.__typename)==="UserPowerUpsTypes"&&(null===(r=eu.currentUser.userPowerUpsByType)||void 0===r?void 0:r.privateRepls.active),o=eB("private");if(null==o||ef){$("You're too fast for us! Please try again in a moment.");return}if(eT){$("This action is currently unavailable. Please refresh and try again.");return}if((0,x.j)(x.U3.POWER_UP_TOGGLE_REQUESTED,{powerUp:"private",setting:!v.isPrivate,source:"workspace_info_modal",costExplanation:o}),i){eA();return}O(eQ.x.PowerUp)}},row:!0,primary:!0,stretch:!0,children:[(0,a.tZ)(eg.rK,{id:eU("false"),value:"false",text:"Public",icon:(0,a.tZ)(ex.Z,{})}),(0,a.tZ)(eg.rK,{id:eU("true"),value:"true",text:"Private",icon:(0,a.tZ)(eC.Z,{})})]}),(0,a.tZ)(R.xv,{variant:"small",color:"dimmest",children:(0,w.Z)(v.isPrivate,eL)})]}),eM?(0,a.BX)(T.G,{css:D.l0.colWithGap(8),children:[(0,a.tZ)(G.zx,{text:eH?"Redeploy your project":"Deploy your project",iconLeft:(0,a.tZ)(ew.Z,{}),colorway:eH?void 0:"primary",onClick:function(){E(),eH||(0,x.j)(x.U3.DEPLOY_PROJECT_SELECTED,{source:"workspace_info_modal"})},disabled:!eF}),eF?null:(0,a.tZ)(B.E,{text:eW})]}):null]}),(0,a.tZ)(ev.Z,{isOpen:L===eQ.x.DeleteRepl,onClose:function(){return O(null)},selectedRepls:[v],onDelete:function(){et()},deleting:en}),(0,a.tZ)(e_.Z,{isOpen:L===eQ.x.PowerUp,onClose:function(){return O(null)},type:"purchase",analyticsContext:{upgrade:{context:"workspace_info_modal"}}}),(0,a.tZ)(ey.u,{isOpen:L===eQ.x.Unpublish,onRequestClose:function(){return O(null)},children:(0,a.tZ)(ep.Z,{repl:v,source:"replEnvironment",onDone:function(){O(null)}})}),(0,a.tZ)(ey.u,{isOpen:L===eQ.x.UnpublishTemplate,onRequestClose:function(){return O(null)},children:(0,a.tZ)(d.Z,{confirmLabel:"Yes, unpublish this Template",isDestructive:!0,title:"Unpublish Template",onCancel:function(){return O(null)},onConfirm:function(){ec.loading||(el(),O(null))},children:"Your Repl will no longer be discoverable on Templates. You can republish again at any time, and all of your comments or reactions will stick around."})}),(0,a.tZ)(ey.u,{isOpen:L===eQ.x.EditPublishSettings,onRequestClose:function(){return O(null)},noPadding:!0,maxWidth:872,fitContent:!0,children:(0,a.tZ)(_.Z,{source:"replEnvironment",replId:v.id})}),(0,a.tZ)(ey.u,{isOpen:L===eQ.x.Publish,onRequestClose:function(){return O(null)},noPadding:!0,maxWidth:872,fitContent:!0,children:(0,a.tZ)(_.Z,{source:"replEnvironment",replId:v.id})}),(0,a.tZ)(ey.u,{isOpen:L===eQ.x.UpdatePublishedTemplate,onRequestClose:function(){return O(null)},noPadding:!0,children:(0,a.tZ)(ed,{repl:v})}),(0,a.tZ)(ey.u,{isOpen:L===eQ.x.UpdatePublishedRepl,onRequestClose:function(){return O(null)},children:(0,a.tZ)(eh.Z,{repl:v,onDone:function(){return O(null)},source:"replEnvironment"})}),(0,a.tZ)(c(),{id:"e8f7dc262f842124",dynamic:[v.currentUserPermissions.changeDescription?"auto":"not-allowed",eZ.j.mobileMax],children:"form.__jsx-style-dynamic-selector{padding:var(--space-8)}textarea.__jsx-style-dynamic-selector{min-height:42px;height:200px;resize:none;cursor:".concat(v.currentUserPermissions.changeDescription?"auto":"not-allowed",";font-size:var(--font-size-default);font-family:var(--font-family-default);padding:var(--space-8);display:block;width:100%;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);border:1px solid var(--outline-dimmest);-webkit-transition:.2s border-color;-moz-transition:.2s border-color;-o-transition:.2s border-color;transition:.2s border-color;background-color:transparent;color:var(--foreground-default)}textarea.__jsx-style-dynamic-selector:hover{border-color:var(--accent-primary-dimmer)}textarea.__jsx-style-dynamic-selector:active,textarea.__jsx-style-dynamic-selector:focus{border-color:var(--accent-primary-default)}textarea.__jsx-style-dynamic-selector:disabled{opacity:.5}textarea.__jsx-style-dynamic-selector:focus,textarea.__jsx-style-dynamic-selector:active{outline:none;border-color:var(--accent-primary-default)}.edit-repl-actions.__jsx-style-dynamic-selector{padding:0 var(--space-16)}.menu-item.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;color:var(--foreground-default)}.delete-menu-item.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;color:var(--accent-negative-default)}.icon-container.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;padding:0 var(--space-4)}.menu-text.__jsx-style-dynamic-selector{padding:0 var(--space-4)}@media screen and (max-width:").concat(eZ.j.mobileMax,"px){.edit-repl.__jsx-style-dynamic-selector{width:80vw}}")})]})}},11707:function(e,t,n){n.d(t,{s:function(){return l}});var r=n(93295),i=n(23982),o=n(78747);function a(){var e=(0,r._)(["\n  fragment WorkspaceHeaderReplMetadataRepl on Repl {\n    id\n    title\n    iconUrl\n    user {\n      id\n      ...UserLinkUser\n    }\n  }\n  ","\n"]);return a=function(){return e},e}var l=(0,i.Ps)(a(),o._)},38168:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(39698),i=n(8182);n(43429);var o=n(93918),a=n(29287),l=n(74833),c=n(56596),s=n(2161),u=(0,o.X)({metadata:[a.l0.rowWithGap(6),a.l0.align.center,a.l0.flex.growAndShrink(1)],username:[a.l0.maxWidth(160),a.l0.truncate,a.l0.flex.shrink(1)],title:[a.l0.flex.shrink(1),a.l0.truncate]});function d(e){var t=e.repl;return(0,i.BX)(c.G,{css:u.metadata,children:[(0,i.tZ)(c.G,{css:[a.l0.display.none,(0,r._)({},a.BC.min("tabletMax"),[a.l0.display.flex])],children:(0,i.tZ)(s.ZP,{iconUrl:t.iconUrl,size:20,alt:""})}),(0,i.tZ)(l.xv,{multiline:!1,css:u.title,"data-cy":"header-repl-title",children:t.title})]})}},24635:function(e,t,n){var r,i,o,a;n.d(t,{$:function(){return i},x:function(){return r}}),(o=r||(r={})).DeleteRepl="DeleteRepl",o.PowerUp="PowerUp",o.BuyCycles="BuyCycles",o.Unpublish="Unpublish",o.UnpublishTemplate="UnpublishTemplate",o.EditPublishSettings="EditPublishSettings",o.Publish="Publish",o.UpdatePublishedTemplate="UpdatePublishedTemplate",o.UpdatePublishedRepl="UpdatePublishedRepl",(a=i||(i={})).Fork="Fork",a.Delete="Delete",a.Unpublish="Unpublish",a.UnpublishTemplate="UnpublishTemplate",a.EditPublishSettings="EditPublishSettings"},61673:function(e,t,n){n.d(t,{ZP:function(){return Q},L7:function(){return K}});var r,i,o,a=n(34142),l=n(39698),c=n(45903),s=n(25e3),u=n(32477),d=n(87682),f=n(8182),h=n(43429),p=n(93295),m=n(23982),v=n(77393);function g(){var e=(0,p._)(["\n  query WorkspaceRunButton($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        language\n        title\n        rootOriginReplUrl\n        source {\n          release {\n            id\n            repl {\n              id\n              title\n              owner {\n                ... on User {\n                  id\n                  username\n                }\n                ... on Team {\n                  id\n                  username\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n    currentUser {\n      id\n    }\n  }\n"]);return g=function(){return e},e}var y={},b=(0,m.Ps)(g()),Z=n(59868),w=n(50782),x=n(18107),C=n(29287),_=n(56596),S=n(88936),E=n(74833),k=n(30983),T=n(51384),R=n(29479),D=n(71999),I=n(15859);function G(){var e=(0,p._)(["\n  query CelebrateReplRunCurrentUser {\n    currentUser {\n      id\n      timeCreated\n    }\n  }\n"]);return G=function(){return e},e}var B={},A=(0,m.Ps)(G()),P=n(90351),N=n(48900),U=n(25632),L=new Date("2022-07-08"),O=(0,I.O4)("useCelebrateFirstReplPlay",!1),M=n(27187),X=n(25753),F=n(49996),W=n(55534),H=n(47507),V=n(93049),z=n(74652);function j(e){var t=e.runState,n=e.size,r=void 0===n?16:n;switch(t){case x.Ah.IDLE:return(0,f.tZ)(M.Z,{size:r});case x.Ah.RUNNING:return(0,f.tZ)(X.Z,{size:r});default:return(0,f.tZ)(S.Z,{size:r})}}var q=(r={},(0,l._)(r,x.Ah.IDLE,"Run"),(0,l._)(r,x.Ah.RUNNING,"Stop"),(0,l._)(r,x.Ah.STOPPING,"Stopping"),(0,l._)(r,x.Ah.OFFLINE,"Working"),(0,l._)(r,x.Ah.BEFORE_RUN,"Working"),r),Y=(i={small:48,large:100},(0,l._)(i,x.Ah.IDLE,68),(0,l._)(i,x.Ah.RUNNING,72),(0,l._)(i,x.Ah.STOPPING,92),(0,l._)(i,x.Ah.OFFLINE,86),(0,l._)(i,x.Ah.BEFORE_RUN,86),i),$=(0,T.iv)([C.l0.py(12),C.l0.width(Y.small),C.l0.flex.row,C.l0.center,C.l0.borderRadius(6),C.l0.backgroundColor.accentPositiveDimmest,C.l0.color.accentPositiveStrongest,C.l0.cursor.pointer,C.l0.focusRing,(o={transition:"color 0.2s ease 0s, background-color 0.2s ease 0s",border:"1px solid",borderColor:"transparent",lineHeight:1,outline:"0 none","&:hover":[{color:"white"},C.l0.backgroundColor.accentPositiveDefault],"&:active":[{borderColor:C.TV.accentPositiveStrongest}]},(0,l._)(o,(0,F.et)("tabletMax"),[C.l0.width(Y.large)]),(0,l._)(o,":focus-visible",{outlineColor:"".concat(C.TV.accentPositiveStrongest)}),o)]),J=(0,T.iv)([C.l0.color.foregroundDimmer,C.l0.backgroundColor.backgroundHigher,{borderColor:"transparent","&:hover":[{color:"white"},C.l0.backgroundColor.backgroundHighest],"&:active":[{borderColor:C.TV.accentPrimaryDefault}]}]);function K(e){var t=(0,u._)((0,h.useState)(e.getRunState()),2),n=t[0],r=t[1];return(0,h.useEffect)(function(){return r(e.getRunState()),e.onStateChanged(function(e){r(e)})},[e]),n}var Q=h.forwardRef(function(e,t){var n,r,i,o,p,m,g,S,T,I,G,M,X,Q=e.runner,ee=e.runConfig,et=e.onRunInitiated,en=e.style,er=void 0===en?"default":en,ei=e.disableTooltip,eo=e.shortcut,ea=(0,w.Z)(),el=K(Q),ec=(n=(0,c._)({},y,{variables:{id:ea}}),v.a(b,n)).data,es=(null==ec?void 0:ec.repl.__typename)==="Repl"?ec.repl:null,eu=(r=(0,c._)({},B,void 0),p=v.a(A,r),m=(0,U.Gn)("extraDelight").preferences.extraDelight,g=(0,P.$0)().fireCircularBurstFrom,T=(S=(0,u._)((0,D.KO)(O),2))[0],I=S[1],G=null!==(o=null===(i=p.data)||void 0===i?void 0:i.currentUser)&&void 0!==o?o:null,M=!T&&G&&new Date(G.timeCreated)>=L,{hasCelebrated:T,celebrate:function(e){if(!e){N.Tb(Error("Cannot find element for celebrate Repl run confetti"));return}(m||M)&&g({element:e}),M&&I(!0)}}).celebrate,ed=el!==x.Ah.IDLE&&el!==x.Ah.RUNNING,ef=(0,W.Z)().showError,eh=(0,h.useRef)(null),ep=(X=(0,a._)(function(){var e,t,n,r,i,o,a,l;return(0,d.Jh)(this,function(c){switch(c.label){case 0:if(c.trys.push([0,3,,4]),el!==x.Ah.IDLE)return[3,2];return et&&et(),eh.current&&eu(eh.current),[4,Q.run(ee)];case 1:return c.sent(),es&&(0,Z.j)(Z.U3.PROJECT_RAN,{placement:"primary_btn",language:es.language,replId:es.id,replTitle:es.title,rootOriginReplUrl:es.rootOriginReplUrl,templateTitle:null===(n=es.source)||void 0===n?void 0:null===(t=n.release)||void 0===t?void 0:null===(e=t.repl)||void 0===e?void 0:e.title,templateOwner:null===(a=es.source)||void 0===a?void 0:null===(o=a.release)||void 0===o?void 0:null===(i=o.repl)||void 0===i?void 0:null===(r=i.owner)||void 0===r?void 0:r.username}),[2];case 2:if(el===x.Ah.RUNNING)return[2,Q.stopRun()];return[3,4];case 3:if(ef((l=c.sent()).toString()),H.kg.error("run button error",{errorMessage:l.message}),el===x.Ah.RUNNING)return[2,Q.stopRun()];return[3,4];case 4:return[2]}})}),function(){return X.apply(this,arguments)});if("floating"===er)return(0,f.tZ)(_.G,{tag:"button",disabled:ed,css:[{position:"fixed",right:24,bottom:72,zIndex:1},C.l0.center,{height:"50px",width:"50px",opacity:"0.5",cursor:"pointer",borderRadius:"100%",border:"solid 2px var(--accent-positive-dimmer)",backgroundColor:C.TV.accentPositiveDimmest}],onClick:ep,innerRef:eh,children:(0,f.tZ)(j,{runState:el})});var em=el===x.Ah.IDLE;return"inline-small"===er?(0,f.BX)("button",{"data-cy":"ws-run-btn",onClick:ep,ref:eh,disabled:ed,css:[C.l0.p(12),C.l0.flex.row,C.l0.center,C.l0.borderRadius(8),em?C.l0.backgroundColor.accentPositiveDimmest:C.l0.backgroundColor.backgroundHigher,em?C.l0.color.accentPositiveStronger:C.l0.color.foregroundDimmer,{border:"1px solid",borderColor:em?C.TV.accentPositiveDimmest:C.TV.backgroundHigher},C.l0.width("100%"),C.l0.height("100%")],children:[(0,f.tZ)(j,{runState:el}),(0,f.tZ)(E.xv,{variant:"subheadDefault",css:[C.l0.pl(8)],multiline:!1,children:q[el]})]}):(0,f.tZ)(k.u,{placement:"bottom",isDisabled:ei||!eo,tooltip:eo?(0,f.tZ)(_.G,{css:{margin:-4},children:(0,f.tZ)(z.bM,{keyCombo:eo,small:!0})}):null,children:function(e,n){return(0,f.BX)("button",(0,s._)((0,c._)({},e),{onClick:ep,ref:(0,V.l)(eh,n,t),css:[$,!em&&J,C.l0.height(32),(0,l._)({transition:"width 80ms ease-out"},(0,F.et)("tabletMax"),C.l0.width(Y[el]))],children:[(0,f.tZ)(j,{runState:el,size:12}),(0,f.tZ)(E.xv,{multiline:!1,css:[C.l0.pl(6),C.l0.display.none,C.l0.fontWeight.medium,(0,l._)({lineHeight:1,overflow:"visible"},"@media (min-width: ".concat(R.j.tabletMax,"px)"),[C.l0.display.block])],children:q[el]})]}))}})})},68681:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(45903),i=n(25e3),o=n(70322),a=n(8182),l=n(15146),c=n(29287),s=(0,n(93918).X)({checked:[c.l0.width(32),c.l0.height(32),c.l0.backgroundColor.backgroundHigher],unchecked:[c.l0.width(32),c.l0.height(32),c.l0.color.foregroundDimmest]});function u(e){var t=e.alt,n=e.icon,c=e.checked,u=e.onClick,d=(0,o._)(e,["alt","icon","checked","onClick"]);return(0,a.tZ)(l.hU,(0,i._)((0,r._)({},d),{css:c?s.checked:s.unchecked,alt:"".concat(c?"Disable":"Enable"," ").concat(t),onClick:u,children:n}))}},71984:function(e,t,n){n.d(t,{Z:function(){return u}});var r,i=n(39698),o=n(8182),a=n(29287),l=n(30983),c=n(52682),s=(0,n(51384).iv)([a.l0.focusRing,a.l0.display.flex,a.l0.center,a.l0.borderRadius(4),a.l0.backgroundColor.backgroundRoot,a.l0.color.foregroundDefault,a.l0.cursor.pointer,a.l0.p(4),(r={transition:"background-color 0.2s",border:"none"},(0,i._)(r,a.wl.hover,[a.l0.backgroundColor.backgroundHigher]),(0,i._)(r,":focus",{outline:"none"}),r)]),u=function(e){var t=e.onClick;return(0,o.tZ)(l.u,{tooltip:"Clear",placement:"bottom-start",children:(0,o.tZ)("button",{"aria-label":"Clear",onClick:t,css:s,children:(0,o.tZ)(c.Z,{size:16})})})}},24837:function(e,t,n){n.d(t,{Z:function(){return W}});var r=n(32477),i=n(8182),o=n(43429),a=n(37951),l=n(54254),c=n(56596),s=n(29287),u=n(23291),d=n(30983),f=n(74833),h=n(32377),p=n(80839),m=n(36010),v=n.n(m),g=n(45903),y=n(17108),b=n(68333),Z=n(46299),w=n(85768),x=n(25632),C=n(51384),_=n(8070),S=n(77550),E=n(33195),k=n(53326),T=["a","pre","code","em","strong","p","ul","ol","li","img","del","h1","h2","h3","h4","h5","h6","sup","sub","br","hr","blockquote","span","div"],R=(0,o.memo)(function(e){var t=e.content,n=(0,x.Gn)("fontSize").preferences.fontSize,r=o.useCallback(function(e){return(0,i.tZ)(k.Z,(0,g._)({},e))},[]);return(0,i.tZ)("div",{css:[{"& ol":{paddingInlineStart:"20px"},"& ul":{paddingInlineStart:"20px",listStyle:"initial"}}],children:(0,i.tZ)(y.D,{css:(0,C.iv)({wordBreak:"break-word",boxSizing:"border-box",whiteSpace:"normal",lineHeight:1.5,color:s.TV.foregroundDefault,fontFamily:"".concat(s.TV.fontFamilyDefault," !important"),fontSize:n,textSizeAdjust:"100%","h1, h2, h3, h4, h5, h6":{color:s.TV.foregroundDefault,fontWeight:s.TV.fontWeightMedium,marginBottom:s.TV.space16,lineHeight:1.25,wordWrap:"break-word"},"h1, h2":{paddingBottom:s.TV.space8,borderBottom:"1px solid ".concat(s.TV.backgroundHigher),marginTop:s.TV.space32},h1:{fontSize:"2em"},h2:{fontSize:"1.5em"},h3:{fontSize:"1.25em",marginTop:s.TV.space24},h4:{fontSize:"1em",marginTop:s.TV.space16},h5:{fontSize:"0.875em"},h6:{color:s.TV.foregroundDimmer,fontSize:"0.85em"},".anchor":{float:"left",lineHeight:1,marginLeft:"calc(-1 * ".concat(s.TV.space16,")"),paddingRight:s.TV.space4},".anchor:focus":{outline:"none"},p:{marginBottom:s.TV.space16,fontSize:n,fontFamily:"".concat(s.TV.fontFamilyDefault," !important")},"p:last-child":{marginBottom:0},table:{borderSpacing:0,borderCollapse:"collapse",display:"block",width:"100%",overflow:"auto",marginBottom:s.TV.space16,wordBreak:"normal",th:{fontWeight:s.TV.fontWeightMedium},"td, th":{padding:"".concat(s.TV.space8," ").concat(s.TV.space12),border:"1px solid ".concat(s.TV.backgroundHighest),minWidth:"16ch"},tr:{backgroundColor:s.TV.backgroundDefault,borderTop:"1px solid ".concat(s.TV.backgroundHighest)},"tr:nth-of-type(2n)":{backgroundColor:s.TV.backgroundRoot}},"hr:after":{clear:"both"},"li > p":{marginBottom:0},li:{marginTop:s.TV.space4},dd:{marginLeft:0},"ol, ul":{paddingLeft:s.TV.space16,marginTop:0,marginBottom:0},ul:{listStyle:"initial",listStyleType:"disc",marginBottom:s.TV.space16},ol:{listStyle:"decimal",marginBottom:s.TV.space16},"ol ol, ol ul, ul ol, ul ul":{paddingLeft:s.TV.space16,marginTop:0,marginBottom:0,paddingBottom:0},"ul ul":{listStyleType:"circle"},"ul ul ul":{listStyleType:"square"},"ol ol, ul ol":{listStyleType:"lower-roman"},"ol ol ol, ol ul ol, ul ol ol, ul ul ol":{listStyleType:"lower-alpha"},pre:{fontFamily:"".concat(s.TV.fontFamilyCode," !important"),margin:"".concat(s.TV.space16," 0"),borderRadius:4,wordBreak:"break-all",wordWrap:"break-word",whiteSpace:"pre-wrap",color:s.TV.foregroundDefault},"pre:last-child":{marginBottom:"0 !important"},blockquote:{padding:"0 1em",marginBottom:s.TV.space16,borderLeft:"".concat(s.TV.space2," solid ").concat(s.TV.backgroundHighest),paddingLeft:s.TV.space16},"blockquote > *":{color:"".concat(s.TV.foregroundDimmer," !important")},"blockquote > :last-child":{marginBottom:"0 !important",borderBottom:"none !important"},"blockquote > :first-child":{marginTop:"0 !important"},kbd:{display:"inline-block",padding:"3px 5px",font:"11px ".concat(s.TV.fontFamilyCode),color:s.TV.foregroundDimmer,verticalAlign:"middle",backgroundColor:s.TV.backgroundHigher,border:"none",borderRadius:3,boxShadow:"inset 0 -1px 0 ".concat(s.TV.backgroundHighest)},a:{color:s.TV.accentPrimaryStronger,backgroundColor:"initial"},"> :first-child":{marginTop:"0 !important",paddingTop:"0 !important"},"> :last-child":{borderBottom:"none !important",marginBottom:"0 !important",paddingBottom:"0 !important"},'[type="checkbox"]':{boxSizing:"border-box",marginRight:s.TV.space8,padding:0},details:{marginBottom:s.TV.space16,display:"block",background:s.TV.backgroundHigher,borderRadius:s.TV.borderRadius4,padding:s.TV.space16},summary:{display:"list-item",userSelect:"none",cursor:"pointer",fontWeight:s.TV.fontWeightBold},"details[open] > summary":{borderBottom:"1px solid ".concat(s.TV.backgroundHighest),marginBottom:s.TV.space16,paddingBottom:s.TV.space16},hr:{height:1,backgroundColor:s.TV.backgroundHigher,margin:"".concat(s.TV.space24," 0"),border:0}}),allowedElements:T,remarkPlugins:[b.Ic,Z.Z,w.Z,_.Z],linkTarget:"_blank",rehypePlugins:[S.Z],components:{code:r,img:E.Z},children:t})})}),D=n(44680),I=n(31900),G=n(52682),B=n(93295),A=n(23982),P=n(55846),N=n(72986);function U(){var e=(0,B._)(["\n  mutation DeleteThreadMessage($id: String!) {\n    deleteThreadMessage(messageId: $id) {\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return U=function(){return e},e}var L={},O=(0,A.Ps)(U(),P.j7),M=n(15542),X=n(55534),F=n(25425),W=(0,o.memo)(function(e){var t,n=e.thread,m=e.message,y=(0,M.d)(),b=(0,X.Z)().showError,Z=(0,r._)((t=(0,g._)({},L,{onError:function(e){b(e.message)},onCompleted:function(e){var t;(null===(t=e.deleteThreadMessage)||void 0===t?void 0:t.__typename)==="UserError"&&b(e.deleteThreadMessage.message)}}),N.D(O,t)),2),w=Z[0],x=Z[1].loading,C=(0,F.P5)({controlName:"flag-threads-dropdown-menu",default:!1,type:"boolean",logFlagToAnalytics:!1}),_=!!(n&&n.indexStart===n.indexEnd),S={statusBanner:{resolved:"Thread resolved. Re-open it any time in the inbox.",unresolved:"Thread re-opened"},outdated:"Outdated",outdatedTooltip:"The code has changed since the comment was left"},E=o.useMemo(function(){return{diff:(0,p.Y)(m.timeCreated),full:(0,p.u)(m.timeCreated)}},[m]);if(!m.user)return null;var k=y===m.user.id?[{label:"Delete",icon:(0,i.tZ)(G.Z,{}),isDestructive:!0}]:[];return(0,i.BX)(c.G,{children:[(0,i.BX)(c.G,{css:[s.l0.flex.row,s.l0.justify.spaceBetween,s.l0.pb(4)],children:[(0,i.BX)(c.G,{css:[s.l0.flex.row,s.l0.align.center,s.l0.rowWithGap(8)],children:[(0,i.tZ)(v(),{legacyBehavior:!0,passHref:!0,href:"/@".concat(m.user.username),children:(0,i.tZ)("a",{children:(0,i.tZ)(l.n,{small:!0,src:m.user.image,username:m.user.username})})}),(0,i.tZ)("p",{children:(0,i.tZ)(d.u,{tooltip:E.full,placement:"top",children:(0,i.tZ)(f.xv,{variant:"small",color:"dimmer",multiline:!1,children:E.diff})})}),k.length>0&&C?(0,i.tZ)(I.Z,{items:k,onItemClick:function(e){"Delete"!==e.label||x||w({variables:{id:m.id}})},label:"More"}):null]}),_?(0,i.tZ)(d.u,{tooltip:S.outdatedTooltip,children:(0,i.tZ)(u.D,{colorway:"negative",text:S.outdated})}):null]}),"StatusMessageContentType"===m.content.__typename&&"resolved"===m.content.status?(0,i.tZ)(a.E,{colorway:"positive",icon:(0,i.tZ)(h.Z,{}),text:S.statusBanner.resolved}):null,"StatusMessageContentType"===m.content.__typename&&"unresolved"===m.content.status?(0,i.tZ)(a.E,{colorway:"primary",icon:(0,i.tZ)(D.Z,{}),text:S.statusBanner.unresolved}):null,"TextMessageContentType"===m.content.__typename&&(0,i.tZ)(R,{content:m.content.text})]})})},80839:function(e,t,n){n.d(t,{Y:function(){return o},u:function(){return a}});var r=n(57526),i=n(91065),o=function(e){var t=new Date(e),n=new Date;return 60>(0,i.Z)(n,t)?"just now":(0,r.F)(t,!0)+" ago"},a=function(e){return new Date(e).toLocaleString()}},31105:function(e,t,n){n.d(t,{Z:function(){return eT}});var r=n(32477),i=n(8182),o=n(43429),a=n(46689),l=n(9617),c=n(99656),s=n(50782),u=n(88936),d=n(45903),f=n(25e3),h=n(79962),p=n(58003),m=n(79217),v=n(49344),g=n(56596),y=n(29287),b=n(74833),Z=n(1498),w=n(70002),x=n(55534),C=n(92611),_=n(44680),S=n(94450),E=n.n(S),k=n(38265),T=n(84357),R=n(20142),D=n(81013),I=T.q6.define();function G(e){var t=e.editorRef,n=e.onChange,r=e.placeholder,a=e.skeleton,l=e.language,c=e.skeletonClosingBracket,s=e.indentSize,u=(0,D.Z)(),d=u.ref,f=u.view,h=o.useRef(a?"".concat(a,"\n"):""),p=c?"\n".concat(c):"",m=" ".repeat(void 0===s?2:s);return o.useEffect(function(){if(f&&f.state.doc.length){var e=h.current;h.current=a?"".concat(a,"\n"):"",f.dispatch({changes:{from:0,to:e.length-1,insert:a},annotations:[T.YW.addToHistory.of(!1),I.of(!0)]})}},[f,a]),o.useEffect(function(){if(f){var e=T.yy.changeFilter.of(function(e){return!!e.annotation(I)||[-1,h.current.length,e.startState.doc.length-p.length,e.startState.doc.length+1]}),i=k.tk.updateListener.of(function(e){var t=e.state.doc.slice(h.current.length,e.state.doc.toString().length-p.length).toString();if(t!=="".concat(m).concat(r,"\n").concat(m)?n(t):n(""),e.docChanged&&e.state.doc.length===h.current.length+p.length){var i="\n"+m;f.dispatch({changes:{from:h.current.length-1,insert:"\n"+m},selection:{anchor:h.current.length+i.length-1},annotations:[I.of(!0)]})}}),o="".concat(h.current).concat(m).concat(r,"\n").concat(p);f.dispatch({changes:{from:0,to:f.state.doc.length,insert:o},effects:T.Py.appendConfig.of([e,i]),selection:{anchor:o.length},annotations:T.YW.addToHistory.of(!1)}),t({setValue:function(e){if(e){var t=f.state.doc.toString().length;f.dispatch({changes:{from:h.current.length,to:t-p.length,insert:e},annotations:T.YW.addToHistory.of(!1)})}},focus:function(){return f.focus()}})}},[n,l,f,p,t,r,m]),(0,i.BX)("div",{className:"jsx-c0a72647b9c20ef editor",children:[(0,i.tZ)(R.ZP,{ref:d,language:l,indentSize:2,fontSize:14,indentIsSpaces:!0}),(0,i.tZ)(E(),{id:"c0a72647b9c20ef",children:".editor.jsx-c0a72647b9c20ef{overflow:auto;position:absolute;width:100%;height:100%}.loader.jsx-c0a72647b9c20ef{height:100%;width:100%;z-index:5}"})]})}var B=n(59868),A=n(32377);function P(e){var t,n,a,l,c=e.isOpen,u=e.meta,p=e.language,w=e.hasMetadata,_=e.onClose,S=(0,s.Z)(),E=(0,x.Z)().showConfirm,k=(0,r._)(o.useState(null),2),T=k[0],R=k[1],D=(0,r._)(o.useState(!0),2),I=D[0],G=D[1],P=(0,r._)(o.useState((null==u?void 0:u.initialization)||""),2),M=P[0],X=P[1],F=(0,r._)(o.useState((null==u?void 0:u.imports)||""),2),W=F[0],H=F[1],V=(0,r._)(o.useState((null==u?void 0:u.setup)||""),2),z=V[0],j=V[1],q=(0,r._)(o.useState((null==u?void 0:u.tearDown)||""),2),Y=q[0],$=q[1],J=(0,r._)((0,h.rU)({onError:function(e){return R(e.message)},update:function(e,t){var n,r=null===(n=t.data)||void 0===n?void 0:n.createReplUnitTestMeta;r&&("UserError"===r.__typename?R(r.message):"ReplUnitTestMeta"===r.__typename&&(e.modify({id:e.identify({__typename:"Repl",id:S}),fields:{unitTests:function(t){var n=e.writeFragment({data:r,fragment:h.aA});return t?(0,f._)((0,d._)({},t),{meta:(0,d._)({},n)}):{__typename:"ReplUnitTestsWithMeta",meta:n,tests:[]}}}}),E("Setup saved!"),_()))}}),2),K=J[0],Q=J[1],ee=(0,r._)((0,h.AF)({onError:function(e){return R(e.message)},onCompleted:function(e){var t=e.updateReplUnitTestMeta;t&&("UserError"===t.__typename?R(t.message):"ReplUnitTestMeta"===t.__typename&&(E("Imports updated!"),_()))}}),2),et=ee[0],en=ee[1],er=(0,C.x)(p),ei=W!==(null==u?void 0:u.imports)||M!==(null==u?void 0:u.initialization)||z!==(null==u?void 0:u.setup)||Y!==(null==u?void 0:u.tearDown),eo=Q.loading||en.loading;return(0,i.tZ)(v.u,{isOpen:c,onRequestClose:_,maxWidth:872,children:(0,i.BX)(g.G,{css:[y.l0.colWithGap(24)],children:[(0,i.tZ)(b.h4,{level:1,variant:"headerDefault",children:"Setup"}),(0,i.tZ)(N,{unitTestsLib:er,onChange:H,language:p,initialValue:null!==(t=null==u?void 0:u.imports)&&void 0!==t?t:""}),(0,i.tZ)(g.G,{onClick:function(){return G(!I)},css:{cursor:"pointer"},children:(0,i.BX)(g.G,{css:[y.l0.rowWithGap(8),y.l0.align.center],children:[(0,i.tZ)(b.h4,{level:2,variant:"headerDefault",children:"Advanced"}),(0,i.tZ)(m.Z,{color:"var(--foreground-default)",size:20,rotate:I?270:0})]})}),I?null:(0,i.BX)(g.G,{css:[y.l0.colWithGap(8)],children:[(0,i.tZ)(U,{unitTestsLib:er,onChange:X,language:p,initialValue:null!==(n=null==u?void 0:u.initialization)&&void 0!==n?n:""}),(0,i.tZ)(L,{unitTestsLib:er,onChange:j,language:p,initialValue:null!==(a=null==u?void 0:u.setup)&&void 0!==a?a:""}),(0,i.tZ)(O,{unitTestsLib:er,onChange:$,language:p,initialValue:null!==(l=null==u?void 0:u.tearDown)&&void 0!==l?l:""})]}),(0,i.BX)(g.G,{css:[y.l0.flex.row,y.l0.justify.spaceBetween],children:[(0,i.tZ)(b.xv,{css:[y.l0.color.accentNegativeStronger],children:T}),(0,i.BX)(g.G,{css:[y.l0.rowWithGap(12)],children:[(0,i.tZ)(Z.zx,{disabled:eo,onClick:_,text:"Cancel"}),(0,i.tZ)(Z.zx,{colorway:"primary",disabled:!ei||eo,onClick:function(){(0,B.j)(B.U3.REPL_UNIT_TEST_USED,{action:"modifiedSetup"}),w?et({variables:{input:{initialization:M,imports:W,setup:z,tearDown:Y,replId:S}}}):K({variables:{input:{initialization:M,imports:W,setup:z,tearDown:Y,replId:S}}})},iconLeft:(0,i.tZ)(A.Z,{}),text:"".concat(eo?"Saving...":"Save")})]})]})]})})}function N(e){var t=e.unitTestsLib,n=e.onChange,a=e.language,l=e.initialValue,c=(0,r._)(o.useState(null),2),s=c[0],u=c[1];o.useEffect(function(){s&&(s.setValue(l),s.focus())},[s,l]);var d=t.defaultImports().trim();return(0,i.BX)(g.G,{css:[y.l0.colWithGap(8)],children:[(0,i.BX)(g.G,{css:[y.l0.flex.row,y.l0.justify.spaceBetween,y.l0.align.center],children:[(0,i.tZ)(b.h4,{level:2,variant:"subheadDefault",children:"Imports"}),(0,i.tZ)(w.Z,{iconLeft:(0,i.tZ)(_.Z,{}),text:"Docs",href:"https://docs.replit.com/teams-edu/unit-testing",target:"_blank",variant:"outlined"})]}),(0,i.tZ)(g.G,{css:[y.l0.backgroundColor.backgroundDefault,y.l0.borderRadius(8),{border:"1px solid var(--background-highest)"}],children:(0,i.tZ)(g.G,{css:[y.l0.borderRadius(8),y.l0.height(200),y.l0.position.relative],children:(0,i.tZ)(G,{onChange:n,placeholder:"".concat(t.getCommentChar()," Add imports here"),editorRef:u,language:a,skeleton:d,skeletonClosingBracket:"",indentSize:0})})})]})}function U(e){var t=e.unitTestsLib,n=e.onChange,a=e.language,l=e.initialValue,c=(0,r._)(o.useState(null),2),s=c[0],u=c[1];o.useEffect(function(){s&&s.setValue(l)},[s,l]);var d=t.classConstructorName();return(0,i.BX)(g.G,{css:[y.l0.colWithGap(8)],children:[(0,i.BX)(g.G,{css:[y.l0.flex.row,y.l0.justify.spaceBetween,y.l0.align.center],children:[(0,i.tZ)(b.h4,{level:2,variant:"subheadDefault",children:"Initialization"}),(0,i.tZ)(w.Z,{iconLeft:(0,i.tZ)(_.Z,{}),text:"Docs",href:"https://docs.replit.com/teams-edu/unit-testing",target:"_blank",variant:"outlined"})]}),d?(0,i.BX)(b.xv,{children:["Hint: constructor name is ",(0,i.tZ)("code",{children:d}),"."]}):null,(0,i.tZ)(g.G,{css:[y.l0.backgroundColor.backgroundDefault,y.l0.borderRadius(8),{border:"1px solid var(--background-highest)"}],children:(0,i.tZ)(g.G,{css:[y.l0.borderRadius(8),y.l0.height(200),y.l0.position.relative],children:(0,i.tZ)(G,{onChange:n,placeholder:"".concat(t.getCommentChar()," Add initialization code here"),editorRef:u,language:a,skeleton:"",skeletonClosingBracket:"",indentSize:0})})})]})}function L(e){var t=e.unitTestsLib,n=e.onChange,a=e.language,l=e.initialValue,c=(0,r._)(o.useState(null),2),s=c[0],u=c[1];o.useEffect(function(){s&&s.setValue(l)},[s,l]);var d=t.setupIntro().trim();return(0,i.BX)(g.G,{css:[y.l0.colWithGap(8)],children:[(0,i.BX)(g.G,{css:[y.l0.flex.row,y.l0.justify.spaceBetween,y.l0.align.center],children:[(0,i.tZ)(b.h4,{level:2,variant:"subheadDefault",children:"Setup"}),(0,i.tZ)(w.Z,{iconLeft:(0,i.tZ)(_.Z,{}),text:"Docs",href:"https://docs.replit.com/teams-edu/unit-testing",target:"_blank",variant:"outlined"})]}),(0,i.tZ)(g.G,{css:[y.l0.backgroundColor.backgroundDefault,y.l0.borderRadius(8),{border:"1px solid var(--background-highest)"}],children:(0,i.tZ)(g.G,{css:[y.l0.borderRadius(8),y.l0.height(200),y.l0.position.relative],children:(0,i.tZ)(G,{onChange:n,placeholder:"".concat(t.getCommentChar()," Add setup code here"),editorRef:u,language:a,skeleton:d,skeletonClosingBracket:t.hasClosingBrackets()?t.getClosingBrackets():""})})})]})}function O(e){var t=e.unitTestsLib,n=e.onChange,a=e.language,l=e.initialValue,c=(0,r._)(o.useState(null),2),s=c[0],u=c[1];o.useEffect(function(){s&&s.setValue(l)},[s,l]);var d=t.tearDownIntro().trim();return(0,i.BX)(g.G,{css:[y.l0.colWithGap(8)],children:[(0,i.BX)(g.G,{css:[y.l0.flex.row,y.l0.justify.spaceBetween,y.l0.align.center],children:[(0,i.tZ)(b.h4,{level:2,variant:"subheadDefault",children:"Teardown"}),(0,i.tZ)(w.Z,{iconLeft:(0,i.tZ)(_.Z,{}),text:"Docs",href:"https://docs.replit.com/teams-edu/unit-testing",target:"_blank",variant:"outlined"})]}),(0,i.tZ)(g.G,{css:[y.l0.backgroundColor.backgroundDefault,y.l0.borderRadius(8),{border:"1px solid var(--background-highest)"}],children:(0,i.tZ)(g.G,{css:[y.l0.borderRadius(8),y.l0.height(200),y.l0.position.relative],children:(0,i.tZ)(G,{onChange:n,placeholder:"".concat(t.getCommentChar()," Add teardown code here"),editorRef:u,language:a,skeleton:d,skeletonClosingBracket:t.hasClosingBrackets()?t.getClosingBrackets():""})})})]})}var M=function(e){var t=e.language,n=e.meta,a=(0,r._)(o.useState(!1),2),l=a[0],c=a[1];return(0,i.BX)(i.HY,{children:[(0,i.tZ)(Z.zx,{iconLeft:(0,i.tZ)(p.Z,{}),onClick:function(){return c(!0)},text:"Setup"}),(0,i.tZ)(P,{language:t,isOpen:l,onClose:function(){return c(!1)},hasMetadata:!!(null==n?void 0:n.id),meta:n})]})},X=n(21289),F=n(75582),W=n(2158),H=n(52924),V=n(52682),z=n(58719),j=n(85508),q=n(18836),Y=n(15146),$=n(70322),J=n(51384),K=n(10981),Q=n(15006),ee=n(20573),et={success:(0,J.iv)({":not([disabled])":{borderColor:y.TV.accentPositiveStrongest}}),error:(0,J.iv)({":not([disabled])":{borderColor:y.TV.accentNegativeStrongest}}),warning:(0,J.iv)({":not([disabled])":{borderColor:y.TV.yellowStrongest}}),default:void 0,loading:void 0},en={success:(0,J.iv)([{color:y.TV.accentPositiveStrongest}]),error:(0,J.iv)([{color:y.TV.accentNegativeStrongest}]),warning:(0,J.iv)([{color:y.TV.yellowStrongest}]),default:void 0,loading:void 0},er={success:(0,i.tZ)(A.Z,{}),error:(0,i.tZ)(Q.Z,{}),warning:(0,i.tZ)(ee.Z,{}),default:void 0,loading:(0,i.tZ)(u.Z,{})},ei=function(e){var t=er[e.state];return(0,i.BX)(g.G,{css:[en[e.state],y.l0.rowWithGap(4)],children:[o.isValidElement(t)?o.cloneElement(t,{size:12}):null,(0,i.tZ)(b.xv,{variant:"small",multiline:!1,children:e.message})]})},eo=(0,J.iv)("display:grid;grid-gap:",y.TV.space8,";grid-template-areas:'label . status'\n    'input input input'\n    'validation validation validation'\n    'details details details';> .label{grid-area:label;}> .status{grid-area:status;}> .input{grid-area:input;}> .details{grid-area:details;}> .validation{grid-area:validation;}"),ea=function(e){var t,n=e.id,r=e.label,o=e.status,a=e.description,l=e["aria-describedby"],c=e.error,s=e.isValid,u=e.touched,h=e.value,p=e.warning,m=e.successText,v=(0,$._)(e,["id","label","status","description","aria-describedby","error","isValid","touched","value","warning","successText"]),g=(0,K.U)(),Z=n||g("input"),w=o&&g("status"),x=a?g("description"):void 0,C=[w,x,l].filter(Boolean).join(" "),_=!(t={description:a,error:c,isValid:s,touched:u,value:h,warning:p,successText:m}).touched&&t.description?{state:"default",message:t.description}:t.error?{message:t.error.message,state:"error"}:t.warning?{message:t.warning.message,state:"warning"}:t.isValid?{message:t.successText||"",state:"success"}:t.touched?{message:"",state:"loading"}:void 0;return(0,i.BX)("div",{css:eo,children:[(0,i.tZ)("label",{htmlFor:Z,className:"label",children:(0,i.tZ)(b.xv,{variant:"small",color:"dimmer",multiline:!1,children:r})}),o?(0,i.tZ)(b.xv,{multiline:!1,variant:"small",color:"dimmer",css:[y.l0.textAlign.right],className:"status",children:o}):null,(0,i.tZ)(q.II,(0,f._)((0,d._)({id:Z,className:"input",value:h,css:[et[(null==_?void 0:_.state)||"default"]]},v),{"aria-describedby":C,"aria-invalid":(null==_?void 0:_.state)==="error"})),(0,i.tZ)("div",{id:x,className:"validation",css:[en[(null==_?void 0:_.state)||"default"]],"aria-live":(null==_?void 0:_.state)!=="default"?"polite":void 0,children:_?(0,i.tZ)(ei,(0,d._)({},_)):null})]})},el=n(72310),ec=n(34142),es=n(87682),eu=n(48900),ed=n(15250),ef=n(54916),eh=n(59109),ep=n(18107),em="\x1b[0;31m",ev="\x1b[0m",eg=["⣾","⣽","⣻","⢿","⡿","⣟","⣯","⣷","⠁","⠂","⠄","⡀","⢀","⠠","⠐","⠈"];function ey(e){var t=e.name,n=e.failureMessage,r=e.stack;return"❌	".concat(em).concat(t).concat(ev,"\r").concat(n?"\nMessage: ".concat(n,"\r"):"","\nStack Trace:\r\n").concat(r.replace(/\n/g,"\r\n"),"\n\r\n\r\n")}var eb=function(e){var t,n,a=e.language,l=e.unitTests,c=e.onResult,s=e.trackingContext,u=e.getRunnerOutput,f=(0,r._)(o.useState(!1),2),h=f[0],p=f[1],m=(0,ef.Z)(),v=m.container,y=m.packager,b=m.fs,w=null,x=u(),_=x&&void 0!==x.startBlock&&void 0!==x.endBlock&&void 0!==x.writeOutputToBlock&&void 0!==x.writeErrorToBlock,S=function(){p(!1),(0,eh.WT)(b),w&&(w.stopLogSpinner(),w.finish(),w=null)},E=(t=(0,ec._)(function(){var e,t,n,r,i,o,u,f,m,g,Z,E,k,T,R,D,I,G,A,P,N,U,L,O;return(0,es.Jh)(this,function(M){switch(M.label){case 0:if(h)return[2];if(t=null,w={startLogSpinner:function(e){if(t)throw Error("A spinner is already active! call stopSpinner first or use the update callback to update the active spinner's message.");var n=e,r=0;return t=setInterval(function(){var e=eg[++r%eg.length];if(!w)throw Error("Expected logger");w.clearLine(),w.logMessage(e+" "+n)},100),function(e){n=e}},stopLogSpinner:function(){t&&clearInterval(t),t=null},finish:function(){if(_&&e){var t;null==x||null===(t=x.endBlock)||void 0===t||t.call(x,e)}},logMessage:function(t){var n,r;if(_&&e){null==x||null===(r=x.writeOutputToBlock)||void 0===r||r.call(x,e,t);return}null==x||null===(n=x.write)||void 0===n||n.call(x,t)},logError:function(t){if(_&&e){var n;null==x||null===(n=x.writeErrorToBlock)||void 0===n||n.call(x,e,t)}},clearLogs:function(){var e;_||(null==x||null===(e=x.clear)||void 0===e||e.call(x),null==w||w.logMessage("\r\n"))},clearLine:function(){if(!w)throw Error("Expected logger");w.logMessage("\x1b[1K\r")}},!l)throw Error("Run button should not be active if there are no tests");return p(!0),(0,B.j)(B.U3.REPL_UNIT_TEST_USED,{trackingData:{context:s},action:"ranTests"}),w.clearLogs(),_&&(e=null==x?void 0:null===(n=x.startBlock)||void 0===n?void 0:n.call(x,ep.kH.UNIT_TEST).id),[4,(r=(0,C.x)(a)).buildAndRunTests((0,d._)({container:v,fs:b,packager:y,logger:w},l))];case 1:if(i=M.sent(),w.stopLogSpinner(),w.clearLine(),w.clearLogs(),null!==i.error)return w.logMessage("".concat(em).concat(i.error).concat(ev,"\r\n")),S(),l.tests.map(function(e){return{testId:e.id,didPass:!1}}),[2];if(o=i.result.passed?[]:i.result.failures.map(function(e){return r.parseTestResultName(e.name)}),u=[],f=l.tests.map(function(e){return r.getProperTestName(e.name)}),(m=o.filter(function(e){return!f.includes(e)})).length)Z=m[0],E=i.result.failures[0].stack,w.logMessage(ey({name:Z,failureMessage:"The following error occurred but was not related to a single unit test",stack:E})),w.logError("Testing failed"),(g=u).push.apply(g,(0,X._)(l.tests.map(function(e){return{testId:e.id,didPass:!1}})));else{k=!0,T=!1,R=void 0;try{for(D=l.tests[Symbol.iterator]();!(k=(I=D.next()).done);k=!0){if(G=I.value,A=r.getProperTestName(G.name),P=o.indexOf(A),N=-1===P,u.push({testId:G.id,didPass:N}),N){w.logMessage("✅	".concat("\x1b[0;32m").concat(A).concat(ev,"\r\n\r\n"));continue}U=i.result.failures[P].stack,w.logMessage(ey({name:A,failureMessage:G.failureMessage,stack:U})),w.logError('Test "'.concat(A,'" failed'))}}catch(e){T=!0,R=e}finally{try{k||null==D.return||D.return()}finally{if(T)throw R}}}if(c(u),L=l.tests.length,i.result.passed)return w.logMessage("".concat("\x1b[48;5;22m","  All tests have passed ").concat(L,"/").concat(L,"  ").concat(ev,"\r\n")),S(),[2];return O=L-i.result.failures.length,w.logMessage("".concat("\x1b[48;5;88m","  ").concat(O,"/").concat(L," passed, see errors above  ").concat(ev)),S(),[2]}})}),function(){return t.apply(this,arguments)}),k=(n=(0,ec._)(function(){return(0,es.Jh)(this,function(e){try{E()}catch(e){eu.$e(function(t){t.setTag("unittestsrun","true"),eu.Tb(e)}),w&&(w.logMessage("\r\n".concat(em," Sorry, we have failed to run your tests. Please try again or contact support. ").concat(ev,"\r\n")),w.logError("Running tests failed")),S()}return[2]})}),function(){return n.apply(this,arguments)});return l&&l.tests.length>0?(0,i.tZ)(g.G,{children:(0,i.tZ)(Z.zx,{disabled:h,colorway:"primary",iconLeft:(0,i.tZ)(ed.Z,{}),onClick:k,text:h?"Running tests...":"Run tests"})}):null},eZ=n(95891);function ew(e){var t=e.isOpen,n=e.test,a=e.language,l=e.onClose,u=e.trackingContext,p=(0,s.Z)(),m=(0,x.Z)().showConfirm,_=(0,r._)(o.useState(null),2),S=_[0],E=_[1],k=(0,r._)(o.useState(""),2),T=k[0],R=k[1],D=(0,r._)(o.useState(""),2),I=D[0],P=D[1],N=(0,r._)(o.useState(""),2),U=N[0],L=N[1],O=(0,r._)((0,h.Hd)({onError:function(e){return L(e.message)},update:function(e,t){var n,r=null===(n=t.data)||void 0===n?void 0:n.createReplUnitTest;r&&("UserError"===r.__typename?L(r.message):"ReplUnitTest"===r.__typename&&(e.modify({id:e.identify({__typename:"Repl",id:p}),fields:{unitTests:function(t){var n=e.writeFragment({data:r,fragment:h.Rb});return t?(0,f._)((0,d._)({},t),{tests:(0,X._)(t.tests).concat([n])}):{__typename:"ReplUnitTestsWithMeta",meta:null,tests:[n]}}}}),m("Test created!"),l()))}}),2),M=O[0],F=O[1],H=(0,r._)((0,h.kO)({onError:function(e){return L(e.message)},onCompleted:function(e){var t=e.updateReplUnitTest;t&&("UserError"===t.__typename?L(t.message):"ReplUnitTest"===t.__typename&&(m("Test updated!"),l()))}}),2),V=H[0],Y=H[1],$=(0,el.Y)("",function(e){return e.length<=0?{message:"Must include test name"}:e.trim().split(" ").length>1?{message:"Test name must only be one word"}:void 0});o.useEffect(function(){$.setValue((null==n?void 0:n.name)||"",{preventTouch:!0}),P((null==n?void 0:n.failureMessage)||""),R((null==n?void 0:n.code)||""),S&&S.setValue((null==n?void 0:n.code)||"")},[n,S]),o.useEffect(function(){L("")},[T,L]);var J=(0,C.x)(a),K="".concat(J.getCommentChar()," Enter code here"),Q=!n||n.name!==$.value||n.code!==T||n.failureMessage!==I,ee=F.loading||Y.loading,et=J.testIntro($.value||""),en=J.hasClosingBrackets()?J.getClosingBrackets():"",er=(0,r._)(o.useState(!1),2),ei=er[0],eo=er[1],ec=function(){S&&(S.setValue("  "+J.exampleTest.code),S.focus()),R(J.exampleTest.code)};return(0,i.tZ)(v.u,{isOpen:t,onRequestClose:l,maxWidth:872,children:(0,i.BX)(g.G,{css:[y.l0.colWithGap(24)],children:[(0,i.tZ)(b.h4,{level:1,variant:"headerDefault",children:"New unit test"}),(0,i.BX)(g.G,{css:[y.l0.colWithGap(8)],children:[(0,i.tZ)("label",{htmlFor:"name",children:(0,i.tZ)(b.h4,{level:2,variant:"subheadDefault",children:"Name"})}),(0,i.tZ)(ea,{id:"name",label:"Test name",status:null,autoFocus:!0,required:!0,value:$.value,isValid:$.isValid,error:$.error,warning:$.warning,touched:$.touched,onChange:function(e){$.setValue(e.target.value)},placeholder:"Enter test name here"})]}),(0,i.BX)(g.G,{css:[y.l0.colWithGap(8)],children:[(0,i.BX)(g.G,{css:[y.l0.flex.row,y.l0.align.center,y.l0.justify.spaceBetween],children:[(0,i.tZ)(b.h4,{level:2,variant:"subheadDefault",children:"Code"}),(0,i.BX)(g.G,{css:[y.l0.rowWithGap(4)],children:[(0,i.BX)(eZ.Z,{isOpen:ei,onClickOutside:function(){return eo(!1)},placement:"bottom-end",children:[(0,i.tZ)(Z.zx,{iconLeft:(0,i.tZ)(W.Z,{}),size:"small",variant:"outlined",text:"View an example",onClick:function(){if([K,J.exampleTest.code].includes(T.trim())){ec();return}eo(!0)}}),(0,i.BX)(g.G,{children:["This will overwrite your current test. Are you sure?",(0,i.BX)(g.G,{css:[y.l0.rowWithGap(4),y.l0.pt(8)],children:[" ",(0,i.tZ)(Z.zx,{text:"No, go back",size:"small",iconLeft:(0,i.tZ)(z.Z,{}),onClick:function(){eo(!1)}}),(0,i.tZ)(Z.zx,{text:"Yes, delete test",colorway:"negative",size:"small",iconLeft:(0,i.tZ)(A.Z,{}),onClick:function(){ec(),eo(!1)}})]})]})]}),(0,i.tZ)(w.Z,{iconLeft:(0,i.tZ)(j.Z,{}),size:"small",variant:"outlined",text:"View docs",target:"_blank",href:"https://docs.replit.com/teams-edu/unit-testing"})]})]}),(0,i.tZ)(g.G,{css:[y.l0.backgroundColor.backgroundDefault,y.l0.borderRadius(8),{border:"1px solid var(--background-highest)"}],children:(0,i.tZ)(g.G,{css:[y.l0.borderRadius(8),y.l0.height(200),y.l0.position.relative],children:(0,i.tZ)(G,{skeleton:et,skeletonClosingBracket:en,language:a,editorRef:E,onChange:R,placeholder:K})})})]}),(0,i.BX)(g.G,{css:[y.l0.colWithGap(8)],children:[(0,i.tZ)(b.h4,{level:2,variant:"subheadDefault",children:"Failure message"}),(0,i.tZ)(q.II,{value:I,onChange:function(e){return P(e.target.value)},placeholder:"This will be displayed on test failure"})]}),(0,i.BX)(g.G,{css:[y.l0.flex.row,y.l0.align.center,y.l0.justify.spaceBetween],children:[(0,i.tZ)(b.xv,{css:[y.l0.color.accentNegativeStronger],multiline:!1,children:U}),(0,i.BX)(g.G,{css:[y.l0.rowWithGap(12)],children:[(0,i.tZ)(Z.zx,{text:"Cancel",onClick:l}),(0,i.tZ)(Z.zx,{text:"".concat(ee?"Creating test...":"Create test"),iconLeft:(0,i.tZ)(c.Z,{}),colorway:"primary",disabled:!Q||ee,onClick:function(){if(!$.validate()){if(T.length<=0){L("Test cannot be empty");return}n?(V({variables:{input:{name:$.value,code:T,failureMessage:I,testId:n.id}}}),(0,B.j)(B.U3.REPL_UNIT_TEST_USED,{trackingData:{context:u},action:"modifiedTest"})):(M({variables:{input:{name:$.value,code:T,failureMessage:I,replId:p}}}),(0,B.j)(B.U3.REPL_UNIT_TEST_USED,{trackingData:{context:u},action:"addedTest"}))}}})]})]})]})})}function ex(e){var t=e.testId,n=e.onClose,a=(0,x.Z)().showConfirm,l=(0,s.Z)(),c=(0,r._)((0,h.IV)({onError:function(e){return C(e.message)},update:function(e,r){var i,o=null===(i=r.data)||void 0===i?void 0:i.deleteReplUnitTest;o&&("UserError"===o.__typename?C(o.message):"ReplUnitTest"===o.__typename&&t&&(e.modify({id:e.identify({__typename:"Repl",id:l}),fields:{unitTests:function(e,n){var r=n.readField,i=e.tests.filter(function(e){return r("id",e)!==t});return(0,f._)((0,d._)({},e),{tests:(0,X._)(i)})}}}),(0,B.j)(B.U3.REPL_UNIT_TEST_USED,{action:"removedTest"}),a("Test deleted!"),n()))}}),2),u=c[0],p=c[1],m=(0,r._)(o.useState(""),2),w=m[0],C=m[1];return(0,i.tZ)(v.u,{isOpen:!!t,onRequestClose:n,children:(0,i.BX)(g.G,{css:[y.l0.colWithGap(24)],children:[(0,i.tZ)(b.h4,{level:1,variant:"headerDefault",children:"Delete test?"}),(0,i.tZ)(b.xv,{children:"Are you sure you want to delete this test? This cannot be undone."}),(0,i.BX)(g.G,{css:[y.l0.flex.row,y.l0.justify.spaceBetween,y.l0.align.center],children:[(0,i.tZ)(b.xv,{css:[y.l0.color.accentNegativeStronger],children:w}),(0,i.BX)(g.G,{css:[y.l0.rowWithGap(12),y.l0.justify.end],children:[(0,i.tZ)(Z.zx,{text:"Cancel",disabled:p.loading,onClick:n}),(0,i.tZ)(Z.zx,{text:"Yes, delete this test",colorway:"negative",iconLeft:(0,i.tZ)(V.Z,{}),disabled:p.loading,onClick:function(){if(!t)throw Error("Expected a testId");u({variables:{testId:t}})}})]})]})]})})}var eC=function(e){var t=e.unitTests,n=e.isAddingTest,a=e.onClose,l=e.language,u=e.canWrite,d=e.trackingContext,f=void 0===d?"default":d,p=e.getRunnerOutput,m=(0,r._)(o.useState(n),2),v=m[0],w=m[1],x=(0,r._)(o.useState(null),2),C=x[0],_=x[1],S=(0,r._)(o.useState(null),2),k=S[0],T=S[1],R=(0,s.Z)(),D=(0,r._)((0,h.lQ)(),1)[0],I=(null==t?void 0:t.tests)||[];return(0,i.BX)(g.G,{css:[y.l0.colWithGap(16)],children:[(0,i.tZ)(eb,{language:l,unitTests:t,onResult:function(e){D({variables:{input:{replId:R,results:e},replId:R}})},getRunnerOutput:p,trackingContext:f}),I.length>0?(0,i.tZ)(g.G,{css:[y.l0.colWithGap(8),y.l0.align.center],children:I.map(function(e){var t,n;return(null===(t=e.lastRun)||void 0===t?void 0:t.__typename)==="ReplUnitTestLastRun"&&(e.lastRun.status===F.$I.Passed?n="passed-test":e.lastRun.status===F.$I.Failed&&(n="failed-test")),(0,i.tZ)(g.G,{className:"test ".concat(n),css:{width:"100%"},children:(0,i.BX)(g.G,{css:[y.l0.flex.row,y.l0.justify.spaceBetween,y.l0.align.center,y.l0.p(8),y.l0.borderRadius(8),{border:"1px solid var(--background-highest);"}],children:[(0,i.tZ)(b.xv,{multiline:!1,children:e.name}),u?(0,i.BX)(g.G,{css:[y.l0.rowWithGap(8)],children:[(0,i.tZ)(Y.hU,{onClick:function(){_(e)},alt:"Edit",children:(0,i.tZ)(H.Z,{})}),(0,i.tZ)(Y.hU,{onClick:function(){T(e.id)},alt:"Delete",children:(0,i.tZ)(V.Z,{})})]}):null]})},e.id)})}):(0,i.BX)(g.G,{css:[y.l0.colWithGap(8),y.l0.align.center],children:[(0,i.tZ)(b.xv,{css:[y.l0.textAlign.center],children:"Looks like you don’t have any tests yet!"}),u?(0,i.tZ)(Z.zx,{text:"Add test",onClick:function(){return w(!0)},iconLeft:(0,i.tZ)(c.Z,{})}):null]}),(0,i.tZ)(ew,{isOpen:v||!!C||n,test:C,language:l,onClose:function(){_(null),w(!1),a&&a()},trackingContext:f}),(0,i.tZ)(ex,{testId:k,onClose:function(){return T(null)}}),(0,i.tZ)(E(),{id:"a2df1ed8108a6cad",children:".tests-wrapper.jsx-a2df1ed8108a6cad{-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);padding:var(--space-16)0;width:100%}.test.jsx-a2df1ed8108a6cad{padding:var(--space-8)var(--space-8);border:1px solid var(--outline-dimmest);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4)}.passed-test.jsx-a2df1ed8108a6cad{border-color:var(--accent-positive-default);background:var(--accent-positive-dimmer)}.failed-test.jsx-a2df1ed8108a6cad{border-color:var(--accent-negative-default);background:var(--accent-negative-dimmer)}"})]})},e_=n(83848),eS=n(18931),eE=function(e){var t=e.onClick,n=e.hasTests,r=n?{"aria-label":"Delete all tests to switch test type","data-microtip-position":"bottom","data-microtip-size":"medium",role:"tooltip"}:{};return(0,i.BX)("div",(0,f._)((0,d._)({},r),{className:"jsx-44786ca38dd3aa42 "+(r&&null!=r.className&&r.className||"back-button"),children:[(0,i.tZ)(e_.Z,{filled:!1,border:!1,size:"small",Icon:eS.Z,onClick:t,disabled:n,children:"Switch test type"}),(0,i.tZ)(E(),{id:"44786ca38dd3aa42",children:".back-button.jsx-44786ca38dd3aa42{width:100%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}"})]}))},ek=n(31593),eT=function(e){var t,n,d,f,h=e.onBack,p=e.getRunnerOutput,m=(0,s.Z)(),v=(0,r._)(o.useState(!1),2),Z=v[0],w=v[1],x=(0,ek.Z)(),C=x.language,_=x.isLoading,S=(0,a.CH)({variables:{replId:m}}),E=null===(t=S.data)||void 0===t?void 0:t.repl;if(S.loading||_)return(0,i.tZ)(g.G,{css:[y.l0.backgroundColor.backgroundDefault,y.l0.flex.row,y.l0.align.center,y.l0.justify.center,y.l0.p(16)],children:(0,i.tZ)(u.Z,{})});if(!E||"Repl"!==E.__typename)return(0,i.tZ)(g.G,{css:[y.l0.p(16)],children:(0,i.tZ)(b.xv,{css:{textAlign:"center"},children:"Unable to fetch tests, please try again."})});if(!C)return(0,i.tZ)(g.G,{css:[y.l0.p(16)],children:(0,i.tZ)(b.xv,{css:{textAlign:"center"},children:"Unit tests are currently only supported in Java, Python, and Node.js Repls."})});var k="default";(null==E?void 0:E.isProject)?k="project_repl":(null==E?void 0:E.isProjectFork)&&(k="submission_repl");var T=!!((null===(n=E.unitTests)||void 0===n?void 0:n.tests)&&E.unitTests.tests.length>0);return(null==E?void 0:null===(d=E.currentUserPermissions)||void 0===d?void 0:d.writeTests)?(0,i.BX)(g.G,{css:[y.l0.colWithGap(16),y.l0.align.center],children:[(0,i.BX)(g.G,{css:[y.l0.flex.row,y.l0.justify.spaceBetween,y.l0.align.center,{width:"100%"}],children:[(0,i.tZ)(l.Z,{truncate:!0,level:4,children:"Unit tests"}),(0,i.tZ)(Y.hU,{alt:"Add test",size:32,onClick:function(){return w(!0)},children:(0,i.tZ)(c.Z,{})})]}),(0,i.BX)(g.G,{css:[y.l0.colWithGap(8),y.l0.maxWidth(256),{width:"80%"}],children:[(0,i.tZ)(M,{language:C,meta:(null===(f=E.unitTests)||void 0===f?void 0:f.meta)||null}),(0,i.tZ)(eC,{isAddingTest:Z,unitTests:(null==E?void 0:E.unitTests)||null,onClose:function(){return w(!1)},language:C,canWrite:!0,trackingContext:k,getRunnerOutput:p}),h?(0,i.tZ)(eE,{hasTests:T,onClick:h}):null]})]}):(0,i.BX)(g.G,{css:[y.l0.colWithGap(16)],children:[(0,i.tZ)(b.h4,{level:1,variant:"headerDefault",children:"Unit tests"}),(0,i.tZ)(g.G,{css:{width:"100%",overflowY:"auto"},children:(0,i.tZ)(eC,{unitTests:(null==E?void 0:E.unitTests)||null,language:C,isAddingTest:!1,canWrite:!1,trackingContext:k,getRunnerOutput:p})})]})}},92611:function(e,t,n){n.d(t,{x:function(){return k},y:function(){return E}});var r=n(34142),i=n(21289),o=n(87682),a=n(48900),l=n(59868),c=n(23026),s=function(){"use strict";function e(t){(0,c._)(this,e),this.code="",this.currentIndent=0,this.lib=t}var t=e.prototype;return t.indent=function(){this.currentIndent+=1},t.dedent=function(){if(0===this.currentIndent)throw Error("indent at zero");this.currentIndent-=1},t.addIndents=function(){for(var e=0;e<this.currentIndent;e++)this.code+="  "},t.push=function(e){var t=e.split("\n"),n=!0,r=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;this.addIndents(),this.code+=l,this.newLine()}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}},t.newLine=function(){this.code+="\n"},t.closeCurly=function(){this.addIndents(),this.code+=this.lib.getClosingBrackets()},t.toString=function(){return this.code},e}(),u=n(59109),d=n(10653),f={testRunnerName:function(){return"TestRunner"},testSuiteName:function(){return"TestSuite"},defaultImports:function(){return"import org.junit.Before;\nimport org.junit.After;\nimport org.junit.Test;\nimport static org.junit.Assert.*;"},classIntro:function(){return"public class ".concat((0,u.Og)(f.testSuiteName())," {")},classConstructorName:function(){return(0,u.Og)(f.testSuiteName())},setupIntro:function(){return"@Before\npublic void setUp() {"},tearDownIntro:function(){return"@After\npublic void tearDown() {"},testIntro:function(e){return"".concat(f.testIntroPreName()).concat(e).concat(f.testIntroPostName())},testIntroPreName:function(){return"@Test\npublic void "},testIntroPostName:function(){return"() {"},getProperTestName:function(e){return e},parseTestResultName:function(e){return e.replace("(".concat((0,u.Og)(f.testSuiteName()),")"),"")},buildSuite:function(e){var t=e.tests,n=e.meta,r=new s(f);r.push(f.defaultImports()),n&&n.imports&&r.push(n.imports),r.newLine(),r.push(f.classIntro()),r.newLine(),r.indent(),n&&(n.initialization&&(r.push(n.initialization),r.newLine()),n.setup&&(r.push(f.setupIntro()),r.indent(),r.push(n.setup),r.dedent(),r.closeCurly(),r.newLine(),r.newLine()),n.tearDown&&(r.push(f.tearDownIntro()),r.indent(),r.push(n.tearDown),r.dedent(),r.closeCurly(),r.newLine(),r.newLine()));var i=!0,o=!1,a=void 0;try{for(var l,c=t[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var u=l.value;u.code&&(r.push(f.testIntro(u.name)),r.indent(),r.push(u.code),r.dedent(),r.closeCurly(),r.newLine(),r.newLine())}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return r.dedent(),r.closeCurly(),r.toString()},runSuite:function(e){return v.apply(this,arguments)},buildAndRunTests:function(e){var t=e.container,n=e.fs,r=e.packager,i=e.logger,o=e.tests,a=e.meta,l=f.buildSuite({tests:o,meta:a});return f.runSuite({container:t,fs:n,packager:r,logger:i,suiteCode:l})},hasClosingBrackets:function(){return!0},getClosingBrackets:function(){return"}"},hasSemicolon:function(){return!0},getCommentChar:function(){return"//"},getHelpText:function(){return"no react in this bitch either"},captureSetupError:function(e){var t=e.tag,n=e.raw;a.$e(function(e){e.setTag("unitTestLib","true"),e.setExtra("raw",n),e.setExtra("language","java10"),a.Tb(t)})},exampleTest:{id:-1,failureMessage:"An Adder class should have an add method that adds two ints and returns the result",name:"add",code:"Adder adder = new Adder();\nint result = adder.add(1, 2);\nassertEquals(3, result);\n"}},h="__UNIT_TEST_RESULT_START__",p="__UNIT_TEST_RESULT_END__",m="import org.json.simple.JSONArray;\nimport org.json.simple.JSONObject;\nimport org.junit.runner.JUnitCore;\nimport org.junit.runner.Result;\nimport org.junit.runner.notification.Failure;\n\npublic class ".concat((0,u.Og)(f.testRunnerName())," {\n    public static void main(String[] args) {\n      Result result = JUnitCore.runClasses(").concat((0,u.Og)(f.testSuiteName()),'.class);\n      JSONArray failures = new JSONArray();\n\n        for (Failure failure : result.getFailures()) {\n            JSONObject obj = new JSONObject();\n            obj.put("name", failure.getTestHeader());\n            obj.put("stack", failure.getTrace());\n            failures.add(obj);\n        }\n        JSONObject out = new JSONObject();\n        out.put("passed", result.wasSuccessful());\n        out.put("failures", failures);\n        System.out.println();\n        System.out.println("').concat(h,'");\n        System.out.println(out);\n        System.out.println("').concat(p,'");\n    }\n}');function v(){return(v=(0,r._)(function(e){var t,n,r,a,c,s,v,g,y,b,Z,w,x,C,_,S,E,k,T,R,D;return(0,o.Jh)(this,function(o){switch(o.label){case 0:return t=e.container,n=e.fs,r=e.packager,a=e.logger,c=e.suiteCode,v=a.startLogSpinner("Setting up the environment"),[4,(0,u.WT)(n)];case 1:return o.sent(),v("Creating your test files 1/2"),[4,(0,u.e3)({fs:n,code:c,filename:"".concat(f.testSuiteName(),".java")})];case 2:if(g=o.sent().error)return f.captureSetupError({tag:"Failed to create suite code file",raw:g}),[2,{error:"There was an error creating a test file, if this happens again, please contact support."}];return v("Creating your test files 2/2"),[4,(0,u.e3)({fs:n,code:m,filename:"".concat(f.testRunnerName(),".java")})];case 3:if(y=o.sent().error)return f.captureSetupError({tag:"Failed to create test runner file",raw:y}),[2,{error:"There was an error creating a test file, if this happens again, please contact support."}];return a.stopLogSpinner(),a.clearLine(),a.logMessage("Installing imported packages\r\n"),[4,r.addPackages([{name:"junit:junit",version:"4.12"},{name:"com.googlecode.json-simple:json-simple",version:"1.1.1"},{name:"org.hamcrest:hamcrest-core",version:"1.3"}])];case 4:return o.sent(),[4,r.installPackages(d.D.active())];case 5:if(o.sent().error)return[2,{error:"Failed to install packages\r\n"}];return a.clearLogs(),v=a.startLogSpinner("Compiling your files"),[4,t.exec("find",".","-type","f","-name","*.java","-print0")];case 6:if(Z=(b=o.sent()).output,w=b.error)return x="Failed to fetch working directory java files",f.captureSetupError({tag:x,raw:w}),[2,{error:"".concat(x,"\r\n\r\n")+(null==Z?void 0:Z.replace(/\n/g,"\n\r"))+"\r\n\r\n"+w}];if("string"!=typeof Z)throw Error("expected working directory files to be a string");return C=Z.slice(0,-1).split("\x00"),_=".:./target/dependency/*",[4,(s=t).exec.apply(s,["javac","-classpath",_,"-d","."].concat((0,i._)(C)))];case 7:if(E=(S=o.sent()).output,k=S.error)return[2,{error:"".concat("Failed to compile test runner file","\r\n\r\n")+(null==E?void 0:E.replace(/\n/g,"\n\r"))+"\r\n\r\n"+k}];return v("Running your tests"),[4,t.exec("java","-classpath",_,(0,u.Og)(f.testRunnerName()))];case 8:if(R=(T=o.sent()).output,D=T.error)return(0,l.j)(l.U3.REPL_UNIT_TEST_CONSTRUCTION_ERROR_INTERNAL),[2,{error:"Running tests failed\r\n\r\n"+(null==R?void 0:R.replace(/\n/g,"\n\r"))+"\r\n\r\n"+D}];if("string"!=typeof R)throw Error("expected runOutput to be a string");return[2,{result:JSON.parse(R.slice(R.indexOf(h)+h.length,R.lastIndexOf(p))),error:null}]}})})).apply(this,arguments)}var g=function(e){return!!e&&e.trim().length>0&&e.split("\n").some(function(e){return!(e.trim().startsWith("#")||""===e.trim())})},y={testRunnerName:function(){return"test_runner"},testSuiteName:function(){return"test_suite"},defaultImports:function(){return"import unittest\nfrom main import *\n"},classIntro:function(){return"class UnitTests(unittest.TestCase):"},classConstructorName:function(){return"__init__"},setupIntro:function(){return"def setUp(self):"},tearDownIntro:function(){return"def tearDown(self):"},testIntro:function(e){return y.testIntroPreName()+e+y.testIntroPostName()},testIntroPreName:function(){return"def test_"},testIntroPostName:function(){return"(self):"},getProperTestName:function(e){return"test_".concat(e)},parseTestResultName:function(e){return e},buildSuite:function(e){var t=e.tests,n=e.meta,r=new s(y);r.push(y.defaultImports()),n&&n.imports&&r.push(n.imports),r.newLine(),r.push(y.classIntro()),r.newLine(),r.indent(),n&&(n.initialization&&(r.push(n.initialization),r.newLine()),g(n.setup)&&(r.push(y.setupIntro()),r.indent(),r.push(n.setup),r.dedent(),r.newLine()),g(n.tearDown)&&(r.push(y.tearDownIntro()),r.indent(),r.push(n.tearDown),r.dedent(),r.newLine()));var i=!0,o=!1,a=void 0;try{for(var l,c=t[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var u=l.value;r.push(y.testIntro(u.name)),r.indent(),r.push(u.code||"pass"),r.dedent(),r.newLine()}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return r.toString()},runSuite:function(e){return x.apply(this,arguments)},buildAndRunTests:function(e){var t=e.container,n=e.fs,r=e.packager,i=e.logger,o=e.tests,a=e.meta,l=y.buildSuite({tests:o,meta:a});return y.runSuite({container:t,fs:n,packager:r,logger:i,suiteCode:l})},hasClosingBrackets:function(){return!1},getClosingBrackets:function(){throw Error("This language does not have closing brackets, check `hasClosingBrackets` first")},hasSemicolon:function(){return!1},getCommentChar:function(){return"#"},getHelpText:function(){return"no react in this bitch"},captureSetupError:function(e){var t=e.tag,n=e.raw;a.$e(function(e){e.setTag("unitTestLib","true"),e.setExtra("raw",n),e.setExtra("language","python3"),a.Tb(t)})},exampleTest:{id:-1,failureMessage:"In main.py you should have an add functions that adds two numbers and returns the result",name:"add",code:"self.assertEquals(add(1, 2), 3)"}},b="__UNIT_TEST_RESULT_START__",Z="__UNIT_TEST_RESULT_END__",w="import unittest\nimport ".concat((0,u.Og)(y.testSuiteName()),"\nimport os\nimport json\nfrom time import sleep\n\nsuite = unittest.TestLoader().loadTestsFromTestCase(\n  ").concat((0,u.Og)(y.testSuiteName()),'.UnitTests)\nf = open(os.devnull,"w")\ntest_res = unittest.TextTestRunner(stream=f).run(suite)\n\n# Merge errors and failures and normalize to {name, stack}\nfailures = [\n    {\n        "name": r[0]._testMethodName,\n        "stack": r[1],\n    } for r in test_res.errors + test_res.failures\n]\nprint()\nprint(\'').concat(b,'\')\nsleep(1)\nprint(json.dumps({\n    "passed": test_res.wasSuccessful(),\n    "failures": failures,\n}))\nprint()\nprint(\'').concat(Z,"');");function x(){return(x=(0,r._)(function(e){var t,n,r,i,a,c,s,f,h,p,m;return(0,o.Jh)(this,function(o){switch(o.label){case 0:return t=e.container,n=e.fs,r=e.packager,i=e.logger,a=e.suiteCode,c=i.startLogSpinner("Setting up the environment"),[4,(0,u.WT)(n)];case 1:return o.sent(),c("Creating your test files 1/2"),[4,(0,u.e3)({fs:n,code:a,filename:"".concat(y.testSuiteName(),".py")})];case 2:if(s=o.sent().error)return y.captureSetupError({tag:"Failed to create suite code file",raw:s}),[2,{error:"There was an error creating a test file, if this happens again, please contact support."}];return c("Creating your test files 2/2"),[4,(0,u.e3)({fs:n,code:w,filename:"".concat(y.testRunnerName(),".py")})];case 3:if(f=o.sent().error)return y.captureSetupError({tag:"Failed to create test runner file",raw:f}),[2,{error:"There was an error creating a test file, if this happens again, please contact support."}];return i.stopLogSpinner(),i.clearLine(),i.logMessage("Installing imported packages\r\n"),[4,r.installPackages(d.D.active())];case 4:if(o.sent().error)return[2,{error:"Failed to install packages\r\n"}];return i.clearLogs(),i.startLogSpinner("Running your tests"),[4,t.exec("python","-B",(0,u.Og)("".concat(y.testRunnerName(),".py")))];case 5:if(p=(h=o.sent()).output,m=h.error)return(0,l.j)(l.U3.REPL_UNIT_TEST_CONSTRUCTION_ERROR_INTERNAL),[2,{error:"Running tests failed\r\n\r\n"+(null==p?void 0:p.replace(/\n/g,"\n\r"))+"\r\n"+m}];if("string"!=typeof p)throw Error("expected runoutput to be a string");return[2,{result:JSON.parse(p.slice(p.indexOf(b)+b.length,p.lastIndexOf(Z))),error:null}]}})})).apply(this,arguments)}var C={testRunnerName:function(){throw Error("Node test runner uses jest directly")},testSuiteName:function(){return"test_suite"},defaultImports:function(){return"const index = require('./index.js');"},classIntro:function(){return'describe("UnitTests", function() {'},classConstructorName:function(){return null},setupIntro:function(){return"beforeAll(async function() {"},tearDownIntro:function(){return"afterAll(async function() {"},testIntro:function(e){return C.testIntroPreName()+e+C.testIntroPostName()},testIntroPreName:function(){return'test("'},testIntroPostName:function(){return'", async function() {'},getProperTestName:function(e){return e},parseTestResultName:function(e){return e},buildSuite:function(e){var t=e.tests,n=e.meta,r=new s(C);r.push(C.defaultImports()),n&&n.imports&&r.push(n.imports),r.newLine(),r.push(C.classIntro()),r.newLine(),r.indent(),n&&(n.initialization&&(r.push(n.initialization),r.newLine()),n.setup&&(r.push(C.setupIntro()),r.indent(),r.push(n.setup),r.dedent(),r.closeCurly(),r.newLine(),r.newLine()),n.tearDown&&(r.push(C.tearDownIntro()),r.indent(),r.push(n.tearDown),r.dedent(),r.closeCurly(),r.newLine(),r.newLine()));var i=!0,o=!1,a=void 0;try{for(var l,c=t[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var u=l.value;u.code&&(r.push(C.testIntro(u.name)),r.indent(),r.push(u.code),r.dedent(),r.closeCurly(),r.newLine(),r.newLine())}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return r.dedent(),r.closeCurly(),r.toString()},runSuite:function(e){return _.apply(this,arguments)},buildAndRunTests:function(e){var t=e.container,n=e.fs,r=e.packager,i=e.logger,o=e.tests,a=e.meta,l=C.buildSuite({tests:o,meta:a});return C.runSuite({container:t,fs:n,packager:r,logger:i,suiteCode:l})},hasClosingBrackets:function(){return!0},getClosingBrackets:function(){return"});"},hasSemicolon:function(){return!0},getCommentChar:function(){return"//"},getHelpText:function(){return"no react yet"},captureSetupError:function(e){var t=e.tag,n=e.raw;a.$e(function(e){e.setTag("unitTestLib","true"),e.setExtra("raw",n),e.setExtra("language","nodejs"),a.Tb(t)})},exampleTest:{id:-1,failureMessage:"",name:"add",code:"expect(index.add(1, 2)).toBe(3);"}};function _(){return(_=(0,r._)(function(e){var t,n,r,i,a,c,s,f,h,p,m,v,g,y,b,Z,w,x,_;return(0,o.Jh)(this,function(o){switch(o.label){case 0:return t=e.container,n=e.fs,r=e.packager,i=e.logger,a=e.suiteCode,c=i.startLogSpinner("Setting up the environment"),[4,(0,u.WT)(n)];case 1:return o.sent(),c("Creating your test files 1/2"),[4,(0,u.e3)({fs:n,code:a,filename:"".concat(C.testSuiteName(),".js")})];case 2:if(s=o.sent().error)return C.captureSetupError({tag:"Failed to create suite code file",raw:s}),[2,{error:"There was an error creating a test file, if this happens again, please contact support."}];return c("Creating your test files 2/2"),f=69,h="jest.config.json",p={testRegex:(0,u.Og)("".concat(C.testSuiteName(),".js")),testEnvironment:"node",testFailureExitCode:f},[4,(0,u.e3)({fs:n,code:JSON.stringify(p),filename:h})];case 3:if(m=o.sent().error)return C.captureSetupError({tag:"Failed to create config file",raw:m}),[2,{error:"There was an error creating a test file, if this happens again, please contact support."}];return i.stopLogSpinner(),i.clearLine(),i.logMessage("Installing imported packages\r\n"),[4,r.installPackages(d.D.active())];case 4:if(o.sent().error)return[2,{error:"Failed to install packages\r\n"}];return i.clearLogs(),c=i.startLogSpinner("Running your tests"),v=(0,u.Og)("output.json"),[4,t.exec("jest","--json","--outputFile",v,"--config",(0,u.Og)(h),"--forceExit","--passWithNoTests")];case 5:if(y=(g=o.sent()).output,(b=g.error)&&!b.endsWith(f.toString()))return(0,l.j)(l.U3.REPL_UNIT_TEST_CONSTRUCTION_ERROR_INTERNAL),[2,{error:"Running tests failed\r\n\r\n"+(null==y?void 0:y.replace(/\n/g,"\n\r"))+"\r\n"+b}];return c("Parsing your test results"),[4,n.readFile(v)];case 6:if((Z=o.sent()).error)return C.captureSetupError({tag:"Error reading test results",raw:Z.error}),[2,{error:"There was an error getting test results, if this happens please contact support."}];if((w=JSON.parse(Z.content.toString())).success)return[2,{error:null,result:{passed:!0,failures:[]}}];if(!(_=(x=w.testResults[0]).assertionResults.filter(function(e){return"passed"!==e.status}).map(function(e){return{name:e.title,stack:e.failureMessages[0]}})).length)return[2,{error:x.message.replace(/\n/g,"\r\n")}];return[2,{error:null,result:{passed:!1,failures:_}}]}})})).apply(this,arguments)}var S={java10:f,java10_beta:f,java:f,python3:y,python3_beta:y,python:y,nodejs:C,javascript:C,nodejs_beta:C};function E(e){return e in S}function k(e){if(!E(e))throw Error("".concat(e," is not a supported unit testing language, it has to be one of ").concat(Object.keys(S)));return S[e]}},59109:function(e,t,n){n.d(t,{Og:function(){return u},WT:function(){return h},e3:function(){return d}});var r=n(34142),i=n(87682),o=n(48900),a=n(41500),l=n(39756),c=n(30084),s="_test_runner";function u(e){return s+e}function d(e){return f.apply(this,arguments)}function f(){return(f=(0,r._)(function(e){var t,n,r,o;return(0,i.Jh)(this,function(i){return t=e.fs,n=e.code,r=s+e.filename,o=a.Z.from(n,"utf8"),[2,t.writeFile(r,o)]})})).apply(this,arguments)}function h(e){return p.apply(this,arguments)}function p(){return(p=(0,r._)(function(e){var t,n;return(0,i.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),[4,e.readDir(l.Ql)];case 1:if((t=r.sent()).error)return[2];return[4,Promise.all(t.children.map(function(t){return t.filename.startsWith(s)?t.type===c.Tv.File?e.deleteFile(t.filename):e.deleteDir(t.filename):Promise.resolve(null)}))];case 2:return r.sent(),[3,4];case 3:return n=r.sent(),o.$e(function(e){e.setTag("unitTestLib","true"),o.Tb(n)}),[3,4];case 4:return[2]}})})).apply(this,arguments)}},79962:function(e,t,n){n.d(t,{AF:function(){return w},Hd:function(){return C},IV:function(){return k},Rb:function(){return g},aA:function(){return v},kO:function(){return S},lQ:function(){return R},rU:function(){return b}});var r=n(45903),i=n(93295),o=n(23982),a=n(72986);function l(){var e=(0,i._)(["\n  fragment UnitTestsReplUnitTestMeta on ReplUnitTestMeta {\n    id\n    imports\n    initialization\n    setup\n    tearDown\n  }\n"]);return l=function(){return e},e}function c(){var e=(0,i._)(["\n  fragment UnitTestsReplUnitTest on ReplUnitTest {\n    id\n    name\n    code\n    failureMessage\n  }\n"]);return c=function(){return e},e}function s(){var e=(0,i._)(["\n  mutation createUnitTestMeta($input: CreateReplUnitTestMetaInput!) {\n    createReplUnitTestMeta(input: $input) {\n      ... on ReplUnitTestMeta {\n        id\n        ...UnitTestsReplUnitTestMeta\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return s=function(){return e},e}function u(){var e=(0,i._)(["\n  mutation updateUnitTestMeta($input: UpdateReplUnitTestMetaInput!) {\n    updateReplUnitTestMeta(input: $input) {\n      ... on ReplUnitTestMeta {\n        id\n        ...UnitTestsReplUnitTestMeta\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return u=function(){return e},e}function d(){var e=(0,i._)(["\n  mutation createUnitTest($input: CreateReplUnitTestInput!) {\n    createReplUnitTest(input: $input) {\n      ... on ReplUnitTest {\n        id\n        ...UnitTestsReplUnitTest\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return d=function(){return e},e}function f(){var e=(0,i._)(["\n  mutation updateUnitTest($input: UpdateReplUnitTestInput!) {\n    updateReplUnitTest(input: $input) {\n      ... on ReplUnitTest {\n        id\n        ...UnitTestsReplUnitTest\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return f=function(){return e},e}function h(){var e=(0,i._)(["\n  mutation deleteUnitTest($testId: Int!) {\n    deleteReplUnitTest(testId: $testId) {\n      ... on ReplUnitTest {\n        id\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return h=function(){return e},e}function p(){var e=(0,i._)(["\n  mutation updateReplUnitTestLastRun(\n    $input: UpdateReplUnitTestLastRunInput!\n    $replId: String!\n  ) {\n    updateReplUnitTestLastRun(input: $input) {\n      ... on UpdateReplUnitTestLastRunUpdatedTests {\n        __typename\n        updatedTests {\n          ... on ReplUnitTest {\n            id\n            __typename\n            lastRun(replId: $replId) {\n              ... on ReplUnitTestLastRun {\n                __typename\n                status\n              }\n              ... on UserError {\n                __typename\n                message\n              }\n            }\n          }\n          ... on UserError {\n            __typename\n            message\n          }\n        }\n      }\n      ... on UserError {\n        __typename\n        message\n      }\n    }\n  }\n"]);return p=function(){return e},e}var m={},v=(0,o.Ps)(l()),g=(0,o.Ps)(c()),y=(0,o.Ps)(s(),v);function b(e){var t=(0,r._)({},m,e);return a.D(y,t)}var Z=(0,o.Ps)(u(),v);function w(e){var t=(0,r._)({},m,e);return a.D(Z,t)}var x=(0,o.Ps)(d(),g);function C(e){var t=(0,r._)({},m,e);return a.D(x,t)}var _=(0,o.Ps)(f(),g);function S(e){var t=(0,r._)({},m,e);return a.D(_,t)}var E=(0,o.Ps)(h());function k(e){var t=(0,r._)({},m,e);return a.D(E,t)}var T=(0,o.Ps)(p());function R(e){var t=(0,r._)({},m,e);return a.D(T,t)}},31593:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(32477),i=n(66349),o=n(59808),a=n(54916),l=n(43429),c=n(92611);function s(){var e=(0,i.Z)(),t=(0,a.Z)().dotReplit,n=null==e?void 0:e.language,s=(0,r._)((0,l.useState)(null),2),u=s[0],d=s[1],f=(0,r._)((0,l.useState)(!0),2),h=f[0],p=f[1];return(0,l.useEffect)(function(){if(n){if((0,c.y)(n)){d(n),p(!1);return}var e=!1,r=t.watch(function(t){if(e||(e=!0,p(!1)),t.error){t.error===o.Yt.NotFound&&d(null);return}var n,r,i=null===(r=t.config.unitTest)||void 0===r?void 0:null===(n=r.language)||void 0===n?void 0:n.toLowerCase();i&&(0,c.y)(i)?d(i):d(null)});return function(){r()}}},[n,t]),{language:u,isLoading:h}}},39783:function(e,t,n){n.d(t,{Q:function(){return o}});var r=n(8182),i=n(43429);function o(e){var t=e.uploadFiles,n=e.fileUploadInputRef,o=e.dirUploadInputRef,a=(0,i.useRef)(Math.random().toString(36));return(0,r.BX)(r.HY,{children:[(0,r.tZ)("input",{style:{display:"none"},ref:n,id:"file-upload-input-".concat(a.current),type:"file",onChange:function(e){var n=e.target.files;n&&t({files:Array.from(n)})},onClick:function(e){e.currentTarget.value=""},multiple:!0,accept:"*"}),(0,r.tZ)("input",{style:{display:"none"},ref:o,id:"dir-upload-input-".concat(a.current),type:"file",onChange:function(e){var n=e.target.files;n&&t({files:Array.from(n)})},onClick:function(e){e.currentTarget.value=""},webkitdirectory:"true",mozdirectory:"true",msdirectory:"true",odirectory:"true",directory:"true",accept:"*"})]})}},81810:function(e,t,n){n.d(t,{ZP:function(){return eD},wK:function(){return e_}});var r,i,o=n(23026),a=n(39698),l=n(45903),c=n(32477),s=n(8182),u=n(43429),d=n(57122),f=n(44620),h=n(56596),p=n(29287),m=n(67337),v=n(51384),g=n(56337),y=n(1498),b=n(70002),Z=n(38080),w=n(70322),x=n(94450),C=n.n(x),_=n(93295),S=n(23982),E=n(77393),k=n(72986);function T(){var e=(0,_._)(["\n  fragment EditDomainRepl on Repl {\n    id\n    hostedUrl\n    apexProxy\n    domains {\n      hosting_deployment_id\n      domain\n      state\n    }\n  }\n"]);return T=function(){return e},e}function R(){var e=(0,_._)(["\n  query EditDomain($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        ...EditDomainRepl\n      }\n      ... on ReplRedirect {\n        replUrl\n      }\n      ... on SubscriptionExpiredError {\n        replId\n      }\n    }\n  }\n  ","\n"]);return R=function(){return e},e}function D(){var e=(0,_._)(["\n  query EditDomainCheckDomain2($replId: String!, $domain: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        checkDomain2(domain: $domain) {\n          ... on DomainStatus2 {\n            verified\n            retry\n            status\n            records {\n              A\n              TXT\n              CNAME\n            }\n          }\n          ... on NotFoundError {\n            message\n          }\n          ... on ServiceUnavailable {\n            message\n          }\n        }\n      }\n    }\n  }\n"]);return D=function(){return e},e}function I(){var e=(0,_._)(["\n  mutation EditDomainLinkReplDomain2(\n    $replId: String!\n    $domain: String!\n    $deploymentId: String\n  ) {\n    linkReplDomain2(\n      replId: $replId\n      domain: $domain\n      deploymentId: $deploymentId\n    ) {\n      __typename\n      ... on Repl {\n        id\n        ...EditDomainRepl\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on ServiceUnavailable {\n        message\n      }\n    }\n  }\n  ","\n"]);return I=function(){return e},e}function G(){var e=(0,_._)(["\n  mutation EditDomainUpdateRepl($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        ...EditDomainRepl\n      }\n    }\n  }\n  ","\n"]);return G=function(){return e},e}var B={},A=(0,S.Ps)(T()),P=(0,S.Ps)(R(),A),N=(0,S.Ps)(D()),U=(0,S.Ps)(I(),A),L=(0,S.Ps)(G(),A),O=n(74833),M=n(18836),X=n(30983),F=n(10041),W=n(48900),H=n(61314),V=n.n(H),z=n(99656),j=n(10981),q=n(8017),Y=n(52682),$=n(88936),J=n(32377),K=n(58719);function Q(e){switch(e.status){case"verified":return(0,s.tZ)(J.Z,{color:p.TV.accentPositiveDefault});case"failed":return(0,s.tZ)(K.Z,{color:p.TV.accentNegativeDefault});case"verifying":return(0,s.tZ)($.Z,{color:p.TV.accentPrimaryDefault});default:return null}}function ee(e){var t,n=e.replId,r=e.hostedUrl,i=e.desiredARecord,o=e.existingDomain,a=e.onLink,d=e.onGoBack,f=e.onLinkStarted,m=e.onStateChanged,v=(0,c._)((0,u.useState)(o?"loading":null),2),g=v[0],b=v[1],Z=(0,c._)((0,u.useState)(!1),2),w=Z[0],x=Z[1],C=(0,c._)((0,u.useState)(null),2),_=C[0],S=C[1],E=(0,c._)((0,u.useState)(!1),2),T=E[0],R=E[1],D=(0,c._)((t=(0,l._)({},B,void 0),k.D(U,t)),2),I=D[0],G=D[1],A=(0,u.useRef)(null),P=(0,u.useRef)(null),N=(0,u.useRef)(null),L=function(e){(null==e?void 0:e.current)&&e.current.select()},X=function(e){var t;(null==e?void 0:null===(t=e.current)||void 0===t?void 0:t.value)&&(0,F.Z)(e.current.value).catch(function(e){W.$e(function(t){t.setTag("domain-link",!0),t.setExtra("type","copy"),W.Tb(e)})})},H=(0,c._)((0,u.useState)(o||""),2),z=H[0],Y=H[1];(0,u.useEffect)(function(){G.data&&"Repl"===G.data.linkReplDomain2.__typename&&a()},[G.data,a]);var $=function(){try{var e=new URL("/",z);Y(e.hostname)}catch(e){}},J=function(e){b(e),m()},K=V()(z,{require_valid_protocol:!1})&&z.split(".").length>=2,Q=K&&2===z.split(".").length,ee=r.replace(/^https:\/\//,""),en="replit-verify=".concat(n),er=(0,j.U)();return(0,s.BX)(h.G,{css:[p.l0.colWithGap(16)],children:[(0,s.BX)(h.G,{css:[p.l0.colWithGap(8)],children:[(0,s.tZ)(O.h4,{level:2,variant:"subheadDefault",children:"New Domain Link"}),(0,s.BX)(O.xv,{children:["Learn more"," ",(0,s.tZ)("a",{href:"https://docs.replit.com/hosting/hosting-web-pages#custom-domains",target:"_blank",children:"here"}),"."]})]}),(0,s.BX)(h.G,{css:[p.l0.colWithGap(4)],children:[(0,s.tZ)("label",{htmlFor:er("domain"),children:(0,s.tZ)(O.xv,{color:"dimmer",variant:"small",multiline:!1,children:"Step 1: Enter your domain"})}),(0,s.tZ)(M.II,{className:"cname-url",readOnly:"loading"===g,value:z,onChange:function(e){Y(e.target.value)},onBlur:function(){$()},placeholder:"example.com",id:er("domain")})]}),Q&&!T?(0,s.BX)(h.G,{css:[p.l0.colWithGap(8)],children:[(0,s.BX)(h.G,{css:[p.l0.colWithGap(4)],children:[(0,s.tZ)("label",{htmlFor:er("record"),children:(0,s.BX)(O.xv,{color:"dimmer",variant:"small",multiline:!1,children:["Step 2: Add an ",(0,s.tZ)("code",{children:"A"})," Record"]})}),(0,s.BX)(h.G,{css:[p.l0.rowWithGap(8),p.l0.align.center],children:[(0,s.tZ)(O.xv,{multiline:!1,css:{fontFamily:p.TV.fontFamilyCode,maxWidth:"40%"},children:z}),(0,s.tZ)(O.xv,{multiline:!1,css:{fontFamily:p.TV.fontFamilyCode},children:"A"}),(0,s.tZ)(M.II,{readOnly:!0,ref:A,onChange:function(){return null},value:i,onFocus:function(){return L(A)},id:er("record")}),(0,s.tZ)(y.zx,{onClick:function(){return X(A)},text:"Copy"})]})]}),(0,s.tZ)(h.G,{css:[p.l0.flex.row,p.l0.align.stretch],children:(0,s.tZ)(y.zx,{variant:"outlined",onClick:function(){return R(!0)},text:"Use CNAME record instead."})})]}):null,K&&(T||!Q)?(0,s.BX)(h.G,{css:[p.l0.colWithGap(4)],children:[(0,s.tZ)("label",{htmlFor:er("CNAMERecord"),children:(0,s.BX)(O.xv,{color:"dimmer",variant:"small",multiline:!1,children:["Step 2: Add a ",(0,s.tZ)("code",{children:"CNAME"})," Record"]})}),(0,s.BX)(h.G,{css:[p.l0.rowWithGap(8),p.l0.align.center],children:[(0,s.tZ)(O.xv,{multiline:!1,css:{fontFamily:p.TV.fontFamilyCode,maxWidth:"40%"},children:z}),(0,s.tZ)(O.xv,{multiline:!1,css:{fontFamily:p.TV.fontFamilyCode},children:"CNAME"}),(0,s.tZ)(M.II,{readOnly:!0,ref:N,onChange:function(){return null},value:ee,onFocus:function(){return L(N)},id:er("CNAMERecord")}),(0,s.tZ)(y.zx,{onClick:function(){return X(N)},text:"Copy"})]}),Q?(0,s.BX)(h.G,{css:[p.l0.colWithGap(8)],children:[(0,s.tZ)(O.xv,{variant:"small",children:'Note: this CNAME record requires that your DNS provider supports CNAMEs for apex domains - for example Cloudflare with "CNAME Flattening".'}),(0,s.tZ)(h.G,{css:[p.l0.flex.row,p.l0.align.stretch],children:(0,s.tZ)(y.zx,{onClick:function(){return R(!1)},text:"Use A record instead",variant:"outlined"})})]}):null]}):null,K?(0,s.BX)(h.G,{css:[p.l0.colWithGap(4)],children:[Q?(0,s.tZ)("label",{htmlFor:er("txtRecord"),children:(0,s.BX)(O.xv,{color:"dimmer",variant:"small",multiline:!1,children:["This domain also requires a ",(0,s.tZ)("code",{children:"TXT"})," Record"]})}):(0,s.BX)("label",{children:['If you are using a service like Cloudflare (with "orange cloud") that rewrites domain records, you can add a ',(0,s.tZ)("code",{children:"TXT"})," ","Record for verification purposes."]}),(0,s.BX)(h.G,{css:[p.l0.rowWithGap(8),p.l0.align.center],children:[(0,s.tZ)(O.xv,{multiline:!1,css:{fontFamily:p.TV.fontFamilyCode,maxWidth:"40%"},children:z}),(0,s.tZ)(O.xv,{multiline:!1,css:{fontFamily:p.TV.fontFamilyCode},children:"TXT"}),(0,s.tZ)(M.II,{readOnly:!0,ref:P,onChange:function(){return null},value:en,onClick:function(){return L(P)},id:er("txtRecord")}),(0,s.tZ)(y.zx,{onClick:function(){return X(P)},text:"Copy"})]})]}):null,"loading"===g?(0,s.tZ)(h.G,{css:[p.l0.colWithGap(12),p.l0.pt(16)],children:(0,s.tZ)(et,{replId:n,domain:z,onVerified:function(){return J("verified")},onError:function(){return J("error")}})}):null,"verified"===g?(0,s.tZ)(h.G,{css:[p.l0.colWithGap(12),p.l0.pt(16)],children:(0,s.tZ)(O.xv,{multiline:!1,children:"Your domain has been verified."})}):null,"error"===g||_?(0,s.tZ)(h.G,{css:[p.l0.colWithGap(12),p.l0.pt(16)],children:(0,s.BX)(O.xv,{multiline:!1,children:["Creating the domain link failed",_?": "+_:"","."]})}):null,(0,s.BX)(h.G,{css:[p.l0.rowWithGap(12),p.l0.justify.end],children:[(0,s.tZ)(y.zx,{onClick:d,text:"Close"}),K&&null===g?(0,s.tZ)(y.zx,{disabled:w,onClick:function(){x(!0),S(null),I({variables:{replId:n,domain:z}}).then(function(e){var t,n=(null===(t=e.data)||void 0===t?void 0:t.linkReplDomain2)||null;(null==n?void 0:n.__typename)==="Repl"?(S(null),J("loading")):(((null==n?void 0:n.__typename)==="ServiceUnavailable"||(null==n?void 0:n.__typename)==="NotFoundError"||(null==n?void 0:n.__typename)==="UnauthorizedError")&&S(null==n?void 0:n.message),J("error")),x(!1),f()}).catch(function(e){x(!1),S(e.message)})},text:"".concat(w?"Linking domain...":"Link domain"),iconLeft:(0,s.tZ)(q.Z,{}),colorway:"primary"}):null]})]})}function et(e){var t=e.domain,n=e.replId,r=e.onVerified,i=e.onError,o=(f=(0,l._)({},B,{variables:{replId:n,domain:t},pollInterval:1e3}),E.a(N,f)),a=o.data,d=o.stopPolling;if((0,u.useEffect)(function(){if(a&&"Repl"===a.repl.__typename){var e,t,n=a.repl;if((null===(e=n.checkDomain2)||void 0===e?void 0:e.__typename)==="NotFoundError"){i();return}if((null===(t=n.checkDomain2)||void 0===t?void 0:t.__typename)==="DomainStatus2"){var o=n.checkDomain2,l=o.retry,c=o.verified;if(!c&&!l){i();return}(c||!l)&&d(),c&&r()}}},[a,d,r,i]),(null==a?void 0:a.repl.__typename)==="Repl"&&a.repl.checkDomain2){var f,m,v,g,y,b,Z="DomainStatus2"===a.repl.checkDomain2.__typename?a.repl.checkDomain2:null,x=null;if(null==Z?void 0:Z.records){var _=Z.records;_.__typename,x=(0,w._)(_,["__typename"])}var S=null;return(null==Z?void 0:Z.status)||((null===(b=a.repl.checkDomain2)||void 0===b?void 0:b.__typename)==="ServiceUnavailable"&&(S=a.repl.checkDomain2.message),S||(S="DNS updates can take up to 48 hours to fully synchronize. Feel free to check back later.")),(0,s.BX)(h.G,{css:[p.l0.colWithGap(16),p.l0.justify.spaceBetween],children:[(0,s.BX)(h.G,{css:[p.l0.rowWithGap(16),p.l0.align.center],children:[(0,s.tZ)("div",{css:[p.l0.width("20px"),p.l0.height("20px"),{aspectRatio:"1 / 1"},{borderRadius:"100%"},{borderRadius:"100%"},{borderStyle:"solid"},{borderWidth:"3px"},{borderColor:p.TV.accentPrimaryDimmer},{borderTopColor:p.TV.accentPrimaryDefault},{transform:"rotate(0deg)"},{animation:"linear domain-loading 1s infinite"}],className:"jsx-4e6cc6caecb799c9"}),(0,s.tZ)("div",{className:"jsx-4e6cc6caecb799c9",children:S})]}),x||(null===(v=a.repl.checkDomain2)||void 0===v?void 0:v.__typename)==="DomainStatus2"&&(null===(g=a.repl.checkDomain2)||void 0===g?void 0:g.retry)||(null===(y=a.repl.checkDomain2)||void 0===y?void 0:y.__typename)==="ServiceUnavailable"?(0,s.BX)(h.G,{children:[(0,s.tZ)("br",{className:"jsx-4e6cc6caecb799c9"}),x?(0,s.BX)(h.G,{children:["Currently, your domain’s records show:",(0,s.tZ)("pre",{css:[p.l0.overflow("scroll")],className:"jsx-4e6cc6caecb799c9",children:Object.entries(x).map(function(e){var n=(0,c._)(e,2),r=n[0],i=n[1];return null==i?void 0:i.map(function(e){return(0,s.BX)("div",{className:"jsx-4e6cc6caecb799c9",children:[t," ",r," ",e]},"{domain}-{dnsType}")})})})]}):(0,s.tZ)(O.xv,{children:"Currently, your domain is either not returning any records, or something is getting in the way of our verification process."})]}):null,(0,s.tZ)(C(),{id:"4e6cc6caecb799c9",children:"@-webkit-keyframes domain-loading{from{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-moz-keyframes domain-loading{from{-moz-transform:rotate(0deg);transform:rotate(0deg)}to{-moz-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes domain-loading{from{-o-transform:rotate(0deg);transform:rotate(0deg)}to{-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes domain-loading{from{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}"})]})}return(null==a?void 0:a.repl.__typename)==="Repl"&&(null===(m=a.repl.checkDomain2)||void 0===m?void 0:m.__typename)==="NotFoundError"?(0,s.tZ)(s.HY,{children:"We ran into an internal error while checking the domain. Please try again later."}):null}function en(e){var t,n=e.replId,r=e.domain,i=e.onUnlink,o=e.onGoBack,a=(0,c._)((t=(0,l._)({},B,{variables:{input:{id:n,removeDomain:r}}}),k.D(L,t)),2),d=a[0],f=a[1];return(0,u.useEffect)(function(){f.data&&f.data.updateRepl.repl&&i()},[f.data,i]),(0,s.BX)(h.G,{css:[p.l0.colWithGap(16)],children:[(0,s.BX)(h.G,{css:[p.l0.colWithGap(8)],children:[(0,s.tZ)(O.h4,{level:3,variant:"subheadDefault",children:"Domain Unlinking"}),(0,s.BX)(O.xv,{children:["Are you sure you want to unlink"," ",(0,s.tZ)("a",{target:"_blank",rel:"noopener",href:"https://"+r,children:r}),"?"]})]}),(0,s.BX)(h.G,{css:[p.l0.rowWithGap(12),p.l0.justify.end],children:[(0,s.tZ)(y.zx,{onClick:o,text:"Cancel"}),(0,s.tZ)(y.zx,{onClick:function(){f.loading||d()},text:f.loading?"Unlinking domain...":"Yes, unlink this domain",colorway:"negative",iconLeft:(0,s.tZ)(Y.Z,{}),disabled:f.loading})]})]})}function er(e){var t=e.replId,n=e.hostedUrl,r=e.apexProxy,i=e.onUnlink,o=e.onLink,a=e.domains,l=e.refetch,d=(0,c._)((0,u.useState)("listing"),2),f=d[0],m=d[1],v=(0,c._)((0,u.useState)(null),2),g=v[0],b=v[1],Z=null;return"listing"===f?Z=(0,s.BX)(h.G,{css:[p.l0.colWithGap(16)],children:[(0,s.BX)(h.G,{children:[(0,s.tZ)(O.h4,{level:3,variant:"subheadDefault",children:"Currently Linked Domains"}),(0,s.tZ)(h.G,{css:[p.l0.colWithGap(16)],children:a.map(function(e){return e?(0,s.tZ)(h.G,{children:(0,s.BX)(h.G,{css:[p.l0.colWithGap(4),p.l0.justify.spaceBetween,p.l0.align.center],children:[(0,s.BX)(h.G,{css:[p.l0.rowWithGap(8),p.l0.align.center,p.l0.justify.spaceBetween,p.l0.width("100%")],children:[(0,s.tZ)(h.G,{css:[p.l0.flex.shrink(1)],children:(0,s.tZ)(X.u,{tooltip:e.domain,children:(0,s.tZ)(O.xv,{multiline:!1,children:e.domain})})}),(0,s.tZ)(h.G,{children:(0,s.tZ)(X.u,{tooltip:(0,s.tZ)(O.xv,{css:{textTransform:"capitalize"},multiline:!1,children:e.state}),children:(0,s.tZ)(Q,{status:e.state})})})]}),(0,s.BX)(h.G,{css:[p.l0.rowWithGap(12),p.l0.justify.end,p.l0.align.center,p.l0.width("100%"),"verified"!==e.state&&p.l0.pl(12)],children:[(0,s.tZ)(y.zx,{text:"Unlink",css:p.l0.width("verified"!==e.state?"50%":"100%"),onClick:function(){b(e.domain),m("unlinking")}}),"verified"!==e.state?(0,s.tZ)(y.zx,{text:"Check status",css:p.l0.width("50%"),onClick:function(){b(e.domain),m("linking")}}):null]})]})},e.domain):null})})]}),(0,s.tZ)(y.zx,{text:"Create domain link",onClick:function(){return m("linking")},iconLeft:(0,s.tZ)(z.Z,{})})]}):"linking"===f?Z=(0,s.tZ)(ee,{replId:t,desiredARecord:r,hostedUrl:n,existingDomain:g,onLink:o,onGoBack:function(){m("listing"),b(null)},onLinkStarted:l,onStateChanged:l}):"unlinking"===f&&null!==g&&(Z=(0,s.tZ)(en,{replId:t,domain:g,onUnlink:function(){l(),m("listing"),i()},onGoBack:function(){m("listing"),b(null)}})),(0,s.BX)(h.G,{css:[p.l0.colWithGap(16)],children:[(0,s.tZ)(O.h4,{level:1,variant:"subheadDefault",children:"Domain Linking"}),(0,s.BX)(O.xv,{css:{fontStyle:"italic"},children:["Domain linking to the development preview is deprecated, please consider switching to"," ",(0,s.tZ)("a",{href:"https://docs.replit.com/hosting/deployments/about-deployments",target:"_blank",children:"deployments"})," ","as a more scalable solution."]}),Z]})}(r=i||(i={})).Verified="verified",r.Verifying="verifying",r.Failed="failed";var ei=n(93918),eo=n(52924),ea=n(49344),el=n(15146),ec=n(12874),es=n(74652),eu=n(40102),ed=n(50199),ef=n(52234),eh=n(20573),ep=n(7444),em=n(36010),ev=n.n(em),eg=n(5344),ey=n(58003),eb=n(25425),eZ=n(73157),ew=n(85195),ex=n(66985),eC=n(22487),e_="flag-ocean-easy",eS=(0,v.iv)([p.l0.borderRadius(6),p.l0.color.foregroundDimmer,p.l0.height(24),p.l0.m(4)]),eE=[p.l0.reset.button,M.u3,p.l0.rowWithGap(0),p.l0.flex.grow(0),p.l0.color.accentPositiveStronger,p.l0.fontSize("small"),p.l0.focusRing,{"&:hover":[p.l0.cursor.pointer,p.l0.color.accentPositiveStrongest]},{borderTopRightRadius:0,borderBottomRightRadius:0,borderRight:0},p.l0.align.center,p.l0.py(0),p.l0.px(4)],ek=(0,ei.X)({root:[p.l0.flex.row,p.l0.align.center,p.l0.justify.spaceBetween,p.l0.border({color:p.TV.outlineDimmest,direction:"bottom"}),p.l0.p(2),p.l0.container("root"),p.l0.zIndex(1)],navControls:[p.l0.align.center,p.l0.rowWithGap(4),p.l0.flex.grow(1)],urlWrapper:[p.l0.position.relative,p.l0.flex.row,p.l0.flex.grow(1)],urlOptionsRoot:[p.l0.rowWithGap(0),p.l0.flex.growAndShrink(1)],urlOptions:[p.l0.position.absolute,p.l0.width("100%"),p.l0.backgroundColor.backgroundHigher,p.l0.p(8),p.l0.colWithGap(6),p.l0.border(),p.l0.borderRadius(0,0,12,12),{top:"100%",borderTop:0}],urlOptionsSection:[p.l0.colWithGap(4),p.l0.pb(8),p.l0.border({direction:"bottom"}),{":last-child":{borderBottom:0}}],urlOptionsTitle:[p.l0.rowWithGap(0),p.l0.justify.spaceBetween,p.l0.flex.grow(1)],portRadioGroup:[p.l0.colWithGap(8)],portOption:[p.l0.rowWithGap(8),p.l0.color.foregroundDimmer],portOptionSelected:[p.l0.rowWithGap(8),p.l0.color.foregroundDefault],portOptionLabel:[{"&:hover":[p.l0.cursor.pointer,p.l0.color.foregroundDefault]}],temporaryDevLinkWrapper:[p.l0.rowWithGap(4)],temporaryDevLinkText:{flex:"0 1 auto"},temporaryDevLink:[p.l0.display.block,p.l0.color.accentPositiveStronger,p.l0.fontSize("small"),p.l0.focusRing,{wordBreak:"break-all","&:hover":[p.l0.cursor.pointer,p.l0.color.accentPositiveStrongest]}],url:eE,urlSelected:[eE,p.l0.backgroundColor.backgroundHighest,{borderBottomLeftRadius:0}],urlPath:[p.l0.py(0),p.l0.fontSize(12),p.l0.flex.grow(1)],urlPath2:[p.l0.py(0),p.l0.fontSize(12),p.l0.flex.grow(1),{borderTopLeftRadius:0,borderBottomLeftRadius:0}],urlDots:[p.l0.backgroundColor.greenDimmer,p.l0.borderRadius(4),p.l0.p(2),{lineHeight:1,"&:hover":[p.l0.cursor.pointer,p.l0.backgroundColor.greenDefault]}],goButton:[p.l0.position.absolute,p.l0.right(4),p.l0.top("50%"),{transform:"translateY(-50%)"}],text:[p.l0.ml(8),p.l0.mr(4),p.l0.color.foregroundDimmest],buttons:[p.l0.flex.row,p.l0.align.center,(0,a._)({},p.nC.max("mobileMax","root"),{span:{fontSize:0},svg:{marginRight:0}})],navButton:[p.l0.p(6),p.l0.borderRadius(4),p.l0.flex.shrink(0),{border:"none"}],fakeUrl:[p.l0.fontSize(12),p.l0.border(),{boxSizing:"content-box"},p.l0.borderRadius(6),p.l0.px(8),p.l0.py(2),p.l0.flex.grow(1),p.l0.rowWithGap(4),p.l0.align.center],devtoolsErrorsBadge:[p.l0.position.absolute,p.l0.center,p.l0.textAlign.center,p.l0.backgroundColor.accentNegativeStronger,p.l0.color.accentNegativeDimmest,p.l0.right(0),p.l0.top(-2),p.l0.p(2),p.l0.minWidth(14),p.l0.height(14),p.l0.borderRadius(16),p.l0.fontSize(10)]}),eT=function e(t,n,r,i){"use strict";var a=this;(0,o._)(this,e),this.history=[],this.historyIndex=-1,this.init=function(e,t){a.history.push({relativeUrl:e,port:t}),a.historyIndex=a.history.length-1,a.notifyChanges()},this.notifyChanges=function(){a.onChange(a.canGoBack(),a.canGoForward(),a.getCurrentRelativeUrl(),a.getCurrentPort())},this.canGoBack=function(){return a.historyIndex>0},this.canGoForward=function(){return a.historyIndex<a.history.length-1},this.getCurrentRelativeUrl=function(){return a.history[a.historyIndex].relativeUrl},this.getCurrentPort=function(){return a.history[a.historyIndex].port},this.push=function(e,t){(e!==a.getCurrentRelativeUrl()||t!==a.getCurrentPort())&&(a.history=a.history.slice(0,a.historyIndex+1),a.history.push({relativeUrl:e,port:t}),a.historyIndex=a.history.length-1),a.notifyChanges()},this.relativeUrlUpdate=function(e){if(a.pendingNavigations>0){a.pendingNavigations-=1;return}a.push(e,a.getCurrentPort())},this.back=function(){(0,ef.xn)(),a.canGoBack()&&(a.historyIndex-=1,a.navigate(a.getCurrentRelativeUrl(),a.getCurrentPort()))},this.forward=function(){(0,ef.Yl)(),a.canGoForward()&&(a.historyIndex+=1,a.navigate(a.getCurrentRelativeUrl(),a.getCurrentPort()))},this.navigate=function(e,t){var n=null!=t?t:a.getCurrentPort();a.requestIframeNavigateTo(e,n),a.push(e,n),a.pendingNavigations+=1},this.refresh=function(){var e,t;(0,ef.rJ)(),a.requestIframeNavigateTo(null!==(e=a.getCurrentRelativeUrl())&&void 0!==e?e:"/",null!==(t=a.getCurrentPort())&&void 0!==t?t:80)},this.setPort=function(e){var t=a.getCurrentRelativeUrl();a.navigate(t,e)},this.onChange=r,this.pendingNavigations=0,this.requestIframeNavigateTo=i,this.init(t,n)};function eR(e){var t=e.children;return(0,eb.P5)({controlName:"flag-dot-dev-url",logFlagToAnalytics:!1})?(0,s.tZ)(X.u,{tooltip:"Dev URLs are only active when someone is in the workspace. The dev URL is also subject to change. For production hosting, use Deployments.",children:t}):(0,s.tZ)(s.HY,{children:t})}function eD(e){var t,n,r,i,o,a,d,v,w,x,C,_,S,k,T,R,D,I,G,A,N,U,L=e.canEditDomain,M=e.onToggleDevtools,X=e.navigationState,F=e.replId,W=e.url,H=e.requestIframeNavigateTo,V=e.initialPort,z=e.initialPath,j=e.forwardedPorts,q=e.onOpenPortSettings,Y=e.devtoolsErrorCount,$=e.setRefreshCb,J=(0,g.Z)(),K=(n=(t={initialPort:V,initialPath:z,navigationState:X,requestIframeNavigateTo:H}).initialPort,r=t.initialPath,i=t.navigationState,o=t.requestIframeNavigateTo,d=(a=(0,c._)(u.useState(!1),2))[0],v=a[1],x=(w=(0,c._)(u.useState(!1),2))[0],C=w[1],S=(_=(0,c._)(u.useState("Loading..."),2))[0],k=_[1],R=(T=(0,c._)(u.useState(80),2))[0],D=T[1],I=u.useCallback(function(e,t,n,r){v(e),C(t),k(n),D(r)},[]),G=(0,ep.Z)(o),A=(0,ep.Z)(n),N=(0,ep.Z)(r),U=(0,ed.Z)(function(){return new eT(N.current,A.current,I,G.current)},[N,A,I,G]),u.useEffect(function(){"active"===i.state&&U.relativeUrlUpdate(i.relativeUrl)},[i.state,i.relativeUrl,U]),{canNavigateBack:d,canNavigateForward:x,navigateBack:U.back,navigateForward:U.forward,canNavigateToInputRelativeUrl:S!==i.relativeUrl,navigateToInputRelativeUrl:function(){(0,ef.Fq)(S),U.navigate(S)},inputRelativeUrl:S,setInputRelativeUrl:k,refresh:U.refresh,setPort:U.setPort,selectedPort:R}),Q=K.canNavigateForward,ee=K.navigateForward,et=K.canNavigateBack,en=K.navigateBack,ei=K.canNavigateToInputRelativeUrl,el=K.navigateToInputRelativeUrl,ec=K.inputRelativeUrl,es=K.setInputRelativeUrl,eu=K.refresh,eh=K.setPort,em=K.selectedPort;u.useEffect(function(){$(function(){return eu})},[eu,$]);var ev=function(e){var t,n,r,i=(t=(0,l._)({},B,{variables:{replId:e}}),E.a(P,t)),o=i.data,a=i.refetch,s=(0,c._)((0,u.useState)(!1),2),d=s[0],f=s[1],h=(0,u.useRef)(!1);if(!o||"Repl"!==o.repl.__typename)return{showEditReplcoDomainButton:!1};var p=null!==(r=null===(n=o.repl.domains)||void 0===n?void 0:n.filter(Boolean).filter(function(e){return!(null==e?void 0:e.hosting_deployment_id)}).map(function(e){return{domain:e.domain,state:e.state}}))&&void 0!==r?r:[];return p.length||h.current?(h.current=!0,{showEditReplcoDomainButton:!0,setIsEditingDomain:f,isEditingDomain:d,editDomainProps:{domains:p,refetch:a,replId:e,apexProxy:o.repl.apexProxy,hostedUrl:o.repl.hostedUrl,onUnlink:function(){a(),f(!1)},onLink:function(){a(),f(!1)}}}):{showEditReplcoDomainButton:!1}}(F),eg=(0,s.tZ)(eP,{});return"external-page"===X.state?eg=(0,s.tZ)(eA,{backToLocal:function(){return eu()}}):"active"===X.state&&(eg=(0,s.tZ)(eB,{canNavigateForward:Q,navigateForward:ee,canNavigateBack:et,navigateBack:en,canNavigateToInputRelativeUrl:ei,navigateToInputRelativeUrl:el,inputRelativeUrl:ec,setInputRelativeUrl:es,refresh:eu,forwardedPorts:j,setPort:eh,selectedPort:em,url:W,onOpenPortSettings:q})),(0,s.BX)(Z.Tg,{css:ek.root,children:[eg,(0,s.tZ)(h.G,{css:p.l0.flex.row,children:(0,s.BX)(h.G,{css:ek.buttons,children:[L&&ev.showEditReplcoDomainButton?(0,s.BX)(s.HY,{children:[(0,s.tZ)(y.zx,{variant:"outlined",size:"small",text:"Edit custom domain",onClick:function(){return ev.setIsEditingDomain(!ev.isEditingDomain)},iconLeft:(0,s.tZ)(eo.Z,{size:16})}),(0,s.tZ)(ea.u,{isOpen:ev.isEditingDomain,onRequestClose:function(){return ev.setIsEditingDomain(!1)},children:(0,s.tZ)(er,(0,l._)({},ev.editDomainProps))})]}):null,"active"===X.state?(0,s.BX)(h.G,{css:p.l0.position.relative,children:[(0,s.tZ)(y.zx,{size:"small",variant:"outlined",onClick:M,css:eS,text:"Devtools",iconLeft:(0,s.tZ)(m.Z,{})}),Y>0?(0,s.tZ)(h.G,{css:ek.devtoolsErrorsBadge,children:(0,s.tZ)(O.xv,{variant:"small",multiline:!1,children:Y>99?"99+":Y.toString()})}):null]}):null,(0,s.tZ)(eR,{children:(0,s.tZ)(b.Z,{size:"small",variant:"outlined",css:eS,href:W,target:"_blank",iconLeft:(0,s.tZ)(f.Z,{}),text:J?"Open in the browser":"New tab",onClick:function(){(0,ef.Ji)()}})})]})})]})}function eI(e){var t=e.url,n=(0,c._)(u.useState(!1),2),r=n[0],i=n[1],o=u.useRef(null),a=function(){i(!0),o.current=setTimeout(function(){i(!1)},1500)};return u.useEffect(function(){return function(){o.current&&clearTimeout(o.current)}},[]),(0,s.tZ)(X.u,{isOpen:r,placement:"bottom",tooltip:r?"Copied!":"Copy link",delay:"none",children:(0,s.tZ)(el.hU,{alt:"Copy link",size:18,tooltipHidden:!1,onClick:function(){(0,F.Z)(t),a()},children:(0,s.tZ)(eg.Z,{})})})}function eG(e){var t=e.canNavigateToInputRelativeUrl,n=e.navigateToInputRelativeUrl,r=e.inputRelativeUrl,i=e.setInputRelativeUrl,o=e.forwardedPorts,a=e.setPort,l=e.selectedPort,d=e.url,f=e.onOpenPortSettings,p=(0,c._)(u.useState(!1),2),m=p[0],v=p[1],g=(0,j.U)(),y=g("radioGroup"),b=(0,eC.Z)(function(){v(!1)},[]);return(0,s.BX)(h.G,{css:ek.urlOptionsRoot,innerRef:b,children:[m?(0,s.BX)(Z.Tg,{css:ek.urlOptions,elevated:!0,children:[(0,s.BX)(h.G,{css:ek.urlOptionsSection,children:[(0,s.BX)(h.G,{css:ek.urlOptionsTitle,children:[(0,s.BX)(O.xv,{children:["Listening on ",(0,eZ.Z)("port",o.length),":"]}),(0,s.tZ)(el.hU,{alt:"Networking tool",onClick:f,children:(0,s.tZ)(ey.Z,{})})]}),(0,s.tZ)(ew.E,{tag:"fieldset",css:ek.portRadioGroup,name:y,value:l.toString(),onChange:function(e){a(parseInt(e.target.value,10)),v(!1)},children:o.map(function(e,t){return(0,s.BX)(h.G,{css:l===e.configuration.externalPort?ek.portOptionSelected:ek.portOption,children:[(0,s.tZ)(ew.Y,{id:g(e.configuration.externalPort),value:e.configuration.externalPort.toString()}),(0,s.tZ)("label",{htmlFor:g(e.configuration.externalPort),css:ek.portOptionLabel,children:":".concat(e.configuration.localPort," → :").concat(e.configuration.externalPort)})]},"".concat(t,"-").concat(e.configuration.externalPort,":").concat(e.configuration.localPort))})})]}),(0,s.BX)(h.G,{css:ek.urlOptionsSection,children:[(0,s.tZ)(O.xv,{children:"Dev URL:"}),(0,s.BX)(h.G,{css:ek.temporaryDevLinkWrapper,children:[(0,s.tZ)(O.xv,{css:ek.temporaryDevLinkText,maxLines:1,children:(0,s.tZ)(ev(),{legacyBehavior:!0,href:d,passHref:!0,children:(0,s.tZ)("a",{css:ek.temporaryDevLink,target:"_blank",children:d})})}),(0,s.tZ)(eI,{url:d})]}),(0,s.tZ)(O.xv,{color:"dimmer",variant:"small",children:"Dev URLs are temporary and will sleep after you leave the workspace."})]})]}):null,(0,s.BX)("button",{css:m?ek.urlSelected:ek.url,onClick:function(){return v(!m)},children:[(0,s.tZ)(eR,{children:(0,s.tZ)(h.G,{css:ek.urlDots,children:"{...}"})}),".".concat(d.includes("replit.dev")?"replit.dev":"repl.co").concat((0,ex.O2)(l)?"":":"+l)]}),(0,s.tZ)(M.II,{css:ek.urlPath2,style:m?{borderBottomRightRadius:0}:{},value:r,onKeyDown:function(e){"Enter"===e.key&&t&&n()},onChange:function(e){if(""===e.currentTarget.value){i("/");return}i(e.target.value)}})]})}function eB(e){var t=e.canNavigateForward,n=e.navigateForward,r=e.canNavigateBack,i=e.navigateBack,o=e.canNavigateToInputRelativeUrl,a=e.navigateToInputRelativeUrl,l=e.inputRelativeUrl,c=e.setInputRelativeUrl,u=e.refresh,f=e.forwardedPorts,p=e.setPort,m=e.selectedPort,v=e.url,g=e.onOpenPortSettings,y=(0,eb.P5)({controlName:e_,logFlagToAnalytics:!0}),b=(0,es.gf)("webviewpane.reload");return(0,s.BX)(h.G,{css:ek.navControls,children:[(0,s.tZ)(el.hU,{alt:"Back",tooltipDelay:"long",onClick:i,disabled:!r,css:ek.navButton,children:(0,s.tZ)(eu.Z,{})}),(0,s.tZ)(el.hU,{alt:"Forward",tooltipDelay:"long",onClick:n,disabled:!t,css:ek.navButton,children:(0,s.tZ)(ec.Z,{})}),(0,s.tZ)(el.hU,{alt:"Refresh".concat(b?" (".concat((0,es.Ih)(b),")"):""),tooltipDelay:"long",onClick:u,css:ek.navButton,children:(0,s.tZ)(d.Z,{})}),(0,s.BX)(h.G,{css:ek.urlWrapper,children:[y?(0,s.tZ)(eG,{canNavigateToInputRelativeUrl:o,navigateToInputRelativeUrl:a,inputRelativeUrl:l,setInputRelativeUrl:c,forwardedPorts:f,setPort:p,selectedPort:m,url:v,onOpenPortSettings:g}):(0,s.tZ)(M.II,{css:ek.urlPath,value:l,onKeyDown:function(e){"Enter"===e.key&&o&&a()},onChange:function(e){if(""===e.currentTarget.value){c("/");return}c(e.target.value)}}),(0,s.tZ)(Z.Tg,{elevated:!0,css:ek.goButton,children:(0,s.tZ)(el.hU,{alt:"Go to URL",disabled:!o,onClick:a,size:18,tooltipContents:(0,s.tZ)(es.bM,{keyCombo:"Enter"}),children:(0,s.tZ)(ec.Z,{})})})]})]})}function eA(e){var t=e.backToLocal,n=(0,c._)(u.useState(!1),2),r=n[0],i=n[1];return(0,s.BX)(h.G,{css:ek.navControls,children:[(0,s.tZ)(y.zx,{size:"small",variant:"outlined",onClick:function(){t(),i(!0)},loading:r,css:eS,text:"Back to my page",iconLeft:r?(0,s.tZ)($.Z,{}):(0,s.tZ)(eu.Z,{})}),(0,s.BX)(Z.Tg,{elevated:!0,css:ek.fakeUrl,children:[(0,s.tZ)(X.u,{tooltip:"The URL bar is not supported when navigating to external pages. You can open in a new tab to use your browser instead.",delay:"none",placement:"auto",children:(0,s.tZ)(eh.Z,{})}),(0,s.tZ)(O.xv,{variant:"small",color:"dimmer",children:"External page"})]})]})}function eP(){return(0,s.tZ)(h.G,{css:ek.navControls,children:(0,s.BX)(Z.Tg,{elevated:!0,css:ek.fakeUrl,children:[(0,s.tZ)(X.u,{tooltip:"Page is loading, please wait.",delay:"none",placement:"auto",children:(0,s.tZ)($.Z,{})}),(0,s.tZ)(O.xv,{variant:"small",color:"dimmer",children:"Loading your page"})]})})}},83436:function(e,t,n){n.d(t,{I5:function(){return p},sY:function(){return f}});var r=n(45903),i=n(93295),o=n(23982),a=n(77393);function l(){var e=(0,i._)(["\n  fragment ReplEnvironmentWebviewDeployBanner on Repl {\n    hostingDeployment {\n      ... on HostingDeployment {\n        id\n        currentBuild {\n          id\n        }\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n    hostingDeploymentPermissions {\n      canDeploy\n    }\n    config {\n      isVnc\n    }\n  }\n"]);return l=function(){return e},e}function c(){var e=(0,i._)(["\n  fragment ReplEnvironmentWebviewRepl on Repl {\n    id\n    prodUrl: hostedUrl(dotty: true)\n    devUrl: hostedUrl(dev: true)\n    currentUserPermissions {\n      linkDomain\n    }\n    lang {\n      id\n    }\n  }\n"]);return c=function(){return e},e}function s(){var e=(0,i._)(["\n  query ReplEnvironmentWebview($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        ...ReplEnvironmentWebviewRepl\n        ...ReplEnvironmentWebviewDeployBanner\n      }\n    }\n  }\n  ","\n  ","\n"]);return s=function(){return e},e}var u={},d=(0,o.Ps)(l()),f=(0,o.Ps)(c()),h=(0,o.Ps)(s(),f,d);function p(e){var t=(0,r._)({},u,e);return a.a(h,t)}},51533:function(e,t,n){n.d(t,{Z:function(){return $},J:function(){return Y}});var r=n(45903),i=n(25e3),o=n(32477),a=n(8182),l=n(43429),c=n(48900),s=n(83436),u=n(50782),d=n(94450),f=n.n(d),h=n(63461),p=n(9617),m=n(35972),v=n(59868);function g(){return l.useEffect(function(){(0,v.j)(v.U3.WS_REPLCO_UNREACHABLE)},[]),(0,a.BX)("div",{className:"jsx-88c49dc4f1cb807b unreachable",children:[(0,a.BX)(m.gC,{align:"center",spacing:4,children:[(0,a.BX)(m.gC,{align:"center",children:[(0,a.tZ)(p.Z,{level:1,children:"\uD83D\uDE48"}),(0,a.tZ)(p.Z,{level:4,children:"This Repl link isn’t broken!"}),(0,a.tZ)(p.Z,{level:4,foreground:2,children:"It’s just blocked."})]}),(0,a.BX)(m.gC,{spacing:2,className:"why",children:[(0,a.tZ)(h.Z,{foreground:2,children:"Why this might be happening:"}),(0,a.tZ)(h.Z,{foreground:2,children:(0,a.BX)("ul",{className:"jsx-88c49dc4f1cb807b",children:[(0,a.BX)("li",{className:"jsx-88c49dc4f1cb807b",children:["Repl URLs could be"," ",(0,a.tZ)(h.Z,{fontWeight:"medium",foreground:1,children:"blocked by a firewall,"})," ","so contact your IT administrator"]}),(0,a.BX)("li",{className:"jsx-88c49dc4f1cb807b",children:["Repl URLs could be"," ",(0,a.tZ)(h.Z,{fontWeight:"medium",foreground:1,children:"blocked by your ISP,"})," ","so try getting in touch with them"]})]})})]}),(0,a.BX)(h.Z,{foreground:2,align:"center",children:["If you have any other questions, please check out"," ",(0,a.tZ)("a",{href:"https://docs.replit.com/teams-edu/it-administrators-toolkit",target:"_blank",rel:"noopener noreferrer",className:"jsx-88c49dc4f1cb807b",children:"our IT docs"})," ","or"," ",(0,a.tZ)("a",{href:"https://replit.com/support",target:"_blank",rel:"noopener noreferrer",className:"jsx-88c49dc4f1cb807b",children:"contact support"}),"."]})]}),(0,a.tZ)(f(),{id:"88c49dc4f1cb807b",children:".unreachable.jsx-88c49dc4f1cb807b{padding:var(--space-32)}.unreachable.jsx-88c49dc4f1cb807b ul.jsx-88c49dc4f1cb807b{list-style-position:inside}.unreachable.jsx-88c49dc4f1cb807b li.jsx-88c49dc4f1cb807b{padding-bottom:var(--space-16)}"})]})}var y=l.createContext(!1),b=n(56596),Z=n(29287),w=n(81810),x=n(30686),C=n(62582),_=n(74833);function S(){return(0,a.BX)(b.G,{css:[Z.l0.align.center,Z.l0.p(64)],children:[(0,a.BX)(b.G,{css:[Z.l0.align.center],children:[(0,a.tZ)(p.Z,{level:1,children:"\uD83D\uDE48"}),(0,a.tZ)(_.xv,{css:[Z.l0.textAlign.center,Z.l0.pb(8)],variant:"headerDefault",children:"We've detected a crash loop"}),(0,a.tZ)(_.xv,{css:[Z.l0.textAlign.center],variant:"subheadDefault",color:"dimmer",children:"Preview is disabled until you click the run button again."})]}),(0,a.tZ)(b.G,{css:[Z.l0.p(16)],children:(0,a.tZ)(_.xv,{css:[Z.l0.color.foregroundDimmer,Z.l0.textAlign.center,Z.l0.pb(16)],children:"There may be errors in the code that are causing your application to repeatedly crash."})})]})}var E=n(40664),k=n(42549),T=n(49932),R=n(1498),D=n(7877),I=n(60427);function G(e){var t=e.onCompleted,n=e.startTimeInSeconds,r=(0,o._)(l.useState(n),2),i=r[0],c=r[1];return l.useEffect(function(){var e=setInterval(function(){return c(function(t){return 0===t?(clearInterval(e),0):t-1})},1e3);return function(){return clearInterval(e)}},[]),l.useEffect(function(){i>0||t()},[i]),(0,a.tZ)(b.G,{css:{width:24,height:24},children:(0,a.BX)(b.G,{css:[Z.l0.flex.row,Z.l0.align.center,Z.l0.justify.center,{width:"100%",height:"100%",strokeDasharray:62.400000000000006,strokeDashoffset:62.400000000000006,strokeLinecap:"butt",strokeWidth:2,stroke:T.TV.accentPrimaryDefault,fill:"none"}],children:[(0,a.tZ)("svg",{width:"100%",height:"100%",className:f().dynamic([["1e155c6e775ef991",[62.400000000000006]]]),children:(0,a.tZ)("circle",{r:10,cx:12,cy:12,style:{animationName:"countdown-animation",animationDuration:"".concat(n,"s"),animationDelay:"0s",animationTimingFunction:"linear"},className:f().dynamic([["1e155c6e775ef991",[62.400000000000006]]])})}),(0,a.tZ)(f(),{id:"1e155c6e775ef991",dynamic:[62.400000000000006],children:"@-webkit-keyframes countdown-animation{from{stroke-dashoffset:0px}to{stroke-dashoffset:".concat(62.400000000000006,"px}}@-moz-keyframes countdown-animation{from{stroke-dashoffset:0px}to{stroke-dashoffset:").concat(62.400000000000006,"px}}@-o-keyframes countdown-animation{from{stroke-dashoffset:0px}to{stroke-dashoffset:").concat(62.400000000000006,"px}}@keyframes countdown-animation{from{stroke-dashoffset:0px}to{stroke-dashoffset:").concat(62.400000000000006,"px}}")}),(0,a.tZ)(_.xv,{css:[Z.l0.position.absolute],variant:"small",multiline:!1,children:i})]})})}function B(e){var t=e.onCompleted,n=[Z.l0.rowWithGap(4),Z.l0.align.center,Z.l0.justify.spaceBetween,Z.l0.p(6),Z.l0.pl(8),Z.l0.flex.growAndShrink(1),{borderWidth:1,borderStyle:"solid",background:T.TV.accentPrimaryDimmest,borderColor:T.TV.accentPrimaryDimmer,color:T.TV.accentPrimaryStrongest}];return(0,a.BX)(b.G,{css:n,children:[(0,a.BX)(b.G,{css:[Z.l0.rowWithGap(4),Z.l0.align.center],children:[(0,a.tZ)(_.xv,{variant:"small",children:"When you're ready, you can deploy from the"}),(0,a.tZ)(R.zx,{iconLeft:(0,a.tZ)(D.Z,{}),text:"Deploy",disabled:!0,size:"small"}),(0,a.tZ)(_.xv,{variant:"small",children:"menu!"})]}),(0,a.tZ)(G,{startTimeInSeconds:3,onCompleted:t})]})}function A(e){var t,n=e.repl,r=e.onClick,i=(0,o._)(l.useState(!1),2),c=i[0],s=i[1],u=(0,I.gg)().isDeployableRepl,d=(0,E.Z)("workspace","workspace-deployments-webview-banner"),f=d.shouldDisplay,h=d.register,p=d.dismiss;l.useEffect(function(){h()},[h]);var m=n.hostingDeploymentPermissions.canDeploy&&u,g=(null===(t=n.hostingDeployment)||void 0===t?void 0:t.__typename)==="HostingDeployment"&&n.hostingDeployment.currentBuild;return m&&!g&&f?(0,a.tZ)(b.G,{children:c?(0,a.tZ)(B,{onCompleted:function(){p()}}):(0,a.tZ)(k.U,{onClick:function(){(0,v.j)(v.U3.DEPLOY_PROJECT_SELECTED,{source:"workspace_webview_deploy_banner"}),p(),r()},onDismiss:function(){s(!0)},rounded:!1})}):null}var P=n(86612),N=n(18107),U=n(76588),L=n(51384),O={container:(0,L.iv)(Z.l0.p(16),Z.l0.height("100%"),Z.l0.align.center),imageContainer:(0,L.iv)(Z.l0.height("100%"),Z.l0.colWithGap(16),Z.l0.align.center,Z.l0.justify.center,Z.l0.width(300)),image:(0,L.iv)(Z.l0.width(200))};function M(e){var t=e.hasForwardedPorts,n=e.showWebview;return(0,a.tZ)(b.G,{css:O.container,children:(0,a.BX)(b.G,{css:O.imageContainer,children:[(0,a.tZ)("div",{css:O.image,children:(0,a.tZ)(U.Z,{src:"/public/images/run_pointer.svg",alt:"A play button with a mouse pointer",height:250,width:400})}),t?(0,a.BX)(a.HY,{children:[(0,a.tZ)(_.h4,{level:3,variant:"subheadDefault",children:"Looks like you have a server running."}),(0,a.tZ)(R.zx,{text:"Show web content",colorway:"primary",onClick:n})]}):(0,a.tZ)(_.h4,{level:3,variant:"subheadDefault",children:"Start a server to see the hosted output."})]})})}var X=n(56337),F=n(37463),W=n(52234),H=n(66985),V=n(25425),z=n(23394),j=n(54916);function q(e){var t=new URL(e);return t.hostname.endsWith(".localhost")?e:(t.protocol="https:",t.toString())}function Y(e){var t,n,r=(0,V.P5)({controlName:"flag-dot-dev-url",logFlagToAnalytics:!1}),i=(0,X.Z)(),o=!(n=(0,F.bg)()).length||n.some(function(e){return 80===e.configuration.externalPort})?80:null!==(t=n[0].configuration.externalPort)&&void 0!==t?t:80,a=(0,j.Z)().container,l=(0,P.Z)(a),c=(0,s.I5)({variables:{id:e}}).data,u=(0,z.Z)();if(!o&&"html"!==u)return null;var d=(null==c?void 0:c.repl.__typename)==="Repl"?c.repl:null;if(!d)return null;if(r){if(!l)return null;var f=(0,H.hw)(l,o).toString(),h=(0,H.hw)(l+"/__replco/devtools_wrapper.html",o).toString();return{iframeSrc:i?q(f):h,presentationUrl:f}}return{iframeSrc:i?q((0,H.hw)(d.prodUrl,o).toString()):(0,H.hw)(d.devUrl,o).toString(),presentationUrl:(0,H.hw)(d.prodUrl,o).toString()}}function $(e){var t,n,d,f,h,p,m,_,E,k,T,R,D,I,G,B,P,U=e.initialPort,L=void 0===U?80:U,O=e.initialPath,V=void 0===O?"/":O,z=e.openPane,q=e.containerRef,$=e.openNetworkingTool,J=e.setRefreshCb,K=(0,l.useId)(),Q=(0,u.Z)(),ee=(0,s.I5)({variables:{id:Q}}).data,et=(null==ee?void 0:ee.repl.__typename)==="Repl"?ee.repl:null,en=(0,l.useContext)(y),er=(0,x.S)().isCircuitBroken,ei=(0,l.useRef)(null),eo=(0,o._)((0,l.useState)(!1),2),ea=eo[0],el=eo[1],ec=(t=(0,j.Z)().runner,d=(n=(0,o._)((0,l.useState)(t.getRunState()),2))[0],f=n[1],p=(h=(0,o._)((0,l.useState)(!1),2))[0],m=h[1],(0,l.useEffect)(function(){return t.onStateChanged(f)},[t]),{shouldHide:(d===N.Ah.OFFLINE||d===N.Ah.STOPPING||d===N.Ah.IDLE&&"html"!==t.mode)&&!p,forceShow:function(){return m(!0)}}),es=ec.shouldHide,eu=ec.forceShow,ed=(0,o._)((0,l.useState)(0),2),ef=ed[0],eh=ed[1],ep=Y(Q),em=(0,F.bg)(),ev=(null==et?void 0:et.lang.id)==="html"||(null==et?void 0:et.lang.id)==="html_beta",eg=(0,X.Z)(),ey=!1,eb=null;ep?en?eb=(0,a.tZ)(g,{}):er?eb=(0,a.tZ)(S,{}):es?eb=(0,a.tZ)(M,{hasForwardedPorts:em.length>0,showWebview:eu}):eg?(ey=!0,eb=(0,a.tZ)("webview",(0,r._)({"data-cy":"ws-webview",ref:ei,src:(0,H.Gz)({url:ep.iframeSrc,port:L,path:V,id:K}).toString(),onLoad:function(){return el(!0)},css:[Z.l0.flex.growAndShrink(1),{border:"none",backgroundColor:Z.TV.white}]},C.Z))):(ey=!0,eb=(0,a.tZ)("iframe",(0,r._)({title:"webview","data-cy":"ws-webview",ref:ei,src:(0,H.Gz)({url:ep.iframeSrc,port:L,path:V,id:K}).toString(),onLoad:function(){return el(!0)},css:[Z.l0.flex.growAndShrink(1),{border:"none",display:"block",backgroundColor:Z.TV.white}]},C.Z))):eb=null;var eZ=(E=(_={webviewId:K,isWebviewVisible:ey,iframeOrWebviewRef:ei,iframeSrc:null==ep?void 0:ep.iframeSrc}).webviewId,k=_.isWebviewVisible,T=_.iframeOrWebviewRef,R=_.iframeSrc,I=(D=(0,o._)((0,l.useState)({state:"loading",relativeUrl:null}),2))[0],G=D[1],B=(0,X.Z)(),(0,l.useEffect)(function(){if(B&&k&&R){if(!T.current)throw Error("Expected iframe to be defined when isWebviewRendered");var e=T.current,t=new URL(R);return e.addEventListener("did-navigate",n),e.addEventListener("did-navigate-in-page",n),function(){e.removeEventListener("did-navigate",n),e.removeEventListener("did-navigate-in-page",n)}}function n(e){var n=new URL(e.url),r=n.pathname+n.search+n.hash;if(n.hostname!==t.hostname){G(function(e){return"external-page"===e.state?e:{state:"external-page",relativeUrl:null}});return}G(function(e){return"active"===e.state&&e.relativeUrl===r?e:{state:"active",relativeUrl:r}})}},[k,B,R,T]),(0,l.useEffect)(function(){if(!B&&R){var e=new URL(R);return window.addEventListener("message",t),function(){window.removeEventListener("message",t)}}function t(t){if(t.origin&&"null"!==t.origin&&new URL(t.origin).hostname===e.hostname&&"object"==typeof t.data&&(null===(n=t.data)||void 0===n?void 0:n.type)){var n,r=T.current,i=t.data;if((null==i||!i.id||i.id===E)&&((null==i?void 0:i.id)===E&&t.source!==(null==r?void 0:r.contentWindow)&&c.Tb(Error("Expected event source to match iframe content window")),"page-navigation"===i.type)){if(i.payload.isExternal){G(function(e){return"external-page"===e.state?e:{state:"external-page",relativeUrl:null}});return}var o=i.payload.path;G(function(e){return"active"===e.state&&e.relativeUrl===o?e:{state:"active",relativeUrl:o}})}}}},[E,B,R,T]),I);return((0,l.useEffect)(function(){var e=function(e){if(e.origin&&"null"!==e.origin&&new URL(e.origin).hostname===t&&"object"==typeof e.data&&(null===(n=e.data)||void 0===n?void 0:n.type)){var n,o,a,l=e.data;if(null==l||!l.id||l.id===K)switch(l.type){case"event":var s=e.data,u=s.event,d=s.payload;"error"===u?c.Tb(d):(0,v.j)(u,(0,i._)((0,r._)({},d),{replId:Q,isHTML:ev}));return;case"show-badge":eh(e.data.count);return;case"ready":e.data.wasShown&&(null===(a=ei.current)||void 0===a||null===(o=a.contentWindow)||void 0===o||o.postMessage({type:"toggleDevtools",source:"automatic"},"*"));return}}};if(null==ep?void 0:ep.iframeSrc){var t=new URL(ep.iframeSrc).hostname;return window.addEventListener("message",e),function(){window.removeEventListener("message",e)}}},[K,Q,ev,null==ep?void 0:ep.iframeSrc]),et&&ep)?(P=ey?(0,a.tZ)(w.ZP,{navigationState:eZ,canEditDomain:et.currentUserPermissions.linkDomain,url:ep.presentationUrl,initialPort:L,initialPath:V,forwardedPorts:em,replId:Q,requestIframeNavigateTo:function(e,t){if(eh(0),ei.current){if(eg){var n,r=ei.current,i=new URL(e,ep.iframeSrc);t&&(i=(0,H.hw)(i.toString(),t)),r.loadURL(i.toString());return}if(null===(n=ei.current)||void 0===n?void 0:n.contentWindow){var o=(0,H.hw)(ep.iframeSrc,t);o.searchParams.set("initialPath",e),o.searchParams.set("id",K),ei.current.src=o.href}}},onToggleDevtools:function(){if((0,W.t1)(),eh(0),!eg){var e,t;null===(t=ei.current)||void 0===t||null===(e=t.contentWindow)||void 0===e||e.postMessage({type:"toggleDevtools",source:"manual"},"*");return}var n=ei.current;n&&(n.isDevToolsOpened()?n.closeDevTools():n.openDevTools())},onOpenPortSettings:$,devtoolsErrorCount:ef,setRefreshCb:J}):null,(0,a.BX)(b.G,{css:[Z.l0.backgroundColor.backgroundDefault,Z.l0.height("100%"),Z.l0.borderRadius(4),{overflow:"hidden"}],innerRef:q,children:[P,ea?(0,a.tZ)(A,{repl:et,onClick:function(){return z({type:"deployments"})}}):null,eb]})):null}},52234:function(e,t,n){n.d(t,{Fq:function(){return u},Ji:function(){return f},Yl:function(){return c},rJ:function(){return l},t1:function(){return d},xn:function(){return s}});var r=n(45903),i=n(70322),o=n(59868);function a(e){var t=e.actionType,n=(0,i._)(e,["actionType"]);(0,o.j)(o.U3.WS_WEBVIEW_USED,(0,r._)({type:t},n))}function l(){a({actionType:"refresh"})}function c(){a({actionType:"history_forward"})}function s(){a({actionType:"history_back"})}function u(e){a({actionType:"navigated_to",path:e})}function d(){a({actionType:"devtools_opened"})}function f(){a({actionType:"open_new_window"})}},86793:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(43429),i=n(18107);function o(e){var t=e.container,n=e.runner,o=e.refreshWebView;(0,r.useEffect)(function(){var e,r=[];return"outputs"===n.mode&&r.push(n.onBlockChanged(function(t){t.type===i.kH.EXECUTION&&1===t.data.exitCode&&(e=Date.now())})),r.push(t.onPortOpened(function(t){var n=t.isVnc;if(t.isForwarded&&!n){var r=Date.now();void 0!==e&&r-e<1e3||o()}})),function(){return r.forEach(function(e){return e()})}},[t,o,n])}},45495:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(43429),i=n(18107);function o(e){var t=e.runner,n=e.refreshWebView;(0,r.useEffect)(function(){if("html"===t.mode)return t.onStateChanged(function(e){e===i.Ah.RUNNING&&n()})},[t,n])}},30686:function(e,t,n){n.d(t,{S:function(){return f},e:function(){return d}});var r=n(32477),i=n(18107),o=n(54916),a=n(47507),l=n(43429),c=n(90234),s=n(71999),u=(0,c.cn)(!1),d=function(){return(0,s.KO)(u)};function f(){var e=(0,o.Z)().runner,t=(0,r._)(d(),2),n=t[0],c=t[1];return l.useEffect(function(){if("outputs"===e.mode){var t,n=[],r=Date.now(),o=Array(6),l=0;return n.push(e.onLocalRun(function(){r=Date.now(),c(!1)})),n.push(e.onStateChanged(function(e){if(!(t===i.Ah.RUNNING&&e===i.Ah.IDLE)){t=e;return}var n=l%6,s=Date.now();o[n]=s;var u=o[n>0?n-1:5];void 0!==u&&s-u<6e4&&null!=r&&r<u&&(c(!0),a.kg.info("webview circuit broken",{lastRunnerStops:JSON.stringify(o),runnerStopCount:l,lastLocalRunTimestamp:r})),l++,t=e})),function(){c(!1),n.forEach(function(e){return e()})}}},[e,c]),{isCircuitBroken:n}}},67774:function(e,t,n){n.d(t,{C:function(){return function e(t,n){if(!["context","action"].includes(t.data.type))throw Error("Command type not supported: "+t.data.type);if("action"===t.data.type)return{match:l.pl,data:{label:t.data.label,description:t.data.description,icon:t.data.iconPath?(0,a.tZ)(c.Z,{src:(0,u.Vh)(t.extension.baseUrl,t.data.iconPath),layout:"fill",alt:""}):(0,a.tZ)(a.HY,{children:" "}),type:"action",run:(0,r._)(function(){var e;return(0,o.Jh)(this,function(n){switch(n.label){case 0:if(!(e=t.run))throw Error("Action command must have run");return[4,e()];case 1:return[2,n.sent()]}})})}};var s,d=t.commands;if(!d)throw Error("Context command must have commands");return{match:l.pl,data:{label:t.data.label,description:t.data.description,icon:t.data.iconPath?(0,a.tZ)(c.Z,{src:(0,u.Vh)(t.extension.baseUrl,t.data.iconPath),layout:"fill",alt:""}):(0,a.tZ)(a.HY,{}),type:t.data.type},commands:(s=(0,r._)(function(r){var a;return(0,o.Jh)(this,function(o){switch(o.label){case 0:return[4,d({active:r.active,search:r.search,path:a=(0,i._)(n.path).concat([{data:t.data}])})];case 1:return[2,o.sent().map(function(t){return e(t,{path:a})})]}})}),function(e){return s.apply(this,arguments)})}}},V:function(){return p}});var r=n(34142),i=n(21289),o=n(87682),a=n(8182),l=n(80259),c=n(76588),s=n(19724),u=n(13090),d=n(74044),f=n(99149),h=d.Dy.Object({id:d.Dy.Optional(d.Dy.String()),icon:d.Dy.Optional(d.Dy.String()),type:d.Dy.Union([d.Dy.Literal("action"),d.Dy.Literal("context")]),label:d.Dy.String(),description:d.Dy.String(),contributions:d.Dy.Optional(d.Dy.Array(d.Dy.Enum(s.Y)))});function p(e,t){return m.apply(this,arguments)}function m(){return(m=(0,r._)(function(e,t){var n,i,a;return(0,o.Jh)(this,function(l){switch(l.label){case 0:return[4,e.data];case 1:if(n=l.sent(),!f.B4.Check(h,n))throw Error("Invalid command");if(i=null,"string"==typeof n.icon){if(""===n.icon)throw Error("Command icon cannot be empty. Omit it if you do not want an icon.");i=n.icon}if(a={data:{label:n.label,description:n.description,type:n.type,iconPath:i,id:n.id?n.id:void 0},extension:t.extension},n.contributions&&(a.data.contributions=n.contributions,t.logger.warn("Command ".concat(n.label," uses deprecated contributions field"))),"context"===n.type){var c;a.commands=(c=(0,r._)(function(n){var r,i,a,l,c,s,u,d,f;return(0,o.Jh)(this,function(o){switch(o.label){case 0:r=n.active,i=n.search,a=n.path,l=null,o.label=1;case 1:return o.trys.push([1,3,,4]),[4,e.commands({active:r,search:i,path:a})];case 2:return l=o.sent(),[3,4];case 3:return c=o.sent(),t.logger.error(c.message,{commandError:c,api:"command"}),[2,[]];case 4:return[4,l.length];case 5:s=o.sent(),u=[],d=0,o.label=6;case 6:if(!(d<s))return[3,9];return f=u.push,[4,p(l[d],t)];case 7:f.apply(u,[o.sent()]),o.label=8;case 8:return d++,[3,6];case 9:return[2,u]}})}),function(e){return c.apply(this,arguments)})}else a.run=(0,r._)(function(){var n;return(0,o.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,e.run()];case 1:return r.sent(),[2,void 0];case 2:return n=r.sent(),t.logger.error(n.message,{runError:n,api:"command"}),[2,{type:"error",message:n.message}];case 3:return[2]}})});return[2,a]}})})).apply(this,arguments)}},60442:function(e,t,n){n.d(t,{oo:function(){return E},cR:function(){return x},nP:function(){return C},gI:function(){return _},Sp:function(){return S}});var r=n(32477),i=n(43429),o=n(54916),a=n(50782),l=n(45903),c=n(93295),s=n(23982),u=n(77393),d=n(72986);function f(){var e=(0,c._)(["\n  query ReplConfigIsExtension($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        config {\n          isExtension\n        }\n      }\n    }\n  }\n"]);return f=function(){return e},e}function h(){var e=(0,c._)(["\n  mutation UpdateReplConfigIsExtension(\n    $replId: String!\n    $isExtension: Boolean!\n  ) {\n    updateRepl(input: { id: $replId, isExtension: $isExtension }) {\n      repl {\n        id\n        config {\n          isExtension\n        }\n      }\n    }\n  }\n"]);return h=function(){return e},e}function p(){var e=(0,c._)(["\n  query ReplExtensionHostedReplCoUrl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        title\n        hostedUrl\n        user {\n          username\n          id\n        }\n      }\n    }\n  }\n"]);return p=function(){return e},e}var m={},v=(0,s.Ps)(f()),g=(0,s.Ps)(h()),y=(0,s.Ps)(p()),b=n(22894),Z=n(46565),w=n(66349);function x(){var e,t=i.useContext(b.Z),n=(0,r._)(i.useState(null!==(e=null==t?void 0:t.replConfigIsExtension)&&void 0!==e&&e),2),a=n[0],l=n[1],c=(0,o.Z)().dotReplit;return i.useEffect(function(){return c.watch(function(e){var t,n,r;l(null!==(r=null===(n=e.config)||void 0===n?void 0:null===(t=n.extension)||void 0===t?void 0:t.isExtension)&&void 0!==r&&r)})},[c]),a}function C(){var e=(0,r._)(i.useState(null),2),t=e[0],n=e[1],a=(0,o.Z)().dotReplit;return i.useEffect(function(){return a.watch(function(e){var t,r,i=null===(r=e.config)||void 0===r?void 0:null===(t=r.extension)||void 0===t?void 0:t.extensionID;i?n((0,Z.T8)(i)):n(null)})},[a]),t}var _=function(){var e=(0,o.Z)().dotReplit,t=(0,r._)(i.useState(null),2),n=t[0],a=t[1];return i.useEffect(function(){return e.watch(function(e){var t,n,r=null===(n=e.config)||void 0===n?void 0:null===(t=n.extension)||void 0===t?void 0:t.staticDirectory;r?a({path:r,relativePath:r.replace(/^\.\//,"")}):a(null)})},[e]),n};function S(){var e,t,n,c,s=(0,a.Z)(),f=(e=(0,l._)({},m,{variables:{replId:s}}),u.a(v,e)),h=f.data,p=f.loading,y=f.error,b=(0,r._)((t=(0,l._)({},m,void 0),d.D(g,t)),1)[0],Z=!p&&!y&&!!(null==h?void 0:h.repl)&&"Repl"===h.repl.__typename&&null!==(c=null===(n=h.repl.config)||void 0===n?void 0:n.isExtension)&&void 0!==c&&c,w=(0,r._)(i.useState(!1),2),x=w[0],C=w[1],_=(0,o.Z)().dotReplit;i.useEffect(function(){return _.watch(function(e){var t,n,r;C(null!==(r=null===(n=e.config)||void 0===n?void 0:null===(t=n.extension)||void 0===t?void 0:t.isExtension)&&void 0!==r&&r)})},[_]),i.useEffect(function(){p||y||x===Z||b({variables:{replId:s,isExtension:x},optimisticResponse:{__typename:"RootMutationType",updateRepl:{__typename:"UpdateReplPayload",repl:{id:s,__typename:"Repl",config:{__typename:"ReplConfig",isExtension:x}}}}})},[p,y,s,Z,x,b])}var E=function(){var e,t,n,r,i,o=(0,w.Z)(),a=(e={variables:{replId:(null==o?void 0:o.id)||""},skip:!(null==o?void 0:o.id)},t=(0,l._)({},m,e),u.a(y,t)),c=a.data;if(a.error||!c||"Repl"!==c.repl.__typename)throw Error("Encountered an unknown error. Please contact support.");var s=null==c?void 0:null===(n=c.repl)||void 0===n?void 0:n.title,d=null==c?void 0:null===(i=c.repl)||void 0===i?void 0:null===(r=i.user)||void 0===r?void 0:r.username;if(!s||!d)throw Error("Encountered an unknown error. Please contact support.");return"https://".concat(s.replace(/[_\s]+/g,"-").replace(/[^a-zA-Z0-9-]/g,"").toLowerCase(),".").concat(d,".repl.co")}},9149:function(e,t,n){n.d(t,{LM:function(){return r.LM},Mu:function(){return i.Mu},WF:function(){return r.WF},WG:function(){return i.WG},jx:function(){return i.jx},ot:function(){return r.ot},r9:function(){return i.r9}});var r=n(1831),i=n(18440)},1831:function(e,t,n){n.d(t,{EO:function(){return R},I1:function(){return G},Kf:function(){return I},LM:function(){return T},WF:function(){return k},bN:function(){return S},dI:function(){return D},ot:function(){return E},zm:function(){return B}});var r=n(34142),i=n(45903),o=n(25e3),a=n(32477),l=n(87682),c=n(59868),s=n(70226),u=n(90234),d=n(88269),f=n.n(d),h=n(43429),p=n(13090),m=n(16385),v=n(30911),g=n.n(v),y=n(67887),b=n(18440),Z=n(19418),w=n(34471),x=n(46565),C=n(86612),_=n(54916);function S(){var e,t=(0,Z.E4)(b.We);return h.useCallback((e=(0,r._)(function(e){return(0,l.Jh)(this,function(n){return t({installationId:e}),[2]})}),function(t){return e.apply(this,arguments)}),[t])}function E(){var e,t=N(),n=t.throwSystemError,a=t.throwExtensionError,c=(0,Z.E4)(b.nk),s=(0,Z.ZC)(b.Ol),u=(0,Z.Ld)();return h.useCallback((e=(0,r._)(function(e){var t,r,d,h,v,g,Z,C,_,S,E,k,T,R,D,I,G,B,A,P;return(0,l.Jh)(this,function(l){switch(l.label){case 0:return t=e.installationId,d=void 0===(r=e.forceRefetch)||r,[4,(0,y.Al)()];case 1:if(!(h=l.sent())||h.error)return n({friendlyMessage:"Failed to load user context",error:h.error}),[2];if(v=h.result.userHasInternalApiEnabled,!(g=u.get(b.Lq).find(function(e){return e.installationId===t})))return[3,3];return[4,(0,y.V9)(g.baseUrl)];case 2:if(Z=l.sent(),C=s.createLogger({extensionId:g.extensionId,installationId:g.installationId,local:!0}),Z.error)return _=(0,o._)((0,i._)({},g),{manifest:(0,p.fF)(),enableExperimentalApi:!1,enableInternalApi:!1,logger:C.createLogger({extensionName:"Unnamed Extension"}),isLocal:!0}),s.info("Adding extension: ".concat(_.manifest.name),{extensionArgs:f()(_,["extensionId","installationId","baseUrl","manifest","enableExperimentalApi","enableInternalApi","isLocal"]),local:_.isLocal,error:!0}),c(_),S="Failed to load extension manifest",Z.error instanceof w.Jg&&(S=Z.error.message),a({extensionId:g.extensionId,installationId:g.installationId,extensionError:{error:Z.error,friendlyMessage:S}}),[2];return E=(0,m.MU)(Z.result,"experimental-api"),k=(0,o._)((0,i._)({},g),{manifest:Z.result,enableExperimentalApi:E,enableInternalApi:v,logger:C.createLogger({extensionName:Z.result.name}),isLocal:!0}),s.info("Adding extension: ".concat(k.manifest.name),{extensionArgs:f()(k,["extensionId","installationId","baseUrl","manifest","enableExperimentalApi","enableInternalApi","isLocal"]),local:!0}),c(k),[3,5];case 3:return[4,(0,y.mr)(t,d)];case 4:if((T=l.sent()).error)return n({friendlyMessage:"Something went wrong while downloading an extension",error:T.error}),[2];if(!(R=T.result))return n({friendlyMessage:"Extension failed to install",error:Error("Expected installation to be defined")}),[2];if(!(D=R.extension))return n({friendlyMessage:"Extension failed to install",error:Error("Expected extension to be defined")}),[2];if(!D.manifest)return a({extensionId:(0,x.T8)(D.id),installationId:(0,x.Ad)(R.id),extensionError:{friendlyMessage:"Extension failed to install",error:Error("Expected extension manifest to be defined")}}),[2];if("ExtensionManifestError"===D.manifest.__typename)return a({extensionId:(0,x.T8)(D.id),installationId:(0,x.Ad)(R.id),extensionError:{friendlyMessage:"An error occurred while loading the extension manifest: ".concat(D.manifest.message),error:Error(D.manifest.message)}}),[2];if(!D.manifest||"ExtensionManifest"!==D.manifest.__typename)return a({extensionId:(0,x.T8)(D.id),installationId:(0,x.Ad)(R.id),extensionError:{friendlyMessage:"An error occurred while loading the extension manifest",error:Error("Expected extension manifest to be defined")}}),[2];return I=(0,p.tr)(D.manifest),G=(0,m.MU)(I,"experimental-api"),B=(0,x.T8)(D.id),A=D.enableInternalApi,P={extensionId:B,installationId:t,manifest:I,baseUrl:(0,p.BY)(D.url),enableExperimentalApi:G,enableInternalApi:v||A,logger:s.createLogger({extensionId:B,installationId:t,extensionName:I.name,local:!1}),isLocal:!1},s.info("Adding extension: ".concat(P.manifest.name),{extensionArgs:f()(P,["extensionId","installationId","baseUrl","manifest","enableExperimentalApi","enableInternalApi","isLocal"]),local:!1}),c(P),[2,R];case 5:return[2]}})}),function(t){return e.apply(this,arguments)}),[c,a,n,u,s])}function k(){var e,t=E(),n=N().throwSystemError;return h.useCallback((e=(0,r._)(function(e){var r,i,o,a,s;return(0,l.Jh)(this,function(l){switch(l.label){case 0:return r=e.extensionId,i=e.replId,[4,(0,y.Wc)({extensionId:r,replId:i})];case 1:if((s=l.sent()).error)return n({error:s.error,friendlyMessage:"Something went wrong while installing an extension"}),[2];return(0,c.j)(c.U3.EXTENSION_INSTALLED,{name:null===(a=s.result)||void 0===a?void 0:null===(o=a.extension)||void 0===o?void 0:o.name,extensionId:r}),[4,t({installationId:(0,x.Ad)(s.result.id)})];case 2:return l.sent(),[2,s.result]}})}),function(t){return e.apply(this,arguments)}),[t,n])}function T(){var e,t=S(),n=(0,Z.Ld)(),i=N().throwSystemError;return h.useCallback((e=(0,r._)(function(e){var r,o,a;return(0,l.Jh)(this,function(l){switch(l.label){case 0:if(r=e.installationId,o=e.replId,!(a=n.get(b._t).find(function(e){return e.installationId===r})))return i({friendlyMessage:"Extension appears to be already uninstalled",error:Error("Expected extension to be defined")}),[2];if(!a.installationId||!a.extensionId)return i({friendlyMessage:"Failed to uninstall extension",error:Error("Expected installationId to be defined")}),[2];return(0,c.j)(c.U3.EXTENSION_UNINSTALLED,{name:a.manifest.name,extensionId:a.extensionId}),[4,(0,y.Y4)({installationId:a.installationId,replId:o})];case 1:return l.sent(),[4,t(a.installationId)];case 2:return l.sent(),[2]}})}),function(t){return e.apply(this,arguments)}),[t,n,i])}function R(){var e,t=S(),n=E();return h.useCallback((e=(0,r._)(function(e){return(0,l.Jh)(this,function(r){switch(r.label){case 0:return[4,t(e)];case 1:return r.sent(),[4,n({installationId:e,forceRefetch:!0})];case 2:return r.sent(),[2]}})}),function(t){return e.apply(this,arguments)}),[t,n])}function D(){var e,t,n,i,o=(e=E(),t=(0,Z.ZC)(b.Ol),n=N().throwSystemError,h.useCallback((i=(0,r._)(function(r){var i,o,a,c,s,u,d,f,h,p;return(0,l.Jh)(this,function(l){switch(l.label){case 0:return[4,(0,y.Zw)(r)];case 1:if((i=l.sent()).error)return n({friendlyMessage:"Failed to load installed extensions",error:i.error}),[2];o=!0,a=!1,c=void 0,l.label=2;case 2:l.trys.push([2,9,10,11]),s=i.result[Symbol.iterator](),l.label=3;case 3:if(o=(u=s.next()).done)return[3,8];if(null===(f=(d=u.value).extension)||void 0===f?void 0:f.isDisabled)return t.info("Skipping disabled extension: ".concat(d.extension.name),{extension:!0,extensionId:d.extension.id,installationId:d.id}),[3,7];l.label=4;case 4:return l.trys.push([4,6,,7]),[4,e({installationId:(0,x.Ad)(d.id),forceRefetch:!0})];case 5:return l.sent(),[3,7];case 6:return h=l.sent(),t.error("Extension Loading error: ".concat(h.message),{extension:!0,errors:h.message}),[3,7];case 7:return o=!0,[3,3];case 8:return[3,11];case 9:return p=l.sent(),a=!0,c=p,[3,11];case 10:try{o||null==s.return||s.return()}finally{if(a)throw c}return[7];case 11:return[2]}})}),function(e){return i.apply(this,arguments)}),[e,n,t])),c=(0,Z.E4)(b.Ol),u=(0,Z.E4)(b.zk),d=(0,a._)(h.useState(!1),2),f=d[0],p=d[1],m=(0,a._)(h.useState(null),2),v=m[0],g=m[1],w=(0,a._)(h.useState(null),2),C=w[0],_=w[1];return h.useEffect(function(){if(v&&C&&!f){var e=v.replId;p(!0),o(e)}},[v,C,o,f]),h.useCallback(function(e){var t=e.replId,n=e.userId;if(!f){g({replId:t,userId:n});var r=(0,s.Z)({extension:!0,isInitialized:!0,replId:t,userId:n},{onLog:function(e){u(e)}});_(r),c(r)}},[c,f,u])}function I(){var e,t=E(),n=(0,b.qr)(),i=(0,b.Mu)(),o=(0,Z.E4)(b.ot);return h.useCallback((e=(0,r._)(function(e){var r,a;return(0,l.Jh)(this,function(l){return r=(0,p.BY)(e),(a=n.find(function(e){return e.baseUrl===r}))||o(a={extensionId:(0,x.T8)(g()()),installationId:(0,x.Ad)(g()()),baseUrl:r}),i.find(function(e){return e.extensionId===(null==a?void 0:a.extensionId)})||t({installationId:a.installationId}),[2]})}),function(t){return e.apply(this,arguments)}),[n,i,o,t])}function G(){var e=(0,_.Z)().container,t=(0,C.Z)(e),n=(0,Z.E4)(b.M1),i=(0,Z.Ld)(),o=E();return h.useCallback((0,r._)(function(){var e;return(0,l.Jh)(this,function(r){switch(r.label){case 0:if(!t)return[2];return[4,o({installationId:(e=n(t)).installationId,forceRefetch:!0})];case 1:return r.sent(),[2,i.get(b._t).find(function(t){return t.installationId===e.installationId})]}})}),[t,n,o,i])}function B(){var e=(0,_.Z)().container,t=(0,C.Z)(e),n=(0,Z.E4)(b.M1),r=(0,b.Mu)();return h.useMemo(function(){if(t){var e=n(t);return r.find(function(t){return e.installationId===t.installationId})}},[t,r,n])}var A=(0,u.cn)(null,function(e,t,n){var r=e(b.Ol);t(b.wQ,n),r.error("Extension System Error: ".concat(n.error.message),{extensionSystem:!0,originalError:n.error.message,friendlyMessage:n.friendlyMessage})}),P=(0,u.cn)(null,function(e,t,n){var r=e(b._t),i=e(b.Ol),o=r.find(function(e){return e.extensionId===n.extensionId});if(i.error("Extension Error: ".concat(n.extensionError.friendlyMessage),{extension:!0,extensionId:n.extensionId,originalError:n.extensionError.error.message,friendlyMessage:n.extensionError.friendlyMessage}),!o){t(b.nk,{extensionId:n.extensionId,installationId:n.installationId,manifest:(0,p.fF)({name:n.extensionId}),baseUrl:"",enableExperimentalApi:!1,enableInternalApi:!1,logger:i.createLogger({extensionId:n.extensionId,extensionName:n.extensionId,installationId:n.installationId,local:void 0}),isLocal:null}),t(b.f4,{extensionId:n.extensionId,extensionError:n.extensionError});return}t(b.f4,{extensionId:n.extensionId,extensionError:n.extensionError})});function N(){return{throwSystemError:(0,Z.E4)(A),throwExtensionError:(0,Z.E4)(P)}}},67887:function(e,t,n){n.d(t,{Al:function(){return b},V9:function(){return g},Wc:function(){return s},Y4:function(){return d},Zw:function(){return m},mr:function(){return h}});var r=n(34142),i=n(87682),o=n(24646),a=n(65490),l=n(13090),c=n(65169);function s(e){return u.apply(this,arguments)}function u(){return(u=(0,r._)(function(e){var t,n,r,o,l;return(0,i.Jh)(this,function(i){switch(i.label){case 0:if(t=e.extensionId,n=e.replId,!a.l)return[2,{error:Error("expected apolloClient to be initialized"),result:null}];return[4,a.l.mutate({mutation:c.aq,variables:{extensionId:t,replId:n}})];case 1:if((o=i.sent()).errors&&o.errors.length>0)return[2,{error:Error("Error when installing extension: "+o.errors.map(function(e){return e.message}).join(", ")),result:null}];if(!(l=null===(r=o.data)||void 0===r?void 0:r.installExtension))return[2,{error:Error("Error when installing extension: expected result"),result:null}];if((null==l?void 0:l.__typename)==="UnauthorizedError"||(null==l?void 0:l.__typename)==="UserError")return[2,{error:Error("Error when installing extension: "+l.message),result:null}];if(!l.extension)return[2,{error:Error("Error when installing extension: expected extension to be set"),result:null}];if(!l.extension.url)return[2,{error:Error("Error when installing extension: Extension does not have a URL and cannot be installed"),result:null}];return[2,{result:l,error:null}]}})})).apply(this,arguments)}function d(e){return f.apply(this,arguments)}function f(){return(f=(0,r._)(function(e){var t,n,r,o,l;return(0,i.Jh)(this,function(i){switch(i.label){case 0:if(t=e.installationId,n=e.replId,!a.l)return[2,{error:Error("expected apolloClient to be initialized"),result:null}];return[4,a.l.mutate({mutation:c.jF,variables:{installationId:t,replId:n}})];case 1:if((o=i.sent()).errors&&o.errors.length>0)return[2,{error:Error("Error when uninstalling extension: "+o.errors.map(function(e){return e.message}).join(", ")),result:null}];if(!(l=null===(r=o.data)||void 0===r?void 0:r.uninstallExtension))return[2,{error:Error("Error when uninstalling extension: expected result"),result:null}];if((null==l?void 0:l.__typename)==="NotFoundError"||(null==l?void 0:l.__typename)==="UserError")return[2,{error:Error("Error when uninstalling extension: "+l.message),result:null}];return[2,{result:l,error:null}]}})})).apply(this,arguments)}function h(e){return p.apply(this,arguments)}function p(){return(p=(0,r._)(function(e){var t,n,r=arguments;return(0,i.Jh)(this,function(i){switch(i.label){case 0:if(t=r.length>1&&void 0!==r[1]&&r[1],!a.l)return[2,{error:Error("expected apolloClient to be initialized"),result:null}];return[4,a.l.query({query:c.AR,variables:{installationId:e},fetchPolicy:t?"network-only":"cache-first"})];case 1:if("ExtensionInstallation"!==(n=i.sent().data.extensionInstallationById).__typename)return[2,{error:Error("Expected to find extension installation"),result:null}];if(!n.extension)return[2,{error:Error("Expected installation.extension"),result:null}];return[2,{result:n,error:null}]}})})).apply(this,arguments)}function m(e){return v.apply(this,arguments)}function v(){return(v=(0,r._)(function(e){var t;return(0,i.Jh)(this,function(n){switch(n.label){case 0:if(!a.l)return[2,{error:Error("expected apolloClient to be initialized"),result:null}];return[4,a.l.query({query:c.Ve,variables:{replId:e}})];case 1:if("ExtensionInstallationList"!==(t=n.sent().data.extensionInstallations).__typename)return[2,{error:Error("Expected to find ExtensionInstallationList"),result:null}];return[2,{result:t.installations,error:null}]}})})).apply(this,arguments)}function g(e){return y.apply(this,arguments)}function y(){return(y=(0,r._)(function(e){var t,n,r,a,c;return(0,i.Jh)(this,function(i){switch(i.label){case 0:t=(0,l.BP)(e),i.label=1;case 1:return i.trys.push([1,4,,5]),[4,fetch(t)];case 2:return[4,i.sent().text()];case 3:if(n=i.sent(),r=o.ku(n),(a=(0,l.U4)(r)).error)return[2,{error:a.error,result:null}];return[2,{result:a.manifest,error:null}];case 4:if("SyntaxError"===(c=i.sent()).name)return[2,{error:Error("Error when fetching manifest: invalid JSON"),result:null}];return[2,{error:Error("Error when fetching manifest: "+c.message),result:null}];case 5:return[2]}})})).apply(this,arguments)}function b(){return Z.apply(this,arguments)}function Z(){return(Z=(0,r._)(function(){var e;return(0,i.Jh)(this,function(t){switch(t.label){case 0:if(!a.l)return[2,{error:Error("expected apolloClient to be initialized"),result:null}];return[4,a.l.query({query:c.LF,fetchPolicy:"cache-first"})];case 1:if(!(e=t.sent().data.currentUser)||"CurrentUser"!==e.__typename)return[2,{error:Error("Expected to find CurrentUser"),result:null}];return[2,{result:{userHasInternalApiEnabled:e.isAdmin||e.isStaff},error:null}]}})})).apply(this,arguments)}},18440:function(e,t,n){n.d(t,{Lq:function(){return C},M1:function(){return B},Mu:function(){return M},Ol:function(){return S},UB:function(){return T},UT:function(){return R},WG:function(){return H},We:function(){return A},_K:function(){return N},_t:function(){return x},c_:function(){return W},ep:function(){return D},f4:function(){return P},jx:function(){return X},nk:function(){return I},ot:function(){return G},qr:function(){return z},r9:function(){return F},s6:function(){return V},wQ:function(){return _},zk:function(){return k}});var r,i,o,a=n(34142),l=n(45903),c=n(25e3),s=n(32477),u=n(21289),d=n(87682),f=n(90234),h=n(46565),p=n(64461),m=n(19418),v=n(30911),g=n.n(v),y=n(70226),b=n(36846),Z=n.n(b),w=n(50199),x=(0,f.cn)([]),C=(0,f.cn)([]),_=(0,f.cn)(null),S=(0,f.cn)((0,y.Z)({extension:!0,isInitialized:!1},{onLog:function(){throw Error("Logged before extension system was initialized.")}})),E=(0,f.cn)([]),k=(0,f.cn)(null,function(e,t,n){var r=e(E);t(E,(0,p.Uy)(r,function(e){e.push((0,p.Uy)(n,function(t){t.index=e.length})),e.length>1e3&&e.splice(0,e.length-1e3)}))}),T=(0,f.cn)(null,function(e,t){t(E,[])}),R=(0,f.cn)("local:true"),D=(0,f.cn)(function(e){var t=e(E),n=e(R);if(!n)return t;var r=n.split(" ").map(function(e){var t=(0,s._)(e.split(":"),2),n=t[0],r=t[1];return n&&void 0===r?function(e){return e.message.toLowerCase().includes(n.toLowerCase())}:n&&""===r?function(e){return void 0!==Z()(e,n)}:n&&r?function(e){try{return String(Z()(e,n))===r}catch(e){return!1}}:null}).filter(function(e){return null!==e});return t.filter(function(e){return r.every(function(t){return t(e)})})}),I=(0,f.cn)(null,(r=(0,a._)(function(e,t,n){return(0,d.Jh)(this,function(r){if(e(x).find(function(e){return e.extensionId===n.extensionId}))throw Error("Extension already loaded");return t(x,function(e){return(0,p.Uy)(e,function(e){var t,r,i,o,a,l,c,s,u=(r=n.baseUrl,i=n.extensionId,o=n.installationId,a=n.manifest,l=n.enableExperimentalApi,c=n.enableInternalApi,s=n.logger,{baseUrl:r,extensionId:i,installationId:o,manifest:a,isLocal:n.isLocal,stateAtom:(0,f.cn)({error:null,panes:[],scopes:new Set(null===(t=a.scopes)||void 0===t?void 0:t.map(function(e){return e.name})),enableExperimentalApi:l,enableInternalApi:c,commands:new Map}),logger:s});e.push(u)})}),[2]})}),function(e,t,n){return r.apply(this,arguments)})),G=(0,f.cn)(null,(i=(0,a._)(function(e,t,n){return(0,d.Jh)(this,function(r){if(e(C).find(function(e){return e.extensionId===n.extensionId||e.installationId===n.installationId||e.baseUrl===n.baseUrl}))throw Error("Extension already loaded");return t(C,function(e){return(0,p.Uy)(e,function(e){e.push(n)})}),[2]})}),function(e,t,n){return i.apply(this,arguments)})),B=(0,f.cn)(null,function(e,t,n){var r=e(C).find(function(e){return e.baseUrl===n});if(r)return r;var i={baseUrl:n,extensionId:(0,h.T8)(g()()),installationId:(0,h.Ad)(g()())};return t(C,function(e){return(0,p.Uy)(e,function(e){e.push(i)})}),i}),A=(0,f.cn)(null,(o=(0,a._)(function(e,t,n){return(0,d.Jh)(this,function(e){return t(x,function(e){return(0,p.Uy)(e,function(e){var t=e.findIndex(function(e){return"extensionId"in n?e.extensionId===n.extensionId:e.installationId===n.installationId});-1!==t&&e.splice(t,1)})}),[2]})}),function(e,t,n){return o.apply(this,arguments)})),P=(0,f.cn)(null,function(e,t,n){var r=e(x).find(function(e){return e.extensionId===n.extensionId});if(!r)throw Error("Extension not found");t(r.stateAtom,function(e){return(0,p.Uy)(e,function(e){e.error=n.extensionError})})}),N=(0,f.cn)(null,function(e,t,n){var r=n.createCommand.id;t(n.extensionStateAtom,function(e){return(0,p.Uy)(e,function(e){e.commands.set(r,n.createCommand)})})}),U=(0,f.cn)(function(e){return e(x).flatMap(function(t){return(0,u._)(e(t.stateAtom).commands.values())})}),L=(0,f.cn)(function(e){return e(x).map(function(e){var t;return null===(t=e.manifest.fileHandlers)||void 0===t?void 0:t.map(function(t){return(0,c._)((0,l._)({},t),{extension:e})})}).flat().filter(function(e){return!!e})}),O=(0,f.cn)(function(e){return e(x).map(function(e){var t;return null===(t=e.manifest.tools)||void 0===t?void 0:t.map(function(t){return(0,c._)((0,l._)({},t),{extension:e})})}).flat().filter(function(e){return!!e})});function M(){return(0,m.ZC)(x)}function X(e){return M().find(function(t){return t.installationId===e})}function F(e){var t=X(e);return t&&e?t.stateAtom:null}function W(){return(0,m.ZC)(L)}function H(){return(0,m.ZC)(O)}function V(e){var t=(0,m.ZC)(U);return(0,w.Z)(function(){return t.filter(function(t){return t.contributions.includes(e)})},[t,e])}function z(){return(0,m.ZC)(C)}},19418:function(e,t,n){n.d(t,{E4:function(){return f},Ld:function(){return s},OA:function(){return u},Wv:function(){return h},ZC:function(){return d}});var r=n(32477),i=n(8182),o=n(90234),a=n(71999),l=n(43429),c=(0,l.createContext)(null);function s(){return function(){var e=(0,l.useContext)(c);if(!e)throw Error("Expected extensions context");return e}().store}var u=function(e){var t=s();return(0,a.KO)(e,{store:t})};function d(e){var t=s();return(0,a.Dv)(e,{store:t})}var f=function(e){var t=s();return(0,a.b9)(e,{store:t})};function h(e){var t=e.children,n=(0,r._)(l.useState(function(){return(0,o.MT)()}),1)[0];return(0,i.tZ)(c.Provider,{value:{store:n},children:t})}},19724:function(e,t,n){var r,i;n.d(t,{Y:function(){return r}}),(i=r||(r={})).CommandBar="commandbar",i.FiletreeContextMenu="filetree-context-menu",i.SidebarSearch="sidebar-search",i.EditorContextMenu="editor-context-menu"},70226:function(e,t,n){n.d(t,{Z:function(){return function e(t,n){var r=function(e){var r,i,l,s,f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{logLevel:"debug"},h=null!==(r=(i={},(0,o._)(i,"debug",c.kg.debug),(0,o._)(i,"warn",c.kg.warn),(0,o._)(i,"info",c.kg.info),(0,o._)(i,"error",c.kg.error),i)[f.logLevel])&&void 0!==r?r:c.kg.debug;(null!==(l=(s={},(0,o._)(s,"debug",d.debug),(0,o._)(s,"warn",d.warn),(0,o._)(s,"info",d.info),(0,o._)(s,"error",d.error),s)[f.logLevel])&&void 0!==l?l:d.debug)(e,f),h(e,u()((0,a._)({},f,t),["replId","logLevel"])),n.onLog((0,a._)({message:e},f,t))};return{context:t,info:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(e,(0,l._)((0,a._)({},t),{logLevel:"info"}))},warn:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(e,(0,l._)((0,a._)({},t),{logLevel:"warn"}))},error:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(e,(0,l._)((0,a._)({},t),{logLevel:"error"}))},createLogger:function(r){return e((0,a._)({},t,r),n)}}}},i:function(){return i}});var r,i,o=n(39698),a=n(45903),l=n(25e3),c=n(47507),s=n(61335),u=n.n(s),d=n(33212);(r=i||(i={})).debug="debug",r.info="info",r.warn="warn",r.error="error"},3574:function(e,t,n){n.d(t,{Cl:function(){return a},VD:function(){return d},uN:function(){return u}});var r=n(90234),i=n(71999),o=n(43429),a=(0,o.createContext)(null),l=(0,r.cn)(null),c=(0,r.cn)(null,function(e,t,n){t(l,n)});function s(){var e=(0,o.useContext)(a);if(!e)throw Error("Expected store in context");return e}function u(){return(0,i.Dv)(l,{store:s()})}function d(e){var t=(0,i.Dv)(l,{store:s()}),n=(0,i.b9)(c,{store:s()});(0,o.useEffect)(function(){t!==e&&n(e)},[e,t,n])}},88883:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(54916),i=n(43429),o=n(19659);function a(e){var t=(0,r.Z)().fs,n=(0,i.useCallback)(function(n,r){var i=n.code,a=n.insertAt,l=n.newLine,c=void 0===l||l;if(!e||(0,o.T3)(e)||(0,o.sL)(e)||(0,o.IQ)(e)||(0,o.hj)(e))throw Error("Invalid file, this should never happen");if(0!==i.length)var s=t.watchTextFile(e,{onReady:function(e){var n=e.initialContent,o=e.writeChange,l=n.toString(),u="end"===a?l.length:a,d=i;c&&(0!==u&&u!==l.length&&-1===(u=l.indexOf("\n",u))&&(u=l.length),0!==u&&"\n"!==l[u-1]&&(d="\n"+d),"\n"!==l[u]&&(d+="\n")),o({from:u,insert:d},r),t.flush().finally(function(){s()})}})},[e,t]);return!e||(0,o.T3)(e)||(0,o.sL)(e)||(0,o.IQ)(e)||(0,o.hj)(e)?null:n}},51279:function(e,t,n){n.d(t,{Z:function(){return y}});var r=n(34142),i=n(32477),o=n(21289),a=n(87682),l=n(43429),c=n(58626),s=n(59868),u=n(30084),d=n(58091),f=n(54916),h=n(63009),p=n(19659),m=n(26851),v=n(86790),g=n(17789);function y(e){var t,n,y,b=e.moveOrDeleteFile,Z=(0,f.Z)().fs,w=(0,m.K)(),x=(0,l.useRef)(new Map),C=(0,d.ex)(),_=(0,i._)((0,l.useState)(!1),2),S=_[0],E=_[1],k=(0,i._)((0,l.useState)(!1),2),T=k[0],R=k[1],D=(0,i._)((0,l.useState)([]),2),I=D[0],G=D[1],B=(0,v.k)(),A=(0,h.uV)(),P=I.map(function(e){return e.path}).map(function(e){return{title:e,path:e}}),N=(0,i._)((0,l.useState)(),2),U=N[0],L=N[1],O=(0,d.Gg)();(0,l.useEffect)(function(){if(!(!C||x.current.has(C))&&C!==g.w){var e=function(e){var t=e.node.path;O(e.eventType===u.kS.Move?{path:t,type:"move",to:e.to}:{path:t,type:"delete"}),b&&b(e),x.current.delete(C),G(function(e){return e.filter(function(e){return e.path!==C})})};(0,p.Mb)(C)?Z.watchTextFile(C,{onMoveOrDelete:e,onError:function(e,t){e.code||(Z.flush(),Z.persist({skipDebounce:!0}),A({error:e,extras:t,tags:{ot:!0},origin:"useContentsDiverged: fs.watchTextFile"}))},onReconnectFail:function(e,t){G(function(n){return(0,o._)(n.filter(function(e){return e.path!==C})||[]).concat([{path:C,prompt:t,cb:e}])}),w("user:ot:diverged",{path:C,divergence:t}),E(!0),U||L(C)}}):Z.watchFile(C,{onChange:function(){},onMoveOrDelete:e}),x.current.set(C,!0)}},[C,Z,A,b,U,w,O]);var M=(t=(0,r._)(function(e){return(0,a.Jh)(this,function(t){switch(t.label){case 0:return(0,s.j)(s.U3.FILE_RECONNECT_FALLBACK_CHOSEN,{choice:e}),(0,s.j)(s.U3.CONTENTS_DIVERGED_ACTION,{action:"local"===e?"client":"server"}),R(!0),[4,Promise.all(I.map(function(t){return G(function(e){var n=e.filter(function(e){return e.path!==t.path});return 0===n.length?E(!1):L(n[0].path),n}),t.cb(e)}))];case 1:return t.sent(),R(!1),[2]}})}),function(e){return t.apply(this,arguments)}),X=U?I.find(function(e){return e.path===U}):null,F=null==X?void 0:X.prompt,W=(0,c.J)({left:{code:null!==(n=null==F?void 0:F.localContent)&&void 0!==n?n:"",filePath:U},right:{code:null!==(y=null==F?void 0:F.remoteContent)&&void 0!==y?y:"",filePath:U}});return{isConverging:T,didContentsDiverge:S,showMoreDetail:B,failedFiles:I,failedFilesOptions:P,selectedFile:U,setSelectedFile:L,reviewingPrompt:F,onChoice:M,local:W.left,remote:W.right}}},78392:function(e,t,n){n.d(t,{F:function(){return eo}});var r,i,o,a,l,c,s=n(34142),u=n(45903),d=n(25e3),f=n(32477),h=n(87682),p=n(59121),m=n(55534),v=n(50782),g=n(47507),y=n(24774),b=n.n(y),Z=function(e){var t=b()(e,{baseUrl:!1}).pathname.replace(/\.git$/,"");if(t){var n=(0,f._)(t.split("/").reverse(),2),r=n[0],i=n[1];if(i&&r)return{username:i,repository:r}}},w=n(81106),x=n(54916);(r=a||(a={}))[r.NONE=0]="NONE",r[r.PUSH=1]="PUSH",r[r.CLONE=2]="CLONE",r[r.FETCH=3]="FETCH",r[r.GITHUB_CREATE=4]="GITHUB_CREATE",r[r.GITHUB_GET_INFO=5]="GITHUB_GET_INFO",(i=l||(l={})).None="NONE",i.NoMergeBase="NO_MERGE_BASE",i.AuthFetchError="AUTH_FETCH_ERROR",i.IndexFilesCorrupted="INDEX_FILES_CORRUPTED",(o=c||(c={}))[o.UNTRACKED=0]="UNTRACKED",o[o.MODIFIED=1]="MODIFIED",o[o.MOVED=2]="MOVED",o[o.DELETED=3]="DELETED";var C="git log -0 2>/dev/null && ".concat("git symbolic-ref HEAD --short"," || echo 'HEAD'");function _(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return["bash","-c",t.join("&&")]}var S={format:function(e,t){return _('[ ! -d ".git" ]',"git init","git checkout -b main",'git config user.name "'.concat(t.username||"Replit user",'"'),'git config user.email "<>"',"touch .git/branches/.keep","touch .git/info/.keep","touch .git/objects/.keep","touch .git/refs/.keep")}},E={format:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=null!==(t=e.remote)&&void 0!==t?t:"";return n?_("git fetch ".concat(r," --progress --deepen=10")):_("git fetch ".concat(e.remote," +refs/heads/*:refs/remotes/origin/* --progress --depth=10"))},parse:function(e,t){return null!==new RegExp(/(^|\n)fatal: Authentication failed/g).exec(t)||null!==new RegExp(/(^|\n)fatal: unable to access/g).exec(t)||null!==new RegExp(/(^|\n)fatal: repository.*not found/g).exec(t)||null!==new RegExp(/(^|\n)fatal: could not read Username/g).exec(t)||null!==new RegExp(/(^|\n)fatal: Could not read from remote repository/g).exec(t)?(0,d._)((0,u._)({},e),{authError:a.FETCH}):e}},k={format:function(e){return["git","remote","get-url","origin"]},parse:function(e,t){return t.includes("No such remote")||t.startsWith("fatal")?(0,d._)((0,u._)({},e),{remote:""}):(0,d._)((0,u._)({},e),{remote:t.trim()})}},T={format:function(e,t){return e.remote?_("git remote remove origin; git remote add origin ".concat(t)):_("git remote add origin ".concat(t))}},R={format:function(e){var t;return _("git remote show ".concat(null!==(t=e.remote)&&void 0!==t?t:""," | grep 'HEAD branch'"))},parse:function(e,t){var n=(0,f._)(t.split(":"),2),r=(n[0],n[1]).trim();return(0,d._)((0,u._)({},e),{defaultBranch:r})}},D={format:function(e){return _("git checkout -f ".concat(e.defaultBranch))}},I={format:function(e){return _("if ! (( $(busybox ps -o comm | grep git) )) ; then rm -rf .git/index.lock; fi ; ".concat("git reset $(".concat(C,") --")))}},G=n(45123),B=n(42703),A=n.n(B),P=n(43429),N=n(93295),U=n(23982),L=n(66496);function O(){var e=(0,N._)(["\n  query WorkspacePatchDotReplitRepl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        rootOriginReplUrl\n      }\n    }\n  }\n"]);return O=function(){return e},e}var M={},X=(0,U.Ps)(O()),F=function(e,t){return{op:"add",path:e,value:JSON.stringify(t)}},W=new Map([["hintsList","hints"]]);function H(){return(H=(0,s._)(function(e){var t,n,r,i,o,a,l,c,d,p,m,v,g,y,b;function Z(){return w.apply(this,arguments)}function w(){return(w=(0,s._)(function(){var e,n,o;return(0,h.Jh)(this,function(a){switch(a.label){case 0:if(!(e="object"==typeof r.env?r.env:null)||0===Object.keys(e).length)return[2];return o=(n="object"==typeof i.env?i.env:null)?(0,u._)({},e,n):e,[4,t.updateDotReplit([F("env",o)])];case 1:return a.sent(),[2]}})})).apply(this,arguments)}function x(){return C.apply(this,arguments)}function C(){return(C=(0,s._)(function(){var e,o,a,l;return(0,h.Jh)(this,function(c){switch(c.label){case 0:if(null===(e=i.nix)||void 0===e?void 0:e.channel)return[2];if(null==r?void 0:null===(o=r.nix)||void 0===o?void 0:o.channel)return[3,2];return[4,n.getLatestStableChannel()];case 1:if(!(l=c.sent()).channel)return[2];return a=l.channel,[3,3];case 2:a=r.nix.channel,c.label=3;case 3:return[4,t.updateDotReplit([F("nix/channel",a)])];case 4:return c.sent(),[2]}})})).apply(this,arguments)}function _(){return(_=(0,s._)(function(e){var n,o,a,l,c;return(0,h.Jh)(this,function(s){switch(s.label){case 0:if(o=!!(n=i[e]),Array.isArray(n)?o=n.length>0:n&&"object"==typeof n&&(o=Object.keys(n).length>0),l=null!==(a=W.get(e))&&void 0!==a?a:e,o||!r[l])return[2];return c=F(l,r[l]),[4,t.updateDotReplit([c])];case 1:return s.sent(),[2]}})})).apply(this,arguments)}return(0,h.Jh)(this,function(s){switch(s.label){case 0:t=e.dotReplit,n=e.nixService,r=e.templateConfig,i=e.config,o=[],a={entrypoint:"entrypoint config",hidden:"hidden files config",audio:"audio config",run:"run command",refreshWebViewOnFileChange:"webview refresh config",language:"language config",onBoot:"onBoot command",languages:"languages config",compile:"compile command",debugger:"debugger config",packager:"packager config",interpreter:"interpreter config",unitTest:"unit test config",nix:x,env:Z,hosting:"hosting config",gitHubImport:"GitHub import config",auth:"Repl Auth config",hintsList:"Hints config",ports:"Ports config",deployment:"deployment config",orderedEnv:null,modules:"nix modules config",extension:"extension config",rules:"rules config",suggestions:"suggestions config"},l=[],c=!0,d=!1,p=void 0;try{for(m=Object.entries(a)[Symbol.iterator]();!(c=(v=m.next()).done);c=!0)y=(g=(0,f._)(v.value,2))[0],b=g[1],null!==b&&("function"==typeof b?l.push(b()):l.push(function(e){return _.apply(this,arguments)}(y)))}catch(e){d=!0,p=e}finally{try{c||null==m.return||m.return()}finally{if(d)throw p}}return[4,Promise.all(l)];case 1:return s.sent(),[2,o]}})})).apply(this,arguments)}var V=n(71042),z=n(50682),j=n(24418),q=n(37229),Y=n(39756),$=n(30084),J=n(72986);function K(){var e=(0,N._)(["\n  query WorkspaceDoGitHubImportFlow($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        config {\n          gitRemoteUrl\n          doClone\n        }\n      }\n    }\n    currentUser {\n      id\n      gitHubInfo {\n        accessToken\n      }\n      username\n    }\n  }\n"]);return K=function(){return e},e}function Q(){var e=(0,N._)(["\n  mutation WorkspaceDoGitHubImportFlowFinishClone($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        config {\n          doClone\n        }\n      }\n    }\n  }\n"]);return Q=function(){return e},e}function ee(){var e=(0,N._)(["\n  query GitHubImportRootOriginReplUrl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        rootOriginReplUrl\n      }\n    }\n  }\n"]);return ee=function(){return e},e}var et={},en=(0,U.Ps)(K()),er=(0,U.Ps)(Q());ee();var ei=n(88422).lW;function eo(e){var t,n,r,i,o,c,y,b,C,_,B,N,U,O,F,W,K,Q,ee,eo,ea,el,ec,es,eu,ed,ef,eh,ep=e.insertConfigPlugin,em=e.setConfigScreenLockIsOpen,ev=e.openFile,eg=(0,v.Z)(),ey=(0,f._)((t=(0,u._)({},et,void 0),J.D(er,t)),2),eb=ey[0],eZ=ey[1],ew=(0,f._)((0,P.useState)(null),2),ex=ew[0],eC=ew[1],e_=(0,x.Z)(),eS=e_.container,eE=e_.fs,ek=e_.runner,eT=e_.dotReplit,eR=(0,w.Z)(eS),eD=(0,m.Z)(),eI=eD.showError,eG=eD.showConfirm,eB=(r=(n=(0,x.Z)()).dotReplit,i=n.nixService,o=(0,v.Z)(),y=(0,f._)((c=(0,u._)({},M,void 0),L.t(X,c)),1)[0],C=(b=(0,m.Z)()).showWarning,_=b.showError,(0,P.useCallback)((B=(0,s._)(function(e){var t,n,a,l,c,s,u,d,f,p,m;return(0,h.Jh)(this,function(h){switch(h.label){case 0:return[4,r.getConfig()];case 1:if(!(t=h.sent().config))return[2];return[4,y({variables:{replId:o}})];case 2:if(!(null==(a=(null==(n=h.sent().data)?void 0:n.repl.__typename)==="Repl"?n.repl:null)?void 0:a.rootOriginReplUrl))return[2];try{l=A().parse(e.toString())}catch(e){return _("Failed to parse template .replit file"),g.kg.error("GitHub Import: Failed to parse template .replit file"),[2]}if(!l)return[2];return[4,function(e){return H.apply(this,arguments)}({nixService:i,dotReplit:r,config:t,templateConfig:l})];case 3:c=h.sent(),s=!0,u=!1,d=void 0;try{for(f=c[Symbol.iterator]();!(s=(p=f.next()).done);s=!0)m=p.value,C(m,1e3)}catch(e){u=!0,d=e}finally{try{s||null==f.return||f.return()}finally{if(u)throw d}}return[2]}})}),function(e){return B.apply(this,arguments)}),[o,C,_,r,i,y]));(0,P.useEffect)(function(){eZ.error&&eI("Failed to finish cloning Repl - "+eZ.error)},[eZ.error,eI]),(0,P.useEffect)(function(){ex&&eI("Failed to finish cloning Repl - "+ex)},[ex,eI]),(0,P.useEffect)(function(){eZ.data&&eG("Finished cloning Repl")},[eZ.data,eG]),(0,P.useEffect)(function(){eA()},[]);var eA=(0,f._)((U={variables:{replId:eg},fetchPolicy:"no-cache",onCompleted:(N=(0,s._)(function(e){var t,n,r,i,o,a;return(0,h.Jh)(this,function(l){switch(l.label){case 0:if(t=e.repl,n=e.currentUser,"Repl"!==t.__typename||!n||"CurrentUser"!==n.__typename||!t.config.gitRemoteUrl||!t.config.doClone)return[2];l.label=1;case 1:return l.trys.push([1,3,4,5]),em(!0),[4,e$({remote:null!==(i=t.config.gitRemoteUrl)&&void 0!==i?i:"",accessToken:null!==(o=null===(r=n.gitHubInfo)||void 0===r?void 0:r.accessToken)&&void 0!==o?o:null,username:n.username})];case 2:return l.sent(),[3,5];case 3:return a=l.sent(),g.kg.error("GitHub Import: Failed to do GitHub import flow",{originalError:String(a)}),eC(String(a)),[3,5];case 4:return em(!1),[7];case 5:return[2]}})}),function(e){return N.apply(this,arguments)})},O=(0,u._)({},et,U),L.t(en,O)),1)[0],eP={isInitialized:!1,hasConflictsWithFetchedRemote:!1,hasMergeBaseWithFetchedRemote:!0,authError:a.NONE,badState:l.None,remote:"",repoId:null,branch:"",defaultBranch:"main",branches:[],installations:[],changedFiles:[],commits:[],commitsAhead:null,commitsBehind:null,remoteToken:null,gitHubName:null,ownerId:null,gitHubAvatarUrl:null,gitHubEmail:null},eN=(F=(0,s._)(function(e){return(0,h.Jh)(this,function(t){switch(t.label){case 0:return[4,eR({args:S.format(eP,null!=e?e:"")})];case 1:return t.sent(),[2]}})}),function(e){return F.apply(this,arguments)}),eU=(W=(0,s._)(function(e){return(0,h.Jh)(this,function(t){switch(t.label){case 0:return[4,eR({args:T.format(eP,e)})];case 1:return t.sent(),[2]}})}),function(e){return W.apply(this,arguments)}),eL=(K=(0,s._)(function(){var e;return(0,h.Jh)(this,function(t){switch(t.label){case 0:return[4,eR({args:k.format(eP)})];case 1:if(e=t.sent(),!k.parse)return[2];return[2,k.parse(eP,null===e.error?e.output:"").remote]}})}),function(){return K.apply(this,arguments)}),eO=(Q=(0,s._)(function(e){var t,n,r;return(0,h.Jh)(this,function(i){switch(i.label){case 0:return t=e.remote,n=e.remoteToken,[4,eR({args:R.format((0,d._)((0,u._)({},eP),{remote:t,remoteToken:n}))})];case 1:if(r=i.sent(),!R.parse)return[2];return[2,R.parse(eP,null===r.error?r.output:"HEAD branch: main").defaultBranch]}})}),function(e){return Q.apply(this,arguments)}),eM=(ee=(0,s._)(function(e){return(0,h.Jh)(this,function(t){switch(t.label){case 0:return[4,eR({args:D.format((0,d._)((0,u._)({},eP),{defaultBranch:e}))})];case 1:return t.sent(),[2]}})}),function(e){return ee.apply(this,arguments)}),eX=(eo=(0,s._)(function(e){var t,n;return(0,h.Jh)(this,function(r){switch(r.label){case 0:return t=e.remote,n=e.remoteToken,[4,eF()];case 1:return r.sent(),[4,eL()];case 2:return r.sent(),[4,eW({deepen:!0,remote:t,remoteToken:n})];case 3:return r.sent(),[2]}})}),function(e){return eo.apply(this,arguments)}),eF=(ea=(0,s._)(function(){return(0,h.Jh)(this,function(e){switch(e.label){case 0:return[4,eR({args:I.format(eP)})];case 1:return e.sent(),[2]}})}),function(){return ea.apply(this,arguments)}),eW=(el=(0,s._)(function(e){var t,n,r,i;return(0,h.Jh)(this,function(o){switch(o.label){case 0:if(n=void 0!==(t=e.deepen)&&t,r=e.remote,i=e.remoteToken,!r.startsWith("https://api.glitch.com"))return[3,2];return[4,eR({args:["git","fetch",r,"+refs/heads/*:refs/remotes/origin/*"]})];case 1:case 3:return o.sent(),[2];case 2:return[4,eR({args:E.format((0,d._)((0,u._)({},eP),{remote:r,remoteToken:i}),n)})]}})}),function(e){return el.apply(this,arguments)}),eH=(ec=(0,s._)(function(){var e,t,n,r,i,o;return(0,h.Jh)(this,function(a){switch(a.label){case 0:return[4,eE.readDir(Y.Ql)];case 1:if((r=a.sent()).error)return[2];return[4,eT.getConfig()];case 2:if(!(null===(t=(i=a.sent()).config)||void 0===t?void 0:null===(e=t.gitHubImport)||void 0===e?void 0:e.requiredFiles))return[3,4];return o=i.config.gitHubImport.requiredFiles.map(function(e){return new RegExp(e)}),[4,Promise.all(r.children.filter(function(e){return!o.some(function(t){return null!=e.filename.match(t)})}).map(function(e){return e.type===$.Tv.Directory?eE.deleteDir(e.filename):eE.deleteFile(e.filename)}))];case 3:return a.sent(),[3,6];case 4:if(!(null===(n=i.config)||void 0===n?void 0:n.entrypoint))return[3,6];return[4,eE.deleteFile(i.config.entrypoint)];case 5:a.sent(),a.label=6;case 6:return[2]}})}),function(){return ec.apply(this,arguments)}),eV=(es=(0,s._)(function(e,t,n){var r;return(0,h.Jh)(this,function(i){switch(i.label){case 0:return[4,eN(n)];case 1:return i.sent(),[4,eU(e)];case 2:return i.sent(),[4,eL()];case 3:return i.sent(),[4,eW({deepen:!1,remote:e,remoteToken:t})];case 4:return i.sent(),[4,eO({remote:e,remoteToken:t})];case 5:return[4,eM(null!=(r=i.sent())?r:"")];case 6:return i.sent(),[4,eX({remote:e,remoteToken:t})];case 7:if(i.sent(),"html"!==ek.mode)return[3,10];return[4,(0,V.r)(eS,Y.Ql)];case 8:return i.sent(),[4,ek.run()];case 9:i.sent(),i.label=10;case 10:return[2]}})}),function(e,t,n){return es.apply(this,arguments)}),ez=(eu=(0,s._)(function(){var e;return(0,h.Jh)(this,function(t){switch(t.label){case 0:return[4,(0,G.W)({dotReplit:eT,fs:eE})];case 1:return(e=t.sent().entrypoint)&&ev({path:e}),[2]}})}),function(){return eu.apply(this,arguments)}),ej=(ed=(0,s._)(function(e,t){var n;return(0,h.Jh)(this,function(r){switch(r.label){case 0:return[4,(0,z.J9)({repoNameWithOwner:e,accessToken:t})];case 1:if("error"in(n=r.sent()))return[2,{hasDotReplit:!1,hasProcfile:!1}];return[2,{hasDotReplit:n.some(function(e){return e.path===j.l}),hasProcfile:n.some(function(e){return e.path===p.E})}]}})}),function(e,t){return ed.apply(this,arguments)}),eq=(ef=(0,s._)(function(e,t){var n,r,i,o,a,l,c,s;return(0,h.Jh)(this,function(u){switch(u.label){case 0:return[4,(0,z.LK)({repoNameWithOwner:e,filePath:p.E,accessToken:t})];case 1:if("error"in(n=u.sent())||(r=ei.from(n.content,"base64").toString(),!(i=(0,p.c)(r))||!(a=null!==(o=i.web)&&void 0!==o?o:i.worker)))return[2,{showConfigPanel:!0}];return l=a.command+" "+a.options.join(" "),[4,eT.updateDotReplit([(0,q.KQ)(l),(0,q.xz)("interpreter")])];case 2:if(c=u.sent(),s=i.web&&!i.worker||!i.web&&i.worker,c.error||!s)return[2,{showConfigPanel:!0}];return[2,{showConfigPanel:!1}]}})}),function(e,t){return ef.apply(this,arguments)});function eY(){return eE.readFile(j.l)}var e$=(eh=(0,s._)(function(e){var t,n,r,i,o,a,l,c,s,u,d;return(0,h.Jh)(this,function(f){switch(f.label){case 0:return t=e.remote,n=e.accessToken,r=e.username,g.kg.info("GitHub Import: Starting client-side GitHub import flow"),[4,eY()];case 1:return i=f.sent(),[4,eH()];case 2:return f.sent(),g.kg.info("GitHub Import: Removed template boilerplate"),[4,eV(t,n,r)];case 3:if(f.sent(),g.kg.info("GitHub Import: Cloned repo into Repl"),"content"in i)return[3,4];return g.kg.error("GitHub Import: Skipping patching dotReplit because templateDotReplit was an error",{readError:String(i.error)}),[3,7];case 4:return[4,eY()];case 5:return"content"in(o=f.sent())&&o.content.toString()!==i.content.toString()&&g.kg.info("GitHub Import: Repo has .replit",{githubURL:t}),[4,eB(i.content)];case 6:f.sent(),f.label=7;case 7:return g.kg.info("GitHub Import: Patched dotreplit"),[4,eb({variables:{input:{id:eg,doClone:!1}}})];case 8:return f.sent(),g.kg.info("GitHub Import: Disabled doClone on Repl. Done."),[4,ez()];case 9:if(f.sent(),a=Z(t),l=!1,!a)return[3,13];return c=a.username,s=a.repository,[4,ej("".concat(c,"/").concat(s),n)];case 10:if(d=(u=f.sent()).hasDotReplit,!(u.hasProcfile&&!d))return[3,12];return[4,eq("".concat(c,"/").concat(s),n)];case 11:return l=!f.sent().showConfigPanel,[3,13];case 12:l=d,f.label=13;case 13:if("html"===ek.mode||l)return[2];return ep(),[2]}})}),function(e){return eh.apply(this,arguments)})}},5218:function(e,t,n){n.d(t,{T:function(){return d}});var r=n(50782),i=n(45903),o=n(93295),a=n(23982),l=n(77393);function c(){var e=(0,o._)(["\n  query WorkspaceEduPaneEnabled($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        isModelSolution\n        isProject\n        isProjectFork\n        owner {\n          __typename\n          ... on Team {\n            id\n            isAdmin\n          }\n          ... on User {\n            id\n          }\n        }\n      }\n    }\n  }\n"]);return c=function(){return e},e}var s={},u=(0,a.Ps)(c());function d(){var e,t,n,o=(t={variables:{replId:(0,r.Z)()}},n=(0,i._)({},s,t),l.a(u,n)).data,a=(null==o?void 0:null===(e=o.repl)||void 0===e?void 0:e.__typename)==="Repl"?null==o?void 0:o.repl:null;if(!a)return!1;var c=a.owner;return!!c&&a.isProjectFork&&!a.isModelSolution&&"Team"===c.__typename&&c.isAdmin}},73858:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(32477),i=n(43429),o=n(17867),a=n(54916),l=n(30084),c=n(47001);function s(){var e=(0,a.Z)(),t=e.fs,n=e.container,s=(0,r._)((0,i.useState)(!1),2),u=s[0],d=s[1],f=(0,o.Z)(n),h=(0,r._)((0,i.useState)(!1),2),p=h[0],m=h[1];return((0,i.useEffect)(function(){f===c.em.CONNECTED&&m(!0)},[f]),(0,i.useEffect)(function(){return d(t.getStatus()===l.kO.Syncing),t.onStatusChange(function(e,t){var n=t.hasUserChanged;d(e===l.kO.Syncing&&n)})},[t]),p)?{isSaving:u,isOffline:f!==c.em.CONNECTED}:{isSaving:!1,isOffline:!1}}},13779:function(e,t,n){n.d(t,{O:function(){return s}});var r=n(34142),i=n(87682),o=n(25425),a=n(25632),l=n(57369),c=n(19858);function s(){var e,t,n,s=(0,o.P5)({controlName:"flag-filetree-git-status",logFlagToAnalytics:!1}),u=(0,a.Gn)("showFileTreeGitStatus").preferences.showFileTreeGitStatus&&s,d=(0,c.Z)((e=(0,r._)(function(e){var t,n;return(0,i.Jh)(this,function(r){switch(r.label){case 0:if(!u)return[2,{status:null,error:null}];return[4,e.getRepositoryState()];case 1:if((t=r.sent()).error)return[2,t];if(t.type!==l.y5.NORMAL)return[2,{status:null,error:null}];return[4,e.status()];case 2:if((n=r.sent()).error)return[2,n];return[2,{status:n,error:null}]}})}),function(t){return e.apply(this,arguments)}),[u]);return d&&!d.error&&(null===(t=d.status)||void 0===t?void 0:t.changes)?function(e){var t=new Map,n=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;t.set(l.path,{index:l.type.index,worktree:l.type.worktree})}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t}(null===(n=d.status)||void 0===n?void 0:n.changes):null}},71881:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(25425),i=n(50782),o=n(23394),a=n(11516),l=n(54916),c=n(43429),s=n(39756),u="persistmirrored";function d(){var e=(0,o.T)(),t=(0,i.Z)(),n=(0,r.P5)({controlName:"flag-persist-mirror-html",default:!0,logFlagToAnalytics:!1}),d=(0,l.Z)().container;(0,c.useEffect)(function(){if(!(!e||!n||(null!==(r=a.Z.get(u,"array"))&&void 0!==r?r:[]).includes(t))){var r,i=d.openChannel({service:"gcsfiles",skip:function(e){return!e.repl.currentUserPermissions.containerWrite}},function(e){return e.channel.request({persistMirror:{path:s.Ql}}).then(function(e){if(e.ok){var n,r;r=null!==(n=a.Z.get(u,"array"))&&void 0!==n?n:[],a.Z.set(u,r.concat(t)),i()}}),function(){}});return i}},[d,e,n,t])}},51359:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(54916),i=n(47001),o=n(43429);function a(){var e=(0,r.Z)().container;(0,o.useEffect)(function(){var t=function(){e.getConnectionState()===i.em.CONNECTED&&e.focus()};return window.addEventListener("focus",t),function(){window.removeEventListener("focus",t)}},[e])}},6309:function(e,t,n){n.d(t,{Z:function(){return v}});var r=n(8182),i=n(43429),o=n(54916),a=n(55534),l=n(20573),c=n(56596),s=n(74833),u=n(29287),d=n(93918),f=n(25425),h=n(81810),p=(0,d.X)({noticeContainer:[u.l0.rowWithGap(8),u.l0.align.center],noticeText:[u.l0.colWithGap(0)]}),m=new Set([3e3,3001,3002,3003,4200,5e3,5173,6e3,6800,8e3,8008,8080,8081,8888,9e3,1e4,25565,25577]);function v(){var e=(0,o.Z)().container,t=(0,a.Z)().showNotice,n=(0,f.P5)({controlName:h.wK,logFlagToAnalytics:!0});(0,i.useEffect)(function(){if(!n)return e.onPortOpened(function(e){var n=e.port,i=e.address;if(!e.isForwarded&&m.has(n)){var o="Port ".concat(n," opened on host ").concat(i,".");t((0,r.BX)(c.G,{css:p.noticeContainer,children:[(0,r.tZ)(l.Z,{}),(0,r.BX)(c.G,{css:p.noticeText,children:[(0,r.tZ)(s.xv,{multiline:!1,children:o}),(0,r.tZ)(s.xv,{variant:"small",multiline:!1,children:"Use the host 0.0.0.0 to open the port to web traffic."})]})]}),1e4)}})},[t,e,n])}},1904:function(e,t,n){n.d(t,{V:function(){return c},Z:function(){return s}});var r=n(32477),i=n(43429),o=n(54916),a=n(30084),l=n(39756),c=".tutorial";function s(){var e=(0,o.Z)().fs,t=(0,r._)((0,i.useState)({isLoading:!0,isTutorial:!1}),2),n=t[0],s=t[1];return(0,i.useEffect)(function(){e.watchDir(l.Ql,{onChange:function(e){s({isLoading:!1,isTutorial:e.some(function(e){return e.type===a.Tv.Directory&&e.filename===c})})},onMoveOrDelete:function(){s({isLoading:!1,isTutorial:!1})},onError:function(){s({isLoading:!1,isTutorial:!1})}})},[e]),n}},61364:function(e,t,n){n.d(t,{ZP:function(){return R},Ln:function(){return T}});var r=n(34142),i=n(87682),o=n(43429),a=n(90234),l=n(71999),c=n(54916),s=n(48900),u=n(50782),d=n(3042),f=n(47001),h=n(84800),p=n(97474),m=n(33829),v=n(45903),g=n(93295),y=n(23982),b=n(80428),Z=n(77393);function w(){var e=(0,g._)(["\n  query ReplEnvironmentDesktopLoadCurriculum($id: String!) {\n    currentUser {\n      id\n      isTeacher: hasRole(role: TEACHER)\n      ...CrosisContextCurrentUser\n    }\n    repl(id: $id) {\n      ... on Repl {\n        id\n        isProject\n        isProjectFork\n        isModelSolution\n        isModelSolutionFork\n        owner {\n          ... on Team {\n            id\n          }\n          ... on User {\n            id\n          }\n        }\n        language\n        origin {\n          id\n          ...CrosisContextRepl\n          origin {\n            id\n            ...CrosisContextRepl\n          }\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return w=function(){return e},e}var x={},C=(0,y.Ps)(w(),b.D,b.C),_=n(30173),S=n(30084),E=n(33212),k=(0,a.cn)(!1);function T(){return(0,l.Dv)(k)}function R(){var e,t,n,a=(0,u.Z)(),g=(0,c.Z)().fs,y=(e=(0,v._)({},x,{variables:{id:a}}),Z.a(C,e)).data,b=(0,l.b9)(k);o.useEffect(function(){return function(){b(!1)}},[b]);var w=(null==y?void 0:y.repl.__typename)==="Repl"?y.repl:null,T=(null==y?void 0:null===(t=y.currentUser)||void 0===t?void 0:t.__typename)==="CurrentUser"?y.currentUser:null,R=(null==y?void 0:y.repl.__typename)==="Repl"&&y.repl.isModelSolutionFork,D=R?w&&(null===(n=w.origin)||void 0===n?void 0:n.origin):w&&w.origin||null,I=(0,h.b)((null==D?void 0:D.__typename)==="Repl"?{repl:D,currentUser:T||void 0}:null),G=(0,_.S)();o.useEffect(function(){w&&T&&w.isProject&&g.stat(".lesson").then(function(e){e.exists||g.createDir(".lesson")})},[g,T,w]),o.useEffect(function(){if(w&&(w.isProjectFork||R)&&D&&I){var e,t=(0,f.ZP)({onUnrecoverableError:function(e){E.error(e),s.$e(function(t){t.setTag("curriculum-authoring",!0),t.setExtra("originId",D.id),s.Tb(e)})}}),n=(0,m.Z)({container:t});t.connect({context:I,getMinimumRetryDelayMs:G,fetchConnectionMetadata:function(){return(0,d.Z)({url:"/data/repls/".concat(w.id,"/get_repl_origin_guest_connection_metadata")})}});var o=t.onConnectionStateChanged((e=(0,r._)(function(e){var r,a;return(0,i.Jh)(this,function(i){switch(i.label){case 0:if(e!==p.e.CONNECTED)return[3,8];o(),i.label=1;case 1:return i.trys.push([1,6,7,8]),[4,g.copyDirFromRemote(".lesson",".lesson",n)];case 2:if(!((r=i.sent()).error&&r.error!==S.Df.NotFound))return[3,3];return s.$e(function(e){e.setTag("curriculum-authoring",!0),e.setExtra("originId",D.id),s.Tb(Error("Error copying lesson: ".concat(r.error)))}),[3,5];case 3:return[4,g.stat(".lesson/instructions.md")];case 4:i.sent().exists&&b(!0),i.label=5;case 5:return[3,8];case 6:return a=i.sent(),s.$e(function(e){e.setTag("curriculum-authoring",!0),s.Tb(a)}),[3,8];case 7:return t.destroy(),[7];case 8:return[2]}})}),function(t){return e.apply(this,arguments)}));return function(){return t.destroy()}}},[g,I,w,D,R,b])}},21488:function(e,t,n){n.d(t,{T:function(){return y}});var r=n(43429),i=n(43891),o=n(50782),a=n(45903),l=n(93295),c=n(23982),s=n(77393);function u(){var e=(0,l._)(["\n  query ShouldHideFileInWorkspace($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        isProjectFork\n        isModelSolution\n        isModelSolutionFork\n      }\n    }\n  }\n"]);return u=function(){return e},e}var d={},f=(0,c.Ps)(u()),h=n(37685),p=n(23394),m=n(72190),v=n(54916),g=n(58091),y=function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=(0,o.Z)(),l=(0,p.Z)(),c=(0,v.Z)().dotReplit,u=(e=(0,a._)({},d,{variables:{replId:n}}),s.a(f,e)),y=u.data,b=u.loading,Z=(null==y?void 0:y.repl.__typename)==="Repl"&&(y.repl.isProjectFork||y.repl.isModelSolution||y.repl.isModelSolutionFork),w=(0,i.P)(c),x=(0,g.t9)();return r.useCallback(function(e){return!!((Z||b)&&(0,h.TI)(e)||(0,h.MF)(e))||!x&&(t&&(0,h.uC)(e)||(0,m.Ci)(e)||(0,m.cJ)(e)||(0,h.yb)(e,l)||(0,h.lv)(e,w))},[Z,b,l,x,w,t])}},86790:function(e,t,n){n.d(t,{k:function(){return d}});var r=n(94106),i=n(45903),o=n(93295),a=n(23982),l=n(77393);function c(){var e=(0,o._)(["\n  query WorkspaceShowAdmin {\n    currentUser {\n      id\n      isAdmin: hasRole(role: ADMIN)\n    }\n  }\n"]);return c=function(){return e},e}var s={},u=(0,a.Ps)(c());function d(){var e,t,n=(e=(0,i._)({},s,void 0),l.a(u,e)).data,o=(0,r.useRouter)();return(null==n?void 0:null===(t=n.currentUser)||void 0===t?void 0:t.isAdmin)||!!o.query.debug}},92796:function(e,t,n){n.d(t,{B:function(){return D}});var r=n(32477),i=n(52902),o=n(1904),a=n(16278),l=n(31593),c=n(5218),s=n(50199),u=n(50782),d=n(45903),f=n(93295),h=n(23982),p=n(77393);function m(){var e=(0,f._)(["\n  fragment WorkspaceToolPanesRepl on Repl {\n    isProjectFork\n    isModelSolution\n    isProject\n    isProjectFork\n    workspaceCta\n    currentUserPermissions {\n      containerWrite\n      editMultiplayers\n    }\n    hostingDeploymentPermissions {\n      canDeploy\n    }\n    lang {\n      id\n      key\n      engine\n      supportsGit\n      hasLibSearch\n      supportsPackager3\n      hasDAP\n    }\n    config {\n      isServer\n      isVnc\n    }\n  }\n"]);return m=function(){return e},e}function v(){var e=(0,f._)(["\n  query WorkspaceToolPanes($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        ...WorkspaceToolPanesRepl\n      }\n    }\n    currentUser {\n      id\n      isAdmin: hasRole(role: ADMIN)\n      isPrivacyLimitedAccess: hasRole(role: PRIVACY_LIMITED_ACCESS)\n      userPowerUpsByType {\n        __typename\n        ... on UserPowerUpsTypes {\n          ghostwriter {\n            active\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return v=function(){return e},e}var g={},y=(0,h.Ps)(m()),b=(0,h.Ps)(v(),y),Z=n(94106),w=n(25425),x=n(61364),C=n(2038),_=n(75582),S=n(9149),E=n(60442),k=n(81810),T=["shell","git","diff","packager","envEditor","deployments","database","neon","ghostwriterChat","unitTests","submitEduRepl","preferences","docs","multiplayer","adminPanel","sshConfigurator","webview","problems","systemDependencies"],R=["ghostwriterChat","deployments"];function D(){var e,t,n,f,h,m=(h=(null==(f=(t={variables:{replId:(0,u.Z)()}},n=(0,d._)({},g,t),p.a(b,n)).data)?void 0:null===(e=f.repl)||void 0===e?void 0:e.__typename)==="Repl"?null==f?void 0:f.repl:null)?{repl:h,currentUser:(null==f?void 0:f.currentUser)||null}:{repl:null,currentUser:null},v=m.repl,y=m.currentUser,D=(0,Z.useRouter)(),I=(0,C.T3)(),G=(0,C.rv)(),B=(0,w.P5)({controlName:"flag-neon-databases",logFlagToAnalytics:!1}),A=(0,w.P5)({controlName:"flag-postgres-db-god-mode",logFlagToAnalytics:!1}),P=!!((0,w.P5)({controlName:"flag-deployments",logFlagToAnalytics:!1})&&(null==v?void 0:v.hostingDeploymentPermissions.canDeploy)),N=(0,w.P5)({controlName:"flag-repl-auth-sidebar",logFlagToAnalytics:!1}),U=(0,w.P5)({controlName:"flag-nix-modules-tool",logFlagToAnalytics:!1}),L=(0,w.P5)({controlName:"flag-problems-pane",logFlagToAnalytics:!1}),O=(0,w.P5)({controlName:"flag-mb-ai4all",logFlagToAnalytics:!1}),M=(0,w.P5)({controlName:k.wK,logFlagToAnalytics:!1}),X=(0,w.P5)({controlName:"flag-object-storage-pane"}),F=(0,E.cR)(),W=(0,l.Z)().language,H=(0,c.T)(),V=(0,x.Ln)(),z=(0,o.Z)().isTutorial,j=(0,a.I)().some(function(e){return"nix"!==e.id}),q=(0,S.WG)(),Y=(null==y?void 0:y.isAdmin)||!!D.query.debug,$=(0,i.Se)();return(0,s.Z)(function(){var e=I&&(null==v?void 0:v.currentUserPermissions.editMultiplayers),t=(null==y?void 0:null===(b=y.userPowerUpsByType)||void 0===b?void 0:b.__typename)==="UserPowerUpsTypes"&&(null==y?void 0:y.userPowerUpsByType.ghostwriter)&&(null==y?void 0:y.userPowerUpsByType.ghostwriter.active)||O,n=!G||t,i=e?[{type:"multiplayer"}]:[];if(!v||!y)return i;var o=!!v.config.isServer,a=!!v.config.isVnc,l=v.lang.supportsGit,c=v.lang.key.startsWith("html"),s="nix"===v.lang.key,u=v.isProject||v.isProjectFork,d=!u&&null!==W,f=[[{type:"shell"},!0],[{type:"instructions"},V],[{type:"threadInbox"},!0],[{type:"chat"},!0],[{type:"docs",data:{url:null}},!0],[{type:"webview"},o||c],[{type:"vnc"},a],[{type:"runnerOutput"},!c],[{type:"git"},l],[{type:"packager"},!0],[{type:"systemDependencies"},!0],[{type:"envEditor"},!c],[{type:"debugger"},!0],[{type:"tutorial"},z],[{type:"database"},!c],[{type:"neon"},A||s&&B],[{type:"replAuth"},!!(N&&j)],[{type:"autograder"},u],[{type:"unitTests"},d],[{type:"education"},!!H],[{type:"preferences"},!0],[{type:"adminPanel"},Y],[{type:"deployments"},P],[{type:"sshConfigurator"},!0],[{type:"ghostwriterChat"},n],[{type:"searchReplace"},!0],[{type:"extensionStore",data:{page:"store"}},!0],[{type:"modules"},U],[{type:"extensionDevtools"},F],[{type:"problems"},L],[{type:"networking"},M],[{type:"objectStorage"},X]];if(I){var h=v.workspaceCta===_.Sy.Submit||v.workspaceCta===_.Sy.Resubmit;f.push([{type:"submitEduRepl"},h])}var p=!0,m=!1,g=void 0;try{for(var b,Z,w=q[Symbol.iterator]();!(p=(Z=w.next()).done);p=!0){var x=Z.value;f.push([{type:"extension",data:{extensionId:x.extension.extensionId,installationId:x.extension.installationId,name:x.name||x.extension.manifest.name,icon:x.icon||x.extension.manifest.icon,baseUrl:x.extension.baseUrl,path:x.handler}},!0])}}catch(e){m=!0,g=e}finally{try{p||null==w.return||w.return()}finally{if(m)throw g}}var C=!0,S=!1,E=void 0;try{for(var k,D=f[Symbol.iterator]();!(C=(k=D.next()).done);C=!0){var J=(0,r._)(k.value,2),K=J[0];J[1]&&(!I||T.includes(K.type))&&i.push(K)}}catch(e){S=!0,E=e}finally{try{C||null==D.return||D.return()}finally{if(S)throw E}}return i.map(function(e){return{title:$.getTitle(e),pane:e}}).sort(function(e,t){return R.includes(e.pane.type)?-1:R.includes(t.pane.type)?1:e.title.localeCompare(t.title)}).map(function(e){return e.pane})},[I,v,y,N,j,W,A,B,V,z,H,Y,P,U,F,L,q,$,O,G,M,X])}},72875:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(47507),i=n(43429);function o(){(0,i.useEffect)(function(){var e=null;return!function t(){if(window.performance.memory){var n=window.performance.memory,i=n.jsHeapSizeLimit,o=n.totalJSHeapSize,a=n.usedJSHeapSize,l=window.performance.now();r.kg.info("perf:browser_memory",{jsHeapSizeLimit:i,totalJSHeapSize:o,usedJSHeapSize:a,timeElapsed:l}),e=setTimeout(t,-(3e5*Math.log(Math.random())))}}(),function(){e&&clearTimeout(e)}},[])}},87716:function(e,t,n){n.d(t,{L:function(){return c}});var r=n(45903),i=n(50782),o=n(43429),a=n(84707),l=n(87584);function c(){var e=(0,i.Z)(),t=(0,l.Z)("fileTree").trackTimeToLoadFileStart;return o.useCallback(function(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t(n);var o={action:"select",source:"filetree"};i.newTab?o={action:"newTab",source:"filetree"}:i.newPane&&(o={action:"newPane",source:"filetree"}),(0,a.Z)((0,r._)({replId:e},o))},[e,t])}},28470:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(43429),i=n(54916),o=n(59868),a=n(50782),l=n(25632),c=new Set([3e3,3001,3002,3003,3306,4e3,4200,5e3,5432,5173,6e3,6800,7e3,7001,8e3,8008,8080,8081,8888,9e3,9001,1e4,25565,25577,8887,27017,27018]);function s(){var e=(0,i.Z)().container,t=(0,l.Gn)("webviewAutoOpenOnPortOpened").preferences.webviewAutoOpenOnPortOpened,n=(0,a.Z)();(0,r.useEffect)(function(){return e.onPortOpened(function(e){var r=e.port,i=e.address,a=e.isForwarded,l=e.isVnc,s=e.externalPort;if(a){(0,o.j)(o.U3.WS_PORT_OPENED,{type:l?"vnc":"webview",replId:n,port:r,externalPort:s,address:i,webviewAutoOpenOnPortOpened:t});return}(0,o.j)(o.U3.WS_UNFORWARDED_PORT_OPENED,{port:r,isCommon:c.has(r),address:i,type:l?"vnc":"webview",replId:n,externalPort:s})})},[e,n,t])}},93702:function(e,t,n){n.d(t,{Z:function(){return h}});var r=n(47507),i=n(50782),o=n(43429),a=n(54916),l=n(95577),c=n(34523),s=n(59808),u=n(58130),d=n(25425),f=new Set;function h(e){var t=e.workspaceType,n=(0,i.Z)(),h=(0,a.Z)(),p=h.dotReplit,m=h.container,v=(0,d.P5)({controlName:"flag-channel-request-priority",logFlagToAnalytics:!1});(0,o.useEffect)(function(){if(!f.has(n)){f.add(n);var e=p.watch(function(n){if(!n.error||n.error!==s.Yt.Disconnected){try{var i=m.getConnectionMetadata();if(!i||!i.token)throw Error("Expected token in measure call.");!function(e){var t=e.workspaceType,n=e.parsedToken,i=e.flagChannelRequestPriority,o=!!window.performance.getEntriesByName(c.Iy.pageNavStart,"mark").length,a={ssr:!o,workspaceType:t,tokenCluster:n.cluster,flagChannelRequestPriority:i},s="time to code";window.performance.measure(s,o?c.Iy.pageNavStart:void 0);var u=window.performance.getEntriesByName(s,"measure")[0];if(!u){r.kg.info("Could not obtain measure for time to code",a);return}var d="page invisible fetch connection metadata",f=u.duration;window.performance.getEntriesByName(c.Iy.fetchConnectionMetadataPageInvisibleStart,"mark").length&&(window.performance.measure(d,c.Iy.fetchConnectionMetadataPageInvisibleStart,c.Iy.fetchConnectionMetadataPageInvisibleEnd),f-=window.performance.getEntriesByName(d,"measure")[0].duration,window.performance.clearMeasures(d),window.performance.clearMarks(c.Iy.fetchConnectionMetadataPageInvisibleStart),window.performance.clearMarks(c.Iy.fetchConnectionMetadataPageInvisibleEnd)),r.kg.time("time to code minus page invisible",f,a),r.kg.time("time to code with page invisible",u.duration,a),window.performance.clearMeasures(s),l.v.addTiming("time_to_code_minus_page_invisible",f),l.v.addTiming("time_to_code_with_page_invisible",u.duration)}({workspaceType:t,parsedToken:(0,u.he)(i.token),flagChannelRequestPriority:v})}catch(e){r.kg.info("Could not measure time to code",{workspaceType:t,e:e,dotReplitResult:n.error?n.error:"success"})}e()}});return e}},[n,t,p,m,v])}},87584:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(19659),i=n(47507),o=n(41792),a=new Map,l=function(e,t){if((0,r.Mb)(e)){var n=window.performance.now();a.set(e,{start:n,source:t})}},c=function(e){var t=a.get(e);if(void 0!==t){var n=t.start,r=t.source,l=window.performance.now(),c=(0,o.V)(e);i.kg.time("time to load file",l-n,{from:r,fileViewerType:c}),a.delete(e)}};function s(e){return{trackTimeToLoadFileStart:function(t){return l(t,e)},trackTimeToLoadFileEnd:c}}},75722:function(e,t,n){n.d(t,{_:function(){return y},O:function(){return g}});var r=n(34142),i=n(32477),o=n(87682),a=n(27308),l=n(45903),c=n(93295),s=n(23982),u=n(72986);function d(){var e=(0,c._)(["\n  mutation SetUserKeybindings($input: SetUserKeybindingsInput!) {\n    setUserKeybindings(input: $input) {\n      ... on Keybindings {\n        keybindings\n      }\n    }\n  }\n"]);return d=function(){return e},e}var f={},h=(0,s.Ps)(d()),p=n(50199),m=n(5805),v=n(47502);function g(){var e,t=(0,v.O)(),n=(0,i._)((e=(0,l._)({},f,void 0),u.D(h,e)),1)[0];return(0,p.Z)(function(){var e;return e=(0,r._)(function(e){var r,a,l,c,s,u,d,f,h;return(0,o.Jh)(this,function(o){switch(o.label){case 0:r=[],a=!0,l=!1,c=void 0;try{for(s=e[Symbol.iterator]();!(a=(u=s.next()).done);a=!0)f=(d=(0,i._)(u.value,2))[0],h=d[1],r.push({commandId:f,keyCombo:h})}catch(e){l=!0,c=e}finally{try{a||null==s.return||s.return()}finally{if(l)throw c}}return[4,n({variables:{input:{environment:t,platform:(0,m.X)(),keybindings:r}}})];case 1:return o.sent(),[2]}})}),function(t){return e.apply(this,arguments)}},[t,n])}function y(e){var t=new Map;if(!Array.isArray(e))return t;var n=!0,r=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){var c=o.value,s=function(e){if(e&&"object"==typeof e&&"commandId"in e&&"string"==typeof e.commandId&&"keyCombo"in e){if(Array.isArray(e.keyCombo)){var t=(0,a.uv)(e.keyCombo);return{commandId:e.commandId,keyCombo:t}}if("string"==typeof e.keyCombo){var n=(0,a.gD)(e.keyCombo);return{commandId:e.commandId,keyCombo:n}}return{commandId:e.commandId,keyCombo:null}}}(c);s&&t.set(s.commandId,s.keyCombo)}}catch(e){r=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw i}}return t}},5805:function(e,t,n){n.d(t,{X:function(){return o}});var r=n(21557),i=n(34396);function o(){return r.V5||r.gn?i.K5.Mac:r.ED?i.K5.Windows:i.K5.Linux}},46866:function(e,t,n){n.d(t,{R:function(){return s}});var r=n(34142),i=n(87682),o=n(65490),a=n(93295);function l(){var e=(0,a._)(["\n  query FiletreeDownloadZip($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        url\n      }\n    }\n  }\n"]);return l=function(){return e},e}var c=(0,n(23982).Ps)(l());function s(e){return u.apply(this,arguments)}function u(){return(u=(0,r._)(function(e){var t,n,r;return(0,i.Jh)(this,function(i){switch(i.label){case 0:return[4,null===o.l||void 0===o.l?void 0:o.l.query({query:c,variables:{replId:e}})];case 1:return r=(null==(n=i.sent())?void 0:null===(t=n.data)||void 0===t?void 0:t.repl.__typename)==="Repl"?n.data.repl.url:window.location.pathname,window.open(r+".zip","_blank"),[2]}})})).apply(this,arguments)}},31232:function(e,t,n){n.d(t,{mn:function(){return u}});var r=n(32477),i=n(21289),o=n(30084),a=n(19659),l=["json","md","draw","txt"],c=[".gitignore",".replit"];function s(e,t){var n=new Map,o=!0,l=!1,c=void 0;try{for(var s,u=e[Symbol.iterator]();!(o=(s=u.next()).done);o=!0){var d,f=s.value,h=(0,a.r6)(f);if(h&&(!t||h.startsWith(t))){var p=null!==(d=n.get(h))&&void 0!==d?d:0;n.set(h,p+1)}}}catch(e){l=!0,c=e}finally{try{o||null==u.return||u.return()}finally{if(l)throw c}}return(0,i._)(n.entries()).sort(function(e,t){var n=(0,r._)(e,2)[1];return(0,r._)(t,2)[1]-n}).map(function(e){return(0,r._)(e,1)[0]})}function u(e,t){if(e.fileType===o.Tv.Directory||!e.input)return[];if("."===e.input)return c.map(function(e){return{value:e,highlight:[{from:1,to:e.length}]}});if(e.input.startsWith("."))return c.filter(function(t){return t.startsWith(e.input)}).map(function(t){return{value:t,highlight:[{from:t.length-e.input.length,to:t.length}]}});var n=(0,a.r6)(e.input),r=s(e.siblings.map(function(e){return e.filename}),n);if(r.length<3&&r.push.apply(r,(0,i._)(s(t(),n))),r.length<3){var u=n?l.filter(function(e){return e.startsWith(n)}):l;r.push.apply(r,(0,i._)(u))}return(0,i._)(new Set(r)).slice(0,3).map(function(t){var r=e.input;r.endsWith(".")?r=r.slice(0,-1):n&&(r=r.slice(0,-(n.length+1)));var i=r+"."+t;return{value:i,highlight:[{from:e.input.length,to:i.length}]}})}},23090:function(e,t,n){n.d(t,{B:function(){return o}});var r=n(30084),i=function(e){if(1===e.length)return e[0].type===r.Tv.File?"file":"folder";if(e.length>1){var t=e.filter(function(e){return e.type===r.Tv.File}).length,n=e.filter(function(e){return e.type===r.Tv.Directory}).length,i=t>1?"files":"file",o=n>1?"folders":"folder",a="file";return t>0&&n>0?a="".concat(i," and ").concat(o):t>0?a="".concat(i):n>0&&(a="".concat(o)),"".concat(a)}return""};function o(e){var t=i(e),n=1===e.length?t:"".concat(e.length," ").concat(t),r=e.slice(0,5).map(function(e){return e.path}).join(", ");return{name:n,description:e.length>5?"".concat(r," and ").concat(e.length-5," more ").concat(i(e.slice(5))):r,confirmDescription:n}}},71042:function(e,t,n){n.d(t,{r:function(){return r}});function r(e,t){return new Promise(function(n){var r=e.openChannel({service:"gcsfiles"},function(e){return e.channel.request({persistMirror:{path:t}}).then(function(e){e.ok,r(),n()}),function(e){e.willReconnect&&r()}})})}},19924:function(e,t,n){n.d(t,{e:function(){return _},Z:function(){return C}});var r=n(45903),i=n(32477),o=n(30911),a=n.n(o),l=n(52527),c=n(42371),s=n(70322),u=n(48900),d="exit status 1",f=n(69451),h=n.n(f),p=n(34142),m=n(21289),v=n(87682),g=n(14131);function y(){return(y=(0,p._)(function(e){var t,n,r,i,o,a,f;return(0,v.Jh)(this,function(h){switch(h.label){case 0:if(n=e.container,0===(r=(0,s._)(e,["container"])).query.trim().length)return[2,b(l.f.EMPTY_QUERY)];if(n.getConnectionState()===g.em.DISCONNECTED)return[2,b(l.f.CONTAINER_DISCONNECTED)];if(n.getConnectionState()===g.em.CONNECTING)return[2,b(l.f.CONTAINER_CONNECTING)];return[4,(t=n).exec.apply(t,(0,m._)((0,c.PR)(r)))];case 1:if(o=(i=h.sent()).output,a=i.error)switch(a){case d:return[2,b(l.f.EMPTY_RESULTS)];case"signal: broken pipe":return[2,b(l.f.PARTIAL_RESULTS)];case"Channel closed":return[2,b(l.f.CHANNEL_CLOSED)];default:return u.Tb(Error("Ripgrep search command failed with error: ".concat(a))),[2,{error:a,data:null}]}if(!(null==o?void 0:o.trim())||!(f=(0,c.Tq)()(o))||0===f.filesMap.size)return[2,b(l.f.EMPTY_RESULTS)];return[2,b(f.error,f.filesMap)]}})})).apply(this,arguments)}function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{error:e,data:t}}var Z=n(1660),w=n(47507),x="File Search Used";function C(e){var t=e.container,n=e.onError,i=e.onUpdate,o=e.onLoadingStateChange,f=e.isStreaming,p=e.trackLatency,m=void 0!==p&&p,v=(0,Z.Z)({container:t}),g=[],y=a()(),b=Date.now(),C=function(e){i(g=e)};return h()(function(e){var t=a()();y=t,b=Date.now(),n(null),o(!0);var i=!0;if(""===e.query){C([]),o(!1);return}!function(e){var t=e.execer,n=e.onComplete,r=e.onError,i=e.onParse,o=(0,s._)(e,["execer","onComplete","onError","onParse"]);if(0===o.query.length){n("abort");return}var a=new TextEncoder,f=(0,c.Tq)(),h=0,p=0,m=function(){},v=function(e){r(e),n("error")},g=function(e){if(0===h&&"finished"===e){v(l.f.EMPTY_RESULTS);return}"finished"===e?n(e,{bytes:p}):n(e),m()},y=t.onOutput(function(e){var t=a.encode(e).length;p+=t;var n=f(e);if(n){var r=n.error,o=n.filesMap,l=n.filesMapChanges;r&&v(r),h=o.size,l.forEach(function(e){var t=o.get(e);t&&o.set(e,(0,c.Vd)(t))}),i(o,l)}}),b=t.onStderr(function(e){if(e.trim()===d)return v(l.f.EMPTY_RESULTS);v(l.f.INVALID_COMMAND)});m=function(){y(),b()};var Z=(0,c.PR)(o);t.request({args:Z}).then(function(e){if(e.error)return e.error.trim()===d?v(l.f.EMPTY_RESULTS):v(l.f.INVALID_COMMAND);g("finished")}).catch(function(e){return u.Tb(Error("Ripgrep search command failed with error: ".concat(e))),v(l.f.INVALID_COMMAND)})}((0,r._)({execer:v,onComplete:function(r,i){if(y===t){o(!1);var a,s,u,d,f="finished"===r&&i&&i.bytes===c.Ak;f&&n(l.f.PARTIAL_RESULTS),m&&w.kg.time("".concat(x," - complete"),Date.now()-b,{query:e.query,isRegex:e.isRegex,isCaseSensitive:e.isCaseSensitive,hasIncludes:(null!==(u=null==e?void 0:null===(a=e.includeGlobs)||void 0===a?void 0:a.length)&&void 0!==u?u:0)>0,hasExcludes:(null!==(d=null==e?void 0:null===(s=e.excludeGlobs)||void 0===s?void 0:s.length)&&void 0!==d?d:0)>0,latency:Date.now()-b,isPartialResults:f})}},onError:function(e){y===t&&n(e)},onParse:function(n,r){if(y===t){if(i){if(m){var a,l,s,u;w.kg.time("".concat(x," - first_chunk"),Date.now()-b,{query:e.query,isRegex:e.isRegex,isCaseSensitive:e.isCaseSensitive,hasIncludes:(null!==(s=null==e?void 0:null===(a=e.includeGlobs)||void 0===a?void 0:a.length)&&void 0!==s?s:0)>0,hasExcludes:(null!==(u=null==e?void 0:null===(l=e.excludeGlobs)||void 0===l?void 0:l.length)&&void 0!==u?u:0)>0})}C((0,c.Md)([],n,r)),i=!1}else C((0,c.Md)(g,n,r));f&&o(!1)}},mode:"json",context:0},e))},200)}function _(e){var t=e.container,n=h()(function(e,n,o){(function(e){return y.apply(this,arguments)})((0,r._)({container:t,mode:"json",context:1,isCaseSensitive:!1},e)).then(function(e){var t=e.data?function(e){var t={},n=!0,r=!1,o=void 0;try{for(var a,l=e.entries()[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var c=(0,i._)(a.value,2),s=c[0],u=c[1];t[s]=u.lines.map(function(e){return{content:e.content,lineNumber:e.lineNumber,matches:e.matches.map(function(e){return{column:e.start,length:e.length}})}}).filter(function(e){return e.matches.length>0})}}catch(e){r=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw o}}return t}(e.data):{},r=e.error===l.f.PARTIAL_RESULTS;if(r);else if(e.error)return n({error:e.error,results:null,isPartialResult:r});return n({error:null,results:t,isPartialResult:r})}).catch(o)},200);return function(e){return new Promise(function(t,r){return n(e,t,r)})}}},12763:function(e,t,n){n.d(t,{Eu:function(){return d},m6:function(){return l}});var r,i,o,a=n(21289);function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[],r=function(e){return e.forEach(function(e){return e&&n.push("-g",e)})},i=[],o=[],l=!0,u=!1,f=void 0;try{for(var h,p=e[Symbol.iterator]();!(l=(h=p.next()).done);l=!0){var m=h.value,v=s(m);v.startsWith("**")?i.push(v):o.push(v)}}catch(e){u=!0,f=e}finally{try{l||null==p.return||p.return()}finally{if(u)throw f}}return o.length>0&&(r(["!*"]),new Set(o).forEach(function(e){r((function(e){var t=function(e){Array.isArray(r[e])||(r[e]=[]);var t,i=n[e],o=i.startsWith("{")&&i.endsWith("}")?d(i.substring(1,i.length-1),","):[i];(t=r[e]).push.apply(t,(0,a._)(o.map(function(t){var n=r[e-1];return n&&n.length>0?n.map(function(e){return"".concat(e,"/").concat(t)}):t}).flat(2)))},n=d(e,"/").filter(function(e){return e.length>0});"**"!==n[n.length-1]&&n.push("**");for(var r={},i=0;i<n.length;i++)t(i);return Object.values(r).flat(2)})(e).map(c))})),r(i),r(t.map(function(e){return"!".concat(c(s(e)))})),n}function c(e){return e.startsWith("**")||e.startsWith("/")?e:"/".concat(e)}function s(e){return e.replaceAll(/\*/g,function(e,t,n){return t>0&&("*"===n[t-1]||"\\"===n[t-1])||t<n.length-1&&"*"===n[t+1]?e:"**"})}var u=(r={},i={},(o=function(e,t){r[e]=t,i[t]=e})("{","}"),o("(",")"),o("[","]"),{hasKey:function(e){return e in r},getKey:function(e){return r[e]},hasValue:function(e){return e in i},getValue:function(e){return i[e]}});function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",";if(0===e.length)return[];var n=[],r=[],i="",o=!0,a=!1,l=void 0;try{for(var c,s=e[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var d=c.value;if(d===t){if(0===r.length){n.push(i),i="";continue}}else if(u.hasKey(d))r.push(d);else if(u.hasValue(d)&&r.pop()!==u.getValue(d))return[e];i+=d}}catch(e){a=!0,l=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}return 0!==r.length?[e]:(i.length>0&&n.push(i),n)}},42371:function(e,t,n){n.d(t,{Ak:function(){return d},Tq:function(){return f},PR:function(){return v},Vd:function(){return p},Md:function(){return m}});var r=n(45903),i=n(25e3),o=n(21289);function a(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.map(function(e){return e.match(/["\s]/)&&!e.match(/'/)?"'".concat(e.replace(/(['\\])/g,"\\$1"),"'"):e.match(/["'\s]/)?'"'.concat(e.replace(/(["\\$`!])/g,"\\$1"),'"'):e.replace(/[#!"$&'()*,:;<=>?@[\\\]^`{|}]/g,"\\$&")}).join(" ")}var l=n(12763),c=n(52527),s=n(47507),u=n(88422).lW,d=524288;function f(){var e="",t=new Map;return function(n){var o=new Set,a=!1;if(n.trim().startsWith("error"))return{error:c.f.INVALID_COMMAND,filesMap:t,filesMapChanges:o};var l=n.indexOf("\n"),u=0,d=e+n;if(l>=0)l+=e.length;else{e=d;return}for(;l>=0;){var f=d.substring(u,l).trim();if(0!==f.length){var p=function(e){try{return JSON.parse(e)}catch(e){return null}}(f);p&&!function(e,t,n){switch(e.type){case"begin":var o=h(e.data.path);if(!o)return!1;t.set(o,{path:o,lines:[],dedentBy:0}),n.add(o);break;case"end":break;case"match":case"context":var a=h(e.data.path);if(!a)return!1;n.add(a);var l=t.get(a);if(!l)return!1;var c=function(e,t){var n,o,a=h(e.data.lines);if(!a)return null;var l=a.trimEnd().split(/\r?\n/),c=[];(null===(n=l[0])||void 0===n?void 0:n.trim())===""&&l.shift(),(null===(o=l[l.length-1])||void 0===o?void 0:o.trim())===""&&l.pop();var s=0,u=0,d=e.data.submatches;return l.forEach(function(t,n){var r=e.data.line_number+n,i=u;u+=t.length+1;for(var o=[];s<d.length;){var a=d[s];if(a.start>=u)break;var l=a.start-i,f=void 0;if(f=a.end<u?a.end-a.start:a.end===u?a.end-a.start-1:t.length-l,l<t.length&&o.push({start:l,length:f}),a.end>u){a.start=u;break}s++}c.push({lineNumber:r,content:t,matches:o})}),(0,i._)((0,r._)({},t),{lines:t.lines.concat(c)})}(e,l);c&&t.set(a,c);break;case"error":return s.kg.error("Invalid Search Line",{line:JSON.stringify(e)}),!1}return!0}(p,t,o)&&(a=!0)}u=l+1,l=d.indexOf("\n",u)}return e=d.substring(u),{error:a?c.f.INVALID_LINE:null,filesMap:t,filesMapChanges:o}}}function h(e){return e?"bytes"in e?u.from(e.bytes,"base64").toString():e.text:null}function p(e){var t,n=e.lines.length>0?(t=Math).min.apply(t,(0,o._)(e.lines.map(function(e){return e.content.match(/^[\t ]+/)}).flat().map(function(e){return(null==e?void 0:e.length)||0}))):0;return(0,i._)((0,r._)({},e),{dedentBy:n})}function m(e,t,n){for(var r=(0,o._)(e),i=new Set,a=0;a<r.length;a++){var l=r[a].path,c=t.get(l);n.has(l)&&c&&(r[a]=c,i.add(l))}var s=!0,u=!1,d=void 0;try{for(var f,h=n[Symbol.iterator]();!(s=(f=h.next()).done);s=!0){var p=f.value,m=t.get(p);!i.has(p)&&m&&r.push(m)}}catch(e){u=!0,d=e}finally{try{s||null==h.return||h.return()}finally{if(u)throw d}}return r}function v(e){var t=e.mode,n=e.query,r=e.context,i=e.isRegex,c=e.isCaseSensitive,s=e.isMatchingWholeWords,u=e.includeGlobs,f=e.excludeGlobs,h=["rg"];switch(t){case"json":h.push("--json");break;case"files":h.push("--files-with-matches")}return null!==r&&h.push("--context","".concat(r)),n.includes("\n")&&h.push("--multiline"),i||h.push("--fixed-strings"),h.push("--max-count","100"),h.push("--max-filesize","4M"),h.push("--max-depth","24"),h.push("--max-columns","512"),h.push("--max-columns-preview"),h.push(c?"--case-sensitive":"--ignore-case"),s&&h.push("--word-regexp"),h.push.apply(h,(0,o._)((0,l.m6)(u,f))),h.push("--",n),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d;return["sh","-c","".concat(a.apply(void 0,(0,o._)(e))," | head -c ").concat(t)]}(h)}},52527:function(e,t,n){var r,i;n.d(t,{f:function(){return r}}),(i=r||(r={})).PARTIAL_RESULTS="Displaying partial results, try being more specific with your search.",i.EMPTY_RESULTS="Nothing came up searching your Repl's content.",i.EMPTY_QUERY="No search query was provided.",i.INVALID_LINE="We encountered an invalid line while parsing your search results.",i.INVALID_COMMAND="Ripgrep returned an invalid response.",i.CONTAINER_DISCONNECTED="Disconnected from the container.",i.CONTAINER_CONNECTING="Connecting to the container.",i.CHANNEL_CLOSED="Channel was closed."},84707:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(59868);function i(e){(0,r.j)(r.U3.FILETREE_USED,e)}},66959:function(e,t,n){n.d(t,{YI:function(){return P},kW:function(){return A}});var r,i,o=n(45903),a=n(25e3),l=n(8182),c=n(94450),s=n.n(c);n(43429);var u=n(63461);(r=i||(i={})).TEXT="TEXT",r.MENTION="MENTION",r.LINK="LINK",r.REPL_LINK="REPL_LINK",r.DEEP_LINK="DEEP_LINK",r.CODE="CODE",r.BOLD="BOLD",r.ITALICS="ITALICS",r.STRIKETHROUGH="STRIKETHROUGH",r.QUOTE="QUOTE";var d=function(e){var t=e.fragment,n=e.onClick;return(0,l.tZ)(u.Z,{size:"small",onClick:n,children:t.content})},f=function(e){var t=e.fragment,n=e.onClick;return(0,l.tZ)(u.Z,{size:"small",fontWeight:"medium",onClick:n,children:t.content})},h=function(e){var t=e.fragment,n=e.onClick;return(0,l.tZ)("a",{href:t.url,onClick:n,rel:"noreferrer noopener nofollow",target:"_blank",children:t.content})},p=function(e){var t=e.fragment,n=e.onClick;return(0,l.tZ)("a",{href:t.url,onClick:n,target:"_blank",children:t.content})},m=function(e){var t=e.fragment,n=e.onClick;return(0,l.tZ)("a",{href:t.url,onClick:n,children:t.content})},v=function(e){var t=e.fragment,n=e.onClick,r=e.style;return(0,l.tZ)("code",{onClick:n,style:r,children:t.content})},g=function(e){var t=e.fragment,n=e.onClick;return(0,l.tZ)("b",{onClick:n,children:t.content})},y=function(e){var t=e.fragment,n=e.onClick;return(0,l.tZ)("i",{onClick:n,children:t.content})},b=function(e){var t=e.fragment,n=e.onClick;return(0,l.BX)("span",{onClick:n,className:"jsx-e2f6e2707e7599fa",children:[t.content,(0,l.tZ)(s(),{id:"e2f6e2707e7599fa",children:"span.jsx-e2f6e2707e7599fa{text-decoration:line-through}"})]})},Z=function(e){var t=e.fragment,n=e.onClick;return(0,l.BX)("blockquote",{onClick:n,className:"jsx-8741a91fadaf26be",children:[t.content,(0,l.tZ)(s(),{id:"8741a91fadaf26be",children:"blockquote.jsx-8741a91fadaf26be{border-left:2px solid var(--foreground-dimmest);padding-left:6px;color:var(--foreground-dimmest)}"})]})},w=/(@[0-9a-zA-Z_]+)/,x=/(#[-a-zA-Z0-9@:%._+~#=/]+)/,C=/(https?:\/\/[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{2,6}\b(?:[-a-zA-Z0-9()@:%_+.~#?&//=]*))/,_=/(`.+?`)/,S=/(\*\*.+?\*\*)/,E=/(_.+?_)/,k=/(\*.+?\*)/,T=/(~~.+?~~)/,R=/(^>.+?$\n?)/m,D=/\/@([0-9a-zA-Z_]+)\/(.+)/;function I(e){var t=e.url;return{type:"LINK",url:t,content:t}}function G(e){var t=e.hash;return{type:"DEEP_LINK",url:t,content:t}}var B=RegExp([_.source,S.source,E.source,k.source,T.source,C.source,w.source,x.source,R.source].join("|"),"m");function A(e,t){var n=e.split(B),r=[],i=[],o=!0,a=!1,l=void 0;try{for(var c,s=n[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var u=c.value;if(u){var d=function(e,t){if(C.test(e)){var n={};try{n=new window.URL(e)}catch(t){return{content:e,type:"TEXT"}}return["repl.it","replit.com","firewalledreplit.com",document.location.host].includes(n.host)?n.pathname===t.replUrl?G({hash:n.hash}):D.test(n.pathname)?function(e){var t=e.url,n=D.exec(t.pathname);if(!n)throw Error("Not a Repl URL");return{type:"REPL_LINK",url:t.href,content:"@".concat(n[1],"/").concat(n[2]).concat(t.hash)}}({url:n}):I({url:e}):I({url:e})}if(x.test(e))return G({hash:e});if(R.test(e))return{type:"QUOTE",content:({text:e.slice(1).trim()}).text};if(_.test(e))return{type:"CODE",content:({code:e.slice(1,-1)}).code};if(S.test(e))return{type:"BOLD",content:({text:e.slice(2,-2)}).text};if(E.test(e)||k.test(e))return{type:"ITALICS",content:({text:e.slice(1,-1)}).text};if(T.test(e))return{type:"STRIKETHROUGH",content:({text:e.slice(2,-2)}).text};if(w.test(e)){var r=e.slice(1);if(!t.users||t.users.includes(r))return{type:"MENTION",username:r,content:"@".concat(r)}}return{content:e,type:"TEXT"}}(u,t);if(d){if("MENTION"===d.type){if(!d.username)continue;r.push(d.username)}i.push(d)}}}}catch(e){a=!0,l=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}return{tokens:i,mentions:r}}function P(e){var t=e.message,n=e.onMentionClick,r=void 0===n?function(){}:n,i=e.codeStyles,c=void 0===i?{}:i;return(0,l.tZ)(l.HY,{children:t.tokens.map(function(e,t){var n={fragment:e,key:t};return"MENTION"===e.type?(0,l.tZ)(f,(0,a._)((0,o._)({},n),{onClick:function(){return r(e)}})):"LINK"===e.type?(0,l.tZ)(h,(0,o._)({},n)):"REPL_LINK"===e.type?(0,l.tZ)(p,(0,o._)({},n)):"DEEP_LINK"===e.type?(0,l.tZ)(m,(0,o._)({},n)):"CODE"===e.type?(0,l.tZ)(v,(0,a._)((0,o._)({},n),{style:c})):"BOLD"===e.type?(0,l.tZ)(g,(0,o._)({},n)):"ITALICS"===e.type?(0,l.tZ)(y,(0,o._)({},n)):"STRIKETHROUGH"===e.type?(0,l.tZ)(b,(0,o._)({},n)):"QUOTE"===e.type?(0,l.tZ)(Z,(0,o._)({},n)):(0,l.tZ)(d,(0,o._)({},n))})})}},7409:function(e,t,n){n.d(t,{D:function(){return c6}});var r,i,o,a,l,c,s,u,d,f,h,p,m,v,g,y=n(45903),b=n(25e3),Z=n(32477),w=n(21289),x=n(8182),C=n(2038),_=n(57468),S=n(36577),E=n(98859),k=n(33914),T=n(3844),R=n(94106),D=n.n(R),I=n(90234),G=n(94450),B=n.n(G),A=n(43429),P=n(64457),N=n(56596),U=n(29287),L=n(39179),O=n(86262),M=n(89061),X=n(69451),F=n.n(X),W=n(21557),H=n(3574),V=n(62340),z=function(e){var t=e.buttons,n=e.onClick,r=e.onUndo,i=e.onRedo;return(0,x.BX)("nav",{className:"jsx-43582faf24448cbd",children:[t.map(function(e){return(0,x.tZ)("button",{onClick:function(t){t.stopPropagation(),t.preventDefault(),n(e)},className:"jsx-43582faf24448cbd",children:void 0!==e.label?e.label:e.value},e.value)}),(0,x.tZ)("button",{onClick:function(e){e.stopPropagation(),e.preventDefault(),r()},className:"jsx-43582faf24448cbd",children:(0,x.tZ)(L.Z,{})}),(0,x.tZ)("button",{onClick:function(e){e.stopPropagation(),e.preventDefault(),i()},className:"jsx-43582faf24448cbd",children:(0,x.tZ)(O.Z,{})}),(0,x.tZ)(B(),{id:"43582faf24448cbd",children:'nav.jsx-43582faf24448cbd{font-family:Monaco,Menlo,"Ubuntu Mono",Consolas,source-code-pro,monospace;height:48px;background-color:var(--background-root);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:stretch;-webkit-align-items:stretch;-moz-box-align:stretch;-ms-flex-align:stretch;align-items:stretch}button.jsx-43582faf24448cbd{color:var(--foreground-default);padding:10px;font-family:inherit;font-size:16px;background-color:transparent;border:0 none;-webkit-box-flex:1;-webkit-flex:1 1 auto;-moz-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto}'})]})},j=[{value:"{}",cursorOffset:1},{value:"()",cursorOffset:1},{value:'""',cursorOffset:1}],q=function(e){var t=e.path,n=(0,w._)(j).concat([{value:"= ",cursorOffset:2}]);return t.endsWith(".html")&&(n.unshift({value:"<>",cursorOffset:1}),n.unshift({label:"div",value:"<div></div>",cursorOffset:5})),n},Y="visualViewport"in window;function $(e){var t=e.filePath,n=e.isLoading,r=(0,H.uN)(),i=(0,V.d)({tablet:!1}),o=(0,P.Z)();A.useEffect(function(){o&&r&&r.requestMeasure({read:function(){return{cursor:r.coordsAtPos(r.state.selection.main.head),scroller:r.scrollDOM.getBoundingClientRect()}},write:function(e){var t=e.cursor,n=e.scroller;if(t){var i=(t.top+t.bottom)/2,o=(n.top+n.bottom)/2;Math.abs(i-o)>5&&(r.scrollDOM.scrollTop+=i-o+(W.gn?50:0))}}})},[o,r]);var a=(0,Z._)(A.useState(0),2),l=a[0],c=a[1];if(A.useEffect(function(){if(W.gn){var e=window.visualViewport;if(Y&&e){var t=F()(function(){c(window.innerHeight-e.height-e.offsetTop)},100);return e.addEventListener("scroll",t),e.addEventListener("resize",t),function(){e.removeEventListener("scroll",t),e.removeEventListener("resize",t)}}}},[]),!o||n||!i)return null;var s=(0,x.tZ)(z,{onUndo:function(){r&&((0,M.Yw)(r),r.focus())},onRedo:function(){r&&((0,M.KX)(r),r.focus())},onClick:function(e){if(r){var t,n=null!==(t=r.state.selection.ranges[0].from)&&void 0!==t?t:0;r.dispatch({changes:{from:n,insert:e.value},selection:{anchor:n+e.cursorOffset}}),r.focus()}},buttons:q({path:t})});return!W.gn||Y?(0,x.tZ)(N.G,{css:[U.l0.position.fixed,U.l0.width("100%"),U.l0.zIndex(100),U.l0.bottom(l),U.l0.left(0)],children:s}):s}var J=n(24549),K=n(96606),Q=[{img:"/public/images/kaboomdraw/rect.png",code:"\ndrawRect({\n	pos: vec2(80, 80),\n	width: 120,\n	height: 80,\n	color: rgb(250, 242, 164),\n})\n    ".trim()},{img:"/public/images/kaboomdraw/triangle.png",code:"\ndrawTriangle({\n	pos: vec2(100, 100),\n	p1: vec2(0, -48),\n	p2: vec2(-60, 48),\n	p3: vec2(60, 48),\n	color: rgb(164, 250, 204),\n})\n  ".trim()},{img:"/public/images/kaboomdraw/circle.png",code:"\ndrawCircle({\n	pos: vec2(100, 100),\n	radius: 48,\n	color: rgb(181, 164, 250),\n})\n    ".trim()},{img:"/public/images/kaboomdraw/ellipse.png",code:"\ndrawEllipse({\n	pos: vec2(120, 100),\n	radiusX: 64,\n	radiusY: 40,\n	color: rgb(164, 209, 250),\n})\n    ".trim()},{img:"/public/images/kaboomdraw/polygon.png",code:"\ndrawPolygon({\n	pos: vec2(100, 100),\n	pts: [\n		vec2(0, -48),\n		vec2(-64, 0),\n		vec2(-32, 64),\n		vec2(32, 64),\n		vec2(64, 0),\n	],\n	color: rgb(250, 164, 226),\n})\n    ".trim()},{img:"/public/images/kaboomdraw/text.png",code:'\ndrawText({\n	text: "hi",\n	pos: vec2(60, 60),\n})\n    '.trim()}],ee=function(e){var t=e.img,n=e.code,r=(0,Z._)((0,K.c)({item:{type:J.z.Code,code:n},type:J.z.Code}),2)[1];return(0,x.tZ)("img",{alt:"kaboom shape",ref:r,src:t,css:[U.l0.p(12),{userDrag:"none",height:"100%",cursor:"pointer",transition:"0.1s transform",":hover":{transform:"scale(1.2)"}}]})},et=function(){return(0,x.tZ)(N.G,{css:[U.l0.flex.row,U.l0.justify.spaceEvenly,U.l0.backgroundColor.backgroundHigher,U.l0.borderRadius(8),U.l0.width("calc(100% - 32px)"),U.l0.height("64px"),U.l0.position.absolute,U.l0.overflowY("hidden"),{zIndex:5,left:16,bottom:16,border:"solid 1px var(--outline-dimmest)"}],children:Q.map(function(e){return(0,x.tZ)(ee,(0,y._)({},e),e.img)})})},en=n(62789),er=n(16643),ei=n(57111),eo=n(54916),ea=n(91039),el=n(66349),ec=n(75023),es=new ec.j(function(e,t,n,r){return(0,ei.Rr)(e,t?(0,ea.ZF)("/home/runner/".concat(t.slug,"/").concat(n)):null,r)}),eu=n(578),ed=n(12569),ef=n(69926),eh=n(25632),ep=n(34142),em=n(87682),ev=n(84357),eg=n(98188),ey=n(38265),eb=n(74106),eZ=n(62609),ew=n(40497),ex=n(74833),eC=n(68333),e_=n(18672),eS=n(53326),eE={p:{padding:"".concat(U.TV.space2," ").concat(U.TV.space8),lineHeight:1.4,marginBottom:"".concat(U.TV.space8," !important")},"p:first-of-type":{marginTop:"".concat(U.TV.space4," !important")},"p:last-of-type":{marginBottom:"".concat(U.TV.space4," !important")},pre:{margin:"".concat(U.TV.space2," ").concat(U.TV.space8)},"pre + p":{borderTop:"1px solid ".concat(U.TV.outlineDimmest),paddingTop:U.TV.space4},"h1, h2, h3":{margin:"".concat(U.TV.space8," !important"),marginTop:"".concat(U.TV.space12," !important"),padding:"0 !important",paddingBottom:"".concat(U.TV.space4," !important"),fontSize:"100% !important",borderBottom:"1px solid ".concat(U.TV.backgroundHighest," !important"),lineHeight:1},"h1:first-of-type, h2:first-of-type, h3:first-of-type":{marginTop:"".concat(U.TV.space4," !important")},hr:{margin:"".concat(U.TV.space8," !important"),borderTop:"2px solid ".concat(U.TV.backgroundHighest," !important")},li:{margin:"".concat(U.TV.space2," ").concat(U.TV.space8)},".lsp-completion-detail":{borderBottom:"1px solid ".concat(U.TV.backgroundHighest),marginBottom:U.TV.space4},".cm-line":{paddingLeft:U.TV.space4,paddingRight:U.TV.space4},".cm-content":{paddingLeft:U.TV.space4,paddingRight:U.TV.space4}},ek=A.memo(function(e){var t=e.content,n=e.className;return(0,x.tZ)(N.G,{css:eE,children:(0,x.tZ)(eC.ZP,{className:n,components:{code:function(e){return(0,x.tZ)(eS.Z,(0,y._)({minimal:!0,disableCopy:!0},e))}},children:t})})});function eT(e){var t=e.content,n=e.className;return"string"==typeof t?(0,x.tZ)(ek,{css:[{p:{whiteSpace:"pre-wrap"}}],className:n,content:t}):t.kind===e_.MarkupKind.PlainText?(0,x.tZ)(N.G,{children:(0,x.tZ)(ex.xv,{className:n,children:t.value})}):(0,x.tZ)(ek,{className:n,content:t.value})}var eR=n(54472),eD=n(92631),eI=(0,eZ.B)(),eG=ev.Py.define(),eB=ev.QQ.define({create:function(){return null},update:function(e,t){if(t.isUserEvent("select")||t.isUserEvent("undo")||t.isUserEvent("redo"))return null;if(!t.isUserEvent("input.type")||t.changes.empty)return e;var n="";return t.changes.iterChanges(function(e,t,r,i,o){n=o.sliceString(0,1)}),n||null}}),eA=new eR.Jf(function(e){var t,n,r=e.help,i=e.index,o="1px solid ".concat(U.TV.outlineDimmer),a="min(425px, 80vw)",l=r.signatures[i],c=r.signatures.length>1;if(!l)return null;var s=l.documentation,u=null!=r.activeParameter&&(null===(n=l.parameters)||void 0===n?void 0:null===(t=n[r.activeParameter])||void 0===t?void 0:t.documentation);return(0,x.BX)(N.G,{css:[U.l0.flex.row,U.l0.backgroundColor.backgroundHigher,{width:"max-content"}],children:[c?(0,x.tZ)(N.G,{css:[U.l0.flex.row,U.l0.pl(4),{borderRight:o,paddingBottom:5}],children:(0,x.BX)("span",{css:[{alignSelf:"flex-end"},U.l0.p(4)],children:[i+1,"/",r.signatures.length]})}):null,(0,x.BX)(N.G,{children:[(0,x.tZ)(N.G,{css:[U.l0.py(4),U.l0.pl(c?4:8),U.l0.pr(8),U.l0.maxHeight(100),U.l0.overflowY("scroll"),U.l0.font.code,{lineHeight:U.TV.lineHeightSmall,maxWidth:a}],children:(0,x.tZ)(eP,{signature:l,activeParameter:r.activeParameter})}),!!(s||u)&&(0,x.BX)(N.G,{css:[U.l0.px(c?4:8),U.l0.py(2),U.l0.maxHeight(200),U.l0.overflow("scroll"),{borderTop:o,maxWidth:a}],children:[u?(0,x.tZ)(eT,{content:u}):null,s?(0,x.tZ)(eT,{content:s}):null]})]})]})});function eP(e){var t,n=e.signature,r=n.label,i=n.parameters,o=e.activeParameter;if(null==o||!i)return(0,x.tZ)("span",{children:r});var a=null===(t=i[o])||void 0===t?void 0:t.label;if(!a)return(0,x.tZ)("span",{children:r});var l=(0,Z._)("string"==typeof a?[r.indexOf(a),r.indexOf(a)+a.length]:a,2),c=l[0],s=l[1];return(0,x.BX)("div",{children:[(0,x.tZ)("span",{children:r.slice(0,c)}),(0,x.tZ)("strong",{children:a}),(0,x.tZ)("span",{children:r.slice(s)})]})}function eN(){return(eN=(0,ep._)(function(e,t,n,r,i){var o,a;return(0,em.Jh)(this,function(l){switch(l.label){case 0:return i.current&&n.notify.cancelRequest(i.current),o=n.generateId(),i.current=o,[4,n.request.signatureHelp(r,(0,eb.sg)(e.doc,t),{id:o})];case 1:if(a=l.sent(),i.current=null,"error"in a)return[2,null];return[2,a.result]}})})).apply(this,arguments)}var eU=n(4755),eL=n(73926),eO=n.n(eL),eM=n(8701),eX=new Map,eF=n(49920),eW=n(39698),eH=n(78402),eV=n(43586),ez=n(23026),ej=n(3194),eq=n(70322),eY=n(2543),e$=n(74633),eJ=n(57953),eK=n(32838),eQ=n(81246);(o=d||(d={}))[o.Dollar=0]="Dollar",o[o.Colon=1]="Colon",o[o.Comma=2]="Comma",o[o.CurlyOpen=3]="CurlyOpen",o[o.CurlyClose=4]="CurlyClose",o[o.Backslash=5]="Backslash",o[o.Forwardslash=6]="Forwardslash",o[o.Pipe=7]="Pipe",o[o.Int=8]="Int",o[o.VariableName=9]="VariableName",o[o.Format=10]="Format",o[o.Plus=11]="Plus",o[o.Dash=12]="Dash",o[o.QuestionMark=13]="QuestionMark",o[o.EOF=14]="EOF";var e0=function(){"use strict";function e(){(0,ez._)(this,e),this.value="",this.pos=0}var t=e.prototype;return t.text=function(e){this.value=e,this.pos=0},t.tokenText=function(e){return this.value.substr(e.pos,e.len)},t.next=function(){if(this.pos>=this.value.length)return{type:14,pos:this.pos,len:0};var t,n=this.pos,r=0,i=this.value.charCodeAt(n);if("number"==typeof(t=e._table[i]))return this.pos+=1,{type:t,pos:n,len:1};if(e.isDigitCharacter(i)){t=8;do r+=1,i=this.value.charCodeAt(n+r);while(e.isDigitCharacter(i));return this.pos+=r,{type:t,pos:n,len:r}}if(e.isVariableCharacter(i)){t=9;do i=this.value.charCodeAt(n+ ++r);while(e.isVariableCharacter(i)||e.isDigitCharacter(i));return this.pos+=r,{type:t,pos:n,len:r}}t=10;do r+=1,i=this.value.charCodeAt(n+r);while(!isNaN(i)&&void 0===e._table[i]&&!e.isDigitCharacter(i)&&!e.isVariableCharacter(i));return this.pos+=r,{type:t,pos:n,len:r}},e.isDigitCharacter=function(e){return e>=48&&e<=57},e.isVariableCharacter=function(e){return 95===e||e>=97&&e<=122||e>=65&&e<=90},e}();e0._table=(f={},(0,eW._)(f,36,0),(0,eW._)(f,58,1),(0,eW._)(f,44,2),(0,eW._)(f,123,3),(0,eW._)(f,125,4),(0,eW._)(f,92,5),(0,eW._)(f,47,6),(0,eW._)(f,124,7),(0,eW._)(f,43,11),(0,eW._)(f,45,12),(0,eW._)(f,63,13),f);var e1=function(){"use strict";function e(){(0,ez._)(this,e),this._children=[],function(e,t){t.forEach(function(t){Object.defineProperty(e,t,{enumerable:!1,writable:!0})})}(this,["parent"])}var t=e.prototype;return t.appendChild=function(e){return e instanceof e2&&this._children[this._children.length-1]instanceof e2?this._children[this._children.length-1].value+=e.value:(e.parent=this,this._children.push(e)),this},t.replace=function(e,t){var n=e.parent,r=n.children.indexOf(e),i=n.children.slice(0);i.splice.apply(i,[r,1].concat((0,w._)(t))),n._children=i,function e(t,n){var r=!0,i=!1,o=void 0;try{for(var a,l=t[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;c.parent=n,e(c.children,c)}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}}(t,n)},t.toString=function(){return this.children.reduce(function(e,t){return e+t.toString()},"")},t.len=function(){return 0},t.match=function(e){var t=!0,n=!1,r=void 0;try{for(var i,o=Object.entries(tn)[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=(0,Z._)(i.value,2),l=a[0],c=a[1];if(this instanceof c&&l in e)return e[l](this)}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}},(0,eJ._)(e,[{key:"children",get:function(){return this._children}},{key:"rightMostDescendant",get:function(){return this._children.length>0?this._children[this._children.length-1].rightMostDescendant:this}},{key:"snippet",get:function(){for(var e=this;;){if(!e)return;if(e instanceof te)return e;e=e.parent}}}]),e}(),e2=function(e){"use strict";(0,ej._)(n,e);var t=(0,eY._)(n);function n(e){var r;return(0,ez._)(this,n),(r=t.call(this)).value=e,r}var r=n.prototype;return r.toString=function(){return this.value},r.toTextmateString=function(){return n.escape(this.value)},r.len=function(){return this.value.length},r.clone=function(){return new n(this.value)},n.escape=function(e){return e.replace(/\$|}|\\/g,"\\$&")},n}(e1),e8=function(e){"use strict";(0,ej._)(n,e);var t=(0,eY._)(n);function n(){return(0,ez._)(this,n),t.apply(this,arguments)}return n}(e1),e4=function(e){"use strict";(0,ej._)(n,e);var t=(0,eY._)(n);function n(e){var r;return(0,ez._)(this,n),(r=t.call(this)).index=e,r}var r=n.prototype;return r.toTextmateString=function(){var e="";return(this.transform&&(e=this.transform.toTextmateString()),0!==this.children.length||this.transform)?0===this.children.length?"${".concat(this.index).concat(e,"}"):this.choice?"${".concat(this.index,"|").concat(this.choice.toTextmateString(),"|").concat(e,"}"):"${".concat(this.index,":").concat(this.children.map(function(e){return e.toTextmateString()}).join("")).concat(e,"}"):"$".concat(this.index)},r.clone=function(){var e=new n(this.index);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map(function(e){return e.clone()}),e},n.compareByIndex=function(e,t){return e.index===t.index?0:e.isFinalTabstop?1:t.isFinalTabstop||e.index<t.index?-1:e.index>t.index?1:0},(0,eJ._)(n,[{key:"isFinalTabstop",get:function(){return 0===this.index}},{key:"choice",get:function(){return 1===this._children.length&&this._children[0]instanceof e3?this._children[0]:void 0}}]),n}(e8),e3=function(e){"use strict";(0,ej._)(n,e);var t=(0,eY._)(n);function n(){var e;return(0,ez._)(this,n),e=t.apply(this,arguments),e.options=[],e}var r=n.prototype;return r.appendChild=function(e){return e instanceof e2&&(e.parent=this,this.options.push(e)),this},r.toString=function(){return this.options[0].value},r.toTextmateString=function(){return this.options.map(function(e){return e.value.replace(/\||,|\\/g,"\\$&")}).join(",")},r.len=function(){return this.options[0].len()},r.clone=function(){var e=new n;return this.options.forEach(e.appendChild,e),e},n}(e1),e5=function(e){"use strict";(0,ej._)(n,e);var t=(0,eY._)(n);function n(){var e;return(0,ez._)(this,n),e=t.apply(this,arguments),e.regexp=RegExp(""),e}var r=n.prototype;return r.resolve=function(e){var t=this,n=!1,r=e.replace(this.regexp,function(){for(var e=arguments.length,r=Array(e),i=0;i<e;i++)r[i]=arguments[i];return n=!0,t._replace(r.slice(0,-2))});return!n&&this._children.some(function(e){return e instanceof e6&&!!e.elseValue})&&(r=this._replace([])),r},r._replace=function(e){var t="",n=!0,r=!1,i=void 0;try{for(var o,a=this._children[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;if(l instanceof e6){var c=e[l.index]||"";c=l.resolve(c),t+=c}else t+=l.toString()}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t},r.toString=function(){return""},r.toTextmateString=function(){return"/".concat(this.regexp.source,"/").concat(this.children.map(function(e){return e.toTextmateString()}),"/").concat((this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":""))},r.clone=function(){var e=new n;return e.regexp=new RegExp(this.regexp.source,(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")),e._children=this.children.map(function(e){return e.clone()}),e},n}(e1),e6=function(e){"use strict";(0,ej._)(n,e);var t=(0,eY._)(n);function n(e,r,i,o){var a;return(0,ez._)(this,n),(a=t.call(this)).index=e,a.shorthandName=r,a.ifValue=i,a.elseValue=o,a}var r=n.prototype;return r.resolve=function(e){if("upcase"===this.shorthandName)return e?e.toLocaleUpperCase():"";if("downcase"===this.shorthandName)return e?e.toLocaleLowerCase():"";if("capitalize"===this.shorthandName)return e?e[0].toLocaleUpperCase()+e.substr(1):"";if("pascalcase"===this.shorthandName)return e?this._toPascalCase(e):"";if("camelcase"===this.shorthandName)return e?this._toCamelCase(e):"";if(e&&"string"==typeof this.ifValue)return this.ifValue;if(!e&&"string"==typeof this.elseValue)return this.elseValue;else return e||""},r._toPascalCase=function(e){var t=e.match(/[a-z0-9]+/gi);return t?t.map(function(e){return e.charAt(0).toUpperCase()+e.substr(1)}).join(""):e},r._toCamelCase=function(e){var t=e.match(/[a-z0-9]+/gi);return t?t.map(function(e,t){return 0===t?e.charAt(0).toLowerCase()+e.substr(1):e.charAt(0).toUpperCase()+e.substr(1)}).join(""):e},r.toTextmateString=function(){var e="${";return e+=this.index,this.shorthandName?e+=":/".concat(this.shorthandName):this.ifValue&&this.elseValue?e+=":?".concat(this.ifValue,":").concat(this.elseValue):this.ifValue?e+=":+".concat(this.ifValue):this.elseValue&&(e+=":-".concat(this.elseValue)),e+="}"},r.clone=function(){return new n(this.index,this.shorthandName,this.ifValue,this.elseValue)},n}(e1),e9=function(e){"use strict";(0,ej._)(n,e);var t=(0,eY._)(n);function n(e){var r;return(0,ez._)(this,n),(r=t.call(this)).name=e,r}var r=n.prototype;return r.resolve=function(e){var t=e.resolve(this);return this.transform&&(t=this.transform.resolve(t||"")),void 0!==t&&(this._children=[new e2(t)],!0)},r.toTextmateString=function(){var e="";return(this.transform&&(e=this.transform.toTextmateString()),0===this.children.length)?"${".concat(this.name).concat(e,"}"):"${".concat(this.name,":").concat(this.children.map(function(e){return e.toTextmateString()}).join("")).concat(e,"}")},r.clone=function(){var e=new n(this.name);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map(function(e){return e.clone()}),e},n}(e8);function e7(e,t){for(var n=(0,w._)(e);n.length>0;){var r=n.shift();if(!t(r))break;n.unshift.apply(n,(0,w._)(r.children))}}var te=function(e){"use strict";(0,ej._)(n,e);var t=(0,eY._)(n);function n(){return(0,ez._)(this,n),t.apply(this,arguments)}var r=n.prototype;return r.offset=function(e){var t=0,n=!1;return(this.walk(function(r){return r===e?(n=!0,!1):(t+=r.len(),!0)}),n)?t:-1},r.fullLen=function(e){var t=0;return e7([e],function(e){return t+=e.len(),!0}),t},r.enclosingPlaceholders=function(e){for(var t=[],n=e.parent;n;)n instanceof e4&&t.push(n),n=n.parent;return t},r.resolveVariables=function(e){var t=this;return this.walk(function(n){return n instanceof e9&&n.resolve(e)&&delete t._placeholders,!0}),this},r.appendChild=function(e){return delete this._placeholders,(0,eK._)((0,eQ._)(n.prototype),"appendChild",this).call(this,e)},r.replace=function(e,t){return delete this._placeholders,(0,eK._)((0,eQ._)(n.prototype),"replace",this).call(this,e,t)},r.toTextmateString=function(){return this.children.reduce(function(e,t){return e+t.toTextmateString()},"")},r.clone=function(){var e=new n;return this._children=this.children.map(function(e){return e.clone()}),e},r.walk=function(e){e7(this.children,e)},(0,eJ._)(n,[{key:"placeholderInfo",get:function(){if(!this._placeholders){var e,t=[];this.walk(function(n){return n instanceof e4&&(t.push(n),e=!e||e.index<n.index?n:e),!0}),this._placeholders={all:t,last:e}}return this._placeholders}},{key:"placeholders",get:function(){return this.placeholderInfo.all}}]),n}(e1),tt=function(){"use strict";function e(){(0,ez._)(this,e),this._scanner=new e0,this._token={type:14,pos:0,len:0}}var t=e.prototype;return t.text=function(e){return this.parse(e).toString()},t.parse=function(e,t,n){var r=new te;return this.parseFragment(e,r),this.ensureFinalTabstop(r,null!=n&&n,null!=t&&t),r},t.parseFragment=function(e,t){var n=t.children.length;for(this._scanner.text(e),this._token=this._scanner.next();this._parse(t););var r=new Map,i=[];t.walk(function(e){return e instanceof e4&&(e.isFinalTabstop?r.set(0,void 0):!r.has(e.index)&&e.children.length>0?r.set(e.index,e.children):i.push(e)),!0});var o=function(e,n){var i=r.get(e.index);if(i){var a=new e4(e.index);a.transform=e.transform;var l=!0,c=!1,s=void 0;try{for(var u,d=i[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var f=u.value.clone();a.appendChild(f),f instanceof e4&&r.has(f.index)&&!n.has(f.index)&&(n.add(f.index),o(f,n),n.delete(f.index))}}catch(e){c=!0,s=e}finally{try{l||null==d.return||d.return()}finally{if(c)throw s}}t.replace(e,[a])}},a=new Set,l=!0,c=!1,s=void 0;try{for(var u,d=i[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var f=u.value;o(f,a)}}catch(e){c=!0,s=e}finally{try{l||null==d.return||d.return()}finally{if(c)throw s}}return t.children.slice(n)},t.ensureFinalTabstop=function(e,t,n){(t||n&&e.placeholders.length>0)&&!e.placeholders.find(function(e){return 0===e.index})&&e.appendChild(new e4(0))},t._accept=function(e,t){if(void 0===e||this._token.type===e){var n=!t||this._scanner.tokenText(this._token);return this._token=this._scanner.next(),n}return!1},t._backTo=function(e){return this._scanner.pos=e.pos+e.len,this._token=e,!1},t._until=function(e){for(var t=this._token;this._token.type!==e;){if(14===this._token.type)return!1;if(5===this._token.type){var n=this._scanner.next();if(0!==n.type&&4!==n.type&&5!==n.type)return!1}this._token=this._scanner.next()}var r=this._scanner.value.substring(t.pos,this._token.pos).replace(/\\(\$|}|\\)/g,"$1");return this._token=this._scanner.next(),r},t._parse=function(e){return this._parseEscaped(e)||this._parseTabstopOrVariableName(e)||this._parseComplexPlaceholder(e)||this._parseComplexVariable(e)||this._parseAnything(e)},t._parseEscaped=function(e){var t;return!!(t=this._accept(5,!0))&&(t=this._accept(0,!0)||this._accept(4,!0)||this._accept(5,!0)||t,e.appendChild(new e2(t)),!0)},t._parseTabstopOrVariableName=function(e){var t,n=this._token;return this._accept(0)&&(t=this._accept(9,!0)||this._accept(8,!0))?(e.appendChild(/^\d+$/.test(t)?new e4(Number(t)):new e9(t)),!0):this._backTo(n)},t._parseComplexPlaceholder=function(e){var t,n=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(8,!0))))return this._backTo(n);var r=new e4(Number(t));if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(r),!0;if(!this._parse(r))return e.appendChild(new e2("${"+t+":")),r.children.forEach(e.appendChild,e),!0}else if(r.index>0&&this._accept(7))for(var i=new e3;;){if(this._parseChoiceElement(i)){if(this._accept(2))continue;if(this._accept(7)&&(r.appendChild(i),this._accept(4)))return e.appendChild(r),!0}return this._backTo(n),!1}else if(this._accept(6))return this._parseTransform(r)?(e.appendChild(r),!0):(this._backTo(n),!1);else if(this._accept(4))return e.appendChild(r),!0;else return this._backTo(n)},t._parseChoiceElement=function(e){for(var t=this._token,n=[];2!==this._token.type&&7!==this._token.type;){var r=void 0;if(!(r=(r=this._accept(5,!0))?this._accept(2,!0)||this._accept(7,!0)||this._accept(5,!0)||r:this._accept(void 0,!0)))return this._backTo(t),!1;n.push(r)}return 0===n.length?(this._backTo(t),!1):(e.appendChild(new e2(n.join(""))),!0)},t._parseComplexVariable=function(e){var t,n=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(9,!0))))return this._backTo(n);var r=new e9(t);if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(r),!0;if(!this._parse(r))return e.appendChild(new e2("${"+t+":")),r.children.forEach(e.appendChild,e),!0}else if(this._accept(6))return this._parseTransform(r)?(e.appendChild(r),!0):(this._backTo(n),!1);else if(this._accept(4))return e.appendChild(r),!0;else return this._backTo(n)},t._parseTransform=function(e){for(var t=new e5,n="",r="";!this._accept(6);){var i=void 0;if(i=this._accept(5,!0)){n+=i=this._accept(6,!0)||i;continue}if(14!==this._token.type){n+=this._accept(void 0,!0);continue}return!1}for(;!this._accept(6);){var o=void 0;if(o=this._accept(5,!0)){o=this._accept(5,!0)||this._accept(6,!0)||o,t.appendChild(new e2(o));continue}if(!(this._parseFormatString(t)||this._parseAnything(t)))return!1}for(;!this._accept(4);){if(14!==this._token.type){r+=this._accept(void 0,!0);continue}return!1}try{t.regexp=new RegExp(n,r)}catch(e){return!1}return e.transform=t,!0},t._parseFormatString=function(e){var t=this._token;if(!this._accept(0))return!1;var n=!1;this._accept(3)&&(n=!0);var r=this._accept(8,!0);if(!r)return this._backTo(t),!1;if(!n||this._accept(4))return e.appendChild(new e6(Number(r))),!0;if(!this._accept(1))return this._backTo(t),!1;if(this._accept(6)){var i=this._accept(9,!0);return i&&this._accept(4)?(e.appendChild(new e6(Number(r),i)),!0):(this._backTo(t),!1)}if(this._accept(11)){var o=this._until(4);if(o)return e.appendChild(new e6(Number(r),void 0,o,void 0)),!0}else if(this._accept(12)){var a=this._until(4);if(a)return e.appendChild(new e6(Number(r),void 0,void 0,a)),!0}else if(this._accept(13)){var l=this._until(1);if(l){var c=this._until(4);if(c)return e.appendChild(new e6(Number(r),void 0,l,c)),!0}}else{var s=this._until(4);if(s)return e.appendChild(new e6(Number(r),void 0,void 0,s)),!0}return this._backTo(t),!1},t._parseAnything=function(e){return 14!==this._token.type&&(e.appendChild(new e2(this._scanner.tokenText(this._token))),this._accept(void 0),!0)},e.escape=function(e){return e.replace(/\$|}|\\/g,"\\$&")},e.asInsertText=function(t){return new e().parse(t).toString()},e.guessNeedsClipboard=function(e){return/\${?CLIPBOARD/.test(e)},e}(),tn={Text:e2,Placeholder:e4,Variable:e9,FormatString:e6,Choice:e3},tr=function(){"use strict";function e(t){(0,ez._)(this,e),this.lines=t.split(/\r\n?|\n/).map(function(e){return new tt().parse(e).children})}return e.prototype.apply=function(t){var n=t.view,r=t.from,i=t.to,o=e.instantiate(this.lines,t),a=o.text,l=o.ranges,c={from:r,to:i,insert:ev.xv.of(a)},s={changes:c,scrollIntoView:!0,annotations:eg.Jv.of(t.completion)};if(l.length&&(s.selection=tu(l,0)),l.length>1){var u=new ta(l,0),d=s.effects=[tl.of(u)];void 0===n.state.field(ts,!1)&&d.push(ev.Py.appendConfig.of([ts,tf,th]))}if(r===i&&!l.length){var f=ev.as.of(c,n.state.doc.length),h=n.state.selection.ranges.map(function(e){return e.map(f,0)});s.selection=ev.jT.create(h,n.state.selection.mainIndex)}return s},e.resolveVariable=function(e,t){var n=t.view,r=t.from,i=t.path;switch(e){case"TM_FILENAME":return(0,eV.basename)(i);case"TM_FILENAME_BASE":return(0,eV.basename)(i,(0,eV.extname)(i));case"TM_DIRECTORY":return(0,eV.dirname)(i);case"TM_FILEPATH":return i;case"TM_LINE_INDEX":return(n.state.doc.lineAt(r).number-1).toString();case"TM_LINE_NUMBER":return n.state.doc.lineAt(r).number.toString();default:return e}},e.instantiate=function(t,n){var r=n.view,i=n.from,o=r.state,a=[],l=[],c=o.doc.lineAt(i),s=/^\s*/.exec(c.text)[0],u=o.facet(e$.c),d=!0,f=!1,h=void 0;try{for(var p,m,v=t[Symbol.iterator]();!(d=(m=v.next()).done);d=!0)!function(){var t=m.value,r=0,o="",c=function(e){var t=0,n=r;if(0===r&&(t=/^\t*/.exec(e)[0].length)){var i=s+u.repeat(t);e=i+e.slice(t),n+=i.length}return o+=e,r+=e.length,{line:a.length,from:n,to:r}},d=function(t){var o=!0,s=!1,u=void 0;try{for(var f,h=t[Symbol.iterator]();!(o=(f=h.next()).done);o=!0)f.value.match({Text:function(e){c(e.value)},Variable:function(t){var r=t.name,i=t.transform,o=e.resolveVariable(r,n);i&&(o=o.replace(i.regexp,function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.children.map(function(e){return e.match({Text:function(e){return e.value},FormatString:function(e){return e.resolve(t[e.index])}})}).filter(Boolean).join("")})),c(o)},Choice:function(e){c(e.options[0].value)},Placeholder:function(e){var t,n=a.length?i+a.map(function(e){return e.length}).reduce(function(e,t){return e+t}):i;if(null===(t=e.children)||void 0===t?void 0:t.length){var o={field:e.index,from:n+r,to:null};l.push(o),d(e.children),o.to=n+r}else{c("");var s=n+r;l.push({field:e.index,from:s,to:s})}}})}catch(e){s=!0,u=e}finally{try{o||null==h.return||h.return()}finally{if(s)throw u}}};d(t),a.push(o)}()}catch(e){f=!0,h=e}finally{try{d||null==v.return||v.return()}finally{if(f)throw h}}var g=(p=Math).max.apply(p,(0,w._)(l.map(function(e){return e.field})));return{text:a,ranges:l.map(function(e){var t=e.field,n=(0,eq._)(e,["field"]);return(0,b._)((0,y._)({},n),{field:0===t?g:t-1})})}},e}(),ti=ey.p.widget({widget:new(function(e){"use strict";(0,ej._)(n,e);var t=(0,eY._)(n);function n(){return(0,ez._)(this,n),t.apply(this,arguments)}var r=n.prototype;return r.toDOM=function(){var e=document.createElement("span");return e.className="cm-snippetFieldPosition",e},r.ignoreEvent=function(){return!1},n}(ey.l9))}),to=ey.p.mark({class:"cm-snippetField"}),ta=function(){"use strict";function e(t,n){(0,ez._)(this,e),this.ranges=t,this.active=n,this.deco=ey.p.set(t.map(function(e){return(e.from===e.to?ti:to).range(e.from,e.to)}))}var t=e.prototype;return t.map=function(t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,l=this.ranges[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value,s=function(e,t){var n=t.mapPos(e.from,-1,ev.gc.TrackDel),r=t.mapPos(e.to,1,ev.gc.TrackDel);return null==n||null==r?null:{field:e.field,from:n,to:r}}(c,t);if(!s)return null;n.push(s)}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return new e(n,this.active)},t.isSelectionInsideField=function(e){var t=this;return e.ranges.every(function(e){return t.ranges.some(function(n){return n.field===t.active&&n.from<=e.from&&n.to>=e.to})})},e}(),tl=ev.Py.define({map:function(e,t){return null==e?void 0:e.map(t)}}),tc=ev.Py.define(),ts=ev.QQ.define({create:function(){return null},update:function(e,t){var n=!0,r=!1,i=void 0;try{for(var o,a=t.effects[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;if(l.is(tl))return l.value;if(l.is(tc)&&e)return new ta(e.ranges,l.value)}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return e&&t.docChanged&&(e=e.map(t.changes)),e&&t.selection&&!e.isSelectionInsideField(t.selection)&&(e=null),e},provide:function(e){return ey.tk.decorations.from(e,function(e){return e?e.deco:ey.p.none})}});function tu(e,t){var n=e.filter(function(e){return e.field===t}).map(function(e){return ev.jT.range(e.from,e.to)});if(0!==n.length)return ev.jT.create(n)}function td(e){return function(t){var n,r=t.state,i=t.dispatch,o=r.field(ts,!1);if(!o||e<0&&0===o.active)return!1;var a=o.active+e,l=(n=Math).max.apply(n,(0,w._)(o.ranges.map(function(e){return e.field}))),c=e>0&&o.active>=l;return i(r.update({selection:tu(o.ranges,a),effects:tl.of(c?null:new ta(o.ranges,a))})),!0}}var tf=ev.Wl.highest(ey.$f.of([{key:"Tab",run:td(1),shift:td(-1)},{key:"Escape",run:function(e){var t=e.state,n=e.dispatch;return!!t.field(ts,!1)&&(n(t.update({effects:tl.of(null)})),!0)}}])),th=ey.tk.domEventHandlers({mousedown:function(e,t){var n,r=t.state.field(ts,!1);if(!r||null==(n=t.posAtCoords({x:e.clientX,y:e.clientY})))return!1;var i=r.ranges.find(function(e){return e.from<=n&&e.to>=n});return!!i&&i.field!==r.active&&(t.dispatch({selection:tu(r.ranges,i.field),effects:tl.of(r.ranges.some(function(e){return e.field>i.field})?new ta(r.ranges,i.field):null)}),!0)}}),tp=n(96132),tm=n(69543),tv=n(59868),tg=n(11669),ty=n(47507),tb=n(34791),tZ=n(73030),tw=n(93918),tx=n(89835),tC="cm-ghostwriter-hint-tooltip",t_=ey.tk.theme((0,eW._)({".cm-ghostwriter-hint":{display:"none",width:"100%",backgroundColor:U.TV.backgroundHigher,borderTop:"solid 1px ".concat(U.TV.outlineDefault)}},".cm-tooltip-autocomplete.".concat(tC," .cm-ghostwriter-hint"),{display:"block"})),tS=(0,tw.X)({hint:[U.l0.p(4),U.l0.rowWithGap(8),U.l0.align.center,U.l0.font.default,{opacity:.6}],prompt:[U.l0.rowWithGap(4),U.l0.align.center]});function tE(){return(0,x.BX)(N.G,{css:tS.hint,children:[(0,x.tZ)(tZ.Z,{width:8,height:8}),(0,x.BX)(N.G,{css:tS.prompt,children:[(0,x.tZ)(tp.ZP,{size:"small",dimmed:!1,shortcut:{key:"tab"}}),(0,x.tZ)(ex.xv,{variant:"small",multiline:!1,children:"to use AI suggestion."})]})]})}var tk=ey.lg.define(function(e){var t=function(){var t,n,r;return(0,w._)(e.dom.children).concat((0,w._)(null!==(r=null===(n=tx.yb.get(e))||void 0===n?void 0:null===(t=n.children[0])||void 0===t?void 0:t.children)&&void 0!==r?r:[])).filter(function(e){return e.classList.contains("cm-tooltip-autocomplete")})},n=function(e){return Array.from(e.children).filter(function(e){return e.classList.contains("cm-ghostwriter-hint")})},r=!1;return{update:function(){null!==(0,eg.LR)(e.state)&&Promise.resolve().then(function(){if(!r){var e=!0,i=!1,o=void 0;try{for(var a,l=t()[Symbol.iterator]();!(e=(a=l.next()).done);e=!0){var c=a.value,s=n(c);if(0===s.length){var u=(0,eR.VV)((0,x.tZ)(tE,{}));u.className="cm-ghostwriter-hint",c.appendChild(u)}}}catch(e){i=!0,o=e}finally{try{e||null==l.return||l.return()}finally{if(i)throw o}}}})},destroy:function(){var e=!0,i=!1,o=void 0;try{for(var a,l=t()[Symbol.iterator]();!(e=(a=l.next()).done);e=!0){var c=a.value,s=!0,u=!1,d=void 0;try{for(var f,h=n(c)[Symbol.iterator]();!(s=(f=h.next()).done);s=!0){var p=f.value;c.removeChild(p)}}catch(e){u=!0,d=e}finally{try{s||null==h.return||h.return()}finally{if(u)throw d}}}}catch(e){i=!0,o=e}finally{try{e||null==l.return||l.return()}finally{if(i)throw o}}r=!0}}}),tT=ev.Py.define(),tR=ev.QQ.define({create:function(){return null},update:function(e,t){null!==(0,eg.LR)(t.state)?e&&(e=(0,b._)((0,y._)({},e),{missed:e.missed.compose(t.changes)})):e=null;var n=!0,r=!1,i=void 0;try{for(var o,a=t.effects[Symbol.iterator]();!(n=(o=a.next()).done);n=!0)o.value.is(tT)&&(e={original:t.state.doc,missed:ev.as.empty(t.state.doc.length)})}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return e}});function tD(e,t){var n=e.field(tR,!1);if(n){var r=(0,eb.RL)(n.original,t);return n.missed.mapPos(r)}return(0,eb.RL)(e.doc,t)}var tI=n(29457),tG=n(89798),tB=n(69521);function tA(e){var t=Object.keys(e).join(""),n=/\w/.test(t);return n&&(t=t.replace(/\w/g,"")),"[".concat(n?"\\w":"").concat(t.replace(".","").replace(/[^\w\s]/g,"\\$&"),"]")}var tP=Object.entries(e_.CompletionItemKind).reduce(function(e,t){var n=(0,Z._)(t,2),r=n[0],i=n[1];return(0,y._)((0,eW._)({},i,r.toLowerCase()),e)},{});function tN(e,t){return{from:tD(e,t.start),to:tD(e,t.end)}}function tU(e,t){var n=tN(e.state,t.range),r=n.from,i=n.to;if(null!==r&&null!==i)return{from:r,to:i,insert:t.newText}}var tL=ey.tk.baseTheme({".lsp-completion-keyboard-shortcuts":{display:"none"},'[aria-selected="true"] .lsp-completion-keyboard-shortcuts':{float:"right",display:"inline-block"}}),tO=n(30609),tM=n(25425);function tX(e){var t=e.content,n=e.className,r=e.showHoveredVariable,i=(0,eh.Gn)("fontSize").preferences;if("string"!=typeof t&&"kind"in t)return(0,x.tZ)(eT,{content:t});var o=(Array.isArray(t)?t:[t]).map(function(e){return"string"==typeof e?e:"```"+e.language+"\n"+e.value+"\n```"}).join("\n");return(0,x.tZ)(eC.ZP,{css:[{p:{fontSize:i.fontSize}},r?[U.l0.maxHeight(tF),U.l0.overflowY("auto")]:void 0],className:n,components:{code:function(e){return(0,x.tZ)(eS.Z,(0,y._)({minimal:!0,disableCopy:!0},e))}},children:o})}var tF=100;function tW(e){var t=e.className,n=e.content,r=e.textHovered,i=(0,tM.P5)({controlName:"flag-debugger-hover-variable",logFlagToAnalytics:!1}),o=(0,eo.Z)().debuggest,a=(0,er.Z)(o.mainClient),l=a&&("running"===a.state.current||"paused"===a.state.current),c=(0,Z._)(A.useState(!1),2),s=c[0],u=c[1],d=(0,Z._)(A.useState(void 0),2),f=d[0],h=d[1],p=i&&l&&f;return A.useEffect(function(){function e(){return(e=(0,ep._)(function(){var e,t;return(0,em.Jh)(this,function(n){switch(n.label){case 0:if(!(i&&l))return[3,4];u(!0),n.label=1;case 1:return n.trys.push([1,,3,4]),[4,a.evaluate({expression:r,context:"hover"})];case 2:return(null===(e=(t=n.sent()).body)||void 0===e?void 0:e.result)&&h((0,y._)({name:r,value:t.body.result},t.body)),[3,4];case 3:return u(!1),[7];case 4:return[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[i,a,l,r]),(0,x.BX)(N.G,{css:[eE,p?U.l0.maxHeight(tF+190):U.l0.maxHeight(190),U.l0.minHeight(30),U.l0.overflowY("auto"),U.l0.borderRadius(4),U.l0.backgroundColor.backgroundHigher],children:[s?void 0:(0,x.tZ)(tX,{content:n,className:t,showHoveredVariable:!!p}),p?(0,x.tZ)(N.G,{css:[U.l0.maxHeight(190),U.l0.overflowY("auto")],children:(0,x.tZ)(tO._,{depth:0,client:a,variable:f})}):void 0]})}var tH=n(95032),tV=n(81031),tz=n(22487),tj=n(83848),tq=n(58719),tY=n(88936);function t$(e){var t=e.matchesMap,n=e.fileToContents,r=e.type,i=e.onClose,o=e.jumpToPosition,a=Object.keys(t);return 0===a.length?(0,x.tZ)(ex.xv,{color:"dimmer",css:[U.l0.pl(8),U.l0.py(8)],multiline:!1,children:"REFERENCES"===r?"No references found":"No definitions found"}):(0,x.tZ)(N.G,{children:a.map(function(e){var r=t[e],l=n[e],c=(0,tH.Z)(r,l);return(0,x.tZ)(N.G,{css:[U.l0.p(4)],children:(0,x.tZ)(tV.V,{path:e,extensions:[c],doc:l,numMatches:r.length,initiallyExpanded:1===a.length,onNavigateToCode:function(t){if(null!==t)o({path:e,line:t.line+1,col:t.character});else{var n=(0,Z._)(r,1)[0],a=l.lineAt(n.from),c=n.from-a.from;o({path:e,line:a.number,col:c})}i()}})},e)})})}function tJ(e){var t=e.files,n=e.onClose,r=e.references,i=e.definitions,o=e.currentFile,a=e.currentFileContents,l=e.jumpToPosition,c=(0,eo.Z)().fs,s=(0,ef.Z)(o),u=(0,tz.Z)(n,[]),d=(0,Z._)(A.useState((0,eW._)({},o,ev.xv.of(a.split("\n")))),2),f=d[0],h=d[1];A.useEffect(function(){if(t.length){var e=!1;return!function(){n.apply(this,arguments)}(),function(){e=!0}}function n(){return(n=(0,ep._)(function(){var n;return(0,em.Jh)(this,function(r){switch(r.label){case 0:var i;return n={},[4,Promise.all(t.map((i=(0,ep._)(function(e){var t;return(0,em.Jh)(this,function(r){switch(r.label){case 0:return[4,c.readFile(e)];case 1:if((t=r.sent()).error)throw Error("Something went wrong reading file with path ".concat(e,". Received error: ").concat(t.error));return n[e]=ev.xv.of(t.content.toString().split("\n")),[2]}})}),function(e){return i.apply(this,arguments)})))];case 1:if(r.sent(),e)return[2];return h(function(e){return(0,y._)({},e,n)}),[2]}})})).apply(this,arguments)}},[c,t]);var p=(0,w._)(r).concat((0,w._)(i));if(!s||p.some(function(e){return!(s.documentUriToPath(e.uri) in f)}))return(0,x.tZ)(N.G,{style:{width:U.TV.space128,height:U.TV.space128,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,x.tZ)(tY.Z,{size:32})});var m={},v={};function g(e,t){if(!s)throw Error("Expected LSP Client");var n=s.documentUriToPath(e.uri),r=e.range,i=r.start,o=r.end;n in t||(t[n]=[]);var a=f[n],l=a.line(i.line+1),c=a.line(o.line+1);t[n].push({from:l.from+i.character,to:c.from+o.character})}return r.forEach(function(e){g(e,m)}),i.forEach(function(e){g(e,v)}),(0,x.BX)(N.G,{innerRef:u,css:[U.l0.minWidth("375px"),U.l0.maxWidth("500px"),U.l0.pt(4),U.l0.maxHeight("100%"),{overflowY:"scroll"}],children:[(0,x.tZ)(N.G,{css:{borderBottom:"1px solid var(--background-highest)"},children:(0,x.BX)(N.G,{css:[U.l0.p(4)],children:[(0,x.BX)(N.G,{css:[U.l0.flex.row,U.l0.justify.spaceBetween,U.l0.align.center,U.l0.pr(4)],children:[(0,x.tZ)(ex.h4,{level:2,variant:"subheadDefault",css:[U.l0.p(4),U.l0.pl(8)],children:"Definitions"}),(0,x.tZ)(tj.Z,{filled:!1,border:!1,onClick:n,children:(0,x.tZ)(tq.Z,{})})]}),(0,x.tZ)(t$,{matchesMap:v,fileToContents:f,type:"DEFINITION",onClose:n,currentFile:o,jumpToPosition:l})]})}),(0,x.tZ)(N.G,{children:(0,x.BX)(N.G,{css:[U.l0.p(4)],children:[(0,x.tZ)(ex.h4,{level:2,variant:"subheadDefault",css:[U.l0.p(4),U.l0.pl(8)],children:"References"}),(0,x.tZ)(t$,{matchesMap:m,fileToContents:f,type:"REFERENCES",onClose:n,currentFile:o,jumpToPosition:l})]})})]})}(a=h||(h={})).DEFINITION="DEFINITION",a.REFERENCES="REFERENCES";var tK=n(23758),tQ=n(82200),t0=n(59620),t1=n(22421),t2=n(13358),t8=n(32781),t4=n(50199),t3=new Map,t5="undefined"==typeof WeakRef?function(e){return{deref:function(){return e}}}:WeakRef,t6=n(12834),t9=n(59173),t7=n(17428),ne=n(2454),nt=n(80259),nn=n(9029),nr=function(e){var t,n,r,i,o,a,l,c,s,u,d,f,h,p,m,v,g,y,b,C,_,S=e.view,E=e.path,k=e.lspClient,T=e.visible,R=(0,eo.Z)().fs,D=(0,Z._)((l=(a={path:E,lspClient:k,range:(n=(t=S.state).doc,i=(r=t.selection.main).from,o=r.to,{start:(0,eb.sg)(n,i),end:(0,eb.sg)(n,o)})}).path,c=a.range,s=a.lspClient,c=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:JSON.stringify,r=n(e),i=null===(t=t3.get(r))||void 0===t?void 0:t.deref();return null!=i?i:(t3.set(r,new t5(e)),e)}(c),u=(0,t6.Z)(),d=A.useRef(null),v=(m=(0,Z._)((h=A.useCallback((f=(0,ep._)(function(e,t){return(0,em.Jh)(this,function(n){return s.isOpen(e)?(d.current={requestPath:e,requestRange:t},[2,s.request.codeActions(e,t)]):[2,{result:null}]})}),function(e,t){return f.apply(this,arguments)}),[s]),p=A.useRef(),[(0,t4.Z)(function(){return F()(function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];h.apply(void 0,(0,w._)(t)).then(function(e){var t;null===(t=p.current)||void 0===t||t.call(p,e)})},1e3)},[h,1e3]),A.useCallback(function(e){p.current=e},[])]),2))[0],g=m[1],b=(y=(0,Z._)(A.useState([]),2))[0],C=y[1],_=A.useCallback((0,ep._)(function(){return(0,em.Jh)(this,function(e){return s&&l&&(g(function(e){u.current&&("error"in e||null===e.result||0===e.result.length?C([]):C(e.result))}),v(l,c)),[2]})}),[s,l,v,c,g,u]),A.useEffect(function(){return _(),function(){v.cancel()}},[_,v]),[b,_]),1)[0],I=(0,er.Z)(T),G=A.useCallback(function(){T.current=!1,S.focus()},[S,T]);if(A.useEffect(function(){var e=function(e){"Escape"===e.key&&G()};if(I)return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}},[G,I]),!D.length)return null;var B=D.some(function(e){return"kind"in e&&"quickfix"===e.kind})?"#75bdff":"#ffcc00";return(0,x.tZ)("div",{role:"presentation",onMouseDown:function(e){I||(e.stopPropagation(),e.preventDefault(),(0,t7.a)(S,{match:nt.pl,data:{type:"context",label:"More actions",icon:(0,x.tZ)(t8.Z,{})},commands:function(){return D.map(function(e){var t,n,r,i,o,a;return n=(t={icon:(0,x.tZ)(ne.Z,{}),label:e.title,run:function(){(0,nn.S)(e,k,R)}}).label,r=t.icon,i=t.run,o=t.keyboardShortcut,a=t.dataCy,{match:nt.pl,data:{type:"action",label:n,icon:r,run:i,keyboardShortcut:o,dataCy:a}}})}}),T.current=!I)},children:(0,x.tZ)(t8.Z,{css:{fill:B,color:B,cursor:"pointer"},className:"lightbulb"})})},ni=function(e){"use strict";(0,ej._)(n,e);var t=(0,eY._)(n);function n(e,r){var i;return(0,ez._)(this,n),(i=t.call(this)).lspClient=e,i.path=r,i.visible=(0,t9.u)(!1),i.coords=(0,t9.u)(null),i.container=A.createRef(),i}var r=n.prototype;return r.toDOM=function(e){this.visible.current=!1;var t=(0,eR.VV)((0,x.tZ)("div",{children:(0,x.tZ)("span",{ref:this.container,children:(0,x.tZ)(nr,{lspClient:this.lspClient,path:this.path,view:e,visible:this.visible})})}));return t.setAttribute("aria-hidden","true"),t.className="cm-code-action",t},r.contains=function(e){var t;return(null===(t=this.container.current)||void 0===t?void 0:t.contains(e))||!1},r.updateDOM=function(){return!0},n}(ey.l9),no=ey.tk.baseTheme({".cm-code-action":{position:"absolute",zIndex:101,top:"calc(50% - 8px)",left:"0",height:"16px",width:"16px",background:"transparent",fontFamily:U.TV.fontFamilyDefault,"& svg":{display:"block"}}}),na=n(22031),nl=n(88626),nc=n(7612),ns=n(7730),nu=n.n(ns),nd=n(25202);function nf(e){var t,n;return null!==(n=null===(t=e.facet(eD.N))||void 0===t?void 0:t.isDocumentSymbolSupported)&&void 0!==n&&n}var nh=ev.Py.define(),np=ev.QQ.define({create:function(){return null},update:function(e,t){var n=e;return(0,ew.j)(t,nh,function(e){n=e.value}),n}});function nm(){return(nm=(0,ep._)(function(e,t,n){var r,i,o,a,l,c,s,u,d;return(0,em.Jh)(this,function(f){switch(f.label){case 0:return[4,e.request.documentSymbol(t,{signal:n})];case 1:if(!(r=f.sent())||r.cancelled||!(i="result"in r&&!r.cancelled?r.result:null))return[2,null];o=[],a=!0,l=!1,c=void 0;try{for(s=i[Symbol.iterator]();!(a=(u=s.next()).done);a=!0)(d=u.value)&&"range"in d&&o.push(d)}catch(e){l=!0,c=e}finally{try{a||null==s.return||s.return()}finally{if(l)throw c}}return[2,o.length?o:null]}})})).apply(this,arguments)}function nv(e){if("Debounced function cancelled"!==e.message)throw e}var ng=ev.QQ.define({create:function(){return[]},update:function(e,t){if(!(0,nc.a)(t,np,"selection"))return e;var n=t.state.field(np);return n?function e(t,n,r){var i=r.find(function(e){var r=e.range;return(0,eb.RL)(t,r.end)>=n&&(0,eb.RL)(t,r.start)<=n});return null==i?[]:i.children?[i].concat(e(t,n,i.children)):[i]}(t.state.doc,t.state.selection.main.head,n):[]},compare:nu()}),ny=n(10711),nb=n(17542),nZ="cm-multiplayer-selection-green",nw="cm-multiplayer-selection-red",nx="cm-multiplayer-selection-blue",nC="cm-multiplayer-selection-gold",n_="cm-multiplayer-selection-purple",nS="cm-multiplayer-selection-teal",nE="cm-multiplayer-selection-pink",nk=ey.tk.theme((p={},(0,eW._)(p,".".concat(nZ),{background:"rgba(27, 196, 125, 0.2)"}),(0,eW._)(p,".".concat(nw),{background:"rgba(239, 85, 51, 0.2)"}),(0,eW._)(p,".".concat(nx),{background:"rgba(24, 160, 251, 0.2)"}),(0,eW._)(p,".".concat(nC),{background:"rgba(255, 199, 0, 1)"}),(0,eW._)(p,".".concat(n_),{background:"rgba(144, 124, 255, 0.2)"}),(0,eW._)(p,".".concat(nS),{background:"rgba(0, 181, 206, 0.2)"}),(0,eW._)(p,".".concat(nE),{background:"rgba(238, 70, 211, 0.2)"}),p)),nT={"#1BC47D":nZ,"#EF5533":nw,"#18A0FB":nx,"#FFC700":nC,"#907CFF":n_,"#00B5CE":nS,"#EE46D3":nE},nR=ev.Py.define(),nD=ev.Py.define(),nI=ev.Py.define(),nG=ev.QQ.define({create:function(){return{}},update:function(e,t){if(!t.changes.empty){var n=function(e){return t.changes.mapPos(Math.min(t.changes.length,e))},r={},i=!0,o=!1,a=void 0;try{for(var l,c=Object.values(e)[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;r[s.id]=(0,b._)((0,y._)({},s),{position:n(s.position),selectionStart:n(s.selectionStart),selectionEnd:n(s.selectionEnd)})}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}e=r}var u=!0,d=!1,f=void 0;try{for(var h,p=t.effects[Symbol.iterator]();!(u=(h=p.next()).done);u=!0){var m=h.value;if(m.is(nb.R)&&(e=(0,y._)({},e)),m.is(nR)&&m.value.position<=t.newDoc.length&&((e=(0,y._)({},e))[m.value.id]=(0,y._)({},m.value)),m.is(nD)&&(e=(0,y._)({},e),m.is(nD)&&delete e[m.value]),m.is(nI)){e=(0,y._)({},e);var v=!0,g=!1,w=void 0;try{for(var x,C=Object.entries(e)[Symbol.iterator]();!(v=(x=C.next()).done);v=!0){var _=(0,Z._)(x.value,2),S=_[0];_[1].username===m.value&&delete e[S]}}catch(e){g=!0,w=e}finally{try{v||null==C.return||C.return()}finally{if(g)throw w}}}}}catch(e){d=!0,f=e}finally{try{u||null==p.return||p.return()}finally{if(d)throw f}}return e},provide:function(e){return[nk,ev.Wl.high((0,ey.EY)({above:!1,class:"cm-multiplayer-cursor-layer",update:function(t){return(0,nc.a)(t,e)},markers:function(t){var n=t.state.field(e,!1);if(!n)return[];var r=[],i=!0,o=!1,a=void 0;try{for(var l,c=Object.values(n)[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value,u=s.selectionStart,d=s.selectionEnd,f=s.color.selection;if(u!==d){var h=ev.jT.range(u,d);r.push.apply(r,(0,w._)(ey.dc.forRange(t,f,h)))}}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return r}}))]}}),nB=ey.tk.theme({".multiplayer-cursor":{width:"2px",left:"0",top:"0"},".multiplayer-cursor .multiplayer-label":{boxShadow:U.TV.shadow1,borderRadius:U.TV.borderRadius4,padding:"1px",position:"absolute",left:"0px",animation:"fadeOut 2s ease-in forwards",color:"white",display:"inline-block",whiteSpace:"nowrap"},".multiplayer-cursor:hover .multiplayer-label":{animation:"auto"}});function nA(e){e.style.transform="translate(-10000px, -10000px)"}function nP(e){var t=document.createElement("div");t.textContent=e.username,t.style.backgroundColor=e.color.cursor,t.classList.add("multiplayer-label");var n=document.createElement("div");return n.classList.add("multiplayer-cursor"),n.style.backgroundColor=e.color.cursor,n.style.position=W.gn?"absolute":"fixed",n.appendChild(t),{dom:n,label:t}}var nN=new Map,nU=[nB,ey.lg.define(function(e){var t=e.state.field(nG,!1),n=new Map((t?Object.values(t):[]).map(function(e){return[e.id,{view:nP(e),cursor:e}]})),r=!0,i=0,o="function"==typeof IntersectionObserver?new IntersectionObserver(function(e){Date.now()>i-50&&e.length>0&&e[e.length-1].intersectionRatio<1&&s()},{threshold:[1]}):null;function a(){o&&(o.disconnect(),n.forEach(function(e){o.observe(e.view.dom)}))}function l(){t&&0!==Object.values(t).length&&(e.inView&&e.requestMeasure(u),r!==e.inView)&&!(r=e.inView)&&n.forEach(function(e){nA(e.view.dom)})}a();var c=null;function s(){null===c&&(c=setTimeout(function(){c=null,l()},50))}window.addEventListener("resize",s);var u={read:function(){return{editorRect:e.scrollDOM.getBoundingClientRect(),dimensions:new Map((t?Object.values(t):[]).map(function(t){var r=n.get(t.id),i=r?function(e,t){var n=nN.get(e);if(n)return n;var r=t.getBoundingClientRect().width;return nN.set(e,r),r}(t.username,r.view.label):null;return[t.id,{position:e.coordsAtPos(t.position),labelWidth:i}]}))}},write:function(e){n.forEach(function(t,n){var r=e.dimensions.get(n);!function(e){var t=e.cursorView,n=e.position,r=e.labelWidth,i=e.editorRect,o=t.dom,a=t.label;if(!n||!r){nA(o);return}var l=n.bottom-n.top;if(n.bottom<=i.top+l||n.top+l>=i.bottom||n.right<i.left-.1||n.left>i.right+.1){nA(o);return}var c=n.left+r-i.right,s="0px";c>0?(s="-".concat(c,"px"),a.style.borderBottomLeftRadius="4px"):a.style.borderBottomLeftRadius="0px",a.style.pointerEvents="none",a.style.transform="translate(".concat(s,", -100%)");var u=W.gn?{x:n.left-i.left+"px",y:n.top-i.top+"px"}:{x:"calc(".concat(n.left,"px + var(--fixed-position-offset-x))"),y:"calc(".concat(n.top,"px + var(--fixed-position-offset-y))")},d=u.x,f=u.y;o.style.transform="translate(".concat(d,", ").concat(f,")"),o.style.height=l+"px"}({cursorView:t.view,position:(null==r?void 0:r.position)||null,labelWidth:(null==r?void 0:r.labelWidth)||null,editorRect:e.editorRect})})},key:Math.random().toString()};return{update:function(r){r.transactions.length&&(i=Date.now());var o=r.state.field(nG,!1);if(!(o!==r.startState.field(nG,!1))){r.geometryChanged&&l();return}var c=new Map,s=new Set;if(o){var u=new Map((0,w._)(n.values()).map(function(e){return[e.cursor.id,e.view]}));Object.values(o).forEach(function(t){var n=u.get(t.id);if(n)s.add(n),c.set(t.id,{view:n,cursor:t});else{var r=nP(t);c.set(t.id,{view:r,cursor:t}),e.dom.appendChild(r.dom)}})}n.forEach(function(e){s.has(e.view)||e.view.dom.remove()}),n=c,t=o,a(),l()},destroy:function(){window.removeEventListener("resize",s),n.forEach(function(e){e.view.dom.remove()}),t=void 0,n=new Map,null==o||o.disconnect(),c&&clearTimeout(c)},maybeMeasure:l}},{eventHandlers:{scroll:function(){this.maybeMeasure()}}})],nL=function(){"use strict";function e(t,n,r,i){var o=this;(0,ez._)(this,e),this.view=t,this.destroyed=!1,this.colors=this.getColorMapFromUsers(i.getActiveUsers()),this.disposes=[],this.updateSelections=null,this.disposes.push(i.onUserLeave(function(e){o.destroyed||o.view.dispatch({effects:nI.of(e.username)})}),i.onActiveUsersChange(function(e){o.destroyed||(o.colors=o.getColorMapFromUsers(e))}),r.watchTextFile(n,{onReady:function(e){var t=e.updateSelections;o.destroyed||(o.updateSelections=t)},onCursor:function(e){if(!o.destroyed){var t=function(e){var t,n=e.cursor,r=e.usernameColorsMap,i=null===(t=n.user)||void 0===t?void 0:t.name;if(i){var o=n.id,a=n.position,l=n.selectionStart,c=n.selectionEnd,s=r[i];if(s&&o&&"number"==typeof a&&"number"==typeof l&&"number"==typeof c)return nR.of({id:o,username:i,position:a,color:{cursor:s,selection:nT[s]||""},selectionStart:l,selectionEnd:c})}}({cursor:e,usernameColorsMap:o.colors});t&&o.view.dispatch({effects:t})}},onRemoveCursor:function(e){o.destroyed||o.view.dispatch({effects:nD.of(e)})},onError:function(){o.updateSelections=null},onMoveOrDelete:function(){o.updateSelections=null}}))}var t=e.prototype;return t.getColorMapFromUsers=function(e){return e.reduce(function(e,t){return t.username&&t.color?(0,b._)((0,y._)({},e),(0,eW._)({},t.username,t.color)):e},{})},t.postUpdate=function(e){if(!(!e.selectionSet||e.transactions.every(function(e){return e.annotation(ev.YW.remote)}))&&this.updateSelections){var t=e.state.selection.ranges.map(function(e){return{position:e.head,selectionStart:e.from,selectionEnd:e.to}});this.updateSelections(t)}},t.destroy=function(){this.destroyed=!0,this.disposes.forEach(function(e){return e()})},e}(),nO=new ec.j(function(e,t,n){return[nU,nG,ey.lg.define(function(r){return new nL(r,e,t,n)},{provide:function(e){return ey.tk.updateListener.of(function(t){var n;return null===(n=t.view.plugin(e))||void 0===n?void 0:n.postUpdate(t)})}})]}),nM=function(){"use strict";function e(t,n){var r=this;(0,ez._)(this,e),this.view=t,this.presence=n,this.destroyed=!1,this.followed=null,this.dispose=n.onFollowedUserChanged(function(e){return r.onFollowedUserChanged(e)}),Promise.resolve().then(function(){r.onFollowedUserChanged(n.getFollowedUser())})}var t=e.prototype;return t.onFollowedUserChanged=function(e){var t=this;if(!this.destroyed&&(this.followed=e,this.followed)){var n=this.view.state.field(nG,!1);if(n){var r=Object.values(n).find(function(e){var n;return e.username===(null===(n=t.followed)||void 0===n?void 0:n.username)});r&&this.jumpToPosition(r.position)}}},t.jumpToPosition=function(e){this.view.dispatch({effects:[ey.tk.scrollIntoView(ev.jT.cursor(e),{x:"center",y:"center"})]})},t.unfollow=function(){this.presence.getFollowedUser()&&this.presence.unfollowUser()},t.postUpdate=function(e){if(this.followed){var t=void 0,n=!0,r=!1,i=void 0;try{for(var o,a=e.transactions[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value,c=!0,s=!1,u=void 0;try{for(var d,f=l.effects[Symbol.iterator]();!(c=(d=f.next()).done);c=!0){var h=d.value;h.is(nR)&&h.value.username===this.followed.username&&(t=h)}}catch(e){s=!0,u=e}finally{try{c||null==f.return||f.return()}finally{if(s)throw u}}}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}t&&this.jumpToPosition(t.value.position)}},t.destroy=function(){this.destroyed=!0,this.dispose()},e}(),nX=new ec.j(function(e){return ey.lg.define(function(t){return new nM(t,e)},{provide:function(e){return ey.tk.updateListener.of(function(t){var n;return null===(n=t.view.plugin(e))||void 0===n?void 0:n.postUpdate(t)})},eventHandlers:{click:function(){this.unfollow()},wheel:function(){this.unfollow()},keydown:function(e){"Control"!==e.key&&"Meta"!==e.key&&this.unfollow()}}})}),nF=n(87584),nW=n(30084),nH=n(63009),nV=n(54450),nz=n(13474),nj=n(48652),nq=ev.q6.define(),nY=ev.Py.define(),n$=ev.QQ.define({create:function(){return!0},update:function(e,t){return!(0,nc.a)(t,nY)&&e},provide:function(e){return nj.o.from(e)}}),nJ=function(){"use strict";function e(t,n,r,i){var o=this;(0,ez._)(this,e),this.view=t,this.path=n,this.fs=r,this.writeChange=null,this.destroyed=!1,this.debug=(0,b._)((0,y._)({},i),{latestReceivedVersion:0,openVersion:0,initiatedChanges:0,previousInitiatedChanges:null}),this.dispose=r.watchTextFile(n,{onReady:function(e){var n=e.initialContent,r=e.writeChange,i=e.version;o.destroyed||(o.debug.latestReceivedVersion=i,o.debug.openVersion=i,o.debug.setBsodFilePathVersion({filePath:o.path,version:i}),o.debug.trackTimeToLoadFileEnd(o.path),o.writeChange=r,t.dispatch({changes:{from:0,to:t.state.doc.length,insert:n},effects:nY.of(null),annotations:[ev.YW.addToHistory.of(!1),ev.YW.remote.of(!0),nq.of(!0)]}))},onChange:function(e){var n=e.changes,r=e.changeSource,i=e.version;if(!o.destroyed){o.debug.latestReceivedVersion=i,o.debug.setBsodFilePathVersion({filePath:o.path,version:i});try{t.dispatch({changes:n,annotations:[ev.YW.remote.of(r===nW.Fl.Container),ev.YW.addToHistory.of(r===nW.Fl.Local),nq.of(!0)]})}catch(e){o.debugThrowSyncRemoteOpError(n,r,e)}}},onError:function(){o.destroyed||(o.dispose=null,o.writeChange=null)},onMoveOrDelete:function(){o.destroyed||(o.dispose=null,o.writeChange=null)}})}var t=e.prototype;return t.postUpdate=function(e){if(e.docChanged&&this.writeChange){var t=!0,n=!1,r=void 0;try{for(var i,o=e.transactions[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;if(!(a.annotation(ev.YW.remote)||a.annotation(nq))){this.debug.initiatedChanges++;var l=a.annotation(nV.Z)?{author:"ghostwriter"}:{};try{this.writeChange(a.changes,l),this.debug.previousInitiatedChanges=a.changes}catch(t){this.debugThrowWriteChangeError(e,a,t);break}}}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}}},t.destroy=function(){var e;this.destroyed=!0,null===(e=this.dispose)||void 0===e||e.call(this),this.dispose=null,this.writeChange=null,this.debug.deleteBsodFilePathVersion({filePath:this.path})},t.debugThrowSyncRemoteOpError=function(e,t,n){var r=this;this.fs.readFile(this.path,{fromDisk:!1}).then(function(i){var o="replitReadError: "+i.error;i.error||(o=i.content.toString());var a=r.view.contentDOM.innerText;r.debug.throwBsod({origin:"Codemirror: ot/syncRemoteOp",error:n,tags:{ot:!0},extras:{filePath:r.path,previousChanges:JSON.stringify(r.debug.previousInitiatedChanges),changes:JSON.stringify(e),changeSource:t,otClientDoc:o,domText:a,cmDoc:r.view.state.doc.sliceString(0),openVersion:r.debug.openVersion,version:r.debug.latestReceivedVersion,initiatedChanges:r.debug.initiatedChanges}}),(0,ey.OO)(r.view.state,n)})},t.debugThrowWriteChangeError=function(e,t,n){var r=this;this.fs.readFile(this.path,{fromDisk:!1}).then(function(i){var o="replitReadError: "+i.error;i.error||(o=i.content.toString());var a=e.view.contentDOM.innerText,l=e.view.plugin(nz.k),c=null==l?void 0:l.logs();null==l||l.flush(),r.debug.throwBsod({origin:"Codemirror: ot/writeChange",error:n,tags:{ot:!0},extras:{filePath:r.path,previousChanges:JSON.stringify(r.debug.previousInitiatedChanges),transactionChanges:JSON.stringify(t.changes),otherTransactionChanges:JSON.stringify(e.transactions.filter(function(e){return e!==t}).map(function(e){return e.changes})),transactionDoc:t.newDoc.sliceString(0),updateDoc:e.state.doc.sliceString(0),otClientDoc:o,domText:a,openVersion:r.debug.openVersion,latestReceivedVersion:r.debug.latestReceivedVersion,keystrokes:JSON.stringify(c)}})}),(0,ey.OO)(e.state,n)},e}(),nK=new ec.j(function(e,t,n){return ey.lg.define(function(r){return new nJ(r,e,t,n)},{provide:function(e){return[n$,ey.tk.updateListener.of(function(t){var n;return null===(n=t.view.plugin(e))||void 0===n?void 0:n.postUpdate(t)})]}})}),nQ=n(45086),n0=n(11570),n1=n(92994),n2=n(11516),n8=n(50782),n4=n(8482),n3=n(17491),n5=n(55534);function n6(e,t,n,r){var i=(0,n5.Z)().showError,o=(0,n8.Z)(),a=(0,n3.eR)({variables:{replId:o,path:e},onError:function(e){i(e.message)},skip:!r||t});return A.useMemo(function(){var r;return t||a.loading||a.error||!a.data||(null===(r=a.data.threadsByFile)||void 0===r?void 0:r.__typename)!=="ThreadsByFileResult"?{}:a.data.threadsByFile.threads.filter(function(t){return t.path===e&&(!n||!t.isResolved)}).reduce(function(e,t){return(0,b._)((0,y._)({},e),(0,eW._)({},t.id,t))},{})},[a.loading,a.data,a.error,e,t,n])}var n9=n(50220),n7=n(39327);function re(e,t,n){var r=t.clientWidth,i=n.clientWidth;e.style.maxWidth="".concat(r,"px"),e.style.position="sticky",e.style.zIndex="201",e.style.marginLeft="-".concat(i,"px")}var rt=n(49932),rn=n(6634),rr=n(70671),ri=n(15146),ro=n(11134),ra=n(10028),rl=function(e){var t=e.isOpen,n=e.threadId,r=(0,Z._)((0,A.useState)(!1),2),i=r[0],o=r[1],a=(0,ra.GD)({variables:{id:n},skip:"initial-spacer"===n});(0,A.useEffect)(function(){if(a&&!a.error){var e,t=null===(e=a.data)||void 0===e?void 0:e.thread;t&&o((null==t?void 0:t.__typename)==="AnnotationAnchor"&&(null==t?void 0:t.messages.some(function(e){return!e.seen})))}},[a]);var l={button:{alt:{default:"View threads",close:"Dismiss thread"}}};return(0,x.tZ)(ri.hU,{alt:t?l.button.alt.close:l.button.alt.default,size:24,className:"thread-indicator",css:[U.l0.width(20),U.l0.height(20),U.l0.transition.snappy,U.l0.cursor.pointer,U.l0.display.flex,U.l0.borderRadius(8),U.l0.position.relative,U.l0.overflow("visible"),t?U.l0.color.accentPrimaryStrongest:U.l0.color.foregroundDimmest,{borderWidth:U.TV.borderWidthDefault,borderStyle:"solid",borderColor:t?U.TV.accentPrimaryDefault:"transparent",backgroundColor:t?U.TV.accentPrimaryDimmer:U.TV.backgroundHigher,outline:0},{":hover":{borderColor:t?U.TV.accentPrimaryStronger:U.TV.outlineDimmer,color:t?U.TV.accentPrimaryStrongest:U.TV.foregroundDimmer,background:t?U.TV.accentPrimaryDefault+" !important":U.TV.backgroundHighest},svg:{width:12,height:12}}],children:(0,x.BX)(x.HY,{children:[i?(0,x.tZ)("div",{css:[U.l0.width(8),U.l0.height(8),U.l0.backgroundColor.redStronger,U.l0.position.absolute,U.l0.top(-1),U.l0.left(-1),U.l0.borderRadius("full")]}):null,(0,x.tZ)(ro.Z,{})]})})},rc=function(e){"use strict";(0,ej._)(n,e);var t=(0,eY._)(n);function n(){return(0,ez._)(this,n),t.apply(this,arguments)}var r=n.prototype;return r.compare=function(e){return this==e||this.constructor==e.constructor&&this.eq(e)},r.eq=function(e){return!1},r.destroy=function(e){},n}(ev.uU);rc.prototype.elementClass="",rc.prototype.toDOM=void 0,rc.prototype.mapMode=ev.gc.TrackBefore,rc.prototype.startSide=rc.prototype.endSide=-1,rc.prototype.point=!0;var rs=ev.r$.define(),ru=ev.r$.define(),rd=ev.r$.define({combine:function(e){return e.some(function(e){return e})}}),rf=ey.lg.fromClass(function(){"use strict";function e(t){(0,ez._)(this,e),this.view=t,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-right-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.width="0px",this.dom.style.minHeight=this.view.contentHeight+"px",this.gutters=t.state.facet(ru).map(function(e){return new rv(t,e)});var n=!0,r=!1,i=void 0;try{for(var o,a=this.gutters[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;this.dom.appendChild(l.dom)}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}this.fixed=!t.state.facet(rd),this.fixed&&(this.dom.style.position="sticky",this.dom.style.right="0"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM.nextSibling)}var t=e.prototype;return t.update=function(e){if(e.viewportChanged){var t=this.view.contentDOM.nextElementSibling;t&&t!==this.dom&&t.classList.contains("cm-minimap-gutter")&&e.view.scrollDOM.insertBefore(this.dom,e.view.contentDOM.nextSibling)}if(this.updateGutters(e)){var n=this.prevViewport,r=e.view.viewport,i=Math.min(n.to,r.to)-Math.max(n.from,r.from);this.syncGutters(i<(r.to-r.from)*.8)}e.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(rd)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=e.view.viewport},t.syncGutters=function(e){var t=this,n=this.dom.nextSibling;e&&this.dom.remove();var r=ev.Xs.iter(this.view.state.facet(rs),this.view.viewport.from),i=[],o=this.gutters.map(function(e){return new rm(e,t.view.viewport,-t.view.documentPadding.top)}),a=!0,l=!1,c=void 0;try{for(var s,u=this.view.viewportLineBlocks[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var d=s.value,f=void 0;if(Array.isArray(d.type)){var h=!0,p=!1,m=void 0;try{for(var v,g=d.type[Symbol.iterator]();!(h=(v=g.next()).done);h=!0){var y=v.value;if(y.type==ey.kH.Text){f=y;break}}}catch(e){p=!0,m=e}finally{try{h||null==g.return||g.return()}finally{if(p)throw m}}}else f=d.type==ey.kH.Text?d:void 0;if(f){i.length&&(i=[]),rp(r,i,d.from);var b=!0,Z=!1,w=void 0;try{for(var x,C=o[Symbol.iterator]();!(b=(x=C.next()).done);b=!0)x.value.line(this.view,f,i)}catch(e){Z=!0,w=e}finally{try{b||null==C.return||C.return()}finally{if(Z)throw w}}}}}catch(e){l=!0,c=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw c}}var _=!0,S=!1,E=void 0;try{for(var k,T=o[Symbol.iterator]();!(_=(k=T.next()).done);_=!0)k.value.finish()}catch(e){S=!0,E=e}finally{try{_||null==T.return||T.return()}finally{if(S)throw E}}e&&this.view.scrollDOM.insertBefore(this.dom,n)},t.updateGutters=function(e){var t=e.startState.facet(ru),n=e.state.facet(ru),r=e.docChanged||e.heightChanged||e.viewportChanged||!ev.Xs.eq(e.startState.facet(rs),e.state.facet(rs),e.view.viewport.from,e.view.viewport.to);if(t==n){var i=!0,o=!1,a=void 0;try{for(var l,c=this.gutters[Symbol.iterator]();!(i=(l=c.next()).done);i=!0)l.value.update(e)&&(r=!0)}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}}else{r=!0;var s=[],u=!0,d=!1,f=void 0;try{for(var h,p=n[Symbol.iterator]();!(u=(h=p.next()).done);u=!0){var m=h.value,v=t.indexOf(m);v<0?s.push(new rv(this.view,m)):(this.gutters[v].update(e),s.push(this.gutters[v]))}}catch(e){d=!0,f=e}finally{try{u||null==p.return||p.return()}finally{if(d)throw f}}var g=!0,y=!1,b=void 0;try{for(var Z,w=this.gutters[Symbol.iterator]();!(g=(Z=w.next()).done);g=!0){var x=Z.value;x.dom.remove(),0>s.indexOf(x)&&x.destroy()}}catch(e){y=!0,b=e}finally{try{g||null==w.return||w.return()}finally{if(y)throw b}}var C=!0,_=!1,S=void 0;try{for(var E,k=s[Symbol.iterator]();!(C=(E=k.next()).done);C=!0){var T=E.value;this.dom.appendChild(T.dom)}}catch(e){_=!0,S=e}finally{try{C||null==k.return||k.return()}finally{if(_)throw S}}this.gutters=s}return r},t.destroy=function(){var e=!0,t=!1,n=void 0;try{for(var r,i=this.gutters[Symbol.iterator]();!(e=(r=i.next()).done);e=!0)r.value.destroy()}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}this.dom.remove()},e}(),{provide:function(e){return ey.tk.scrollMargins.of(function(t){var n=t.plugin(e);return n&&0!=n.gutters.length&&n.fixed?t.textDirection==ey.Nm.LTR?{left:n.dom.offsetWidth}:{right:n.dom.offsetWidth}:null})}});function rh(e){return Array.isArray(e)?e:[e]}function rp(e,t,n){for(;e.value&&e.from<=n;)e.from==n&&t.push(e.value),e.next()}var rm=function(){"use strict";function e(t,n,r){(0,ez._)(this,e),this.gutter=t,this.height=r,this.localMarkers=[],this.i=0,this.cursor=ev.Xs.iter(t.markers,n.from)}var t=e.prototype;return t.line=function(e,t,n){this.localMarkers.length&&(this.localMarkers=[]),rp(this.cursor,this.localMarkers,t.from);var r=n.length?this.localMarkers.concat(n):this.localMarkers,i=this.gutter.config.lineMarker(e,t,r);i&&r.unshift(i);var o=this.gutter;if(0!=r.length||o.config.renderEmptyElements){var a=t.top-this.height;if(this.i==o.elements.length){var l=new rg(e,t.height,a,r);o.elements.push(l),o.dom.appendChild(l.dom)}else o.elements[this.i].update(e,t.height,a,r);this.height=t.bottom,this.i++}},t.finish=function(){for(var e=this.gutter;e.elements.length>this.i;){var t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}},e}(),rv=function(){"use strict";function e(t,n){var r=this,i=function(e){r.dom.addEventListener(e,function(r){var i=t.lineBlockAtHeight(r.clientY-t.documentTop);n.domEventHandlers[e](t,i,r)&&r.preventDefault()})};for(var o in(0,ez._)(this,e),this.view=t,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:""),n.domEventHandlers)i(o);this.markers=rh(n.markers(t)),n.initialSpacer&&(this.spacer=new rg(t,0,0,[n.initialSpacer(t)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}var t=e.prototype;return t.update=function(e){var t=this.markers;if(this.markers=rh(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){var n=this.config.updateSpacer(this.spacer.markers[0],e);n!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[n])}var r=e.view.viewport;return!ev.Xs.eq(this.markers,t,r.from,r.to)||!!this.config.lineMarkerChange&&this.config.lineMarkerChange(e)},t.destroy=function(){var e=!0,t=!1,n=void 0;try{for(var r,i=this.elements[Symbol.iterator]();!(e=(r=i.next()).done);e=!0)r.value.destroy()}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}},e}(),rg=function(){"use strict";function e(t,n,r,i){(0,ez._)(this,e),this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(t,n,r,i)}var t=e.prototype;return t.update=function(e,t,n,r){this.height!=t&&(this.dom.style.height=(this.height=t)+"px"),this.above!=n&&(this.dom.style.marginTop=(this.above=n)?n+"px":""),!function(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].compare(t[n]))return!1;return!0}(this.markers,r)&&this.setMarkers(e,r)},t.setMarkers=function(e,t){for(var n="cm-gutterElement",r=this.dom.firstChild,i=0,o=0;;){var a=o,l=i<t.length?t[i++]:null,c=!1;if(l){var s=l.elementClass;s&&(n+=" "+s);for(var u=o;u<this.markers.length;u++)if(this.markers[u].compare(l)){a=u,c=!0;break}}else a=this.markers.length;for(;o<a;){var d=this.markers[o++];if(d.toDOM){d.destroy(r);var f=r.nextSibling;r.remove(),r=f}}if(!l)break;l.toDOM&&(c?r=r.nextSibling:this.dom.insertBefore(l.toDOM(e),r)),c&&o++}this.dom.className=n,this.markers=t},t.destroy=function(){this.setMarkers(null,[])},e}(),ry=ev.r$.define(),rb=ev.r$.define({combine:function(e){return(0,ev.BO)(e,{formatNumber:String,domEventHandlers:{}},{domEventHandlers:function(e,t){var n=Object.assign({},e);for(var r in t)!function(e){var r=n[e],i=t[e];n[e]=r?function(e,t,n){return r(e,t,n)||i(e,t,n)}:i}(r);return n}})}}),rZ=function(e){"use strict";(0,ej._)(n,e);var t=(0,eY._)(n);function n(e){var r;return(0,ez._)(this,n),(r=t.call(this)).number=e,r}var r=n.prototype;return r.eq=function(e){return this.number==e.number},r.toDOM=function(){return document.createTextNode(this.number)},n}(rc);function rw(e,t){return e.state.facet(rb).formatNumber(t,e.state)}function rx(e){for(var t=9;t<e;)t=10*t+9;return t}ru.compute([rb],function(e){return{class:"cm-lineNumbers",renderEmptyElements:!1,markers:function(e){return e.state.facet(ry)},lineMarker:function(e,t,n){return n.some(function(e){return e.toDOM})?null:new rZ(rw(e,e.state.doc.lineAt(t.from).number))},lineMarkerChange:function(e){return e.startState.facet(rb)!=e.state.facet(rb)},initialSpacer:function(e){return new rZ(rw(e,rx(e.state.doc.lines)))},updateSpacer:function(e,t){var n=rw(t.view,rx(t.view.state.doc.lines));return n==e.number?e:new rZ(n)},domEventHandlers:e.facet(rb).domEventHandlers}});var rC=new(function(e){"use strict";(0,ej._)(n,e);var t=(0,eY._)(n);function n(){var e;return(0,ez._)(this,n),e=t.apply(this,arguments),e.elementClass="cm-activeLineGutter",e}return n}(rc));rs.compute(["selection"],function(e){var t=[],n=-1,r=!0,i=!1,o=void 0;try{for(var a,l=e.selection.ranges[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;if(c.empty){var s=e.doc.lineAt(c.head).from;s>n&&(n=s,t.push(rC.range(s)))}}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return ev.Xs.of(t)});var r_=n(51384),rS=n(1498),rE=n(18836),rk=n(23291),rT=n(38080),rR=n(77615),rD=n(41831),rI=n(32377),rG=n(39511),rB=n(24837),rA=function(e){var t=e.caretSize,n=void 0===t?[8,12]:t,r=(0,eq._)(e,["caretSize"]);return(0,x.BX)("svg",(0,b._)((0,y._)({width:n[0],height:n[1],viewBox:"0 0 12 8",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r),{children:[(0,x.tZ)("mask",{id:"outline",fill:"white",children:(0,x.tZ)("path",{d:"M0 8L5.2 1.06667C5.6 0.533333 6.40033 0.533776 6.80033 1.06711C8.67223 3.56297 9.93719 5.24959 12 8H0Z"})}),(0,x.tZ)("path",{d:"M0 8L5.2 1.06667C5.6 0.533333 6.40033 0.533776 6.80033 1.06711C8.67223 3.56297 9.93719 5.24959 12 8H0Z",fill:"url(#gradient-fill)"}),(0,x.tZ)("path",{d:"M0 8L-0.8 7.4L-2 9H0V8ZM12 8V9H14L12.8 7.4L12 8ZM5.2 1.06667L4.4 0.466667L5.2 1.06667ZM6.80033 1.06711L6.00033 1.66711L6.80033 1.06711ZM12 7H0V9H12V7ZM0.8 8.6L6 1.66667L4.4 0.466667L-0.8 7.4L0.8 8.6ZM6.00033 1.66711C7.87223 4.16297 9.13719 5.84959 11.2 8.6L12.8 7.4C10.7372 4.64959 9.47223 2.96297 7.60033 0.467109L6.00033 1.66711ZM6 1.66667L6.00033 1.66711L7.60033 0.467109C6.80082 -0.598902 5.20049 -0.600655 4.4 0.466667L6 1.66667Z",fill:"#0079F2",mask:"url(#outline)"}),(0,x.tZ)("defs",{children:(0,x.BX)("linearGradient",{id:"gradient-fill",x1:"5.07692",y1:"0",x2:"5.07692",y2:"21.3333",gradientUnits:"userSpaceOnUse",children:[(0,x.tZ)("stop",{stopColor:"#57ABFF"}),(0,x.tZ)("stop",{offset:"1",stopColor:"#0079F2"})]})})]}))},rP=n(66610),rN=n(96179),rU=n(87599),rL=n(43704),rO=n(82104),rM=n(67795),rX=n(46056),rF=n(12435),rW=n(63130),rH=n(30456),rV=n(35972),rz=n(26508),rj=n(93049),rq=n(59725),rY=n(15542),r$=function(e){var t,n,r=e.isCreating,i=e.threadId,o=e.filePath,a=e.isResolved,l=e.isLoading,c=e.isPlaceholder,s=e.caretPosition,u=e.onRequestClose,d=e.onResolveThread,f=e.openThreadsInbox,h={viewAll:"Inbox",next:"Next thread",previous:"Previous thread",dismiss:"Collapse"},p=n6(null===o?"":o,l,!0,!0),m=(0,eh.Gn)("fontSize").preferences.fontSize,v=[12,8];switch(m){case 10:v=[8,6];break;case 14:v=[10,6];break;case 18:v=[12,8];break;case 24:v=[14,10]}var g=A.useMemo(function(){return Object.values(p).sort(function(e,t){return e.indexStart-t.indexStart})},[p]),y=A.useMemo(function(){return g.findIndex(function(e){return e.id===i})},[g,i]),b=(0,n7.a9)(),Z=(t=(0,ep._)(function(){return(0,em.Jh)(this,function(e){return b(y===g.length-1?g[0].id:g[y+1].id),[2]})}),function(){return t.apply(this,arguments)}),w=(n=(0,ep._)(function(){return(0,em.Jh)(this,function(e){return b(0===y?g[g.length-1].id:g[y-1].id),[2]})}),function(){return n.apply(this,arguments)});return(0,x.BX)(rT.Tg,{background:"root",css:[U.l0.flex.row,U.l0.align.center,U.l0.justify.spaceBetween,U.l0.position.relative,U.l0.px(12),U.l0.py(8),{borderBottomWidth:U.TV.borderWidthDefault,borderBottomStyle:"solid",borderBottomColor:U.TV.outlineDimmest}],children:[null!==s&&(0,x.tZ)("span",{css:[U.l0.position.absolute,U.l0.top(-v[1]),U.l0.left(s),U.l0.height("fit-content"),U.l0.display.flex,U.l0.flex.row,U.l0.align.center],children:(0,x.tZ)(rA,{caretSize:v})}),(0,x.tZ)(rS.zx,{iconLeft:(0,x.tZ)(rO.Z,{}),onClick:function(){f()},text:h.viewAll,size:"small"}),g.length>1?(0,x.BX)(N.G,{css:[U.l0.flex.row,U.l0.align.center,U.l0.rowWithGap(4)],children:[(0,x.tZ)(ri.hU,{alt:h.previous,onClick:w,children:(0,x.tZ)(rD.Z,{})}),(0,x.BX)(ex.xv,{color:"dimmest",variant:"small",multiline:!1,children:[y+1,"/",g.length]}),(0,x.tZ)(ri.hU,{alt:h.next,onClick:Z,children:(0,x.tZ)(rR.Z,{})})]}):null,(0,x.BX)(N.G,{css:[U.l0.flex.row,U.l0.align.center,U.l0.rowWithGap(4)],children:[r||a||c?null:(0,x.tZ)(rS.zx,{onClick:void 0===d?function(){}:d,text:"Resolve",size:"small",iconLeft:(0,x.tZ)(rI.Z,{})}),!r&&a?(0,x.tZ)(rk.D,{text:"Resolved",colorway:"positive"}):null,(0,x.tZ)(rS.zx,{onClick:void 0===u?function(){}:u,text:h.dismiss,size:"small",iconLeft:(0,x.tZ)(rU.Z,{})})]})]})},rJ=function(e){var t,n,r=e.threadId,i=e.isResolved,o=e.onMessageChange,a=e.onMessageSubmit,l=e.isPlaceholder,c=e.onRequestClose,s=void 0===c?function(){}:c,u=(0,Z._)(A.useState(""),2),d=u[0],f=u[1],h=(0,Z._)(A.useState(eO().v4()),2),p=h[0],m=h[1],v=(0,rL.Z)(),g=v.ref,w=v.update,C=A.useRef(null),_={input:{placeholder:function(){return l?"Start a new thread… (Markdown is supported)":i?"Reply to re-open thread…":"Reply… (Markdown is supported)"}},submit:"Post reply",cancel:"Cancel"},S=function(){var e=d.trim();0!==e.length&&(a({message:e,messageId:p}),f(""),m(eO().v4()))},E=(0,rY.d)(),k=(0,rH.Z)(),T=(0,Z._)((0,rF.Z)({"@":(t=(0,ep._)(function(e){var t,n;return(0,em.Jh)(this,function(r){return t=k.filter(function(e){return e.id!==E}),e&&(n=e.toLowerCase(),t=t.filter(function(e){return e.username.toLowerCase().startsWith(n)})),[2,t.slice(0,5).map(function(e){return{icon:(0,x.tZ)(rX.Z,{username:e.username,fullName:e.fullName,url:e.image,style:{height:"24px",width:"24px",minWidth:"24px",minHeight:"24px"}}),value:e.username}})]})}),function(e){return t.apply(this,arguments)})}),2),R=T[0].suggestions,D=T[1],I=(0,rW.Kb)({items:(null==R?void 0:R.results)||[],defaultHighlightedIndex:0,isOpen:(null!==(n=null==R?void 0:R.results.length)&&void 0!==n?n:0)>0,onSelectedItemChange:function(e){var t=e.selectedItem;if(R&&t){var n=R.applySuggestion({targetValue:d,suggestionValue:t.value}),r=n.fullValue,i=n.cursorIndex;f(r),setTimeout(function(){C.current&&(C.current.setSelectionRange(i,i),C.current.focus(),w())})}}}),G=I.isOpen,P=I.getInputProps,L=I.getMenuProps,O=I.getItemProps,M=I.highlightedIndex,X=I.getComboboxProps;return A.useEffect(function(){var e="threads/drafts/".concat(r),t=n2.Z.get(e,"string");t&&f(t);var n=C.current;return function(){if(n){var t=n.value;if(0===t.length){n2.Z.remove(e);return}n2.Z.set(e,t)}}},[r]),(0,x.BX)(rT.Tg,{background:"root",css:[U.l0.px(12),U.l0.pb(8),U.l0.pt(8),{borderTop:"1px solid ".concat(U.TV.outlineDimmest)}],className:"inline-thread-input",children:[(0,x.BX)("div",(0,b._)((0,y._)({css:[U.l0.flex.row,U.l0.align.start,U.l0.rowWithGap(8),U.l0.width("full")]},X()),{className:"jsx-45ff32690e481e34",children:[l?(0,x.tZ)(rS.zx,{text:_.cancel,onClick:s}):null,(0,x.BX)("div",{css:[{width:"100%"}],className:"jsx-45ff32690e481e34",children:[(0,x.tZ)(rE.B,(0,y._)({},P({ref:function(e){C.current=e,g(e),D(e)},value:d,onChange:function(e){var t=e.target.value;f(t),o({message:t,messageId:p})},onKeyDown:function(e){!G&&(e.preventDownshiftDefault=!0,"Enter"!==e.key||e.shiftKey||(e.stopPropagation(),e.preventDefault(),S(),requestAnimationFrame(function(){w()})))},onKeyUp:function(e){"Escape"===e.key&&(e.stopPropagation(),e.preventDefault(),s())},placeholder:_.input.placeholder(),css:[U.l0.height(32),U.l0.align.start,{resize:"vertical",width:"100%",flexGrow:1}],autoFocus:!0}))),(0,x.tZ)("div",{css:{position:"relative"},className:"jsx-45ff32690e481e34",children:(0,x.tZ)("div",(0,b._)((0,y._)({},L({css:[{position:"absolute",top:U.TV.space2,overflow:"hidden"},U.l0.borderRadius(16),U.l0.shadow(1),U.l0.backgroundColor.backgroundDefault]})),{className:"jsx-45ff32690e481e34",children:null==R?void 0:R.results.map(function(e,t){return(0,r_.az)("div",(0,b._)((0,y._)({},O({item:e,index:t})),{key:e.value,className:"jsx-45ff32690e481e34"}),(0,x.BX)(rV.Ug,{spacing:2,css:[M===t?U.l0.backgroundColor.backgroundHighest:null,U.l0.p(8)],children:[e.icon,(0,x.tZ)("div",{className:"jsx-45ff32690e481e34",children:e.value})]}))})}))})]}),(0,x.tZ)(N.G,{css:[U.l0.pt(4)],children:(0,x.tZ)(ri.hU,{alt:_.submit,tooltipDelay:"long",onClick:S,children:(0,x.tZ)(rG.Z,{})})})]})),(0,x.tZ)(B(),{id:"45ff32690e481e34",children:".inline-thread-input .popover-control-container{-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1}"})]})},rK=function(e){var t,n,r=e.threadId,i=e.isCreating,o=e.isResolved,a=void 0!==o&&o,l=e.view,c=e.filePath,s=e.openThreadsInbox,u=(0,rP.Z)(r,l,c),d=u.thread,f=u.loading,h=u.isPlaceholder,p=u.getLatestAnchor,m=u.updateThread,v=u.changeThreadMessage,g=u.finalizeThreadMessage,y=function(){null==l||l.dispatch({effects:[n9.YM.of(null)]})},b=(0,eh.Gn)("fontSize").preferences.fontSize,Z=(0,A.useRef)(null);(0,rq.Z)(d);var C=p(),_=l&&!f&&"number"==typeof(null==C?void 0:C.indexEnd)&&C.indexEnd<=l.state.doc.length?null===(n=l.coordsAtPos(C.indexEnd))||void 0===n?void 0:n.left:null,S=(null==l?void 0:l.dom.getBoundingClientRect().left)||null,E=b;switch(b){case 10:E=13;break;case 14:E=19;break;case 18:E=25;break;case 24:E=34}var k=(0,n5.Z)().showConfirm,T=(0,n8.Z)(),R=(0,A.useRef)(null),D=function(){R.current&&(R.current.scrollTop=R.current.scrollHeight)};A.useEffect(function(){setTimeout(function(){D()},0)},[null==d?void 0:d.messages]);var I=A.useMemo(function(){return(null==d?void 0:d.messages)?(0,w._)(d.messages).sort(function(e,t){return Date.parse(e.timeCreated)-Date.parse(t.timeCreated)}):[]},[null==d?void 0:d.messages]),G=(t=(0,A.useRef)(0),(0,rz.Z)(function(e){var n=e.height;n!==t.current&&(null==l||l.requestMeasure()),t.current=n}));return(0,x.tZ)("div",{css:[U.l0.width("100%"),U.l0.backgroundColor.backgroundRoot],children:(0,x.BX)(N.G,{innerRef:(0,rj.l)(Z,G),css:[U.l0.font.default,{borderTopWidth:U.TV.borderWidthDefault,borderBottomWidth:U.TV.borderWidthDefault,borderStyle:"solid",borderColor:U.TV.accentPrimaryDefault}],children:[h||f?null:(0,x.tZ)(r$,{isCreating:i,isResolved:a,isLoading:f,threadId:r,filePath:c,caretPosition:_&&S?_-S-6:null,isPlaceholder:h,onRequestClose:y,onResolveThread:function(){m({changes:{isResolved:!0}}),k("Thread resolved. You can reopen it from the inbox.")},openThreadsInbox:s}),f&&!h?(0,x.tZ)(N.G,{css:[U.l0.height(E)],children:(0,x.tZ)(rN.Z,{viewBox:"0 0 400 21",backgroundColor:U.TV.accentPrimaryDimmest,backgroundOpacity:0,foregroundColor:U.TV.accentPrimaryDimmest,foregroundOpacity:.2,speed:1,children:(0,x.tZ)("rect",{x:"0",y:"0",width:"100%",height:"100%"})})}):(0,x.BX)(x.HY,{children:[!i&&I.length>0?(0,x.tZ)("div",{css:[U.l0.px(12),U.l0.py(12),U.l0.maxHeight(300),U.l0.overflowY("auto"),U.l0.colWithGap(16),U.l0.fontSize(b)],ref:R,children:I.map(function(e){return(0,x.tZ)(rB.Z,{thread:d,message:e},e.id)})}):null,(0,x.tZ)(rJ,{threadId:r,isPlaceholder:h,isResolved:a,onRequestClose:y,onMessageChange:v,onMessageSubmit:function(e){g(e),(0,tv.j)(rM.U3.MESSAGE_SENT,{replId:T,source:"threads",newThread:h})}})]})]})})},rQ=function(e){"use strict";(0,ej._)(n,e);var t=(0,eY._)(n);function n(e,r,i){var o;return(0,ez._)(this,n),(o=t.call(this)).id=e,o.filePath=r,o.openThreadsInbox=i,o}var r=n.prototype;return r.eq=function(e){return e.id===this.id},r.toDOM=function(e){var t=(0,eR.VV)((0,x.tZ)(rK,{threadId:this.id,view:e,filePath:this.filePath,openThreadsInbox:this.openThreadsInbox}));t.className="cm-thread-portal-widget";var n=e.dom.querySelector(".cm-scroller"),r=e.dom.querySelector(".cm-gutters");return n&&r&&re(t,n,r),t},r.ignoreEvent=function(){return!0},n}(ey.l9),r0=function(e){"use strict";(0,ej._)(n,e);var t=(0,eY._)(n);function n(e,r){var i;return(0,ez._)(this,n),(i=t.call(this)).id=e,i.active=r,i}var r=n.prototype;return r.toDOM=function(e){var t=this,n=(0,eR.VV)((0,x.tZ)(rl,{isOpen:this.active,threadId:this.id}));return n.className="cm-thread-indicator",n.style.display="inline",n.style.cursor="pointer",n.setAttribute("aria-hidden","true"),n.onclick=function(n){n.stopPropagation(),n.preventDefault(),e.dispatch({effects:[n9.YM.of(e.state.field(n9.PQ)===t.id?null:t.id)]})},n},r.eq=function(e){return e.id===this.id&&e.active===this.active},n}(rc),r1=[(i=[rf],r&&!1===r.fixed&&i.push(rd.of(!0)),i),ru.of((0,y._)({},{class:"",renderEmptyElements:!1,elementStyle:"",markers:function(){return ev.Xs.empty},lineMarker:function(){return null},lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},{class:"cm-thread-indicator-gutter",markers:function(e){var t=e.state.field(n9.OQ),n=e.state.field(n9.PQ);return ev.Xs.of(Object.values(t).filter(function(e){return e.indexEnd!==e.indexStart}).map(function(t){var r=e.state.doc.lineAt(Math.min(t.indexStart,t.indexEnd)).from;return new r0(t.id,t.id===n).range(r)}),!0)},initialSpacer:function(){return new r0("initial-spacer",!1)}}))],r2=function(e,t,n,r,i){if(t===n)return null;var o=(0,Z._)(r,2),a=o[0],l=o[1];return ey.p.mark({class:"replit-thread-highlight cm-thread-".concat(e),attributes:{style:"background-color: ".concat(i?l:a)},id:e}).range(t,n)},r8=new ec.j(function(e,t,n){return e&&n?[ev.Wl.highest(r1),n9.cR,n9.OQ,n9.ZS,n9.PQ,ey.tk.decorations.compute([n9.OQ,n9.ZS,n9.PQ],function(e){var n=e.field(n9.OQ),r=e.field(n9.ZS),i=e.field(n9.PQ),o=r||Object.values(n).find(function(e){return e.id===i});return ey.p.set((0,w._)(Object.values(n)).map(function(e){var n=o&&e.id===o.id;return r2(e.id,e.indexStart,e.indexEnd,t,n)}).filter(function(t){return null!==t&&t.from!==t.to&&t.from<=e.doc.length&&t.to<=e.doc.length}),!0)}),ey.tk.decorations.compute([n9.OQ,n9.ZS,n9.PQ,tG.Yp],function(e){var t=e.field(n9.OQ),r=e.field(n9.ZS),i=e.field(n9.PQ),o=e.facet(tG.Yp);if(void 0===o)return ey.p.none;var a=(0,w._)(Object.values(t)).concat((0,w._)(r?[r]:[])).filter(Boolean).find(function(e){return e.id===i});return a?ey.p.set([ey.p.widget({widget:new rQ(a.id,o,n),block:!0,side:1}).range(a.indexEnd)],!0):ey.p.none}),ey.tk.updateListener.of(function(e){(0,ew.j)(e,nb.R,function(){var t=(0,w._)(e.view.dom.querySelectorAll(".cm-thread-portal-widget")),n=e.view.dom.querySelector(".cm-scroller"),r=e.view.dom.querySelector(".cm-gutters");if(t.length&&n&&r){var i=!0,o=!1,a=void 0;try{for(var l,c=t[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;re(s,n,r)}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}}})}),ey.tk.updateListener.of(function(e){(0,ew.j)(e,n9.eR,function(t){var n=t.value,r=e.state.field(n9.OQ)[n];r&&e.view.dispatch({selection:{anchor:r.indexStart,head:r.indexStart},effects:[ey.tk.scrollIntoView(r.indexStart,{x:"center",y:"center"})]})})})]:null}),r4=n(1323),r3=n(62808),r5=n(77510),r6=n(83311),r9=n(89446),r7=n(38041),ie=n(19659),it=n(30911),ir=n.n(it),ii=n(9669),io=n(77858),ia=n(61018),il=n(77589);function ic(e){return{filePath:e,text:"",selections:[],hasFocus:!1}}function is(e,t){var n;return null==t?ic(e):{filePath:e,text:null!==(n=t.state.doc.toString())&&void 0!==n?n:"",selections:t.state.selection.ranges.map(function(e){var t=e.from;return{location:t,length:e.to-t}}),hasFocus:t.hasFocus}}function iu(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ir()(),i=is(e,t),o={messageType:ii.cF.TEXT_EDITOR_STATE,filePath:e,text:i.text,selections:i.selections,hasFocus:i.hasFocus,hasGhostwriterSuggestion:n.hasGhostwriterSuggestion,revisionId:n.revisionId};(0,il.bG)(o,r)}function id(e,t,n,r,i){return r===e&&r===n.textEditorState.filePath&&t===n.textEditorState.filePath&&i===n.revisionId}function ih(e){var t=e.map(function(e){return ev.jT.range(e.location,e.location+e.length)});return ev.jT.create(t)}function ip(e,t,n,r,i){var o=i.payload;if((0,ii.Se)(o))return function(e,t,n,r,i){if(!id(e,t,r,i.filePath,i.revisionId))return!1;var o=ih(i.selections);return n.dispatch({selection:o,scrollIntoView:!0}),!0}(e,t,n,r,o);if((0,ii.m7)(o))return function(e,t,n,r,i){if(!id(e,t,r,i.filePath,i.revisionId))return!1;var o=is(e,n),a=ih(i.selections);return n.dispatch({changes:{from:0,to:o.text.length,insert:i.text},selection:a,scrollIntoView:!0}),!0}(e,t,n,r,o);if((0,ii.ac)(o))return function(e,t,n,r,i){if(!id(e,t,r,i.filePath,i.revisionId))return!1;var o=i.insertionRange,a=ih(i.selections);return n.dispatch({changes:{from:o.location,to:o.location+o.length,insert:i.text},selection:a,scrollIntoView:!0}),!0}(e,t,n,r,o);if((0,ii.fz)(o))return!!id(e,t,r,o.filePath,o.revisionId)&&(n.dispatch(n.state.replaceSelection(o.text)),!0);if((0,ii.T$)(o))id(e,t,r,o.filePath,o.revisionId)&&(0,ia.l)({filePath:e,view:n,clipboardText:o.text});else if((0,ii.aB)(o))switch(o.action){case ii.b9.REQUEST_BLUR:return function(e,t,n,r,i,o){if(!id(e,t,r,i,o))return!1;n.contentDOM.blur()}(e,t,n,r,o.filePath,o.revisionId);case ii.b9.REQUEST_UNDO:return!!id(e,t,r,o.filePath,o.revisionId)&&((0,M.Yw)(n),!0);case ii.b9.REQUEST_REDO:return!!id(e,t,r,o.filePath,o.revisionId)&&((0,M.KX)(n),!0);case ii.b9.REQUEST_INDENT_SELECTION:return!!id(e,t,r,o.filePath,o.revisionId)&&(M.at(n),!0);case ii.b9.REQUEST_DEDENT_SELECTION:return!!id(e,t,r,o.filePath,o.revisionId)&&(M.xi(n),!0);case ii.b9.REQUEST_TOGGLE_COMMENT:return!!id(e,t,r,o.filePath,o.revisionId)&&(M.O8(n),!0);case ii.b9.REQUEST_ACCEPT_GHOSTWRITER_SUGGESTION:return!!id(e,t,r,o.filePath,o.revisionId)&&(0,io.o)(n);case ii.b9.REQUEST_FOCUS:return n.focus(),!0;default:throw Error("Unknown BridgeTextEditorAction.")}else throw Error("Invalid payload.")}var im=n(40028),iv=n(26851),ig=new ec.j(function(e){var t=ey.tk.domEventHandlers({scroll:F()(function(t,n){var r=0,i=0,o=!0,a=!1,l=void 0;try{for(var c,s=n.visibleRanges[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var u=c.value;r=Math.min(r,u.from),i=Math.max(r,u.to)}}catch(e){a=!0,l=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}e("user:scroll",{visibleLines:{from:n.state.doc.lineAt(r).number,to:n.state.doc.lineAt(i).number}})},250)}),n=F()(function(t,n,r){e("user:selection",{inputMethod:r,from:t,to:n})},250);return[t,ey.tk.updateListener.of(function(t){var r=t.transactions,i=!0,o=!1,a=void 0;try{for(var l,c=r[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;s.isUserEvent("input.paste")&&e("user:paste",{}),s.isUserEvent("input.drop")&&e("user:new-drop",{}),s.isUserEvent("move.drop")&&e("user:move-drop",{}),s.isUserEvent("delete.cut")&&e("user:cut",{}),s.isUserEvent("input.complete")&&e("user:complete",{}),s.isUserEvent("select")&&n(s.newSelection.main.from,s.newSelection.main.to,s.isUserEvent("select.pointer")?"pointer":"keyboard"),s.isUserEvent("undo")&&e("user:undo",{}),s.isUserEvent("redo")&&e("user:redo",{})}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}})]}),iy=n(11398),ib=n(67696);function iZ(e){var t=e.selection.main.head,n=e.doc.lineAt(t);return{offset:t,line:n.number,column:t-n.from+1}}var iw=new ec.j(function(e){return ey.tk.focusChangeEffect.of(function(t,n){var r=t.facet(tG.Yp);return r&&e(r,n?{type:"focus",position:iZ(t)}:{type:"blur"}),null})}),ix=new ec.j(function(e){return ey.tk.updateListener.of(function(t){if(t.selectionSet){var n=t.state.facet(tG.Yp);n&&e(n,{type:"update",hasFocus:t.view.hasFocus,position:iZ(t.state)})}})}),iC=function(e){"use strict";(0,ej._)(n,e);var t=(0,eY._)(n);function n(e){var r;return(0,ez._)(this,n),(r=t.call(this)).type=e,r}return n.from=function(e){switch(e){case"yours":return this.yours;case"base":return this.base;case"middle":return this.middle;case"theirs":return this.theirs}},n.range=function(e,t,n){return this.from(e).range(t,n)},n}(ev.uU);function i_(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:7,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length,i=[],o=n;o<=r;){var a=e.lineAt(o),l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:7;if(e.text.length<t)return null;var n=e.text[0],r=function(e){switch(e){case"<":return"yours";case"|":return"base";case"=":return"middle";case">":return"theirs";default:return null}}(n);if(!r)return null;var i=n.repeat(t);return e.text.slice(0,t)!==i||e.text.length>t&&" "!==e.text[t]?null:r}(a,t);l&&i.push(iC.range(l,a.from,a.to)),o=a.to+1}return i}iC.yours=new iC("yours"),iC.base=new iC("base"),iC.middle=new iC("middle"),iC.theirs=new iC("theirs");var iS=["yours","base","middle","theirs"];function iE(e){Array.isArray(e)&&(e=ev.Xs.of(e));var t=[],n=[];if(0===e.size)return{hunks:t,hanging:n};for(var r=e.iter();null!==r.value;){var i,o,a,l={},c={},s=[],u=!0,d=!1,f=void 0;try{for(var h,p=iS[Symbol.iterator]();!(u=(h=p.next()).done);u=!0){var m=h.value,v=r.value,g=r.from,y=r.to;if("base"!==m||v.type===m){if(v.type===m)l[m]={from:g,to:y},s.push({from:g,to:y,type:v.type});else if("yours"!==v.type)s.push({from:g,to:y,type:v.type});else break;if(r.next(),null===r.value)break}}}catch(e){d=!0,f=e}finally{try{u||null==p.return||p.return()}finally{if(d)throw f}}if(!l.yours||!l.middle||!l.theirs){n.push.apply(n,(0,w._)(s));continue}null!==(i=l.base)&&void 0!==i||(l.base=null),null!==(o=c.base)&&void 0!==o||(c.base=null);var b=null!==(a=l.base)&&void 0!==a?a:l.middle,Z=l.yours.to+1,x=b.from-1;if(c.yours=Z<x?{from:Z,to:x}:null,l.base){var C=l.base.to+1,_=l.middle.from-1;c.base=C<_?{from:C,to:_}:null}var S=l.middle.to+1,E=l.theirs.from-1;c.theirs=S<E?{from:S,to:E}:null;var k={from:l.yours.from,to:l.theirs.to,markers:l,content:c};t.push(k)}return{hunks:t,hanging:n}}var ik=ev.r$.define({combine:function(e){return e.length?e[0]:7}}),iT=ev.QQ.define({create:function(e){var t=e.doc,n=e.facet(ik),r=ev.Xs.of(i_(t,n)),i=iE(r);return{markers:r,hunks:i.hunks,hanging:i.hanging}},update:function(e,t){var n=t.newDoc,r=t.startState.facet(ik),i=t.state.facet(ik);if(r!==i){var o=ev.Xs.of(i_(n,i)),a=iE(o);return{markers:o,hunks:a.hunks,hanging:a.hanging}}if(!t.docChanged)return e;var l=null,c=null,s=null,u=null;t.changes.iterChangedRanges(function(e,t,n,r){l=null===l?e:Math.min(l,e),c=null===c?t:Math.max(c,t),s=null===s?n:Math.min(s,n),u=null===u?r:Math.max(u,r)});var d=e.markers;if(null!==l&&null!==c){var f=t.startState.doc.lineAt(l).from,h=t.startState.doc.lineAt(c).to;d=d.update({filter:function(){return!1},filterFrom:f,filterTo:h})}d=d.map(t.changes),null!==s&&null!==u&&(d=d.update({add:i_(n,i,s,u)}));var p=iE(d);return{markers:d,hunks:p.hunks,hanging:p.hanging}}}),iR=ey.tk.atomicRanges.from(iT,function(e){return function(){return e.markers}}),iD=ev.yy.changeFilter.of(function(e){var t=e.startState.field(iT);if(!e.docChanged||0===t.markers.size)return!0;var n=e.startState.doc,r=[];return e.changes.iterChanges(function(e,i,o,a,l){var c=l.length,s=Math.max(n.lineAt(e).from-1,0),u=Math.min(n.lineAt(i).to+1,n.length);t.markers.between(s,u,function(t,s){e<=t&&i>=s||0!==c&&(e===s&&"\n"===l.sliceString(0,1)||i===t&&"\n"===l.sliceString(c-1,c))||o===a&&(i===s+1&&0===n.lineAt(i).length||e===t-1&&0===n.lineAt(e).length)||r.push(t-1,s+1)})}),!(r.length>0)||r}),iI=ev.yy.transactionFilter.of(function(e){var t=e.docChanged?e.state.field(iT):e.startState.field(iT);if(0===t.markers.size)return e;var n=e.newSelection,r=!1,i=!1;do{i=!1;for(var o=0;o<n.ranges.length&&"break"!==function(e){var o=n.ranges[e],a=o.from,l=o.to,c=a,s=l;if(t.markers.between(a,l,function(e,t){var n=(e+t)/2;a>e&&a<t&&(c=a<n?e:t),l>e&&l<t&&(s=l<n?e:t)}),c!==a||s!==l){var u,d=o.anchor<o.head?c:s,f=o.anchor<o.head?s:c,h=o.goalColumn,p=null!==(u=o.bidiLevel)&&void 0!==u?u:void 0,m=ev.jT.range(d,f,h,p);return n=n.replaceRange(m,e),i=!0,r=!0,"break"}}(o);o++);}while(i);return r?[e,{selection:n,sequential:!0}]:e}),iG="cm-git-conflict-marker-yours",iB="cm-git-conflict-marker-base",iA="cm-git-conflict-marker-middle",iP="cm-git-conflict-marker-theirs",iN="cm-git-conflict-marker-hanging",iU="cm-git-conflict-content-yours",iL="cm-git-conflict-content-base",iO="cm-git-conflict-content-theirs";function iM(e){var t=e.background,n=e.color,r=e.noBorder,i={color:n,backgroundColor:t,backgroundClip:"padding-box",paddingTop:U.TV.space4,paddingBottom:U.TV.space4,fontWeight:U.TV.fontWeightBold};return void 0!==r&&r||(i.borderLeft="4px solid rgba(0, 150, 255, 0.1)",i.paddingLeft="2px"),i}function iX(e){return{backgroundColor:e.background,backgroundClip:"padding-box",borderLeft:"4px solid rgba(0, 150, 255, 0.1)",paddingLeft:"2px"}}var iF=ey.tk.theme((m={},(0,eW._)(m,".".concat(iG),iM({background:"rgba(0, 150, 255, 0.1)",color:U.TV.blueStrongest,noBorder:!0})),(0,eW._)(m,".".concat(iA),iM({background:"rgba(255, 0, 0, 0.1)",color:U.TV.redStrongest})),(0,eW._)(m,".".concat(iB),iM({background:"rgba(255, 165, 0, 0.1)",color:U.TV.orangeStrongest})),(0,eW._)(m,".".concat(iP),iM({background:"rgba(0, 150, 255, 0.1)",color:U.TV.blueStrongest,noBorder:!0})),(0,eW._)(m,".".concat(iN),iM({background:"rgba(100, 150, 255, 0.1)",color:U.TV.blueStrongest,noBorder:!0})),(0,eW._)(m,".".concat(iU),iX({background:"rgba(0, 255, 0, 0.1)"})),(0,eW._)(m,".".concat(iO),iX({background:"rgba(255, 0, 0, 0.1)"})),(0,eW._)(m,".".concat(iL),iX({background:"rgba(255, 165, 0, 0.1)"})),m)),iW={yours:{marker:ey.p.line({class:iG}),content:ey.p.line({class:iU})},base:{marker:ey.p.line({class:iB}),content:ey.p.line({class:iL})},middle:{marker:ey.p.line({class:iA})},theirs:{marker:ey.p.line({class:iP}),content:ey.p.line({class:iO})},hanging:{marker:ey.p.line({class:iN})}},iH=function(){"use strict";function e(t){(0,ez._)(this,e),this.builder=new ev.f_,this.doc=t}var t=e.prototype;return t.add=function(e,t){var n=this.doc.lineAt(e.from);if(n.to>=e.to){this.builder.add(n.from,n.from,t);return}for(var r=n.from;r<=e.to;)this.builder.add(r,r,t),r=this.doc.lineAt(r).to+1},t.finish=function(){return this.builder.finish()},e}(),iV=ey.tk.decorations.from(iT,function(e){return function(t){var n=new iH(t.state.doc),r=!0,i=!1,o=void 0;try{for(var a,l=e.hunks[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;t.viewport.from>c.to||t.viewport.to<c.from||(n.add(c.markers.yours,iW.yours.marker),c.content.yours&&n.add(c.content.yours,iW.yours.content),c.markers.base&&n.add(c.markers.base,iW.base.marker),c.content.base&&n.add(c.content.base,iW.base.content),n.add(c.markers.middle,iW.middle.marker),c.content.theirs&&n.add(c.content.theirs,iW.theirs.content),n.add(c.markers.theirs,iW.theirs.marker))}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return n.finish()}}),iz=ey.tk.decorations.from(iT,function(e){return function(){var t=new ev.f_,n=!0,r=!1,i=void 0;try{for(var o,a=e.hanging[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;t.add(l.from,l.from,iW.hanging.marker)}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t.finish()}}),ij=[iT,[iR,iD,iI],[ev.Wl.lowest(iF),iV,iz]],iq=n(31157),iY=function(){"use strict";function e(t,n,r,i,o,a){(0,ez._)(this,e),this.original=t,this.current=n,this.chunks=r,this.desc=i,this.pending=o,this.ranges=a}var t=e.prototype;return t.hasChanges=function(){return this.ranges.length>0},t.update=function(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=this.original,a=this.chunks,l=this.desc,c=this.pending,s=this.ranges;if(Math.abs((this.pending?this.pending.length:this.current.length)-t.length)>=250||i){var u=(0,iq.Gj)(l,c,n).pending;a=(0,iq.U_)(o,t,{chunks:a,changesB:u}),l=(0,iq.fu)(a,o.length),c=null,s=(0,iq.Hu)(l)}else c=(r=(0,iq.Gj)(l,c,n)).pending,l=r.desc,s=(0,iq.Hu)(l);return c&&t.eq(o)&&(a=[],l=ev.as.empty(o.length),c=null,s=[]),new e(o,t,a,l,c,s)},t.isAccurate=function(){return null===this.pending},t.getLineChangeType=function(e){var t=this.current.line(e);return 0===this.original.length&&this.current.length>0?iq.dQ.COVERED:(0,iq.dx)(t,iq.MF.B,this.ranges)},t.iterRanges=function(){return(0,em.Jh)(this,function(e){switch(e.label){case 0:return[5,(0,em.XA)(this.ranges)];case 1:return e.sent(),[2]}})},e.create=function(t,n){var r=(0,iq.U_)(t,n),i=(0,iq.fu)(r,t.length),o=(0,iq.Hu)(i);return new e(t,n,r,i,null,o)},e}(),i$=ev.r$.define({combine:function(e){var t;return null!==(t=e.filter(Boolean)[0])&&void 0!==t?t:null}}),iJ=ev.QQ.define({create:function(){return null},update:function(e,t){var n=t.state.facet(i$);return!n||Math.max(n.lines,t.newDoc.lines)>5e3?null:(e&&e.original.eq(n)?t.docChanged&&(e=e.update(t.newDoc,t.changes,!(t.isUserEvent("input.type")||t.isUserEvent("delete.forward")||t.isUserEvent("delete.backward")))):e=iY.create(n,t.newDoc),e)}}),iK=n(92708),iQ=(0,ey.v5)({class:iK.Tr,renderEmptyElements:!0,lineMarker:function(e,t){var n=e.state.field(iJ,!1);if(!n||!n.hasChanges())return null;if(0===n.original.length)return iK.Vt;var r=e.state.doc.lineAt(t.from);switch(n.getLineChangeType(r.number)){case iq.dQ.COVERED:return iK.vP;case iq.dQ.MODIFIED:return iK.wp;default:return null}},initialSpacer:function(e){return e.state.field(iJ,!1)?iK.Vt:iK.Do},updateSpacer:function(e,t){var n=t.state.field(iJ,!1)?iK.Vt:iK.Do;return e===n?e:n}}),i0=ev.r$.define({enables:function(e){return[i$.computeN([e],function(t){return t.facet(e)}),iK.Lw,iJ,ev.Wl.highest(iQ)]}}),i1=n(10814);(l=v||(v={})).GUTTER_DIFF="GUTTER_DIFF",l.INLINE_DIFF="INLINE_DIFF";var i2=ev.Py.define(),i8=ev.Py.define(),i4=ev.QQ.define({create:function(){return{head:null,mode:"GUTTER_DIFF"}},update:function(e,t){var n=e.head,r=e.mode,i=!0,o=!1,a=void 0;try{for(var l,c=t.effects[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;s.is(i2)?n=s.value:s.is(i8)&&(r=s.value)}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return n!==e.head||r!==e.mode?{head:n,mode:r}:e},provide:function(e){return[i0.from(e,function(e){return"GUTTER_DIFF"===e.mode?e.head:null}),i1.p.from(e,function(e){return"INLINE_DIFF"===e.mode?e.head:null})]}}),i3=function(){"use strict";function e(t,n,r){var i=this;(0,ez._)(this,e),this.view=t,this.git=n,this.path=r,this.disposed=!1,this.dispose=n.onRefresh(function(){return i.fetchThenUpdateState()}),this.fetchThenUpdateState()}var t=e.prototype;return t.fetchThenUpdateState=function(){var e=this;return(0,ep._)(function(){var t,n,r,i,o;return(0,em.Jh)(this,function(a){switch(a.label){case 0:return[4,e.git.getFileContents({path:e.path,revision:"HEAD"})];case 1:if(t=a.sent(),e.disposed||!(n=e.view.state.field(i4,!1)))return[2];return(!(o=null===(i=t.error?null:null!==(r=t.content)&&void 0!==r?r:"")?null:e.view.state.toText(i))!=!n.head||o&&n.head&&!o.eq(n.head))&&e.view.dispatch({effects:i2.of(o)}),[2]}})})()},t.destroy=function(){this.dispose(),this.disposed=!0},e}(),i5=new ec.j(function(e,t,n,r){var i=[];return n||i.push(t?[i4,ey.lg.define(function(n){return new i3(n,e,t)})]:[]),(r||i.push(ij),0===i.length)?null:i}),i6=n(68956),i9=n(58091),i7=n(20142),oe=n(81013),ot=n(50686),on=n(65662),or=n(56981),oi=[or.Gj,or._j,or.yK,or.gm,or.ZF],oo=[or.ZF],oa=new ec.j(function(e,t){return t?null:(0,on.ZP)({key:"mod",rules:e?oi:oo})}),ol=n(18059);function oc(e,t){var n=performance.now();ty.kg.time(e,n-t)}var os=new ec.j(function(e){var t=e?.01:.001;return ev.Wl.highest(ey.tk.domEventHandlers({keydown:function(e){if(Math.random()<t){var n=e.timeStamp;requestAnimationFrame(function(){oc("editor input latency",n),"undefined"!=typeof requestIdleCallback?requestIdleCallback(function(){oc("editor input latency after layout",n)}):setTimeout(function(){oc("editor input latency after layout",n)})})}}}))}),ou=n(35895),od=n(10122),of=n(60417),oh=n(28009),op=n(75595),om=n(46053),ov=n(49344),og=n(80339),oy=(0,tw.X)({buttons:[U.l0.display.flex,U.l0.rowWithGap(4),U.l0.justify.end],input:[U.l0.colWithGap(4),U.l0.flex.grow(1)],gap:[U.l0.colWithGap(16)],label:[U.l0.color.foregroundDimmer,U.l0.fontSize(12),U.l0.height(24),U.l0.justify.center],flexRow:[U.l0.display.flex,U.l0.rowWithGap(8),U.l0.align.center]}),ob={fontFamily:"text-security-disc"},oZ=N.K.label;function ow(e){var t=(0,eo.Z)().secrets,n=(0,A.useId)(),r=(0,A.useId)(),i=(0,Z._)((0,A.useState)(""),2),o=i[0],a=i[1],l=(0,Z._)((0,A.useState)(e.initialValue),2),c=l[0],s=l[1],u=(0,Z._)((0,A.useState)(!1),2),d=u[0],f=u[1],h=(0,A.useRef)(null);return(0,A.useEffect)(function(){if(e.isOpen){var t;null===(t=h.current)||void 0===t||t.focus(),(0,tv.j)(tv.U3.PASTE_SCANNER_USED,{action:"modal_opened",provider:null==e?void 0:e.provider})}},[e.isOpen,null==e?void 0:e.provider]),(0,x.tZ)(om.MT,{contain:!0,children:(0,x.tZ)(ov.u,{isOpen:e.isOpen,onRequestClose:e.onCancel,children:(0,x.BX)(N.G,{css:oy.gap,children:[(0,x.tZ)(ex.xv,{variant:"subheadBig",multiline:!1,children:"Add a key name for your secret value"}),(0,x.BX)(N.G,{css:oy.flexRow,children:[(0,x.BX)(N.G,{css:oy.input,children:[(0,x.tZ)(oZ,{css:oy.label,htmlFor:n,children:"Key"}),(0,x.tZ)(rE.II,{id:n,ref:h,value:o,onChange:function(e){return a(e.target.value)}})]}),(0,x.BX)(N.G,{css:oy.input,children:[(0,x.BX)(N.G,{css:oy.flexRow,children:[(0,x.tZ)(oZ,{css:oy.label,htmlFor:r,children:"Value"}),(0,x.tZ)(ri.hU,{alt:"Toggle Secret",onClick:function(){return f(function(e){return!e})},tooltipPlacement:"top",children:d?(0,x.tZ)(E.Z,{}):(0,x.tZ)(og.Z,{})})]}),(0,x.tZ)(rE.II,{id:r,value:c,onChange:function(e){return s(e.target.value)},style:d?void 0:ob})]})]}),(0,x.BX)(N.G,{css:oy.buttons,children:[(0,x.tZ)(rS.zx,{text:"Cancel",onClick:e.onCancel}),(0,x.tZ)(rS.zx,{colorway:"primary",text:"Save Secret",disabled:0===o.length||0===c.length,onClick:(0,ep._)(function(){return(0,em.Jh)(this,function(n){switch(n.label){case 0:return[4,t.writeSecret({key:o,value:c})];case 1:return n.sent(),e.onSaveSecret(o,c),(0,tv.j)(tv.U3.PASTE_SCANNER_USED,{action:"secret_created",provider:null==e?void 0:e.provider}),[2]}})})})]})]})})})}var ox=n(97411),oC=n(20573),o_=n(74652),oS=(0,tw.X)({hint:[U.l0.align.center,U.l0.border({color:U.TV.outlineDimmer,direction:"top"}),U.l0.color.foregroundDimmest,U.l0.display.flex,U.l0.flex.row,U.l0.px(8),U.l0.py(4),U.l0.rowWithGap(8)],info:[U.l0.p(8)],key:[U.l0.px(4)],wrapper:[U.l0.backgroundColor.backgroundHigher,U.l0.borderRadius(4),U.l0.cursor.default,U.l0.font.default],mobileButtons:[U.l0.flex.grow(1)],mobileHint:[U.l0.justify.center]}),oE={borderTop:"1px solid ".concat(U.TV.outlineDimmer),borderBottom:"1px solid ".concat(U.TV.outlineDimmer),borderRadius:0};function ok(e){return(0,x.BX)(N.G,{css:oS.wrapper,style:e.onMobile?oE:void 0,children:[(0,x.BX)(N.G,{css:oS.info,style:{textAlign:e.onMobile?"center":"inherit"},children:[(0,x.tZ)(N.G,{children:"The value you pasted looks like a secret."}),(0,x.tZ)(N.G,{children:e.supportsSecrets?"Store it securely using our Secrets feature.":"Anyone will be able to see this."})]}),e.onMobile?(0,x.tZ)(oR,(0,y._)({},e)):(0,x.tZ)(oT,(0,y._)({},e))]})}function oT(e){return(0,x.BX)(x.HY,{children:[e.supportsSecrets?(0,x.BX)(N.G,{css:oS.hint,onClick:e.onClickUseSecrets,children:[(0,x.tZ)(ox.Z,{}),"Press",(0,x.tZ)(N.G,{css:oS.key,children:(0,x.tZ)(o_.bM,{keyCombo:"Tab",small:!0})}),"to use Secrets"]}):null,(0,x.BX)(N.G,{css:oS.hint,onClick:e.onClickPasteAnyway,children:[(0,x.tZ)(oC.Z,{}),"Press",(0,x.tZ)(N.G,{css:oS.key,children:(0,x.tZ)(o_.bM,{keyCombo:"Enter",small:!0})}),"to paste anyway"]}),e.supportsSecrets?null:(0,x.BX)(N.G,{css:oS.hint,onClick:e.onClickUndo,children:[(0,x.tZ)(oC.Z,{}),"Press",(0,x.tZ)(N.G,{css:oS.key,children:(0,x.tZ)(o_.bM,{keyCombo:"Escape",small:!0})}),"to undo"]})]})}function oR(e){return(0,x.BX)(N.G,{css:[oS.hint,oS.mobileHint],children:[e.supportsSecrets?(0,x.tZ)(rS.zx,{css:oS.mobileButtons,iconLeft:(0,x.tZ)(ox.Z,{}),text:"Use Secrets",onClick:e.onClickUseSecrets,colorway:"primary"}):null,(0,x.tZ)(rS.zx,{css:oS.mobileButtons,iconLeft:(0,x.tZ)(oC.Z,{}),text:"Paste Anyway",onClick:e.onClickPasteAnyway}),e.supportsSecrets?null:(0,x.tZ)(rS.zx,{css:oS.mobileButtons,iconLeft:(0,x.tZ)(ox.Z,{}),text:"Undo",onClick:e.onClickUndo})]})}var oD=n(68004),oI=n(30249),oG=(0,tw.X)({border:[U.l0.border({color:rt.TV.accentPrimaryDefault,direction:"y",width:1})],title:[U.l0.display.flex,U.l0.rowWithGap(8),U.l0.align.center,U.l0.justify.spaceBetween,U.l0.px(8),U.l0.pt(4),U.l0.font.default],wrapper:[U.l0.backgroundColor.backgroundRoot,U.l0.py(0),U.l0.position.relative,U.l0.zIndex(200)]});function oB(e){return(0,oD.Z)(e.onClose),(0,x.tZ)(om.MT,{autoFocus:!0,contain:!0,children:(0,x.tZ)(N.G,{css:oG.wrapper,children:(0,x.BX)(N.G,{css:oG.border,children:[(0,x.BX)(N.G,{css:oG.title,children:[(0,x.BX)(ex.xv,{multiline:!1,children:["Access the secret ",(0,x.tZ)("strong",{children:e.keyName}),":"]}),(0,x.tZ)(ri.hU,{alt:"Close",onClick:e.onClose,children:(0,x.tZ)(tq.Z,{})})]}),(0,x.tZ)(rT.Tg,{background:"root",children:(0,x.tZ)(oI.Z,{keyName:e.keyName,filePath:e.filePath,onInsert:e.onInsert})})]})})})}var oA=of.V.compute([ou.xg],function(e){var t=e.field(ou.xg).iter();if(null===t.value)return null;for(var n=[];null!==t.value;){var r=t.from,i=t.to,o=t.value;n.push({from:r,to:i,insert:o.result.secret}),t.next()}return n}),oP=function(e){"use strict";(0,ej._)(n,e);var t=(0,eY._)(n);function n(e,r){var i;return(0,ez._)(this,n),(i=t.call(this)).secret=e,i.as=r,i}var r=n.prototype;return r.toDOM=function(e){var t=this,n=(0,eR.VV)((0,x.tZ)(ok,{supportsSecrets:e.state.facet(ou.$X),onMobile:"pocket"===this.as,onClickUseSecrets:function(){e.dispatch({effects:ou.Lo.of(t.secret)})},onClickPasteAnyway:function(){(0,ou.Pz)(e),e.focus()},onClickUndo:function(){e.dispatch({effects:ou.uh.of(t.secret.id)}),e.focus()}}));return"pocket"===this.as&&(n.style.zIndex="200",n.style.position="relative",this.adjustForGutter(n,e)),n},r.updateDOM=function(e,t){return this.adjustForGutter(e,t),!0},r.adjustForGutter=function(e,t){var n=t.dom.querySelector(".cm-gutters");e.style.marginLeft=n?"-".concat(n.clientWidth,"px"):"inherit"},n}(ey.l9),oN=op.t.compute([ou.xv],function(e){var t=e.facet(tG.Yp),n=e.field(ou.xv);return n&&t?{key:"pasteScannerModal",node:function(e){var t;return(0,x.tZ)(ow,{isOpen:!0,initialValue:n.result.secret,provider:n.result.provider,onSaveSecret:(t=(0,ep._)(function(t){var r,i,o,a,l;return(0,em.Jh)(this,function(c){for(r=e.state.field(ou.xg).iter(),i=[];r.value;)o=r.from,a=r.to,(l=r.value).id===n.id&&(i.push(ou.uh.of(l.id)),i.push(ou.Yt.of({secret:t,from:o,to:a}))),r.next();return e.dispatch({effects:(0,w._)(i).concat([ou.ZB.of(null)])}),[2]})}),function(e){return t.apply(this,arguments)}),onCancel:function(){return e.dispatch({effects:ou.ZB.of(null)})}})}}:null}),oU=ey.tk.decorations.compute([ou.Do],function(e){var t=e.field(ou.Do).iter(),n=t.from,r=t.to,i=t.value,o=e.facet(tG.Yp);return i&&o?ey.p.set(ey.p.widget({widget:new oL(i.key,o),side:1,block:!0}).range(n,r)):ey.p.none}),oL=function(e){"use strict";(0,ej._)(n,e);var t=(0,eY._)(n);function n(e,r){var i;return(0,ez._)(this,n),(i=t.call(this)).key=e,i.filePath=r,i}var r=n.prototype;return r.toDOM=function(e){var t=(0,eR.VV)((0,x.tZ)(oB,{keyName:this.key,filePath:this.filePath,onClose:function(){return e.dispatch({effects:ou.qs.of(null)})},onInsert:function(t){e.dispatch(e.state.changeByRange(function(e){return{range:ev.jT.cursor(e.from+t.length),changes:{from:e.from,to:e.to,insert:t}}})),e.focus(),(0,tv.j)(tv.U3.PASTE_SCANNER_USED,{action:"secret_key_inserted"})}}));return this.adjustForGutter(t,e),t},r.updateDOM=function(e,t){return this.adjustForGutter(e,t),!0},r.adjustForGutter=function(e,t){var n=t.dom.querySelector(".cm-gutters");e.style.marginLeft=n?"-".concat(n.clientWidth,"px"):"inherit"},n}(ey.l9),oO=[oA,(c=[ou.xv,ou.xg],s=function(e){return null!=e.field(ou.xv,!1)?null:e.field(ou.xg,!1)||null},[ey.hJ.compute(c,function(e){var t=s(e);if(!t||e.facet(oh.h))return null;for(var n=t.iter();n.value;){var r=function(){var e=new oP(n.value,"tooltip");return{v:{arrow:!0,pos:n.to,create:function(t){return{dom:e.toDOM(t)}}}}}();if("object"===(0,od._)(r))return r.v}return null}),ey.tk.decorations.compute(c,function(e){var t=s(e);if(!t||!e.facet(oh.h))return ey.p.none;for(var n=t.iter();n.value;){var r=new oP(n.value,"pocket");return ey.p.set(ey.p.widget({widget:r,side:1,block:!0}).range(n.to,n.to))}return ey.p.none})]),oN,oU],oM=n(23394),oX=new ec.j(function(e){return[ou.$X.of(!e),ou.Do,ou.xg,ou.xv,oO,ou.Gv]}),oF=ey.tk.theme({"&":{contain:"size"},"& > .cm-scroller":{contain:"strict"}}),oW=ey.tk.theme({".cm-ruler-element":{backgroundColor:U.TV.backgroundHigher}}),oH=ev.QQ.define({create:function(e){return 0===e.doc.length},update:function(e,t){return t.docChanged?0===t.state.doc.length:e}}),oV=(0,ey.EY)({above:!1,class:"cm-ruler-layer",update:function(e){return(0,nc.a)(e,oz,oH,nb.R)},markers:function(e){if(e.state.field(oH,!1))return[];var t=e.state.facet(oz);if(0===t.length)return[];var n=[],r=e.dom.getBoundingClientRect(),i=e.contentDOM.getBoundingClientRect().left-r.left,o=r.width-2,a=Math.max(r.height,e.contentHeight),l=!0,c=!1,s=void 0;try{for(var u,d=t[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var f=u.value,h=i+e.defaultCharacterWidth*f;h<o&&n.push(new ey.dc("cm-ruler-element",h,0,2,a))}}catch(e){c=!0,s=e}finally{try{l||null==d.return||d.return()}finally{if(c)throw s}}return n}}),oz=ev.r$.define({enables:[oH,oV,oW]}),oj=new ec.j(function(e){return e.map(function(e){return oz.of(e)})}),oq=n(8818),oY=ey.tk.theme({"& .cm-gutters.cm-minimap-gutter":{backgroundColor:rt.TV.backgroundDefault,borderLeft:"1px solid ".concat(rt.TV.backgroundHigher)},"& .cm-minimap-box-shadow":{boxShadow:"unset"}}),o$=ev.QQ.define({create:function(e){return 0===e.doc.length||e.doc.lines>1e3},update:function(e,t){return t.docChanged?0===t.state.doc.length||t.state.doc.lines>1e3:e}}),oJ=new ec.j(function(e,t,n){var r=function(){return{dom:document.createElement("div")}};return e?null:[oY,o$,oq.a.compute([iJ,o$],function(e){if(e.field(o$,!1)||"blocks"!==t&&"characters"!==t)return null;var i=e.field(iJ,!1),o={};if(i)for(var a=1;a<=e.doc.lines;a++)switch(i.getLineChangeType(a)){case iq.dQ.COVERED:o[a]=n.values.global.greenDefault;break;case iq.dQ.MODIFIED:o[a]=n.values.global.blueDefault}return{create:r,displayText:t,gutters:[o]}})]}),oK=n(53304),oQ=n.n(oK),o0="".concat('url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"><circle cx="10" cy="10" r="10" fill="black" /></svg>\')',", linear-gradient(transparent, transparent)"),o1="".concat('url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"><path stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" fill="none" d="M2.5 10H15.5M15.5 10L9.5 5M15.5 10L9.5 15M18 4V16"/></svg>\')',", linear-gradient(transparent, transparent)"),o2=ey.tk.theme({".cm-vws-space":{backgroundColor:U.TV.foregroundDimmest,maskImage:o0,maskSize:"0.375ch",maskPosition:"center",maskRepeat:"no-repeat","-webkit-mask-image":o0,"-webkit-mask-size":"0.375ch","-webkit-mask-position":"center","-webkit-mask-repeat":"no-repeat","&.cm-vws-leading":{opacity:.325},"&.cm-vws-enclosed":{opacity:.5},"&.cm-vws-trailing":{opacity:.5},"&.cm-vws-selected":{opacity:.75}},".cm-vws-tab":{backgroundColor:U.TV.foregroundDimmest,maskImage:o1,maskSize:"1.75ch 1.75ch",maskPosition:"center",maskRepeat:"no-repeat","-webkit-mask-image":o1,"-webkit-mask-size":"1.75ch 1.75ch","-webkit-mask-position":"center","-webkit-mask-repeat":"no-repeat","&.cm-vws-leading":{opacity:.325,maskPosition:"left min(95%, 0.25ch) top 50%","-webkit-mask-position":"left min(95%, 0.25ch) top 50%"},"&.cm-vws-enclosed, &.cm-vws-trailing":{opacity:.5,maskPosition:"calc(50% - 0.25ch) 50%","-webkit-mask-position":"calc(50% - 0.25ch) 50%"},"&.cm-vws-selected":{opacity:.75}}}),o8=oQ()(function(e,t,n){var r="cm-vws-".concat(" "===e?"space":"tab"," cm-vws-").concat(t).concat(n?" cm-vws-selected":"");return ey.p.mark({class:r})},function(e,t,n){return"".concat(e,"-").concat(t,"-").concat(n)});function o4(e,t,n){var r=e.facet(o6);if(!r.leading&&!r.enclosed&&!r.trailing&&!r.selected)return[];for(var i=[],o=e.doc.lineAt(t),a=e.doc.lineAt(n),l=o.number;l<=a.number;l++)!function(o){var a=e.doc.line(o),l=a.text.length;if(0!==l){var c=0===a.text.trim().length,s=!!r.selected&&e.selection.ranges.some(function(e){return!e.empty&&e.from<a.to&&e.to>=a.from});if(r.leading||r.enclosed||r.trailing||s){if(c){if(r.leading||r.trailing||s)for(var u=0;u<l;u++)!function(o){var l=a.text[o],c=a.from+o;if(!(c<t)&&!(c>=n)&&(" "===l||"	"===l)){var u=s&&e.selection.ranges.some(function(e){return e.from<=c&&e.to>c});(r.leading||r.trailing||u)&&i.push(o8(l,"trailing",u).range(c,c+1))}}(u);return}for(var d=l-a.text.trimStart().length,f=a.text.trim().length,h=0;h<l;h++)!function(o){var l=a.text[o],c=a.from+o;if(!(c<t)&&!(c>=n)&&(" "===l||"	"===l)){var u=void 0;u=o>=d+f?"trailing":o>d?"enclosed":"leading";var h=s&&e.selection.ranges.some(function(e){return e.from<=c&&e.to>c});(r[u]||h)&&i.push(o8(l,u,h).range(c,c+1))}}(h)}}}(l);return i}var o3=function(){"use strict";function e(t){(0,ez._)(this,e),this.decorations=ey.p.set(o4(t.state,0,t.state.doc.length))}return e.prototype.update=function(e){if((0,nc.a)(e,o6)){this.decorations=ey.p.set(o4(e.state,0,e.state.doc.length));return}var t=e.state.facet(o6);if(e.docChanged||e.selectionSet&&t.selected){var n=this.decorations,r=null,i=null;if(e.selectionSet&&t.selected){var o=e.startState.selection.ranges.filter(function(e){return!e.empty}),a=(0,w._)(e.state.selection.ranges).concat((0,w._)(e.startState.selection.map(e.changes).ranges)).filter(function(e){return!e.empty});o.length&&(r=ev.jT.create(o)),a.length&&(i=ev.jT.create(a))}if(e.docChanged&&e.changes.iterChangedRanges(function(t,n,o,a){var l=ev.jT.range(e.startState.doc.lineAt(t).from,e.startState.doc.lineAt(n).to);r=r?r.addRange(l):ev.jT.create([l]);var c=ev.jT.range(e.state.doc.lineAt(o).from,e.state.doc.lineAt(a).to);i=i?i.addRange(c):ev.jT.create([c])}),r){var l=r.ranges;n=n.update({filter:function(e,t){return!l.some(function(n){return n.from<=e&&n.to>=t})},filterFrom:l[0].from,filterTo:l[l.length-1].to})}e.docChanged&&(n=n.map(e.changes)),i&&(n=n.update({add:i.ranges.map(function(t){return o4(e.state,t.from,t.to)}).flat()})),this.decorations=n}},e}(),o5=ey.lg.fromClass(o3,{decorations:function(e){return e.decorations}}),o6=ev.r$.define({combine:function(e){var t;return null!==(t=e[0])&&void 0!==t?t:{}},enables:[o2,ev.Wl.highest(o5)]}),o9=new ec.j(function(e,t,n,r){return e||t||n||r?o6.of({leading:e,enclosed:t,trailing:n,selected:r}):null}),o7=n(52590),ae=n(9135),at=n(72067),an=n(39426),ar=n(41500),ai=new ec.j(function(e,t,n,r,i){if(!t||!n)return[];var o,a=ae.Lf.of({deprecated:!0,format:(o=(0,ep._)(function(n){var r;return(0,em.Jh)(this,function(i){return 0===n.length?[2,{result:n.toString()}]:(r=ar.Z.from(n.toString()).toBuffer(),[2,t.request({file:{path:e,content:r}}).then(function(e){return e.error||!e.file?{error:!0}:{result:ar.Z.from(e.file.content).toString()}})])})}),function(e){return o.apply(this,arguments)}),supportsRangeFormatting:!1,identifier:"formatter_service",onError:function(){r("Sorry, formatting ".concat(e," failed"),1500)},onSuccess:function(){i("Formatted ".concat(e," successfully"),1500)}});return ev.Wl.lowest(a)}),ao=n(14044),aa=n(31384),al=n(37054),ac=n(58962),as=n(9069),au=n(23896),ad=n(15482),af=n(56729),ah=n(21084),ap=n(1660),am=new ec.j(function(e,t,n,r,i,o,a,l,c,s){return e?e.formatters.map(function(e){var u,d,f;return 2===(d=e.id.split("/")).length&&d[1].includes("languageServer")&&(null==n?void 0:n.isSupportedFile(l))?n&&n.isSupportedFile(l)&&r&&r.isFormatSupported&&a?as.Lf.of({format:(f=(0,ep._)(function(e,t){return(0,em.Jh)(this,function(r){return[2,(t?n.request.formatRange(l,(0,eb.Ih)(e,t),{insertSpaces:i,tabSize:o}):n.request.format(l,{insertSpaces:i,tabSize:o})).then(function(t){return"error"in t||t.cancelled?{error:!0}:t.result?{result:(0,ah.Z)(t.result,e.toString())}:{result:ev.as.empty(e.length)}})]})}),function(e,t){return f.apply(this,arguments)}),supportsRangeFormatting:r.isFormatRangeSupported,identifier:n.clientId,name:n.clientName,onError:function(){s("Sorry, formatting ".concat(l," failed"),1500)},onSuccess:function(){c("Formatted ".concat(l," successfully"),1500)}}):[]:(0,ad.F)(l,e)?as.Lf.of({format:(u=(0,ep._)(function(n,r){var i,o,a,c,s;return(0,em.Jh)(this,function(u){switch(u.label){case 0:if(!e.startCommand)throw Error("Expected formatter command");return i=(0,ap.Z)({container:t}),o=e.startCommand.args.map(function(e){return"$file"===e?l:e}),r&&e.id.includes("prettier")&&o.push("--range-start",String(r.main.from),"--range-end",String(r.main.to)),a="",c="",s=[i.onOutput(function(e){return a+=e}),i.onStderr(function(e){return c+=e}),i.dispose],[4,i.request((0,b._)((0,y._)({},e.startCommand),{args:o,lifecycle:ac.api.Exec.Lifecycle.STDIN,stdin:n.toString()})).then(function(e){var t=e.error;return s.forEach(function(e){return e()}),t?{error:!0,message:c}:{result:a}})];case 1:return[2,u.sent()]}})}),function(e,t){return u.apply(this,arguments)}),supportsRangeFormatting:e.id.includes("prettier"),identifier:e.id,name:e.name,onSuccess:c,onError:s}):null}).filter(Boolean):null}),av=n(34880),ag=n(9331);function ay(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;if(!e.valid)return[];for(var r=[],i=e.getCursor(t),o=i.next();!o.done&&r.length<n;)r.push(o.value),o=i.next();return r}var ab=n(95571),aZ=n(68681),aw=n(94655),ax=n(7444),aC=n(6303),a_=n(50626);function aS(e){return e>420?"large":"small"}var aE=N.K.div,ak=(0,tw.X)({root:[U.l0.rowWithGap(4),U.l0.px(4),U.l0.py(6),{borderBottom:"1px solid",borderColor:U.TV.outlineDimmest}],panelButtonWrapper:[U.l0.center,U.l0.height(32)],content:[U.l0.display.grid,U.l0.flex.growAndShrink(1),{gridTemplateAreas:'"search search-controls"',gridTemplateRows:"1fr",gridTemplateColumns:"1fr max-content",gap:U.TV.space8}],contentExpanded:[{gridTemplateAreas:'"search search-controls" "replace replace-controls"',gridTemplateRows:"1fr 1fr",gridTemplateColumns:"1fr max-content"}],contentExpandedSmall:[{gridTemplateAreas:'"search" "search-controls" "replace" "replace-controls"',gridTemplateRows:"1fr max-content 1fr max-content",gridTemplateColumns:"1fr"}],contentSmall:[{gridTemplateAreas:'"search" "search-controls"',gridTemplateRows:"1fr max-content",gridTemplateColumns:"1fr"}],matchLabel:[U.l0.position.absolute,U.l0.top(0),U.l0.right(0),U.l0.height("100%"),U.l0.center,U.l0.pr(4)],inputControlsSmall:[U.l0.colWithGap(8),U.l0.flex.growAndShrink(1)],searchInputWrapper:[U.l0.position.relative,{gridArea:"search"}],searchControls:[U.l0.display.flex,U.l0.align.center,U.l0.rowWithGap(8),U.l0.flex.wrap,{gridArea:"search-controls"}],replaceInputWrapper:[{gridArea:"replace"}],replaceControls:[U.l0.display.flex,U.l0.align.center,U.l0.rowWithGap(8),U.l0.flex.wrap,{gridArea:"replace-controls"}],searchSettings:U.l0.flex.row,jumpIconButton:[U.l0.height(32),U.l0.width(32)]}),aT=new eR.Jf(A.forwardRef(function(e,t){var n=e.view,r=e.query,i=e.updateQuery,o=(0,Z._)(A.useState(!1),2),a=o[0],l=o[1],c=(0,Z._)(A.useState([]),2),s=c[0],u=c[1],d=(0,Z._)(A.useState(null),2),f=d[0],h=d[1],p=s.length,m=(0,ax.Z)(r),v=(0,ax.Z)(s);function g(){(0,av.g)(n);var e=n.state.selection.main;n.dispatch({effects:ey.tk.scrollIntoView(e.from,{y:"center",x:"center"})}),p<=1||h(function(t){if(null===t){var n=s.findIndex(function(t){return t.from===e.from&&t.to===e.to});return -1===n?1:n+1}return t>=p?1:t+1})}function y(){(0,av.a7)(n);var e=n.state.selection.main;n.dispatch({effects:ey.tk.scrollIntoView(e.from,{y:"center",x:"center"})}),p<=1||h(function(t){if(null===t){var n=s.findIndex(function(t){return t.from===e.from&&t.to===e.to});return -1===n?1:n+1}return t<=1?p||1:t-1})}A.useImperativeHandle(t,function(){return{onSelectionSet:function(){var e=n.state.selection.main,t=v.current.findIndex(function(t){return t.from<=e.anchor&&t.to>=e.anchor});h(-1!==t?t+1:null)},onDocChanged:function(){u(ay(m.current,n.state.doc)),h(null)},onExpandRequested:function(){l(!0)}}},[n,m,v]),A.useEffect(function(){var e=ay(r,n.state.doc);u(e);var t=n.state.selection.main,i=e.findIndex(function(e){return e.from<=t.anchor&&e.to>=t.anchor});h(-1!==i?i+1:null)},[n,r]);var b=(0,Z._)(A.useState(aS(0)),2),w=b[0],C=b[1],_=(0,rz.Z)(function(e){e.width&&C(aS(e.width))});function S(e){return(0,ey.$1)(n,e,"search-panel")}var E=p>0,k=r.search.length>0?"0 / 0":null,T=E?"".concat(f||1," / ").concat(p):k,R=T?8*T.length:null,D=(0,x.BX)(N.G,{css:ak.searchSettings,children:[(0,x.tZ)(aZ.Z,{alt:"case sensitive",icon:(0,x.tZ)(a_.Z,{}),checked:r.caseSensitive,onClick:function(){i({caseSensitive:!r.caseSensitive})}}),(0,x.tZ)(aZ.Z,{alt:"regular expressions",icon:(0,x.tZ)(aC.Z,{}),checked:r.regexp,onClick:function(){i({regexp:!r.regexp})}})]}),I=[ak.content];return"small"!==w&&a?I.push(ak.contentExpanded):"small"===w&&a?I.push(ak.contentExpandedSmall):"small"!==w||a||I.push(ak.contentSmall),(0,x.tZ)(aE,{ref:_,onKeyDown:function(e){S(e)&&e.preventDefault()},children:(0,x.BX)(rT.Tg,{elevated:!0,css:ak.root,children:[(0,x.tZ)(N.G,{css:ak.panelButtonWrapper,children:(0,x.tZ)(ri.hU,{alt:a?"Close replace panel":"Show replace panel",css:ak.jumpIconButton,onClick:function(){l(function(e){return!e})},children:(0,x.tZ)(ag.Z,{rotate:a?90:0,style:{transition:"200ms ease"}})})}),(0,x.BX)(N.G,{css:I,children:[(0,x.BX)(N.G,{css:ak.searchInputWrapper,children:[(0,x.tZ)(aw.h,{style:{padding:4,paddingRight:null!=R?R:void 0},placeholder:"Search",value:r.search,name:"search","main-field":"true",onKeyDown:function(e){if((0,ab.j)(e)&&"f"===e.key){e.currentTarget.select();return}if(!("enter"!==e.key.toLowerCase()||S(e))){if(e.preventDefault(),e.shiftKey){y();return}g()}},onChange:function(e){i({search:e})}}),T?(0,x.tZ)(N.G,{css:ak.matchLabel,children:(0,x.tZ)(ex.xv,{variant:"small",color:"dimmest",multiline:!1,children:T})}):null]}),(0,x.BX)(N.G,{css:ak.searchControls,children:[(0,x.BX)(N.G,{css:U.l0.flex.row,children:[(0,x.tZ)(ri.hU,{css:ak.jumpIconButton,alt:"Previous",onClick:function(){y()},children:(0,x.tZ)(ag.Z,{rotate:-90})}),(0,x.tZ)(ri.hU,{css:ak.jumpIconButton,alt:"Next",onClick:function(){g()},children:(0,x.tZ)(ag.Z,{rotate:90})})]}),(0,x.tZ)(rS.zx,{text:"Select all",onClick:function(){(0,av.i3)(n),n.focus()}}),D]}),a?(0,x.BX)(x.HY,{children:[(0,x.tZ)(N.G,{css:ak.replaceInputWrapper,children:(0,x.tZ)(rE.II,{style:{padding:4},placeholder:"Replacement",name:"replace",value:r.replace,onKeyDown:function(e){"enter"!==e.key.toLowerCase()||S(e)||(e.preventDefault(),(0,av.K9)(n))},onChange:function(e){i({replace:e.target.value})}})}),(0,x.BX)(N.G,{css:ak.replaceControls,children:[(0,x.tZ)(rS.zx,{text:"Replace",onClick:function(){(0,av.K9)(n)}}),(0,x.tZ)(rS.zx,{text:"Replace all",onClick:function(){(0,av.ko)(n)}})]})]}):null]}),(0,x.tZ)(N.G,{css:ak.panelButtonWrapper,children:(0,x.tZ)(ri.hU,{alt:"Close Search Panel",tooltipHidden:!0,onClick:function(){(0,av.N$)(n)},children:(0,x.tZ)(tq.Z,{})})})]})})})),aR=ev.Py.define(),aD=[(0,av.yC)({createPanel:function(e){var t=!1,n=!1,r=!1,i=!1,o=!1,a=function(t){var n,r,i,o,a,l,c=(0,av.uP)(e.state),s=new av.Jb({search:null!==(n=t.search)&&void 0!==n?n:c.search,caseSensitive:null!==(r=t.caseSensitive)&&void 0!==r?r:c.caseSensitive,literal:null!==(i=t.literal)&&void 0!==i?i:c.literal,regexp:null!==(o=t.regexp)&&void 0!==o?o:c.regexp,replace:null!==(a=t.replace)&&void 0!==a?a:c.replace,wholeWord:null!==(l=t.wholeWord)&&void 0!==l?l:c.wholeWord});s.eq(c)||e.dispatch({effects:av.ql.of(s)})},l=aT.create({view:e,query:(0,av.uP)(e.state),updateQuery:a});return{dom:l,top:!0,update:function(t){(0,nc.a)(t,av.ql)&&aT.set(l,{view:e,query:(0,av.uP)(t.state),updateQuery:a}),t.selectionSet&&!i&&(i=!0,requestAnimationFrame(function(){if(!n){var e;i=!1,null===(e=aT.ref(l))||void 0===e||e.onSelectionSet()}})),t.docChanged&&!r&&(r=!0,requestAnimationFrame(function(){if(!n){var e;r=!1,null===(e=aT.ref(l))||void 0===e||e.onDocChanged()}})),(0,nc.a)(t,aR)&&!o&&(o=!0,requestAnimationFrame(function(){if(!n){var e;o=!1,null===(e=aT.ref(l))||void 0===e||e.onExpandRequested()}}))},mount:function(){t||(t=!0,requestAnimationFrame(function(){if(!n){t=!1;var e=l.querySelector("[main-field]");e&&(e.focus(),e.select())}}))},destroy:function(){return n=!0}}}}),ey.$f.of([{win:"Ctrl-h",linux:"Ctrl-h",preventDefault:!0,run:function(e){return!!((0,av.Ep)(e.state)||(0,av.nx)(e))&&(e.dispatch({effects:aR.of(null)}),!0)}}])],aI=n(72282),aG=n.n(aI),aB=new Set,aA=aG()(function(){var e=!0,t=!1,n=void 0;try{for(var r,i=aB[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value;(0,tv.j)(tv.U3.WS_TYPED,{fileExt:o})}}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}aB.clear()},18e4),aP=ey.tk.updateListener.of(function(e){if(e.docChanged){var t=e.state.facet(tG.Yp);if(t){var n=(0,ie.r6)(t)||(0,ie.UO)(t);!e.transactions.some(function(e){return e.annotation(ev.YW.remote)})&&(aB.has(n)||(aB.add(n),aA()))}}}),aN=n(45549),aU=n(50586),aL=function(e){"use strict";(0,ej._)(n,e);var t=(0,eY._)(n);function n(e,r){var i;return(0,ez._)(this,n),(i=t.call(this)).src=e,i.pos=r,i}var r=n.prototype;return r.eq=function(e){return this.src===e.src&&this.pos===e.pos},r.toDOM=function(){var e=document.createElement("img");return e.src=this.src,e.dataset.pos=this.pos.toString(),e.style.maxHeight="64px",e.style.maxWidth="256px",e},r.ignoreEvent=function(){return!1},n}(ey.l9),aO=/"data:image\/\w+;base64,[^"\s]+"/g,aM=Number.MAX_VALUE,aX=new ec.j(function(e){return e?ey.lg.define(function(e){var t=new ey.Y1({regexp:aO,decoration:function(e,t,n){if(void 0===e[0])throw Error("Failed to match image");var r=e[0].substring(1,e[0].length-1);return ey.p.replace({widget:new aL(r,n)})},maxLength:aM});return{matcher:t,deco:t.createDeco(e),update:function(e){e.docChanged&&(this.deco=t.updateDeco(e,this.deco))}}},{decorations:function(e){return e.deco},provide:function(e){return ey.tk.atomicRanges.of(function(t){var n=t.plugin(e);return n?n.deco:ey.p.none})}}):null}),aF=n(83898),aW=n(8131),aH=new ec.j(function(){return(0,ey.CT)()});function aV(e){var t,n,r,i,o,a,l,c,s,u,d,f,h,p,m,v,g,_,S,E,k,T,I,G,B,P,N,U,L,O,X,W,V,z,j,q,Y,$,K,Q,ee,et,ei,ea,ec,eZ,ex,eC,eS,eE,ek,eP,eL,eW,ej,eq,eY,eJ,eK,eQ,e0,e1,e2,e8,e4,e3,e5,e6,e9,e7,te,tt,tn,ti,to,ta,tl,tc,ts,tu,td,tf,th,tZ,tw,tx,tS,tE,tD,tO,tX,tF,tH,tV,tz,tj,tq,tY,t$,t8,t3,t5,t6,t9,ne,nt,nn,nr,ns,nu,nb,nZ,nw=e.filePath,nx=e.autoFocus,nC=e.isHidden,n_=e.deeplink,nS=e.onDeeplinkUpdated,nE=e.openFile,nk=e.openThreadsInbox,nT=e.openPane,nR=(0,eo.Z)(),nD=nR.fs,nI=nR.debuggest,nG=nR.presence,nB=nR.runner,nA=(0,eh.Gn)("rulers","minimapDisplay","showLeadingWhitespace","showEnclosedWhitespace","showTrailingWhitespace","showSelectedWhitespace").preferences,nP=(0,oe.Z)(),nN=nP.ref,nU=nP.view;(0,H.VD)(nU),(0,o7.g)(nU);var nL=(0,nH.uV)(),nM=(0,ol.FS)(),nW=nz.M.use(!!(null==nM?void 0:nM.match(/Chrome/i))&&!!(null==nM?void 0:nM.match(/Android/i))),nV=(0,tM.P5)({controlName:"flag-ultra-hardcore",logFlagToAnalytics:!1}),nq="/replEnvironmentDesktop"===D().pathname,nY=(0,A.useContext)(i6.B3),n$=(0,nH.jT)(),nJ=(n=(t={path:nw,isHidden:nC}).path,r=t.isHidden,i=(0,ib.NH)(),o=iw.use(i),a=ix.use(i),(0,A.useEffect)(function(){i(n,{type:r?"hidden":"unhidden"})},[r,i,n]),(0,A.useEffect)(function(){return function(){i(n,{type:"unmount"})}},[i,n]),(0,A.useMemo)(function(){return[o,a]},[o,a])),n3=(s=(l={view:nU,presence:nG,fs:nD,filePath:nw}).view,u=l.presence,d=l.fs,f=l.filePath,h=nO.use(f,d,u),p=nX.use(u),m=(0,nF.Z)().trackTimeToLoadFileEnd,v=(0,nH.uV)(),g=(0,nH.Id)(),_=(0,nH.I7)(),S=(0,A.useMemo)(function(){return{trackTimeToLoadFileEnd:m,throwBsod:v,setBsodFilePathVersion:g,deleteBsodFilePathVersion:_}},[_,g,v,m]),E=nK.use(f,d,S),k=null===(c=(0,nQ.IK)(s,nj.o))||void 0===c||c,T=(0,A.useMemo)(function(){return[E,h,p]},[E,h,p]),(0,A.useMemo)(function(){return{isLoading:k,extensions:T}},[k,T])),re=n3.isLoading,ri=n3.extensions;G=(I={view:nU,autoFocus:nx,isLoading:re}).view,B=I.isLoading,P=I.autoFocus,A.useEffect(function(){P&&G&&!B&&G.focus()},[G,B,P]),U=(N={view:nU,filePath:nw,isLoading:re}).view,L=N.filePath,O=N.isLoading,X=(0,n8.Z)(),W=function(){var e=(0,A.useContext)(n0.ZP);if(!e)throw Error("Expected codemirror state to be in codemirror state context");return e}(),V=(0,n1.Z)({view:U}),(0,A.useEffect)(function(){var e,t=function(e){var t,r=W.current.fileMap.get(n),i=null!==(t=null==r?void 0:r.scrollPos)&&void 0!==t?t:0;W.current.fileMap.set(n,{scrollPos:i,editorState:e}),a()};if(U&&!O){var n="".concat(X,":").concat(L),r=W.current.fileMap.get(n);if(r&&U.state.doc.eq(r.editorState.doc)){if(U.state.field(M.cE,!1))throw Error("History was preconfigured on this view, if you want to use state cache, please make sure history is not already configured for this view");var i=[];(0,e$.q2)(r.editorState).between(0,U.state.doc.length,function(e,t){i.push(e$.SW.of({from:e,to:t}))}),U.dispatch({effects:(0,w._)(i).concat([ey.tk.scrollIntoView(r.scrollPos,{y:"start"})]),selection:r.editorState.selection}),e=[M.cE.init(function(){return r.editorState.field(M.cE)}),(0,M.m8)()]}else e=(0,M.m8)();var o=!1,a=F()(function(){var e;(null!==(e=globalThis.requestIdleCallback)&&void 0!==e?e:globalThis.requestAnimationFrame)(function(){n2.Z.set("stateCache",(0,n0.oZ)(W.current))})},500),l={read:function(e){if(!o){var t=W.current.fileMap.get(n);if(t){var r=function(e){var t=e.scrollDOM.getBoundingClientRect();if(0===t.top&&0===t.bottom)return null;var n=t.top+e.defaultLineHeight;return e.posAtCoords({x:0,y:n},!1)}(e);null===r||r>t.editorState.doc.length||(W.current.fileMap.set(n,(0,b._)((0,y._)({},t),{scrollPos:r})),a())}}}},c=!1;return U.dispatch({effects:V.reconfigure([e,ey.tk.updateListener.of(function(e){!o&&(t(e.state),c||(c=!0,e.view.requestMeasure(l),setTimeout(function(){return c=!1},500)))})])}),function(){o=!0,U.dispatch({effects:V.reconfigure([])})}}},[U,L,W,O,V]),(0,r3.Y)({view:nU});var ro=(0,aF.ql)(),ra=(j=(z={filePath:nw,isLoading:re,openFile:nE,askGhostwriter:(0,A.useCallback)(function(e){nT({type:"ghostwriterChat"}),ro({chatMessage:e})},[ro,nT])}).filePath,q=z.isLoading,Y=z.openFile,$=z.askGhostwriter,K=(0,eo.Z)().fs,Q=(0,ef.Z)(j),ee=(0,eh.Gn)("codeIntelligence").preferences,et=(0,tM.P5)({controlName:"flag-code-actions-2"}),ei=q||!ee.codeIntelligence||!(null==Q?void 0:Q.isSupportedFile(j)),ea=(0,A.useMemo)(function(){return new tI.R(ei?[]:function(e,t,n,r,i,o){if(!t)return[];var a,l,c,s,u,d,f,h=[(s=(c={lspClient:t,path:n}).lspClient,u=c.path,ey.lg.define(function(e){var t,n,r,i,o,a,l,c;return n=(t={lspClient:s,path:u,view:e}).lspClient,r=t.path,i=t.view,o=eO().v4(),a=function(){var e;return(null!==(e=eX.get(r))&&void 0!==e?e:[])[0]===o},c=null!==(l=eX.get(r))&&void 0!==l?l:[],eX.set(r,(0,w._)(c).concat([o])),n.notify.didOpen(r,i.state.doc.toString()),{id:o,destroy:function(){var e,t=(null!==(e=eX.get(r))&&void 0!==e?e:[]).filter(function(e){return e!==o});n.getServerState()===eM.a.INITIALIZED&&n.isOpen(r)&&n.notify.didClose(r),0===t.length?eX.delete(r):eX.set(r,t)},update:function(e){if(a()&&e.docChanged){var t,i=null===(t=n.getServerCapabilities())||void 0===t?void 0:t.textDocumentSync;if(i!==eU.TextDocumentSyncKind.None&&n.isOpen(r)){if(i===eU.TextDocumentSyncKind.Full){var o,l,c,s,u=e.view.state.doc.toString();n.notify.didChange(r,[{text:u}]);return}n.notify.didChange(r,(o=e.changes,l=e.startState.doc,c=[],s=l,o.iterChanges(function(e,t,n,r,i){var o=i.sliceString(0),a=t-e,l=a+n;c.push({range:{start:(0,eb.sg)(s,n),end:(0,eb.sg)(s,l)},rangeLength:a,text:o}),s=s.replace(n,l,i)}),c))}}}}})),(0,eF.Fq)({lspClient:t,path:n,askGhostwriter:i}),ey.lg.fromClass(function(){"use strict";function n(e){(0,ez._)(this,n),this.dispose=this.listen(e.state.facet(tG.Yp))}var r=n.prototype;return r.update=function(e){(0,nc.a)(e,tG.Yp)&&(this.dispose=this.listen(e.state.facet(tG.Yp)))},r.destroy=function(){this.dispose&&this.dispose()},r.listen=function(n){if(this.dispose&&this.dispose(),n&&(0,tB.Z)(t).isTextDocumentSyncSupported)return e.watchTextFile(n,{onFlush:function(){t.isOpen(n)&&t.notify.didSave(n)}})},n}()),[np,ng,ey.lg.fromClass(function(){"use strict";function e(n){(0,ez._)(this,e),this.abortController=null;var r=this;this.getSymbolMap=(0,nd.Z)((0,ep._)(function(){var e,i;return(0,em.Jh)(this,function(o){switch(o.label){case 0:if(!(e=n.state.facet(tG.Yp)))return[2];return r.abortController=new AbortController,[4,function(e,t,n){return nm.apply(this,arguments)}(t,e,r.abortController.signal)];case 1:return i=o.sent(),n.dispatch({effects:nh.of(i)}),[2]}})}),{wait:200}),nf(n.state)&&this.getSymbolMap().catch(nv)}var n=e.prototype;return n.update=function(e){var t;e.docChanged&&nf(e.state)&&(null===(t=this.abortController)||void 0===t||t.abort(),this.getSymbolMap().catch(nv))},n.destroy=function(){var e;null===(e=this.abortController)||void 0===e||e.abort(),this.getSymbolMap.isScheduled()&&this.getSymbolMap.cancel()},e}())]];return(0,nl.isMobile)()||h.push(new tI.R(function(e){return function(e){var t=e.lspClient,n=e.view,r=n.state.facet(tG.Yp),i=.01>Math.random(),o=0,a=function(e,n){if(i&&r){var o=t.getLanguageId(r);return ty.kg.info("lsp:autocomplete:".concat(e),(0,y._)({languageId:o},n)),(0,tv.j)(tv.U3.LSP_COMPLETION_USED,(0,y._)({type:e,sampleRate:.01},n))}};function l(){return(l=(0,ep._)(function(e){var i,l,c,s,u;return(0,em.Jh)(this,function(d){switch(d.label){case 0:if(!(l=t.getServerCapabilities())||!(null==l?void 0:l.completionProvider)||!(c=function(e,t){var n=e.state,r=e.pos;if(e.explicit)return{triggerKind:eU.CompletionTriggerKind.Invoked};var i=n.doc.lineAt(r),o=i.text[r-i.from-1],a=i.text.substring(0,r-i.from);return(null==t?void 0:t.includes(o))?{triggerKind:eU.CompletionTriggerKind.TriggerCharacter,triggerCharacter:o}:a.match(/\w$/)?{triggerKind:eU.CompletionTriggerKind.Invoked}:null}(e,(null==l?void 0:null===(i=l.completionProvider)||void 0===i?void 0:i.triggerCharacters)||[])))return[2,null];if(o&&t.notify.cancelRequest(o),!r)throw Error("path not found");return o=t.generateId(),n.dispatch({effects:[tT.of(null)]}),[4,t.request.completion(r,(0,eb.sg)(e.state.doc,e.pos),c,{id:o})];case 1:if("error"in(s=d.sent())||(u=s.result,e.aborted||!u))return[2,null];return[2,function(e){for(var t=e.context,n=e.items,r=e.client,i=e.path,o=e.trackCompletion,a=0,l=null!==(B=(0,tg.Z)(t.state))&&void 0!==B?B:"unknown",c=(T=n.filter(function(e){return!!e.label}),R=["label","kind"],D=new Set,T.filter(function(e){var t=R.map(function(t){return e[t]}).join("␞");return!D.has(t)&&(D.add(t),!0)})).map(function(e){var t=e.additionalTextEdits,n={label:e.label,detail:e.detail,apply:function(n,r,a,c){if(e.insertTextFormat===e_.InsertTextFormat.Snippet){var s=[];t&&s.push({changes:t.map(function(e){return tU(n,e)})});var u=new tr(null!==(h=null!==(f=null===(d=e.textEdit)||void 0===d?void 0:d.newText)&&void 0!==f?f:e.insertText)&&void 0!==h?h:e.label);if(e.textEdit&&("range"in e.textEdit)){var d,f,h,p,m=c;a=(p=tN(n.state,e.textEdit.range)).from,c=Math.max(c=p.to,m)}var v=u.apply({view:n,from:a,to:c,path:i,completion:r});n.dispatch.apply(n,(0,w._)(s).concat([v])),o("completion-accepted",{language:l,completionKind:e.kind,insertTextFormat:e.insertTextFormat});return}var g=function(e){var t,n=e.view,r=e.item,i=e.from,o=e.to,a=n.state,l=a.doc,c=a.selection,s=[];if(r.textEdit){if(!("range"in r.textEdit))return;var u=tU(n,r.textEdit);if(!u)return;u.to=Math.max(u.to,c.main.to),s.push(u)}else{var d=r.insertText||r.label,f=n.state.wordAt(o);f&&f.to>o&&d.includes(n.state.doc.sliceString(o,f.to))&&(o=f.to),s.push({from:i,to:o,insert:d})}var h=(0,Z._)(s,1)[0],p="";null===(t=r.additionalTextEdits)||void 0===t||t.forEach(function(e){var t=tU(n,e);t&&(("from"in h)&&t.from===h.from&&(p=t.insert),s.push(t))});var m=o-i;c.ranges.forEach(function(e){if(e!==c.main){if(!("insert"in h)||!h.insert)throw Error("Expected insert in mainChange");var t=e.from-m,n=p+h.insert;s.push({from:t,to:e.to,insert:n})}});var v=s.map(function(e){return("from"in e)&&void 0!==e.to?(0,b._)((0,y._)({},e),{from:Math.min(e.from,e.to),to:Math.max(e.from,e.to)}):e}),g=ev.as.of(v,l.length),w=c.ranges.map(function(e){return e.map(g,0)});return{changes:g,selection:ev.jT.create(w,c.mainIndex)}}({view:n,item:(0,b._)((0,y._)({},e),{additionalTextEdits:t}),to:c,from:a});g&&(o("completion-accepted",{language:l,completionKind:e.kind,insertTextFormat:e.insertTextFormat}),n.dispatch({changes:g.changes,selection:g.selection,annotations:eg.Jv.of(r)}))},type:e.kind&&tP[e.kind],filterText:(e.filterText||e.label).toLowerCase(),sortText:(e.sortText||e.label).toLowerCase()};return r&&(0,tB.Z)(r).isCompletionItemResolveSupported?n.info=(0,ep._)(function(){var n,c,s,u,d;return(0,em.Jh)(this,function(f){switch(f.label){case 0:return[4,r.request.resolveCompletionItem(e)];case 1:if(c=("cancelled"in(n=f.sent()))&&n.cancelled,s=("result"in n)?n.result:null,c||!s||(s.additionalTextEdits&&(t=s.additionalTextEdits),a++,u=[],s.detail&&s.detail!==e.detail&&s.detail!==e.label&&(d=["```"+(0,eV.extname)(i).slice(1),s.detail,"```"].join("\n"),u.push((0,x.tZ)(eT,{className:"lsp-completion-detail",content:{value:d,kind:"markdown"}},"".concat(a,"-detail")))),s.documentation&&u.push((0,x.tZ)(eT,{content:s.documentation},"".concat(a,"-documentation"))),0===u.length))return[2,null];return o("resolution-presented",{language:l,resolutionSource:"request",completionKind:e.kind}),[2,(0,eR.VV)((0,x.tZ)("div",{children:u}))]}})}):e.documentation&&(n.info=function(){return e.documentation?(o("resolution-presented",{language:l,resolutionSource:"documentation",completionKind:e.kind}),(0,eR.VV)((0,x.tZ)("div",{children:(0,x.tZ)(eT,{content:e.documentation})}))):null}),n}),s=((c=c.sort(function(e,t){return e.sortText<t.sortText?-1:e.sortText>t.sortText?1:0})).length%2?c.length-1:c.length)/2,u=0;u<=s;u++){if(0===u&&c[s]){c[s].boost=0;continue}var d=c[s-u];if(d){var f=c[s-u+1],h=f.sortText,p=f.boost,m=void 0===p?0:p;d.boost=d.sortText===h?m:m+1}var v=c[s+u];if(v){var g=c[s+u-1],C=g.sortText,_=g.boost,S=void 0===_?0:_;v.boost=v.sortText===C?S:S-1}}var E=null!==(A=null===(I=c[0])||void 0===I?void 0:I.boost)&&void 0!==A?A:0,k=null!==(P=null===(G=c[c.length-1])||void 0===G?void 0:G.boost)&&void 0!==P?P:0;if(E>99||k<-99)for(var T,R,D,I,G,B,A,P,N,U=99/Math.max(Math.abs(E),Math.abs(k)),L=0;L<c.length;L++)c[L].boost=(null!==(N=c[L].boost)&&void 0!==N?N:0)*U;var O=(0,Z._)(function(e){var t=Object.create(null),n=Object.create(null),r=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value.filterText;t[c[0]]=!0;for(var s=1;s<c.length;s++)n[c[s]]=!0}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}var u=tA(t)+tA(n)+"*$";return[RegExp("^"+u),new RegExp(u)]}(c),2),M=O[0],X=O[1],F=t.matchBefore(X),W=t.pos;return F&&(W=F.from),c.length&&o("completion-options-presented",{language:l}),{from:W,options:c,validFor:M}}({context:e,items:Array.isArray(u)?u:u.items,client:t,path:r,trackCompletion:a})]}})})).apply(this,arguments)}return[t_,tk,tR,(0,eg.ys)({defaultKeymap:!1,closeOnBlur:!1,tooltipClass:function(e){return(0,tm.o)(e)?tC:""},addToOptions:[{render:function(e,t){if(!(0,tm.o)(t))return null;var n=document.createElement("div");return n.className="lsp-completion-keyboard-shortcuts",(0,eH.createRoot)(n).render((0,x.tZ)(tb.C,{children:(0,x.tZ)(tp.ZP,{size:"inherit",shortcut:{key:"⏎"}})})),n},position:200}],override:[(0,eg.eC)(["LineComment","BlockComment"],function(e){return l.apply(this,arguments)})]}),tL]}({lspClient:t,view:e})}),function(e){var t=e.lspClient,n=e.path,r={current:null};function i(){return(i=(0,ep._)(function(e,i){var a,l,c,s,u,d,f;return(0,em.Jh)(this,function(h){switch(h.label){case 0:if(s=(null===(l=t.getServerCapabilities())||void 0===l?void 0:null===(a=l.signatureHelpProvider)||void 0===a?void 0:a.triggerCharacters)||[],u=e.field(o,!1),d=e.field(eB,!1),!u&&(null==d||!s.includes(d)))return[2,null];return[4,function(e,t,n,r,i){return eN.apply(this,arguments)}(e,i,t,n,r)];case 1:if(!(null==(f=h.sent())?void 0:null===(c=f.signatures)||void 0===c?void 0:c.length))return[2,null];return[2,f]}})})).apply(this,arguments)}var o=ev.QQ.define({create:function(){return null},update:function(e,t){return t.isUserEvent("select.pointer")?null:(e&&t.newSelection.main.from!==e.pos&&(e=(0,b._)((0,y._)({},e),{pos:t.newSelection.main.from})),(0,ew.j)(t,eI.effect,function(n){var r=n.value;e=r?{pos:t.newSelection.main.from,help:r,index:0}:null}),(0,ew.j)(t,eG,function(t){var n=t.value;if(e){var r=e.help.signatures.length,i=(r+e.index+n)%r;e=i>=e.help.signatures.length||i<0?null:(0,b._)((0,y._)({},e),{index:i})}}),e)},provide:function(e){var t=function(t){var n=t.state.field(e);if(!n)throw Error("expected nonnull field");var r=eA.create({help:n.help,index:n.index});return{dom:r,update:function(t){eA.update(r,function(r){var i=t.state.field(e);return i&&i!==n?{help:i.help,index:i.index}:r})}}};return ey.hJ.compute([e],function(n){var r=n.field(e);return r?{pos:r.pos,create:t,above:!0}:null})}}),a=ey.lg.define(function(){var e,t=F()((e=(0,ep._)(function(e){var t,n,r;return(0,em.Jh)(this,function(o){switch(o.label){case 0:if(!(t=e.state.selection.main).empty)return[3,2];return n=e.state.field(eI.state,!1),[4,function(e,t){return i.apply(this,arguments)}(e.state,t.from)];case 1:(r=o.sent())&&!n&&(0,eg._B)(e),e.dispatch({effects:eI.effect.of(r)}),o.label=2;case 2:return[2]}})}),function(t){return e.apply(this,arguments)}),0);return{update:function(e){var n,r;null!==(r=null===(n=e.state.facet(eD.N))||void 0===n?void 0:n.isSignatureHelpSupported)&&void 0!==r&&r&&e.transactions.some(function(e){return e.selection})&&e.state.selection.main.empty&&t(e.view)}}});function l(e,t){var n=e.state.field(eI.state,!1);return"active"!==(0,eg.LR)(e.state)&&null!=n&&("navigate"!==t||n.signatures.length>1)}var c=function(e){return function(t){return!!l(t,"navigate")&&(t.dispatch({effects:eG.of(e)}),!0)}},s=[{key:"ArrowDown",run:c(1)},{key:"ArrowUp",run:c(-1)},{key:"Escape",run:function(e){return!!l(e,"dismiss")&&(e.dispatch({effects:eI.effect.of(null)}),!0)}}];return[o,eI.state,eB,a,ev.Wl.high(ey.$f.of(s))]}({lspClient:t,path:n}),(d=null,[(0,ey.bF)((f=(0,ep._)(function(e,n){var r,i,o,a,l,c;return(0,em.Jh)(this,function(s){switch(s.label){case 0:var u,f;if(!(null!==(f=null===(u=e.state.facet(eD.N))||void 0===u?void 0:u.isHoverSupported)&&void 0!==f&&f)||!(r=e.state.facet(tG.Yp)))return[2,null];i=(0,eb.sg)(e.state.doc,n);try{o=e.state.wordAt(n)}catch(e){return[2,null]}if(d){if(d.from===(null==o?void 0:o.from)&&d.to===(null==o?void 0:o.to))return[2,null];t.notify.cancelRequest(d.id)}return d={id:a=t.generateId(),from:null==o?void 0:o.from,to:null==o?void 0:o.to},[4,t.request.hover(r,i,{id:a})];case 1:if(l=s.sent(),d=null,"error"in l||null===(c=l.result))return[2,null];return[2,function(e){var t,n,r=e.hover,i=e.state,o=e.offset;if((Array.isArray(r.contents)||"string"==typeof r.contents)&&0===r.contents.length)return null;var a="",l=i.doc;if(r.range)t=(0,eb.RL)(l,r.range.start),n=(0,eb.RL)(l,r.range.end),a=l.sliceString(t,n);else if(n=void 0,(t=o)<=i.doc.length){var c=i.wordAt(t);c?(a=l.sliceString(c.from,c.to),t=Math.min(t,c.from),n=c.to):a=l.sliceString(t,t+1)}return{pos:t,end:n,create:function(e){var t=(0,eR.VV)((0,x.tZ)(tW,{content:r.contents,textHovered:a})),n=function(){e.dispatch({effects:ey.E8})};return t.classList.add("hover-tooltip"),t.style.padding="0",t.addEventListener("mouseleave",n),{dom:t,mount:function(){!function(e,t){t.forEach(function(t){return setTimeout(e,t)})}(function(){(0,ey.E2)(e)},[0,50,200,1e3])},destroy:function(){t.removeEventListener("mouseleave",n)}}},above:!0}}({hover:c,offset:n,state:e.state})]}})}),function(e,t){return f.apply(this,arguments)}),{hideOn:function(e){return!e.annotation(ev.YW.remote)&&!!(e.isUserEvent("input")||e.isUserEvent("delete")||e.isUserEvent("select"))},hoverTime:0}),ey.tk.domEventObservers({mousedown:function(e,t){!(e.target instanceof HTMLElement&&e.target.matches(".cm-tooltip *"))&&(0,ey.Dm)(t.state)&&t.dispatch({effects:ey.E8})},scroll:function(e,t){(0,ey.Dm)(t.state)&&t.dispatch({effects:ey.E8})}})]),o?(0,ny.D)(t,e):(a=t,l=n,(0,tB.Z)(a).isCodeActionsSupported?[no,ey.lg.fromClass(function(){"use strict";function e(t){(0,ez._)(this,e),this.widget=new ni(a,l),this.decoration=ey.p.widget({widget:this.widget,side:0}),this.updateDecorations(t)}var t=e.prototype;return t.update=function(e){(e.docChanged||e.selectionSet)&&this.updateDecorations(e.view)},t.updateDecorations=function(e){var t,n,r=e.state,i=r.doc,o=r.selection,a=i.lineAt(o.main.from);if(!this.widget.visible.current&&0===i.length){this.decorations=ey.p.none;return}t=a.text,n=/^( {2}|\u3000|\t)/.test(t)||1===a.number&&1===i.lines?a.from:1===a.number?Math.min(i.length,a.to+1):i.lineAt(a.from-1).from,this.decorations=ey.p.set([this.decoration.range(n)])},e}(),{decorations:function(e){return e.decorations}})]:[]),(0,na.jd)({lspClient:t,openFile:r}),function(e){var t,n=e.lspClient,r=e.path,i=e.openFile;if(!i)return[];var o=ev.Py.define(),a=ev.Py.define();return[ey.tk.updateListener.of((t=(0,ep._)(function(e){var t,i,l,c,s,u,d,f,h,p,m,v,g,y,b,x,C,_,S,E,k,T,R,D,I,G,B,A,P,N,U,L;return(0,em.Jh)(this,function(O){switch(O.label){case 0:if(!(t=(0,tB.Z)(n)).isFindReferencesSupported&&!t.isFindDefinitionSupported)return[2];i=null,l=!0,c=!1,s=void 0;try{for(u=e.transactions[Symbol.iterator]();!(l=(d=u.next()).done);l=!0){f=d.value,h=!0,p=!1,m=void 0;try{for(v=f.effects[Symbol.iterator]();!(h=(g=v.next()).done);h=!0)(y=g.value).is(t1.h)&&(i=y.value)}catch(e){p=!0,m=e}finally{try{h||null==v.return||v.return()}finally{if(p)throw m}}}}catch(e){c=!0,s=e}finally{try{l||null==u.return||u.return()}finally{if(c)throw s}}if(!i)return[2];return b=e.state.doc,x=(0,eb.sg)(b,i),C=Promise.all([t.isFindReferencesSupported?n.request.findReferences(r,x,{includeDeclaration:!1}):{result:null},t.isFindDefinitionSupported?n.request.findDefinitions(r,x):{result:null}]),(0,tQ.SC)(e.view,C),[4,C];case 1:if(S=(_=Z._.apply(void 0,[O.sent(),2]))[0],E=_[1],"error"in S)throw Error("Something went wrong fetching references: ".concat(S.error.message));if("error"in E)throw Error("Something went wrong fetching definition: ".concat(E.error.message));if(k=S.result,T=E.result,R=(0,t0.g)(T),D=k&&k.length>0,I=R&&R.length>0,!D&&!I)return(0,tK.J)(e.view,{message:"No references found",offset:i}),e.view.dispatch({effects:a.of(null)}),[2];return G=[],B=[],k&&k.length>0&&(A=G).push.apply(A,(0,w._)(k)),R&&R.length>0&&(P=B).push.apply(P,(0,w._)(R)),N=(0,w._)(G).concat((0,w._)(B)).map(function(e){return n.documentUriToPath(e.uri)}).filter(function(e){return e!==r}),U=(0,w._)(new Set(N)),L=b.toJSON().join("\n"),e.view.dispatch({effects:o.of({references:G,definitions:B,currentFile:r,currentFileContents:L,files:U})}),[2]}})}),function(e){return t.apply(this,arguments)})),ev.QQ.define({create:function(){return null},update:function(e,t){var n=e,r=!0,i=!1,l=void 0;try{for(var c,s=t.effects[Symbol.iterator]();!(r=(c=s.next()).done);r=!0){var u=c.value;u.is(o)&&(n=u.value),u.is(a)&&(n=null)}}catch(e){i=!0,l=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw l}}return n},provide:function(e){return ey.hJ.compute([e],function(t){var n=t.field(e);if(!n)return null;var o=t.selection.asSingle().main;return{pos:o.from,end:o.to,create:function(e){var t=(0,eR.VV)((0,x.tZ)("div",{children:(0,x.tZ)(tJ,(0,b._)((0,y._)({},n),{onClose:function(){e.dispatch({effects:a.of(null)})},jumpToPosition:function(t){if(i){if(t.path!==r){i(t);return}var n=t.line,o=t.col;(0,ed.S)({view:e,line:n,col:o}),e.focus()}}}))}));return t.classList.add("cm-lsp-tooltip"),t.classList.add("replit-tooltip"),t.style.padding="0",{dom:t}}}})}})]}({lspClient:t,path:n,openFile:r}),(0,t2.f)(e,t)),h}(K,Q,j,Y,$,et))},[$,Q,j,K,Y,ei,et]),ec=(0,A.useMemo)(function(){return new tI.R(function(){return Q?eD.T.of((0,tB.Z)(Q)):null})},[Q]),(0,A.useEffect)(function(){return!Q||ei?ea.set(null):Q.onServerCapabilitiesChange(function(){ec.set(eD.T.of((0,tB.Z)(Q)))})},[ec,Q,ea,ei]),[ec.extension,ea.extension,(0,eF.wB)(Q,ee.codeIntelligence)]),rl=(ex=(eZ={debuggest:nI,filePath:nw}).debuggest,eC=eZ.filePath,eS=(0,eo.Z)().fs,eE=(0,el.Z)(),ek=(0,er.Z)(ex.mainClient),es.use(ek,eE,eC,eS));(0,ed.Z)({filePath:nw,view:nU,isLoading:re,deeplink:n_,onDeeplinkUpdated:nS});var rc=aX.use((0,en.f6)()),rs=(eW=(eP={view:nU,filePath:nw}).view,ej=eP.filePath,eq=(0,eo.Z)().fs,eY=(0,en.xZ)(null!==(eL=null==eW?void 0:eW.state.facet(tG.Yp))&&void 0!==eL?eL:null),(0,Z._)((0,r5.L)({accept:[J.z.Code,r6.FILE],drop:function(e,t){if(eW){var n=t.getClientOffset(),r=n?eW.posAtCoords(n):null;if(null!==r){var i=function(e){eW.focus(),eW.dispatch({changes:{from:r,insert:e},selection:{anchor:r,head:r+e.length}})};if(e.type===J.z.Code)i(e.code);else{var o=!0,a=!1,l=void 0;try{for(var c,s=e.files[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var u=c.value;eY?(0,r9.L0)(u).then(function(e){return i('"'+e+'"')}):ej&&(0,ie.gK)(ej)&&(0,r7.r)(u,eq,ej).then(i)}}catch(e){a=!0,l=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}}}}}}),2)[1]),ru=(0,eu.Z)({filePath:nw}),rd=(eK=(eJ={view:nU,filePath:nw,isLoading:re,enable:nq,openThreadsInbox:nk}).view,eQ=eJ.filePath,e0=eJ.isLoading,e1=eJ.enable,e2=eJ.openThreadsInbox,e8=(0,n7.kM)(),A.useEffect(function(){eK&&e8&&eK.dispatch({effects:[n9.YM.of(e8),n9.eR.of(e8)]})},[eK,e8]),e4=(0,rr.F)().theme,e5=(e3=(0,Z._)(A.useState([rt.TV.accentPrimaryDimmest,rt.TV.accentPrimaryDimmer]),2))[0],e6=e3[1],A.useEffect(function(){var e=e4.values.global.accentPrimaryDimmest,t=(0,rn.w)(e);e6(["rgba(".concat(t.join(","),", 0.5)"),rt.TV.accentPrimaryDimmer])},[e4]),e9=n6(eQ,e0,!0,e1),e7=(0,eo.Z)().fs,tt=(te=(0,n4.kL)(eQ)).contentRef,tn=te.loadedFile,ti=te.transformSelectionRef,A.useEffect(function(){var e=!1,t=ti.current,n=tt.current;if(tn&&t&&n&&!e0&&eK){var r=Object.values(e9);if(0===r.length){eK.dispatch({effects:n9.qi.of({})});return}Promise.all(r.map(function(e){return(0,n4.Ft)({anchor:e,version:e7.getOTVersion(eQ),transformSelection:t,content:n})})).then(function(t){if(!e){var n=t.filter(function(e){return!!e}).map(function(e){if(!e)throw Error("expected resolved anchor");return(0,y._)({},e.anchor,null==e?void 0:e.newSelection)});return eK.dispatch({effects:n9.qi.of(n.reduce(function(e,t){return e[t.id]=t,e},{}))}),function(){e=!0,eK&&eK.dispatch({effects:n9.qi.of({})})}}})}},[e9,eK,tn,e7,ti,tt,eQ,e0]),r8.use(e1,e5,e2));ta=(to={view:nU,filePath:nw}).view,tl=to.filePath,tc=(0,R.useRouter)(),ts=(0,C.Vg)(tc),tu=(0,A.useRef)({revisionId:ir()(),textEditorState:ic(tl),hasGhostwriterSuggestion:!1}),td=(0,A.useRef)(tl),tf=(0,n1.Z)({view:ta}),(0,A.useEffect)(function(){if(ta&&ts){var e=is(tl,ta);tu.current={revisionId:ir()(),textEditorState:e,hasGhostwriterSuggestion:tu.current.hasGhostwriterSuggestion},iu(tl,ta,tu.current);var t=function(t){var n,r=(0,tm.o)(ta.state),i=(null===(n=tu.current)||void 0===n?void 0:n.hasGhostwriterSuggestion)!==r;t.docChanged?(tu.current={revisionId:ir()(),textEditorState:e,hasGhostwriterSuggestion:r},iu(tl,ta,tu.current)):(t.selectionSet||t.focusChanged||i)&&(tu.current={revisionId:tu.current.revisionId,textEditorState:e,hasGhostwriterSuggestion:r},iu(tl,ta,tu.current))};return ta.dispatch({effects:tf.reconfigure(ey.tk.updateListener.of(function(e){t(e)}))}),function(){ta.dispatch({effects:tf.reconfigure([])})}}},[ta,tl,tf,ts]),(0,A.useEffect)(function(){if(ta&&ts){var e=function(e){iu(tl,ta,tu.current,e.messageId)},t=function(t){ip(tl,td.current,ta,tu.current,t)?e(t):(0,il.pl)(t.messageId)},n=function(t){ip(tl,td.current,ta,tu.current,t)?e(t):(0,il.pl)(t.messageId)},r=function(r){try{var i=r.data;if(!(0,ii.CF)(i)||i.protocolVersion!==ii.Wj)return;var o=i.payload;i.messageDirection===ii.s1.TO_NATIVE&&(0,ii.H7)(o)&&(td.current=o.activePaneFilePath),(0,il.fp)(r,function(r){var o=r.type;switch(o){case ii.cF.TEXT_EDITOR_STATE_REQUEST:e(i);break;case ii.cF.REQUEST_SET_SELECTION:case ii.cF.REQUEST_REPLACE_SELECTION:case ii.cF.REQUEST_SET_TEXT:case ii.cF.REQUEST_INSERT_TEXT:case ii.cF.REQUEST_PASTE_TEXT:t(i);break;case ii.cF.TEXT_EDITOR_REQUEST_ACTION:n(i);break;default:(0,im.Z)(o)}})}catch(e){throw Error("Invalid message: ".concat(e))}};return window.addEventListener("message",r),iu(tl,ta,tu.current),function(){(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ir()(),n={messageType:ii.cF.TEXT_EDITOR_CLOSED,filePath:e};(0,il.bG)(n,t)})(tl),window.removeEventListener("message",r)}}},[ta,tl,ts]);var rf=(th=(0,iv.K)((0,t4.Z)(function(){return{path:nw}},[nw])),ig.use(th)),rh=(tw=(tZ={filePath:nw}).filePath,tS=void 0!==(tx=tZ.disableDiff)&&tx,tD=void 0!==(tE=tZ.disableConflicts)&&tE,tO=(0,tM.P5)({controlName:"flag-git-gud",logFlagToAnalytics:!1}),tX=(0,tM.P5)({controlName:"flag-git-gud-gutter",logFlagToAnalytics:!1}),tF=(0,tM.P5)({controlName:"flag-editor-git-conflict-markers",logFlagToAnalytics:!1}),tH=(0,eo.Z)().git,tS=!tO||!tX||tS,tD=!tO||!tF||tD,i5.use(tH,void 0===tw?null:tw,tS,tD)),rp=(0,C.T3)(),rm=(0,en.xZ)(null!==(nZ=null==nU?void 0:nU.state.facet(tG.Yp))&&void 0!==nZ?nZ:null),rv=oa.use(rm,rp),rg=ia.hx.use(rm,nD),ry=os.use(rp),rb=oj.use(nA.rulers),rZ=(0,rr.F)(),rw=oJ.use(rp,nA.minimapDisplay,rZ),rx=ae.NS.use(nB),rC=(tV={filePath:nw},tz=(0,eo.Z)().container,tq=(tj=(0,n5.Z)()).showError,tY=tj.showConfirm,t$=(0,au.T)(),t8=(0,eh.Gn)("indentSize","indentIsSpaces","codeIntelligence").preferences,t3=(0,ef.Z)(tV.filePath),t5=(0,af.Z)(t3),am.use(t$,tz,t3,t5,t8.indentIsSpaces,t8.indentSize,t8.codeIntelligence,tV.filePath,function(){return tY("Formatted ".concat(tV.filePath," successfully"),1500)},function(){return tq("Sorry, formatting ".concat(tV.filePath," failed"),1500)})),r_=(t6=(0,oM.Z)(),t9=(0,eo.Z)().container,nt=(ne=(0,n5.Z)()).showError,nn=ne.showConfirm,nr=an.ZP.supportsFormatting(t6),ns=(0,at.Z)({container:t9,service:"format",skip:!nr}).channel,nu=ai.use(nw,ns,nr,nt,nn),(0,A.useMemo)(function(){return nu},[nu])),rS=(0,tM.P5)({controlName:"flag-editor-visible-whitespace",logFlagToAnalytics:!1}),rE=o9.use(!!rS&&nA.showLeadingWhitespace,!!rS&&nA.showEnclosedWhitespace,!!rS&&nA.showTrailingWhitespace,!!rS&&nA.showSelectedWhitespace),rk=(0,al.Ls)({path:nw}),rT=(0,al.fD)({path:nw}),rR=(0,al.jg)({path:nw}),rD=(0,A.useCallback)(function(){nU&&rk(nU)},[nU,rk]),rI=(0,A.useCallback)(function(){nU&&rR(nU)},[nU,rR]),rG=(0,aN.u)({isMobile:rp,generateCode:rk,filePath:nw,openPane:nT}),rB=(0,A.useCallback)(function(){nT({type:"ghostwriterChat"})},[nT]),rA=(0,A.useCallback)(function(e){nT({type:"searchReplace",data:{initialQuery:e}})},[nT]),rP=(0,ot.W)({onEditCode:rI,onGenerateCode:rD,onReplyInChat:rB}),rN=(0,aa.av)(),rU=rN.onContextMenu,rL=rN.openContextMenu,rO=(0,al.aT)({openFile:nE,openSearchAndReplace:rA,path:nw,view:nU,onCommand:function(e){if(nU){var t=nU.state.selection.main.head;if(t){var n=nU.coordsAtPos(t);n&&rL({target:{x:n.left,y:n.top},command:[rO(),e],width:275})}}}}),rM=(0,A.useCallback)(function(e){rU(e,{command:rO(),width:275})},[rO,rU]),rX=(0,A.useCallback)(function(e,t){rL({target:e,command:[rO(),t],width:275})},[rO,rL]),rF=al.pZ.use(rp,rM),rW=t7.t.use(rX),rH=(0,A.useCallback)(function(e){rL({target:{x:e.right-275,y:e.top},width:275,command:rO()})},[rO,rL]),rV=(0,aU.W)({editCode:rR,explainCode:rT,generateCode:rk,onMoreClick:rH}),rz=(nb=(0,oM.T)(),oX.use(nb)),rj=(0,tM.P5)({controlName:"flag-problems-pane"}),rq=aW.y.use(rj),rY=aH.use();return(0,x.tZ)("div",{css:iy.ac,"data-cy":re?"workspace-cm-editor-loading":"workspace-cm-editor-".concat(nw),children:(0,x.tZ)(i7.ZP,{ref:nN,elementRef:rs,css:iy.Mp,filePath:nw,hideTooltips:nC,extensions:[rF,rW,ri,rl,ra,rG,rY,rv,nW,ry,rh,rw,ia.sy,rg,nz.k,rP,rz,oF,rb,rE,rx,rC,r_,ao.er,rf,ru,rd,aD,aP,rc,rp?[]:rV,nJ,rq],onException:function(e){var t,n={filePath:nw,cursorPosition:JSON.stringify(null==nY?void 0:null===(t=nY.get(i9._s))||void 0===t?void 0:t.position),fileVersion:n$({filePath:nw})};if(nU){var r=nU.plugin(nz.k),i=null==r?void 0:r.logs();null==r||r.flush(),n.domText=nU.contentDOM.innerText,n.keystrokes=JSON.stringify(i),n.selection=JSON.stringify(nU.state.selection.main.toJSON()),n.updateDoc=nU.state.doc.sliceString(0)}if(nV){nL({error:e,tags:{codemirror:!0},extras:n,origin:"CodemirrorEditor: useEditor/onException"});return}(0,r4.O)(e,{tags:{origin:"CodemirrorEditor: useEditor/onException",codemirror:!0},extras:n})},noHistory:!0})})}var az=n(57369),aj=n(19858),aq=n(87959),aY=(0,tw.X)({base:[U.l0.backgroundColor.backgroundDefault,U.l0.color.foregroundDimmer,U.l0.borderRadius(0),U.l0.height("auto"),U.l0.py(4),U.l0.px(6),{"> div":U.l0.rowWithGap(4)}]}),a$=function(e){var t=e.css,n=e.innerRef,r=(0,eq._)(e,["css","innerRef"]);return(0,x.tZ)(rT.Tg,{background:"root",children:(0,x.tZ)(rS.zx,(0,y._)({size:"small",css:[aY.base,t],ref:n},r))})};function aJ(e){var t,n=e.performPaneOperation,r=(0,aj.Z)((t=(0,ep._)(function(e){var t,n,r,i;return(0,em.Jh)(this,function(o){switch(o.label){case 0:return[4,e.getRepositoryState()];case 1:if((t=o.sent()).error)return[2,t];if(n=t.type,r=null,!(n!==az.y5.INITIALIZING))return[3,3];return[4,e.status()];case 2:if((i=o.sent()).error)return[2,i];r=i,o.label=3;case 3:return[2,{branchName:null==r?void 0:r.branch,error:null}]}})}),function(e){return t.apply(this,arguments)})),i=!r||r.error?null:r.branchName;return i?(0,x.tZ)(a$,{onClick:function(){return null==n?void 0:n({operation:"open",pane:{type:"git"}})},text:i,iconLeft:(0,x.tZ)(aq.Z,{color:rt.TV.foregroundDimmer,size:12})}):null}var aK=n(80711),aQ=n(99418),a0=(0,tw.X)({rounded:[{borderBottomRightRadius:rt.TV.space6}]});function a1(e){var t=e.onOpen,n=e.rounded;return(0,x.tZ)(a$,{text:"History",iconRight:(0,x.tZ)(aK.Z,{size:12}),onClick:function(){(0,aQ.p)("historyOpened"),t()},css:(void 0===n||n)&&a0.rounded})}var a2=n(73164),a8=n(68514),a4=n(93496),a3=n(40227),a5=n(48272),a6=n(37951),a9=n(30983),a7=n(11718),le=n(49615),lt=n(11470),ln=n(90648),lr=n(50494),li=n(99071),lo=n(44471),la=(0,tw.X)({surface:[U.l0.height("100%")],cursorOverlay:{cursor:"pointer"},menu:[U.l0.p(8),U.l0.colWithGap(8),U.l0.maxWidth(390),U.l0.minWidth(390)],close:[U.l0.position.absolute,U.l0.top(4),U.l0.right(4)],file:[U.l0.pl(4),U.l0.display.inlineFlex,U.l0.rowWithGap(4),U.l0.align.center,{verticalAlign:"top"}],space:[U.l0.width(2),U.l0.color.foregroundDimmer,U.l0.textAlign.center],section:[U.l0.rowWithGap(8),U.l0.align.center,U.l0.justify.spaceBetween],header:[U.l0.colWithGap(2),U.l0.flex.shrink(1)],selects:[U.l0.rowWithGap(4)],sizeInput:{border:"none"},buttonsGroup:[U.l0.rowWithGap(8),U.l0.align.center,U.l0.justify.spaceBetween],saveButtons:[U.l0.rowWithGap(4)],red:[U.l0.color.redDefault],row:[U.l0.rowWithGap(8),U.l0.align.center],staticWidth:[U.l0.flex.grow(0),U.l0.flex.shrink(1)],variableWidth:[U.l0.flex.grow(1),U.l0.flex.shrink(0),{flexBasis:0}],flexEnd:[U.l0.align.end]});function ll(e){var t,n=(0,H.uN)(),r=null==n?void 0:null===(t=n.state)||void 0===t?void 0:t.facet(tG.Yp);return r?(0,x.tZ)(lc,{fileName:r,openSettings:e.openSettings}):null}function lc(e){var t=e.fileName,n=e.openSettings,r=(0,eo.Z)(),i=r.dotReplit,o=r.lspnix,a=(0,eh.Gn)("codeIntelligence").preferences.codeIntelligence,l=(0,H.uN)(),c=(0,Z._)((0,A.useState)(!1),2),s=c[0],u=c[1],d=(0,ef.Z)(t),f=(0,Z._)((0,A.useState)(null==d?void 0:d.getServerState()),2),h=f[0],p=f[1],m=(0,Z._)((0,A.useState)(null==d?void 0:d.getServerHealth()),2),v=m[0],g=m[1],w=(0,Z._)((0,A.useState)(!1),2),C=w[0],S=w[1],E=(0,A.useMemo)(function(){var e=[U.l0.p(4),U.l0.borderRadius(0),U.l0.align.center,U.l0.rowWithGap(4)];return s?(e.unshift(a4.gU.filled),e.push({pointerEvents:"none"})):e.unshift(a4.gU.nofill),(0,r_.iv)(e)},[s]),k=(0,nQ.IK)(l,tG.Q$),T=(0,A.useMemo)(function(){var e,n,r,i;return(r=null===(e=a2.$R.from(t))||void 0===e?void 0:e.name)?r:(r=null==k?void 0:null===(n=k.language)||void 0===n?void 0:n.name)&&r.length>0?(i=r).slice(0,1).toUpperCase()+i.slice(1).toLowerCase():(r=(0,ie.r6)(t),k)?r:"Plain Text"},[t,k]),R=(0,A.useMemo)(function(){if(!a)return 6;if(null!==d&&v===eM.N.STALLED)return 3;var e=null!=d&&v===eM.N.READY;return C||h===eM.a.INITIALIZING||h===eM.a.INITIALIZED&&!e?0:e?1:h===eM.a.EXITED?2:null!==k?4:5},[d,C,k,v,h,a]),D=(0,A.useCallback)(function(){a&&(o.disable(),o.enable(),S(!0))},[o,a]);(0,A.useEffect)(function(){if(d)return S(!1),p(d.getServerState()),g(d.getServerHealth()),(0,li.uf)([d.onServerStateChange(function(e){p(e)}),d.onServerHealthChange(function(e){g(e)})])},[d]);var I=(0,nQ.IK)(l,as.i5),G=(0,nQ.IK)(l,as.dt),B=(0,Z._)((0,A.useState)(I?{title:I.name,value:I.id}:void 0),2),P=B[0],L=B[1],O=(0,A.useRef)(!1),M=(0,A.useMemo)(function(){var e;return null!==(e=null==G?void 0:G.map(function(e){return{title:e.name,value:e.id,icon:void 0}}))&&void 0!==e?e:[]},[G]);(0,A.useEffect)(function(){O.current||(null==P?void 0:P.value)===(null==I?void 0:I.id)||L(I?{title:I.name,value:I.id}:void 0)},[P,I]);var X=(0,Z._)((0,A.useState)(!1),2),F=X[0],W=X[1],V=(0,lr.e)("prettier-formatter");return(0,A.useEffect)(function(){var e,t=null!==(e=null==l?void 0:l.plugin(nQ.pE))&&void 0!==e?e:null;if(l&&t&&!t.destroyed){var n=null,r=t.bind({changed:function(e){return(0,nc.a)(e,ae.pm)},callback:function(e){V.isDone||(n&&"Prettier"===n.name&&(W(!0),u(!0),V.setAsDone()),n=e.state.facet(ae.pm))}});return function(){return r()}}},[V,l]),(0,x.BX)(a3.xo,{label:"Language support",placement:"top",isOpen:s,onOpenChange:function(e){u(e),F&&W(!1)},children:[function(e){return(0,x.tZ)(a9.u,{tooltip:"Language support",isDisabled:s,children:(0,x.tZ)("div",{css:la.cursorOverlay,children:(0,x.BX)(N.K.button,(0,b._)((0,y._)({},e),{css:E,children:[(0,x.tZ)(lf,{state:R}),(0,x.tZ)(ls,{text:T,color:"dimmer",variant:"small"})]}))})})},(0,x.BX)(N.G,{css:la.menu,children:[(0,x.tZ)(N.G,{css:la.close,children:(0,x.tZ)(ri.hU,{alt:"Close",onClick:function(){return u(!1)},children:(0,x.tZ)(tq.Z,{})})}),(0,x.BX)(ex.h4,{level:1,children:["Language support for ",(0,x.BX)("span",{css:la.file,children:[(0,x.tZ)(_.Z,{path:t,size:16})," ",(0,x.tZ)("span",{children:(0,ie.UO)(t)})]})]}),(0,x.tZ)(a8.R,{}),(0,x.tZ)(ld,{client:d,restart:D,state:R,openSettings:n,filePath:t}),G&&P?(0,x.BX)(x.HY,{children:[(0,x.tZ)(a8.R,{}),(0,x.BX)(N.G,{css:la.section,children:[(0,x.tZ)(N.G,{css:[la.header,la.staticWidth],children:(0,x.tZ)(ex.xv,{multiline:!1,children:"Code Formatter"})}),1===G.length?(0,x.tZ)(N.G,{css:[la.header,la.variableWidth,la.flexEnd],children:(0,x.tZ)(ex.xv,{multiline:!1,children:P.title})}):(0,x.tZ)(N.G,{css:la.selects,children:(0,x.tZ)(a5.P,{placement:"top",items:M,selectedItem:(0,b._)((0,y._)({},P),{icon:O.current?(0,x.tZ)(tY.Z,{size:12}):void 0}),disabled:O.current,onChange:function(e){e.value!==P.value&&(O.current=!0,L(e),(function(e,t){return lh.apply(this,arguments)})(i,{path:t,formatterId:e.value}).finally(function(){return O.current=!1}))}})})]}),F?(0,x.tZ)(N.G,{css:la.section,children:(0,x.tZ)(a6.E,{text:"".concat(P.title," was used to format this file. ").concat(G.length>1?"You can change your code formatter with the dropdown above.":""),closable:!0,closeAction:function(){return W(!1)}})}):null]}):null]})]})}function ls(e){var t=e.text,n=(0,eq._)(e,["text"]);return(0,x.tZ)(ex.xv,(0,b._)((0,y._)({},n),{children:t}))}function lu(e){var t=(0,x.tZ)("a",{tabIndex:0,role:"button",onClick:e.restart,onKeyDown:function(t){"Enter"===t.key&&e.restart()},children:"Restart"});switch(e.state){case 0:return(0,x.tZ)(ex.xv,{multiline:!1,color:"dimmer",children:"Loading"});case 1:return(0,x.tZ)(ex.xv,{multiline:!1,color:"dimmer",children:"Active"});case 3:return(0,x.BX)(N.G,{css:la.row,children:[(0,x.tZ)(ex.xv,{css:la.red,multiline:!1,children:"Stalled"})," ",t]});case 2:return(0,x.BX)(N.G,{css:la.row,children:[(0,x.tZ)(ex.xv,{css:la.red,multiline:!1,children:"Stopped"})," ",t]});default:return null}}function ld(e){var t=function(){switch(e.state){case 0:case 1:case 2:case 3:return(0,x.BX)(x.HY,{children:[(0,x.tZ)(N.G,{css:[la.header,la.variableWidth],children:(0,x.tZ)(ex.xv,{multiline:!1,children:e.client?e.client.clientName:"Language Server for ".concat(e.filePath)})}),(0,x.tZ)(N.G,{css:[la.header,la.staticWidth],children:(0,x.tZ)(lu,{restart:e.restart,state:e.state})})]});case 5:case 4:return(0,x.tZ)(N.G,{css:la.header,children:(0,x.tZ)(ex.xv,{color:"dimmer",children:"Limited language support because the language server is not available."})});case 6:return(0,x.tZ)(N.G,{css:la.header,children:(0,x.BX)(ex.xv,{multiline:!0,color:"dimmer",children:["Code intelligence is disabled. Enable it in settings.",(0,x.tZ)("br",{}),(0,x.tZ)("a",{tabIndex:0,role:"button",onClick:e.openSettings,onKeyDown:function(t){"Enter"===t.key&&e.openSettings()},children:"Open settings"})]})});default:return null}}();return t?(0,x.BX)(N.G,{css:la.section,children:[" ",t," "]}):null}function lf(e){switch(e.state){case 3:case 6:case 4:return(0,x.tZ)(ln.Z,{size:16});case 0:return(0,x.tZ)(tY.Z,{size:16,color:U.TV.blueStronger});case 1:return(0,x.tZ)(N.G,{dataCy:"ws-code-intelligence-active",children:(0,x.tZ)(le.Z,{size:16})});case 2:return(0,x.tZ)(lt.Z,{size:16});case 5:return(0,x.tZ)(a7.Z,{size:16})}}function lh(){return(lh=(0,ep._)(function(e,t){var n,r;return(0,em.Jh)(this,function(i){return(n=".".concat((0,lo.mD)(t.path)),r="rules/formatter/fileExtensions/".concat(n,"/id"),t.formatterId)?[2,e.updateDotReplit([{path:"rules/formatter/fileExtensions",op:"add",value:JSON.stringify((0,eW._)({},"".concat(n),{id:t.formatterId}))}])]:[2,e.updateDotReplit([{path:r,op:"remove"}])]})})).apply(this,arguments)}function lp(e){if(e.facet(nj.o))return"";var t=e.selection,n="",r=0;if(t.ranges.length>1){r=t.ranges.reduce(function(e,t){return e+(t.to-t.from)},0);var i=t.ranges.length;n="".concat(i," selections")}else{var o=t.ranges[0],a=e.doc.lineAt(o.head),l=o.head-a.from;r=o.to-o.from,n="Ln ".concat(a.number,", Col ").concat(l+1)}return r>0&&(n+=" (".concat(r," chars)")),n}function lm(){var e,t=(0,A.useRef)(null),n=(0,H.uN)();return(0,A.useEffect)(function(){var e,r=t.current,i=null!==(e=null==n?void 0:n.plugin(nQ.pE))&&void 0!==e?e:null;if(r&&n&&i&&!i.destroyed){var o=null,a=n.state;r.textContent=lp(a);var l=i.bind({changed:function(e){return(0,nc.a)(e,"selection",nj.o)},callback:function(e){a=e.state,null===o&&(o=requestAnimationFrame(function(){o=null,r.textContent=a?lp(a):""}))}});return function(){l(),null!==o&&cancelAnimationFrame(o),r.textContent=""}}},[n]),!n&&(null===(e=t.current)||void 0===e?void 0:e.textContent)&&(t.current.textContent=""),(0,A.useMemo)(function(){return(0,x.tZ)(a$,{text:(0,x.tZ)("span",{ref:t,"data-cy":"current-position"}),css:[U.l0.color.foregroundDimmest],onClick:n?function(){return(0,av.zo)(n)}:void 0})},[n])}(u=g||(g={}))[u.Loading=0]="Loading",u[u.Ready=1]="Ready",u[u.Exited=2]="Exited",u[u.Stalled=3]="Stalled",u[u.Partial=4]="Partial",u[u.Missing=5]="Missing",u[u.Disabled=6]="Disabled";var lv=n(85621),lg=(0,tw.X)({text:[{textTransform:"capitalize"}]});function ly(){var e,t,r,i,o=(0,Z._)((0,A.useState)(null),2),a=o[0],l=o[1],c=(0,A.useRef)(null),s=(0,H.uN)(),u=(0,eh.Gn)("keyboardHandler").preferences,d=(null==u?void 0:u.keyboardHandler)==="vim",f=(0,A.useCallback)(function(e){if(c.current){var t=null!=e?e:"";if(s&&a&&void 0===e){var n,r,i=a.getCM(s);t=null!==(r=null==i?void 0:null===(n=i.state.vim)||void 0===n?void 0:n.mode)&&void 0!==r?r:"normal"}c.current.innerText!==t&&(c.current.innerText=t||"")}},[s,a]);return(0,A.useEffect)(function(){d&&!a&&n.e(6689).then(n.bind(n,65231)).then(function(e){l(e),f()})},[d,a,f]),e=[f,d,a],t="ModeStatus",r=(0,Z._)((0,A.useState)(function(){return new ev.F6}),1)[0],i=(0,ax.Z)(function(){return d&&a?ey.tk.updateListener.of(function(){setTimeout(function(){f()},0)}):(f(null),null)}),(0,A.useEffect)(function(){if(s){var e=i.current();if(e){var n=void 0===r.get(s.state)?ev.Py.appendConfig.of(r.of(e)):r.reconfigure(e);try{s.dispatch({effects:n})}catch(e){(0,ey.OO)(s.state,e,t)}return function(){try{s.dispatch({effects:r.reconfigure([])})}catch(e){(0,ey.OO)(s.state,e,t)}}}}},[s,r,i,t].concat((0,w._)(e))),(0,x.tZ)(x.HY,{children:d?(0,x.tZ)(a$,{disabled:!0,iconLeft:(0,x.tZ)(lv.Z,{}),text:(0,x.tZ)("span",{css:lg.text,ref:c})}):null})}var lb=n(34581),lZ=n(76568),lw=n(70210),lx=n(73157),lC=(0,tw.X)({group:[U.l0.align.center,U.l0.rowWithGap(4)],row:[U.l0.align.center,U.l0.rowWithGap(8)]});function l_(){var e,t=(0,H.uN)(),n=null==t?void 0:null===(e=t.state)||void 0===e?void 0:e.facet(tG.Yp);return n?(0,x.tZ)(lS,{fileName:n}):null}function lS(e){var t,n,r,i,o,a,l=e.fileName,c=(0,H.uN)(),s=(n=(t=(0,Z._)((0,A.useState)(null),2))[0],r=t[1],i=(0,ef.Z)(l),o=(0,lb.nC)(),a=(0,lZ.dr)(),(0,A.useEffect)(function(){if(i){var e=function(e){var t,n=o().find(function(e){var t=(0,Z._)(e,2);return"problems"===(t[0],t[1]).type});if(n){var r=a(n[0]);r&&"problems"===r.type&&(null===(t=r.updateProblems)||void 0===t||t.call(r,l,e))}};if(i.isOpen(l)){var t=i.getDiagnostics(l);r(t),e(t)}var n=i.onDiagnostics(function(t){t.path===l&&(r(t.diagnostics),e(t.diagnostics))});return function(){n(),o().some(function(e){var t=(0,Z._)(e,2),n=(t[0],t[1]);return"codeEditor"===n.type&&n.data.path===l})||e([])}}},[i,l,o,a]),n),u=(0,A.useMemo)(function(){var e;return s?(e=s.reduce(function(e,t){return void 0===t.severity||(e[t.severity]=(e[t.severity]||0)+1),e},{}),s.length>0&&0===Object.keys(e).length&&(e[e_.DiagnosticSeverity.Error]=s.length),e):null},[s]);if(!u)return null;var d=u[e_.DiagnosticSeverity.Error]||0,f=u[e_.DiagnosticSeverity.Warning]||0,h="";return 0===d&&0===f&&(h="No problems"),d>0&&(h+="".concat((0,lx.Z)("Error",d),": ").concat(d)),f>0&&(h.length>0&&(h+=", "),h+="".concat((0,lx.Z)("Warning",f),": ").concat(f)),(0,x.tZ)(a9.u,{tooltip:h,children:(0,x.tZ)(a$,{text:(0,x.BX)(N.G,{css:lC.row,children:[(0,x.BX)(N.G,{css:lC.group,children:[(0,x.tZ)(lw.Z,{severity:e_.DiagnosticSeverity.Error,size:12}),(0,x.tZ)(ex.xv,{color:"dimmer",variant:"small",multiline:!1,children:String(d)})]}),(0,x.BX)(N.G,{css:lC.group,children:[(0,x.tZ)(lw.Z,{severity:e_.DiagnosticSeverity.Warning,size:12}),(0,x.tZ)(ex.xv,{color:"dimmer",variant:"small",multiline:!1,children:String(f)})]})]}),disabled:!c,onClick:c?function(){return(0,aW.C)(c)}:void 0})})}var lE=n(31405),lk="StatusBar",lT=(0,tw.X)({root:[U.l0.display.flex,(0,eW._)({},U.nC.max(550,lk),[U.l0.display.none])]});function lR(e){var t=e.children;return(0,x.tZ)(N.G,{css:lT.root,children:t})}var lD=(0,tw.X)({root:[U.l0.display.none,(0,eW._)({},U.nC.max(550,lk),[U.l0.display.flex])]});function lI(e){var t=e.children;return(0,x.tZ)(N.G,{css:lD.root,children:t})}var lG=(0,tw.X)({base:[U.l0.backgroundColor.backgroundDefault,U.l0.color.foregroundDimmer,U.l0.borderRadius(0),U.l0.height("100%"),U.l0.py(8),U.l0.px(12),{"> div":U.l0.rowWithGap(4)}]}),lB=function(e){var t=e.css,n=e.size,r=(0,eq._)(e,["css","size"]);return(0,x.tZ)(rT.Tg,{background:"default",children:(0,x.tZ)(ri.hU,(0,b._)((0,y._)({css:[lG.base,t]},r),{size:void 0===n?12:n}))})},lA=(0,tw.X)({iconButtonToggled:[U.l0.backgroundColor.accentPrimaryDimmer,{"&&:hover":[U.l0.backgroundColor.accentPrimaryDefault]}]});function lP(){var e=(0,H.uN)(),t=(0,nQ.IK)(e,i4);if(!e||!t||null===t.head)return null;var n=t.mode===v.INLINE_DIFF,r=function(){e.dispatch({effects:i8.of(n?v.GUTTER_DIFF:v.INLINE_DIFF)})};return(0,x.BX)(x.HY,{children:[(0,x.tZ)(lR,{children:(0,x.tZ)(a$,{text:n?"Diffing":"Diff",colorway:n?"primary":void 0,iconLeft:(0,x.tZ)(lE.Z,{}),onClick:r})}),(0,x.tZ)(lI,{children:(0,x.tZ)(a9.u,{tooltip:"Toggle Diff",placement:"top-start",children:(0,x.tZ)(lB,{css:n&&lA.iconButtonToggled,alt:"Toggle Diff",onClick:r,colorway:n?"primary":void 0,children:(0,x.tZ)(lE.Z,{color:n?rt.TV.foregroundDefault:void 0})})})})]})}var lN=n(10044),lU=n(27783);function lL(e,t,n){var r=[],i=0,o=!0,a=!1,l=void 0;try{for(var c,s=e.iterLines()[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var u=c.value,d=i;if(i=i+u.length+1,0!==u.length){var f=(0,lU.L)(u,t),h=u.trimStart(),p=d+(u.length-h.length);if(0!==f&&d!==p){var m="";if(n===lN.Q.TABS){var v=Math.floor(f/t),g=f%t;m="	".repeat(v)+" ".repeat(g)}else n===lN.Q.SPACES&&(m=" ".repeat(f));m+h!==u&&r.push({from:d,to:p,insert:m})}}}}catch(e){a=!0,l=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}return ev.as.of(r,e.length)}var lO=n(17907),lM=n(26),lX=n(18931),lF=n(58003),lW=n(2532),lH=n(81662),lV=(0,tw.X)({surface:[U.l0.height("100%")],cursorOverlay:{cursor:"pointer"},menu:[U.l0.p(8),U.l0.colWithGap(8),U.l0.maxWidth(410)],close:[U.l0.position.absolute,U.l0.top(4),U.l0.right(4)],file:[U.l0.pl(4),U.l0.display.inlineFlex,U.l0.rowWithGap(4),U.l0.align.center,{verticalAlign:"top"}],space:[U.l0.width(2),U.l0.color.foregroundDimmer,U.l0.textAlign.center],section:[U.l0.rowWithGap(8),U.l0.align.center,U.l0.justify.spaceBetween],header:[U.l0.colWithGap(2),U.l0.flex.shrink(1)],selects:[U.l0.rowWithGap(4)],sizeInput:{border:"none"},buttonsGroup:[U.l0.rowWithGap(8),U.l0.align.center,U.l0.justify.spaceBetween],saveButtons:[U.l0.rowWithGap(4)]});function lz(e){var t,n=e.path,r=e.openSettings,i=(0,eh.Gn)("indentDetection","indentSize").preferences,o=(0,H.uN)(),a=(0,nQ.IK)(o,nj.o),l=null!==a&&!!i.indentDetection&&a,c=(0,nQ.IK)(o,lO.K_),s=(0,nQ.IK)(o,lO.E2),u=(0,nQ.IK)(o,lO.vO),d=null!==(t=(0,nQ.IK)(o,ev.yy.tabSize))&&void 0!==t?t:i.indentSize,f="	"===(0,nQ.IK)(o,e$.c)?lN.Q.TABS:lN.Q.SPACES,h=(0,Z._)((0,A.useState)(!1),2),p=h[0],m=h[1],v=(0,Z._)((0,A.useState)(f),2),g=v[0],C=v[1],S=(0,Z._)((0,A.useState)(d),2),E=S[0],k=S[1],T=(0,Z._)((0,A.useState)(!1),2),R=T[0],D=T[1],I=(0,Z._)((0,A.useState)(!1),2),G=I[0],B=I[1],P=(0,Z._)((0,A.useState)(!1),2),L=P[0],O=P[1],M=(0,Z._)((0,A.useState)(!1),2),X=M[0],F=M[1];(0,A.useEffect)(function(){R||(C(f),k(d))},[f,d,R]),(0,A.useEffect)(function(){p||(C(f),k(d),D(!1))},[p,f,d]),(0,A.useEffect)(function(){g===f&&E===d&&D(!1)},[g,E,f,d]),(0,A.useEffect)(function(){if(G||L||X){var e=setTimeout(function(){B(!1),O(!1),F(!1)},1e3);return function(){return clearTimeout(e)}}},[G,L,X]),l&&p&&m(!1);var W=(0,A.useCallback)(function(){if(o){var e=lL(o.state.doc,d,f);o.dispatch({changes:e,effects:lO.Fm.of(!0)}),O(!0)}},[o,f,d]),V=(0,A.useCallback)(function(){o&&(o.dispatch({effects:lO.Fm.of(!0)}),o.state.field(lO.E2)&&o.dispatch({effects:lO.O4.of({type:void 0,size:void 0})}),F(!0))},[o]),z=(0,A.useCallback)(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(o){var t=void 0,n=[lO.O4.of({type:g,size:E})];if(e){if(g!==f&&(t=lL(o.state.doc,d,g)),g===lN.Q.SPACES&&E!==d){var r=function(e,t,n,r){if(t===lN.Q.TABS)return ev.as.empty(e.length);var i=" ".repeat(r),o=[],a=0,l=!0,c=!1,s=void 0;try{for(var u,d=e.iterLines()[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var f=u.value,h=a;if(a=a+f.length+1,0!==f.length){var p=(0,lU.L)(f,n),m=f.trimStart(),v=h+(f.length-m.length);if(0!==p&&h!==v){var g=Math.floor(p/n),y=p%n,b=i.repeat(g)+" ".repeat(y);b+m!==f&&o.push({from:h,to:v,insert:b})}}}}catch(e){c=!0,s=e}finally{try{l||null==d.return||d.return()}finally{if(c)throw s}}return ev.as.of(o,e.length)}(t?t.apply(o.state.doc):o.state.doc,g,d,E);t=t?t.compose(r):r}t&&n.push(lO.Fm.of(!0))}o.dispatch({changes:t,effects:n}),D(!1),B(!0)}},[o,f,d,g,E]),j=(0,A.useCallback)(function(){m(!1),r()},[r]),q=(0,A.useMemo)(function(){if(s){var e=s.size,t=s.type===lN.Q.SPACES?"spaces":"tabs";return"This file appears to use a unit of ".concat(e," ").concat(t,".")}return u?"Indentation detection hasn't been run on this file yet.":"This file is too small for indentation detection."},[s,u]),Y=(0,A.useMemo)(function(){var e=[U.l0.p(4),U.l0.rowWithGap(4),U.l0.align.center,U.l0.borderRadius(0)];return p?(e.push({pointerEvents:"none"}),e.unshift(a4.gU.filled)):e.unshift(a4.gU.nofill),(0,r_.iv)(e)},[p]);return(0,x.BX)(a3.xo,{label:"File indentation",placement:"top",isOpen:p,onOpenChange:m,children:[function(e){return(0,x.tZ)(a9.u,{tooltip:"File indentation",isDisabled:p,children:(0,x.tZ)("div",{css:lV.cursorOverlay,children:(0,x.BX)(N.K.button,(0,b._)((0,y._)({},e),{ref:e.ref,css:Y,children:[(0,x.tZ)(lq,{type:f,loading:l}),(0,x.tZ)(lY,{type:f,size:d,loading:l})]}))})})},(0,x.BX)(N.G,{css:lV.menu,children:[(0,x.tZ)(N.G,{css:lV.close,children:(0,x.tZ)(ri.hU,{alt:"Close",onClick:function(){return m(!1)},children:(0,x.tZ)(tq.Z,{})})}),(0,x.BX)(ex.h4,{level:1,children:["Indentation for",(0,x.BX)("span",{css:lV.file,children:[(0,x.tZ)(_.Z,{path:n,size:16})," ",(0,x.tZ)("span",{children:(0,ie.UO)(n)})]})]}),c?(0,x.tZ)(a6.E,{colorway:"warning",icon:(0,x.tZ)(oC.Z,{}),text:"This file type requires that ".concat(c===lN.Q.SPACES?"spaces":"tabs"," be used for indentation.")}):null,(0,x.tZ)(a8.R,{}),(0,x.BX)(N.G,{css:lV.section,children:[(0,x.BX)(N.G,{css:lV.header,children:[(0,x.tZ)(ex.xv,{multiline:!1,children:"Indentation unit"}),(0,x.tZ)(ex.xv,{variant:"small",color:"dimmer",children:"The size and character to use when indenting lines."})]}),(0,x.BX)(N.G,{css:lV.selects,children:[(0,x.tZ)(lH.qm,{css:lV.sizeInput,size:E,onChange:function(e){e!==E&&(k(e),D(!0))}}),(0,x.tZ)(a5.P,{items:(0,w._)(lH.Ly),selectedItem:lH.Ly.find(function(e){return e.value===(g===lN.Q.SPACES?"spaces":"tabs")}),onChange:function(e){var t=(null==e?void 0:e.value)==="spaces"?lN.Q.SPACES:lN.Q.TABS;t!==g&&(C(t),D(!0))}})]})]}),(0,x.tZ)(a8.R,{}),i.indentDetection?(0,x.BX)(x.HY,{children:[(0,x.BX)(N.G,{css:lV.section,children:[(0,x.BX)(N.G,{css:lV.header,children:[(0,x.tZ)(ex.xv,{multiline:!1,children:"Detected indentation unit"}),(0,x.tZ)(ex.xv,{variant:"small",color:"dimmer",children:q})]}),X?(0,x.tZ)(rS.zx,{colorway:"positive",text:"Detected!",iconLeft:(0,x.tZ)(rI.Z,{}),onClick:V}):(0,x.tZ)(rS.zx,{text:s?"Re-detect":"Detect",iconLeft:(0,x.tZ)(lX.Z,{}),disabled:!u&&!s,onClick:V})]}),(0,x.tZ)(a8.R,{})]}):null,(0,x.BX)(N.G,{css:lV.buttonsGroup,children:[(0,x.tZ)(rS.zx,{text:"Global settings",iconLeft:(0,x.tZ)(lF.Z,{}),onClick:j}),(0,x.tZ)(N.G,{css:lV.saveButtons,children:G||L?(0,x.tZ)(x.HY,{children:G?(0,x.tZ)(rS.zx,{text:"Saved!",colorway:"positive",iconLeft:(0,x.tZ)(rI.Z,{}),onClick:function(){return z(!1)}}):(0,x.tZ)(rS.zx,{text:"Re-indented!",colorway:"positive",iconLeft:(0,x.tZ)(rI.Z,{}),onClick:W})}):(0,x.tZ)(x.HY,{children:R?(0,x.BX)(x.HY,{children:[(0,x.tZ)(rS.zx,{text:"Save and re-indent",colorway:"primary",iconLeft:(0,x.tZ)(lW.Z,{}),onClick:function(){return z(!0)}}),(0,x.tZ)(rS.zx,{text:"Save",iconLeft:(0,x.tZ)(rI.Z,{}),onClick:function(){return z(!1)}})]}):(0,x.tZ)(rS.zx,{text:"Re-indent file",iconLeft:(0,x.tZ)(lW.Z,{}),onClick:W})})})]})]})]})}function lj(e){var t=e.size,n=void 0===t?16:t,r=(0,eq._)(e,["size"]);return(0,x.tZ)(lM.Z,(0,b._)((0,y._)({size:n},r),{children:(0,x.tZ)("circle",{cx:n,cy:n,r:n/2,fillRule:"evenodd"})}))}function lq(e){var t=e.type;return e.loading?(0,x.tZ)(tY.Z,{size:12}):t===lN.Q.SPACES?(0,x.tZ)(lj,{color:U.TV.foregroundDimmer,size:12}):(0,x.tZ)(lW.Z,{color:U.TV.foregroundDimmer,size:12})}function lY(e){var t=e.type,n=e.size;if(e.loading)return(0,x.tZ)(ex.xv,{variant:"small",color:"dimmest",children:"Detecting..."});var r=t===lN.Q.SPACES?"Spaces":"Tabs";return(0,x.BX)(ex.xv,{variant:"small",color:"dimmer",children:[r,": ",n]})}var l$=n(75582),lJ=n(93295),lK=n(23982),lQ=n(77393);function l0(){var e=(0,lJ._)(["\n  query StatusBarGhostwriterCompleteCodeStatus {\n    currentUser {\n      id\n      userSubscriptionType\n    }\n  }\n"]);return l0=function(){return e},e}var l1={},l2=(0,lK.Ps)(l0()),l8=n(67914),l4=n(60769),l3=n(71999),l5=n(27879),l6=n(70408),l9=n(63185),l7=(0,tw.X)({roundedContainer:[{borderBottomLeftRadius:U.TV.space6}],featureHeader:[U.l0.rowWithGap(8),U.l0.align.center],popover:[U.l0.p(8),U.l0.borderRadius(8),U.l0.maxWidth(260),U.l0.colWithGap(8)],featureTitle:[U.l0.rowWithGap(4),U.l0.align.center,U.l0.flex.growAndShrink(1),U.l0.fontWeight.medium],enableAutocomplete:[U.l0.rowWithGap(4),U.l0.align.center],text:[U.l0.colWithGap(8)],hint:[U.l0.rowWithGap(4),U.l0.align.center]});function ce(e){var t=(0,A.useId)();return(0,x.BX)(rT.Tg,{css:l7.popover,children:[(0,x.BX)(N.G,{css:l7.featureHeader,children:[(0,x.BX)(N.G,{css:l7.featureTitle,children:[(0,x.tZ)(l8.Z,{color:U.TV.blurpleDefault}),(0,x.tZ)(ex.xv,{children:"AI Autocomplete"})]}),(0,x.BX)(N.G,{css:l7.enableAutocomplete,children:[(0,x.tZ)(N.G,{tag:"label",htmlFor:t,children:(0,x.tZ)(ex.xv,{color:"dimmer",variant:"small",children:"Enable"})}),(0,x.tZ)(l4.X,{id:t,checked:e.checked,onChange:e.onChange})]})]}),(0,x.BX)(N.G,{css:l7.text,children:[(0,x.tZ)(ex.xv,{color:"dimmer",variant:"small",children:"Suggest lines of code as you type based on existing context."}),(0,x.BX)(N.G,{css:l7.hint,children:[(0,x.tZ)(ex.xv,{color:"dimmer",variant:"small",children:"Press"}),(0,x.tZ)(o_.bM,{small:!0,keyCombo:"Tab"}),(0,x.tZ)(ex.xv,{color:"dimmer",variant:"small",children:"to accept result"})]})]})]})}var ct=function(e){var t,n,r,i,o,a,l=e.rounded,c=void 0===l||l,s=function(){f({codeSuggestion:!d}),(0,tv.j)(tv.U3.CODE_SUGGESTION_TOGGLED,{enabled:!d,source:"editor_footer"})},u=(0,eh.Gn)("codeSuggestion"),d=u.preferences.codeSuggestion,f=u.update,h=(0,Z._)((0,l3.KO)(l6.t),1)[0],p=(0,A.useRef)(!0),m=(0,lr.o)("ai-code-completion"),v=(0,tM.P5)({controlName:"flag-gw-charizard"}),g=(t=(0,y._)({},l1,{skip:!v}),lQ.a(l2,t)),b=g.data,w=g.loading,C=null==b?void 0:b.currentUser,_=(null==C?void 0:C.userSubscriptionType)===l$.HP.HackerPro,S=(0,A.useRef)(null),E=!m.isDone&&!_,k=(0,A.useRef)(!1),T=(0,l5.d)({onOpenChange:function(e){if(e){k.current=!0;return}setTimeout(function(){k.current=!1}),E&&m.setAsDone()}}),R=(0,H.uN)();r=(n={view:R,effect:l9.OK,skip:!E}).view,i=n.skip,o=n.effect,a=(0,ax.Z)(function(e,t){var n=t.startState.field(l9.WF),r=t.state.field(l9.WF);!n.presented&&r.presented&&(p.current=!1,T.open())}),(0,A.useEffect)(function(){if(r&&!i){var e=new ev.F6,t=ey.tk.updateListener.of(function(e){(0,ew.j)(e,o,function(t){return a.current(t,e)})});return r.dispatch({effects:ev.Py.appendConfig.of(e.of(t))}),function(){r.dispatch({effects:e.reconfigure([])})}}},[r,i,a,o]);var D=(0,ax.Z)(T);(0,A.useEffect)(function(){h.tooltipOpen&&(null==R?void 0:R.hasFocus)&&(p.current=!1,D.current.open())},[h.tooltipOpen,R,D]);var I=(0,x.tZ)(tZ.Z,{color:d?U.TV.blurpleDefault:void 0});if(w||m.isLoading)return(0,x.BX)(x.HY,{children:[(0,x.tZ)(lR,{children:(0,x.tZ)(a$,{disabled:!0,text:"AI",iconLeft:I,css:c&&l7.roundedContainer})}),(0,x.tZ)(lI,{children:(0,x.tZ)(lB,{disabled:!0,alt:"AI",css:c&&l7.roundedContainer,children:I})})]});if(v)return(0,x.BX)(x.HY,{children:[(0,x.BX)(N.G,{innerRef:S,children:[(0,x.tZ)(lR,{children:(0,x.tZ)(a$,{text:"AI",iconLeft:I,css:c&&l7.roundedContainer,onClick:function(){k.current||T.open()}})}),(0,x.tZ)(lI,{children:(0,x.tZ)(a9.u,{tooltip:"AI",placement:"top-start",children:(0,x.tZ)(lB,{alt:"AI",css:c&&l7.roundedContainer,onClick:function(){k.current||T.open()},children:I})})})]}),T.isOpen?(0,x.tZ)(a3.Bf,{placement:"top left",background:"default",triggerRef:S,onOpenChange:T.setOpen,isOpen:T.isOpen,children:(0,x.tZ)(a3.Vq,{role:"dialog","aria-label":"AI Autocomplete",children:(0,x.tZ)(ce,{onChange:s,checked:d})})}):null]});var G=d?"Disable":"Enable";return(0,x.BX)(x.HY,{children:[(0,x.tZ)(lR,{children:(0,x.tZ)(a9.u,{tooltip:"".concat(G," ").concat(v?"AI":"Ghostwriter"," Code Completion"),placement:"top-start",children:(0,x.tZ)(a$,{text:v?"AI":"Ghostwriter",iconLeft:I,onClick:s,css:c&&l7.roundedContainer})})}),(0,x.tZ)(lI,{children:(0,x.tZ)(a9.u,{tooltip:"".concat(G," ").concat(v?"AI":"Ghostwriter"," Code Completion"),placement:"top-start",children:(0,x.tZ)(lB,{alt:"".concat(G," ").concat(v?"AI":"Ghostwriter"," Code Completion"),onClick:s,css:c&&l7.roundedContainer,children:I})})})]})},cn=n(21012),cr=(0,tw.X)({root:[U.l0.position.relative,U.l0.rowWithGap(16),U.l0.align.center,U.l0.justify.spaceBetween,U.l0.backgroundColor.backgroundDefault,U.l0.container("StatusBar"),{borderTop:"1px solid ".concat(U.TV.backgroundHigher)},{height:"29px",contain:"strict"}],group:[U.l0.flex.row,U.l0.flex.shrink(1),U.l0.align.center]});function ci(e){var t=e.filePath,n=e.performPaneOperation,r=(0,tM.P5)({controlName:"flag-lsp-diagnostics-in-footer",logFlagToAnalytics:!1}),i=(0,V.d)(),o=(0,cn.ZP)(),a=(0,tM.P5)({controlName:"flag-status-bar-branch",logFlagToAnalytics:!1}),l=(0,tM.P5)({controlName:"flag-editor-git-inline-diff",logFlagToAnalytics:!1}),c=(0,C.T3)()?void 0:{borderBottomLeftRadius:7,borderBottomRightRadius:7},s=(0,t4.Z)(function(){return function(){n({operation:"replace",pane:{type:"history",data:{path:t}}})}},[t,n]),u=(0,t4.Z)(function(){return function(){n({operation:"open",pane:{type:"preferences"}})}},[n]);return(0,x.BX)(rT.Tg,{css:cr.root,style:c,children:[(0,x.BX)(N.G,{css:cr.group,children:[(0,cn.G_)(o)&&!i?(0,x.tZ)(ct,{}):null,i?null:(0,x.tZ)(ll,{openSettings:u}),!i&&r?(0,x.tZ)(l_,{}):null,a?(0,x.tZ)(aJ,{performPaneOperation:n}):null,l?(0,x.tZ)(lP,{}):null,(0,x.tZ)(ly,{})]}),(0,x.BX)(N.G,{css:cr.group,children:[(0,x.tZ)(lm,{}),(0,x.tZ)(lz,{path:t,openSettings:u}),(0,x.tZ)(a1,{onOpen:s,rounded:!i})]})]})}var co=n(41084),ca=n(917),cl=n(1518),cc=n(12915),cs=n(62347),cu=n(20399),cd=n(26890),cf=n(78141),ch=n(13729),cp=(0,r_.iv)([a4.gU.nofill,{transitionProperty:"background-color, box-shadow, opacity",opacity:.8,":focus":{zIndex:1,opacity:1}}]),cm={button:(0,r_.iv)([U.l0.reset.button,U.l0.p(2),U.l0.rowWithGap(4),U.l0.align.center,cp]),text:(0,r_.iv)({fontSize:U.TV.fontSizeSmall})},cv={opacity:1};function cg(e){var t=e.icon,n=e.text,r=e.innerRef,i=e.ariaProps,o=e.active,a=(0,cd.U)(i,r).buttonProps,l=(0,cf.XI)({}),c=l.hoverProps,s=l.isHovered;return(0,x.BX)(N.G,(0,b._)((0,y._)({tag:"button",css:cm.button,style:s||o?cv:void 0,innerRef:r},(0,ch.dG)(a,c)),{children:[t?(0,A.cloneElement)(t,{size:16}):null,(0,x.tZ)(N.G,{css:cm.text,children:n})]}))}var cy=n(49786),cb=n(10910),cZ={underlay:(0,r_.iv)([U.l0.coverContainer,U.l0.position.fixed]),surface:(0,r_.iv)([U.l0.borderRadius(8),{boxShadow:U.TV.shadow2,border:"1px solid",borderColor:U.TV.backgroundHighest}])};function cw(e){var t=e.state,n=e.triggerRef,r=e.placement,i=e.children,o=(0,Z._)((0,cb.Z)(),2),a=o[0],l=o[1],c=(0,cy.Sv)({placement:r,triggerRef:n,popoverRef:a,offset:8},t),s=c.popoverProps,u=c.underlayProps;return(0,x.BX)(cy.aV,{children:[(0,x.tZ)(N.G,(0,b._)((0,y._)({},u),{css:cZ.underlay})),(0,x.BX)(rT.Tg,(0,b._)((0,y._)({elevated:!0,css:cZ.surface,innerRef:l},s),{children:[(0,x.tZ)(cy.U4,{onDismiss:t.close}),i,(0,x.tZ)(cy.U4,{onDismiss:t.close})]}))]})}var cx=n(88298),cC=(0,r_.iv)([U.l0.p(4)]);function c_(e){var t=e.items,n=e.children,r=e.menuProps,i=e.selectedKeys,o=e.onAction,a=(0,cx.D)({items:t,children:n,selectedKeys:i,selectionMode:"single"}),l=(0,A.useRef)(null),c=(0,cs.H9)((0,y._)({items:t,onAction:o},r),a,l);return(0,x.tZ)(N.G,(0,b._)((0,y._)({},c.menuProps),{innerRef:l,css:cC,children:(0,w._)(a.collection).map(function(e){return(0,x.tZ)(ck,{item:e,state:a},e.key)})}))}var cS={root:(0,r_.iv)([U.l0.flex.row,U.l0.align.center,U.l0.position.relative,cp]),selected:(0,r_.iv)([{opacity:1,backgroundColor:a4.vb.interactiveBackground}])},cE={opacity:1};function ck(e){var t=e.item,n=e.state,r=(0,A.useRef)(null),i=(0,cs.iX)({key:t.key},n,r),o=i.menuItemProps,a=i.isSelected,l=(0,cf.XI)({}),c=l.hoverProps,s=l.isHovered;return(0,x.tZ)(N.G,(0,b._)((0,y._)({innerRef:r,css:[cS.root,a&&cS.selected],style:s||a?cE:void 0},(0,ch.dG)(o,c)),{children:t.rendered}))}var cT={root:(0,r_.iv)([U.l0.p(4),U.l0.rowWithGap(4),U.l0.align.center]),text:(0,r_.iv)([U.l0.truncate,U.l0.flex.growAndShrink(1),{fontSize:U.TV.fontSizeDefault}])};function cR(e){return(0,x.BX)(N.G,{css:[cT.root],children:[e.icon?(0,A.cloneElement)(e.icon,{size:16}):null,(0,x.tZ)(N.G,{css:cT.text,children:e.text})]})}var cD=n(21158),cI=n(52686),cG=n(71104),cB=n(31070),cA=n(84271),cP=n(71064),cN=n(18514),cU=n(67337),cL=n(39810),cO=n(51828),cM=n(31270),cX=n(19012),cF=function(e){var t=new Set(cX.Z),n=new Map,r=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=(0,Z._)(a.value,3),s=c[0],u=c[1],d=c[2];if(!t.has(s))throw Error("Symbol not supported by LSP client. Please add to the supported symbol icons array");if("string"==typeof u){var f=cO.s.get(u);if(!f)throw Error("Couldn't find matching icon for ".concat(u));u=f}n.set(s,[u,null!=d?d:U.TV.foregroundDefault])}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return n}([[e_.SymbolKind.Array,cN.Z],[e_.SymbolKind.Boolean,T.Z],[e_.SymbolKind.Class,"class",U.TV.yellowDefault],[e_.SymbolKind.Constant,"constant",U.TV.blueStronger],[e_.SymbolKind.Constructor,"method",U.TV.blurpleDefault],[e_.SymbolKind.Enum,cG.Z,U.TV.orangeDefault],[e_.SymbolKind.EnumMember,cL.Z,U.TV.blueStronger],[e_.SymbolKind.Event,cD.Z],[e_.SymbolKind.Field,cU.Z],[e_.SymbolKind.File,cB.Z],[e_.SymbolKind.Function,"function",U.TV.blurpleStronger],[e_.SymbolKind.Interface,cA.Z,U.TV.blueStronger],[e_.SymbolKind.Key,cP.Z],[e_.SymbolKind.Method,"method",U.TV.blurpleDefault],[e_.SymbolKind.Module,cM.Z,U.TV.purpleDefault],[e_.SymbolKind.Namespace,cI.Z],[e_.SymbolKind.Object,T.Z,U.TV.blueDimmer],[e_.SymbolKind.Operator,T.Z],[e_.SymbolKind.Package,cM.Z,U.TV.purpleDefault],[e_.SymbolKind.Property,cU.Z],[e_.SymbolKind.String,k.Z],[e_.SymbolKind.Struct,cI.Z],[e_.SymbolKind.TypeParameter,cL.Z],[e_.SymbolKind.Variable,cL.Z,U.TV.blueStronger]]);function cW(e){var t,n=e.kind,r=(0,Z._)(null!==(t=cF.get(n))&&void 0!==t?t:[T.Z,U.TV.foregroundDefault],2),i=r[0],o=r[1];return(0,x.tZ)(i,{color:o,size:16})}function cH(e){return CSS.escape(e.name)}function cV(e){var t=e.selectedSymbol,n=e.symbols,r=e.moveCursor,i=e.icon,o=e.text,a=(0,cc.W)({onOpenChange:function(e){e&&(0,tv.j)(tv.U3.CODE_NAVIGATION_USED,{action:"opened"})}}),l=A.useRef(null),c=(0,cs.u4)({},a,l),s=c.menuTriggerProps,u=c.menuProps,d=t?new Set([t.name]):void 0;return(0,x.BX)(x.HY,{children:[(0,x.tZ)(cg,{text:o,icon:i,innerRef:l,ariaProps:s,active:a.isOpen}),a.isOpen?(0,x.tZ)(cw,{triggerRef:l,state:a,placement:"bottom left",children:(0,x.tZ)(c_,{menuProps:u,items:n,selectedKeys:d,onAction:function(e){var t=n.find(function(t){return cH(t)===e});t&&(r(t.selectionRange.start),(0,tv.j)(tv.U3.CODE_NAVIGATION_USED,{action:"jumped"}))},children:function(e){return(0,x.tZ)(cu.ck,{children:(0,x.tZ)(cR,{icon:(0,x.tZ)(cW,{kind:e.kind}),text:e.name})},cH(e))}})}):null]})}var cz=A.memo(function(e){var t=e.symbols,n=e.symbolsPath,r=e.moveCursor,i=n.length?n[n.length-1]:null,o=i?i.children:t;return(0,x.BX)(x.HY,{children:[n.map(function(e,i){var o=0===i?t:n[i-1].children;return o?(0,x.BX)(A.Fragment,{children:[(0,x.tZ)(ag.Z,{size:12}),(0,x.tZ)(cV,{symbols:o,icon:(0,x.tZ)(cW,{kind:e.kind}),text:e.name,selectedSymbol:e,moveCursor:r})]},cH(e)):null}),(null==o?void 0:o.length)?(0,x.BX)(x.HY,{children:[(0,x.tZ)(ag.Z,{size:12}),(0,x.tZ)(cV,{symbols:o,text:"...",moveCursor:r})]}):null]})}),cj=(0,A.memo)(function(e){var t,n=e.view,r=(0,A.useCallback)(function(e){null==n||n.dispatch({scrollIntoView:!0,selection:ev.jT.cursor((0,eb.RL)(n.state.doc,e))}),null==n||n.focus()},[n]),i=(0,A.useDeferredValue)({symbols:(0,nQ.IK)(n,np),symbolsPath:(0,nQ.IK)(n,ng)});return(null===(t=i.symbols)||void 0===t?void 0:t.length)?(0,x.tZ)(cz,{symbols:i.symbols,symbolsPath:i.symbolsPath||[],moveCursor:r}):null}),cq=n(12506),cY=n(66995);function c$(e){var t=e.path,n=e.performPaneOperation,r=(0,H.uN)(),i=(0,A.useCallback)(function(e){n({operation:"open",pane:(0,cq.$E)(e)})},[n]);return(0,x.tZ)(cq.h4,{children:(0,x.tZ)(cq.Qc,{children:(0,x.tZ)(cY.tr,{path:t,onFileClick:i,children:(0,x.tZ)(cj,{view:r})})})})}function cJ(e){var t=(0,cl.Z)(),n=(0,en.xZ)(e.filePath),r=(0,co.Z)(ca.y.Editor),i=(0,P.Z)(),o=e.performPaneOperation,a=(0,A.useCallback)(function(e){return o({operation:"open",pane:e,secondary:!0})},[o]);return(0,x.BX)("div",{ref:r,css:{position:"relative",display:"flex",flexDirection:"column",overflowY:"hidden",height:"100%",width:"100%",boxShadow:"".concat(t?"0 3px 0 3px ".concat(t):"0"),borderBottomLeftRadius:"0px",borderBottomRightRadius:"0px"},children:[e.performPaneOperation?(0,x.tZ)(c$,{performPaneOperation:e.performPaneOperation,path:e.filePath}):null,(0,x.BX)("div",{css:iy.ev,children:[(0,x.tZ)(aV,{openPane:a,openFile:e.openFile,openThreadsInbox:e.openThreadsInbox,filePath:e.filePath,autoFocus:e.autoFocus,hideMobileKeyboardToolbar:e.hideMobileKeyboardToolbar,isHidden:e.isHidden,deeplink:e.deeplink,onDeeplinkUpdated:e.onDeeplinkUpdated}),n?(0,x.tZ)(et,{}):null]}),(0,x.tZ)("div",{css:{display:i?"none":"block"},children:(0,x.tZ)(ci,{filePath:e.filePath,performPaneOperation:e.performPaneOperation})}),e.hideMobileKeyboardToolbar?null:(0,x.tZ)($,{filePath:e.filePath,isLoading:!1})]})}var cK=n(31171),cQ=n(81),c0=(0,tw.X)({root:[U.l0.coverContainer,U.l0.center,U.l0.p(16)]});function c1(e){var t=e.message;return(0,x.tZ)(N.G,{css:c0.root,children:(0,x.tZ)(N.G,{children:(0,x.tZ)(a6.E,{icon:(0,x.tZ)(oC.Z,{}),colorway:"orange",text:t})})})}var c2=n(68099),c8=n(74044),c4=n(99149),c3=n(8622),c5=c8.Dy.Object({type:c8.Dy.Literal("codeEditor"),data:c8.Dy.Object({path:c8.Dy.Union([c8.Dy.String({minLength:1}),c8.Dy.Null()]),line:c8.Dy.Optional(c8.Dy.Number()),col:c8.Dy.Optional(c8.Dy.Number())})}),c6={Content:function(e){var t=e.pane,n=e.options;return(0,x.tZ)(c7,(0,b._)((0,y._)({},t.data),{isActive:n.isActive,isHidden:n.isHidden,performPaneOperation:n.performPaneOperation}))},Icon:function(e){var t=e.pane,n=e.size;return(0,x.tZ)(_.Z,{path:t.data.path||"",size:n})},getTitle:function(e){return e.data.path?(0,ie.UO)(e.data.path):"No file open"},decode:function(e){return c4.B4.Decode(c5,e)}};function c9(e){var t,n,r,i,o,a=e.path,l=e.performPaneOperation,c=(0,H.uN)(),s=(0,t4.Z)(function(){return c?{match:nt.pl,data:{type:"action",label:"Toggle all folds",icon:(0,x.tZ)(ag.Z,{}),run:function(){0===(0,e$.q2)(c.state).size?(0,e$.g_)(c):(0,e$.jZ)(c)}}}:null},[c]),u=(0,nQ.IK)(c,c3.W),d=(0,nQ.IK)(c,ae.Gz),f=(0,nQ.IK)(c,ae.SD);(0,A.useEffect)(function(){u&&l({operation:"commit"})},[u,l]);var h=(0,t4.Z)(function(){return c&&f?d?{type:"action",icon:(0,x.tZ)(tY.Z,{}),label:"Formatting...",run:function(){}}:{dataCy:"ws-format-btn",type:"action",icon:(0,x.tZ)(cQ.Z,{}),label:"Format "+(0,ie.UO)(a),run:function(){(0,ae.z1)(c)}}:null},[c,f,d,a]),p=(0,cq.Mp)({path:a,performPaneOperation:l}),m=(t=(0,C.T3)(),r=(n=(0,eh.Gn)("minimapDisplay")).preferences.minimapDisplay,i=n.update,(0,t4.Z)(function(){return t?null:{match:nt.pl,data:{label:"Minimap",icon:(0,x.tZ)(S.Z,{}),type:"context"},commands:function(e){var t=e.active,n=e.search;return t||n?[{value:"none",label:"Hide",icon:(0,x.tZ)(E.Z,{})},{value:"characters",label:"Characters",icon:(0,x.tZ)(k.Z,{})},{value:"blocks",label:"Blocks",icon:(0,x.tZ)(T.Z,{})}].filter(function(e){return e.value!==r}).map(function(e){return{match:nt.pl,data:{type:"action",label:e.label,icon:e.icon,run:function(){i({minimapDisplay:e.value})}}}}):[]}}},[i,r,t])),v=(o=function(){return l({operation:"replace",pane:{type:"history",data:{path:a}}})},(0,t4.Z)(function(){return{match:nt.pl,data:{label:"History",icon:(0,x.tZ)(aK.Z,{}),type:"action",run:function(){o()}}}},[o]));return(0,lZ.L5)(function(){var e,t=function(e){return{label:"Preview",icon:(0,x.tZ)(og.Z,{}),type:"action",run:function(){l({operation:"replace",pane:{type:e,data:{path:a}}})}}};if(c){var n=[];return n.push(v),m&&n.push(m),s&&n.push(s),p&&n.push.apply(n,(0,w._)(p)),h&&(e=[h]),(0,ie.B4)(a)&&(e=e&&e.length?[e[0],t("media")]:[t("media")]),(0,ie.gK)(a)&&(e=e&&e.length?[e[0],t("markdown")]:[t("markdown")]),{type:"codeEditor",actions:e,commands:n,getEditorView:function(){return c},getCurrentSelectionText:function(){if(!c.state.selection.main.empty)return c.state.sliceDoc(c.state.selection.main.from,c.state.selection.main.to)},insertGhostwriterChatCode:function(e,t){(0,ao.el)({view:c,insert:e,overwrite:t})},revertGhostwriterChatCode:function(){(0,ao.iG)(c)},fetchProblems:function(){var e;return(0,c2.j)(c),null!==(e=c.state.field(eF.G0,!1))&&void 0!==e?e:[]}}}},[c,h,s,p,m,v,l,a]),(0,lZ.Wk)(function(){return c},[c]),null}function c7(e){var t,n,r,i,o=e.path,a=e.line,l=e.col,c=e.isActive,s=e.isHidden,u=e.performPaneOperation,d=(0,Z._)((0,A.useState)(function(){return(0,I.MT)()}),1)[0],f=(0,Z._)((0,A.useState)(function(){return(0,I.MT)()}),1)[0],h=(0,R.useRouter)(),p=!(D().query.embed||D().query.lite)&&!(0,C.Vg)(h)&&c,m=(t=(0,eo.Z)().fs,r=(n=(0,Z._)((0,A.useState)(null),2))[0],i=n[1],(0,A.useEffect)(function(){if(o){var e=t.watchPathStat(o,{onNewStat:function(e){if(!e.exists){i('No file found at "'.concat(o,'", it may have been deleted'));return}if(e.type===nW.Tv.Directory){i('"'.concat(o,'" is a directory'));return}i(null)},onError:function(){i('Unknown error occured while read "'.concat(o,'", try re-opening the editor'))}});return function(){e(),i(null)}}},[t,o]),r),v=(0,t4.Z)(function(){return{line:a,col:l}},[a,l]),g=(0,t4.Z)(function(){return function(){u({operation:"replace",pane:{type:"codeEditor",data:{path:o}}})}},[u,o]),y=(0,t4.Z)(function(){return function(e){u({operation:"commit"}),u({operation:"open",pane:{type:"codeEditor",data:e}})}},[u]),b=(0,A.useCallback)(function(){u({operation:"open",secondary:!0,pane:{type:"threadInbox"}})},[u]);return o?m?(0,x.tZ)(c1,{message:m}):(0,x.tZ)(H.Cl.Provider,{value:d,children:(0,x.BX)(cK.ox.Provider,{value:f,children:[(0,x.tZ)(cJ,{filePath:o,autoFocus:p,isHidden:null!=s&&s,deeplink:v,onDeeplinkUpdated:g,hideMobileKeyboardToolbar:!0,performPaneOperation:u,openFile:y,openThreadsInbox:b},o),(0,x.tZ)(c9,{path:o,isActive:c,performPaneOperation:u})]})}):null}},94255:function(e,t,n){n.d(t,{J:function(){return a}});var r=n(74044),i=n(99149),o=r.Dy.Object({type:r.Dy.Literal("commands"),data:r.Dy.Object({autoFocus:r.Dy.Boolean()})}),a=function(e){return i.B4.Decode(o,e)}},21398:function(e,t,n){n.d(t,{R:function(){return ad}});var r,i,o,a,l,c,s,u,d,f=n(32477),h=n(8182),p=n(52902),m=n(43429),v=n(56596),g=n(29287),y=n(34142),b=n(87682),Z=n(60427),w=n(50782),x=n(37951),C=n(93918),_=n(45087),S=n(7877),E=n(18514),k=n(58003),T=n(20573),R=n(75582),D=n(1498),I=n(93496),G=n(38080),B=n(14186),A=n(50494),P=(0,C.X)({root:[{borderBottom:"1px solid ".concat(g.TV.outlineDimmest)}],inner:[g.l0.position.relative,{"::before":{content:'""',display:"block",position:"absolute",left:0,width:8,height:"100%",background:"linear-gradient(90deg, ".concat(g.TV.backgroundDefault," 0%, rgba(0,0,0,0) 100%);"),zIndex:1},"::after":{content:'""',display:"block",position:"absolute",right:0,width:8,height:"100%",background:"linear-gradient(270deg, ".concat(g.TV.backgroundDefault," 0%, rgba(0,0,0,0) 100%);"),zIndex:1}}],tabs:[g.l0.flex.row,g.l0.align.center,g.l0.overflowX("auto"),g.l0.pl(8)],tab:[I.gU.nofill,g.l0.borderRadius(0),g.l0.px(12),g.l0.position.relative,{transition:"none",height:38,marginRight:1,"::after":{content:'""',display:"block",position:"absolute",right:-2,width:1,height:16,backgroundColor:g.TV.outlineDimmest},"&:last-child":{marginRight:0,"::after":{display:"none"}}}],dot:[g.l0.position.absolute,g.l0.borderRadius(16),g.l0.width(8),g.l0.height(8),g.l0.backgroundColor.accentPrimaryStronger,{top:8,right:8}]}),N=function(e){var t=e.tabs,n=e.activeView,r=e.onClick,i=(0,A.o)("deployment-analytics-dot"),o=i.isLoading,a=i.isDone;return(0,h.tZ)(G.Tg,{css:P.root,children:(0,h.tZ)(v.G,{css:P.inner,children:(0,h.tZ)(v.G,{css:P.tabs,children:t.map(function(e){return(0,h.BX)(v.G,{css:g.l0.position.relative,children:[(0,h.tZ)(D.zx,{style:{borderBottom:"1px solid "+(n===e.view?g.TV.foregroundDefault:"transparent")},css:P.tab,text:e.label,iconLeft:e.icon,onClick:function(){return r(e)}}),e.view!==B.k.Analytics||o||a?null:(0,h.tZ)(v.G,{css:P.dot})]},e.view)})})})})},U=n(45903),L=n(25e3),O=n(70322),M=n(92977),X=[g.l0.px(8),g.l0.pt(16)],F=(0,C.X)({root:[X],rootMaxWidth:[X,M.Qw.maxWidth]}),W=function(e){var t=e.children,n=e.maxWidth,r=(0,O._)(e,["children","maxWidth"]);return(0,h.tZ)(v.G,(0,L._)((0,U._)({},r),{css:n?F.rootMaxWidth:F.root,children:t}))},H=n(39698),V=n(74833),z=n(16704),j=n(21166),q=n(54449),Y=n(70671),$=n(8279),J=n(93295),K=n(23982),Q=n(77393);function ee(){var e=(0,J._)(["\n  fragment ReplAnalyticsPageViewDataPoint on ReplAnalyticsPageViewsData {\n    __typename\n    timestamp\n    success\n    failure\n  }\n"]);return ee=function(){return e},e}function et(){var e=(0,J._)(["\n  fragment ReplAnalyticsPageViews on ReplAnalyticsPageViews {\n    __typename\n    uniques\n    results {\n      ...ReplAnalyticsPageViewDataPoint\n    }\n  }\n  ","\n"]);return et=function(){return e},e}function en(){var e=(0,J._)(["\n  query ReplAnalyticsPageViews(\n    $id: String!\n    $input: ReplAnalyticsPageViewsInput!\n  ) {\n    repl(id: $id) {\n      ... on Repl {\n        __typename\n        id\n        analyticsPageViews(input: $input) {\n          ... on ReplAnalyticsPageViews {\n            ...ReplAnalyticsPageViews\n          }\n          ... on NotFoundError {\n            __typename\n            message\n          }\n          ... on UserError {\n            __typename\n            message\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return en=function(){return e},e}var er={},ei=(0,K.Ps)(ee()),eo=(0,K.Ps)(et(),ei),ea=(0,K.Ps)(en(),eo),el=n(22539),ec=n(83109),es=n(25201),eu=n(51535),ed=n(51384),ef=(0,ed.iv)([g.l0.maxHeight(320),g.l0.minHeight(240),{aspectRatio:"2 / 1"}]);function eh(){var e=(0,Y.F)().values;return{animation:{duration:0},backgroundColor:e.global.backgroundHigher,borderColor:e.global.outlineDimmer,borderWidth:1,titleFont:{family:"'IBM Plex Sans', sans-serif"},bodyFont:{family:"'IBM Plex Sans', sans-serif"},footerFont:{family:"'IBM Plex Sans', sans-serif"},padding:8,cornerRadius:6}}el.kL.register(el.uw,el.f$,el.od,el.jn,el.u);var ep=function(e){var t=e.labels,n=e.datasets,r=e.maintainAspectRatio,i=(0,Y.F)().values,o={labels:t.map(function(e){return e.toISOString()}),datasets:n.map(function(e){return(0,L._)((0,U._)({},e),{data:e.data.map(function(e){var t=e.x,n=e.y;return{x:t.toISOString(),y:n}}),pointRadius:.5,tension:.1})})},a=t.length;return(0,h.tZ)(eu.x1,{options:{clip:4,interaction:{mode:"nearest",intersect:!1},transitions:{active:{animation:{duration:0}}},elements:{point:{hoverRadius:4},line:{borderWidth:2}},responsive:!0,maintainAspectRatio:void 0===r||r,plugins:{tooltip:(0,L._)((0,U._)({},eh()),{callbacks:{title:function(e){var t=new Date(e[0].label);return(0,ec.Z)(t,"MMM d, HH:mm (z)")}}})},scales:{y:{title:{display:!0,text:"# Requests",color:i.global.foregroundDimmer,font:{family:"'IBM Plex Sans', sans-serif"}},grid:{color:i.global.outlineDimmest},ticks:{font:{family:"'IBM Plex Sans', sans-serif"},color:i.global.foregroundDimmer,callback:function(e){if("number"==typeof e&&Math.floor(e)===e)return e}},min:0},x:{title:{display:!0,text:"Time",color:i.global.foregroundDimmer,font:{family:"'IBM Plex Sans', sans-serif"}},grid:{color:i.global.outlineDimmest},ticks:{font:{family:"'IBM Plex Sans', sans-serif"},color:i.global.foregroundDimmer,callback:function(e,n){var r=t[n];if(a<=24){if(r.getHours()%4!=0)return;return(0,ec.Z)(r,"HH:mm")}if(r.toISOString()===(0,es.Z)(r).toISOString())return(0,ec.Z)(r,"MMM d")}}}}},data:o})},em=function(e){var t=e.data,n=e.start,r=e.hours,i=(0,Y.F)().values,o=Array(r).fill(0).map(function(e,t){return(0,q.Z)(n,t)}),a=t.results.reduce(function(e,t){return e.set(t.timestamp,t),e},new Map),l=[{label:"Connected",data:o.map(function(e){var t;return{y:(null!==(t=a.get(e.toISOString()))&&void 0!==t?t:{success:0}).success,x:e}}),borderColor:i.global.accentPrimaryDefault,backgroundColor:i.global.accentPrimaryDefault},{label:"Failed",data:o.map(function(e){var t;return{y:(null!==(t=a.get(e.toISOString()))&&void 0!==t?t:{failure:0}).failure,x:e}}),borderColor:i.global.accentNegativeDefault,backgroundColor:i.global.accentNegativeDefault}];return(0,h.tZ)(ep,{labels:o,datasets:l,maintainAspectRatio:!1})},ev=function(e){var t,n,r,i=e.replId,o=e.start,a=e.hours,l=(0,f._)((0,m.useState)(void 0),2),c=l[0],s=l[1],u=(t=(0,U._)({},er,{variables:{id:i,input:{start:o,hours:a,deployment:!0}},ssr:!1,onCompleted:function(e){if("Repl"===e.repl.__typename)switch(e.repl.analyticsPageViews.__typename){case"UserError":case"NotFoundError":s(Error(e.repl.analyticsPageViews.message))}}}),Q.a(ea,t)),d=u.data,p=u.loading,y=u.error,b=(null==d?void 0:null===(n=d.repl)||void 0===n?void 0:n.__typename)==="Repl"&&(null===(r=d.repl.analyticsPageViews)||void 0===r?void 0:r.__typename)==="ReplAnalyticsPageViews"?d.repl.analyticsPageViews:void 0,Z=b?b.uniques:void 0;return y&&s(y),(0,h.BX)(v.G,{css:[g.l0.colWithGap(8)],children:[(0,h.BX)(v.G,{css:[g.l0.flex.row,g.l0.align.center,g.l0.justify.spaceBetween],children:[(0,h.tZ)(V.xv,{variant:"subheadDefault",multiline:!1,children:"Requests"}),Z?(0,h.BX)(V.xv,{multiline:!1,children:[(0,h.tZ)("strong",{children:Z})," unique visitors"]}):null]}),(0,h.BX)(v.G,{children:[p?(0,h.tZ)(v.G,{css:[g.l0.width("100%"),ef,g.l0.borderRadius(8),$.p.backgroundPulse()]}):null,c?(0,h.tZ)(x.E,{text:c.message,colorway:"negative"}):null,b?(0,h.tZ)(v.G,{css:ef,children:(0,h.tZ)(em,{data:b,start:o,hours:a})}):null]})]})},eg=n(21289),ey=n(60671);function eb(){var e=(0,J._)(["\n  fragment ReplAnalyticsTopListResult on ReplAnalyticsTopList {\n    __typename\n    results {\n      __typename\n      value\n      count\n    }\n  }\n"]);return eb=function(){return e},e}function eZ(){var e=(0,J._)(["\n  query ReplAnalyticsTopList($id: String!, $input: ReplAnalyticsTopInput!) {\n    repl(id: $id) {\n      ... on Repl {\n        __typename\n        id\n        analyticsTopList(input: $input) {\n          ... on ReplAnalyticsTopList {\n            ...ReplAnalyticsTopListResult\n          }\n          ... on NotFoundError {\n            __typename\n            message\n          }\n          ... on UserError {\n            __typename\n            message\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return eZ=function(){return e},e}var ew={},ex=(0,K.Ps)(eb()),eC=(0,K.Ps)(eZ(),ex),e_=n(96546),eS=n.n(e_),eE=n(35908),ek=n(87599),eT=n(15146),eR=function(e){var t=e.data,n=e.variant;if(0===t.results.length)return(0,h.tZ)(V.xv,{multiline:!1,children:"No results"});switch(n){case"map":return(0,h.tZ)(eG,{data:t});case"pie":return(0,h.tZ)(eI,{data:t,devices:!1});case"device-pie":return(0,h.tZ)(eI,{data:t,devices:!0});case"table":return(0,h.tZ)(eD,{data:t})}},eD=function(e){var t=e.data;return el.kL.register(el.qi),(0,h.tZ)(v.G,{children:t.results.map(function(e,t){return(0,h.BX)(v.G,{css:[g.l0.rowWithGap(16),g.l0.py(8),{borderBottom:"1px solid ".concat(g.TV.outlineDimmest)},{"&:last-of-type":{borderBottom:"none"}}],children:[(0,h.tZ)(v.G,{css:[g.l0.flex.grow(1),g.l0.maxWidth("90%")],children:(0,h.tZ)(V.xv,{title:e.value,multiline:!1,children:e.value})}),(0,h.tZ)(v.G,{children:(0,h.tZ)(V.xv,{multiline:!1,children:e.count})})]},t)})})},eI=function(e){var t=e.data,n=e.devices,r=(0,Y.F)().values,i=[r.global.blueDefault,r.global.blurpleDefault,r.global.greenDefault,r.global.limeDefault,r.global.magentaDefault,r.global.orangeDefault,r.global.pinkDefault,r.global.purpleDefault,r.global.redDefault,r.global.tealDefault,r.global.yellowDefault],o=new Map;return n?t.results.forEach(function(e){var t=e.value,n=e.count,r=t.match(/\(.*\)/);if(r&&r.length){var i=r[0].substring(1,r[0].length-1),a=o.get(i)||0;o.set(i,a+n)}else{var l=o.get("Unknown")||0;o.set("Unknown",l+n)}}):t.results.forEach(function(e){var t=e.value,n=e.count,r=t.replace(/ \(.*\)/,""),i=o.get(r)||0;o.set(r,i+n)}),(0,h.tZ)(v.G,{css:ef,children:(0,h.tZ)(eu.by,{options:{radius:"90%",maintainAspectRatio:!1,plugins:{tooltip:eh()}},data:{labels:(0,eg._)(o.keys()),datasets:[{borderWidth:(0,eg._)(o.keys()).length>1?1:0,borderColor:r.global.outlineDimmest,data:(0,eg._)(o.values()),backgroundColor:Array(o.size).fill(0).map(function(e,t){return i[t%i.length]})}]}})})},eG=function(e){var t=e.data,r=eS()(function(){return Promise.all([n.e(5381),n.e(4096),n.e(1275),n.e(1455)]).then(n.bind(n,11455))},{loadableGenerated:{webpack:function(){return[11455]}},ssr:!1}),i=t.results.map(function(e){return{country:e.value,numHits:e.count}});return(0,h.tZ)(r,{countries:i})},eB=function(e){var t,n,r,i=e.replId,o=e.start,a=e.hours,l=e.metric,c=e.count,s=e.variant,u=void 0===s?"table":s,d=e.expandable,p=(0,ey.CZ)(l),y=(0,f._)((0,m.useState)(void 0),2),b=y[0],Z=y[1],w=(0,f._)((0,m.useState)(!1),2),C=w[0],_=w[1],S=(t=(0,U._)({},ew,{variables:{id:i,input:{metric:l,start:o,hours:a,deployment:!0,count:C?3*c:c}},ssr:!1,onCompleted:function(e){if("Repl"===e.repl.__typename)switch(e.repl.analyticsTopList.__typename){case"UserError":case"NotFoundError":Z(Error(e.repl.analyticsTopList.message))}}}),Q.a(eC,t)),E=S.data,k=S.loading,T=S.error;return T&&Z(T),(0,h.BX)(v.G,{css:g.l0.colWithGap(8),children:[(0,h.BX)(v.G,{css:g.l0.rowWithGap(8),children:[(0,h.tZ)(V.xv,{variant:"subheadDefault",multiline:!1,children:"device-pie"===u?"Top Devices":"Top ".concat(p)}),void 0!==d&&d?(0,h.tZ)(eT.hU,{alt:C?"Collapse list":"Expand list",onClick:function(){return _(!C)},children:C?(0,h.tZ)(ek.Z,{}):(0,h.tZ)(eE.Z,{})}):null]}),(0,h.BX)(v.G,{children:[k?(0,h.tZ)(v.G,{css:[g.l0.height(80),g.l0.borderRadius(8),$.p.backgroundPulse()]}):null,b?(0,h.tZ)(x.E,{text:b.message,colorway:"negative"}):null,(null==E?void 0:null===(n=E.repl)||void 0===n?void 0:n.__typename)==="Repl"&&(null===(r=E.repl.analyticsTopList)||void 0===r?void 0:r.__typename)==="ReplAnalyticsTopList"?(0,h.tZ)(eR,{variant:u,data:E.repl.analyticsTopList}):null]})]})};function eA(){var e=(0,J._)(["\n  fragment ReplAnalyticsTimeSeriesDataPoint on ReplAnalyticsTimeSeriesData {\n    __typename\n    timestamp\n    value\n    count\n  }\n"]);return eA=function(){return e},e}function eP(){var e=(0,J._)(["\n  fragment ReplAnalyticsTimeSeries on ReplAnalyticsTimeSeries {\n    __typename\n    results {\n      ...ReplAnalyticsTimeSeriesDataPoint\n    }\n  }\n  ","\n"]);return eP=function(){return e},e}function eN(){var e=(0,J._)(["\n  query ReplAnalyticsTimeSeries(\n    $id: String!\n    $input: ReplAnalyticsTimeSeriesInput!\n  ) {\n    repl(id: $id) {\n      ... on Repl {\n        __typename\n        id\n        analyticsTimeSeries(input: $input) {\n          ... on ReplAnalyticsTimeSeries {\n            ...ReplAnalyticsTimeSeries\n          }\n          ... on NotFoundError {\n            __typename\n            message\n          }\n          ... on UserError {\n            __typename\n            message\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return eN=function(){return e},e}var eU={},eL=(0,K.Ps)(eA()),eO=(0,K.Ps)(eP(),eL),eM=(0,K.Ps)(eN(),eO),eX=function(e){var t=e.data,n=e.start,r=e.hours,i=e.colorFn,o=Array(r).fill(0).map(function(e,t){return(0,q.Z)(n,t)}),a=t.results.reduce(function(e,t){var n,r=t.timestamp,i=t.value,o=t.count,a=null!==(n=e.get(i))&&void 0!==n?n:new Map;return a.set(r,o),e.set(i,a),e},new Map),l=(0,eg._)(a.keys()).map(function(e,t){var n=i(e,t),r=a.get(e);return{label:e,data:o.map(function(e){var t,n=null!==(t=null==r?void 0:r.get(e.toISOString()))&&void 0!==t?t:0;return{x:new Date(e),y:n}}),borderColor:n,backgroundColor:n}});return(0,h.tZ)(ep,{labels:o,datasets:l,maintainAspectRatio:!1})},eF=function(e){var t,n,r,i=e.replId,o=e.title,a=e.metric,l=e.start,c=e.hours,s=e.colorFn,u=(0,f._)((0,m.useState)(void 0),2),d=u[0],p=u[1],y=(t=(0,U._)({},eU,{variables:{id:i,input:{metric:a,start:l,hours:c,deployment:!0}},ssr:!1,onCompleted:function(e){if("Repl"===e.repl.__typename)switch(e.repl.analyticsTimeSeries.__typename){case"UserError":case"NotFoundError":p(Error(e.repl.analyticsTimeSeries.message))}}}),Q.a(eM,t)),b=y.data,Z=y.loading,w=y.error,C=(null==b?void 0:null===(n=b.repl)||void 0===n?void 0:n.__typename)==="Repl"&&(null===(r=b.repl.analyticsTimeSeries)||void 0===r?void 0:r.__typename)==="ReplAnalyticsTimeSeries"?b.repl.analyticsTimeSeries:void 0;return w&&p(w),(0,h.BX)(v.G,{css:[g.l0.colWithGap(8)],children:[(0,h.tZ)(v.G,{css:[g.l0.flex.row,g.l0.align.center,g.l0.justify.spaceBetween],children:(0,h.tZ)(V.xv,{variant:"subheadDefault",multiline:!1,children:o})}),(0,h.BX)(v.G,{children:[Z?(0,h.tZ)(v.G,{css:[g.l0.width("100%"),ef,g.l0.borderRadius(8),$.p.backgroundPulse()]}):null,d?(0,h.tZ)(x.E,{text:d.message,colorway:"negative"}):null,C?(0,h.tZ)(v.G,{css:ef,children:(0,h.tZ)(eX,{data:C,start:l,hours:c,colorFn:s})}):null]})]})};function eW(){var e=(0,J._)(["\n  fragment ReplAnalyticsDurationResult on ReplAnalyticsDuration {\n    __typename\n    results {\n      __typename\n      value\n      count\n    }\n  }\n"]);return eW=function(){return e},e}function eH(){var e=(0,J._)(["\n  query ReplAnalyticsDuration(\n    $id: String!\n    $input: ReplAnalyticsDurationInput!\n  ) {\n    repl(id: $id) {\n      ... on Repl {\n        __typename\n        id\n        analyticsDuration(input: $input) {\n          ... on ReplAnalyticsDuration {\n            ...ReplAnalyticsDurationResult\n          }\n          ... on NotFoundError {\n            __typename\n            message\n          }\n          ... on UserError {\n            __typename\n            message\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return eH=function(){return e},e}var eV={},ez=(0,K.Ps)(eW()),ej=(0,K.Ps)(eH(),ez),eq=function(e){var t=e.data;el.kL.register(el.ZL);var n=(0,Y.F)().values;return(0,h.tZ)(eu.$Q,{options:{responsive:!0,maintainAspectRatio:!1,datasets:{bar:{categoryPercentage:1,barPercentage:1}},plugins:{tooltip:eh()},scales:{y:{title:{display:!0,text:"# Requests",color:n.global.foregroundDimmer,font:{family:"'IBM Plex Sans', sans-serif"}},ticks:{font:{family:"'IBM Plex Sans', sans-serif"},color:n.global.foregroundDimmer,callback:function(e){if("number"==typeof e&&Math.floor(e)===e)return e}},grid:{color:n.global.outlineDimmest}},x:{title:{font:{family:"'IBM Plex Sans', sans-serif"},display:!0,text:"Duration (ms)",color:n.global.foregroundDimmer},ticks:{autoSkip:!1,maxRotation:20,color:n.global.foregroundDimmer,font:{family:"'IBM Plex Sans', sans-serif"}},grid:{color:n.global.outlineDimmest}}}},data:{labels:t.results.map(function(e){var t=e.value.replace("ms","").split("-"),n=t[t.length-1];return n.includes("s+")?n.replace("s+","000+"):"< "+n}),datasets:[{borderWidth:0,data:t.results.map(function(e){return e.count}),backgroundColor:Array(t.results.length).fill(n.global.tealDefault)}]}})},eY=function(e){var t,n,r,i=e.replId,o=e.start,a=e.hours,l=(0,f._)((0,m.useState)(void 0),2),c=l[0],s=l[1],u=(t=(0,U._)({},eV,{variables:{id:i,input:{start:o,hours:a,deployment:!0}},ssr:!1,onCompleted:function(e){if("Repl"===e.repl.__typename)switch(e.repl.analyticsDuration.__typename){case"UserError":case"NotFoundError":s(Error(e.repl.analyticsDuration.message))}}}),Q.a(ej,t)),d=u.data,p=u.loading,y=u.error;return y&&s(y),(0,h.BX)(v.G,{css:g.l0.colWithGap(8),children:[(0,h.tZ)(V.xv,{variant:"subheadDefault",children:"Request Durations (ms)"}),(0,h.BX)(v.G,{children:[p?(0,h.tZ)(v.G,{css:[ef,g.l0.borderRadius(8),$.p.backgroundPulse()]}):null,c?(0,h.tZ)(x.E,{text:c.message,colorway:"negative"}):null,(null==d?void 0:null===(n=d.repl)||void 0===n?void 0:n.__typename)==="Repl"&&(null===(r=d.repl.analyticsDuration)||void 0===r?void 0:r.__typename)==="ReplAnalyticsDuration"?(0,h.tZ)(v.G,{css:ef,children:(0,h.tZ)(eq,{data:d.repl.analyticsDuration})}):null]})]})},e$=n(20399),eJ=n(99741),eK=n(59868),eQ=function(e){var t=e.context;(0,eK.j)(eK.U3.DEPLOYMENT_SECTION_VIEWED,{context:t})},e0=[{label:"six hours",key:6},{label:"one day",key:24},{label:"five days",key:120},{label:"one week",key:168},{label:"two weeks",key:336},{label:"thirty days",key:720}],e1={label:"one week",key:168},e2=g.nC.min(600),e8=(0,C.X)({fullWidth:(0,H._)({},e2,{gridColumn:"span 2"})}),e4=(0,C.X)({container:(0,H._)({display:"grid",gap:32},e2,{gridTemplateColumns:"repeat(2, minmax(0, 1fr))"}),fullWidth:e8.fullWidth,map:[e8.fullWidth],pies:[e8.fullWidth,g.l0.flex.column,(0,H._)({gap:32},g.nC.min(480),[g.l0.flex.row,{" > *":{flex:1}}])]}),e3=function(e){var t=e.replId,n=(0,f._)((0,m.useState)(e1),2),r=n[0],i=r.key,o=r.label,a=n[1],l=(0,f._)((0,m.useState)((0,z.Z)((0,j.Z)(new Date),i-1)),2),c=l[0],s=l[1],u=(0,A.o)("deployment-analytics-dot"),d=u.isDone,p=u.setAsDone,y=(0,z.Z)((0,j.Z)(new Date),23),b=(0,Y.F)().values,Z=[b.global.redDefault,b.global.redDimmer,b.global.redStronger,b.global.redDimmest],w=[b.global.orangeDefault,b.global.orangeDimmer,b.global.orangeStronger,b.global.orangeDimmest],x=[b.global.blueDefault,b.global.blueDimmer,b.global.blueStronger,b.global.blueDimmest],C=[b.global.greenDefault,b.global.greenDimmer,b.global.greenStronger,b.global.greenDimmest];return m.useEffect(function(){eQ({context:B.k.Analytics})},[]),m.useEffect(function(){d||p()},[d,p]),(0,h.tZ)(W,{children:(0,h.BX)(v.G,{css:e4.container,children:[(0,h.tZ)(v.G,{css:e4.fullWidth,children:(0,h.tZ)(e$.ZE,{items:e0,label:"Past ".concat(o),icon:(0,h.tZ)(eJ.Z,{}),onAction:function(e){var t,n="string"==typeof e?parseInt(e,10):e;a(null!==(t=e0.find(function(e){return e.key===n}))&&void 0!==t?t:e1),s((0,z.Z)((0,j.Z)(new Date),n-1))},cssProps:[g.l0.width("fit-content")],children:e0.map(function(e){return(0,h.tZ)(e$.ck,{children:(0,h.tZ)(v.G,{css:[g.l0.rowWithGap(8),g.l0.align.center,g.l0.color.foregroundDefault],children:(0,h.tZ)(V.xv,{multiline:!1,children:e.label})})},e.key)})})}),(0,h.tZ)(v.G,{css:e4.fullWidth,children:(0,h.tZ)(ev,{replId:t,start:c,hours:i})}),(0,h.tZ)(eB,{replId:t,metric:ey.Pc.Url,start:c,hours:i,count:4,expandable:!0}),(0,h.tZ)(eB,{replId:t,metric:ey.Pc.Referrer,start:c,hours:i,count:4,expandable:!0}),(0,h.tZ)(eF,{replId:t,title:"HTTP Statuses (24h)",metric:ey.RH.Statuses,start:y,hours:24,colorFn:function(e,t){var n=Number(e);return n<300?C[t%C.length]:n<400?x[t%x.length]:n<500?w[t%w.length]:Z[t%Z.length]}}),(0,h.tZ)(eY,{replId:t,start:c,hours:i}),(0,h.BX)(v.G,{css:e4.pies,children:[(0,h.tZ)(eB,{replId:t,metric:ey.Pc.Browser,start:c,hours:i,count:100,variant:"pie"}),(0,h.tZ)(eB,{replId:t,metric:ey.Pc.Browser,start:c,hours:i,count:100,variant:"device-pie"})]}),(0,h.tZ)(v.G,{css:e4.map,children:(0,h.tZ)(eB,{replId:t,metric:ey.Pc.Country,start:c,hours:i,count:100,variant:"map"})})]})})},e5=n(66932),e6=n(95309),e9=(i={},(0,H._)(i,R.r4.Gce,"Reserved VM"),(0,H._)(i,R.r4.CloudRun,"Autoscale"),(0,H._)(i,R.r4.Static,"Static"),(0,H._)(i,R.r4.Cron,"Scheduled"),i),e7=n(36010),te=n.n(e7),tt=n(63388),tn=n(44620),tr=n(97411),ti=function(e){var t=e.currentBuild,n=(0,f._)(m.useState([]),2),r=n[0],i=n[1];return m.useEffect(function(){var e=(null===(r=t.repl.hostingDeployment)||void 0===r?void 0:r.__typename)==="HostingDeployment"&&t.repl.hostingDeployment.id,n=[];switch(t.provider){case R.r4.Goval:n.push({href:"https://".concat(e,".id.repl.co"),private:!0});break;case R.r4.Gce:case R.r4.CloudRun:case R.r4.Static:var r,o,a,l,c,s,u=(null===(o=t.repl.hostingDeployment)||void 0===o?void 0:o.__typename)==="HostingDeployment"?null===(a=t.repl.hostingDeployment)||void 0===a?void 0:a.replitAppSubdomain:void 0;!u&&(null===(l=t.repl.owner)||void 0===l?void 0:l.username)&&(u="".concat(t.repl.slug,"-").concat(t.repl.owner.username)),u&&n.push({href:"https://".concat(u).concat((null===(s=window)||void 0===s?void 0:null===(c=s.location)||void 0===c?void 0:c.hostname)!=="replit.com"?".staging":"",".replit.app"),private:!1})}if(t.repl.domains){var d=t.repl.domains.filter(function(t){return(null==t?void 0:t.hosting_deployment_id)===e}),f=!0,h=!1,p=void 0;try{for(var m,v=d[Symbol.iterator]();!(f=(m=v.next()).done);f=!0){var g=m.value;g&&n.push({href:"https://".concat(g.domain),private:!1,state:"verified"!==g.state?g.state:void 0})}}catch(e){h=!0,p=e}finally{try{f||null==v.return||v.return()}finally{if(h)throw p}}}i(n)},[t]),(0,h.tZ)(v.G,{css:[g.l0.colWithGap(2),g.l0.flex.growAndShrink(1)],children:r.map(function(e,t){return(0,h.BX)(v.G,{css:[g.l0.rowWithGap(8),g.l0.align.center],children:[(0,h.tZ)(V.xv,{css:[g.l0.flex.shrink(1)],multiline:!1,children:(0,h.tZ)("a",{href:e.href,target:"_blank",css:[g.l0.color.foregroundDefault],children:e.href})}),e.private?(0,h.tZ)(tr.Z,{color:g.TV.foregroundDefault}):null,(0,h.tZ)("a",{href:e.href,target:"_blank",css:[g.l0.display.flex,g.l0.align.center],children:(0,h.tZ)(tn.Z,{color:g.TV.foregroundDefault})}),e.state?(0,h.BX)(V.xv,{multiline:!1,children:["(",e.state,")"]}):null]},"domains-".concat(t))})})},to=n(25425),ta=n(23211),tl=(0,ed.F4)("\n    50% {\n      background-color: ".concat(g.TV.accentPositiveDimmest,";\n      outline: 1px solid ").concat(g.TV.accentPositiveDimmer,";\n      box-shadow: 0px 0px 32px rgba(0, 145, 24, 0.3);\n    }\n")),tc=(0,C.X)({deploymentInfo:[g.l0.colWithGap(8),g.l0.p(16),g.l0.borderRadius(8),{outline:"1px solid transparent"}]}),ts=(0,C.X)({textButton:[g.l0.cursor.pointer,g.l0.reset.button,g.l0.color.accentPrimaryStronger,g.l0.focusRing,g.l0.hover(g.l0.color.accentPrimaryStrongest),{lineHeight:1.2,":not([disabled])":{cursor:"pointer"}}],textLink:g.l0.hover(g.l0.color.accentPrimaryStrongest),labeledSection:[g.l0.flex.growAndShrink(1),(0,H._)({},g.nC.min(400),[g.l0.flex.row,g.l0.align.baseline])],labeledSectionFullWidth:[g.l0.flex.growAndShrink(1),(0,H._)({},g.nC.min(400),[g.l0.flex.row,g.l0.align.baseline,g.l0.flex.grow(1),g.l0.justify.spaceBetween])],buildStatus:[g.l0.rowWithGap(4),g.l0.align.center],deploymentInfo:tc.deploymentInfo,deploymentInfoAnimate:[tc.deploymentInfo,{animation:"".concat(tl," 700ms ease-out")}],deploymentInfoContent:[g.l0.colWithGap(8),(0,H._)({},g.nC.min(400),g.l0.colWithGap(4))]}),tu=function(e){var t=e.text,n=e.onClick;return(0,h.tZ)("button",{css:ts.textButton,onClick:n,children:t})},td=function(e){var t=e.name,n=e.sku,r=e.canManage,i=e.usageLink,o=e.onManageClick;return(0,h.BX)(v.G,{css:[g.l0.rowWithGap(6),g.l0.flex.wrap],children:[(0,h.tZ)(V.xv,{multiline:!1,children:t}),n?(0,h.BX)(V.xv,{color:"dimmest",multiline:!1,children:["(",n,")"]}):null,r?(0,h.tZ)(tu,{text:"Manage",onClick:o}):null,i?(0,h.tZ)(te(),{legacyBehavior:!0,href:"/account#resource-usage",passHref:!0,children:(0,h.tZ)("a",{css:ts.textLink,children:(0,h.tZ)(V.xv,{children:"See all usage"})})}):null]})},tf=function(e){var t=e.label,n=e.children,r=e.fullWidth;return(0,h.BX)(v.G,{css:r?ts.labeledSectionFullWidth:ts.labeledSection,children:[(0,h.tZ)(v.G,{css:g.l0.minWidth(100),children:(0,h.tZ)(V.xv,{css:g.l0.color.foregroundDimmer,multiline:!1,children:t})}),n]})},th=function(e){var t,n,r=e.provider,i=e.machine,o=e.onViewBuildLogs,a=e.onManageClick,l=(0,Z.kW)(),c=(0,Z.Sl)((0,w.Z)()).hostingTier,s=(0,Z.$y)(),u=(0,to.P5)({controlName:ta.dD,logFlagToAnalytics:!1}),d=void 0!==s,f=r===R.r4.Gce&&d&&!u&&!c,p=r!==R.r4.Static&&d&&null===s.hasImageTag,g=!!((l===e6.z.Ready||l===e6.z.Suspended)&&!p),y=null,b=null,C=null,_=null,S=(0,Z.pn)(),E=m.useRef(void 0);m.useEffect(function(){S&&(E.current=null==S?void 0:S.id)},[S,null==S?void 0:S.id]);var k=(null==s?void 0:s.status)===R.Fe.Success,I=(null==s?void 0:s.id)===E.current,B=(null==s?void 0:s.provider)!==R.r4.Cron;switch(s&&(y=(0,h.BX)(h.HY,{children:[(0,h.tZ)(tf,{label:"Status",children:(0,h.tZ)(v.G,{css:ts.buildStatus,children:(0,h.tZ)(tt.hD,{onClick:function(){o(s)}})})}),B?(0,h.tZ)(tf,{label:"Domain",children:(0,h.tZ)(ti,{currentBuild:s})}):null]})),r){case R.r4.Gce:if(u){b=(0,h.tZ)(tf,{label:"Type",fullWidth:!d,children:(0,h.tZ)(td,{name:e9[r],sku:null==i?void 0:i.configurationLabel,canManage:g,onManageClick:a})});break}if(!c)break;b=(0,h.tZ)(tf,{label:"Type",fullWidth:!d,children:(0,h.tZ)(td,{name:e9[r],sku:(null==i?void 0:i.configurationLabel)||(0,e5.$)(c.sku),canManage:g,onManageClick:a})});break;case R.r4.CloudRun:b=(0,h.tZ)(tf,{label:"Type",fullWidth:!d,children:(0,h.tZ)(td,{name:e9[r],sku:i?"".concat(i.configurationLabel," / ").concat(i.maxInstances," Max"):"Beta",canManage:g,usageLink:!0,onManageClick:a})});break;case R.r4.Static:b=(0,h.tZ)(tf,{label:"Type",fullWidth:!d,children:(0,h.tZ)(td,{name:e9[r],sku:void 0,canManage:g&&d,onManageClick:a})});break;case R.r4.Cron:b=(0,h.tZ)(tf,{label:"Type",fullWidth:!d,children:(0,h.tZ)(td,{name:e9[r],sku:"".concat(null==s?void 0:null===(t=s.machineJob)||void 0===t?void 0:t.timezone," ").concat(null==s?void 0:null===(n=s.machineJob)||void 0===n?void 0:n.crontab),canManage:!1,onManageClick:a})});case R.r4.Goval:}return(p&&(C=(0,h.tZ)(v.G,{children:(0,h.tZ)(x.E,{icon:(0,h.tZ)(T.Z,{}),colorway:"warning",text:"To upgrade, please redeploy."})})),f&&(_=(0,h.tZ)(D.zx,{onClick:function(){a()},text:"Select hosting tier"})),y||b||C||_)?(0,h.BX)(G.Tg,{elevated:!0,css:k&&I?ts.deploymentInfoAnimate:ts.deploymentInfo,style:{paddingTop:s?12:16},children:[s?(0,h.tZ)(V.xv,{variant:"subheadDefault",multiline:!1,children:"Production"}):null,(0,h.BX)(v.G,{css:ts.deploymentInfoContent,children:[y,b,C,_]})]}):null},tp=n(97615),tm=n(14207),tv=n(88936),tg=n(40102),ty=function(e){return e.loading?(0,h.tZ)(v.G,{css:[g.l0.p(8),g.l0.center],children:(0,h.tZ)(tv.Z,{})}):null},tb=(0,C.X)({error:[g.l0.flex.grow(0),g.l0.mt(0)]}),tZ=function(e){var t=e.text;return(0,h.tZ)(W,{css:tb.error,children:(0,h.tZ)(x.E,{colorway:"warning",icon:(0,h.tZ)(T.Z,{}),text:t})})},tw=(0,C.X)({back:[g.l0.flex.row,g.l0.align.center]}),tx=function(e){var t=e.onBack;return(0,h.tZ)(v.G,{css:tw.back,children:(0,h.tZ)(eT.hU,{alt:"Back",tooltipHidden:!0,onClick:t,children:(0,h.tZ)(tg.Z,{})})})};function tC(){var e=(0,J._)(["\n  fragment HostingActivityLogBuild on HostingBuild {\n    id\n    status\n    provider\n    timeCreated\n    user {\n      id\n      displayName\n    }\n  }\n"]);return tC=function(){return e},e}function t_(){var e=(0,J._)(["\n  fragment HostingActivityLogLine2 on HostingActivityLog {\n    id\n    build {\n      ...HostingActivityLogBuild\n    }\n    type\n    user {\n      id\n      displayName\n    }\n    timeCreated\n  }\n  ","\n"]);return t_=function(){return e},e}function tS(){var e=(0,J._)(["\n  query HostingDeploymentActivityLogs2(\n    $replId: String!\n    $after: String\n    $count: Int\n  ) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        hostingDeployment {\n          ... on HostingDeployment {\n            id\n            currentBuild {\n              id\n            }\n            activityLogs(after: $after, count: $count) {\n              items {\n                ...HostingActivityLogLine2\n              }\n              pageInfo {\n                hasNextPage\n                nextCursor\n              }\n            }\n          }\n          ... on NotFoundError {\n            message\n          }\n          ... on UnauthorizedError {\n            message\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return tS=function(){return e},e}function tE(){var e=(0,J._)(["\n  query HostingActivityLogBuildHistory(\n    $input: HostingBuildDeployActionHistoryInput!\n  ) {\n    hostingBuildDeployActionHistory(input: $input) {\n      ... on HostingBuildDeployActionHistoryResults {\n        results {\n          ... on HostingBuildDeployStatusAction {\n            status\n            message\n          }\n          ... on HostingBuildDeployLogAction {\n            log\n          }\n        }\n      }\n    }\n  }\n"]);return tE=function(){return e},e}var tk={},tT=(0,K.Ps)(tC()),tR=(0,K.Ps)(t_(),tT),tD=(0,K.Ps)(tS(),tR),tI=(0,K.Ps)(tE());function tG(){var e=(0,J._)(["\n  fragment DeploymentsDeployOptionsDeployment on HostingDeployment {\n    id\n    replitAppSubdomain\n    currentBuild {\n      id\n      provider\n      envVars {\n        name\n        value\n      }\n      machineJob {\n        timezone\n        crontab\n      }\n    }\n  }\n"]);return tG=function(){return e},e}function tB(){var e=(0,J._)(["\n  query DeploymentsDeployOptions($id: String!) {\n    hostingDeployment(id: $id) {\n      ... on HostingDeployment {\n        id\n        ...DeploymentsDeployOptionsDeployment\n      }\n    }\n  }\n  ","\n"]);return tB=function(){return e},e}var tA={},tP=(0,K.Ps)(tG()),tN=(0,K.Ps)(tB(),tP);function tU(){var e=(0,J._)(["\n  query HostingDeploymentConfigRedeploy($id: String!) {\n    hostingDeployment(id: $id) {\n      ... on HostingDeployment {\n        id\n        replitAppSubdomain\n        activityLogs(count: 20) {\n          items {\n            id\n            ...HostingActivityLogLine2\n          }\n          pageInfo {\n            hasNextPage\n            nextCursor\n          }\n        }\n        currentBuild {\n          id\n          envVars {\n            name\n            value\n          }\n        }\n        ...DeploymentsDeployOptionsDeployment\n      }\n    }\n  }\n  ","\n  ","\n"]);return tU=function(){return e},e}var tL={},tO=(0,K.Ps)(tU(),tR,tP),tM=n(80502);function tX(){var e=(0,J._)(["\n  query HostingDeployActionHistory(\n    $input: HostingBuildDeployActionHistoryInput!\n  ) {\n    hostingBuildDeployActionHistory(input: $input) {\n      ... on HostingBuildDeployActionHistoryResults {\n        results {\n          ... on HostingBuildDeployLogAction {\n            log\n          }\n          ... on HostingBuildDeployStatusAction {\n            status\n            message\n          }\n        }\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n"]);return tX=function(){return e},e}var tF={},tW=(0,K.Ps)(tX()),tH=n(58200),tV=n(49932),tz=n(23291),tj=n(81764),tq=n(32377),tY=n(62340),t$=function(e){var t=e.stage,n=e.activeStage;return t===e.erroredStage?(0,h.tZ)(T.Z,{alt:"error"}):t<n?(0,h.tZ)(tq.Z,{alt:"success"}):t===n?(0,h.tZ)(tv.Z,{alt:"current"}):(0,h.tZ)(tj.Z,{alt:"waiting"})},tJ=function(e){var t=e.stage,n=e.activeStage,r=e.erroredStage;return n?t===r?"negative":t<n?"positive":t===n?"primary":null:null},tK=function(e){var t,n=e.stage,r=e.totalStagesWithTitle,i=e.activeStage,o=e.text,a=e.erroredStage,l=(0,tY.d)({tablet:!0});return(0,h.tZ)(tz.D,{text:i?o:"",colorway:null!==(t=tJ({stage:n,activeStage:i,erroredStage:a}))&&void 0!==t?t:void 0,variant:"filled",css:[g.l0.border({color:tV.TV.backgroundDefault}),g.l0.overflow("hidden"),i||l?{}:$.p.foregroundPulse(),(0,H._)({flex:1,height:26,zIndex:r-n,":first-of-type":{paddingLeft:6,paddingRight:6},":not(:first-of-type)":{paddingLeft:24},":not(:last-of-type)":{marginRight:-24}," span":g.l0.display.none},g.nC.min(400),{" span":g.l0.display.flex,":first-of-type":{paddingLeft:16,paddingRight:0}})],iconRight:i?(0,h.tZ)(t$,{stage:n,activeStage:i,erroredStage:a}):void 0})},tQ=n(68514),t0=n(5039),t1=n(67313),t2=[{id:0,title:"Provision",statusType:R.Fe.Pending},{id:1,title:"Build",statusType:R.Fe.Building},{id:2,title:"Bundle",statusType:R.Fe.Running},{id:3,title:"Promote",statusType:R.Fe.Promoting},{id:4,statusType:R.Fe.Success}],t8=t2.filter(function(e){return"title"in e}),t4=function(e){return t2.find(function(t){return t.statusType===e})},t3=(0,C.X)({base:{borderRadius:6,paddingLeft:6,paddingRight:6,height:24},disabled:{pointerEvents:"none",color:g.TV.greyDefault}}),t5=[g.l0.borderRadius(8),{border:"1px solid var(--outline-dimmest)"}],t6=(0,C.X)({container:t5,top:[g.l0.colWithGap(12),g.l0.p(16),g.l0.pt(12)],header:[g.l0.rowWithGap(40)],started:[g.l0.rowWithGap(6),g.l0.flex.growAndShrink(1),g.l0.justify.end],cancel:t3.base,canceling:[t3.base,t3.disabled],stages:[g.l0.flex.row,g.l0.flex.grow(1),{zIndex:0}],bottom:[g.l0.borderRadius(0,0,8,8),g.l0.overflow("hidden")],logsOpen:[g.l0.overflow("hidden"),g.l0.height("auto")],logsClosed:[g.l0.overflow("hidden"),g.l0.height(0)],xterm:[g.l0.width("100%"),g.l0.maxWidth("100%"),g.l0.height(340)]}),t9=function(e){return(0,h.BX)(v.G,{css:t6.top,children:[(0,h.BX)(v.G,{css:t6.header,children:[(0,h.BX)(v.G,{css:g.l0.rowWithGap(8),children:[(0,h.tZ)(V.xv,{variant:"subheadDefault",multiline:!1,children:"Deploying"}),(0,h.tZ)(D.zx,{style:{opacity:e.onCancel?1:0},size:"small",text:"Cancel",css:e.isCanceling?t6.canceling:t6.cancel,onClick:e.onCancel,iconRight:e.isCanceling?(0,h.tZ)(tv.Z,{}):void 0})]}),(0,h.BX)(v.G,{css:t6.started,children:[e.timeStarted&&e.userDisplayName?(0,h.BX)(V.xv,{css:g.l0.color.greyStronger,multiline:!1,children:["Started ".concat((0,t0.Z)(new Date(e.timeStarted),Date.now(),{addSuffix:!0})," by "),(0,h.tZ)("span",{css:g.l0.color.foregroundDefault,children:e.userDisplayName})]}):null,e.onViewBuildLogs?(0,h.tZ)(eT.hU,{onClick:e.onViewBuildLogs,alt:"View deploy logs",children:e.viewBuildLogs?(0,h.tZ)(t1.Z,{}):(0,h.tZ)(eJ.Z,{})}):null]})]}),(0,h.tZ)(v.G,{css:t6.stages,children:t8.map(function(t){var n=t.id,r=t.title;return(0,h.tZ)(tK,{stage:n,totalStagesWithTitle:t8.length,text:r,activeStage:e.activeStage,erroredStage:e.erroredStage},n)})})]})},t7=function(e){return(0,Z.kW)()===e6.z.Preparing?(0,h.tZ)(v.G,{css:t6.container,children:(0,h.tZ)(t9,{})}):(0,h.tZ)(ne,(0,U._)({},e))},ne=function(e){var t,n,r,i,o,a,l,c,s,u,d,p,w,x=e.initialBuild,C=e.viewBuildLogsOnLoad,_=e.onViewLogs,S=e.onCanceled,E=e.onError,k=e.openFile,T=(0,Z.rm)(),D=(0,Z.pn)(),I=D?{id:D.id,status:D.status,provider:D.provider,timeStarted:D.timeCreated,userDisplayName:D.user.displayName}:void 0,G=m.useRef(x||I),B=(t={skip:!(null===(i=G.current)||void 0===i?void 0:i.id),variables:{input:{buildId:null!==(w=null===(o=G.current)||void 0===o?void 0:o.id)&&void 0!==w?w:""}},fetchPolicy:"network-only",ssr:!1,onCompleted:function(e){if(null==e?void 0:e.hostingBuildDeployActionHistory)switch(e.hostingBuildDeployActionHistory.__typename){case"NotFoundError":break;case"UnauthorizedError":E(e.hostingBuildDeployActionHistory.message);break;case"HostingBuildDeployActionHistoryResults":var t=e.hostingBuildDeployActionHistory.results;if(t&&t.length>0){var n=[],r=[],i=!0,o=!1,a=void 0;try{for(var l,c=t[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;switch(s.__typename){case"HostingBuildDeployLogAction":n.push(s.log);break;case"HostingBuildDeployStatusAction":r.push(s)}}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}ee({type:"history",payload:n});var u=!0,d=!1,f=void 0;try{for(var h,p=r[Symbol.iterator]();!(u=(h=p.next()).done);u=!0){var m=h.value;et(m.status)}}catch(e){d=!0,f=e}finally{try{u||null==p.return||p.return()}finally{if(d)throw f}}}break;default:E("Unexpected typename.")}},onError:function(e){E(e.message)}},n=(0,U._)({},tF,t),Q.a(tW,n)),A=B.loading,P=B.refetch;(0,Z.U)(function(e){switch(e.__typename){case"HostingBuildDeployLogAction":ee({type:"update",payload:e.log});break;case"HostingBuildDeployStatusAction":et(e.status)}});var N=(0,f._)(m.useState(G.current?null===(a=t4(G.current.status))||void 0===a?void 0:a.id:void 0),2),L=N[0],O=N[1],M=(0,f._)(m.useState((null===(l=G.current)||void 0===l?void 0:l.status)==="failed"?null===(c=t4(null===(s=G.current)||void 0===s?void 0:s.status))||void 0===c?void 0:c.id:void 0),2),X=M[0],F=M[1],W=(0,f._)(m.useState(!1),2),H=W[0],V=W[1],z=(0,Z.XZ)(),j=(0,f._)((0,tM.Z)({openFile:k,listFiles:z.listFiles}),2),q=j[0],Y=j[1],$=(0,tH.f)(),J=(0,f._)(m.useReducer(function(e,t){switch(t.type){case"history":return q&&q.clear(),(0,eg._)(t.payload).concat((0,eg._)(e));case"update":return[t.payload];case"refetch":return q&&q.clear(),A||P(),[]}},[]),2),K=J[0],ee=J[1],et=function(e){if(e===R.Fe.Failed)F(L);else{var t=t4(e);if(!t)return;O(t.id)}},en=(r=(0,y._)(function(){return(0,b.Jh)(this,function(e){switch(e.label){case 0:return V(!0),[4,T()];case 1:return e.sent(),S(),[2]}})}),function(){return r.apply(this,arguments)}),er=(0,f._)(m.useState(C||!1),2),ei=er[0],eo=er[1],ea=function(){eo(!ei),ei||eQ({context:"deploy_progress_logs"})};m.useEffect(function(){eQ({context:"deploy_progress"})},[]),m.useEffect(function(){var e;(null===(e=G.current)||void 0===e?void 0:e.id)&&D&&D.id!==G.current.id&&(G.current={id:D.id,status:D.status,provider:D.provider,timeStarted:D.timeCreated,userDisplayName:D.user.displayName},O(void 0),F(void 0),ee({type:"refetch"}))},[D,null===(u=G.current)||void 0===u?void 0:u.id,P]),m.useEffect(function(){var e;void 0!==L&&(null===(e=G.current)||void 0===e?void 0:e.status)==="failed"&&F(L)},[L,null===(d=G.current)||void 0===d?void 0:d.status]),m.useEffect(function(){q&&K.forEach(function(e){return q.write(e)})},[K,q]);var el=null===(p=t2.find(function(e){return e.id===L}))||void 0===p?void 0:p.statusType,ec=el!==R.Fe.Success&&!X;return G.current?(0,h.BX)(v.G,{css:t6.container,children:[(0,h.tZ)(t9,{onCancel:ec?en:void 0,isCanceling:H,onViewBuildLogs:ea,viewBuildLogs:ei,timeStarted:G.current.timeStarted,userDisplayName:G.current.userDisplayName,activeStage:L,erroredStage:X}),(0,h.BX)(v.G,{css:t6.bottom,children:[(0,h.BX)(v.G,{css:ei?t6.logsOpen:t6.logsClosed,children:[(0,h.tZ)(tQ.R,{}),(0,h.tZ)(v.G,{css:[g.l0.display.flex,g.l0.pt(12),g.l0.pl(16),g.l0.overflow("hidden"),{backgroundColor:null==$?void 0:$.background}],children:(0,h.tZ)(v.K.div,{css:t6.xterm,ref:Y})})]}),X&&el?(0,h.BX)(h.HY,{children:[(0,h.tZ)(tQ.R,{}),el===R.Fe.Building?(0,h.tZ)(ni,{provider:G.current.provider,logs:K.slice(-3),openFile:k,viewBuildLogs:ei,onViewBuildLogs:ea}):null,el===R.Fe.Promoting?(0,h.tZ)(nr,{provider:G.current.provider,logs:K.slice(-3),openFile:k,viewBuildLogs:ei,onViewBuildLogs:ea,onViewApplicationLogs:_}):null]}):null]})]}):null},nt=(0,C.X)({errorContainer:[g.l0.p(12),g.l0.colWithGap(12)],warning:[g.l0.colWithGap(8)],warningTitle:[g.l0.rowWithGap(4),g.l0.align.center,g.l0.fontWeight.medium],link:{color:g.TV.foregroundDefault,textDecoration:"underline",":hover":{color:g.TV.accentPrimaryStronger}},xtermContainer:[g.l0.display.flex,g.l0.pt(12),g.l0.pl(16),g.l0.overflow("hidden"),g.l0.borderRadius(8,8,0,0)],xterm:[g.l0.width("100%"),g.l0.maxWidth("100%"),g.l0.height(120)],xtermButton:g.l0.borderRadius(0,0,8,8),list:[{listStyle:"inside"}],listCta:g.l0.display.inlineFlex}),nn=function(e){var t=e.title,n=e.description,r=e.logs,i=e.viewBuildLogs,o=e.onViewBuildLogs,a=e.openFile,l=(0,tH.f)(),c=(0,Z.XZ)(),s=(0,f._)((0,tM.Z)({openFile:a,listFiles:c.listFiles}),2),u=s[0],d=s[1],p=m.useRef(r?r.slice(-3):[]);return m.useEffect(function(){p.current.length&&p.current.forEach(function(e){null==u||u.write(e)})},[u]),(0,h.BX)(G.Tg,{elevated:!0,css:nt.errorContainer,children:[(0,h.BX)(v.G,{css:nt.warning,children:[(0,h.BX)(v.G,{css:nt.warningTitle,children:[(0,h.tZ)(T.Z,{color:g.TV.accentNegativeStronger}),(0,h.tZ)(V.xv,{multiline:!1,children:t})]}),(0,h.tZ)(V.xv,{children:n})]}),void 0===i||i?null:(0,h.BX)(v.G,{children:[(0,h.tZ)(v.G,{css:nt.xtermContainer,style:{backgroundColor:null==l?void 0:l.background},children:(0,h.tZ)(v.K.div,{css:nt.xterm,ref:d})}),(0,h.tZ)(D.zx,{text:"View all",iconLeft:(0,h.tZ)(eE.Z,{}),onClick:o,css:nt.xtermButton})]})]})};function nr(e){var t=(0,Z.am)();return(0,h.tZ)(nn,(0,U._)({title:"Your app failed to promote",description:(0,h.BX)(h.HY,{children:["Common issues for promote stage errors can be an error occurring while trying to run your run command, your application exiting unexpectedly, an error on your app server or a provisioning issue.",(0,h.tZ)("br",{}),(0,h.tZ)("br",{}),"Ways to debug:",(0,h.BX)("ul",{css:nt.list,children:[(null==t?void 0:t.isVnc)?(0,h.tZ)("li",{children:"This promotion may also be failing due to VNC incompatibilities."}):null,(0,h.tZ)("li",{children:"make sure your repl runs in the Workspace"}),(0,h.BX)("li",{children:["view our"," ",(0,h.tZ)("a",{href:"https://docs.replit.com/hosting/deployments/troubleshooting",target:"_blank",css:nt.link,onClick:function(){return eQ({context:"troubleshooting_doc"})},children:"troubleshooting tips"})]}),e.provider!==R.r4.Static&&e.onViewApplicationLogs?(0,h.BX)("li",{children:["look for errors in your application's server logs"," ",(0,h.tZ)(D.zx,{text:"Logs",size:"small",iconLeft:(0,h.tZ)(E.Z,{}),onClick:e.onViewApplicationLogs,css:g.l0.display.inlineFlex})," "]}):null,(0,h.tZ)("li",{children:"look for errors in your promote stage logs"})]})]})},e))}function ni(e){var t=(0,Z.am)();return(0,h.tZ)(nn,(0,U._)({title:"Your app failed to build",description:(0,h.BX)(h.HY,{children:["Common issues for build stage errors can be an error occurring while trying to run your build command or an compilation issue with your application code.",(0,h.tZ)("br",{}),(0,h.tZ)("br",{}),"Ways to debug:",(0,h.BX)("ul",{css:nt.list,children:[(null==t?void 0:t.isVnc)?(0,h.tZ)("li",{children:"This promotion may also be failing due to VNC incompatibilities."}):null,(0,h.tZ)("li",{children:"make sure your repl runs in the Workspace"}),(0,h.BX)("li",{children:["view our"," ",(0,h.tZ)("a",{href:"https://docs.replit.com/hosting/deployments/troubleshooting",target:"_blank",css:nt.link,onClick:function(){return eQ({context:"troubleshooting_doc"})},children:"troubleshooting tips"})]}),(0,h.tZ)("li",{children:"look for errors in your build stage logs"})]})]})},e))}var no=n(92741),na=n(7444),nl=n(99656),nc=n(73157),ns=n(52489);function nu(e){var t=e.secrets,n=e.otherSecrets,r=new Map,i=!0,o=!1,a=void 0;try{for(var l,c=n[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=(0,f._)(l.value,2),u=s[0],d=s[1];t.has(u)||r.set(u,d)}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return{missing:r}}var nd=(0,C.X)({root:[g.l0.borderRadius(8),{border:"1px solid "+g.TV.outlineDimmer}],button:[g.l0.reset.button,I.gU.nofill,g.l0.rowWithGap(8),g.l0.align.center,g.l0.height(32),g.l0.px(8),{border:"0 none",borderBottomLeftRadius:0,borderBottomRightRadius:0}],buttonText:[g.l0.flex.growAndShrink(1),g.l0.rowWithGap(8),g.l0.align.center],expanded:[g.l0.px(8),g.l0.pb(8)],missingItems:[g.l0.colWithGap(8)],missingItem:[g.l0.rowWithGap(8)],missingSecret:[g.l0.rowWithGap(8),g.l0.flex.growAndShrink(1)],subtitle:[{borderTop:"1px solid "+g.TV.outlineDimmest,top:-1},g.l0.py(8),g.l0.position.relative]});function nf(e){var t=e.secrets,n=e.otherSecrets,r=e.otherEnvName,i=e.onAddSecret,o=e.initialExpanded,a=nu({secrets:t,otherSecrets:n}).missing,l=(0,f._)((0,m.useState)(o),2),c=l[0],s=l[1],u=0===a.size;if((0,m.useEffect)(function(){u&&s(!1)},[u]),u)return null;var d="".concat(a.size," ").concat((0,nc.Z)("secret",a.size)," out of sync"),p=1===a.size?"A ".concat(r," secret is missing from this environment"):"".concat(a.size," ").concat(r," secrets are missing from this environment");return(0,h.BX)(v.G,{css:nd.root,children:[(0,h.BX)(v.G,{css:nd.button,tag:"button",onClick:function(){return s(function(e){return!e})},children:[(0,h.BX)(v.G,{css:nd.buttonText,children:[(0,h.tZ)(T.Z,{color:g.TV.orangeDefault}),(0,h.tZ)(V.xv,{multiline:!1,children:d})]}),c?(0,h.tZ)(t1.Z,{}):(0,h.tZ)(eJ.Z,{})]}),c?(0,h.BX)(v.G,{css:nd.expanded,children:[(0,h.tZ)(V.xv,{css:nd.subtitle,color:"dimmer",children:p}),(0,h.tZ)(v.G,{css:nd.missingItems,children:(0,eg._)(a.entries()).map(function(e){var t=(0,f._)(e,2),n=t[0],r=t[1];return(0,h.BX)(v.G,{css:nd.missingItem,children:[(0,h.BX)(v.G,{css:nd.missingSecret,children:[(0,h.tZ)(ns.u_,{value:n}),(0,h.tZ)(ns.BH,{value:r})]}),r?(0,h.tZ)(D.zx,{iconLeft:(0,h.tZ)(nl.Z,{}),variant:"outlined",text:"Add secret",onClick:function(){return i({key:n,value:r})}}):null]},n)})})]}):null]})}var nh=n(28268);function np(e){var t=e.fs,n=(0,f._)((0,m.useState)(null),2),r=n[0],i=n[1],o=(0,f._)((0,m.useState)(null),2),a=o[0],l=o[1];return(0,m.useEffect)(function(){return t.watchFile(".env",{onChange:function(e){var t=nh.Z.parse(e.toString());i(new Map(Object.entries(t).map(function(e){var t=(0,f._)(e,2);return[t[0],t[1]]})))},onMoveOrDelete:function(){return i(null)},onError:l})},[t]),{devSecrets:r,error:a}}var nm=n(64461),nv=n(8668),ng=n(30084),ny=n(10981),nb=n(18836);function nZ(){var e=(0,J._)(["\n  query CheckReplitAppSubdomainAvailability(\n    $subdomain: String!\n    $deploymentId: String\n  ) {\n    replitAppSubdomainAvailability(\n      subdomain: $subdomain\n      deploymentId: $deploymentId\n    ) {\n      __typename\n      ... on ReplitAppSubdomainAvailabilityResult {\n        available\n        message\n      }\n      ... on UserError {\n        errorMessage: message\n      }\n    }\n  }\n"]);return nZ=function(){return e},e}var nw={},nx=(0,K.Ps)(nZ()),nC=n(59639),n_=n(30983),nS=n(58719),nE=n(22487),nk=function(e){var t=e.id,n=e.value,r=e.loading,i=e.disabled,o=e.onChange,a=e.error,l=(0,nv.Ar)(n),c=(0,m.useId)();return(0,h.BX)(v.G,{css:[g.l0.colWithGap(4)],children:[(0,h.tZ)(nb.II,{id:t,value:l?n:"",onChange:function(e){return o(e.target.value)},css:[g.l0.color.greyStrongest],disabled:r||i,"aria-describedby":c}),a?(0,h.tZ)(v.G,{css:[g.l0.color.accentNegativeStronger],"aria-live":"polite","aria-atomic":"true",id:c,children:(0,h.tZ)("span",{children:a})}):null]})},nT=(0,C.X)({root:[g.l0.rowWithGap(8),g.l0.align.center],iconButton:[g.l0.height("100%"),g.l0.borderRadius(8),{"& button":g.l0.height(32)}],keyInput:[g.l0.width("40%")],valueInput:[g.l0.flex.growAndShrink(1)]}),nR=function(e){var t=e.index,n=e.name,r=e.value,i=e.disabled,o=e.updateEnvVarName,a=e.updateEnvVarValue,l=e.removeEnvVar,c=e.otherKeys,s=(0,ny.U)(),u=(0,f._)((0,m.useState)(""===n||""===r),2),d=u[0],p=u[1],y=!!(n&&r),b=(0,na.Z)(y),Z=(0,nE.Z)(function(){Z.current&&b.current&&p(!1)},[b]);return d?(0,h.BX)(h.HY,{children:[(0,h.BX)(v.G,{css:nT.root,innerRef:Z,children:[(0,h.tZ)(v.G,{css:nT.keyInput,children:(0,h.tZ)(nb.II,{placeholder:"Name",id:"".concat(s,"-name-").concat(t),value:n,onChange:function(e){return o(e.currentTarget.value)},onKeyDown:function(e){"Enter"===e.key&&y&&p(!1)},disabled:i})}),(0,h.tZ)(v.G,{css:nT.valueInput,children:(0,h.tZ)(nb.II,{placeholder:"Value",name:"".concat(s,"-value-").concat(t),value:r,onChange:function(e){return a(e.currentTarget.value)},onKeyDown:function(e){"Enter"===e.key&&y&&p(!1)},disabled:i})}),i?null:(0,h.tZ)(G.Tg,{elevated:!0,css:nT.iconButton,children:(0,h.tZ)(eT.hU,{alt:"Add",tooltipHidden:!0,onClick:function(){y?p(!1):l()},children:y?(0,h.tZ)(tq.Z,{}):(0,h.tZ)(nS.Z,{})})})]}),c.includes(n)?(0,h.BX)(V.xv,{variant:"small",css:{color:g.TV.accentNegativeDefault},children:['Secret "',n,'" already exists']}):null]}):(0,h.BX)(v.G,{css:nT.root,children:[(0,h.tZ)(ns.u_,{value:n}),(0,h.tZ)(ns.BH,{value:r}),(0,h.tZ)(ns.$M,{onEdit:function(){return p(!0)},onDelete:function(){return l()}})]})},nD=function(e){var t,n,r,i,o,a=e.id,l=e.subdomain,c=e.deploymentId,s=e.onChange,u=e.updateValidity,d=(t={variables:{subdomain:l,deploymentId:c},skip:0===l.length},n=(0,U._)({},nw,t),Q.a(nx,n)),f=d.data,p=d.loading,y=d.error,b=(null==f?void 0:f.replitAppSubdomainAvailability.__typename)==="ReplitAppSubdomainAvailabilityResult"&&f.replitAppSubdomainAvailability.available,Z=(null==f?void 0:f.replitAppSubdomainAvailability.__typename)==="ReplitAppSubdomainAvailabilityResult"?f.replitAppSubdomainAvailability.message:null==f?void 0:null===(r=f.replitAppSubdomainAvailability)||void 0===r?void 0:r.errorMessage;return((0,m.useEffect)(function(){u(b)},[b]),y)?(0,h.tZ)(x.E,{colorway:"negative",text:"Something went wrong, please try refreshing the page."}):(0,h.BX)(v.G,{children:[(0,h.BX)(v.G,{css:[g.l0.rowWithGap(4),g.l0.align.center],children:[(0,h.tZ)(nb.II,{id:a,placeholder:"subdomain",value:l,onChange:function(e){return s(e.target.value)}}),(0,h.BX)(V.xv,{multiline:!1,children:[(null===(o=window)||void 0===o?void 0:null===(i=o.location)||void 0===i?void 0:i.hostname)!=="replit.com"?".staging":"",".replit.app"]})]}),(0,h.BX)(v.G,{css:[g.l0.rowWithGap(4),g.l0.align.center,g.l0.pt(4)],children:[p?(0,h.BX)(h.HY,{children:[(0,h.tZ)(tv.Z,{}),(0,h.tZ)(V.xv,{multiline:!1,children:"Checking availability"})]}):null,b?(0,h.BX)(h.HY,{children:[(0,h.tZ)(tq.Z,{color:"green"}),(0,h.tZ)(V.xv,{css:[g.l0.color.greenDefault],multiline:!1,children:"Available"})]}):null,b||p?null:(0,h.BX)(h.HY,{children:[(0,h.tZ)(T.Z,{color:"red"}),(0,h.tZ)(V.xv,{css:[g.l0.color.redDefault],multiline:!1,children:Z})]})]})]})},nI=function(e){var t=e.appType,n=e.onChange,r=(0,ny.U)();return(0,h.tZ)(nC.hE,{name:"deploymentTargetSelector",value:t,onChange:n,row:!0,css:[g.l0.width("100%"),g.l0.flex.row],children:[{value:R.Vp.Server,name:"Web Server",description:"ex. an API or website"},{value:R.Vp.Worker,name:"Background Worker",description:"ex. a Discord or Slack bot"}].map(function(e,t){return(0,h.tZ)(v.G,{css:[g.l0.flex.grow(1)],children:(0,h.tZ)(n_.u,{tooltip:e.description,children:(0,h.tZ)(nC.rK,{id:r(e.value),value:e.value,text:e.name})})},t)})})},nG=(0,C.X)({self:[g.l0.colWithGap(8)],selfGrow:[g.l0.colWithGap(8),g.l0.flex.grow(1)],label:[g.l0.rowWithGap(8),g.l0.align.center],labelText:{},header:[g.l0.display.flex,g.l0.flex.row,g.l0.justify.spaceBetween,g.l0.align.center],actions:[g.l0.rowWithGap(4)]}),nB=function(e){var t=e.id,n=e.title,r=e.information,i=e.optional,o=e.actions,a=e.children,l=e.grow;return(0,h.BX)(v.G,{css:void 0!==l&&l?nG.selfGrow:nG.self,children:[(0,h.BX)(v.G,{css:nG.header,children:[(0,h.BX)(v.G,{tag:"label",htmlFor:t,css:nG.label,children:[(0,h.tZ)(V.xv,{color:"dimmer",multiline:!1,children:n}),(0,h.tZ)(n_.u,{tooltip:r,children:(0,h.tZ)(tp.Z,{color:g.TV.foregroundDimmest})}),void 0!==i&&i?(0,h.tZ)(V.xv,{variant:"small",color:"dimmest",multiline:!1,children:"optional"}):null]}),o?(0,h.tZ)(v.G,{css:nG.actions,children:o}):null]}),a]})},nA=n(49344),nP=n(55534),nN=JSON.parse('[{"title":"ACDT"},{"title":"ACST"},{"title":"ACT"},{"title":"ACT"},{"title":"ACWST"},{"title":"ADT"},{"title":"ADT"},{"title":"AEDT"},{"title":"AEST"},{"title":"AET"},{"title":"AFT"},{"title":"AKDT"},{"title":"AKST"},{"title":"ALMT"},{"title":"AMST"},{"title":"AMST"},{"title":"AMT"},{"title":"AMT"},{"title":"ANAST"},{"title":"ANAT"},{"title":"AQTT"},{"title":"ART"},{"title":"AST"},{"title":"AST"},{"title":"AT"},{"title":"AWDT"},{"title":"AWST"},{"title":"AZOST"},{"title":"AZOT"},{"title":"AZST"},{"title":"AZT"},{"title":"AoE"},{"title":"BNT"},{"title":"BOT"},{"title":"BRST"},{"title":"BRT"},{"title":"BST"},{"title":"BST"},{"title":"BST"},{"title":"BTT"},{"title":"CAST"},{"title":"CAT"},{"title":"CCT"},{"title":"CDT"},{"title":"CDT"},{"title":"CEST"},{"title":"CET"},{"title":"CHADT"},{"title":"CHAST"},{"title":"CHOST"},{"title":"CHOT"},{"title":"CHUT"},{"title":"CIDST"},{"title":"CIST"},{"title":"CKT"},{"title":"CLST"},{"title":"CLT"},{"title":"COT"},{"title":"CST"},{"title":"CST"},{"title":"CST"},{"title":"CT"},{"title":"CVT"},{"title":"CXT"},{"title":"ChST"},{"title":"DAVT"},{"title":"DDUT"},{"title":"EASST"},{"title":"EAST"},{"title":"EAT"},{"title":"ECT"},{"title":"EDT"},{"title":"EEST"},{"title":"EET"},{"title":"EGST"},{"title":"EGT"},{"title":"EST"},{"title":"ET"},{"title":"FET"},{"title":"FJST"},{"title":"FJT"},{"title":"FKST"},{"title":"FKT"},{"title":"FNT"},{"title":"GALT"},{"title":"GAMT"},{"title":"GET"},{"title":"GFT"},{"title":"GILT"},{"title":"GMT"},{"title":"GST"},{"title":"GST"},{"title":"GYT"},{"title":"HDT"},{"title":"HKT"},{"title":"HOVST"},{"title":"HOVT"},{"title":"HST"},{"title":"ICT"},{"title":"IDT"},{"title":"IOT"},{"title":"IRDT"},{"title":"IRKST"},{"title":"IRKT"},{"title":"IRST"},{"title":"IST"},{"title":"IST"},{"title":"IST"},{"title":"JST"},{"title":"KGT"},{"title":"KOST"},{"title":"KRAST"},{"title":"KRAT"},{"title":"KST"},{"title":"KUYT"},{"title":"LHDT"},{"title":"LHST"},{"title":"LINT"},{"title":"MAGST"},{"title":"MAGT"},{"title":"MART"},{"title":"MAWT"},{"title":"MDT"},{"title":"MHT"},{"title":"MMT"},{"title":"MSD"},{"title":"MSK"},{"title":"MST"},{"title":"MT"},{"title":"MUT"},{"title":"MVT"},{"title":"MYT"},{"title":"NCT"},{"title":"NDT"},{"title":"NFT"},{"title":"NOVST"},{"title":"NOVT"},{"title":"NPT"},{"title":"NRT"},{"title":"NST"},{"title":"NUT"},{"title":"NZDT"},{"title":"NZST"},{"title":"OMSST"},{"title":"OMST"},{"title":"ORAT"},{"title":"PDT"},{"title":"PET"},{"title":"PETST"},{"title":"PETT"},{"title":"PGT"},{"title":"PHOT"},{"title":"PHT"},{"title":"PKT"},{"title":"PMDT"},{"title":"PMST"},{"title":"PONT"},{"title":"PST"},{"title":"PST"},{"title":"PT"},{"title":"PWT"},{"title":"PYST"},{"title":"PYT"},{"title":"PYT"},{"title":"QYZT"},{"title":"RET"},{"title":"ROTT"},{"title":"SAKT"},{"title":"SAMT"},{"title":"SAST"},{"title":"SBT"},{"title":"SCT"},{"title":"SGT"},{"title":"SRET"},{"title":"SRT"},{"title":"SST"},{"title":"SYOT"},{"title":"TAHT"},{"title":"TFT"},{"title":"TJT"},{"title":"TKT"},{"title":"TLT"},{"title":"TMT"},{"title":"TOST"},{"title":"TOT"},{"title":"TRT"},{"title":"TVT"},{"title":"ULAST"},{"title":"ULAT"},{"title":"UTC"},{"title":"UYST"},{"title":"UYT"},{"title":"UZT"},{"title":"VET"},{"title":"VLAST"},{"title":"VLAT"},{"title":"VOST"},{"title":"VUT"},{"title":"WAKT"},{"title":"WARST"},{"title":"WAST"},{"title":"WAT"},{"title":"WEST"},{"title":"WET"},{"title":"WFT"},{"title":"WGST"},{"title":"WGT"},{"title":"WIB"},{"title":"WIT"},{"title":"WITA"},{"title":"WST"},{"title":"WST"},{"title":"WT"},{"title":"YAKST"},{"title":"YAKT"},{"title":"YAPT"},{"title":"YEKST"},{"title":"YEKT"}]'),nU=n(48272);function nL(e){var t=e.onChange,n=(0,f._)((0,m.useState)(),2),r=n[0],i=n[1];return((0,m.useEffect)(function(){if(!r){var e=nN.find(function(e){return"PST"===e.title});e&&(t(e.title),i(e))}},[t,r]),r)?(0,h.tZ)(nU.P,{placeholder:"Select your server location",initialSelectedItem:r,items:nN,onChange:function(e){return t(e.title)}}):null}function nO(){return(nO=(0,y._)(function(e){var t,n,r,i,o,a,l,c,s,u,d,f,h,p,m,v,g;return(0,b.Jh)(this,function(y){switch(y.label){case 0:t=["webpack.config.js","vite.config.js","webpack.config.ts","vite.config.ts"],n=!0,r=!1,i=void 0,y.label=1;case 1:y.trys.push([1,6,7,8]),o=t[Symbol.iterator](),y.label=2;case 2:if(n=(a=o.next()).done)return[3,5];return l=a.value,[4,e.stat(l)];case 3:if(!((c=y.sent()).exists&&c.type===ng.Tv.File))return[3,4];return[2,"dist"];case 4:return n=!0,[3,2];case 5:return[3,8];case 6:return s=y.sent(),r=!0,i=s,[3,8];case 7:try{n||null==o.return||o.return()}finally{if(r)throw i}return[7];case 8:u=["dist","build","public"],d=!0,f=!1,h=void 0,y.label=9;case 9:y.trys.push([9,14,15,16]),p=u[Symbol.iterator](),y.label=10;case 10:if(d=(m=p.next()).done)return[3,13];return v=m.value,[4,e.stat(v)];case 11:if(!((g=y.sent()).exists&&g.type===ng.Tv.Directory))return[3,12];return[2,v];case 12:return d=!0,[3,10];case 13:return[3,16];case 14:return s=y.sent(),f=!0,h=s,[3,16];case 15:try{d||null==p.return||p.return()}finally{if(f)throw h}return[7];case 16:return[2]}})})).apply(this,arguments)}var nM=function(e){var t,n,r,i,o,a,l,c,s,u,d,p,w,x,C,_,E,k=e.deploymentId,T=e.initialSubdomain,I=e.provider,G=e.machine,B=e.fs,A=e.dotReplit,P=e.onDeploy,N=e.onCancel,L=e.onError,O=e.initialSecretsSyncExpanded,M=(0,Z.kW)(),X=(0,Z.XA)(),F=(t=(0,U._)({},tA,{skip:!k,variables:{id:null!=k?k:""},fetchPolicy:"cache-and-network",ssr:!1,onCompleted:function(e){var t,n=(null===(t=e.hostingDeployment)||void 0===t?void 0:t.__typename)==="HostingDeployment"?e.hostingDeployment:null;n&&(n.replitAppSubdomain&&(et(n.replitAppSubdomain),ei(!0)),n.currentBuild.machineJob&&(eh(n.currentBuild.machineJob.timezone),ev(n.currentBuild.machineJob.crontab)),ex(n.currentBuild.envVars.map(function(e){return{name:e.name,value:e.value}})))}}),Q.a(tN,t)),W=F.data,H=F.loading,z=(r=(n={provider:I,fs:B,dotReplit:A,isNewDeployment:!k,onError:L,onOptions:function(e){e.appType&&J(e.appType),e.envVars&&ex(e.envVars),e.ignorePorts&&eS(e.ignorePorts),e.buildCommand&&el(e.buildCommand),e.runCommand&&eu(e.runCommand),e.publicDir&&eR(e.publicDir)}}).isNewDeployment,i=n.provider,o=n.fs,a=n.onOptions,l=n.onError,c=n.dotReplit,u=(s=(0,f._)(m.useState(!0),2))[0],d=s[1],p=(0,na.Z)(l),w=(0,na.Z)(a),m.useEffect(function(){var e=!1;function t(){return(t=(0,y._)(function(){var t,n,a,l,s,u,h,p,m;return(0,b.Jh)(this,function(v){switch(v.label){case 0:return t=R.Vp.Server,n=null,a=null,l=null,s=null,[4,Promise.all([r?(0,tm.xk)(o):Promise.resolve(null),(0,tm.$f)(c)])];case 1:if(h=(u=f._.apply(void 0,[v.sent(),2]))[0],p=u[1],e)return[2];if(r)switch(i){case R.r4.Gce:t=p.ignorePorts?R.Vp.Worker:R.Vp.Server;break;case R.r4.CloudRun:t=R.Vp.CloudRun;break;case R.r4.Static:t=R.Vp.Static;break;case R.r4.Cron:t=R.Vp.Cron}else p.appType&&(t=p.appType);if(a=p.buildCommand,!(t!==R.Vp.Static))return[3,2];return n=p.runCommand,[3,5];case 2:if(!p.publicDir)return[3,3];return l=p.publicDir,[3,5];case 3:return[4,function(e){return nO.apply(this,arguments)}(o)];case 4:(m=v.sent())&&(l=m),v.label=5;case 5:return i===R.r4.Gce&&(s=p.ignorePorts),w.current({appType:t,envVars:h,buildCommand:a,runCommand:n,publicDir:l,ignorePorts:s}),d(!1),[2]}})})).apply(this,arguments)}try{!function(){t.apply(this,arguments)}()}catch(e){p.current(e.message),d(!1)}return function(){e=!0}},[i,o,c,p,w,r]),{loading:u}).loading,j=(null==W?void 0:null===(_=W.hostingDeployment)||void 0===_?void 0:_.__typename)==="HostingDeployment"?W.hostingDeployment:null,q=null==j?void 0:j.currentBuild,Y=(0,f._)(m.useState(R.Vp.Server),2),$=Y[0],J=Y[1],K=(0,f._)(m.useState(T),2),ee=K[0],et=K[1],en=(0,f._)(m.useState(!1),2),er=en[0],ei=en[1],eo=(0,f._)(m.useState(null),2),ea=eo[0],el=eo[1],ec=(0,f._)(m.useState(null),2),es=ec[0],eu=ec[1],ed=(0,f._)(m.useState(null),2),ef=ed[0],eh=ed[1],ep=(0,f._)(m.useState(null),2),em=ep[0],ev=ep[1],eg=(0,f._)(m.useState(void 0),2),ey=eg[0],eb=eg[1],eZ=(0,f._)(m.useState(null!==(E=null==q?void 0:q.envVars.map(function(e){return{name:e.name,value:e.value}}))&&void 0!==E?E:[]),2),ew=eZ[0],ex=eZ[1],eC=(0,f._)(m.useState(!1),2),e_=eC[0],eS=eC[1],eE=(0,f._)(m.useState(null),2),ek=eE[0],eR=eE[1],eD=(0,f._)(m.useState(void 0),2),eI=eD[0],eG=eD[1],eB=np({fs:B}).devSecrets;m.useEffect(function(){eQ({context:"deploy_options"})},[]);var eA=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,n=e.value;ex(function(e){return(0,nm.Uy)(e,function(e){e.push({name:null!=t?t:"",value:null!=n?n:""})})})},eP=function(e,t){ex(function(n){return(0,nm.Uy)(n,function(n){n[e].name=t})})},eN=function(e,t){ex(function(n){return(0,nm.Uy)(n,function(n){n[e].value=t})})},eU=function(e){ex(function(t){return(0,nm.Uy)(t,function(t){t.splice(e,1)})})},eL=$!==R.Vp.Static,eO=I===R.r4.Gce,eM=$===R.Vp.Static,eX=I!==R.r4.Cron&&!(null==j?void 0:j.replitAppSubdomain),eF=I===R.r4.Cron,eW=(x=(0,y._)(function(){var e,t;return(0,b.Jh)(this,function(n){switch(n.label){case 0:if(!(e=(!eX||er)&&ee.length?ee:void 0))return[2];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,X({envVars:ew.filter(function(e){return(0,nv.GV)(e)}),subdomain:e,machineConfigurationId:(null==G?void 0:G.configurationId)||void 0,maxMachineInstances:(null==G?void 0:G.maxInstances)||void 0,machineJob:ef&&em?{timezone:ef,crontab:em}:void 0,config:{buildCommand:ea,runCommand:es,appType:$,ignorePorts:e_,publicDir:ek}})];case 2:return n.sent(),P(),[3,4];case 3:if((t=n.sent())instanceof no.ZG)return eb("Run command cannot be empty."),[2];if(t instanceof no.SF)return eG("Public directory cannot be empty."),[2];return L(t.message),[3,4];case 4:return[2]}})}),function(){return x.apply(this,arguments)}),eH=(0,f._)(m.useState(!1),2),eV=eH[0],ez=eH[1],ej=(0,f._)(m.useState(!1),2),eq=ej[0],eY=ej[1],e$=H||z||M===e6.z.Preparing,eJ=e$||eX&&!er,eK=ew.map(function(e){return e.name}),e0=(0,nP.Z)(),e1=(C=(0,y._)(function(){var e,t,n,r,i,o;return(0,b.Jh)(this,function(a){switch(a.label){case 0:return ez(!0),e=ew.reduce(function(e,t){return e[t.name]=t.value,e},{}),[4,B.readFile(".env")];case 1:if(t=a.sent(),n="",t.error&&t.error!==ng.Df.NotFound)return e0.showError("Failed to overwrite secrets"),ez(!1),[2];return t.error||(n=t.content.toString()),r=nh.Z.parse(n),i=(0,U._)({},r,e),o=nh.Z.serialize(i),[4,B.writeFile(".env",o)];case 2:return a.sent().error&&e0.showError("Failed to overwrite secrets"),ez(!1),eY(!1),[2]}})}),function(){return C.apply(this,arguments)});return(0,h.BX)(h.HY,{children:[(0,h.BX)(v.G,{css:[g.l0.colWithGap(16)],children:[eF?(0,h.BX)(v.G,{css:[g.l0.rowWithGap(6),g.l0.flex.growAndShrink(1),g.l0.width("100%")],children:[(0,h.tZ)(nB,{id:"timezone",title:"Timezone",information:"The timezone to schedule your application for.",grow:!0,children:(0,h.tZ)(nL,{onChange:eh})}),(0,h.tZ)(nB,{id:"schedule",title:"Schedule",information:"When you want your application to be scheduled to run (in crontab format).",grow:!0,children:(0,h.tZ)(nk,{id:"Schedule",value:em,loading:!1,disabled:!1,onChange:ev})})]}):null,eX?(0,h.tZ)(nB,{id:"primaryDomain",title:"Primary domain",information:"You can add more custom domains after deploying",children:(0,h.tZ)(nD,{id:"primaryDomain",subdomain:ee,deploymentId:k||void 0,onChange:et,updateValidity:ei})}):null,eM?(0,h.tZ)(nB,{id:"publicDir",title:"Public directory",information:"The public directory is the folder where the browser should start when serving your static site",children:(0,h.tZ)(nk,{id:"publicDir",value:ek,onChange:eR,loading:z,disabled:e$,error:eI})}):null,(0,h.tZ)(nB,{id:"buildCommand",title:"Build command",information:"The build command is the command-line statement that compiles your app at build time.",optional:!0,children:(0,h.tZ)(nk,{id:"buildCommand",value:ea,onChange:el,loading:z,disabled:e$})}),eL?(0,h.tZ)(nB,{id:"runCommand",title:"Run command",information:"The run command is the command-line statement that launches your app after it has been built.",children:(0,h.tZ)(nk,{id:"runCommand",value:es,onChange:eu,loading:z,disabled:e$,error:ey})}):null,(0,h.tZ)(nB,{id:"envVars",title:"Deployment secrets",information:"Secrets, or environment variables, are private keys you can use to access APIs and services",actions:k&&ew.length>0?(0,h.tZ)(eT.hU,{alt:"Copy all secrets from Deployment to Development.",disabled:eV,onClick:function(){eY(!0)},children:(0,h.tZ)(tg.Z,{})}):null,children:(0,h.BX)(v.G,{css:[g.l0.colWithGap(12)],children:[ew.length>0?ew.map(function(e,t){var n=e.name,r=e.value;return(0,h.tZ)(nR,{index:t,name:n,value:r,updateEnvVarName:function(e){return eP(t,e)},updateEnvVarValue:function(e){return eN(t,e)},removeEnvVar:function(){return eU(t)},disabled:e$,otherKeys:eK.filter(function(e,n){return n!==t})},t)}):null,eB?(0,h.tZ)(nf,{secrets:new Map(ew.map(function(e){return[e.name,e.value]})),otherSecrets:eB,otherEnvName:"workspace",onAddSecret:function(e){return eA({name:e.key,value:e.value})},initialExpanded:O}):null,(0,h.tZ)(D.zx,{onClick:function(){return eA()},text:"Add deployment secret",iconLeft:(0,h.tZ)(nl.Z,{}),disabled:H})]})}),eO?(0,h.tZ)(nB,{id:"deploymentAppType",title:"App type",information:"Configure your app based on whether it needs to serve traffic from the web.",children:(0,h.tZ)(nI,{appType:$,onChange:function(e){J(e),eS((e===R.Vp.Server||e===R.Vp.Worker)&&e===R.Vp.Worker)}})}):null,(0,h.BX)(v.G,{css:[g.l0.rowWithGap(8),g.l0.pt(12)],children:[q?(0,h.tZ)(D.zx,{text:"Cancel",onClick:N}):null,(0,h.tZ)(v.G,{css:g.l0.flex.grow(1),children:(0,h.tZ)(D.zx,{colorway:"primary",onClick:eW,text:M===e6.z.Preparing&&"Preparing..."||z&&"Fetching options..."||"Deploy",iconLeft:z||M===e6.z.Preparing?(0,h.tZ)(tv.Z,{}):(0,h.tZ)(S.Z,{}),disabled:eJ})})]})]}),(0,h.tZ)(nA.u,{isOpen:eq,onRequestClose:function(){eV||eY(!1)},children:(0,h.BX)(v.G,{css:[g.l0.colWithGap(8)],children:[(0,h.tZ)(V.xv,{variant:"subheadBig",children:"Copy secrets from Deployment to Development?"}),(0,h.tZ)(V.xv,{children:"Are you sure you want to copy all of your secrets from Deployment to Development? Secrets already present in Development will be overwritten and lost permanently."}),(0,h.BX)(v.G,{css:[g.l0.rowWithGap(8),g.l0.justify.end,g.l0.pt(8)],children:[(0,h.tZ)(D.zx,{text:"Cancel",disabled:eV,onClick:function(){eY(!1)}}),(0,h.tZ)(D.zx,{text:"Yes, copy secrets",colorway:"negative",disabled:eV,loading:eV,onClick:e1})]})]})})]})},nX=n(65143),nF=(0,C.X)({container:[g.l0.align.center,g.l0.colWithGap(4)],qrContainer:[g.l0.align.center,g.l0.justify.center]});function nW(e){var t=e.color;return(0,h.BX)(v.G,{css:nF.container,children:[(0,h.BX)(v.G,{css:nF.qrContainer,children:[(0,h.tZ)("svg",{viewBox:"0 0 128 128",css:[g.l0.height(128),g.l0.width(128),g.l0.borderRadius(2),I.gU.nofill],target:"_blank",onClick:function(){window.open("/mobile")},children:(0,h.tZ)("path",{fill:null!=t?t:g.TV.foregroundDefault,d:"m0,13.58v13.58h27.15V0H0v13.58ZM34.91,1.94v1.94h-3.88v3.88h3.88v-3.88h7.76v3.88h3.88v-3.88h-3.88V0h-7.76v1.94Zm31.03,0v1.94h-15.52v7.76h-15.52v3.88h7.76v7.76h-3.88v-3.88h-7.76v11.64h-15.52v7.76h-3.88v3.88h-3.88v-3.88H0v3.88h7.76v3.88H0v7.76h3.88v3.88H0v3.88h3.88v3.88H0v3.88h3.88v3.88H0v3.88h3.88v3.88H0v3.88h15.52v3.88h-3.88v7.76h3.88v-3.88h3.88v-3.88h7.76v-3.88h-7.76v-7.76h3.88v3.88h3.88v-3.88h3.88v-3.88h3.88v-19.39h7.76v-3.88h-3.88v-3.88h-3.88v-3.88h3.88v-3.88h3.88v3.88h3.88v-3.88h3.88v-3.88h3.88v-7.76h3.88v3.88h3.88v7.76h-3.88v3.88h11.64v-3.88h3.88v3.88h15.52v3.88h-3.88v3.88h3.88v11.64h11.64v3.88h-11.64v3.88h-3.88v3.88h15.52v7.76h-3.88v-3.88h-3.88v3.88h-3.88v-3.88h-3.88v3.88h3.88v15.52h3.88v15.52h7.76v3.88h-3.88v3.88h-3.88v-3.88h-3.88v3.88h-7.76v-3.88h-3.88v3.88h3.88v3.88h-11.64v-3.88h3.88v-7.76h7.76v-3.88h7.76v-3.88h-3.88v-3.88h-3.88v-3.88h3.88v-11.64h-11.64v3.88h3.88v3.88h-7.76v-3.88h-7.76v-3.88h-7.76v3.88h7.76v7.76h-7.76v-3.88h-15.52v7.76h3.88v-3.88h7.76v3.88h3.88v3.88h-3.88v3.88h-11.64v-3.88h-3.88v-7.76h-3.88v15.52h3.88v3.88h3.88v-3.88h3.88v3.88h3.88v3.88h3.88v3.88h7.76v-3.88h-7.76v-3.88h15.52v-3.88h-3.88v-3.88h7.76v-7.76h11.64v7.76h-7.76v3.88h-3.88v7.76h-3.88v3.88h3.88v3.88h27.15v-7.76h3.88v7.76h7.76v-3.88h3.88v3.88h3.88v-3.88h-3.88v-7.76h3.88v3.88h3.88v-3.88h3.88v-3.88h-3.88v3.88h-3.88v-3.88h-3.88v-11.64h3.88v3.88h3.88v3.88h7.76v-3.88h-3.88v-3.88h-7.76v-7.76h-3.88v-7.76h7.76v7.76h7.76v-3.88h-3.88v-7.76h-7.76v-3.88h-7.76v3.88h-3.88v-11.64h3.88v3.88h7.76v-3.88h-7.76v-3.88h3.88v-7.76h3.88v-3.88h3.88v3.88h3.88v3.88h-3.88v15.52h3.88v-11.64h3.88v-7.76h-3.88v-7.76h3.88v-7.76h-3.88v-11.64h-3.88v11.64h3.88v3.88h-3.88v3.88h-7.76v-3.88h3.88v-3.88h-3.88v-3.88h3.88v-3.88h-3.88v3.88h-3.88v-7.76h-7.76v3.88h3.88v3.88h-11.64v-3.88h3.88v-11.64h-3.88v7.76h-3.88v-11.64h3.88v-3.88h-3.88v3.88h-3.88v-3.88h-3.88v-3.88h7.76V3.88h3.88v3.88h3.88V0h-7.76v3.88h-3.88V0h-3.88v3.88h-7.76V0h-7.76v1.94Zm34.91,11.64v13.58h27.15V0h-27.15v13.58Zm-31.03-5.82v3.88h-7.76v3.88h-3.88v7.76h3.88v3.88h-3.88v-3.88h-3.88v3.88h-3.88v3.88h-3.88v7.76h-3.88v-7.76h-3.88v7.76h-3.88v3.88h-3.88v-3.88h-11.64v-3.88h11.64v-3.88h3.88v-7.76h3.88v3.88h3.88v-3.88h3.88v3.88h3.88v-3.88h3.88v-3.88h-7.76v-3.88h3.88v-3.88h3.88v3.88h3.88v-7.76h7.76v-3.88h3.88v3.88Zm-46.8,5.82v9.45H4.13V4.13h18.89v9.45Zm100.85,0v9.45h-18.89V4.13h18.89v9.45Zm-116.11,0v5.82h11.64V7.76H7.76v5.82Zm73.7-3.88v1.94h-3.88v7.76h-3.88v3.88h3.88v3.88h3.88v-7.76h3.88v7.76h-3.88v3.88h-3.88v-3.88h-3.88v3.88h-3.88v3.88h-3.88v-3.88h3.88v-3.88h-3.88v-11.64h3.88v3.88h3.88V7.76h7.76v1.94Zm27.15,3.88v5.82h11.64V7.76h-11.64v5.82Zm-38.79,11.64v1.94h3.88v-3.88h-3.88v1.94Zm-27.15,3.88v1.94h3.88v-3.88h-3.88v1.94Zm46.55,7.76v1.94h-11.64v-3.88h11.64v1.94Zm-62.06,7.76v1.94h-3.88v3.88h11.64v3.88h-11.64v3.88h3.88v3.88h3.88v11.64h-3.88v3.88h-3.88v-3.88h-3.88v3.88h-3.88v3.88h-3.88v-3.88h-3.88v-7.76h3.88v-11.64h3.88v3.88h3.88v-7.76h-7.76v-3.88h-3.88v-3.88h3.88v-3.88h15.52v1.94Zm81.45,1.94v3.88h3.88v7.76h-3.88v7.76h-3.88v3.88h-3.88v-3.88h3.88v-11.64h-3.88v-3.88h-3.88v-3.88h-3.88v-3.88h15.52v3.88Zm-96.97,1.94v1.94h3.88v-3.88h-3.88v1.94Zm89.21,0v1.94h3.88v3.88h3.88v-3.88h-3.88v-3.88h-3.88v1.94Zm-81.45,3.88v1.94h3.88v-3.88h-3.88v1.94Zm77.58,3.88v1.94h-3.88v-3.88h3.88v1.94Zm-77.58,9.7v3.88h-7.76v7.76h3.88v-3.88h3.88v-3.88h3.88v3.88h3.88v-3.88h-3.88v-3.88h3.88v-3.88h-7.76v3.88Zm19.39-1.94v1.94h3.88v-3.88h-3.88v1.94Zm0,11.64v1.94h-3.88v7.76h-3.88v3.88h3.88v-3.88h3.88v3.88h3.88v-7.76h-3.88v-3.88h3.88v-3.88h-3.88v1.94Zm58.18,7.76v1.94h3.88v-3.88h3.88v11.64h-7.76v-3.88h-3.88v-7.76h3.88v1.94Zm15.52,0v1.94h-3.88v-3.88h3.88v1.94ZM0,95.03v1.94h7.76v-3.88H0v1.94Zm23.27,0v1.94h3.88v-3.88h-3.88v1.94Zm46.55,0v1.94h-3.88v-3.88h3.88v1.94Zm38.79,7.76v5.82h-11.64v-11.64h11.64v5.82ZM0,114.42v13.58h27.15v-27.15H0v13.58Zm65.94-11.64v1.94h-3.88v-3.88h3.88v1.94Zm34.91,0v1.94h3.88v-3.88h-3.88v1.94Zm-42.67,3.88v1.94h-3.88v3.88h-3.88v-3.88h3.88v-3.88h3.88v1.94Zm-35.16,7.76v9.45H4.13v-18.89h18.89v9.45Zm-15.26,0v5.82h11.64v-11.64H7.76v5.82Zm100.85,3.88v1.94h-3.88v-3.88h3.88v1.94Zm-69.82,3.88v1.94h-3.88v3.88h3.88v-3.88h3.88v3.88h3.88v-3.88h-3.88v-3.88h-3.88v1.94Zm54.3,0v1.94h-3.88v-3.88h3.88v1.94Zm31.03,3.88v1.94h3.88v-3.88h-3.88v1.94Z"})}),(0,h.tZ)(nX.Z,{size:32,css:[g.l0.position.absolute],color:t})]}),(0,h.tZ)(V.xv,{variant:"small",color:"dimmer",children:"Scan to install"})]})}var nH=n(31661),nV=n(67795),nz=(0,C.X)({row:[g.l0.pb(12),g.l0.rowWithGap(2),g.l0.justify.center],buttonLeft:[g.l0.borderRadius(8,0,0,8),g.l0.flex.growAndShrink(1)],buttonRight:[g.l0.borderRadius(0,8,8,0)]});function nj(e){var t=e.shouldShow,n=e.onDismissTour,r=(0,f._)((0,m.useState)(!1),2),i=r[0],o=r[1];return(0,h.BX)(h.HY,{children:[t?(0,h.BX)(v.G,{css:nz.row,children:[(0,h.tZ)(D.zx,{iconLeft:(0,h.tZ)(nH.Z,{}),onClick:function(){(0,eK.j)(nV.U3.DEPLOYMENT_MOBILE_DOWNLOAD_QR_VIEWED),o(!0)},text:"Deploy with the Replit App!",css:nz.buttonLeft}),(0,h.tZ)(D.zx,{css:nz.buttonRight,text:"",iconLeft:(0,h.tZ)(nS.Z,{}),onClick:n})]}):null,(0,h.tZ)(nA.u,{isOpen:i,onRequestClose:function(){o(!1),n()},children:(0,h.tZ)(nW,{})})]})}var nq=(0,C.X)({root:{flexDirection:"row",gap:8,flexWrap:"wrap"},loading:t5,deployOptions:[g.l0.p(16),g.l0.pt(12),g.l0.borderRadius(8),g.l0.border({color:g.TV.outlineDimmest})]}),nY=function(e){var t=e.deploymentId,n=e.dotReplit,r=e.fs,i=e.onError,o=e.expanded,a=e.setExpanded,l=e.shouldShowMobileTour,c=e.onDismissMobileTour,s=(0,Z.XA)(),u=(k=(C={deploymentId:t,dotReplit:n}).deploymentId,R=C.dotReplit,G=(I=(0,f._)(m.useState(null),2))[0],B=I[1],m.useEffect(function(){var e=!1;function t(){return(t=(0,y._)(function(){var t;return(0,b.Jh)(this,function(n){switch(n.label){case 0:return[4,(0,tm.$f)(R)];case 1:if(t=n.sent(),e)return[2];return B(t),[2]}})})).apply(this,arguments)}return function(){t.apply(this,arguments)}(),function(){e=!0}},[R]),N=(A=(0,U._)({},tL,{variables:{id:k},ssr:!1,fetchPolicy:"cache-and-network"}),P=Q.a(tO,A)).data,L=P.loading,O=P.error,M=(null==N?void 0:null===(_=N.hostingDeployment)||void 0===_?void 0:_.__typename)==="HostingDeployment"?N.hostingDeployment:null,(null==N?void 0:null===(E=N.hostingDeployment)||void 0===E?void 0:E.__typename)==="NotFoundError"?{deployment:null,config:null,error:"Deployment not found",loading:!1}:null===G||!M&&L?{data:null,erorr:null,loading:!0}:O||!M?{deployment:null,config:null,error:"Something went wrong",loading:!1}:{deployment:M,config:G,error:null,loading:!1}),d=np({fs:r}).devSecrets,p=null===(X=u.deployment)||void 0===X?void 0:X.currentBuild.envVars,g=(0,m.useMemo)(function(){return d?nu({secrets:new Map(null==p?void 0:p.map(function(e){return[e.name,e.value]})),otherSecrets:d}).missing.size:0},[d,p]),w=(0,Z.kW)();if(w===e6.z.Preparing||w===e6.z.Deploying)return(0,h.tZ)(v.G,{css:nq.loading,children:(0,h.tZ)(t9,{})});if(u.error)return(0,h.tZ)(tZ,{text:u.error});if(o){var C,_,E,k,R,I,G,B,A,P,N,L,O,M,X,F,W=null===(F=u.deployment)||void 0===F?void 0:F.currentBuild;return W?(0,h.tZ)(v.G,{css:nq.deployOptions,children:(0,h.tZ)(nM,{initialSubdomain:"",provider:W.provider,deploymentId:t,fs:r,dotReplit:n,onCancel:function(){return a(!1)},onDeploy:function(){return a(!1)},onError:i,initialSecretsSyncExpanded:g>0})}):(0,h.tZ)(x.E,{colorway:"warning",icon:(0,h.tZ)(T.Z,{}),text:"Provider not found"})}var H=u.loading||!(w===e6.z.Ready||w===e6.z.Suspended);return(0,h.BX)(v.G,{css:nq.root,children:[(0,h.tZ)(D.zx,{disabled:H,onClick:(0,y._)(function(){var e;return(0,b.Jh)(this,function(t){switch(t.label){case 0:if(u.loading)return[2];return[4,s({subdomain:null!==(e=u.deployment.replitAppSubdomain)&&void 0!==e?e:void 0})];case 1:return t.sent(),[2]}})}),text:w===e6.z.Suspended?"Resume":"Redeploy",iconLeft:(0,h.tZ)(S.Z,{})}),(0,h.tZ)(D.zx,{disabled:H,text:g>0?"".concat(g," ").concat((0,nc.Z)("secrets",g)," out of sync"):"Edit commands and secrets",iconLeft:g>0?(0,h.tZ)(T.Z,{}):void 0,onClick:function(){return a(!0)}}),(0,h.tZ)(nj,{shouldShow:l,onDismissTour:c})]})},n$=n(35597),nJ=n(79217),nK=n(95891);(o||(o={})).Current="current";var nQ=(0,H._)({},"current",{icon:(0,h.tZ)(function(e){var t=e.color;return(0,h.tZ)(v.G,{css:[g.l0.align.center,g.l0.rowWithGap(8),{textTransform:"capitalize"}],children:(0,h.tZ)(v.G,{tag:"span",css:[g.l0.width("8px"),g.l0.height("8px"),g.l0.borderRadius("full"),{backgroundColor:t,boxShadow:"0 0 12px ".concat(t)}]})})},{color:g.TV.blueStronger}),text:"Current deployment"}),n0=v.K.div,n1=function(e){var t=e.activityLogItem.type,n=(0,f._)(m.useState(!1),2),r=n[0],i=n[1],o=(0,f._)(m.useState(!1),2),a=o[0],l=o[1],c=m.useRef(!1);m.useEffect(function(){c.current=!0;var e=setTimeout(function(){l(r)},200);return function(){clearTimeout(e)}},[r]);var s=t in nQ&&nQ[t];if(!s)return null;var u=s.icon,d=s.text;return(0,h.tZ)(v.G,{css:[g.l0.p(8)],onMouseEnter:function(){return i(!0)},onMouseLeave:function(){return i(!1)},children:(0,h.BX)(nK.Z,{isOpen:a,onClickOutside:function(){return l(!1)},padding:8,children:[(0,h.tZ)(n0,{css:g.l0.cursor.pointer,children:u}),(0,h.tZ)(v.G,{css:[g.l0.maxWidth(240)],children:(0,h.tZ)(V.xv,{children:d})})]})})},n2=n(34396),n8=function(e){var t=e.build,n=t.id.slice(0,8),r=(0,f._)(m.useState(!1),2),i=r[0],o=r[1],a=(0,f._)(m.useState(!1),2),l=a[0],c=a[1],s=m.useRef(!1);return m.useEffect(function(){s.current=!0;var e=setTimeout(function(){c(i)},200);return function(){clearTimeout(e)}},[i]),(0,h.tZ)("span",{onMouseEnter:function(){return o(!0)},onMouseLeave:function(){return o(!1)},children:(0,h.BX)(nK.Z,{isOpen:l,onClickOutside:function(){return c(!1)},padding:8,children:[(0,h.tZ)("span",{css:[I.gU.listItem,g.l0.display.inlineBlock,g.l0.px(2),g.l0.py(0),g.l0.borderRadius(4)],children:n}),(0,h.tZ)(v.G,{css:[g.l0.maxWidth(260)],children:(0,h.tZ)(V.xv,{variant:"small",children:t.id})})]})})},n4=(a={},(0,H._)(a,n2.dD.Deploy,function(e){return(0,h.BX)(h.HY,{children:["deployed ",(0,h.tZ)(n8,{build:e})]})}),(0,H._)(a,n2.dD.Rollback,function(e){return(0,h.BX)(h.HY,{children:["rolled back ",(0,h.tZ)(n8,{build:e})]})}),(0,H._)(a,n2.dD.Fail,function(e){return(0,h.BX)(h.HY,{children:["failed to deploy ",(0,h.tZ)(n8,{build:e})]})}),a),n3=function(e){var t=e.activityLogItem,n=t.type,r=t.build,i=t.user.displayName,o=n in n4&&n4[n](r);return o?(0,h.BX)(V.xv,{multiline:!1,children:[(0,h.tZ)("span",{css:g.l0.fontWeight.medium,children:i+" "}),o]}):null},n5=(0,C.X)({line:{width:1,position:"absolute",left:3},circlePast:{position:"absolute",top:10,left:1,width:5,height:5,borderRadius:"100%",opacity:.5}}),n6=(0,C.X)({container:{width:7,position:"relative"},linePast:[n5.line,{backgroundColor:g.TV.outlineDimmest,top:15,bottom:-10}],linePresent:[n5.line,{backgroundImage:"linear-gradient(to top, ".concat(g.TV.outlineDimmest,", ").concat(g.TV.outlineDimmer,")"),top:27,bottom:-10}],lineFuture:[n5.line,{borderRight:"1px dashed "+g.TV.outlineDimmer,top:23,bottom:-20}],lineFutureFailClosed:[n5.line,{backgroundColor:g.TV.outlineDimmest,top:19,bottom:-20}],lineFutureFailOpen:[n5.line,{borderRight:"1px dashed "+g.TV.outlineDimmer,top:22,bottom:-18}],circlePastGreen:[n5.circlePast,g.l0.backgroundColor.accentPositiveDefault],circlePastRed:[n5.circlePast,g.l0.backgroundColor.accentNegativeDefault],circlePastGray:[n5.circlePast,g.l0.backgroundColor.outlineDimmer],circlePresent:[g.l0.backgroundColor.accentPrimaryStronger,{position:"absolute",top:20,left:0,width:7,height:7,borderRadius:"100%"}],circleFuture:{position:"absolute",top:12,left:-1,width:9,height:9},circleFutureFailClosed:[g.l0.backgroundColor.accentNegativeDefault,{position:"absolute",top:14,left:1,width:5,height:5,borderRadius:"100%",opacity:.6}]});function n9(e){var t,n;switch(e.type){case"pastSuccess":t=n6.linePast,n=(0,h.tZ)(v.G,{css:n6.circlePastGreen});break;case"pastFail":t=n6.linePast,n=(0,h.tZ)(v.G,{css:n6.circlePastRed});break;case"pastNeutral":t=n6.linePast,n=(0,h.tZ)(v.G,{css:n6.circlePastGray});break;case"present":t=n6.linePresent,n=(0,h.tZ)(v.G,{css:n6.circlePresent});break;case"future":t=n6.lineFuture,n=(0,h.tZ)("svg",{viewBox:"0 0 9 9",css:n6.circleFuture,children:(0,h.tZ)("circle",{cx:4.5,cy:4.5,r:4,fill:"none",stroke:g.TV.outlineStrongest,strokeDasharray:"2 1"})});break;case"futureFailClosed":t=n6.lineFutureFailClosed,n=(0,h.tZ)(v.G,{css:n6.circleFutureFailClosed});break;case"futureFailOpen":t=n6.lineFutureFailOpen,n=null}return(0,h.BX)(v.G,{css:n6.container,children:[(0,h.tZ)(v.G,{css:t,"data-timeline-line":!0}),n]})}function n7(e){var t=e.onViewBuildLogs,n=e.type,r=(0,w.Z)();return(0,h.tZ)(ru,{replId:r,onSelect:t,type:void 0===n?"default":n})}var re=t2.filter(function(e){return"title"in e}),rt=(0,C.X)({root:[g.l0.flex.row,g.l0.px(8),g.l0.pb(8),{zIndex:0}]});function rn(e){var t=e.activeStage,n=e.erroredStage;return(0,h.tZ)(v.G,{css:rt.root,children:re.map(function(e){return(0,h.tZ)(tK,{stage:e.id,text:e.title,totalStagesWithTitle:re.length,activeStage:t,erroredStage:n},e.id)})})}var rr=(0,C.X)({root:[g.l0.colWithGap(8),g.l0.height("100%")],header:[g.l0.pt(8),g.l0.px(8),g.l0.rowWithGap(8),g.l0.align.center],divider:[{marginLeft:8,marginRight:8,borderBottom:"1px solid "+g.TV.outlineDimmest}],name:[g.l0.color.foregroundDefault,g.l0.fontWeight.medium],content:[g.l0.p(8),g.l0.flex.growAndShrink(1),g.l0.position.relative],loading:[g.l0.coverContainer,g.l0.center],error:[g.l0.m(8),g.l0.borderRadius(8),g.l0.overflow("hidden")],xterm:[g.l0.coverContainer,{overflow:"hidden",borderBottomLeftRadius:8,borderBottomRightRadius:8,"& > div":[g.l0.coverContainer,g.l0.p(8)]}]});function ri(e){var t,n,r=e.build,i=e.onBack,o=e.fs,a=e.openFile,l=e.onViewAppLogs,c=(0,f._)((0,tM.Z)({openFile:a,listFiles:o.listFiles}),2),s=c[0],u=c[1],d=(t={variables:{input:{buildId:r.id}},ssr:!1,fetchPolicy:"cache-and-network"},n=(0,U._)({},tk,t),Q.a(tI,n)),p=d.data,y=d.loading,b=(0,m.useMemo)(function(){if(!p)return null;var e=[],t="HostingBuildDeployActionHistoryResults"===p.hostingBuildDeployActionHistory.__typename?p.hostingBuildDeployActionHistory.results:null;if(t){var n=void 0,r=void 0,i=void 0,o=!0,a=!1,l=void 0;try{for(var c,s,u=t[Symbol.iterator]();!(o=(s=u.next()).done);o=!0)!function(){var t=s.value;if("HostingBuildDeployLogAction"===t.__typename)return e.push(t.log);t2.some(function(e){return e.statusType===t.status})&&(n=t.status),t.status===R.Fe.Failed&&(r=n)}()}catch(e){a=!0,l=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw l}}var d=n?null===(c=t4(n))||void 0===c?void 0:c.id:void 0;return r&&(i=d),{logs:e,activeStage:d,erroredStage:i,erroredStatus:r}}},[p]);return(0,m.useEffect)(function(){if(s&&b){var e=!0,t=!1,n=void 0;try{for(var r,i=b.logs[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value;s.write(o)}}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}}},[s,b]),(0,h.BX)(v.G,{css:rr.root,children:[(0,h.BX)(v.G,{css:rr.header,children:[(0,h.tZ)(eT.hU,{alt:"Back to timeline",onClick:function(){return i()},children:(0,h.tZ)(tg.Z,{})}),(0,h.tZ)(v.G,{children:(0,h.BX)(V.xv,{color:"dimmer",multiline:!1,children:[(0,h.tZ)("span",{css:rr.name,children:r.user.displayName+" "}),(0,tt.BX)(r.status)]})}),(0,h.tZ)(n8,{build:r})]}),(null==b?void 0:b.erroredStatus)?(0,h.BX)(v.G,{css:rr.error,children:[(null==b?void 0:b.erroredStatus)===R.Fe.Building?(0,h.tZ)(ni,{provider:r.provider,openFile:a}):null,(null==b?void 0:b.erroredStatus)===R.Fe.Promoting?(0,h.tZ)(nr,{provider:r.provider,openFile:a,onViewApplicationLogs:l}):null]}):null,(0,h.tZ)(rn,{activeStage:null==b?void 0:b.activeStage,erroredStage:null==b?void 0:b.erroredStage}),(0,h.tZ)(v.G,{css:rr.divider}),(0,h.BX)(G.Tg,{css:rr.content,children:[(0,h.tZ)(v.G,{css:rr.xterm,innerRef:u}),y||!s?(0,h.tZ)(v.G,{css:rr.loading,children:(0,h.tZ)(tv.Z,{color:g.TV.white,size:24})}):null]})]})}var ro=(0,C.X)({item:g.l0.rowWithGap(12),past:{":last-of-type":{"[data-timeline-line]":{display:"none"}}},future:{":last-of-type":{"[data-timeline-line]":{bottom:-19}}},animate:{animation:(0,M.Gs)(36.4)+" 300ms ease-out forwards"}}),ra=(0,C.X)({root:[g.l0.colWithGap(8)],empty:[g.l0.pb(8),g.l0.center,g.l0.align.stretch],items:[],loadMore:[g.l0.center],item:[g.l0.rowWithGap(8),g.l0.pl(8),g.l0.pr(4),g.l0.pb(12),g.l0.align.center,g.l0.flex.growAndShrink(1),g.l0.color.foregroundDimmest,g.l0.hover(g.l0.color.foregroundDefault)],itemMainText:[g.l0.flex.growAndShrink(1),(0,H._)({},g.nC.min(640),g.l0.flex.growAndShrink(0))],itemLine:[g.l0.display.none,(0,H._)({},g.nC.min(640),[g.l0.display.flex,g.l0.flex.growAndShrink(1),g.l0.border({color:g.TV.outlineDimmest,direction:"top"})])],itemRight:[g.l0.rowWithGap(6),g.l0.justify.end,g.l0.textAlign.right],itemContent:[g.l0.rowWithGap(8),g.l0.flex.growAndShrink(1),g.l0.align.center],itemPast:[ro.item,ro.past],itemPastAnimate:[ro.item,ro.past,ro.animate],itemFuture:[ro.item,ro.future],itemFutureAnimate:[ro.item,ro.future,ro.animate]}),rl=(0,C.X)({button:[g.l0.reset.button,g.l0.cursor.pointer,g.l0.borderRadius(8),g.l0.display.flex,g.l0.rowWithGap(6),g.l0.align.center,g.l0.px(8),g.l0.color.foregroundDimmer,g.l0.height(32),g.l0.hover(g.l0.color.foregroundDefault)]}),rc=(0,C.X)({button:rl.button,buttonHighlight:[rl.button,g.l0.color.accentNegativeStrongest,g.l0.backgroundColor.accentNegativeDimmest,g.l0.border({color:g.TV.accentNegativeDimmer})],buttonOpen:g.l0.flex.growAndShrink(1),buttonClosed:[g.l0.flex.growAndShrink(1),g.l0.pb(12)],buttonContent:[g.l0.flex.growAndShrink(1),g.l0.rowWithGap(8),g.l0.align.center]});function rs(e){var t=e.items,n=e.onClick,r=(0,f._)((0,m.useState)(!1),2),i=r[0],o=r[1],a=(0,Z.pn)(),l=m.useRef(void 0);m.useEffect(function(){(null==a?void 0:a.status)!==void 0&&(l.current=null==a?void 0:a.status)},[a,null==a?void 0:a.status]);var c=!a&&l.current!==R.Fe.Building&&l.current!==R.Fe.Success,s=c?g.TV.accentNegativeStronger:g.TV.foregroundDimmer;return 0===t.length?null:(0,h.BX)(v.G,{children:[(0,h.BX)(v.G,{css:g.l0.rowWithGap(12),children:[(0,h.tZ)(n9,{type:i?"futureFailOpen":"futureFailClosed"}),(0,h.tZ)(v.G,{css:i?rc.buttonOpen:rc.buttonClosed,children:(0,h.BX)("button",{onClick:function(){return o(!i)},css:c?rc.buttonHighlight:rc.button,children:[(0,h.BX)(v.G,{css:rc.buttonContent,children:[c?(0,h.tZ)(T.Z,{color:g.TV.accentNegativeStronger}):null,(0,h.BX)(V.xv,{children:[t.length," ",(0,nc.Z)("build",t.length)," failed"]}),i?null:(0,h.BX)(V.xv,{children:[t.length>1?"Most recent: ":null,(0,t0.Z)(new Date(t[0].timeCreated),Date.now(),{addSuffix:!0})]})]}),i?(0,h.tZ)(t1.Z,{color:s}):(0,h.tZ)(eJ.Z,{color:s})]})})]}),i?(0,h.tZ)(v.G,{css:g.l0.pt(8),children:t.map(function(e){return(0,h.tZ)(rd,{item:e,onClick:function(){return n(e.build)},type:"future"},e.id)})}):null]})}function ru(e){var t,n,r,i=e.replId,o=e.onSelect,a=e.type,l=void 0===a?"default":a,c=(t=(0,U._)({},tk,{variables:{replId:i,count:20},fetchPolicy:"cache-and-network",ssr:!1}),Q.a(tD,t)),s=c.data,u=c.previousData,d=c.loading,f=c.error,p=c.fetchMore,g=null!=s?s:u,w=(null==g?void 0:g.repl.__typename)==="Repl"?g.repl:null,C=(null==w?void 0:null===(r=w.hostingDeployment)||void 0===r?void 0:r.__typename)==="HostingDeployment"?w.hostingDeployment:null,_=(n=(0,y._)(function(){var e;return(0,b.Jh)(this,function(t){switch(t.label){case 0:if(!(e=null==C?void 0:C.activityLogs.pageInfo.nextCursor))return[2];return[4,p({variables:{after:e,count:20}})];case 1:return t.sent(),[2]}})}),function(){return n.apply(this,arguments)}),S=(0,n$.Z)({onLoadMore:_,rootMargin:"0px 0px 300px 0px"}).targetRef,E=m.useRef(""),k=(0,Z.$y)(),D=(0,Z.pn)(),I=m.useRef(void 0);if(m.useEffect(function(){(null==D?void 0:D.id)!==void 0&&(I.current=null==D?void 0:D.id)},[null==D?void 0:D.id]),d&&!C)return"failureQueue"===l?null:(0,h.tZ)(rh,{});if(!(null==C?void 0:C.activityLogs))return null;var G=C.activityLogs,B=G.items,A=G.pageInfo;if(0===B.length)return null;if(f)return(0,h.tZ)(v.G,{css:ra.empty,children:(0,h.tZ)(x.E,{colorway:"warning",icon:(0,h.tZ)(T.Z,{}),text:"Something went wrong"})});B.length&&(B[0].build.id===(null==k?void 0:k.id)&&B[1]?E.current=B[1].build.id:E.current=B[0].build.id);var P=function(e,t){var n=[],r=(null==t?void 0:t.timeCreated)?new Date(t.timeCreated):null,i=!0,o=!1,a=void 0;try{for(var l,c=e[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;if(s.type!==R.dD.Fail||r&&r.getTime()>new Date(s.build.timeCreated).getTime()||(null==t?void 0:t.id)===s.build.id)break;n.push(s)}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return n}(B,k);return"failureQueue"===l?(0,h.tZ)(M.un,{render:P.length>0,initialHeight:44,children:(0,h.tZ)(rs,{items:P,onClick:o})}):(0,h.BX)(v.G,{css:ra.root,"data-history-timeline-items":B.length-P.length,children:[(0,h.tZ)(v.G,{css:ra.items,children:B.map(function(e,t){return e.build.id===(null==k?void 0:k.id)||t<P.length?null:(0,h.tZ)(rd,{item:e,onClick:function(){return o(e.build)}},e.id)})}),A.nextCursor?(0,h.tZ)(v.G,{css:ra.loadMore,children:(0,h.tZ)(eT.hU,{disabled:d,tooltipHidden:!0,alt:"Show more",onClick:_,ref:S,children:d?(0,h.tZ)(tv.Z,{}):(0,h.tZ)(nJ.Z,{})})}):null]})}function rd(e){var t=e.item,n=e.onClick,r=e.timeline,i=e.type,o=(0,h.BX)(v.G,{css:ra.item,children:[(0,h.tZ)(v.G,{css:ra.itemMainText,children:(0,h.tZ)(n3,{activityLogItem:t})}),(0,h.tZ)(v.G,{css:ra.itemLine}),(0,h.BX)(v.G,{css:ra.itemRight,children:[(0,h.tZ)(n1,{activityLogItem:t}),(0,h.tZ)(V.xv,{multiline:!1,children:(0,t0.Z)(new Date(t.timeCreated),Date.now(),{addSuffix:!0})}),(0,h.tZ)(eT.hU,{alt:"View deploy logs",onClick:n,children:(0,h.tZ)(E.Z,{})})]})]});return void 0===r||r?(0,h.BX)(v.G,{css:"past"===(void 0===i?"past":i)?ra.itemPast:ra.itemFuture,children:[(0,h.tZ)(n9,{type:t.type===R.dD.Fail?"pastFail":"pastSuccess"}),o]}):o}var rf=(0,C.X)({loading:[g.l0.rowWithGap(12),{":last-of-type":{"[data-timeline-line]":{display:"none"}}}],loadingItem:[$.p.backgroundPulse(),g.l0.height(20.4),g.l0.mt(2),g.l0.ml(4),g.l0.flex.growAndShrink(1),g.l0.borderRadius(6),{opacity:.5,marginBottom:14}]});function rh(){return(0,h.tZ)(v.G,{children:[,,,].fill(0).map(function(e,t){return(0,h.BX)(v.G,{css:rf.loading,children:[(0,h.tZ)(n9,{type:"pastNeutral"}),(0,h.tZ)(G.Tg,{elevated:!0,css:rf.loadingItem})]},t)})})}var rp=n(53937),rm=n(74440),rv=n(44166),rg=n(90234),ry=[1,2,3,4,5,6,7,8,9,10],rb=ry.length-1,rZ=1/(2*rb),rw=(0,rg.cn)(2),rx=(0,rg.cn)(function(e){return ry[e(rw)]}),rC=(0,rg.cn)(function(e){return(e(rm.Qc)*e(rx)).toFixed(6)}),r_=(0,rg.cn)(function(e){return e(rm.Ig)*e(rx)}),rS=(0,rg.cn)(0),rE=(0,rg.cn)(function(e){var t=0/rb,n=ry.length-1/rb,r=0,i=0;return e(rS)<t&&(r=(t-e(rS))/rZ,i=t-rZ),e(rS)>n&&(r=(e(rS)-n)/rZ,i=n+rZ),{overage:r,point:i}});(r=l||(l={})).None="0ms",r.Normal="120ms";var rk=["ArrowLeft","ArrowRight","Home","End"],rT=(0,ed.iv)({position:"relative",height:"16px",width:"100%",touchAction:"none"}),rR=(0,ed.iv)({position:"absolute",zIndex:2,top:"0",width:"16px",height:"16px",backgroundColor:g.TV.white,borderRadius:"100%",outline:"none",cursor:"pointer",willChange:"left, transition",boxShadow:"0 0 8px rgba(0,0,0,0.15)",":focus":{outline:"2px solid ".concat(g.TV.accentPrimaryDefault),":not(:focus-visible)":{outlineColor:"transparent"}}}),rD=n(71999),rI="min(var(--point), var(--position))",rG="max(var(--point), var(--position))",rB=(0,m.forwardRef)(function(e,t){var n=(0,rD.Dv)(rE),r=n.overage,i=n.point,o=(0,rD.Dv)(rS),a=(0,m.useRef)(null);return(0,m.useEffect)(function(){(0,rv.A)(a,"--opacity",String(r))},[r]),(0,m.useEffect)(function(){(0,rv.A)(a,"--point",String(100*i)+"%")},[i]),(0,m.useEffect)(function(){(0,rv.A)(a,"--position",String(100*o)+"%")},[o]),(0,m.useMemo)(function(){return(0,h.BX)(h.HY,{children:[(0,h.tZ)("div",{ref:t,"aria-hidden":!0,css:{position:"relative",top:"0",width:"100%",height:"16px",margin:"0",cursor:"pointer"}}),(0,h.tZ)("div",{"aria-hidden":!0,css:{position:"absolute",top:"5px",left:"0",width:"100%",height:"6px",margin:"0",overflow:"hidden",pointerEvents:"none",backgroundColor:I.vb.interactiveBorder,borderRadius:"2px"},children:(0,h.tZ)("div",{ref:a,"aria-hidden":!0,css:{"--opacity":0,"--point":0,"--position":0,backgroundImage:"\n                linear-gradient(\n                  to right, transparent ".concat(rI,", \n                  ").concat(I.vb.interactiveBorderHover," ").concat(rI,", \n                  ").concat(I.vb.interactiveBorderHover," ").concat(rG,", \n                  transparent ").concat(rG," \n                )"),opacity:"var(--opacity)",width:"100%",height:"100%"}})})]})},[t])}),rA=(0,m.forwardRef)(function(e,t){var n=(0,f._)((0,rD.KO)(rx),1)[0],r=(0,m.useRef)(null);return(0,m.useImperativeHandle)(t,function(){return r.current}),n&&r.current&&(r.current.setAttribute("aria-valuemin",String(ry[0])),r.current.setAttribute("aria-valuemax",String(ry[ry.length-1])),r.current.setAttribute("aria-valuenow",String(n))),(0,m.useMemo)(function(){return(0,h.tZ)("div",{ref:r,role:"slider",tabIndex:0,css:[rR,{left:"calc((100% - 16px) * var(--max-instances-progress, 0))",transition:"left var(--max-instances-transition-time, 100ms) ease-out"}]})},[])}),rP=n(57330);function rN(e){var t=e.setAttrs,n=(0,f._)((0,rD.KO)(rw),2),r=n[0],i=n[1],o=(0,f._)((0,m.useState)(!1),2),a=o[0],c=o[1],s=(0,m.useRef)(null),u=(0,m.useRef)(null),d=(0,m.useRef)(null),p=(0,m.useCallback)(function(e){t.setTransitionTime(e)},[t]),y=(0,m.useCallback)(function(e){t.setProgress(e)},[t]);return void 0===r||a||(y(r/rb),p(l.Normal)),(0,m.useEffect)(function(){if(void 0!==r&&u.current&&d.current&&!a){var e=u.current,t=d.current,n=function(n){if(0===n.button){c(!0),t.focus();var r=e.getBoundingClientRect(),o=t.getBoundingClientRect(),a=r.width,s=o.width,u=n.target===e?s/2:n.clientX-o.left,d=null,f=function(e){var t=Math.max(0,Math.min(1,(e-r.left-u)/(a-s)));t!==d&&(d=t,y(t),i(Math.round(t*rb)))};f(n.clientX);var h=function(e){p(l.None),f(e.clientX),e.preventDefault(),e.stopPropagation()},m=function(){window.removeEventListener("pointermove",h),window.removeEventListener("pointerup",m),window.removeEventListener("pointercancel",m),p(l.Normal),c(!1)};window.addEventListener("pointermove",h),window.addEventListener("pointerup",m),window.addEventListener("pointercancel",m),n.preventDefault(),n.stopPropagation()}};return e.addEventListener("pointerdown",n),t.addEventListener("pointerdown",n),function(){e.removeEventListener("pointerdown",n),t.removeEventListener("pointerdown",n)}}},[r,a,i,y,p]),(0,m.useEffect)(function(){if(void 0!==r&&d.current&&!a){var e=d.current,t=function(e){if(void 0!==r&&rk.includes(e.key)){var t=Math.max(0,r-1),n=Math.min(rb,r+1),o=null;switch(e.key){case"ArrowLeft":o=t;break;case"ArrowRight":o=n;break;case"Home":o=0;break;case"End":o=rb}null!==o&&(i(o),e.preventDefault(),e.stopPropagation())}};return e.addEventListener("keydown",t),function(){e.removeEventListener("keydown",t)}}},[a,r,i]),(0,m.useMemo)(function(){return(0,h.tZ)(v.G,{css:g.l0.colWithGap(8),children:(0,h.BX)(v.G,{innerRef:s,css:rT,children:[(0,h.tZ)(rB,{ref:u}),(0,h.tZ)(rA,{ref:d})]})})},[])}var rU=(0,C.X)({costInfo:[g.l0.rowWithGap(4),g.l0.flex.shrink(1),g.l0.align.center]});function rL(e){var t=e.setAttrs,n=(0,f._)((0,rD.KO)(rx),1)[0],r=(0,f._)((0,rD.KO)(rC),1)[0],i=(0,f._)((0,rD.KO)(r_),1)[0];return(0,h.BX)(v.G,{css:rP.B.container,children:[(0,h.BX)(v.G,{css:rP.B.label,children:[(0,h.BX)(V.xv,{css:rP.B.resource,multiline:!1,children:[n," ",(0,nc.Z)("machine",n)]}),(0,h.BX)(v.G,{css:rU.costInfo,children:[(0,h.BX)(v.G,{css:rP.B.cost,children:[(0,h.BX)(V.xv,{multiline:!1,children:[i," compute units"]}),(0,h.tZ)(V.xv,{color:"dimmer",variant:"small",multiline:!1,children:"/s at max traffic"})]}),(0,h.tZ)(n_.u,{tooltip:(0,h.BX)(v.G,{css:rP.B.cost,children:[(0,h.BX)(V.xv,{multiline:!1,children:["$",r]}),(0,h.tZ)(V.xv,{variant:"small",color:"dimmest",multiline:!1,children:"/s"})]}),children:(0,h.tZ)(tp.Z,{color:g.TV.foregroundDimmest})})]})]}),(0,h.tZ)(rN,{setAttrs:t})]})}var rO=n(10454),rM=[g.l0.colWithGap(12),g.l0.borderRadius(12),g.l0.p(16)],rX=(0,C.X)({container:[rM],disabled:[rM,{opacity:.5,pointerEvents:"none"}],text:[g.l0.colWithGap(4)],title:[g.l0.rowWithGap(4),g.l0.align.center],cost:[g.l0.flex.row,g.l0.align.baseline,g.l0.fontWeight.medium,{gap:3}],builder:[g.l0.colWithGap(8),g.l0.position.relative,{"--max-instances-transition-time":l.Normal,"--max-instances":1," *":{transitionTimingFunction:"ease"}}]});function rF(e){var t=e.maxMachineInstances,n=e.disabled,r=e.onError,i=(0,m.useRef)(null),o=(0,rD.b9)(rS),a=(0,rD.b9)(rw);return m.useEffect(function(){if(t){var e=ry.indexOf(t);if(-1===e){r("An error occurred while setting selected max machine instances.");return}a(e)}},[t,a,r]),(0,h.BX)(G.Tg,{elevated:!0,css:n?rX.disabled:rX.container,children:[(0,h.BX)(v.G,{css:rX.text,children:[(0,h.BX)(v.G,{css:rX.title,children:[(0,h.tZ)(rO.Z,{}),(0,h.tZ)(V.xv,{variant:"subheadDefault",multiline:!1,children:"Max number of machines"})]}),(0,h.tZ)(V.xv,{multiline:!0,variant:"small",color:"dimmer",children:"The most machines that should ever spin up to handle your highest traffic. More machines means a faster experience for your users."})]}),(0,h.tZ)(v.G,{css:rX.builder,innerRef:i,children:(0,h.tZ)(rL,{setAttrs:{setTransitionTime:function(e){(0,rv.A)(i,"--max-instances-transition-time",e)},setProgress:function(e){(0,rv.A)(i,"--max-instances-progress",e.toString()),o(e)}}})})]})}var rW=n(4927);function rH(){var e=(0,J._)(["\n  query AutoscaleMachineConfigurations {\n    hostingMachineConfigurations(input: { provider: cloud_run }) {\n      __typename\n      ... on HostingMachineConfigurationsResults {\n        results {\n          ...MachineConfiguration\n        }\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return rH=function(){return e},e}var rV={},rz=(0,K.Ps)(rH(),rW.bN),rj=n(12874),rq=n(73524),rY=function(e){var t,n,r=(0,Z.kW)(),i=(0,Z.hn)(),o=(0,Z.$y)(),a=void 0!==(0,Z.pn)(),l=!a&&"string"!=typeof i,c=(0,rD.Dv)(rm.aH),s=(0,rD.Dv)(rm.sA),u=(0,rD.Dv)(rx),d=(t=(0,U._)({},rV,{onCompleted:function(t){"HostingMachineConfigurationsResults"!==t.hostingMachineConfigurations.__typename&&e.onError("Something went wrong")},onError:function(t){return e.onError(t.message)}}),Q.a(rz,t)),f=d.data,p=d.loading,w=(null==f?void 0:f.hostingMachineConfigurations.__typename)==="HostingMachineConfigurationsResults"?f.hostingMachineConfigurations.results:null;m.useEffect(function(){eQ({context:B.k.AutoscaleMachineConfiguration})},[]);var x=(n=(0,y._)(function(){var t,n,r,i;return(0,b.Jh)(this,function(o){return(t=null==w?void 0:w.find(function(e){var t=e.vcpu,n=e.memory;return c.toString()===t&&s.toString()===n}))?(n=t.id,r=t.label,i=t.slug,e.onConfirm({configurationId:n,configurationLabel:r,configurationSlug:i,maxInstances:u})):e.onError("An error occurred trying to validate selected machine configuration"),[2]})}),function(){return n.apply(this,arguments)}),C=p||e.fetching||a||r!==e6.z.Ready;return(0,h.BX)(h.HY,{children:[(0,h.tZ)(W,{maxWidth:!0,children:(0,h.tZ)(tx,{onBack:e.onBack})}),(0,h.tZ)(W,{maxWidth:!0,children:(0,h.BX)(v.G,{css:g.l0.colWithGap(16),children:[(0,h.BX)(v.G,{css:g.l0.colWithGap(4),children:[(0,h.tZ)(V.xv,{variant:"subheadBig",children:"Autoscale machine configuration"}),(0,h.tZ)(V.xv,{variant:"small",color:"dimmer",children:"Autoscale apps spin up enough machines to meet demand at any point in time. You are billed for the total number of compute units across all machines."})]}),(0,h.BX)(v.G,{css:g.l0.colWithGap(16),children:[(0,h.tZ)(rp.Z,{machineConfiguration:null==o?void 0:o.machineConfiguration,disabled:C}),(0,h.tZ)(rF,{maxMachineInstances:null==o?void 0:o.maxMachineInstances,disabled:C,onError:e.onError})]}),(0,h.BX)(v.G,{css:[g.l0.colWithGap(8),g.l0.pt(8)],children:[(0,h.tZ)(D.zx,{colorway:"primary",text:l?"Approve and configure build settings":"Approve and update",iconRight:(0,h.tZ)(rj.Z,{}),onClick:x,loading:p}),(0,h.BX)(V.xv,{color:"dimmest",children:["Your deployed app will utilize any available monthly free allotment before charging for additional resource usage."," ",(0,h.tZ)("a",{href:rq.TT.ABOUT_USAGE_BASED_BILLING,target:"_blank",rel:"noopener",children:"Learn more"})]})]})]})})]})},r$=n(68866),rJ=n(71411),rK=n(14819),rQ=n(56335),r0=n(27187),r1=n(70315),r2=n(52682),r8=(0,C.X)({container:g.l0.colWithGap(24),pauseAndResumeButtons:g.l0.colWithGap(8),sectionContainer:g.l0.colWithGap(8),sectionButton:[g.l0.color.accentNegativeStrongest,g.l0.transition.snappy,(0,H._)({backgroundColor:I.vb.interactiveBackground,borderColor:"transparent"},g.wl.hover,{borderColor:"transparent"})]}),r4=function(e){var t=e.hideResume,n=e.hideSuspend,r=e.onLifecycleCommand,i=(0,Z.kW)(),o=(0,Z.$y)(),a=(0,f._)(m.useState(!1),2),l=a[0],c=a[1],s=(0,w.Z)(),u=(0,Z.FN)(s),d=(null==o?void 0:o.status)===R.Fe.Resuming,p=(null==o?void 0:o.status)===R.Fe.Suspending,g=(null==o?void 0:o.status)===R.Fe.Suspended,y=d||p||i===e6.z.ProcessingLifecycleCommand||i===e6.z.Deploying,b=!(void 0!==t&&t)&&u&&(g||d)&&(null==o?void 0:o.hasImageTag),x=!(void 0!==n&&n)&&!g&&!d&&(p||i===e6.z.Deploying||i===e6.z.Ready)&&(null==o?void 0:o.hasImageTag);return(0,h.tZ)(h.HY,{children:(0,h.BX)(v.G,{css:r8.container,children:[b||x?(0,h.BX)(v.G,{css:r8.pauseAndResumeButtons,children:[b?(0,h.BX)(h.HY,{children:[(0,h.tZ)(D.zx,{text:d?"Resuming":"Resume",onClick:function(){return r({command:R.Qc.Resume})},loading:d,disabled:y,iconLeft:d?(0,h.tZ)(tv.Z,{}):(0,h.tZ)(r0.Z,{})}),(0,h.tZ)(V.xv,{color:"dimmer",children:"Your app will become accessible to users again"})]}):null,x?(0,h.BX)(h.HY,{children:[(0,h.tZ)(D.zx,{text:"Pause",onClick:function(){return r({command:R.Qc.Suspend})},loading:p,disabled:y,iconLeft:p?(0,h.tZ)(tv.Z,{}):(0,h.tZ)(rQ.Z,{})}),(0,h.tZ)(V.xv,{color:"dimmer",children:"Your deployment billing will continue, but all users will lose access to your app"})]}):null]}):null,(0,h.tZ)(r3,{setIsDestroying:c,onLifecycleCommand:r}),(0,h.tZ)(r5,{isDestroying:l,setIsDestroying:c,onLifecycleCommand:r})]})})};function r3(e){var t=e.setIsDestroying,n=e.onLifecycleCommand,r=(0,f._)(m.useState(!1),2),i=r[0],o=r[1];return(0,h.BX)(h.HY,{children:[(0,h.BX)(v.G,{css:r8.sectionContainer,children:[(0,h.tZ)(D.zx,{text:"Change deployment type",onClick:function(){return o(!0)},iconLeft:(0,h.tZ)(r1.Z,{})}),(0,h.tZ)(V.xv,{color:"dimmer",children:"To change your deployment type, you will need to shut down and create a new deployment."})]}),(0,h.tZ)(nA.u,{isOpen:i,onRequestClose:function(){return o(!1)},children:(0,h.tZ)(rK.Z,{confirmLabel:"Yes, delete my deployment",title:"Change Deployment Type",isDestructive:!0,onConfirm:function(){t(!0),o(!1),n({command:R.Qc.Destroy})},onCancel:function(){return o(!1)},children:"To change your deployment type, you will need to shut down and create a new deployment. This will destroy your deployment and any associated deployment tiers, saved replit.app domain and deployment history. You can always come back and redeploy your repl again."})})]})}function r5(e){var t=e.isDestroying,n=e.setIsDestroying,r=e.onLifecycleCommand,i=(0,f._)(m.useState(!1),2),o=i[0],a=i[1];return(0,h.BX)(h.HY,{children:[(0,h.BX)(v.G,{css:r8.sectionContainer,children:[(0,h.tZ)(D.zx,{text:"Shut down",colorway:"negative",variant:"outlined",css:r8.sectionButton,onClick:function(){return a(!0)},disabled:t,iconLeft:(0,h.tZ)(r2.Z,{})}),(0,h.tZ)(V.xv,{color:"dimmer",children:"Your deployment billing will be canceled, and your deployed app will cease to exist"})]}),(0,h.tZ)(nA.u,{isOpen:o,onRequestClose:function(){return a(!1)},children:(0,h.tZ)(rK.Z,{confirmLabel:"Yes, delete my deployment",title:"Delete Deployment",isDestructive:!0,onConfirm:function(){n(!0),a(!1),r({command:R.Qc.Destroy})},onCancel:function(){return a(!1)},children:"This will destroy your deployment and any associated deployment tiers, saved replit.app domain and deployment history. You can always come back and redeploy your repl again."})})]})}var r6=function(e){var t=e.onBack,n=e.onCheckout,r=e.onLifecycleCommand,i=(0,Z.hn)(),o=!(void 0!==(0,Z.pn)())&&"string"!=typeof i,a=(0,w.Z)(),l=(0,Z.FN)(a),c=(0,f._)(m.useState(!1),2),s=c[0],u=c[1],d=(0,rJ.P)({step:"not_shown"});return(m.useEffect(function(){eQ({context:"tier_selection"})},[]),m.useEffect(function(){if("checkout_success"===d.currentStep.step){u(!0);return}"not_shown"===d.currentStep.step&&d.goTo({step:"power_up_details",powerUpCategory:"hosting_tier"})},[d]),"not_shown"===d.currentStep.step)?(0,h.tZ)(h.HY,{}):(0,h.tZ)(W,{children:(0,h.BX)(v.G,{css:[g.l0.colWithGap(16),M.Qw.maxWidth],children:[l&&o?null:(0,h.tZ)(r$.s,(0,L._)((0,U._)({},d),{analyticsContext:"workspace_hosting_pane",goBack:function(){if("checkout_success"===d.currentStep.step){n();return}if("power_up_details"!==d.currentStep.step){d.goBack();return}t()}})),s?(0,h.tZ)(D.zx,{colorway:o?"primary":void 0,onClick:n,text:o?"Deploy your project":"Back to deployment"}):null,l&&o?(0,h.BX)(h.HY,{children:[(0,h.BX)(v.G,{css:[g.l0.rowWithGap(8),g.l0.align.center],children:[(0,h.tZ)(eT.hU,{alt:"Back",onClick:t,children:(0,h.tZ)(tg.Z,{})}),(0,h.tZ)(x.E,{colorway:"warning",icon:(0,h.tZ)(T.Z,{}),text:"To upgrade hosting tier, please deploy your repl first."})]}),(0,h.tZ)(r4,{hideResume:!0,hideSuspend:!0,onLifecycleCommand:r})]}):null]})})},r9=n(40664),r7=n(2038);function ie(){var e=(0,J._)(["\n  query ReservedVMMachineConfigurations {\n    hostingMachineConfigurations(input: { provider: gce }) {\n      __typename\n      ... on HostingMachineConfigurationsResults {\n        results {\n          ...MachineConfiguration\n        }\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return ie=function(){return e},e}var it={},ir=(0,K.Ps)(ie(),rW.bN),ii=(0,C.X)({header:[g.l0.colWithGap(4),g.l0.mb(16)],costWrapper:[g.l0.rowWithGap(2),g.l0.align.center,g.l0.flex.shrink(1)],cost:[g.l0.rowWithGap(4),g.l0.align.baseline],selectWrapper:g.l0.rowWithGap(12),selectInner:[g.l0.flex.growAndShrink(1)],select:[g.l0.border({color:tV.TV.outlineDefault}),{flex:"1 1 auto"}]}),io=function(e){var t,n=e.initialMachineConfiguration,r=e.isTeamRepl,i=e.onChange,o=e.onConfirm,a=e.onError,l=e.onBack,c=(0,f._)(m.useState(n?(0,L._)((0,U._)({},n),{maxInstances:1}):void 0),2),s=c[0],u=c[1],d=(0,f._)((0,ta.gr)(null==s?void 0:s.configurationSlug),2),p=d[0],y=d[1],b=(0,f._)(m.useState(!1),2),Z=b[0],w=b[1],x=(t=(0,U._)({},it,{onCompleted:function(e){"HostingMachineConfigurationsResults"!==e.hostingMachineConfigurations.__typename&&a("Something went wrong")},onError:function(e){return a(e.message)}}),Q.a(ir,t)),C=x.data,_=x.loading,S=(null==C?void 0:C.hostingMachineConfigurations.__typename)==="HostingMachineConfigurationsResults"?C.hostingMachineConfigurations.results:null;m.useEffect(function(){eQ({context:B.k.AutoscaleMachineConfiguration})},[]),m.useEffect(function(){if(S&&!s){var e=r?S.find(function(e){return"e2-micro"===e.slug}):S.find(function(e){return"e2-small"===e.slug});if(!e){a("An error occurred trying to validate default machine configuration");return}var t={configurationId:e.id,configurationLabel:e.label,configurationSlug:e.slug,maxInstances:1};u(t),"function"==typeof i&&i(t)}},[S,s,r,i,a]);var E=S&&(null==S?void 0:S.length)>0,k=_||r||Z||!E;return(0,h.BX)(h.HY,{children:[(0,h.tZ)(W,{maxWidth:!0,children:(0,h.tZ)(tx,{onBack:l})}),(0,h.BX)(W,{maxWidth:!0,children:[(0,h.BX)(v.G,{css:ii.header,children:[(0,h.tZ)(V.xv,{variant:"subheadBig",children:"Reserved VM configuration"}),(0,h.tZ)(V.xv,{variant:"small",color:"dimmer",children:"Reserved VM apps are always on and can have a dedicated machine. You are billed for the total number of hours your machines have been running for. The cost per hour changes depending on your machine configuration."})]}),(0,h.tZ)(nB,{id:"machineConfiguration",title:"Machine Configuration",information:"The build command is the command-line statement that compiles your app at build time.",children:s?(0,h.BX)(h.HY,{children:[(0,h.tZ)(v.G,{css:ii.selectWrapper,children:r?(0,h.tZ)(nb.II,{value:s.configurationLabel,disabled:!0}):(0,h.BX)(h.HY,{children:[(0,h.tZ)(v.G,{css:ii.selectInner,children:(0,h.tZ)(nU.P,{css:ii.select,initialSelectedItem:{id:s.configurationId,title:s.configurationLabel},items:E?Object.values(S).map(function(e){var t=e.id;return{title:e.label,id:t}}):[],onChange:function(e){var t=e.id,n=null==S?void 0:S.find(function(e){return e.id===t});if(!n){a("An error occurred trying to validate selected machine configuration");return}var r={configurationId:n.id,configurationLabel:n.label,configurationSlug:n.slug,maxInstances:1};u(r),"function"==typeof i&&i(r)},disabled:k})}),(0,h.tZ)(v.G,{css:ii.costWrapper,children:(0,h.BX)(v.G,{css:ii.cost,children:[(0,h.BX)(V.xv,{variant:"subheadDefault",multiline:!1,children:["$",y]}),(0,h.tZ)(V.xv,{color:"dimmer",variant:"small",multiline:!1,children:"per month"}),(0,h.BX)(V.xv,{color:"dimmer",variant:"small",multiline:!1,children:["($",p,"/hour)"]})]})})]})}),"function"==typeof o?(0,h.BX)(v.G,{css:[g.l0.colWithGap(8),g.l0.pt(8)],children:[(0,h.tZ)(D.zx,{colorway:"primary",text:"Approve and update",iconRight:(0,h.tZ)(rj.Z,{}),onClick:function(){if(!s){a("An error occurred trying to validate selected machine configuration");return}w(!0),o(s)},loading:_,disabled:k}),(0,h.BX)(V.xv,{color:"dimmest",children:["Your deployed app will incur charges for any resource usage."," ",(0,h.tZ)("a",{href:rq.TT.ABOUT_USAGE_BASED_BILLING,target:"_blank",rel:"noopener",children:"Learn more"})]})]}):null]}):(0,h.tZ)(v.G,{css:[$.p.foregroundPulse(),g.l0.borderRadius(8)],children:(0,h.tZ)(nb.II,{disabled:!0})})})]})]})},ia=n(96503),il=n(33580),ic=(0,C.X)({deployOptionsWithCurrentBuild:[g.l0.p(16),g.l0.pt(12),g.l0.borderRadius(8),g.l0.border({color:g.TV.outlineDimmest})],back:[g.l0.pb(8),g.l0.flex.growAndShrink(1)],subViewOuter:[g.l0.rowWithGap(12)],subView:[g.l0.pb(12),g.l0.flex.growAndShrink(1),g.l0.colWithGap(12)],deploymentInfoWrapper:[g.l0.rowWithGap(12),{':has( + [data-history-timeline-items="1"])':{"[data-timeline-line]":{display:"none"}}}],deploymentInfo:[g.l0.pb(16),g.l0.flex.growAndShrink(1),g.l0.colWithGap(12)]}),is=function(e){var t=e.view,n=e.onViewAction,r=e.onError,i=e.openFile,o=e.onLifecycleCommand,a=e.refetch,l=(0,Z.kW)(),c=(0,Z.hn)(),s=(0,Z.$y)(),u=(0,Z.pn)(),d=(0,Z.XZ)(),p=(0,r7.rv)(),g=(0,to.P5)({controlName:ta.dD,logFlagToAnalytics:!1}),y=void 0!==s,b=(0,w.Z)(),C=(0,Z.FN)(b),_=(0,Z.l9)(b),S=null==s?void 0:s.provider,E=y&&s.machineConfiguration?{configurationId:s.machineConfiguration.id,configurationLabel:s.machineConfiguration.label,configurationSlug:s.machineConfiguration.slug,maxInstances:null==s?void 0:s.maxMachineInstances}:void 0,k=(0,r9.Z)("deployments-pane","deployments-mobile-download"),T=k.shouldDisplay,D=k.dismiss,I=k.register,G=(0,ia.q)(),A=G.loading,P=(0,O._)(G,["loading"]);(0,m.useEffect)(function(){I()},[I]);var N=(null==s?void 0:s.status)&&s.status===R.Fe.Success&&T&&!p,U=(0,f._)((0,m.useState)(!1),2),L=U[0],M=U[1],X=S===R.r4.Gce&&y&&!g&&!C,F=l===e6.z.Ready||l===e6.z.Suspended,H=(0,f._)((0,m.useState)(null),2),V=H[0],z=H[1],j=(0,f._)((0,m.useState)(null),2),q=j[0],Y=j[1];m.useEffect(function(){eQ({context:B.k.Deployment})},[]),m.useEffect(function(){(l===e6.z.Preparing||l===e6.z.Deploying)&&(t===B.k.DeploymentInProgress||V||n({type:B.a.ChangeView,payload:{view:B.k.DeploymentInProgress}}))},[l,t,n,V]);var $=m.useRef(void 0);m.useEffect(function(){$.current=null==u?void 0:u.id},[null==u?void 0:u.id]);var J=(null==s?void 0:s.status)===R.Fe.Success,K=(null==s?void 0:s.id)===$.current;m.useEffect(function(){J&&K&&n({type:B.a.ChangeView,payload:{view:B.k.Deployment}})},[J,K,n]);var Q=null==u?void 0:u.status,ee=(0,m.useRef)(Q);(0,m.useEffect)(function(){Q&&(ee.current=Q)},[Q]);var et=(0,Z.v5)();if(V)return(0,h.tZ)(ri,{build:V,fs:d,openFile:i,onBack:function(){z(null)},onViewAppLogs:function(){n({type:B.a.ChangeView,payload:{view:B.k.Logs}})}});if(q===R.r4.CloudRun)return(0,h.tZ)(rY,{onError:r,onConfirm:function(e){n({type:B.a.SendDeploymentLifecycleCommand,payload:{command:R.Qc.UpdateMachineConfiguration,machineConfigurationId:e.configurationId,maxMachineInstances:e.maxInstances}})},onBack:function(){return Y(null)}});if(q===R.r4.Gce)return g?(0,h.tZ)(io,{isTeamRepl:_,initialMachineConfiguration:E,onConfirm:function(e){n({type:B.a.SendDeploymentLifecycleCommand,payload:{command:R.Qc.UpdateMachineConfiguration,machineConfigurationId:e.configurationId,maxMachineInstances:e.maxInstances}})},onBack:function(){return Y(null)},onError:r}):(0,h.tZ)(r6,{onLifecycleCommand:o,onCheckout:function(){a(),Y(null)},onBack:function(){Y(null)}});var en=X||!y||!c;return(0,h.BX)(h.HY,{children:[g&&!A&&P.hasReservedVMs?(0,h.tZ)(W,{children:(0,h.tZ)(il.Z,{})}):null,(0,h.tZ)(W,{children:(0,h.BX)(v.G,{children:[(0,h.BX)(v.G,{css:ic.subViewOuter,children:[y?(0,h.tZ)(n9,{type:"future"}):null,(0,h.BX)(v.G,{css:ic.subView,children:[!en&&F?(0,h.tZ)(nY,{dotReplit:et,fs:d,deploymentId:c,onError:r,expanded:L,setExpanded:M,shouldShowMobileTour:null!=N&&N,onDismissMobileTour:D}):null,t===B.k.DeploymentInProgress?(0,h.tZ)(t7,{openFile:i,viewBuildLogsOnLoad:!y,onViewLogs:function(){n({type:B.a.ChangeView,payload:{view:B.k.Logs}})},onCanceled:function(){n({type:B.a.ChangeView,payload:{view:B.k.Deployment}}),r("Build cancelled")},onError:r}):null]})]}),y?(0,h.BX)(h.HY,{children:[(0,h.tZ)(n7,{type:"failureQueue",onViewBuildLogs:z}),(0,h.BX)(v.G,{css:ic.deploymentInfoWrapper,children:[(0,h.tZ)(n9,{type:"present"}),(0,h.BX)(v.G,{css:ic.deploymentInfo,children:[(0,h.tZ)(th,{provider:S,machine:E,onViewBuildLogs:z,onManageClick:function(){if(S===R.r4.CloudRun||S===R.r4.Gce){Y(S);return}S===R.r4.Static&&n({type:B.a.ChangeView,payload:{view:B.k.Settings}})}}),X?(0,h.tZ)(x.E,{colorway:"warning",icon:(0,h.tZ)(tp.Z,{}),text:"Your deployment requires a tier in order to re-deploy"}):null]})]}),(0,h.tZ)(n7,{onViewBuildLogs:z})]}):null]})})]})},iu=n(66587),id=n(55330),ih=n(52932),ip=n(4513),im=n(81340),iv=n(97764),ig=n(76566),iy=n(59811),ib=n(50946),iZ=n(96239),iw=n(4773),ix=n(40028),iC=n(70078),i_=n(87001),iS=n(16560),iE=function(){var e=(0,Z.gg)(),t=e.isDeployableRepl,n=e.reason;return t?null:(0,h.tZ)(x.E,{colorway:"warning",text:n})};function ik(){var e=(0,J._)(["\n  fragment DeploymentsNewDeploymentRepl on Repl {\n    id\n    slug\n    owner {\n      ... on User {\n        id\n        username\n      }\n      ... on Team {\n        id\n        username\n      }\n    }\n    powerUps {\n      ... on ReplPowerUpTypes {\n        hostingTier {\n          sku\n        }\n      }\n    }\n  }\n"]);return ik=function(){return e},e}function iT(){var e=(0,J._)(["\n  query DeploymentsNewDeployment($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        ...DeploymentsNewDeploymentRepl\n      }\n    }\n  }\n  ","\n"]);return iT=function(){return e},e}var iR={},iD=(0,K.Ps)(ik()),iI=(0,K.Ps)(iT(),iD);function iG(){var e=(0,J._)(["\n  query DeploymentsPaneIntro($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        owner {\n          __typename\n          ... on Team {\n            id\n          }\n        }\n        hostingDeploymentPermissions {\n          canDeployReservedVm {\n            isDeployable\n            explanation\n          }\n          canDeployAutoscale {\n            isDeployable\n            explanation\n          }\n          canDeployStatic {\n            isDeployable\n            deploymentCount\n            limit\n            explanation\n          }\n        }\n        ...DeploymentsNewDeploymentRepl\n      }\n    }\n    currentUser {\n      id\n      userSubscriptionType\n      usageBasedBilling(input: { capabilitiesOnly: true }) {\n        __typename\n        ... on UserUsageBasedBillingSummary {\n          capabilities {\n            canUseUsageBasedBilling\n            explanation\n            hasPaymentMethod\n          }\n        }\n        ... on ServiceUnavailable {\n          message\n        }\n        ... on UnauthorizedError {\n          message\n        }\n        ... on UserError {\n          message\n        }\n      }\n    }\n  }\n  ","\n"]);return iG=function(){return e},e}var iB={},iA=(0,K.Ps)(iG(),iD),iP=(0,C.X)({type:[g.l0.borderRadius(8),g.l0.p(8)],hostingTierFlow:g.l0.colWithGap(8),manageReserved:g.l0.colWithGap(16),manageReservedHeader:[g.l0.rowWithGap(8),g.l0.align.center]});function iN(e){var t,n,r,i=e.replId,o=e.initialState,a=e.fs,l=e.dotReplit,c=e.onBack,s=e.onDeploy,u=e.onError,d=e.onLifecycleCommand,p=(0,f._)((0,m.useState)(o),2),g=p[0],y=p[1],b=(t=(0,U._)({},iR,{variables:{replId:i},onError:function(e){return u(e.message)}}),Q.a(iI,t)),Z=b.data,w=b.loading,C=b.refetch,_=(null==Z?void 0:Z.repl.__typename)==="Repl"?Z.repl:null,S=_?(0,nv.Jw)({replSlug:_.slug,username:null===(n=_.owner)||void 0===n?void 0:n.username}):"",E=(null==_?void 0:_.powerUps.__typename)==="ReplPowerUpTypes"?_.powerUps.hostingTier:null,k=(0,to.P5)({controlName:ta.dD,logFlagToAnalytics:!1}),D=(0,to.P5)({controlName:ta.dA,logFlagToAnalytics:!1});if(w)return(0,h.tZ)(ty,{loading:!0});if(!_)return null;var I=(null==_?void 0:null===(r=_.owner)||void 0===r?void 0:r.__typename)==="Team";return g.type===R.r4.Static?(0,h.BX)(h.HY,{children:[(0,h.tZ)(W,{maxWidth:!0,children:(0,h.tZ)(eT.hU,{alt:"Back",tooltipHidden:!0,onClick:function(){return c()},children:(0,h.tZ)(tg.Z,{})})}),(0,h.tZ)(W,{maxWidth:!0,children:(0,h.tZ)(G.Tg,{css:iP.type,elevated:!0,children:(0,h.tZ)(tf,{label:"Type",fullWidth:!0,children:(0,h.tZ)(td,{name:e9[g.type]})})})}),(0,h.tZ)(W,{maxWidth:!0,children:(0,h.tZ)(nM,{initialSubdomain:S,deploymentId:null,provider:g.type,onError:u,onCancel:function(){return c()},onDeploy:s,fs:a,dotReplit:l})})]}):g.type===R.r4.Gce?E&&g.didCheckout?g.manage?(0,h.tZ)(W,{maxWidth:!0,children:(0,h.BX)(v.G,{css:iP.manageReserved,children:[(0,h.BX)(v.G,{css:iP.manageReservedHeader,children:[(0,h.tZ)(eT.hU,{alt:"Back",onClick:function(){return y({type:g.type,didCheckout:g.didCheckout,manage:!1})},children:(0,h.tZ)(tg.Z,{})}),(0,h.tZ)(x.E,{colorway:"warning",icon:(0,h.tZ)(T.Z,{}),text:"To upgrade hosting tier, please deploy your repl first."})]}),(0,h.tZ)(r4,{hideResume:!0,hideSuspend:!0,onLifecycleCommand:d})]})}):(0,h.BX)(h.HY,{children:[(0,h.tZ)(W,{maxWidth:!0,children:(0,h.tZ)(G.Tg,{css:iP.type,elevated:!0,children:(0,h.tZ)(tf,{label:"Type",fullWidth:!0,children:(0,h.tZ)(td,{name:e9[g.type],sku:(0,e5.$)(E.sku),canManage:!0,onManageClick:function(){y({type:g.type,didCheckout:g.didCheckout,manage:!0})}})})})}),(0,h.tZ)(W,{maxWidth:!0,children:(0,h.tZ)(nM,{initialSubdomain:S,deploymentId:null,provider:g.type,onError:u,onCancel:function(){return c()},onDeploy:s,fs:a,dotReplit:l})})]}):!E&&k?(0,h.BX)(h.HY,{children:[(0,h.tZ)(io,{isTeamRepl:I,onBack:c,onError:u,onChange:function(e){y({type:R.r4.Gce,machine:e})}}),(0,h.tZ)(W,{maxWidth:!0,children:(0,h.tZ)(nM,{initialSubdomain:S,deploymentId:null,provider:g.type,machine:g.machine,onError:u,onCancel:c,onDeploy:s,fs:a,dotReplit:l})}),(0,h.tZ)(W,{maxWidth:!0,children:(0,h.BX)(V.xv,{color:"dimmest",children:["Your deployed app will incur charges for any resource usage."," ",(0,h.tZ)("a",{href:rq.TT.ABOUT_USAGE_BASED_BILLING,target:"_blank",rel:"noopener",children:"Learn more"})]})})]}):(0,h.tZ)(W,{maxWidth:!0,children:(0,h.tZ)(iU,{onBack:c,onCheckout:function(){y({type:g.type,didCheckout:!0,manage:!1}),C()}})}):g.type===R.r4.Cron?D?(0,h.BX)(h.HY,{children:[(0,h.tZ)(W,{maxWidth:!0,children:(0,h.tZ)(eT.hU,{alt:"Back",tooltipHidden:!0,onClick:function(){return c()},children:(0,h.tZ)(tg.Z,{})})}),(0,h.tZ)(W,{maxWidth:!0,children:(0,h.tZ)(G.Tg,{css:iP.type,elevated:!0,children:(0,h.tZ)(tf,{label:"Type",fullWidth:!0,children:(0,h.tZ)(td,{name:e9[g.type]})})})}),(0,h.tZ)(W,{maxWidth:!0,children:(0,h.tZ)(nM,{initialSubdomain:S,deploymentId:null,provider:g.type,onError:u,onCancel:function(){return c()},onDeploy:s,fs:a,dotReplit:l})})]}):null:g.machine?(0,h.BX)(h.HY,{children:[(0,h.tZ)(W,{maxWidth:!0,children:(0,h.tZ)(eT.hU,{alt:"Back",tooltipHidden:!0,onClick:function(){return y({type:R.r4.CloudRun,machine:null})},children:(0,h.tZ)(tg.Z,{})})}),(0,h.tZ)(W,{maxWidth:!0,children:(0,h.tZ)(G.Tg,{css:iP.type,elevated:!0,children:(0,h.tZ)(tf,{label:"Type",fullWidth:!0,children:(0,h.tZ)(td,{name:e9[g.type],sku:"".concat(g.machine.configurationLabel," / ").concat(g.machine.maxInstances," Max"),canManage:!0,onManageClick:function(){y({type:R.r4.CloudRun,machine:null})}})})})}),(0,h.tZ)(W,{maxWidth:!0,children:(0,h.tZ)(nM,{initialSubdomain:S,deploymentId:null,provider:g.type,machine:g.machine,onError:u,onCancel:function(){return y({type:R.r4.CloudRun})},onDeploy:s,fs:a,dotReplit:l})})]}):(0,h.tZ)(W,{maxWidth:!0,children:(0,h.tZ)(rY,{onBack:c,onError:u,onConfirm:function(e){y({type:R.r4.CloudRun,machine:e})}})})}var iU=function(e){var t=e.onBack,n=e.onCheckout,r=(0,w.Z)(),i=(0,Z.Sl)(r),o=i.hostingTier,a=i.refetch,l=(0,rJ.P)({step:"power_up_details",powerUpCategory:"hosting_tier"}),c=l.currentStep.step;return(0,m.useEffect)(function(){"checkout_success"===c&&a()},[c,a]),(0,h.BX)(v.G,{css:iP.hostingTierFlow,children:[(0,h.tZ)(r$.s,{currentStep:l.currentStep,canGoBack:l.canGoBack||"power_up_details"===c,goTo:l.goTo,analyticsContext:"workspace_hosting_pane",goBack:function(){if("checkout_success"===l.currentStep.step){n();return}if("power_up_details"!==l.currentStep.step){l.goBack();return}t()}}),o?(0,h.tZ)(D.zx,{colorway:"primary",onClick:n,text:"Deploy your project"}):null]})},iL=n(93302);function iO(){var e=(0,J._)(["\n  query IntroAutoscaleAllotmentUsage {\n    currentUser {\n      id\n      usageInterval {\n        __typename\n        ... on UsageInterval {\n          resources {\n            autoscaleComputeUnits {\n              allotment\n              usage\n            }\n          }\n        }\n        ... on ServiceUnavailable {\n          message\n        }\n        ... on UnauthorizedError {\n          message\n        }\n        ... on UserError {\n          message\n        }\n      }\n    }\n  }\n"]);return iO=function(){return e},e}var iM={},iX=(0,K.Ps)(iO());function iF(){var e,t,n,r=(e=(0,U._)({},iM,void 0),Q.a(iX,e)),i=r.data,o=r.loading,a=m.useMemo(function(){var e,t=null==i?void 0:null===(e=i.currentUser)||void 0===e?void 0:e.usageInterval;if(t&&"UsageInterval"===t.__typename){var n=Math.max(0,t.resources.autoscaleComputeUnits.allotment-t.resources.autoscaleComputeUnits.usage);if(void 0===n||0===n)return"You you will be charged by usage of compute units";var r=(0,iL.fZ)(n,{resourceUsageType:"ComputeUnits"});return"You have ".concat(r," left this month")}},[i]);return o?(0,h.tZ)(V.xv,{color:"dimmest",children:"Loading data on your Autoscale usage..."}):(null==i?void 0:null===(n=i.currentUser)||void 0===n?void 0:null===(t=n.usageInterval)||void 0===t?void 0:t.__typename)!=="UsageInterval"?null:(0,h.tZ)(V.xv,{color:"dimmer",children:a})}var iW=g.nC.min(440),iH={order:"--provider-order"},iV={order:"var(".concat(iH.order,")")},iz=(0,ed.iv)([g.l0.reset.button,g.l0.overflow("hidden"),g.l0.position.relative,g.l0.focusRing,g.l0.borderRadius(8),g.l0.flex.growAndShrink(1),g.l0.width("100%")]),ij=(0,C.X)({loading:[iz,$.p.foregroundPulse(),g.l0.border({color:g.TV.backgroundHighest})],self:[iz,I.gU.filledAndOutlined,g.l0.border({color:g.TV.outlineDimmer}),(c={},(0,H._)(c,iW,{order:iV.order}),(0,H._)(c,"&::after",{content:"none"}),c)],selfActive:[iz,g.l0.cursor.pointer,g.l0.backgroundColor.accentPrimaryDimmest,g.l0.border({color:g.TV.accentPrimaryStronger}),(s={},(0,H._)(s,iW,{order:iV.order}),(0,H._)(s,"&::after",{content:"none"}),s)],content:[g.l0.p(8),g.l0.colWithGap(4),(0,H._)({},iW,g.l0.py(12))],contentRecommended:[g.l0.p(8),g.l0.colWithGap(4),(0,H._)({},iW,{paddingTop:12,paddingBottom:20})],recommended:[g.l0.py(4),g.l0.backgroundColor.backgroundHighest],recommendedActive:[g.l0.py(4),g.l0.backgroundColor.accentPrimaryDimmer],icon:[g.l0.display.none,g.l0.color.foregroundDimmer,g.l0.center,(0,H._)({},iW,g.l0.display.flex)],iconActive:[g.l0.display.none,g.l0.color.accentPrimaryStrongest,g.l0.center,(0,H._)({},iW,g.l0.display.flex)],tiersTitle:[g.l0.rowWithGap(8),g.l0.align.center]});function iq(e){var t,n,r,i,o=e.loading,a=e.active,l=e.provider,c=e.onClick,s=e.title,u=e.description,d=e.recommended,f=e.index,p=(i={},(0,H._)(i,R.r4.CloudRun,(0,h.tZ)(iy.Z,{size:32})),(0,H._)(i,R.r4.Gce,(0,h.tZ)(rO.Z,{size:32})),(0,H._)(i,R.r4.Static,(0,h.tZ)(iZ.Z,{size:32})),(0,H._)(i,R.r4.Cron,(0,h.tZ)(tj.Z,{size:32})),i)[l];return(0,h.BX)("button",{css:(n=(t={loading:o,active:a}).loading,r=t.active,n?ij.loading:r?ij.selfActive:ij.self),onClick:function(){return c(l)},disabled:o,style:(0,H._)({},iH.order,f),children:[d?(0,h.tZ)(v.G,{css:a?ij.recommendedActive:ij.recommended,children:(0,h.tZ)(V.xv,{variant:"small",children:"Recommended"})}):null,(0,h.BX)(v.G,{css:d?ij.contentRecommended:ij.content,children:[(0,h.tZ)(v.G,{css:a?ij.iconActive:ij.icon,children:p}),(0,h.BX)(v.G,{children:[(0,h.tZ)(v.G,{css:[g.l0.rowWithGap(4),g.l0.center],children:(0,h.tZ)(V.xv,{variant:"subheadDefault",multiline:!1,children:s})}),(0,h.tZ)(V.xv,{multiline:!1,variant:"small",children:u})]})]})]})}var iY=(0,C.X)({container:[g.l0.colWithGap(12),g.l0.maxWidth(400),{marginLeft:"auto",marginRight:"auto"}],item:[g.l0.align.center,{display:"grid",gridTemplateColumns:"56px auto",gap:20}],text:[g.l0.flex.growAndShrink(1),g.l0.textAlign.left],autoscaleHours:{}});function i$(e){var t=e.header,n=e.info;return(0,h.BX)(v.G,{css:iY.container,children:[(0,h.tZ)(V.xv,{variant:"subheadDefault",children:t}),n.map(function(e,t){return(0,h.BX)(v.G,{css:iY.item,children:[e.icon,(0,h.tZ)(V.xv,{css:iY.text,children:e.text})]},t)})]})}var iJ=[R.r4.Gce,R.r4.CloudRun,R.r4.Static,R.r4.Cron],iK=(0,C.X)({container:[g.l0.colWithGap(32),g.l0.py(32),g.l0.textAlign.center,M.Qw.maxWidth],title:[g.l0.colWithGap(4),g.l0.width("100%"),g.l0.maxWidth(288),{marginLeft:"auto",marginRight:"auto"}],providers:[g.l0.flex.column,g.l0.align.stretch,(0,H._)({gap:8},iW,[g.l0.flex.row,g.l0.align.center,{gap:12}])],cta:[g.l0.width("100%"),g.l0.maxWidth(320),{marginLeft:"auto",marginRight:"auto"}],secondaryCta:[g.l0.width("100%"),g.l0.maxWidth(320)],ctaContainer:[g.l0.colWithGap(8),g.l0.align.center],ctaStatusBanner:[g.l0.textAlign.left],oldCta:[g.l0.px(8),g.l0.colWithGap(16)],payment:[g.l0.p(16),g.l0.borderRadius(12),g.l0.textAlign.left,g.l0.shadow(2)],budgetContainer:[g.l0.colWithGap(8),g.l0.border(),g.l0.borderRadius(8),g.l0.p(8)],disabledBanner:[g.l0.py(6),{alignSelf:"center"}]}),iQ=function(e){var t,n,r,i,o,a,l,c=e.replId,s=e.onError,u=e.onDeploy,d=e.onLifecycleCommand,p=e.initialSelectedProvider,w=(0,Z.FN)(c),x=(0,Z.gg)().isDeployableRepl,C=(0,Z.XZ)(),_=(0,Z.v5)(),S=(0,f._)(m.useState(void 0),2),E=S[0],k=S[1],T=(0,f._)(m.useState(void 0),2),D=T[0],I=T[1],B=(0,f._)(m.useState(!1),2),A=B[0],P=B[1],N=(0,f._)(m.useState(!1),2),L=N[0],O=N[1],M=(0,f._)(m.useState(null!=p?p:null),2),X=M[0],F=M[1];m.useEffect(function(){eQ({context:"intro"})},[]);var z=(t=(0,U._)({},iB,{variables:{id:c},onError:function(e){return s(e.message)}}),Q.a(iA,t)),j=z.loading,q=z.data,Y=z.refetch,$=(0,f._)(m.useState(!1),2),J=$[0],K=$[1],ee=(null==q?void 0:q.repl.__typename)==="Repl"&&(null===(n=q.repl.owner)||void 0===n?void 0:n.__typename)==="Team",et=(null==q?void 0:q.repl.__typename)==="Repl"&&(null==q?void 0:null===(r=q.repl.owner)||void 0===r?void 0:r.id)&&(0,iC.xm)(null==q?void 0:null===(i=q.repl.owner)||void 0===i?void 0:i.id),en=(0,to.P5)({controlName:ta.dD,logFlagToAnalytics:!1}),er=(0,to.P5)({controlName:ta.dA,logFlagToAnalytics:!1});m.useEffect(function(){(0,y._)(function(){var e,t;return(0,b.Jh)(this,function(n){switch(n.label){case 0:if(j)return[2];if(ee&&!et)return k(R.r4.Gce),I(R.r4.Gce),[2];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,(0,tm.$f)(_)];case 2:if(null===(e=n.sent()).appType)return k(R.r4.CloudRun),I(R.r4.CloudRun),[2];if((t=(0,ih.oU)(e.appType))===R.r4.Goval||t===R.r4.Extension)return s("Did not recognize template deployment provider"),[2];return k(t),I(t),[3,4];case 3:return n.sent(),s("Something went wrong"),[3,4];case 4:return[2]}})})()},[s,_,j,ee,et]);var ei=m.useCallback((0,y._)(function(){return(0,b.Jh)(this,function(e){switch(e.label){case 0:return K(!0),[4,Y()];case 1:return e.sent(),K(!1),[2]}})}),[Y,K]);if(X||w)return(0,h.tZ)(iN,{replId:c,initialState:w||!X?{type:R.r4.Gce,didCheckout:!0}:{type:X},fs:C,dotReplit:_,onDeploy:u,onBack:function(){return F(null)},onError:s,onLifecycleCommand:d});var eo=function(){if(!q||(null==q?void 0:q.repl.__typename)!=="Repl"||!E)return{isDeployable:!1,explanation:"Loading"};if(E===R.r4.Static){var e=q.repl.hostingDeploymentPermissions.canDeployStatic;return{isDeployable:e.isDeployable,explanation:e.explanation}}if(E===R.r4.CloudRun){var t=q.repl.hostingDeploymentPermissions.canDeployAutoscale;return{isDeployable:t.isDeployable,explanation:t.explanation}}if(E===R.r4.Gce){var n=q.repl.hostingDeploymentPermissions.canDeployReservedVm;return{isDeployable:n.isDeployable,explanation:n.explanation}}if(E===R.r4.Cron){var r=q.repl.hostingDeploymentPermissions.canDeployAutoscale;return{isDeployable:r.isDeployable,explanation:r.explanation}}(0,ix.Z)(E)}(),ea=eo.isDeployable,el=eo.explanation,ec=j||J||void 0===E,es=null==q?void 0:null===(o=q.currentUser)||void 0===o?void 0:o.userSubscriptionType,eu=es===R.HP.Hacker,ed=es===R.HP.HackerPro,ef=(null==q?void 0:null===(a=q.currentUser)||void 0===a?void 0:a.usageBasedBilling.__typename)==="UserUsageBasedBillingSummary"?q.currentUser.usageBasedBilling.capabilities:null,eh=function(){return eu?(0,h.tZ)(ip.GN,{}):ed?(0,h.tZ)(ip.T3,{}):(0,h.tZ)(ip.fG,{})},ep=(l={title:"Deploy to production",subtitle:"Deploy a stable, public version of your project, unaffected by the changes you make in the workspace."},(0,H._)(l,R.r4.Gce,{display:!0,title:"Reserved VM",subtitle:"Servers that stay on",header:"Reserved VM is for apps that don't tolerate restarts",info:[{text:"Reserved VM apps have 99.9% uptime, preventing restarts that interrupt apps that rely on information between client sessions",icon:(0,h.tZ)(ip.lV,{})},{text:function(){if(en){var e=(0,f._)((0,ta.gr)("e2-micro"),1)[0];return"Reserved VMs are billed in compute hours starting at $".concat(e,"/hour.")}return"Flat monthly price based on your custom power level, starting at $7/month"}(),icon:(0,h.tZ)(ip.G8,{})},{text:"Perfect for Discord bots, Slack bots, stateful APIs, and long-running jobs",icon:(0,h.tZ)(ip.KU,{})}]}),(0,H._)(l,R.r4.CloudRun,{display:!0,title:"Autoscale",subtitle:"Meet demand exactly",header:"Autoscale is the best choice for most projects",info:[{text:"Automatically scales from zero to any level of demand, making it inexpensive for most apps and effortless for when you go viral",icon:(0,h.tZ)(ip.Qm,{})},{text:eu||ed?"".concat(ed?"6 million":"3 million"," compute units per month are included in Replit ").concat(ed?i_.we:i_.ZK," plan. Additional usage is billed at $").concat(iS.m0," per compute unit"):"Compute units are included in Replit plans, then billed at $".concat(iS.m0," per compute unit"),icon:(0,h.tZ)(eh,{})},{text:"Perfect for web apps, and stateless APIs",icon:(0,h.tZ)(ip.KU,{})}]}),(0,H._)(l,R.r4.Static,{display:!0,title:"Static",subtitle:"Easy client-side apps",header:"Static lets you share client-side apps fast",info:[{text:"No server compute means free usage — you are only responsible for outbound data transfer (included in Replit plans)",icon:(0,h.tZ)(ip.Lv,{})},{text:"Extremely fast deploy times allow you to move quickly on your production sites",icon:(0,h.tZ)(ip.lt,{})},{text:"Perfect for HTML sites and Static content",icon:(0,h.tZ)(ip.KU,{})}]}),(0,H._)(l,R.r4.Cron,{display:er,title:"Scheduled",subtitle:"Easy scheduled runs",header:"Scheduled deployments let you run your app at specific times",info:[{text:"Schedule for your scripts to run at fixed time intervals",icon:(0,h.tZ)(ip.lt,{})},{text:"Usage-based pricing. Allotment included in Replit ".concat(i_.we," membership"),icon:(0,h.tZ)(eh,{})},{text:"Good choice for internal tools and one-off jobs",icon:(0,h.tZ)(ip.KU,{})}]}),l);return(0,h.BX)(W,{children:[(0,h.tZ)(nA.u,{isOpen:L,onRequestClose:function(){return O(!1)},children:(0,h.tZ)(id.Z,{onRequestClose:function(){return O(!1)}})}),(0,h.BX)(v.G,{css:iK.container,children:[(0,h.BX)(v.G,{css:iK.title,children:[(0,h.tZ)(V.xv,{variant:"subheadBig",children:ep.title}),(0,h.tZ)(V.xv,{color:"dimmer",children:ep.subtitle}),(0,h.tZ)(V.xv,{css:g.l0.textAlign.center,children:(0,h.tZ)("a",{href:"https://docs.replit.com/category/deployments",target:"_blank",rel:"noopener",children:"Learn more"})})]}),(0,h.BX)(v.G,{css:g.l0.colWithGap(16),children:[(0,h.tZ)(v.G,{css:iK.providers,children:iJ.map(function(e,t){if(!ep[e].display)return null;var n=ep[e],r=n.title,i=n.subtitle;return(0,h.tZ)(iq,{provider:e,loading:ec,active:E===e,onClick:function(e){k(e),P(!1)},title:r,description:i,recommended:D===e,index:e===D&&0===t?1.5:e===D&&2===t?.5:t},e)})}),(0,h.BX)(v.G,{css:g.l0.colWithGap(8),children:[(0,h.tZ)(i0,{activeProvider:E,isDeployable:ea,isDeployableExplanation:el,isTeamRepl:ee,loading:ec,ubbExplanation:null==ef?void 0:ef.explanation,hasPaymentMethod:null==ef?void 0:ef.hasPaymentMethod,isDeployableRepl:x,handleOnProviderContinue:function(){E&&F(E)},refetchUbbCapabilitiesQueryData:ei,setShowPaymentMethodForm:function(){return P(!0)},showPaymentMethodForm:A,setShowSupportForm:function(){return O(!0)},hasUBBReservedVMs:en}),E===R.r4.CloudRun?(0,h.tZ)(iF,{}):null,A?(0,h.tZ)(G.Tg,{elevated:!0,css:iK.payment,children:(0,h.tZ)(iv.q,{onSuccess:(0,y._)(function(){return(0,b.Jh)(this,function(e){switch(e.label){case 0:return P(!1),[4,ei()];case 1:return e.sent(),[2]}})}),context:"workspace_hosting_pane"})}):null]}),(0,h.tZ)(iE,{})]}),(0,h.tZ)(v.G,{css:g.l0.colWithGap(16),children:E?(0,h.tZ)(i$,{header:ep[E].header,info:ep[E].info}):null})]})]})};function i0(e){var t=e.activeProvider,n=e.isDeployable,r=e.isDeployableExplanation,i=e.isTeamRepl,o=e.loading,a=e.ubbExplanation,l=e.hasPaymentMethod,c=e.isDeployableRepl,s=e.handleOnProviderContinue,u=e.refetchUbbCapabilitiesQueryData,d=e.setShowPaymentMethodForm,f=e.showPaymentMethodForm,p=e.setShowSupportForm,m=e.hasUBBReservedVMs,g=(0,r7.rv)();return n?i&&t===R.r4.Gce?(0,h.BX)(h.HY,{children:[(0,h.tZ)(D.zx,{colorway:"primary",onClick:s,text:"Included in your subscription",disabled:!c,loading:o,css:iK.cta}),(0,h.tZ)(V.xv,{color:"dimmer",children:r})]}):t!==R.r4.Gce||m?a===R.Fp.NeedsSubscription||a===R.Fp.NeedsSubscriptionOrPaymentMethod?g?(0,h.tZ)(x.E,{text:"You need a subscription to deploy. Navigate to Account > Billing to upgrade.",colorway:"warning",icon:(0,h.tZ)(T.Z,{}),css:iK.ctaStatusBanner}):(0,h.BX)(v.G,{css:iK.ctaContainer,children:[(0,h.tZ)(iw.Z,{context:"workspace_hosting_pane",text:"Upgrade your plan to deploy",css:iK.cta,colorway:"primary",variant:"default",disabled:f,onPlanCheckoutComplete:u}),(0,h.tZ)(D.zx,{variant:"nofill",colorway:"primary",text:"or add a payment method",css:iK.cta,disabled:f,loading:o,iconLeft:(0,h.tZ)(ib.Z,{}),onClick:function(){return d()}})]}):a===R.Fp.NeedsSmsVerification?(0,h.tZ)(iu.Z,{context:R.jv.Deployments,onSuccess:u}):a===R.Fp.NeedsPaymentMethod?g?(0,h.tZ)(x.E,{text:"You have used all free usage for this month. Check your email for more information or contact support.",colorway:"warning",icon:(0,h.tZ)(T.Z,{}),css:iK.ctaStatusBanner}):(0,h.tZ)(D.zx,{colorway:"primary",text:"Add a payment method",css:iK.cta,disabled:f,loading:o,iconLeft:(0,h.tZ)(ib.Z,{}),onClick:function(){return d()}}):a===R.Fp.NeedsUnbanning?(0,h.tZ)(ig.u,{text:"Your account currently has restrictions on deploying. We're here to help! Please reach out to our support team for assistance.",colorway:"warning",icon:(0,h.tZ)(T.Z,{}),css:iK.ctaStatusBanner,onClick:function(){return p()}}):a===R.Fp.InsufficientBudget?(0,h.BX)(h.HY,{children:[(0,h.tZ)(x.E,{text:"You've reached your monthly usage budget. Increase your budget to continue deploying.",colorway:"warning",icon:(0,h.tZ)(T.Z,{}),css:iK.ctaStatusBanner}),(0,h.tZ)(v.G,{css:iK.budgetContainer,children:(0,h.tZ)(im.L,{onUpdateSuccess:u})})]}):(0,h.BX)(h.HY,{children:[(0,h.tZ)(D.zx,{colorway:"primary",onClick:s,text:"Set up your deployment",disabled:!c,loading:o,css:iK.cta}),!1===l?(0,h.tZ)(ig.u,{text:"Add a payment method to avoid downtime",colorway:"warning",icon:(0,h.tZ)(T.Z,{}),css:iK.ctaStatusBanner,onClick:function(){return g?null:d()}}):null]}):(0,h.tZ)(D.zx,{colorway:"primary",onClick:s,text:"Set up your deployment",disabled:!c,loading:o,css:iK.cta}):(0,h.tZ)(h.HY,{children:(0,h.tZ)(x.E,{text:r,colorway:"grey",css:iK.disabledBanner})})}function i1(){var e=(0,J._)(["\n  fragment ReplLogLine2 on ReplLog {\n    __typename\n    timestamp\n    line\n  }\n"]);return i1=function(){return e},e}function i2(){var e=(0,J._)(["\n  query HostingDeploymentLogs2($replId: String!, $deploymentId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        __typename\n        hostingDeploymentLogs(deploymentId: $deploymentId) {\n          ... on ReplLogs {\n            result {\n              ...ReplLogLine2\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return i2=function(){return e},e}function i8(){var e=(0,J._)(["\n  subscription HostingDeploymentLogUpdates(\n    $input: HostingDeploymentLogUpdatesInput!\n  ) {\n    hostingDeploymentLogUpdates(input: $input) {\n      ... on ReplLog {\n        line\n        timestamp\n      }\n    }\n  }\n"]);return i8=function(){return e},e}var i4={},i3=(0,K.Ps)(i1()),i5=(0,K.Ps)(i2(),i3),i6=(0,K.Ps)(i8()),i9=n(47357),i7=(0,C.X)({root:[{overflow:"auto"},g.l0.coverContainer],rows:{width:"100%",position:"relative"},timestamp:[g.l0.p(6),{color:g.TV.foregroundDimmer,cursor:"pointer"}],logContainer:[g.l0.pl(6),g.l0.py(6),g.l0.pr(4),g.l0.flex.growAndShrink(1),g.l0.position.relative,g.l0.minHeight(26),{cursor:"pointer"}],logTruncated:[g.l0.flex.growAndShrink(1),g.l0.truncate],row:[g.l0.flex.row,g.l0.align.start,g.l0.font.code,g.l0.fontSize(12),{position:"absolute",top:0,left:0,width:"100%"}],noLogsContainer:[g.l0.colWithGap(8),g.l0.pt(4)],noLogsText:[g.l0.textAlign.center]}),oe=function(e){var t=e.deploymentId,n=e.replId;return t?(0,h.tZ)(on,{replId:n,deploymentId:t}):(0,h.tZ)(W,{children:(0,h.tZ)(x.E,{colorway:"warning",icon:(0,h.tZ)(T.Z,{}),text:"Deployment not found"})})};function ot(e){var t=e.log,n=e.y,r=e.height,i=e.resizeRef,o=e.index,a=(0,f._)((0,m.useState)(!1),2),l=a[0],c=a[1],s=(0,m.useRef)({x:0,y:0});function u(e){var t=s.current;e.clientY===t.y&&e.clientX===t.x&&c(function(e){return!e})}function d(e){s.current={x:e.clientX,y:e.clientY}}var p=o%2==0?"color-mix(in srgb, ".concat(g.TV.backgroundHigher,", transparent)"):void 0;return(0,h.BX)(v.G,{title:t.line,css:i7.row,style:{height:r,backgroundColor:p,transform:"translateY(".concat(n,"px)")},children:[(0,h.BX)(v.G,{css:i7.timestamp,onClick:u,onMouseDown:d,children:[new Date(t.timestamp).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"2-digit"})," ",new Date(t.timestamp).toLocaleString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit"})]}),(0,h.tZ)(v.G,{css:i7.logContainer,onClick:u,onMouseDown:d,innerRef:i,"data-index":o,children:(0,h.tZ)(v.G,{css:!l&&i7.logTruncated,children:t.line})}),l?(0,h.tZ)(ns.qi,{value:t.line}):null]})}function on(e){var t,n,r,i=e.deploymentId,o=(t={variables:{replId:e.replId,deploymentId:i},fetchPolicy:"cache-and-network",ssr:!1},n=(0,U._)({},i4,t),Q.a(i5,n)),a=o.data,l=o.loading,c=o.error,s=o.subscribeToMore;(0,m.useEffect)(function(){return s({document:i6,variables:{input:{deploymentId:i}},updateQuery:function(e,t){var n=t.subscriptionData;return(0,nm.Uy)(e,function(e){var t=(null==e?void 0:e.repl.__typename)==="Repl"?e.repl.hostingDeploymentLogs.result:null;t&&t.unshift(n.data.hostingDeploymentLogUpdates)})}})},[s,i]);var u=(0,m.useRef)(null),d=(null==a?void 0:a.repl.__typename)==="Repl"?a.repl.hostingDeploymentLogs.result:null,f=(0,i9.MG)({count:d?d.length:0,getScrollElement:function(){return u.current},estimateSize:function(){return 28},overscan:10});return(m.useEffect(function(){eQ({context:B.k.Logs})},[]),l)?(0,h.tZ)(ty,{loading:!0}):c?(0,h.tZ)(W,{children:(0,h.tZ)(x.E,{colorway:"warning",icon:(0,h.tZ)(T.Z,{}),text:null!==(r=c.message)&&void 0!==r?r:"Something went wrong"})}):d&&(null==d?void 0:d.length)!==0?(0,h.tZ)(v.G,{innerRef:u,css:i7.root,children:(0,h.tZ)(v.G,{style:{height:f.getTotalSize()},css:i7.rows,children:f.getVirtualItems().map(function(e){var t=d[e.index];return t?(0,h.tZ)(ot,{log:t,height:e.size,y:e.start,resizeRef:f.measureElement,index:e.index},e.key):null})})}):(0,h.tZ)(W,{children:(0,h.tZ)(or,{message:(null==d?void 0:d.length)===0?"No logs yet…":"No logs are available because the most recent build failed before it was promoted."})})}var or=function(e){var t=e.message;return(0,h.BX)(v.G,{css:i7.noLogsContainer,children:[(0,h.tZ)(V.xv,{css:i7.noLogsText,children:t}),(0,h.BX)(V.xv,{color:"dimmer",css:i7.noLogsText,children:["Having trouble?"," ",(0,h.tZ)("a",{href:"https://docs.replit.com/hosting/deployments/troubleshooting",onClick:function(){return eQ({context:"troubleshooting_doc"})},children:"Troubleshooting tips"})]})]})},oi=n(66496),oo=n(72986);function oa(){var e=(0,J._)(["\n  fragment HostingDeploymentDomainsDomain on HostingDeploymentDomain {\n    id\n    state\n    domain\n  }\n"]);return oa=function(){return e},e}function ol(){var e=(0,J._)(["\n  fragment HostingDeploymentDomainsHostingDeployment on HostingDeployment {\n    id\n    currentBuild {\n      id\n      status\n    }\n    repl {\n      id\n      apexProxy\n    }\n    domains {\n      id\n      ...HostingDeploymentDomainsDomain\n    }\n    legacyReplDomains {\n      id\n      ...HostingDeploymentDomainsDomain\n    }\n  }\n  ","\n"]);return ol=function(){return e},e}function oc(){var e=(0,J._)(["\n  query HostingDeploymentDomains($id: String!) {\n    hostingDeployment(id: $id) {\n      ... on HostingDeployment {\n        id\n        ...HostingDeploymentDomainsHostingDeployment\n      }\n    }\n  }\n  ","\n"]);return oc=function(){return e},e}function os(){var e=(0,J._)(["\n  mutation LinkHostingDeploymentDomain(\n    $input: LinkHostingDeploymentDomainInput!\n  ) {\n    linkHostingDeploymentDomain(input: $input) {\n      ... on HostingDeployment {\n        id\n        domains {\n          ...HostingDeploymentDomainsDomain\n        }\n      }\n    }\n  }\n  ","\n"]);return os=function(){return e},e}var ou={},od=(0,K.Ps)(oa()),of=(0,K.Ps)(ol(),od),oh=(0,K.Ps)(oc(),of),op=(0,K.Ps)(os(),od);function om(){var e=(0,J._)(["\n  query HostingDeploymentSettings($id: String!) {\n    hostingDeployment(id: $id) {\n      ... on HostingDeployment {\n        id\n        ...HostingDeploymentDomainsHostingDeployment\n        currentBuild {\n          id\n          provider\n          machineConfiguration {\n            ...MachineConfiguration\n          }\n          envVars {\n            name\n            value\n          }\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return om=function(){return e},e}var ov={},og=(0,K.Ps)(om(),of,rW.bN),oy=n(61314),ob=n.n(oy),oZ=n(91608),ow=n(5344),ox=n(10041),oC=(0,oZ.$)(["paddingRight"]),o_=oC.cssVars,oS=oC.styleTokens,oE=(0,C.X)({inputWrapper:[g.l0.position.relative,g.l0.flex.growAndShrink(1),{input:[{paddingRight:oS.paddingRight}]}],copyButton:[g.l0.position.absolute,g.l0.top("50%"),g.l0.right(4),{transform:"translateY(-50%)"}]});function ok(e){return(0,h.BX)(v.G,{css:oE.inputWrapper,style:(0,H._)({},o_.paddingRight,e.value?"36px":"8px"),children:[(0,h.tZ)(nb.II,(0,L._)((0,U._)({},e),{onClick:function(e){return e.currentTarget.select()}})),e.value?(0,h.tZ)(eT.hU,{css:oE.copyButton,alt:"Copy",tooltipHidden:!0,onClick:function(){return e.value&&(0,ox.Z)(e.value)},children:(0,h.tZ)(ow.Z,{})}):null]})}var oT=(0,C.X)({root:[g.l0.flex.column,(u={gap:8},(0,H._)(u,g.nC.min("mobileMax"),[g.l0.flex.row,{"& > div:nth-of-type(1)":{width:"30%"},"& > div:nth-of-type(2)":{maxWidth:50}}]),(0,H._)(u,"label",[g.l0.color.foregroundDimmer,{fontSize:g.TV.fontSizeSmall}]),u)],col:[g.l0.colWithGap(4),g.l0.flex.growAndShrink(1)],records:[g.l0.px(12),g.l0.pt(8),g.l0.pb(16),g.l0.colWithGap(16),g.l0.borderRadius(12),(0,H._)({},g.nC.min("mobileMax"),g.l0.colWithGap(12))],divider:(0,H._)({display:"flex",height:1,backgroundColor:g.TV.outlineDimmest},g.nC.min("mobileMax"),g.l0.display.none)});function oR(e){return(0,h.BX)(v.G,{css:oT.root,children:[(0,h.BX)(v.G,{css:oT.col,children:[(0,h.tZ)(v.G,{tag:"label",children:"Hostname"}),(0,h.tZ)(nb.II,{value:e.hostname,readOnly:!0})]}),(0,h.BX)(v.G,{css:oT.col,children:[(0,h.tZ)(v.G,{tag:"label",children:"Type"}),(0,h.tZ)(nb.II,{value:e.type,readOnly:!0})]}),(0,h.BX)(v.G,{css:oT.col,children:[(0,h.tZ)(v.G,{tag:"label",children:"Record"}),(0,h.tZ)(ok,{value:e.record,readOnly:!0})]})]})}function oD(e){var t="replit-verify=".concat(e.deploymentId);return(0,h.BX)(G.Tg,{background:"default",css:oT.records,children:[(0,h.tZ)(oR,{hostname:e.hostname,type:"A",record:e.apexProxy}),(0,h.tZ)(v.G,{css:oT.divider}),(0,h.tZ)(oR,{hostname:e.hostname,type:"TXT",record:t})]})}var oI=n(52924),oG="https://docs.replit.com/hosting/deployments/custom-domains",oB=n(8017),oA=n(22699),oP=(0,C.X)({root:[g.l0.colWithGap(16),g.l0.p(8),g.l0.borderRadius(8),g.l0.border({color:g.TV.outlineDimmer})],labelRow:[g.l0.rowWithGap(8),g.l0.align.center],labelText:[g.l0.flex.growAndShrink(1)],controls:[g.l0.rowWithGap(8),g.l0.justify.spaceBetween,{"& > button":[g.l0.flex.growAndShrink(1)]}],domainSection:[g.l0.colWithGap(8)],error:[g.l0.rowWithGap(4),g.l0.align.center],recordsSection:[g.l0.colWithGap(8)],valueRow:[g.l0.borderRadius(8),g.l0.pl(8),g.l0.pr(4),g.l0.height(32),g.l0.rowWithGap(8),g.l0.align.center,g.l0.justify.spaceBetween,{a:g.l0.hover(g.l0.color.accentPrimaryStrongest)}]});function oN(e){var t,n=(0,f._)((0,m.useState)(!0),2),r=n[0],i=n[1],o=(0,f._)((0,m.useState)(""),2),a=o[0],l=o[1],c=(0,f._)((0,m.useState)(!1),2),s=c[0],u=c[1],d=(0,f._)((t=(0,U._)({},ou,{onCompleted:function(){e.onAdd()}}),oo.D(op,t)),2),p=d[0],y=d[1].loading,b=(0,m.useRef)(null),Z=(0,m.useId)(),w=ob()(a,{require_valid_protocol:!1})&&a.split(".").length>=2,x=!w||y,C=w?null:"Enter a valid domain",_=y?(0,h.tZ)(tv.Z,{}):(0,h.tZ)(rj.Z,{});return r||y||(_=(0,h.tZ)(oB.Z,{})),(0,h.BX)(v.G,{tag:"form",css:oP.root,onSubmit:function(t){if(t.preventDefault(),r){var n;i(!1),null===(n=b.current)||void 0===n||n.focus();return}p({variables:{input:{hostingDeploymentId:e.deploymentId,domain:a}}})},children:[(0,h.BX)(v.G,{css:oP.domainSection,children:[(0,h.BX)(v.G,{tag:"label",htmlFor:Z,css:oP.labelRow,children:[w&&!r?(0,h.tZ)(tq.Z,{color:g.TV.accentPositiveDefault}):null,(0,h.tZ)(V.xv,{color:"dimmer",children:"First, enter your domain"})]}),r?(0,h.tZ)(nb.II,{id:Z,autoFocus:!0,placeholder:"example.com",value:a,disabled:y,onChange:function(e){return l(e.currentTarget.value)},onBlur:function(e){return u(!!e.currentTarget.value)}}):(0,h.BX)(G.Tg,{elevated:!0,css:oP.valueRow,children:[(0,h.tZ)(v.G,{href:"https://"+a,tag:"a",target:"_blank",children:a}),(0,h.tZ)(eT.hU,{alt:"Edit",onClick:function(){return i(!0)},children:(0,h.tZ)(oI.Z,{color:g.TV.foregroundDimmer})})]}),C&&s?(0,h.BX)(v.G,{css:oP.error,children:[(0,h.tZ)(T.Z,{size:12,color:g.TV.orangeDefault}),(0,h.tZ)(V.xv,{variant:"small",children:C})]}):null]}),!r&&w?(0,h.tZ)(oU,{apexProxy:e.apexProxy,domain:a,deploymentId:e.deploymentId}):null,(0,h.BX)(v.G,{css:oP.controls,children:[(0,h.tZ)(D.zx,{type:"button",text:"Cancel",onClick:e.onCancel}),(0,h.tZ)(D.zx,{ref:b,iconRight:_,colorway:"primary",type:"submit",disabled:x,text:r?"Next":"Link domain"})]})]})}function oU(e){return(0,h.BX)(v.G,{css:oP.recordsSection,children:[(0,h.BX)(v.G,{css:oP.labelRow,children:[(0,h.tZ)(oA.Z,{color:g.TV.foregroundDimmest}),(0,h.BX)(V.xv,{multiline:!0,css:oP.labelText,children:["Next, add the following records your domain's DNS settings."," ",(0,h.tZ)("a",{target:"_blank",href:oG,children:"Learn more"})]})]}),(0,h.tZ)(oD,{apexProxy:e.apexProxy,hostname:e.domain,deploymentId:e.deploymentId})]})}function oL(){var e=(0,J._)(["\n  mutation HostingDeploymentsUnlinkDomain(\n    $input: UnlinkHostingDeploymentDomainInput!\n  ) {\n    unlinkHostingDeploymentDomain(input: $input) {\n      ... on HostingDeployment {\n        id\n        domains {\n          id\n        }\n      }\n    }\n  }\n"]);return oL=function(){return e},e}function oO(){var e=(0,J._)(["\n  mutation HostingDeploymentsVerifyDomain(\n    $input: VerifyHostingDeploymentDomainInput!\n  ) {\n    verifyHostingDeploymentDomain(input: $input) {\n      ... on HostingDeploymentDomain {\n        id\n        state\n      }\n    }\n  }\n"]);return oO=function(){return e},e}var oM={},oX=(0,K.Ps)(oL()),oF=(0,K.Ps)(oO()),oW=n(18931),oH=(0,C.X)({root:[g.l0.colWithGap(8),g.l0.borderRadius(8),g.l0.pl(8),g.l0.pr(4),g.l0.height(32),g.l0.justify.center]}),oV=(0,C.X)({root:oH.root,rootExpanded:[oH.root,g.l0.height("auto"),g.l0.pt(4),g.l0.pb(12),g.l0.justify.start],domainRow:[g.l0.reset.button,g.l0.rowWithGap(8),g.l0.align.center,g.l0.justify.spaceBetween],iconButtons:[g.l0.flex.row],expanded:[g.l0.colWithGap(12),g.l0.pl(4),g.l0.pr(8)],domainWrapper:[g.l0.rowWithGap(8),g.l0.align.center,g.l0.flex.shrink(1),g.l0.color.accentPrimaryStronger,{a:g.l0.hover(g.l0.color.accentPrimaryStrongest)}],statusDot:[g.l0.borderRadius("full"),g.l0.width(6),g.l0.height(6)],status:[g.l0.rowWithGap(4),g.l0.align.center],dnsRecords:[g.l0.colWithGap(6)],buttons:[g.l0.flex.column,g.l0.justify.spaceBetween,(d={gap:8},(0,H._)(d,g.nC.min("mobileMax"),g.l0.flex.row),(0,H._)(d,"button",[g.l0.flex.growAndShrink(1)]),d)],warning:[g.l0.rowWithGap(6),g.l0.align.center]}),oz={verified:{color:g.TV.accentPositiveDefault,text:"Verified"},verifying:{color:g.TV.orangeDefault,text:"Verifying"},failed:{color:g.TV.accentNegativeDefault,text:"Failed"}};function oj(e){var t,n,r,i=e.domain,o=e.deploymentId,a=e.apexProxy,l=(0,f._)((0,m.useState)(!1),2),c=l[0],s=l[1],u=(0,f._)((0,m.useState)(!1),2),d=u[0],p=u[1],y=(0,f._)((t=(0,U._)({},ou,{variables:{id:o},fetchPolicy:"network-only",ssr:!1}),oi.t(oh,t)),2),b=y[0],Z=y[1].loading,w=(0,f._)((n=(0,U._)({},oM,void 0),oo.D(oX,n)),2),x=w[0],C=w[1].loading,_=(0,f._)((r=(0,U._)({},oM,void 0),oo.D(oF,r)),2),S=_[0],E=_[1].loading,k=i.state===R.zt.Failed,I=(0,f._)((0,m.useState)(!1),2),B=I[0],A=I[1];return(0,h.BX)(G.Tg,{elevated:!0,css:c?oV.rootExpanded:oV.root,children:[(0,h.BX)(v.G,{css:oV.domainRow,style:{borderBottomLeftRadius:c?0:void 0,borderBottomRightRadius:c?0:void 0},children:[(0,h.BX)(v.G,{css:oV.domainWrapper,children:[(0,h.tZ)(V.xv,{multiline:!1,children:(0,h.tZ)("a",{target:"_blank",href:"https://"+i.domain,children:i.domain})}),(0,h.BX)(v.G,{css:oV.status,children:[(0,h.tZ)(v.G,{css:oV.statusDot,style:{backgroundColor:oz[i.state].color}}),(0,h.tZ)(V.xv,{color:"dimmer",variant:"small",children:oz[i.state].text})]})]}),(0,h.BX)(v.G,{css:oV.iconButtons,children:[(0,h.tZ)(eT.hU,{alt:B?"Copied":"Copy link",onClick:function(){(0,ox.Z)(i.domain),A(!0),setTimeout(function(){return A(!1)},1e3)},children:B?(0,h.tZ)(tq.Z,{color:g.TV.accentPositiveStronger}):(0,h.tZ)(ow.Z,{color:g.TV.foregroundDimmer})}),(0,h.tZ)(eT.hU,{alt:"Edit",tooltipHidden:!0,onClick:function(){p(!1),s(function(e){return!e})},css:g.l0.color.foregroundDimmer,children:c?(0,h.tZ)(t1.Z,{}):(0,h.tZ)(oI.Z,{})})]})]}),c?(0,h.tZ)(v.G,{css:oV.expanded,children:d?(0,h.BX)(h.HY,{children:[(0,h.tZ)(V.xv,{children:"Are you sure you want to unlink this domain?"}),(0,h.BX)(v.G,{css:oV.buttons,children:[(0,h.tZ)(D.zx,{size:"small",variant:"outlined",text:"Cancel",onClick:function(){p(!1)}}),(0,h.tZ)(D.zx,{size:"small",disabled:C,text:"Yes, unlink "+i.domain,colorway:"negative",onClick:function(){x({variables:{input:{hostingDeploymentDomainId:i.id}}})}})]})]}):(0,h.BX)(h.HY,{children:[(0,h.BX)(v.G,{css:oV.dnsRecords,children:[k?(0,h.BX)(h.HY,{children:[(0,h.BX)(v.G,{css:oV.warning,children:[(0,h.tZ)(T.Z,{}),(0,h.tZ)(V.xv,{children:"DNS Error"})]}),(0,h.BX)(V.xv,{children:["Failed to link domain. Make sure your domain's DNS settings have these records."," ",(0,h.tZ)("a",{target:"_blank",href:oG,children:"Learn more"})]})]}):(0,h.BX)(V.xv,{color:"dimmer",children:["Add these records to your domain's"," ",(0,h.tZ)("strong",{css:g.l0.color.foregroundDefault,children:"DNS settings"}),". This take up to 48 hours to fully apply."," ",(0,h.tZ)("a",{target:"_blank",href:oG,children:"Learn more"})]}),(0,h.tZ)(oD,{hostname:i.domain,apexProxy:a,deploymentId:o})]}),(0,h.BX)(v.G,{css:oV.buttons,children:[(0,h.tZ)(D.zx,{iconLeft:Z||E?(0,h.tZ)(tv.Z,{}):(0,h.tZ)(oW.Z,{}),size:"small",text:k?"Retry linking":"Check status",onClick:function(){k?S({variables:{input:{hostingDeploymentDomainId:i.id}}}):b()}}),(0,h.tZ)(D.zx,{iconLeft:(0,h.tZ)(r2.Z,{}),size:"small",disabled:C,text:k?"Remove domain":"Unlink domain",colorway:"negative",onClick:function(){p(!0)}})]})]})}):null]})}function oq(){var e=(0,J._)(["\n  mutation HostingDeploymentsUnlinkLegacyReplDomain(\n    $input: UnlinkLegacyReplDomainInput!\n  ) {\n    unlinkLegacyReplDomain(input: $input) {\n      ... on Repl {\n        id\n        hostingDeployment {\n          ... on HostingDeployment {\n            id\n            legacyReplDomains {\n              id\n              ...HostingDeploymentDomainsDomain\n            }\n            domains {\n              id\n              ...HostingDeploymentDomainsDomain\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return oq=function(){return e},e}var oY={},o$=(0,K.Ps)(oq(),od),oJ=(0,C.X)({root:[g.l0.py(12),g.l0.flex.column,(0,H._)({gap:6},g.nC.min("mobileMax"),[g.l0.py(4),g.l0.flex.row,g.l0.align.center,{gap:2,button:{border:"none"}}])],domainLink:[g.l0.flex.growAndShrink(1),g.l0.flex.row,g.l0.fontWeight.medium,{a:[g.l0.truncate,g.l0.flex.shrink(1)]}],confirm:[g.l0.p(8),g.l0.borderRadius(8),g.l0.colWithGap(8),g.l0.justify.spaceBetween],confirmButtons:[g.l0.rowWithGap(8),{button:[g.l0.flex.growAndShrink(1)]}],unlinkButton:[g.l0.color.foregroundDimmer,g.l0.hover(g.l0.backgroundColor.backgroundHighest)]}),oK=function(e){var t=e.domain;return(0,h.tZ)("a",{target:"_bank",href:"https://"+t,children:t})};function oQ(e){var t,n=e.deploymentId,r=e.domain,i=e.apexProxy,o=(0,f._)((t=(0,U._)({},oY,void 0),oo.D(o$,t)),2),a=o[0],l=o[1].loading,c=(0,f._)((0,m.useState)(!1),2),s=c[0],u=c[1],d=(0,f._)((0,m.useState)(!1),2),p=d[0],g=d[1];return s?(0,h.BX)(G.Tg,{elevated:!0,css:oJ.confirm,children:[(0,h.BX)(V.xv,{children:["Are you sure you want to remove ",(0,h.tZ)(oK,{domain:r.domain}),"?"]}),(0,h.BX)(v.G,{css:oJ.confirmButtons,children:[(0,h.tZ)(D.zx,{text:"Cancel",onClick:function(){return u(!1)},size:"small"}),(0,h.tZ)(D.zx,{size:"small",disabled:l,colorway:"negative",iconLeft:l?(0,h.tZ)(tv.Z,{}):(0,h.tZ)(r2.Z,{}),text:"Unlink domain",onClick:function(){return a({variables:{input:{replDomainId:r.id}}})}})]})]}):p?(0,h.BX)(G.Tg,{elevated:!0,css:oJ.confirm,children:[(0,h.BX)(v.G,{children:[(0,h.tZ)(V.xv,{variant:"small",color:"dimmer",children:"Transfering"}),(0,h.tZ)(v.G,{css:oJ.domainLink,children:(0,h.tZ)(oK,{domain:r.domain})})]}),(0,h.tZ)(oU,{deploymentId:n,domain:r.domain,apexProxy:i}),(0,h.BX)(v.G,{css:oJ.confirmButtons,children:[(0,h.tZ)(D.zx,{text:"Cancel",onClick:function(){return g(!1)},size:"small"}),(0,h.tZ)(D.zx,{size:"small",disabled:l,colorway:"primary",iconLeft:l?(0,h.tZ)(tv.Z,{}):(0,h.tZ)(oB.Z,{}),text:"Complete transfer",onClick:function(){return a({variables:{input:{replDomainId:r.id,transferToHostingDeploymentId:n}}})}})]})]}):(0,h.BX)(v.G,{css:oJ.root,children:[(0,h.tZ)(v.G,{css:oJ.domainLink,children:(0,h.tZ)(oK,{domain:r.domain})}),(0,h.tZ)(D.zx,{size:"small",variant:"outlined",text:"Unlink",onClick:function(){return u(!0)},iconLeft:(0,h.tZ)(r2.Z,{}),css:oJ.unlinkButton}),(0,h.tZ)(D.zx,{size:"small",variant:"outlined",disabled:l,iconRight:(0,h.tZ)(rj.Z,{}),colorway:"primary",text:"Transfer to deployment",onClick:function(){return g(!0)}})]})}var o0=(0,C.X)({root:[g.l0.colWithGap(4),g.l0.p(12),g.l0.pb(6),g.l0.borderRadius(12),g.l0.backgroundColor.backgroundHigher,g.l0.border({color:g.TV.outlineDimmer})],header:[g.l0.align.center,g.l0.rowWithGap(8)],list:[{"& > div:not(:first-of-type)":g.l0.border({color:g.TV.outlineDimmer,direction:"top"})}]});function o1(e){var t=e.domains,n=e.deploymentId,r=e.apexProxy,i=1===t.length?"domain":"domains";return(0,h.BX)(G.Tg,{css:o0.root,children:[(0,h.BX)(v.G,{css:g.l0.colWithGap(4),children:[(0,h.BX)(v.G,{css:o0.header,children:[(0,h.tZ)(T.Z,{color:g.TV.yellowStronger}),(0,h.BX)(V.xv,{variant:"subheadDefault",children:["Transfer ",i]})]}),(0,h.BX)(V.xv,{color:"dimmer",children:["You have attached ",t.length," custom ",i," to your development Repl. Please transfer ","domain"===i?"it":"them"," to your deployment for the best user experience."]})]}),(0,h.tZ)(v.G,{css:o0.list,children:t.map(function(e){return(0,h.tZ)(oQ,{domain:e,deploymentId:n,apexProxy:r},e.id)})})]})}var o2=(0,C.X)({root:[g.l0.colWithGap(8)],error:[g.l0.center,g.l0.rowWithGap(8)],loading:[g.l0.center],empty:[g.l0.px(16),g.l0.py(32),g.l0.borderRadius(8),g.l0.center,g.l0.colWithGap(8),{border:"1px dashed",borderColor:g.TV.outlineDimmer}],primaryDomain:[g.l0.rowWithGap(4),g.l0.height(32),g.l0.justify.spaceBetween,g.l0.align.center,g.l0.pl(8),g.l0.pr(4),g.l0.borderRadius(8)],primaryDomainLink:[g.l0.flex.shrink(1),g.l0.color.accentPrimaryStronger,{a:g.l0.hover(g.l0.color.accentPrimaryStrongest)}],icons:[g.l0.flex.row,g.l0.align.center],footer:[g.l0.flex.row]});function o8(e){var t,n,r,i,o=e.deployment,a=(0,f._)((0,m.useState)(!1),2),l=a[0],c=a[1],s=(0,f._)((0,m.useState)(void 0),2),u=s[0],d=s[1];t={variables:{id:o.id},fetchPolicy:"cache-and-network",ssr:!1,pollInterval:u,onCompleted:function(e){var t,n;d((null===(t=e.hostingDeployment)||void 0===t?void 0:t.__typename)==="HostingDeployment"&&(null===(n=e.hostingDeployment.domains)||void 0===n?void 0:n.some(function(e){return e.state===n2.zt.Verifying}))?3e4:void 0)}},n=(0,U._)({},ou,t),Q.a(oh,n);var p=(null==o?void 0:null===(r=o.domains)||void 0===r?void 0:r.length)?o.domains:null,y=(null==o?void 0:o.currentBuild.status)===R.Fe.Success,b=null==o?void 0:o.repl.apexProxy,w=(0,Z.$y)(),C=function(){var e,t,n,r,i,o=(null==w?void 0:null===(e=w.repl.hostingDeployment)||void 0===e?void 0:e.__typename)==="HostingDeployment"?null===(t=w.repl.hostingDeployment)||void 0===t?void 0:t.replitAppSubdomain:void 0;if(!o&&(null==w?void 0:null===(n=w.repl.owner)||void 0===n?void 0:n.username)&&(o="".concat(w.repl.slug,"-").concat(w.repl.owner.username)),o)return"https://".concat(o).concat((null===(i=window)||void 0===i?void 0:null===(r=i.location)||void 0===r?void 0:r.hostname)!=="replit.com"?".staging":"",".replit.app")}(),_=(0,f._)((0,m.useState)(!1),2),S=_[0],E=_[1];return(0,h.BX)(v.G,{css:o2.root,children:[!l&&(null==o?void 0:null===(i=o.legacyReplDomains)||void 0===i?void 0:i.length)&&b?(0,h.tZ)(o1,{domains:o.legacyReplDomains,deploymentId:o.id,apexProxy:b}):null,(0,h.BX)(G.Tg,{elevated:!0,css:o2.primaryDomain,children:[(0,h.tZ)(V.xv,{multiline:!1,css:o2.primaryDomainLink,children:(0,h.tZ)("a",{href:C,target:"_blank",rel:"noreferrer noopener",children:C})}),(0,h.BX)(v.G,{css:o2.icons,children:[(0,h.tZ)(eT.hU,{alt:S?"Copied":"Copy link",onClick:function(){C&&((0,ox.Z)(C),E(!0),setTimeout(function(){return E(!1)},1e3))},children:S?(0,h.tZ)(tq.Z,{color:g.TV.accentPositiveStronger}):(0,h.tZ)(ow.Z,{color:g.TV.foregroundDimmer})}),(0,h.tZ)(n_.u,{tooltip:o4,children:(0,h.tZ)(tr.Z,{"aria-label":o4,color:g.TV.foregroundDimmer,css:g.l0.m(4)})})]})]}),p&&o?(0,h.tZ)(v.G,{css:g.l0.colWithGap(8),children:p.map(function(e){return(0,h.tZ)(v.G,{children:(0,h.tZ)(oj,{apexProxy:o.repl.apexProxy,deploymentId:o.id,domain:e})},e.domain)})}):null,l&&b?(0,h.tZ)(oN,{apexProxy:b,deploymentId:o.id,onAdd:function(){return c(!1)},onCancel:function(){return c(!1)}}):null,y?null:(0,h.tZ)(x.E,{colorway:"warning",icon:(0,h.tZ)(T.Z,{}),text:"You must successfully deploy your project before linking a domain"}),!1===l?(0,h.tZ)(v.G,{css:o2.footer,children:(0,h.tZ)(D.zx,{disabled:!y,iconLeft:(0,h.tZ)(nl.Z,{}),text:"Link a domain",onClick:function(){return c(!0)},variant:"outlined",size:"small"})}):null]})}var o4="Your primary domain cannot be changed";function o3(){var e=(0,J._)(["\n  query AutoscaleUsageSectionCurrentUser {\n    currentUser {\n      id\n      usageInterval {\n        ... on UsageInterval {\n          startDate\n          endDate\n          resources {\n            autoscaleComputeUnits {\n              usage\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return o3=function(){return e},e}var o5={},o6=(0,K.Ps)(o3()),o9=(0,C.X)({root:[g.l0.colWithGap(4),g.l0.p(8),g.l0.pt(12),g.l0.borderRadius(8),{outline:"1px solid transparent"}],outerRow:[g.l0.rowWithGap(12),g.l0.align.center],typeCol:[g.l0.colWithGap(4),g.l0.flex.growAndShrink(1)],configAndUsageRow:[g.l0.rowWithGap(12),g.l0.align.center,g.l0.flex.growAndShrink(1)],usageRow:[g.l0.rowWithGap(8)]}),o7=function(e){var t,n=e.machineConfiguration,r=(t=(0,U._)({},o5,void 0),Q.a(o6,t)).data,i=m.useMemo(function(){return function(e){var t,n,r=e.data;if((null==r?void 0:null===(t=r.currentUser)||void 0===t?void 0:t.__typename)==="CurrentUser"){var i=null==r?void 0:null===(n=r.currentUser)||void 0===n?void 0:n.usageInterval;if(i&&"UsageInterval"===i.__typename){var o=i.resources.autoscaleComputeUnits.usage,a=(0,iL.fZ)(o,{resourceUsageType:"ComputeUnits"}),l=new Date(i.endDate).toLocaleString("default",{month:"short",day:"numeric"});return{description:"".concat(a," used this billing period"),renewalInfo:"Renews ".concat(l," ")}}}}({data:r})},[r]),o=m.useMemo(function(){if(null!=n)return"Autoscale (".concat(n.label,")")},[n]);return o&&i?(0,h.BX)(G.Tg,{elevated:!0,css:o9.root,children:[(0,h.BX)(v.G,{css:o9.outerRow,children:[(0,h.tZ)(v.G,{css:o9.typeCol,children:o?(0,h.tZ)(V.xv,{multiline:!1,children:o}):null}),(0,h.tZ)(eT.hU,{alt:"Edit",onClick:e.onEditAutoscaleMachineConfiguration,children:(0,h.tZ)(oI.Z,{})})]}),i?(0,h.BX)(h.HY,{children:[(0,h.BX)(v.G,{css:o9.outerRow,children:[(0,h.tZ)(V.xv,{multiline:!1,children:i.description}),(0,h.tZ)(V.xv,{color:"dimmer",multiline:!1,children:i.renewalInfo})]}),(0,h.tZ)(v.G,{css:o9.outerRow,children:(0,h.tZ)(te(),{legacyBehavior:!0,passHref:!0,href:"/account#resource-usage",prefetch:!1,children:(0,h.tZ)("a",{role:"button",children:"View account resource limits"})})})]}):null]}):(0,h.tZ)(v.G,{css:[g.l0.justify.center,g.l0.flex.row],children:(0,h.tZ)(tv.Z,{})})},ae=(0,C.X)({sectionContainer:[g.l0.colWithGap(8)]});function at(e){var t=e.shouldShowDownloadQR,n=(0,f._)((0,m.useState)(t),2),r=n[0],i=n[1];return(0,h.tZ)(v.G,{children:(0,h.BX)(v.G,{css:ae.sectionContainer,children:[(0,h.tZ)(D.zx,{iconLeft:(0,h.tZ)(nH.Z,{}),text:"Install the Replit App",onClick:function(){return i(function(e){var t=!e;return t&&(0,eK.j)(eK.U3.DEPLOYMENT_MOBILE_DOWNLOAD_QR_VIEWED),t})}}),r?(0,h.tZ)(nW,{color:g.TV.foregroundDefault}):null]})})}var an=function(e){var t=e.deploymentId,n=e.onLifecycleCommand,r=e.onError;return t?(0,h.tZ)(ar,{deploymentId:t,onLifecycleCommand:n,onError:r}):(0,h.tZ)(W,{children:(0,h.tZ)(x.E,{colorway:"warning",icon:(0,h.tZ)(T.Z,{}),text:"Deployment not found"})})};function ar(e){var t,n,r,i,o,a,l,c,s,u,d=(0,r7.rv)(),p=(0,f._)((0,m.useState)(!1),2),y=p[0],b=p[1];m.useEffect(function(){eQ({context:B.k.Settings})},[]);var Z=(a=(r={variables:{id:({deploymentId:e.deploymentId}).deploymentId},ssr:!1,fetchPolicy:"cache-and-network"},i=(0,U._)({},ov,r),o=Q.a(og,i)).data,l=o.loading,c=o.error,s=(null==a?void 0:null===(t=a.hostingDeployment)||void 0===t?void 0:t.__typename)==="HostingDeployment"?a.hostingDeployment:null,(null==a?void 0:null===(n=a.hostingDeployment)||void 0===n?void 0:n.__typename)==="NotFoundError"?{data:null,error:"Deployment not found",loading:!1}:!s&&l?{deployment:null,erorr:null,loading:!0}:c||!s?{deployment:null,error:"Something went wrong",loading:!1}:{deployment:s,error:null,loading:!1});if(y)return(0,h.tZ)(rY,{onError:e.onError,onConfirm:function(t){e.onLifecycleCommand({command:R.Qc.UpdateMachineConfiguration,machineConfigurationId:t.configurationId,maxMachineInstances:t.maxInstances})},onBack:function(){return b(!1)}});if(Z.loading)return(0,h.tZ)(W,{children:(0,h.tZ)(ty,{loading:!0})});if(Z.error)return(0,h.tZ)(tZ,{text:Z.error});var w=Z.deployment,x=w.currentBuild,C=null!==(u=null==x?void 0:x.machineConfiguration)&&void 0!==u?u:void 0;return(0,h.tZ)(W,{children:(0,h.BX)(v.G,{css:[g.l0.colWithGap(32),M.Qw.maxWidth],children:[x.provider===R.r4.CloudRun?(0,h.BX)(v.G,{children:[(0,h.tZ)(V.xv,{variant:"subheadDefault",css:[g.l0.pb(8)],children:"Resource usage"}),(0,h.tZ)(v.G,{css:[g.l0.colWithGap(16)],children:(0,h.tZ)(o7,{machineConfiguration:C,onEditAutoscaleMachineConfiguration:function(){return b(!0)}})})]}):null,(0,h.BX)(v.G,{children:[(0,h.tZ)(V.xv,{variant:"subheadDefault",css:[g.l0.pb(8)],children:"Domains"}),(0,h.tZ)(o8,{deployment:w})]}),(0,h.BX)(v.G,{children:[(0,h.tZ)(V.xv,{variant:"subheadDefault",css:[g.l0.pb(12)],children:"Manage deployment"}),(0,h.tZ)(r4,{onLifecycleCommand:e.onLifecycleCommand})]}),d?null:(0,h.BX)(v.G,{children:[(0,h.tZ)(V.xv,{variant:"subheadDefault",css:[g.l0.pb(12)],children:"Deploy on the go"}),(0,h.tZ)(at,{shouldShowDownloadQR:!1})]})]})})}var ai=(0,C.X)({root:[{height:"100%"},g.l0.overflow("hidden"),g.l0.position.relative],content:[g.l0.overflow("auto"),g.l0.flex.growAndShrink(1),g.l0.position.relative,g.l0.pb(16)]}),ao=function(e){var t,n,r,i=e.onViewUpdate,o=e.onError,a=e.refetch,l=e.openFile,c=e.initialView,s=e.error,u=function(e){L({type:B.a.SendDeploymentLifecycleCommand,payload:e})},d=(0,w.Z)(),p=(0,Z.hn)(),g=(0,Z.pn)(),C=(0,Z.$y)(),D="string"==typeof p,I=!(void 0!==g)&&!D,G=(0,f._)(m.useState(function(){return g?B.k.DeploymentInProgress:I?B.k.Intro:B.k.Deployment}),2),A=G[0],P=G[1],U=(0,Z.mF)(),L=(t=(0,y._)(function(e){return(0,b.Jh)(this,function(t){switch(t.label){case 0:switch(i(),e.type){case B.a.SendDeploymentLifecycleCommand:return[3,1];case B.a.ChangeView:return[3,3]}return[3,4];case 1:return[4,U(e.payload)];case 2:if(t.sent(),e.payload.command===R.Qc.Destroy)return P(B.k.Intro),a(),[2];return e.payload.command===R.Qc.UpdateMachineConfiguration&&a(),P(B.k.Deployment),[3,5];case 3:return P(e.payload.view),[3,5];case 4:return[3,5];case 5:return[2]}})}),function(e){return t.apply(this,arguments)});if(A===B.k.Intro)return(0,h.tZ)(v.G,{css:ai.content,children:(0,h.tZ)(iQ,{initialSelectedProvider:c===B.k.ReservedVMTierSelection?R.r4.Gce:void 0,onLifecycleCommand:u,onError:o,onDeploy:function(){L({type:B.a.ChangeView,payload:{view:B.k.DeploymentInProgress}})},replId:d})});var O=C?(n=C.provider,r=[{view:B.k.Deployment,label:"Overview",icon:(0,h.tZ)(S.Z,{})},{view:B.k.Analytics,label:"Analytics",icon:(0,h.tZ)(_.Z,{})},{view:B.k.Settings,label:"Settings",icon:(0,h.tZ)(k.Z,{})}],n!==R.r4.Static&&r.splice(1,0,{view:B.k.Logs,label:"Logs",icon:(0,h.tZ)(E.Z,{})}),r):null;return(0,h.BX)(v.G,{css:ai.root,children:[O?(0,h.tZ)(N,{onClick:function(e){L({type:B.a.ChangeView,payload:{view:e.view}})},tabs:O,activeView:A===B.k.DeploymentInProgress?B.k.Deployment:A}):null,(0,h.BX)(v.G,{css:ai.content,children:[s?(0,h.tZ)(W,{children:(0,h.tZ)(x.E,{colorway:"warning",icon:(0,h.tZ)(T.Z,{}),text:s})}):null,A===B.k.Analytics?(0,h.tZ)(e3,{replId:d}):null,A===B.k.Logs?(0,h.tZ)(oe,{replId:d,deploymentId:p}):null,A===B.k.Settings?(0,h.tZ)(an,{onError:o,deploymentId:p,onLifecycleCommand:u}):null,A===B.k.Deployment||A===B.k.DeploymentInProgress?(0,h.tZ)(is,{view:A,refetch:a,onViewAction:L,onError:o,openFile:l,onLifecycleCommand:u}):null]})]})};function aa(e){var t=e.initialView,n=e.onViewUpdate,r=e.openFile,i=e.tabsNavRef,o=(0,Z.m8)(),a=(0,Z.kW)(),l=(0,Z.ev)(),c=(0,f._)(m.useState(null),2),s=c[0],u=c[1];return a===e6.z.Loading?(0,h.tZ)(v.G,{css:[g.l0.center,g.l0.my(32)],children:(0,h.tZ)(tv.Z,{size:16})}):(0,h.tZ)(ao,{tabsNavRef:i,initialView:t,onViewUpdate:function(){s&&u(null),n()},onError:u,refetch:o,openFile:r,error:s||l})}var al=n(76568),ac=n(74044),as=n(99149),au=ac.Dy.Object({type:ac.Dy.Literal("deployments"),data:ac.Dy.Optional(ac.Dy.Object({view:ac.Dy.Enum(B.k)}))}),ad={Content:function(e){var t=e.pane.data,n=e.options.performPaneOperation,r=(0,m.useRef)(function(e){if(e&&"object"==typeof e&&"view"in e&&e.view===B.k.ReservedVMTierSelection)return B.k.ReservedVMTierSelection}(t)),i=(0,m.useCallback)(function(e){return n({operation:"open",secondary:!0,pane:{type:(0,p.Dp)(e),data:e}})},[n]),o=(0,f._)((0,m.useState)(null),2),a=o[0],l=o[1];return(0,al.L5)(function(){if(a)return{type:"deployments",getTabs:a.getTabs,setTab:a.setTab}},[a]),(0,h.tZ)(aa,{tabsNavRef:l,initialView:r.current,onViewUpdate:function(){r.current&&(r.current=void 0,n({operation:"replace",pane:{type:"deployments"}}))},openFile:i})},Icon:function(e){var t=e.size;return(0,h.tZ)(S.Z,{size:t})},getTitle:function(){return"Deployments"},decode:function(e){return as.B4.Decode(au,e)}}},22111:function(e,t,n){n.d(t,{J:function(){return c}});var r=n(74044),i=n(99149),o=n(73524),a=r.Dy.Union(Object.values(o.TT).map(function(e){return r.Dy.Literal(e)})),l=r.Dy.Object({type:r.Dy.Literal("docs"),data:r.Dy.Optional(r.Dy.Object({url:r.Dy.Optional(r.Dy.Union([a,r.Dy.Null()]))}))}),c=function(e){return i.B4.Decode(l,e)}},15001:function(e,t,n){n.d(t,{J:function(){return a}});var r=n(74044),i=n(99149),o=r.Dy.Object({type:r.Dy.Literal("preferences")}),a=function(e){return i.B4.Decode(o,e)}},11052:function(e,t,n){n.d(t,{G:function(){return x},s:function(){return b}});var r=n(8182),i=n(74044),o=n(99149),a=n(47030),l=n(52682),c=n(54916),s=n(74652),u=n(76568),d=n(43429),f=n(59716),h=n(56596),p=n(74833),m=n(93918),v=n(29287),g=n(83898),y=i.Dy.Object({type:i.Dy.Literal("runnerOutput")}),b={id:"outputs.clear",name:"Clear console history",default:void 0};function Z(e){var t=e.runner,n=e.options,i=(0,c.Z)(),o=i.fs,a=i.toolchain,h=i.ports,p=(0,d.useMemo)(function(){return[{type:"action",label:"Clear history",icon:(0,r.tZ)(l.Z,{}),run:function(){return t.clearBlockHistory()}}]},[t]);(0,u.L5)(function(){return{actions:p,type:"runnerOutput",startBlock:t.startBlock,endBlock:t.endBlock,writeOutputToBlock:t.writeOutputToBlock,writeErrorToBlock:t.writeErrorToBlock}},[t,p]),(0,s.Il)(function(){return[b.id,t.clearBlockHistory]},[t]);var m=(0,g.ql)();return(0,r.tZ)(f.y,{runner:t,toolchain:a,ports:h,listFiles:o.listFiles,isActive:n.isActive,performPaneOperation:n.performPaneOperation,sendGhostwriterChatMessage:m})}var w=(0,m.X)({unavailable:[v.l0.p(8)]}),x={Content:function(e){var t=e.options,n=(0,c.Z)().runner;return"outputs"!==n.mode?(0,r.tZ)(h.G,{css:w.unavailable,children:(0,r.tZ)(p.xv,{children:"Console is not available."})}):(0,r.tZ)(Z,{options:t,runner:n})},Icon:function(e){var t=e.size;return(0,r.tZ)(a.Z,{size:t})},getTitle:function(){return"Console"},decode:function(e){return o.B4.Decode(y,e)}}},19403:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(8182);n(43429);var i=n(56596),o=n(20573),a=n(63461),l={Content:function(){return(0,r.tZ)(i.G,{style:{padding:32},children:(0,r.tZ)(a.Z,{children:"Sorry, this feature is not supported."})})},Icon:function(){return(0,r.tZ)(o.Z,{})},getTitle:function(){return"Unsupported"},decode:function(){return{type:"commands",data:{autoFocus:!1}}}}},62393:function(e,t,n){n.d(t,{Jx:function(){return m},Rm:function(){return g},Sp:function(){return v}});var r=n(32477),i=n(8182),o=n(54916),a=n(96239),l=n(51533),c=n(86793),s=n(45495),u=n(74044),d=n(99149),f=n(43429),h=n(37463),p=u.Dy.Object({type:u.Dy.Literal("webview"),data:u.Dy.Optional(u.Dy.Union([u.Dy.Object({portType:u.Dy.Literal("local"),port:u.Dy.Number(),path:u.Dy.Optional(u.Dy.String())}),u.Dy.Object({portType:u.Dy.Literal("external"),port:u.Dy.Number(),path:u.Dy.Optional(u.Dy.String())})]))}),m=function(e){return d.B4.Decode(p,e)};function v(e,t){var n=void 0;if((null==e?void 0:e.portType)==="external")n=null==e?void 0:e.port;else if((null==e?void 0:e.portType)==="local"){var r=t.find(function(t){return t.configuration.localPort===e.port});n=null==r?void 0:r.configuration.externalPort}return n}var g={Content:function(e){var t=e.pane.data,n=e.options.performPaneOperation,a=(0,o.Z)(),u=a.container,d=a.runner,p=(0,r._)((0,f.useState)(function(){return function(){}}),2),m=p[0],g=p[1],y=(0,h.bg)();return(0,c.Z)({container:u,runner:d,refreshWebView:m}),(0,s.Z)({runner:d,refreshWebView:m}),(0,i.tZ)(l.Z,{initialPort:v(t,y),initialPath:null==t?void 0:t.path,openPane:function(e){n({operation:"open",pane:e})},openNetworkingTool:function(){n({operation:"open",secondary:!0,pane:{type:"networking"}})},setRefreshCb:g})},Icon:function(e){var t=e.size;return(0,i.tZ)(a.Z,{size:t})},getTitle:function(){return"Webview"},decode:m}},50254:function(e,t,n){n.d(t,{U:function(){return gj}});var r,i,o,a,l,c,s,u,d,f,h,p,m,v,g,y,b,Z,w,x,C,_,S,E,k,T,R,D,I,G,B,A,P,N,U,L=n(8182),O=n(39698),M=n(32477),X=n(43429),F=n(78055),W=n(29479),H=n(80339),V=n(71914),z=n(54916),j=n(26508),q=n(72282),Y=n.n(q),$=n(36102),J=n(29287),K=n(56596),Q=n(74833),ee=n(93918),et=n(48796),en=n(67696),er=n(76568),ei=n(2158),eo=n(30084),ea=(0,X.memo)($.Z),el=(0,ee.X)({root:[J.l0.colWithGap(8),J.l0.height("100%"),J.l0.width("100%"),J.l0.overflow("auto"),J.l0.zIndex(2),J.l0.align.center,J.l0.py(16),J.l0.px(16),J.l0.borderRadius(8),(0,O._)({margin:"0 auto"},"@media only screen and (min-width: ".concat(W.j.tabletMin,"px)"),J.l0.px(32))],header:[J.l0.rowWithGap(4),J.l0.height(30),J.l0.width("100%"),J.l0.align.center],markdownContainer:[J.l0.width("100%"),{"& .rendered-markdown":[J.l0.flex.column,J.l0.center],"& .rendered-markdown > *":[J.l0.maxWidth(840),J.l0.width("100%")],"& .rendered-markdown > table":J.l0.maxWidth("100%")}]});function ec(e){var t,n,r=(0,z.Z)().fs,i=(0,M._)((t=(0,X.useRef)(!1),n=(0,X.useRef)(null),[(0,j.Z)(function(){t.current=!0,n.current&&clearTimeout(n.current),n.current=setTimeout(function(){t.current=!1},150)},{type:"throttle",wait:37.5}),t]),2),o=i[0],a=i[1],l=(0,X.useRef)(null),c=(0,et.T)(),s=e.path,u=e.performPaneOperation;(0,er.L5)(function(){return{actions:[{label:"Open in Editor",icon:(0,L.tZ)(ei.Z,{}),type:"action",run:function(){u({operation:"replace",pane:{type:"codeEditor",data:{path:s}}})}}]}},[u,s]);var d=e.isHidden,f=(0,en.p5)();(0,X.useEffect)(function(){if(!d){var e=Y()(function(e){(0,F.Z)(e,{behavior:c?"auto":"smooth",scrollMode:"if-needed"})},100),t=Y()(function(t){if(s===(null==t?void 0:t.path)&&t&&!a.current){var n=l.current?function(e,t){var n=e.querySelectorAll(".rendered-markdown [data-sourcepos]");if(!(null==n?void 0:n.length))return null;var r=Array.from(n).reverse(),i=t.line,o=t.column,a=!0,l=!1,c=void 0;try{for(var s,u=r[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var d=s.value,f=d.dataset.sourcepos;if(!f)throw Error("Expected data source pos on selected element");var h=(0,M._)(f.split("-"),2),p=h[0],m=h[1],v=(0,M._)(p.split(":").map(Number),2),g=v[0],y=v[1],b=(0,M._)(m.split(":").map(Number),2),Z=b[0],w=b[1];if(i>=g&&o>=y&&(i<Z||i===Z&&o<=w))return d}}catch(e){l=!0,c=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw c}}}(l.current,t.position):null;n&&e(n)}},200),n=f.subscribe(t);return function(){t.cancel(),e.cancel(),n()}}},[f,d,c,s]);var h=(0,M._)((0,X.useState)(null),2),p=h[0],m=h[1];return((0,X.useEffect)(function(){return m(null),r.watchTextFile(s,{onReady:function(e){m(e.initialContent.toString())},onChange:function(e){m(e.latestContent)},onMoveOrDelete:function(e){e.eventType===eo.kS.Delete&&u({operation:"replace",pane:{type:"commands",data:{autoFocus:!0}}})}})},[s,r,u]),null===p)?(0,L.tZ)(V.Z,{preventHighlightBorder:!0}):(0,L.BX)(K.G,{css:el.root,innerRef:o,children:[(0,L.BX)(K.G,{css:el.header,children:[(0,L.tZ)(H.Z,{}),(0,L.BX)(Q.xv,{color:"dimmer",multiline:!1,children:["Preview of ",(0,L.tZ)("a",{href:"#".concat(s),children:s})]})]}),(0,L.tZ)(K.G,{innerRef:l,css:el.markdownContainer,children:(0,L.tZ)(ea,{path:s,source:p,fs:r,sourcePos:!0})})]})}var es=n(74928),eu=n(19659),ed=n(74044),ef=n(99149),eh=ed.Dy.Object({type:ed.Dy.Literal("markdown"),data:ed.Dy.Object({path:ed.Dy.String({minLength:1})})}),ep={Content:function(e){var t=e.pane,n=e.options;return(0,L.tZ)(ec,{path:t.data.path,isHidden:!!n.isHidden,performPaneOperation:n.performPaneOperation})},Icon:function(e){var t=e.size;return(0,L.tZ)(es.Z,{fill:"currentColor",size:t})},getTitle:function(e){return e.data.path?(0,eu.UO)(e.data.path):"Markdown"},decode:function(e){return ef.B4.Decode(eh,e)}},em=n(7409),ev=n(11052),eg=n(52489),ey=n(97411),eb=ed.Dy.Object({type:ed.Dy.Literal("envEditor")}),eZ={Content:function(){return(0,L.tZ)(ew,{})},Icon:function(e){var t=e.size;return(0,L.tZ)(ey.Z,{size:t})},getTitle:function(){return"Secrets"},decode:function(e){return ef.B4.Decode(eb,e)}};function ew(){var e=(0,z.Z)().fs,t=(0,z.Z)().runner;return(0,L.tZ)(eg.ZP,{readRawEnv:function(){return e.readFile(".env")},writeRawEnv:function(t){return e.writeFile(".env",t)},getRunState:t.getRunState})}var ex=n(31270),eC=n(48272),e_=n(21289),eS=n(73157),eE=n(15146),ek=n(9331),eT=n(31070),eR=n(88936),eD=n(30983),eI=n(59072),eG=n(90234),eB=n(71999),eA=n(28999);(0,eG.cn)({replId:"",packageManagers:{}}),(r=v||(v={})).Initializing="Initializing",r.Installing="Installing",r.Uninstalling="Uninstalling",r.Idle="Idle",(i=g||(g={})).Install="Install",i.Uninstall="Uninstall";var eP=(0,X.createContext)(null);function eN(){var e=(0,X.useContext)(eP);if(!e)throw Error("Expected store in context");return e}var eU=(0,eG.cn)(null);function eL(){return(0,eB.Dv)(eU,{store:eN()})}(0,eG.cn)(null);var eO=n(45903),eM=n(25e3),eX=n(34142),eF=n(87682),eW=n(46801);function eH(e){var t=eL(),n=(0,z.Z)(),r=(0,M._)(X.useState(null),2),i=r[0],o=r[1];return X.useEffect(function(){if((null==t?void 0:t.id)&&e.name){var r,i=(0,eW.C)(t.id),a=!1;return(r=(0,eX._)(function(){var r;return(0,eF.Jh)(this,function(l){switch(l.label){case 0:return[4,i.getPackageInfo({id:t.id,name:e.name,services:n})];case 1:if(r=l.sent(),a)return[2];return o(null!=r?r:null),[2]}})}),function(){return r.apply(this,arguments)})(),function(){a=!0}}},[null==t?void 0:t.id,e.name]),i}var eV=n(1498),ez=n(47030),ej=n(20573),eq=n(8279),eY=n(37951),e$=n(38080),eJ=n(71166),eK=n.n(eJ),eQ=/(.+)(?:\S+)?<([^>,]+)[>,]/,e0=K.K.span;function e1(e){var t=e.author,n=eQ.exec(t);if(n){var r=n[1],i=n[2];return(0,L.BX)(L.HY,{children:["By ",r,(0,L.BX)("a",{href:"mailto:".concat(i),children:["<",i,">"]})]})}return(0,L.BX)(e0,{children:["By ",t]})}var e2=n(81764),e8=n(42463),e4=n(52682);function e3(e){var t=e.isInstalled,n=e.isInQueue;return e.isCurrentAction?(0,L.tZ)(eR.Z,{}):n?(0,L.tZ)(e2.Z,{}):t?(0,L.tZ)(e4.Z,{}):(0,L.tZ)(e8.Z,{})}var e5=K.K.span,e6=(0,ee.X)({metadata:[J.l0.colWithGap(2)],metadataSkeleton:[J.l0.colWithGap(8),J.l0.pt(4)],metadataSkeletonVersion:[eq.p.foregroundPulse(),J.l0.height(16),J.l0.maxWidth(64),J.l0.borderRadius(4)],metadataSkeletonDescription:[eq.p.foregroundPulse(),J.l0.height(16),J.l0.borderRadius(4),J.l0.maxWidth(425)],root:[J.l0.borderRadius(8),J.l0.p(8)],header:[J.l0.flex.row,J.l0.justify.spaceBetween],headerTitle:[J.l0.display.flex,J.l0.rowWithGap(8),J.l0.flex.growAndShrink(1)],headerTitleText:[J.l0.display.inline,J.l0.flex.growAndShrink(1),J.l0.overflow("hidden"),J.l0.truncate],headerTitlePills:[J.l0.display.inlineFlex,J.l0.rowWithGap(4),J.l0.flex.shrink(0)],headerButton:[],content:[J.l0.colWithGap(4)],error:[J.l0.mt(4)],actions:[J.l0.rowWithGap(8),J.l0.mt(8)],consoleButton:[J.l0.width("calc(50% - ".concat(J.TV.space8,")"))],cancelButton:[J.l0.width("calc(50% - ".concat(J.TV.space8,")"))],actionButton:[J.l0.flex.grow(1),J.l0.flex.shrink(0)]});function e9(e){var t=e.title,n=e.content,r=e.isExpanded;return(0,L.BX)(K.G,{css:e6.metadata,children:[t?(0,L.tZ)(Q.xv,{color:"dimmer",children:t}):null,n?(0,L.tZ)(Q.xv,{maxLines:r?void 0:1,children:n}):null]})}function e7(e){var t=e.title,n=e.content;return(0,L.BX)(K.G,{css:e6.metadataSkeleton,children:[void 0===t||t?(0,L.tZ)(K.G,{css:e6.metadataSkeletonVersion}):null,void 0===n||n?(0,L.tZ)(K.G,{css:e6.metadataSkeletonDescription}):null]})}function te(e){var t,n=e.name,r=e.pkg,i=e.isMetadataLoading,o=e.openConsole,a=e.pills,l=eL(),c=(0,eI.te)(null==l?void 0:l.id),s=(0,eI.pN)(null==l?void 0:l.id),u=(0,eI.B2)(),d=(0,eI.cW)(),f=(0,eI.wY)(),h=(0,X.useMemo)(function(){return r.license?eK()(r.license,{upgrade:!1})||(r.license.length<40?r.license:"Unknown License"):"Unknown License"},[r.license]),p=(0,X.useMemo)(function(){return!!(null!==u&&u.pkgs.find(function(e){return e.name===r.name}))},[u]),m=(0,X.useMemo)(function(){return d.find(function(e){return e.pkgs.find(function(e){return e.name===r.name})})},[d]),v=!!m,g=(0,X.useMemo)(function(){return!!c.find(function(e){return e.name===r.name})},[c]),y=!!(r.homepageURL||r.license||r.author),b=(0,X.useMemo)(function(){return!!s.find(function(e){return e.name===r.name})},[s]),Z=(0,M._)((0,X.useState)(!1),2),w=Z[0],x=Z[1],C=(0,eI.jh)(),_=(0,eI.Wx)(),S=(0,eI.zi)();return(0,L.BX)(e$.Tg,{css:e6.root,elevated:!0,children:[(0,L.BX)(K.G,{css:e6.header,children:[(0,L.BX)(Q.h4,{css:e6.headerTitle,level:2,variant:"subheadDefault",multiline:!1,children:[(0,L.BX)(e5,{css:e6.headerTitleText,children:[null!=n?n:r.name,r.version?(0,L.BX)(Q.xv,{color:"dimmer",children:["@",r.version]}):null]}),a?(0,L.tZ)(K.G,{css:e6.headerTitlePills,children:a}):null]}),y?(0,L.tZ)(eE.hU,{css:e6.headerButton,alt:"Show more info",tooltipHidden:!0,onClick:function(){return x(function(e){return!e})},children:(0,L.tZ)(ek.Z,{rotate:w?90:0})}):null]}),(0,L.tZ)(K.G,{css:e6.content,children:void 0!==i&&i?(0,L.tZ)(e7,{title:!1}):(0,L.BX)(L.HY,{children:[(0,L.tZ)(e9,{content:null!==(t=r.description)&&void 0!==t?t:"This package has no description.",isExpanded:w}),r.homepageURL&&w?(0,L.tZ)(e9,{content:(0,L.tZ)("a",{href:r.homepageURL,rel:"noreferrer noopener",target:"_blank",children:r.homepageURL}),isExpanded:w}):null,h&&w?(0,L.tZ)(e9,{content:h,isExpanded:w}):null,r.author&&w?(0,L.tZ)(e9,{content:(0,L.tZ)(e1,{author:r.author}),isExpanded:w}):null]})}),b?(0,L.tZ)(eY.E,{css:e6.error,colorway:"negative",icon:(0,L.tZ)(ej.Z,{}),text:"Couldn't ".concat(g?"uninstall":"install"," package. See Console for details, or try again.")}):null,(0,L.tZ)(K.G,{css:e6.actions,children:b?(0,L.BX)(L.HY,{children:[(0,L.tZ)(eV.zx,{css:e6.consoleButton,text:"Console",onClick:function(){o()},disabled:p||v,colorway:"primary",iconLeft:(0,L.tZ)(ez.Z,{})}),(0,L.tZ)(eV.zx,{css:e6.actionButton,text:"Try Again",onClick:function(){(null==l?void 0:l.id)&&(f(l.id,[r]),g?_({id:l.id,pkg:r}):C({id:l.id,pkg:r}))},loading:p||v,colorway:g?"red":void 0,variant:g?"outlined":void 0,iconLeft:(0,L.tZ)(e3,{isInstalled:g,isInQueue:v,isCurrentAction:p})})]}):(0,L.BX)(L.HY,{children:[(0,L.tZ)(eV.zx,{css:e6.actionButton,text:p?(null==u?void 0:u.kind)===eI.TH.Install?"Installing":"Removing":v?(null==m?void 0:m.kind)===eI.TH.Install?"Waiting to install":"Waiting to remove":g?"Remove":"Install",onClick:function(){(null==l?void 0:l.id)&&(g?_({id:l.id,pkg:r}):C({id:l.id,pkg:r}))},loading:p||v,colorway:g?"red":void 0,variant:g?"outlined":void 0,iconLeft:(0,L.tZ)(e3,{isInstalled:g,isInQueue:v,isCurrentAction:p})}),v?(0,L.tZ)(eV.zx,{css:e6.cancelButton,text:"Cancel",onClick:function(){r.name&&S(r.name)},disabled:p,loading:p}):null]})})]})}function tt(e){var t,n,r=e.pkg,i=e.openConsole,o=eH(r),a=o?(0,eM._)((0,eO._)({},o),{version:null!==(t=r.spec)&&void 0!==t?t:o.version}):r;return(0,L.tZ)(te,{name:null!==(n=null==o?void 0:o.prettyName)&&void 0!==n?n:void 0,pkg:a,isMetadataLoading:null===o,openConsole:i})}function tn(e){return(0,L.tZ)("a",(0,eO._)({href:"https://docs.replit.com/programming-ide/installing-packages",target:"_blank",rel:"noreferrer"},e))}var tr=(0,ee.X)({root:[J.l0.colWithGap(8),{"@container (min-width: 600px)":[J.l0.colWithGap(0),J.l0.align.start,{display:"grid",gridTemplate:"auto / 1fr 1fr",gap:J.TV.space8}],"@container (min-width: 1200px)":[{display:"grid",gridTemplate:"auto / 1fr 1fr 1fr",gap:J.TV.space8}]}]});function ti(e){return(0,L.tZ)(K.G,(0,eM._)((0,eO._)({},e),{css:tr.root}))}var to=n(23291);function ta(e){var t=e.name,n=e.openConsole,r=eH({name:t});return(0,L.tZ)(te,{pkg:null!=r?r:{name:t},isMetadataLoading:null===r,openConsole:n,pills:[(0,L.tZ)(to.D,{text:"Suggested",colorway:"primary"},"suggested")]})}var tl=(0,ee.X)({packages:[J.l0.pt(8)],separator:[J.l0.backgroundColor.backgroundHigher,J.l0.height(1),J.l0.borderRadius(1),J.l0.mt(6),{border:"none",marginLeft:"auto",marginRight:"auto",width:"95%"}]});function tc(e){var t=e.openConsole,n=eL(),r=(0,eI.te)(null==n?void 0:n.id),i=(0,eI.B2)(),o=(0,eI.cW)(),a=[];switch(null==n?void 0:n.language){default:return null;case"nodejs":a=["express","discord.js","axios","moment","node-fetch","chalk"];break;case"python3":a=["replit","requests","pandas","discord","matplotlib","flask"]}var l=function(e){if(r.find(function(t){var n;return(null===(n=t.name)||void 0===n?void 0:n.toLowerCase())===e})||(i&&i.kind===eI.TH.Install?i.pkgs.find(function(t){var n;return(null===(n=t.name)||void 0===n?void 0:n.toLowerCase())===e}):null))return!0;var t=!0,n=!1,a=void 0;try{for(var l,c=o[Symbol.iterator]();!(t=(l=c.next()).done);t=!0){var s=l.value;if(s.kind===eI.TH.Install&&s.pkgs.find(function(t){var n;return(null===(n=t.name)||void 0===n?void 0:n.toLowerCase())===e}))return!0}}catch(e){n=!0,a=e}finally{try{t||null==c.return||c.return()}finally{if(n)throw a}}return!1},c=a.filter(function(e){return!l(e)}).map(function(e){return(0,L.tZ)(ta,{name:e,openConsole:t},e)});return c.length>0?(0,L.BX)(L.HY,{children:[(0,L.tZ)("hr",{css:tl.separator}),(0,L.tZ)(ti,{css:tl.packages,children:c})]}):null}var ts=(0,ee.X)({root:[J.l0.maxWidth(800),J.l0.width("100%"),{marginLeft:"auto",marginRight:"auto","@container (min-width: 1200px)":[J.l0.maxWidth(1400)]}],header:[J.l0.flex.row,J.l0.justify.spaceBetween,J.l0.py(4)],headerLeft:[J.l0.rowWithGap(4),J.l0.align.center],headerLoadingIcon:[J.l0.px(4)],headerRight:[J.l0.rowWithGap(4)],headerTitle:[{textTransform:"capitalize"}],packages:[J.l0.pt(8)],empty:[J.l0.pt(8),J.l0.colWithGap(8),J.l0.width("100%")],packagesWrapper:[J.l0.colWithGap(8),J.l0.width("100%")]});function tu(e){var t=e.openFile,n=e.openConsole,r=eL(),i=(0,eI.te)(null==r?void 0:r.id),o=(0,eI.$z)(null==r?void 0:r.id),a=(0,eI.cW)(),l=(0,eI.B2)(),c=(0,M._)((0,X.useState)(!0),2),s=c[0],u=c[1];if(null===r)return null;if(!o||o===eI.C0.Uninitialized||o===eI.C0.Initializing)return(0,L.tZ)(K.G,{css:ts.root,children:(0,L.BX)(K.G,{css:ts.header,children:[(0,L.BX)(K.G,{css:ts.headerLeft,children:[(0,L.tZ)(eD.u,{tooltip:"Loading",children:(0,L.tZ)(K.G,{css:ts.headerLoadingIcon,children:(0,L.tZ)(eR.Z,{})})}),(0,L.BX)(Q.h4,{css:ts.headerTitle,variant:"subheadDefault",level:2,children:[r.language," Packages"]})]}),(0,L.tZ)(K.G,{css:ts.headerRight,children:r.packagerFiles.length>0?(0,L.tZ)(eE.hU,{alt:"Open ".concat(r.packagerFiles[0]),onClick:function(){r&&t(r.packagerFiles[0])},children:(0,L.tZ)(eT.Z,{})}):null})]})});var d=l&&l.id===r.id&&l.kind===eI.TH.Install?l.pkgs:[],f=a.flatMap(function(e){return e.id===r.id&&e.kind===eI.TH.Install?e.pkgs:[]}),h=(0,e_._)(d).concat((0,e_._)(f),(0,e_._)(i));return(0,L.BX)(K.G,{css:ts.root,children:[(0,L.BX)(K.G,{css:ts.header,children:[(0,L.BX)(K.G,{css:ts.headerLeft,children:[h.length>0?(0,L.tZ)(eE.hU,{alt:"Show packages",tooltipHidden:!0,onClick:function(){return u(function(e){return!e})},children:(0,L.tZ)(ek.Z,{rotate:s?90:0})}):null,(0,L.BX)(Q.h4,{css:ts.headerTitle,variant:"subheadDefault",level:2,children:[r.language," Packages"]})]}),(0,L.tZ)(K.G,{css:ts.headerRight,children:0===h.length?(0,L.tZ)(Q.h4,{level:3,children:"No Packages Installed."}):(0,L.BX)(L.HY,{children:[(0,L.BX)(Q.h4,{level:3,children:["Installed ",h.length," ",(0,eS.Z)("package",h.length)]}),r.packagerFiles.length>0?(0,L.tZ)(eE.hU,{alt:"Open ".concat(r.packagerFiles[0]),onClick:function(){r&&t(r.packagerFiles[0])},children:(0,L.tZ)(eT.Z,{})}):null]})})]}),s?(0,L.BX)(K.G,{css:0===h.length?ts.empty:ts.packagesWrapper,children:[0===h.length?(0,L.BX)(Q.xv,{children:["You don't have any packages installed."," ",r.packageSearch?(0,L.BX)(L.HY,{children:["Try searching for a package to install, or"," ",(0,L.tZ)(tn,{children:"learn more about packages here"}),"","."]}):(0,L.BX)(Q.xv,{children:[(0,L.tZ)(tn,{children:"Learn more about packages here"}),"","."]})]}):null,h.length>0?(0,L.tZ)(L.HY,{children:(0,L.tZ)(ti,{css:ts.packages,children:h.sort(function(e,t){return(null==e?void 0:e.name)?(null==t?void 0:t.name)?e.name.localeCompare(t.name):-1:1}).map(function(e){return(0,L.tZ)(tt,{pkg:e,openConsole:n},e.name)})})}):null,(0,L.tZ)(tc,{openConsole:n})]}):null]})}var td=n(13225),tf=n(54843);function th(e){var t,n,r=e.onResults,i=e.onLoading,o=e.className,a=eL(),l=(0,M._)((0,X.useState)(""),2),c=l[0],s=l[1],u=(0,X.useRef)(0),d=function(){u.current++,null==r||r(null),null==i||i(!1)},f=(t=(0,z.Z)(),n=(0,eA.lV)((0,X.useCallback)(function(e){return e(eU)},[eU]),{store:eN()}),(0,X.useCallback)(function(e){var r=n();return(null==r?void 0:r.id)?(0,eW.C)(r.id).search({id:r.id,query:e,services:t}):[]},[]));(0,td.Z)(function(){if(""!==c.trim()){var e,t=++u.current;(e=(0,eX._)(function(){var e;return(0,eF.Jh)(this,function(n){switch(n.label){case 0:return null==i||i(!0),[4,f(c)];case 1:if(e=n.sent(),t!==u.current)return[2];return null==r||r(null!=e?e:[]),null==i||i(!1),[2]}})}),function(){return e.apply(this,arguments)})()}},[c],500);var h=(0,X.useRef)(null);return(0,X.useEffect)(function(){h.current&&h.current.focus()},[]),(0,L.tZ)(K.G,{className:o,children:(0,L.tZ)(tf.E,{inputRef:h,value:c,onChange:function(e){""===e.target.value.trim()&&d(),s(e.target.value)},onClear:function(){s(""),d()},placeholder:a?"Search ".concat(a.language," packages"):void 0})})}var tp=(0,ee.X)({root:[J.l0.maxWidth(800),J.l0.width("100%"),{marginLeft:"auto",marginRight:"auto","@container (min-width: 1200px)":[J.l0.maxWidth(1400)]}],skeleton:[J.l0.borderRadius(8),J.l0.p(8),eq.p.backgroundPulse(),J.l0.height(128)]});function tm(){return(0,L.tZ)(K.G,{css:tp.root,children:(0,L.tZ)(ti,{children:Array.from({length:3},function(e,t){return(0,L.tZ)(e$.Tg,{css:tp.skeleton,elevated:!0},"SearchLoading-".concat(t))})})})}function tv(e){var t,n=e.pkg,r=e.openConsole,i=eL(),o=eH(n),a=o?(0,eM._)((0,eO._)({},o),{version:null!==(t=n.spec)&&void 0!==t?t:o.version}):n,l=(null==i?void 0:i.id)==="nix"?null==o?void 0:o.prettyName:void 0;return(0,L.tZ)(te,{name:l,pkg:a,isMetadataLoading:null===o,openConsole:r})}function tg(e){var t=e.pkg,n=e.openConsole;return(0,L.tZ)(te,{pkg:t,openConsole:n})}var ty=(0,ee.X)({root:[J.l0.colWithGap(8),J.l0.maxWidth(800),J.l0.width("100%"),{marginLeft:"auto",marginRight:"auto","@container (min-width: 1200px)":[J.l0.maxWidth(1400)]}],results:[J.l0.colWithGap(8)],empty:[J.l0.flex.row,J.l0.justify.center]});function tb(e){var t=e.results,n=e.openConsole,r=eL(),i=(null==r?void 0:r.id)==="nix"?tv:tg;return(0,L.tZ)(K.G,{css:ty.root,children:(0,L.tZ)(K.G,{css:ty.results,children:0===t.length?(0,L.tZ)(Q.xv,{color:"dimmer",css:ty.empty,children:"No Packages Found"}):(0,L.tZ)(ti,{children:t.map(function(e){return(0,L.tZ)(i,{pkg:e,openConsole:n},e.name)})})})})}var tZ=n(40664),tw=n(58719),tx=(0,ee.X)({root:[J.l0.p(8),J.l0.borderRadius(8),J.l0.colWithGap(16)],header:[J.l0.flex.row,J.l0.align.center,J.l0.justify.spaceBetween],headerLeft:[J.l0.rowWithGap(4),J.l0.align.center],headerRight:[],content:[J.l0.display.block]});function tC(e){var t=e.title,n=e.onClose,r=e.children,i=(0,M._)((0,X.useState)(!0),2),o=i[0],a=i[1];return(0,L.BX)(e$.Tg,{elevated:!0,css:tx.root,children:[(0,L.BX)(K.G,{css:tx.header,children:[(0,L.BX)(K.G,{css:tx.headerLeft,children:[(0,L.tZ)(Q.h4,{level:2,variant:"subheadDefault",children:t}),(0,L.tZ)(eE.hU,{alt:o?"Minimize tip information":"Expand tip information",tooltipHidden:!0,onClick:function(){return a(function(e){return!e})},children:(0,L.tZ)(ek.Z,{rotate:o?90:0})})]}),(0,L.tZ)(K.G,{css:tx.headerRight,children:(0,L.tZ)(eE.hU,{alt:"Dismiss tip",tooltipHidden:!0,onClick:n,children:(0,L.tZ)(tw.Z,{})})})]}),o?(0,L.tZ)(K.G,{css:tx.content,children:r}):null]})}var t_=(0,ee.X)({root:[J.l0.colWithGap(8),J.l0.pb(24)]});function tS(){var e=(0,tZ.Z)("packager","show_packager_about_tooltip"),t=(0,tZ.Z)("packager","show_packager_import_tooltip");return((0,X.useEffect)(function(){e.register()},[e]),(0,X.useEffect)(function(){t.register()},[t]),e.shouldDisplay||t.shouldDisplay)?(0,L.BX)(K.G,{css:t_.root,children:[e.shouldDisplay?(0,L.BX)(tC,{title:"What are packages?",onClose:e.dismiss,children:["Packages are collections of code that can extend the functionality of your programs. For example, you could add a package to make adding image carousels easier on websites, or a package to manage currency comparisons."," ",(0,L.tZ)(tn,{children:"Learn more about packages"}),"","."]}):null,t.shouldDisplay?(0,L.tZ)(tC,{title:"Tip—Auto Import",onClose:t.dismiss,children:"If you know which packages you want to use, you can just import and use them in your files as if they were already installed, and they will be installed automatically the next time you run the Repl."}):null]}):null}var tE=n(16278),tk=n(50199);function tT(e){var t=e.children,n=e.config,r=(0,eB.b9)(eU,{store:eN()});return(0,X.useEffect)(function(){(null==n?void 0:n.id)&&r(n)},[n]),(0,L.tZ)(L.HY,{children:t})}function tR(e){var t=e.children,n=e.config,r=(0,M._)((0,X.useState)(function(){return(0,eG.MT)()}),1)[0];return(0,L.tZ)(eP.Provider,{value:r,children:n?(0,L.tZ)(tT,{config:n,children:t}):t})}var tD=(0,ee.X)({root:[J.l0.pt(16),J.l0.p(8),{containerType:"inline-size"}],center:[J.l0.width("100%"),J.l0.maxWidth(600),J.l0.colWithGap(4),{marginLeft:"auto",marginRight:"auto","@container (min-width: 400px)":[J.l0.maxWidth(800)],"@container (min-width: 1200px)":[J.l0.maxWidth(1400)]}],title:[],content:[J.l0.pt(8),J.l0.colWithGap(16)],search:[J.l0.rowWithGap(8),J.l0.width("100%")],searchInput:[J.l0.flex.grow(1)],configSelect:[],packages:[J.l0.colWithGap(16)]});function tI(e){var t,n,r,i,o,a=e.openFile,l=e.openConsole,c=(0,tE.I)(),s=(0,tk.Z)(function(){return c.filter(function(e){return"nix"!==e.id})},[c]),u=(0,M._)((t=(0,tE.I)(),n=(0,tk.Z)(function(){return t.filter(function(e){return"nix"!==e.id})},[t]),i=(r=(0,M._)((0,X.useState)(null),2))[0],o=r[1],(0,X.useEffect)(function(){n.length>0&&(null==i||!n.find(function(e){return e&&e.id===i.id}))&&o(n[0])},[i,n]),[i,o]),2),d=u[0],f=u[1],h=(0,M._)((0,X.useState)(null),2),p=h[0],m=h[1],v=(0,M._)((0,X.useState)(!1),2),g=v[0],y=v[1],b=null;return b=null!==p?(0,L.tZ)(tb,{results:p,openConsole:l}):g?(0,L.tZ)(tm,{}):(0,L.tZ)(L.HY,{children:s.map(function(e){return e.id===(null==d?void 0:d.id)?(0,L.tZ)(tu,{openFile:a,openConsole:l},e.id):(0,L.tZ)(tR,{config:e,children:(0,L.tZ)(tu,{openFile:a,openConsole:l})},e.id)})}),(0,L.tZ)(K.G,{css:tD.root,children:(0,L.tZ)(K.G,{css:tD.center,children:0===s.length?(0,L.BX)(K.G,{children:[(0,L.tZ)(Q.h4,{level:2,variant:"subheadBig",children:"Sorry, packages are not configured for this Repl."}),(0,L.tZ)(Q.xv,{variant:"subheadDefault",children:"We are working on making more features configurable and packages available for more languages, check back again in the future."})]}):(0,L.BX)(L.HY,{children:[(0,L.tZ)(tS,{}),(0,L.tZ)(Q.h4,{css:tD.title,level:2,variant:"subheadBig",children:"Packages"}),(0,L.tZ)(K.G,{css:tD.content,children:(0,L.BX)(tR,{config:d,children:[(0,L.BX)(K.G,{css:tD.search,children:[(null==d?void 0:d.packageSearch)?(0,L.tZ)(th,{css:tD.searchInput,onResults:m,onLoading:y}):(0,L.tZ)(K.G,{css:tD.searchInput}),s.length>1&&(0,L.tZ)(eC.P,{css:tD.configSelect,items:s,selectedItem:d,onChange:function(e){return f(e)},"aria-label":"Select packager configuration"})]}),(0,L.tZ)(K.G,{css:tD.packages,children:b})]})})]})})})}var tG=n(12506),tB=ed.Dy.Object({type:ed.Dy.Literal("packager")}),tA={Content:function(e){var t=e.options;return(0,L.tZ)(tI,{openFile:function(e){return t.performPaneOperation({operation:"open",pane:(0,tG.$E)(e),secondary:!0})},openConsole:function(){t.performPaneOperation({operation:"open",pane:{type:"runnerOutput"},secondary:!0})}})},Icon:function(e){var t=e.size;return(0,L.tZ)(ex.Z,{size:t})},getTitle:function(){return"Packages"},decode:function(e){return ef.B4.Decode(tB,e)}},tP=n(33081),tN=(0,ee.X)({root:[J.l0.pt(16),J.l0.p(8)],center:[J.l0.width("100%"),J.l0.maxWidth(600),J.l0.colWithGap(4),{marginLeft:"auto",marginRight:"auto","@container (min-width: 400px)":[J.l0.maxWidth(800)],"@container (min-width: 1200px)":[J.l0.maxWidth(1400)]}],title:[],content:[J.l0.pt(8),J.l0.colWithGap(16)],search:[J.l0.rowWithGap(8),J.l0.width("100%")],searchInput:[J.l0.flex.grow(1)],packages:[J.l0.colWithGap(16)]}),tU=function(){};function tL(e){var t=e.openConsole,n=(0,tE.I)(),r=(0,tk.Z)(function(){return n.find(function(e){return"nix"===e.id})},[n]),i=(0,M._)((0,X.useState)(null),2),o=i[0],a=i[1],l=(0,M._)((0,X.useState)(!1),2),c=l[0],s=l[1],u=null;return u=null!==o?(0,L.tZ)(tb,{results:o,openConsole:t}):c?(0,L.tZ)(tm,{}):(null==r?void 0:r.id)?(0,L.tZ)(tu,{openFile:tU,openConsole:t},r.id):null,(0,L.tZ)(tR,{config:r,children:(0,L.tZ)(K.G,{css:tN.root,children:(0,L.BX)(K.G,{css:tN.center,children:[(0,L.tZ)(Q.h4,{css:tN.title,level:2,variant:"subheadBig",children:"System Dependencies"}),(0,L.BX)(K.G,{css:tN.content,children:[(null==r?void 0:r.packageSearch)?(0,L.tZ)(K.G,{css:tN.search,children:(0,L.tZ)(th,{css:tN.searchInput,onResults:a,onLoading:s})}):null,(0,L.tZ)(K.G,{css:tN.packages,children:u})]})]})})})}var tO=ed.Dy.Object({type:ed.Dy.Literal("systemDependencies")}),tM={Content:function(e){var t=e.options;return(0,L.tZ)(tL,{openConsole:function(){t.performPaneOperation({operation:"open",pane:{type:"runnerOutput"},secondary:!0})}})},Icon:function(e){var t=e.size;return(0,L.tZ)(tP.Z,{size:t})},getTitle:function(){return"System Dependencies"},decode:function(e){return ef.B4.Decode(tO,e)}},tX=n(10454),tF=n(52902),tW=n(95025),tH=n(18836),tV=n(88883),tz=n(12874),tj=n(5344),tq=n(10041),tY=(0,ee.X)({button:{width:"fit-content"}});function t$(e){var t=e.code,n=e.activeFile,r=(0,tV.Z)(n),i=r?{text:"Insert",iconRight:(0,L.tZ)(tz.Z,{}),onClick:function(){return r({code:t,insertAt:"end"})}}:{text:"Copy",iconLeft:(0,L.tZ)(tj.Z,{}),onClick:function(){return(0,tq.Z)(t)}};return(0,L.tZ)(e$.Tg,{background:"default",children:(0,L.tZ)(eV.zx,(0,eO._)({size:"small",variant:"outlined",css:tY.button},i))})}var tJ=(0,ee.X)({self:J.l0.colWithGap(4),content:[J.l0.rowWithGap(4),J.l0.backgroundColor.backgroundRoot,J.l0.borderRadius(4),J.l0.p(4),J.l0.align.center,{width:"fit-content"}]});function tK(e){var t=e.method,n=e.content,r=e.activeFile,i=(0,M._)((0,X.useState)(n),2),o=i[0],a=i[1];return(0,L.BX)(K.G,{css:tJ.self,children:[(0,L.tZ)(t4,{title:t}),(0,L.tZ)(K.G,{css:tJ.content,children:o.map(function(e,n){var r="".concat(t,"-").concat(n);return"input"===e.type?(0,L.tZ)(t0,{i:n,value:e.value,placeholder:e.placeholder,setContent:a},r):(0,L.tZ)(t2,{value:e.value},r)})}),(0,L.tZ)(t$,{code:o.reduce(function(e,t){return e+(t.value||("input"===t.type?t.placeholder:""))},""),activeFile:r})]})}var tQ=(0,ee.X)({self:[J.l0.width(64),J.l0.height(24),J.l0.zIndex(1)]});function t0(e){var t=e.i,n=e.value,r=e.placeholder,i=e.setContent;return(0,L.tZ)(tH.II,{onChange:function(e){i(function(n){return n.map(function(n,r){return t===r?(0,eM._)((0,eO._)({},n),{value:e.target.value}):n})})},placeholder:r,value:n||"",css:tQ.self})}var t1=(0,ee.X)({self:[J.l0.borderRadius(0),J.l0.backgroundColor.backgroundRoot],code:[J.l0.font.code,J.l0.color.greyStronger,J.l0.p(4)]});function t2(e){var t=e.value;return(0,L.tZ)(K.G,{css:t1.self,children:(0,L.tZ)(Q.xv,{css:t1.code,multiline:!1,children:t})})}var t8=(0,ee.X)({self:J.l0.rowWithGap(4),bold:{fontWeight:J.TV.fontWeightMedium}});function t4(e){var t=e.title,n=(0,M._)((0,tk.Z)(function(){var e=(0,tW._)(t.split(" "));return[e[0],e.slice(1).join(" ")]},[t]),2),r=n[0],i=n[1];return(0,L.BX)(K.G,{css:t8.self,children:[(0,L.tZ)(Q.xv,{css:t8.bold,multiline:!1,children:r}),(0,L.tZ)(Q.xv,{color:"dimmer",multiline:!1,children:i})]})}(o=y||(y={})).IMPORT="Import the database",o.CREATE="Create a new database",o.SET="Set a key to a value",o.GET="Get a key's value",o.DELETE="Delete a key",o.LIST="List all keys",o.LIST_PREFIX="List keys with a prefix";var t3={language:"Bash",methods:[t7("Set a key to a value","curl $REPLIT_DB_URL -d '{{key}} = {{value}}'"),t7("Get a key's value","curl $REPLIT_DB_URL/{{key}}"),t7("Delete a key","curl -XDELETE $REPLIT_DB_URL/{{key}}"),t7("List all keys",'curl "$REPLIT_DB_URL?prefix={{key}}"')]},t5={language:"Node",methods:[t7("Import the database",'const Database = require("@replit/database")'),t7("Create a new database","const db = new Database()"),t7("Set a key to a value",'db.set("{{key}}", "{{value}}").then(() => {})'),t7("Get a key's value",'db.get("{{key}}").then(value => {})'),t7("Delete a key",'db.delete("{{key}}").then(() => {})'),t7("List all keys","db.list().then(keys => {})"),t7("List keys with a prefix",'db.list("{{prefix}}").then(matches => {})')]},t6={language:"Go",methods:[t7("Import the database",'import "github.com/replit/database-go"'),t7("Set a key to a value",'db.Set("{{key}}", "{{value}}")'),t7("Get a key's value",'value, _ := database.Get("{{key}}")'),t7("Delete a key",'database.Delete("{{key}}")'),t7("List all keys",'keys, _ := database.ListKeys("")'),t7("List keys with a prefix",'matches, _ := database.ListKeys("{{prefix}}")')]},t9={language:"Python",methods:[t7("Import the database","from replit import db"),t7("Set a key to a value",'db["{{key}}"] = "{{value}}"'),t7("Get a key's value",'db["{{key}}"]'),t7("Delete a key",'del db["{{key}}"]'),t7("List all keys","keys = db.keys()"),t7("List keys with a prefix",'matches = db.prefix("{{prefix}}")')]};function t7(e,t){return{method:e,content:function(e){for(var t=[],n=0;n<e.length;){var r=e.indexOf("{{",n),i=e.indexOf("}}",n);if(-1===r||-1===i){t.push({type:"code",value:e.substring(n)});break}t.push({type:"code",value:e.substring(n,r)}),t.push({type:"input",placeholder:e.substring(r+2,i)}),n=i+2}return t}(t)}}var ne=(0,ee.X)({self:J.l0.colWithGap(24),code:[J.l0.font.code,J.l0.color.greyStronger,J.l0.backgroundColor.backgroundRoot,J.l0.p(4),J.l0.borderRadius(4)]});function nt(e){var t=e.activeFile,n=(0,tk.Z)(function(){return function(e){switch(e?(0,eu.r6)(e):"bash"){case"js":case"ts":case"tsx":case"jsx":case"mjs":return t5;case"go":return t6;case"py":return t9;default:return t3}}(t)},[t]);return(0,L.BX)(K.G,{css:ne.self,children:[(0,L.BX)(Q.xv,{color:"dimmer",children:["You can use the Database from any Repl by making HTTP requests or a client library as outlined below. We’ve set an environment variable called ",(0,L.tZ)("code",{css:ne.code,children:"REPLIT_DB_URL"})," in your Repl if you'd like to interact with the database directly."]}),n.methods.map(function(e){return(0,L.tZ)(tK,{method:e.method,content:e.content,activeFile:t},"".concat(n.language).concat(e.method))})]})}var nn=n(75246),nr=(0,ee.X)({children:[J.l0.p(12),J.l0.colWithGap(8)]});function ni(e){var t=e.title,n=e.defaultExpanded,r=e.children;return(0,L.tZ)(nn.Q,{defaultExpanded:n,headerContent:(0,L.tZ)(Q.xv,{variant:"subheadDefault",multiline:!1,children:t}),children:(0,L.tZ)(K.G,{css:nr.children,children:r})})}var no=n(51384),na=n(3630),nl=(0,no.F4)("from{opacity:0}to{opacity:1}"),nc=(0,ee.X)({self:[J.l0.colWithGap(8),{animation:"".concat(nl," 100ms forwards ease-in-out alternate")}],selfLoadingText:[J.l0.height(16),J.l0.width(48),J.l0.borderRadius(4),eq.p.backgroundPulse()],selfLoading:[J.l0.height(12),J.l0.borderRadius(16),eq.p.backgroundPulse()],text:[J.l0.rowWithGap(4)],textSpan:[J.l0.width("fit-content"),J.l0.display.inlineFlex]});function ns(e){var t,n,r=e.database,i=e.loading,o=(null==r?void 0:r.sizeMB)||0,a=(t=1e6*(t=o)/1048576,"".concat(t.toFixed(),"/50 MiB")),l=i||!r;return(0,L.tZ)(K.G,{css:nc.self,children:l?(0,L.BX)(L.HY,{children:[(0,L.tZ)(K.G,{css:nc.selfLoadingText}),(0,L.tZ)(K.G,{css:nc.selfLoading})]}):(0,L.BX)(L.HY,{children:[(0,L.BX)(Q.xv,{color:"dimmer",css:nc.text,multiline:!1,children:[(0,L.tZ)(K.K.span,{css:nc.textSpan,children:a}),(0,L.tZ)(K.K.span,{css:nc.textSpan,children:"|"}),(0,L.tZ)(K.K.span,{css:nc.textSpan,children:(n=(n=null==r?void 0:r.keysCount)||0,"".concat(n," ").concat((0,eS.Z)("key",n)))})]}),(0,L.tZ)(na.J,{current:o,total:50,tooltip:a})]})},l?"databaseLoadingStats":"databaseLoadedStats")}var nu=n(50782),nd=n(93295),nf=n(23982),nh=n(77393);function np(){var e=(0,nd._)(["\n  fragment DatabaseUsage on Database {\n    id\n    keysCount\n    sizeMB\n  }\n"]);return np=function(){return e},e}function nm(){var e=(0,nd._)(["\n  query Database($replID: String!) {\n    repl(id: $replID) {\n      ... on Repl {\n        id\n        database {\n          id\n          ...DatabaseUsage\n        }\n      }\n    }\n    currentUser {\n      id\n      isLoggedIn\n    }\n  }\n  ","\n"]);return nm=function(){return e},e}var nv={},ng=(0,nf.Ps)(np()),ny=(0,nf.Ps)(nm(),ng),nb=n(73524),nZ=n(58091),nw=(0,ee.X)({self:[J.l0.colWithGap(16),J.l0.p(8),J.l0.backgroundColor.backgroundDefault,tF.F3],link:[J.l0.color.accentPrimaryStronger,J.l0.pr(4)],sectionWrapper:[J.l0.colWithGap(16),J.l0.overflowY("auto"),J.l0.width("100%"),{flex:"1"}]});function nx(e){var t,n,r,i,o,a,l,c,s,u=e.performPaneOperation,d=(l=(i={variables:{replID:(0,nu.Z)()},pollInterval:1e4},o=(0,eO._)({},nv,i),a=nh.a(ny,o)).data,c=a.error,s=a.loading,l&&("Repl"===l.repl.__typename?n=null==l?void 0:null===(r=l.repl)||void 0===r?void 0:r.database:t="Could not fetch Database info"),c&&("GraphQL error: You don't have access to this database"===c.message?n=null:t=c.message),{db:n,loading:s,error:t}),f=d.db,h=d.error,p=d.loading,m=(0,nZ.R3)();return(0,L.BX)(K.G,{css:nw.self,children:[(0,L.tZ)(Q.h4,{level:2,variant:"subheadBig",children:"Database"}),(0,L.BX)(K.G,{css:nw.sectionWrapper,children:[(0,L.BX)(K.G,{children:[(0,L.BX)(Q.xv,{children:[(0,L.tZ)("a",{href:nb.TT.REPL_DATABASE,target:"_blank",rel:"noopener",onClick:function(e){e.preventDefault(),u({operation:"open",pane:{type:"docs",data:{url:nb.TT.REPL_DATABASE}}})},children:"Replit Database"})," ","is a free, easy to use key-value store. No configuration is necessary, so you can start using it right away."]}),h?(0,L.tZ)(Q.xv,{css:[J.l0.color.accentNegativeStronger],children:h}):null]}),(0,L.tZ)(ni,{title:"Database Info",defaultExpanded:!0,children:(0,L.tZ)(ns,{database:f,loading:p})}),(0,L.tZ)(ni,{title:"Using the database",defaultExpanded:!0,children:(0,L.tZ)(nt,{activeFile:m})})]})]})}var nC=ed.Dy.Object({type:ed.Dy.Literal("database")}),n_={Content:function(e){var t=e.options.performPaneOperation;return(0,L.tZ)(nx,{performPaneOperation:t})},Icon:function(e){var t=e.size;return(0,L.tZ)(tX.Z,{size:t})},getTitle:function(){return"Database"},decode:function(e){return ef.B4.Decode(nC,e)}},nS=n(72986);function nE(){var e=(0,nd._)(["\n  mutation CreateNeonDatabase($input: CreateNeonDatabaseInput!) {\n    createNeonDatabase(input: $input) {\n      __typename\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on CreateNeonDatabaseResult {\n        databaseId\n        databaseName\n        projectId\n        connectionString\n        isFrozen\n        isBackedByCycles\n      }\n    }\n  }\n"]);return nE=function(){return e},e}function nk(){var e=(0,nd._)(["\n  mutation DeleteNeonDatabase($input: DeleteNeonDatabaseInput!) {\n    deleteNeonDatabase(input: $input) {\n      __typename\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on DeleteNeonDatabaseResult {\n        success\n      }\n    }\n  }\n"]);return nk=function(){return e},e}function nT(){var e=(0,nd._)(["\n  query GetNeonDatabases($input: GetNeonDatabasesInput!) {\n    getNeonDatabases(input: $input) {\n      __typename\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on GetNeonDatabasesResult {\n        databases {\n          databaseId\n          databaseName\n          projectId\n          connectionString\n          isFrozen\n          isBackedByCycles\n        }\n      }\n    }\n  }\n"]);return nT=function(){return e},e}function nR(){var e=(0,nd._)(["\n  mutation UnfreezeNeonDatabase($input: UnfreezeNeonDatabaseInput!) {\n    unfreezeNeonDatabase(input: $input) {\n      ... on UnfreezeNeonDatabaseResult {\n        success\n      }\n    }\n  }\n"]);return nR=function(){return e},e}var nD={},nI=(0,nf.Ps)(nE());function nG(e){var t=(0,eO._)({},nD,e);return nS.D(nI,t)}var nB=(0,nf.Ps)(nk());function nA(e){var t=(0,eO._)({},nD,e);return nS.D(nB,t)}var nP=(0,nf.Ps)(nT()),nN=(0,nf.Ps)(nR());function nU(e){var t=(0,eO._)({},nD,e);return nS.D(nN,t)}var nL=n(55534),nO=n(32377),nM=n(38265),nX=n(56917),nF=n(84357),nW=n(54277),nH=n(46053),nV=n(13729),nz=n(32665),nj={"td,th":{border:"1px solid "+J.TV.outlineDefault}},nq={"td,th":{paddingLeft:8,paddingTop:8,paddingBottom:8,paddingRight:8,whiteSpace:"nowrap"},"td:first-of-type,th:first-of-type":{paddingLeft:8}},nY={outline:"2px solid ".concat(J.TV.accentPrimaryDefault),outlineOffset:"-2px"},n$=(0,no.iv)({":focus:focus-visible":nY}),nJ=(0,no.iv)(nY),nK=(0,no.iv)([nq,nj,n$]),nQ=(0,no.iv)([J.l0.fontWeight.medium,nq,nj,n$]),n0=(0,no.iv)({"tbody > tr:hover":{backgroundColor:J.TV.backgroundHigher,cursor:"pointer"}});function n1(e){var t=e.type,n=e.style,r=e.children,i=(0,nW.LA)().rowGroupProps;return(0,L.tZ)(t,(0,eM._)((0,eO._)({},i),{style:n,children:r}))}function n2(e){var t=e.item,n=e.state,r=e.children,i=(0,X.useRef)(null),o=(0,nW.Qm)({node:t},n,i).rowProps;return(0,L.tZ)("tr",(0,eM._)((0,eO._)({css:nQ},o),{ref:i,children:r}))}function n8(e){var t,n=e.column,r=e.state,i=(0,X.useRef)(null),o=(0,nW.WY)({node:n},r,i).columnHeaderProps,a=(0,nH.Fx)(),l=a.isFocusVisible,c=a.focusProps;return(0,L.tZ)("th",(0,eM._)((0,eO._)({},(0,nV.dG)(o,c)),{css:[l&&nJ,n$],colSpan:n.colspan,style:{textAlign:(null!==(t=n.colspan)&&void 0!==t?t:1)>1?"center":"left"},ref:i,children:n.rendered}))}function n4(e){var t=e.item,n=e.children,r=e.state,i=(0,X.useRef)(null),o=(0,nW.U)({node:t},r,i).rowProps,a=(0,nH.Fx)(),l=a.isFocusVisible,c=a.focusProps;return(0,L.tZ)("tr",(0,eM._)((0,eO._)({css:[l&&nJ,nK]},(0,nV.dG)(o,c)),{ref:i,children:n}))}function n3(e){var t=e.cell,n=e.state,r=(0,X.useRef)(null),i=(0,nW.fs)({node:t},n,r).gridCellProps,o=(0,nH.Fx)(),a=o.isFocusVisible,l=o.focusProps;return(0,L.tZ)("td",(0,eM._)((0,eO._)({},(0,nV.dG)(i,l)),{css:[a&&nJ,n$],ref:r,children:t.rendered}))}function n5(e){var t=e.selectionMode,n=e.selectionBehavior,r=(0,nz.oy)((0,eM._)((0,eO._)({},e),{showSelectionCheckboxes:"multiple"===t&&"replace"!==n})),i=(0,X.useRef)(null),o=r.collection,a=(0,nW.x6)(e,r,i).gridProps;return(0,L.BX)("table",(0,eM._)((0,eO._)({},a),{ref:i,css:[(null==e?void 0:e.onRowAction)&&n0],style:{borderCollapse:"collapse"},children:[(0,L.tZ)(n1,{type:"thead",children:o.headerRows.map(function(e){return(0,L.tZ)(n2,{item:e,state:r,children:(0,e_._)(e.childNodes).map(function(e){return(0,L.tZ)(n8,{column:e,state:r},e.key)})},e.key)})}),(0,L.tZ)(n1,{type:"tbody",children:(0,e_._)(o.body.childNodes).map(function(e){return(0,L.tZ)(n4,{item:e,state:r,children:(0,e_._)(e.childNodes).map(function(e){return(0,L.tZ)(n3,{cell:e,state:r},e.key)})},e.key)})})]}))}var n6=function(e){var t=e.ariaTableProps,n=e.rows,r=e.columns;return(0,L.BX)(n5,(0,eM._)((0,eO._)({},t),{children:[(0,L.tZ)(nz.xD,{columns:r,children:function(e){return(0,L.tZ)(nz.sg,{children:e.value})}}),(0,L.tZ)(nz.RM,{items:n,children:function(e){return(0,L.tZ)(nz.X2,{children:function(t){return(0,L.tZ)(nz.bL,{children:e[t]})}})}})]}))};function n9(e){var t=e.headerColumns,n=e.bodyData,r=e.ariaLabel,i=e.scrollRef,o=e.onRowAction,a=t.map(function(e,t){return{key:"string"==typeof e?e:"".concat(t),value:e}}),l=n.map(function(e,n){for(var r={id:n},i=0;i<e.length;i++){var o=t[i];r["string"==typeof o?o:"".concat(i)]=e[i]}return r});return(0,L.tZ)(n6,{ariaTableProps:{selectionMode:"none","aria-label":void 0===r?"Database Table":r,onRowAction:o,scrollRef:i},columns:a,rows:l})}var n7=function(e,t){var n,r=(0,z.Z)().psql,i=(0,M._)(X.useState(),2),o=i[0],a=i[1],l=(0,M._)(X.useState(!1),2),c=l[0],s=l[1],u=X.useCallback((n=(0,eX._)(function(){return(0,eF.Jh)(this,function(n){switch(n.label){case 0:if(!e)return[2];n.label=1;case 1:return n.trys.push([1,,3,4]),s(!0),[4,r.run({query:e,connectionString:t})];case 2:return a(n.sent()),[3,4];case 3:return s(!1),[7];case 4:return[2]}})}),function(){return n.apply(this,arguments)}),[t,r,e]);return X.useEffect(function(){u()},[t,r,e,u]),{data:o,loading:c,refetch:u}},re=function(e){var t=e.rows,n=e.columns;return!Array.isArray(t)||t.length<1?null:{headerColumns:null!=n?n:[],bodyData:t.map(function(e){return Object.values(e)})}},rt=function(e){return n7("SELECT n.nspname as \"Schema\",\n  c.relname as \"Name\",\n  CASE c.relkind WHEN 'r' THEN 'table' WHEN 'v' THEN 'view' WHEN 'm' THEN 'materialized view' WHEN 'i' THEN 'index' WHEN 'S' THEN 'sequence' WHEN 's' THEN 'special' WHEN 'f' THEN 'foreign table' WHEN 'p' THEN 'partitioned table' WHEN 'I' THEN 'partitioned index' END as \"Type\",\n  pg_catalog.pg_get_userbyid(c.relowner) as \"Owner\",\n  pg_catalog.pg_size_pretty(pg_catalog.pg_total_relation_size(c.oid)) as \"Size\",\n  pg_catalog.obj_description(c.oid, 'pg_class') as \"Description\"\nFROM pg_catalog.pg_class c\n     LEFT JOIN pg_catalog.pg_namespace n ON n.oid = c.relnamespace\nWHERE c.relkind IN ('r','p','v','m','S','f','')\n      AND n.nspname <> 'pg_catalog'\n      AND n.nspname <> 'information_schema'\n      AND n.nspname !~ '^pg_toast'\n  AND pg_catalog.pg_table_is_visible(c.oid)\nORDER BY 1,2;",e.connectionString)},rn=(0,eG.cn)(void 0),rr=(0,eG.cn)(function(e){var t=e(rn);return null==t?void 0:t.rows.reduce(function(e,t){var n=t.table_name,r=t.column_name;return e[n]||(e[n]=[]),e[n].push(r),e},{})}),ri=function(e){var t=n7("SELECT table_name, column_name, data_type FROM information_schema.columns WHERE table_schema = 'public';",e.connectionString).data,n=(0,eB.b9)(rn);X.useEffect(function(){n(t)},[t,n])},ro=function(e){var t=e.tableName,n=e.connectionString;return n7("SELECT table_name, column_name, data_type FROM information_schema.columns WHERE table_schema = 'public' AND table_name = '".concat(t.replace(/"/g,'""'),"';"),n).data},ra=n(80711),rl=n(40102),rc=function(e){var t=e.headerTitle,n=e.onGoBack,r=e.children;return(0,L.BX)(K.G,{css:[J.l0.flex.column,J.l0.height("100%")],children:[(0,L.BX)(K.G,{css:[J.l0.flex.row,J.l0.py(16),J.l0.px(8),J.l0.align.center],children:[(0,L.tZ)(eE.hU,{alt:"Go back",size:28,type:"button",onClick:n,children:(0,L.tZ)(rl.Z,{})}),(0,L.tZ)(Q.xv,{css:[J.l0.fontSize(16),J.l0.ml(8)],multiline:!1,children:t})]}),(0,L.tZ)(K.G,{css:[J.l0.overflow("auto"),J.l0.height("calc(100% - 60px)")],children:r})]})},rs=n(59868),ru=function(e){(0,rs.j)(rs.U3.DATABASE_USED,(0,eO._)({type:"PostgreSQL",provider:"neon"},e))},rd=(0,eG.cn)(["databaseManager"]),rf=(0,eG.cn)(null,function(e,t,n){var r=e(rd);t(rd,(0,e_._)(r).concat([n])),ru({action:"pageNav",databasePage:n})}),rh=(0,eG.cn)(null,function(e,t){var n=e(rd);t(rd,n.slice(0,n.length-1))}),rp=(0,eG.cn)(function(e){var t=e(rd);return t[t.length-1]}),rm=function(){return(0,eB.Dv)(rp)},rv=function(){return(0,eB.b9)(rf)},rg=function(){return(0,eB.b9)(rh)},ry=n(18561),rb=n(40688),rZ=(0,eG.cn)(""),rw=(0,eG.cn)(null),rx=(0,eG.cn)(null,function(e,t,n){var r=n.query;r&&t(rZ,r);var i=e(rw);i&&i.dispatch({changes:{from:0,to:i.state.doc.length,insert:r}})}),rC=n(30911),r_=n.n(rC),rS=n(64461),rE=(0,n(15859).O4)("replDatabasesQueryHistory",[]),rk=function(e,t){return!e.isPinned&&t.isPinned?1:e.isPinned&&!t.isPinned?-1:"number"==typeof e.pinnedTimestamp&&"number"==typeof t.pinnedTimestamp?e.pinnedTimestamp-t.pinnedTimestamp:t.timestamp-e.timestamp},rT=function(e,t){var n=e.findIndex(function(e){return!e.isPinned&&e.data===t.data});-1!==n?e.splice(n,1,t):e.push(t),e.sort(rk);var r=e.filter(function(e){return!e.isPinned}).length;if(r>=5){var i=r-5;e.splice(e.length-i,i)}},rR=n(578),rD=n(50639),rI=n(20142),rG=n(81013),rB=n(54472),rA=n(75023),rP=n(29457),rN=n(37054),rU=n(50686),rL=n(2038),rO=n(50586),rM=n(48170),rX=n(25425),rF=n(45549),rW=n(11398),rH=function(e){var t=e.id,n=e.data,r=e.isPinned,i=(0,eA.lV)(X.useCallback(function(e,n){var r=e(rE).find(function(e){return e.id===t}),i=(null==r?void 0:r.data)||"";i&&(n(rx,{query:i}),ru({action:"queryHistoryItemSelected"}))},[t])),o=(0,eA.lV)(X.useCallback(function(e,n){var r=e(rE);n(rE,(0,rS.Uy)(r,function(e){var n=e.find(function(e){return e.id===t});n&&(n.isPinned=!n.isPinned,n.isPinned?n.pinnedTimestamp=Date.now():n.pinnedTimestamp=void 0),e.sort(rk)})),ru({action:"queryHistoryItemPinned"})},[t]));return(0,L.BX)(K.G,{css:[{borderTop:"1px solid ".concat(J.TV.outlineDefault),":hover":{background:J.TV.backgroundHigher}},J.l0.flex.row,J.l0.p(8),J.l0.color.foregroundDimmer,J.l0.align.center,J.l0.cursor.pointer],onClick:i,children:[(0,L.tZ)(Q.xv,{css:[J.l0.flex.growAndShrink(1)],multiline:!1,children:n}),(0,L.tZ)(eE.hU,{alt:"Pin query",onClick:o,children:r?(0,L.tZ)(rD.Z,{fill:J.TV.accentPrimaryDefault}):(0,L.tZ)(rb.Z,{})})]})},rV=function(e){var t=e.onExpand,n=(0,eB.Dv)(rE);return(0,L.tZ)(nn.Q,{onClick:t,headerContent:(0,L.BX)(K.G,{css:[J.l0.rowWithGap(8),J.l0.align.center,J.l0.p(2)],children:[(0,L.tZ)(ra.Z,{}),(0,L.tZ)(Q.xv,{css:[J.l0.color.foregroundDimmest],multiline:!1,children:"Query History"})]}),children:(0,L.tZ)(K.G,{css:[J.l0.colWithGap(8),J.l0.height("100%")],children:0===n.length?(0,L.tZ)(K.G,{css:[J.l0.p(8)],children:(0,L.tZ)(Q.xv,{css:[J.l0.color.foregroundDimmer],multiline:!1,children:"No query history"})}):(0,L.tZ)(K.G,{children:n.map(function(e){return(0,L.tZ)(rH,(0,eO._)({},e),e.id)})})})})},rz=new rP.R(function(){return(0,nM.W$)((0,rB.VV)((0,L.tZ)("div",{css:[{fontFamily:J.TV.fontFamilyCode},J.l0.color.foregroundDimmest],children:"Type PostgreSQL queries here to use the database."})))}),rj=new rA.j(function(e){return nF.Wl.high((0,nX.sql)((0,eO._)({dialect:nX.PostgreSQL},e)))}),rq=function(e){var t=e.queryResult,n=e.scrollRef;if(null==t?void 0:t.error)return(0,L.tZ)(K.G,{css:J.l0.px(8),children:(0,L.tZ)(Q.xv,{css:[J.l0.color.accentNegativeDefault],children:null==t?void 0:t.error})});if(!(null==t?void 0:t.rows))return null;var r=re(t);if(!r)return(0,L.tZ)(K.G,{css:J.l0.px(8),children:(0,L.tZ)(Q.xv,{css:[J.l0.color.accentPositiveDefault],children:"Query successful, no rows returned"})});var i=r.headerColumns,o=r.bodyData;return(0,L.tZ)(K.G,{css:J.l0.px(8),children:(0,L.tZ)(n9,{headerColumns:i,bodyData:o,scrollRef:n})})},rY=(0,no.iv)([J.l0.height("100%"),J.l0.position.relative,J.l0.overflow("auto")]),r$=(0,no.iv)([J.l0.position.sticky,J.l0.top(0),J.l0.left(0),J.l0.zIndex(1),J.l0.backgroundColor.backgroundDefault]),rJ=function(e){var t=e.connectionString,n=e.performPaneOperation,r=(0,M._)((0,eB.KO)(rZ),2),i=r[0],o=r[1],a=(0,rG.Z)(),l=a.ref,c=a.view,s=(0,M._)(X.useState(!1),2),u=s[0],d=s[1];X.useEffect(function(){return function(){var e;o(null!==(e=null==c?void 0:c.state.doc.toString())&&void 0!==e?e:"")}},[o,null==c?void 0:c.state.doc]);var f=(0,eB.b9)(rw);X.useEffect(function(){f(c)},[f,c]),ri({connectionString:t});var h=(0,eB.Dv)(rr),p=rM.q,m=(0,rR.Z)({filePath:p}),v=(0,z.Z)().psql,g=(0,M._)(X.useState(),2),y=g[0],b=g[1],Z=(0,M._)(X.useState(!1),2),w=Z[0],x=Z[1],C=(0,eA.lV)(X.useCallback(function(e,t,n){if(n){var r={id:r_()(),data:n,timestamp:Date.now()},i=e(rE);t(rE,(0,rS.Uy)(i,function(e){rT(e,r)}))}},[])),_=X.useCallback(function(){function e(){return(e=(0,eX._)(function(){var e;return(0,eF.Jh)(this,function(n){switch(n.label){case 0:if(!c)return[2];n.label=1;case 1:return n.trys.push([1,,3,4]),x(!0),C(e=null==c?void 0:c.state.doc.toString()),[4,v.run({query:e,connectionString:t})];case 2:return b(n.sent()),ru({action:"queryRan"}),[3,4];case 3:return x(!1),[7];case 4:return[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[t,v,C,c]),S=rv(),E=X.useCallback(function(){S("databaseManager")},[S]),k=X.useCallback(function(){S("tableSchemas")},[S]),T=X.useRef(null),R=rj.use({schema:h}),D=(0,rX.P5)({controlName:"flag-postgresql-pane-inline-ai"}),I=(0,rL.T3)(),G=(0,rN.Ls)({path:p}),B=(0,rN.jg)({path:p}),A=(0,rN.fD)({path:p}),P=(0,rO.W)({generateCode:G,editCode:B,explainCode:A,onMoreClick:void 0}),N=X.useCallback(function(){c&&G(c)},[c,G]),U=X.useCallback(function(){c&&B(c)},[c,B]),O=X.useCallback(function(e){return n({operation:"open",pane:e,secondary:!0})},[n]),F=X.useCallback(function(){O({type:"ghostwriterChat"})},[O]),W=(0,rU.W)({onGenerateCode:N,onEditCode:U,onReplyInChat:F}),H=(0,rF.u)({isMobile:I,generateCode:G,filePath:p,openPane:O});return(0,L.tZ)(rc,{headerTitle:"Database Contents",onGoBack:E,children:(0,L.BX)(K.G,{css:[J.l0.colWithGap(8),rY],innerRef:T,children:[(0,L.BX)(K.G,{css:[J.l0.colWithGap(8),J.l0.px(8),J.l0.pb(8),u?null:r$],children:[(0,L.BX)(K.G,{css:[{border:"1px solid ".concat(J.TV.outlineDefault)},J.l0.borderRadius(2)],children:[(0,L.tZ)(rI.ZP,{ref:l,filePath:p,css:[rW.Mp,J.l0.backgroundColor.backgroundDefault,J.l0.borderRadius(8),J.l0.overflow("auto"),J.l0.minHeight(100),J.l0.maxHeight(500),{".cm-panel":{zIndex:1}}],initialDoc:i,extensions:[D?[]:rz,R,m,D&&!I?P:[],D?W:[],D?H:[]]}),(0,L.tZ)(rV,{expanded:u,onExpand:function(){d(function(e){return!e})}})]}),(0,L.tZ)(eV.zx,{text:"Run Query",iconLeft:w?(0,L.tZ)(eR.Z,{}):(0,L.tZ)(nO.Z,{}),onClick:_,disabled:w})]}),(0,L.tZ)(rq,{queryResult:y,scrollRef:T}),(0,L.tZ)(K.G,{css:[J.l0.colWithGap(8),J.l0.px(8),J.l0.py(8)],children:(0,L.tZ)(eV.zx,{css:J.l0.backgroundColor.backgroundDefault,text:"Show All Contents",iconLeft:(0,L.tZ)(ry.Z,{}),onClick:k})})]})})},rK=n(48728),rQ=n(28268),r0=n(41500),r1=n(10981),r2="DATABASE_URL",r8="PGDATABASE",r4="PGHOST",r3="PGPORT",r5="5432",r6="PGUSER",r9="PGPASSWORD",r7=function(e){var t=e.envVarKey,n=e.envVarValue,r=e.isSecret,i=(0,r1.U)()("db-env-var-".concat(t)),o=(0,M._)(X.useState(!1),2),a=o[0],l=o[1];return(0,L.BX)(K.G,{css:[J.l0.flex.row,J.l0.flex.wrap,J.l0.align.end,J.l0.pb(8),{gap:J.TV.space8}],children:[(0,L.BX)(K.G,{css:[J.l0.colWithGap(8),{flexBasis:250},J.l0.flex.grow(0),J.l0.flex.shrink(1)],children:[(0,L.tZ)("label",{css:J.l0.color.foregroundDimmer,htmlFor:i,children:t}),(0,L.tZ)(tH.II,{id:i,type:!r||a?"text":"password",readOnly:!0,value:n})]}),(0,L.tZ)(eV.zx,{text:"Copy",iconLeft:(0,L.tZ)(rK.Z,{}),onClick:function(){(0,tq.Z)(n),ru({action:"envVarCopied",envVarKey:t,envVarType:"value"})}}),r?(0,L.tZ)(eV.zx,{text:"View",iconLeft:(0,L.tZ)(H.Z,{}),onClick:function(){return l(function(e){return!e})}}):null]})},ie=function(e){var t,n=e.connectionString,r=e.databaseName,i=new URL(n.replace("postgres://","https://")),o=i.host,a=i.username,l=i.password;return t={},(0,O._)(t,r2,n),(0,O._)(t,r8,r),(0,O._)(t,r4,o),(0,O._)(t,r3,r5),(0,O._)(t,r6,a),(0,O._)(t,r9,l),t},it=function(){var e=(0,z.Z)().fs;return X.useCallback(function(t){var n=ie({connectionString:t.connectionString,databaseName:t.databaseName});function r(){return(r=(0,eX._)(function(){var t,r,i,o,a,l,c,s,u,d,f,h,p,m;return(0,eF.Jh)(this,function(v){switch(v.label){case 0:return[4,e.readFile(".env")];case 1:if(t=v.sent(),r="",t.error){if(t.error===eo.Df.NotFound)r="";else throw Error("Error getting .env")}else r=t.content;i=rQ.Z.parse(r.toString()),o=!1,a=(0,eO._)({},i),l=!0,c=!1,s=void 0;try{for(u=Object.entries(n)[Symbol.iterator]();!(l=(d=u.next()).done);l=!0)h=(f=(0,M._)(d.value,2))[0],p=f[1],a[h]!==p&&(o=!0,a[h]=p)}catch(e){c=!0,s=e}finally{try{l||null==u.return||u.return()}finally{if(c)throw s}}if(!o)return[2];return m=rQ.Z.serialize(a),[4,e.writeFile(".env",r0.Z.from(m))];case 2:return v.sent(),[2]}})})).apply(this,arguments)}!function(){r.apply(this,arguments)}()},[e])},ir=function(e){var t=e.connectionString,n=e.databaseName,r=(0,tk.Z)(function(){return ie({connectionString:t,databaseName:n})},[t,n]),i=r[r4],o=r[r6],a=r[r9],l=it();return X.useEffect(function(){l({connectionString:t,databaseName:n})},[t,n,l]),(0,L.BX)(K.G,{css:[J.l0.colWithGap(8)],children:[(0,L.tZ)(r7,{envVarKey:r2,envVarValue:t,isSecret:!0}),(0,L.tZ)(r7,{envVarKey:r8,envVarValue:n}),(0,L.tZ)(r7,{envVarKey:r4,envVarValue:i}),(0,L.tZ)(r7,{envVarKey:r3,envVarValue:r5}),(0,L.tZ)(r7,{envVarKey:r6,envVarValue:o}),(0,L.tZ)(r7,{envVarKey:r9,envVarValue:a,isSecret:!0})]})},ii=["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],io=["B","KB","MB","GB","TB","PB","EB","ZB","YB"];function ia(e,t){var n,r=t||{},i=r.signed,o=r.digitsNumber,a=r.isKib,l=r.isKibNotation;if(n=void 0!==i&&i?e<0?"-":"+":"",0===e)return"".concat(n,"0B");var c=void 0===a||a?1024:1e3,s=Math.floor(Math.log(Math.abs(e))/Math.log(c));return"".concat(n).concat(parseFloat(Math.abs(e/Math.pow(c,s)).toFixed(void 0===o?2:o))).concat((void 0!==l&&l?ii:io)[s])}var il=n(97615);function ic(e){var t=e.title,n=e.doWarnAtom,r=e.inactive,i=(0,eB.Dv)(n);return(0,L.BX)(K.G,{css:[J.l0.rowWithGap(4),J.l0.align.center],children:[(0,L.tZ)(Q.xv,{variant:"small",css:J.l0.color.foregroundDimmer,multiline:!1,children:void 0!==r&&r?t+" last run":t}),i?(0,L.tZ)(ej.Z,{color:J.TV.orangeStronger}):null]})}function is(e){var t=e.title,n=e.totalAtom,r=e.currentAtom,i=e.countAtom,o=e.measure,a=e.limitText,l=e.inactive,c=void 0!==l&&l,s=(0,tk.Z)(function(){return(0,eG.cn)(function(e){return id(e(r),e(n))})},[r,n]),u=(0,tk.Z)(function(){return(0,eG.cn)(function(e){var t,l,c,u;return a||(t=e(s),l=e(r),c=e(n),u=i&&e(i),"empty"===t||void 0===l?void 0:"vCPU"===o?ih(100*Math.min(1,l/c))+"% of "+u+" vCPUs":ih(l).toLocaleString()+"/"+ih(c).toLocaleString()+" "+o)})},[a,s,r,n,i,o]),d=(0,tk.Z)(function(){return(0,eG.cn)(function(e){var t=e(s);return"At limit"===t||"Close to limit"===t})},[s]);return(0,L.BX)(K.G,{css:[J.l0.colWithGap(4),J.l0.flex.growAndShrink(2),{flexBasis:32}],children:[t?(0,L.tZ)(ic,{title:t,doWarnAtom:d,inactive:c}):null,(0,L.tZ)(iu,{currentAtom:r,totalAtom:n,inactive:c,limitTextAtom:u,mini:!0})]})}function iu(e){var t=e.currentAtom,n=e.totalAtom,r=e.limitTextAtom,i=e.inactive,o=e.mini,a=(0,eB.Dv)(n),l=(0,eB.Dv)(t),c=(0,eB.Dv)(r),s=function(e){switch(e){case"empty":case"fine":default:return;case"At limit":return J.TV.accentNegativeDefault;case"Close to limit":return J.TV.orangeDefault}}(id(l,a));return(0,L.tZ)(na.J,{css:o&&J.l0.height(8),total:a,current:l,color:s,disabled:i,tooltip:c})}function id(e,t){if(void 0===e)return"empty";var n=e/t;return n>=1?"At limit":n>=.9?"Close to limit":"fine"}function ih(e){return Math.round((e+Number.EPSILON)*100)/100}var ip=n(18931),im=function(e){var t=e.tableData,n=e.scrollRef,r=t.headerColumns,i=t.bodyData,o=rv(),a=X.useCallback(function(e){var t=parseInt(String(e),10);if(!isNaN(t)){var n=i[t][r.indexOf("Name")];o("table/".concat(n))}},[o,r,i]);return(0,L.tZ)(n9,{headerColumns:r,bodyData:i,onRowAction:a,scrollRef:n})},iv=function(e){var t=e.psqlQueryResult,n=e.scrollRef,r=t.data;if(t.loading)return(0,L.tZ)(K.G,{css:[J.l0.flex.row,J.l0.justify.center,J.l0.p(32)],children:(0,L.tZ)(eR.Z,{})});if(null==r?void 0:r.error)return(0,L.tZ)(K.G,{css:[J.l0.flex.row,J.l0.justify.center,J.l0.p(32)],children:(0,L.tZ)(Q.xv,{css:[J.l0.color.accentNegativeDefault,J.l0.maxWidth("100%")],children:null==r?void 0:r.error})});var i=r?re(r):null;return i?(0,L.tZ)(im,{tableData:i,scrollRef:n}):(0,L.tZ)(K.G,{css:[J.l0.flex.row,J.l0.justify.center,J.l0.p(32)],children:(0,L.tZ)(Q.xv,{css:[J.l0.color.accentPositiveDefault,J.l0.maxWidth("100%")],children:"No tables found"})})},ig=function(e){var t=e.connectionString,n=rg(),r=X.useRef(null),i=rt({connectionString:t}),o=i.refetch;return(0,L.BX)(K.G,{css:[J.l0.flex.column,J.l0.height("100%")],children:[(0,L.BX)(K.G,{css:[J.l0.flex.row,J.l0.py(16),J.l0.px(8),J.l0.align.center],children:[(0,L.tZ)(eE.hU,{alt:"Go back",size:28,type:"button",onClick:n,children:(0,L.tZ)(rl.Z,{})}),(0,L.tZ)(K.G,{css:[J.l0.flex.growAndShrink(1)],children:(0,L.tZ)(Q.xv,{css:[J.l0.fontSize(16),J.l0.ml(8)],multiline:!1,children:"All tables"})}),(0,L.tZ)(eE.hU,{alt:"Refresh",size:24,type:"button",onClick:o,children:(0,L.tZ)(ip.Z,{})})]}),(0,L.tZ)(K.G,{css:[J.l0.flex.growAndShrink(1),J.l0.overflow("auto"),J.l0.px(8)],innerRef:r,children:(0,L.tZ)(iv,{psqlQueryResult:i,scrollRef:r})})]})},iy="1px solid "+J.TV.outlineDefault,ib=(0,no.iv)([J.l0.p(8),J.l0.backgroundColor.backgroundDefault,J.l0.align.center,J.l0.borderRadius(0),{borderLeft:iy,borderRight:iy,borderBottom:iy},{":not([disabled])":{":focus":{boxShadow:"none",outline:"2px solid ".concat(J.TV.accentPrimaryDefault),outlineOffset:"-2px"},":hover":{backgroundColor:J.TV.backgroundHigher}}}]),iZ=function(e){var t=rt({connectionString:e.connectionString}),n=t.data,r=t.loading,i=(0,M._)(X.useState(!1),2),o=i[0],a=i[1],l=X.useCallback(function(){a(!0)},[]),c=n?re(n):null,s=X.useRef(null);if(!c||r)return null;var u=c.bodyData.length,d=c.headerColumns,f=c.bodyData;return(0,L.tZ)(L.HY,{children:(0,L.BX)(K.G,{css:[J.l0.overflow("auto"),J.l0.display.grid],innerRef:s,children:[(0,L.tZ)(im,{tableData:{headerColumns:d,bodyData:o?f:f.slice(0,5)},scrollRef:s}),u-5>0&&!o?(0,L.tZ)(eV.zx,{text:"".concat(u-5," more"),css:ib,onClick:l}):null]})})},iw=n(40699),ix=iw.z4["neon-database-preview"],iC=(0,iw.qJ)(ix),i_="".concat(ix.toLocaleString()," Cycles (").concat(iC,") / day"),iS="https://docs.replit.com/hosting/databases/postgresql-on-replit",iE="https://docs.replit.com/hosting/about-usage-based-billing#1-postgresql-usage-metrics",ik=n(36010),iT=n.n(ik),iR=function(e){var t=e.dbSize,n=e.totalSize,r=ia(t),i=ia(n),o=(0,tk.Z)(function(){return(0,eG.cn)(t)},[t]),a=(0,tk.Z)(function(){return(0,eG.cn)(n)},[n]);return(0,L.BX)(L.HY,{children:[(0,L.BX)(Q.xv,{css:J.l0.color.foregroundDimmer,multiline:!1,children:[r,"/",i]}),(0,L.tZ)(is,{totalAtom:a,currentAtom:o,limitText:"".concat(r," / ").concat(i),inactive:!1,measure:"MB"})]})},iD=function(e){var t,n,r=e.connectionString,i=n7("SELECT sum(pg_database_size(datname)) FROM pg_database;",r),o=i.data,a=i.loading,l=n7("SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' ORDER BY table_name;",r),c=l.data,s=l.loading,u=parseInt(null!==(n=null==o?void 0:null===(t=o.rows[0])||void 0===t?void 0:t.sum)&&void 0!==n?n:"0",10),d=null==c?void 0:c.rows.length;return(0,L.BX)(K.G,{css:J.l0.rowWithGap(8),children:[s?null:(0,L.BX)(Q.xv,{multiline:!1,children:[d," ",1===d?"table":"tables"]}),a?null:(0,L.tZ)(iR,{dbSize:u,totalSize:10737418240})]})},iI=function(e){var t=e.connectionString,n=e.onOpenDatabaseViewerClick,r=e.showUsageLink;return(0,L.BX)(K.G,{css:[J.l0.colWithGap(8)],children:[(0,L.BX)(K.G,{children:[(0,L.tZ)(iD,{connectionString:t}),r?(0,L.tZ)(iT(),{legacyBehavior:!0,href:"/account#resource-usage",passHref:!0,children:(0,L.tZ)("a",{css:J.l0.hover(J.l0.color.accentPrimaryStrongest),children:(0,L.tZ)(Q.xv,{children:"See all usage"})})}):null]}),(0,L.tZ)(iZ,{connectionString:t}),(0,L.tZ)(eV.zx,{text:"See Database Contents",iconLeft:(0,L.tZ)(ry.Z,{}),onClick:n})]})};n(26);var iG=function(e){var t=e.size;return(0,L.BX)("svg",{viewBox:"0 0 128 36",preserveAspectRatio:"xMidYMin",height:void 0===t?16:t,fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,L.tZ)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 6.207A6.207 6.207 0 0 1 6.207 0h23.586A6.207 6.207 0 0 1 36 6.207v20.06c0 3.546-4.488 5.085-6.664 2.286l-6.805-8.754v10.615A5.586 5.586 0 0 1 16.945 36H6.207A6.207 6.207 0 0 1 0 29.793V6.207Zm6.207-1.241c-.686 0-1.241.555-1.241 1.24v23.587c0 .686.555 1.242 1.24 1.242h10.925c.343 0 .434-.278.434-.621V16.18c0-3.547 4.488-5.086 6.665-2.286l6.805 8.753V6.207c0-.686.064-1.241-.621-1.241H6.207Z",fill:"#12FFF7"}),(0,L.tZ)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 6.207A6.207 6.207 0 0 1 6.207 0h23.586A6.207 6.207 0 0 1 36 6.207v20.06c0 3.546-4.488 5.085-6.664 2.286l-6.805-8.754v10.615A5.586 5.586 0 0 1 16.945 36H6.207A6.207 6.207 0 0 1 0 29.793V6.207Zm6.207-1.241c-.686 0-1.241.555-1.241 1.24v23.587c0 .686.555 1.242 1.24 1.242h10.925c.343 0 .434-.278.434-.621V16.18c0-3.547 4.488-5.086 6.665-2.286l6.805 8.753V6.207c0-.686.064-1.241-.621-1.241H6.207Z",fill:"url(#a)"}),(0,L.tZ)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 6.207A6.207 6.207 0 0 1 6.207 0h23.586A6.207 6.207 0 0 1 36 6.207v20.06c0 3.546-4.488 5.085-6.664 2.286l-6.805-8.754v10.615A5.586 5.586 0 0 1 16.945 36H6.207A6.207 6.207 0 0 1 0 29.793V6.207Zm6.207-1.241c-.686 0-1.241.555-1.241 1.24v23.587c0 .686.555 1.242 1.24 1.242h10.925c.343 0 .434-.278.434-.621V16.18c0-3.547 4.488-5.086 6.665-2.286l6.805 8.753V6.207c0-.686.064-1.241-.621-1.241H6.207Z",fill:"url(#b)"}),(0,L.tZ)("path",{d:"M29.793 0A6.207 6.207 0 0 1 36 6.207v20.06c0 3.546-4.488 5.085-6.664 2.286l-6.805-8.754v10.615A5.586 5.586 0 0 1 16.945 36a.62.62 0 0 0 .62-.62v-19.2c0-3.547 4.488-5.086 6.665-2.286l6.805 8.753V1.241C31.035.556 30.479 0 29.793 0Z",fill:"#B9FFB3"}),(0,L.tZ)("path",{d:"M60.686 10.6v9.416l-9.13-9.416h-4.752V26h4.334V15.88L61.082 26h3.938V10.6h-4.334ZM73.054 22.568V19.84h9.702v-3.278h-9.702v-2.53h11.77V10.6H68.632V26h16.434v-3.432H73.054ZM96.583 26.506c6.094 0 10.054-2.992 10.054-8.206 0-5.214-3.96-8.206-10.054-8.206S86.551 13.086 86.551 18.3c0 5.214 3.938 8.206 10.032 8.206Zm0-3.652c-3.388 0-5.478-1.65-5.478-4.554 0-2.904 2.112-4.554 5.478-4.554 3.388 0 5.478 1.65 5.478 4.554 0 2.904-2.09 4.554-5.478 4.554ZM123.249 10.6v9.416l-9.13-9.416h-4.752V26h4.334V15.88L123.645 26h3.938V10.6h-4.334Z",fill:"currentColor"}),(0,L.BX)("defs",{children:[(0,L.BX)("linearGradient",{id:"a",x1:"36",y1:"36",x2:"4.345",y2:"0",gradientUnits:"userSpaceOnUse",children:[(0,L.tZ)("stop",{stopColor:"#B9FFB3"}),(0,L.tZ)("stop",{offset:"1",stopColor:"#B9FFB3",stopOpacity:"0"})]}),(0,L.BX)("linearGradient",{id:"b",x1:"36",y1:"36",x2:"14.617",y2:"27.683",gradientUnits:"userSpaceOnUse",children:[(0,L.tZ)("stop",{stopColor:"#1A1A1A",stopOpacity:".9"}),(0,L.tZ)("stop",{offset:"1",stopColor:"#1A1A1A",stopOpacity:"0"})]})]})]})},iB=(0,no.iv)([J.l0.color.foregroundDimmest,{textDecoration:"underline"}]),iA=function(){return(0,L.tZ)(K.G,{css:[J.l0.colWithGap(8),J.l0.py(8),J.l0.width("100%")],children:(0,L.BX)(K.G,{css:[J.l0.rowWithGap(8),J.l0.align.center,J.l0.justify.spaceBetween],children:[(0,L.tZ)("a",{target:"_blank",href:iS,css:iB,children:"Docs"}),(0,L.BX)(K.G,{css:[J.l0.rowWithGap(8),J.l0.align.center],children:[(0,L.tZ)(Q.xv,{css:[J.l0.fontSize(14)],multiline:!1,children:"Powered by"}),(0,L.tZ)(iG,{})]})]})})},iP=function(e){var t=e.psqlQueryResult,n=e.tableName,r=e.connectionString,i=e.scrollRef,o=t.data,a=t.loading,l=ro({tableName:n,connectionString:r});if(a)return(0,L.tZ)(K.G,{css:[J.l0.flex.row,J.l0.justify.center,J.l0.p(32)],children:(0,L.tZ)(eR.Z,{})});if(null==o?void 0:o.error)return(0,L.tZ)(K.G,{css:[J.l0.flex.row,J.l0.justify.center,J.l0.p(32)],children:(0,L.tZ)(Q.xv,{css:[J.l0.color.accentNegativeDefault,J.l0.maxWidth("100%")],children:null==o?void 0:o.error})});var c=o?re(o):null;if(!c)return(0,L.tZ)(K.G,{css:[J.l0.flex.row,J.l0.justify.center,J.l0.p(32)],children:(0,L.tZ)(Q.xv,{css:[J.l0.color.accentPositiveDefault,J.l0.maxWidth("100%")],children:"No rows"})});var s=c.headerColumns,u=c.bodyData;return(0,L.tZ)(n9,{headerColumns:s.map(function(e,t){var n,r=null==l?void 0:null===(n=l.rows)||void 0===n?void 0:n.find(function(t){return t.column_name===e}),i=null==r?void 0:r.data_type,o=i?(0,L.tZ)(to.D,{text:i}):null;return(0,L.BX)(K.G,{css:[J.l0.rowWithGap(8),J.l0.align.center],children:[(0,L.tZ)(Q.xv,{multiline:!1,children:e}),o]},t)}),bodyData:u,scrollRef:i})},iN=function(e){var t=e.tableName,n=e.connectionString,r=rg(),i=X.useRef(null),o=n7('SELECT * FROM "'.concat(t.replace(/"/g,'""'),'" LIMIT ').concat(500),n),a=o.refetch;return(0,L.BX)(K.G,{css:[J.l0.flex.column,J.l0.height("100%")],children:[(0,L.BX)(K.G,{css:[J.l0.flex.row,J.l0.py(16),J.l0.px(8),J.l0.align.center],children:[(0,L.tZ)(eE.hU,{alt:"Go back",size:28,type:"button",onClick:r,children:(0,L.tZ)(rl.Z,{})}),(0,L.tZ)(K.G,{css:[J.l0.flex.growAndShrink(1)],children:(0,L.tZ)(Q.xv,{css:[J.l0.fontSize(16),J.l0.ml(8)],multiline:!1,children:t})}),(0,L.tZ)(eE.hU,{alt:"Refresh",size:24,type:"button",onClick:a,children:(0,L.tZ)(ip.Z,{})})]}),(0,L.tZ)(K.G,{css:[J.l0.flex.growAndShrink(1),J.l0.overflow("auto"),J.l0.px(8)],innerRef:i,children:(0,L.tZ)(iP,{psqlQueryResult:o,tableName:t,connectionString:n,scrollRef:i})})]})},iU=n(63999),iL=n(68333),iO="\nPostgreSQL is a powerful open source relational database system that is widely used in web applications and other software development projects. You can easily create a production-ready PostgreSQL database directly within Replit. For more information on PostgreSQL, visit the [official documentation](https://www.postgresql.org/docs/). Repls use PostgreSQL version 15.\n\nHere is some information to help you get started:\n\n1. Replit databases are backed by [Neon](https://neon.tech/). The [Neon documentation](https://neon.tech/docs/connect/connect-from-any-app#connection-examples) provides guides on how to connect various frameworks, such as Django, to your PostgreSQL database.\n\n1. Environment Variables: We provided environment variables `DATABASE_URL`, `PGDATABASE`, `PGHOST`, `PGHOST`, `PGPORT`, `PGUSER`, `PGPASSWORD`. Provide these values to your framework of choice to connect to your database.\n\n1. Connection pooling: If you need to enable connection pooling for any reason, contact us at support@repl.it.\n\n1. Compute lifecycle: Neon databases go to sleep after 5 minutes of inactivity. You may experience disconnects or reconnects depending on your client.\n",iM=(0,eG.cn)(null),iX=(0,eG.cn)(null),iF=function(){return(0,eB.Dv)(iX)},iW=function(){var e=(0,eB.b9)(iM),t=(0,eB.b9)(iX);return(0,X.useCallback)(function(n){if(!n){e(null),t(null);return}e({connectionString:n,databaseId:-1,databaseName:"Admin Override",isFrozen:!1,projectId:"mock-project-id-does-not-exist",__typename:"NeonDatabase",isBackedByCycles:!0}),t(n)},[t,e])},iH=function(e){var t=e.title,n=e.children,r=e.isAccordion,i=e.sectionStyles;return(0,L.tZ)(K.G,{css:[J.l0.colWithGap(8),J.l0.pt(8),{borderTopWidth:1,borderTopStyle:"solid",borderTopColor:J.TV.outlineDefault},i],children:r?(0,L.tZ)(nn.Q,{headerContent:(0,L.tZ)(K.G,{css:[J.l0.rowWithGap(8),J.l0.align.center],children:(0,L.tZ)(Q.xv,{variant:"subheadDefault",multiline:!1,children:t})}),children:(0,L.tZ)(K.G,{css:[J.l0.p(12),J.l0.colWithGap(8),J.l0.height("100%")],children:n})}):(0,L.BX)(L.HY,{children:[(0,L.tZ)(Q.xv,{multiline:!1,css:[J.l0.fontSize(J.TV.fontSizeSubheadDefault),J.l0.fontWeight.medium],children:t}),n]})})},iV=n(66587),iz=n(55330),ij=n(81340),iq=n(49344),iY=n(76566),i$=n(50946),iJ=n(4773),iK=n(63623);function iQ(){var e=(0,nd._)(["\n  query DatabaseFrozen {\n    currentUser {\n      id\n      userSubscriptionType\n      ...CurrentUserUsageBasedBillingSummary\n    }\n  }\n  ","\n"]);return iQ=function(){return e},e}var i0={},i1=(0,nf.Ps)(iQ(),iK.eD),i2=n(75582),i8=n(49932),i4=(0,ee.X)({self:[],title:[J.l0.rowWithGap(8),J.l0.align.center,J.l0.color.foregroundDimmest],status:[J.l0.width(8),J.l0.height(8),J.l0.backgroundColor.foregroundDimmer,J.l0.borderRadius("full")],main:[J.l0.colWithGap(8),J.l0.align.center],icon:J.l0.mt(32),subTitle:J.l0.my(16),cta:[J.l0.width("100%"),J.l0.maxWidth(320),{marginLeft:"auto",marginRight:"auto"}],ctaContainer:[J.l0.colWithGap(8),J.l0.align.center],ctaStatusBanner:[J.l0.textAlign.left],budgetContainer:[J.l0.colWithGap(8),J.l0.border(),J.l0.borderRadius(8),J.l0.p(8)]});function i3(e){var t=e.loading,n=e.ubbExplanation,r=e.hasPaymentMethod,i=e.handleOnUnpause,o=e.refetchUbbCapabilitiesQueryData,a=e.setShowPaymentMethodForm,l=e.showPaymentMethodForm,c=e.setShowSupportForm,s=(0,rL.rv)();return n===i2.Fp.NeedsSubscription||n===i2.Fp.NeedsSubscriptionOrPaymentMethod?s?(0,L.tZ)(eY.E,{text:"You need a subscription to use PostgreSQL databases. Navigate to Account > Billing to upgrade.",colorway:"warning",icon:(0,L.tZ)(ej.Z,{}),css:i4.ctaStatusBanner}):(0,L.BX)(K.G,{css:i4.ctaContainer,children:[(0,L.tZ)(iJ.Z,{context:"workspace_hosting_pane",text:"Upgrade your plan to unpause database",css:i4.cta,colorway:"primary",variant:"outlined",disabled:l,onPlanCheckoutComplete:o}),(0,L.tZ)(eV.zx,{variant:"nofill",colorway:"primary",text:"or add a payment method",css:i4.cta,disabled:l,loading:t,iconLeft:(0,L.tZ)(i$.Z,{}),onClick:function(){return a()}})]}):n===i2.Fp.NeedsSmsVerification?(0,L.tZ)(iV.Z,{context:i2.jv.Neon,onSuccess:o}):n===i2.Fp.NeedsPaymentMethod?s?(0,L.tZ)(eY.E,{text:"You have used all free usage for this month. Check your email for more information or contact support.",colorway:"warning",icon:(0,L.tZ)(ej.Z,{}),css:i4.ctaStatusBanner}):(0,L.tZ)(eV.zx,{colorway:"primary",text:"Add a payment method",css:i4.cta,disabled:l,loading:t,iconLeft:(0,L.tZ)(i$.Z,{}),onClick:function(){return a()}}):n===i2.Fp.NeedsUnbanning?(0,L.tZ)(iY.u,{text:"Your account currently has restrictions on use PostgreSQL databases. We're here to help! Please reach out to our support team for assistance.",colorway:"warning",icon:(0,L.tZ)(ej.Z,{}),css:i4.ctaStatusBanner,onClick:function(){return c()}}):n===i2.Fp.InsufficientBudget?(0,L.BX)(L.HY,{children:[(0,L.tZ)(eY.E,{text:"You've reached your monthly usage budget. Increase your budget to unpause your database.",colorway:"warning",icon:(0,L.tZ)(ej.Z,{}),css:i4.ctaStatusBanner}),(0,L.tZ)(K.G,{css:i4.budgetContainer,children:(0,L.tZ)(ij.L,{onUpdateSuccess:o})})]}):(0,L.BX)(L.HY,{children:[(0,L.tZ)(eV.zx,{colorway:"primary",onClick:i,text:"Unpause database",loading:t,css:i4.cta}),!1===r?(0,L.tZ)(iY.u,{text:"Add a payment method to avoid downtime",colorway:"warning",icon:(0,L.tZ)(ej.Z,{}),css:i4.ctaStatusBanner,onClick:function(){return s?null:a()}}):null]})}function i5(e){var t,n,r=e.replId,i=e.neonProjectId,o=e.onDatabaseUnfreezed,a=(0,M._)(X.useState(!1),2),l=a[0],c=a[1],s=(0,M._)(X.useState(!1),2),u=s[0],d=s[1],f=(0,nL.Z)().showError,h=(t=(0,eO._)({},i0,{notifyOnNetworkStatusChange:!0,onError:function(e){f(e.message)}}),nh.a(i1,t)),p=h.loading,m=h.data,v=h.refetch,g=(0,M._)(nU({onError:function(e){f("Error when unfreezing Neon database: ".concat(e.message)),ru({action:"unfreeze",success:!1})},onCompleted:function(e){if((null==e?void 0:e.unfreezeNeonDatabase.__typename)!=="UnfreezeNeonDatabaseResult"){f("Error: Unfreezes Neon Database failed."),ru({action:"unfreeze",success:!1});return}(null==e?void 0:e.unfreezeNeonDatabase.success)?(o(),ru({action:"unfreeze",success:!0})):(f("Error: Unfreezes Neon Database failed."),ru({action:"unfreeze",success:!1}))}}),2),y=g[0],b=g[1].loading,Z=(null==m?void 0:null===(n=m.currentUser)||void 0===n?void 0:n.usageBasedBilling.__typename)==="UserUsageBasedBillingSummary"?m.currentUser.usageBasedBilling.capabilities:null;return(0,L.BX)(K.G,{css:i4.self,children:[(0,L.tZ)(iq.u,{isOpen:u,onRequestClose:function(){return d(!1)},children:(0,L.tZ)(iz.Z,{onRequestClose:function(){return d(!1)}})}),(0,L.BX)(K.G,{css:i4.title,children:[(0,L.tZ)(K.G,{css:i4.status}),(0,L.tZ)(Q.xv,{css:[J.l0.color.foregroundDimmest],multiline:!1,children:"Database paused"})]}),(0,L.BX)(K.G,{css:i4.main,children:[(0,L.tZ)(ey.Z,{size:32,fill:i8.TV.foregroundDimmest,css:i4.icon}),(0,L.tZ)(Q.xv,{variant:"subheadDefault",css:i4.subTitle,multiline:!1,children:"Your Database is paused."}),(0,L.tZ)(i3,{loading:p||b,ubbExplanation:null==Z?void 0:Z.explanation,hasPaymentMethod:null==Z?void 0:Z.hasPaymentMethod,handleOnUnpause:function(){y({variables:{input:{replId:r,neonProjectId:i}}})},refetchUbbCapabilitiesQueryData:v,setShowPaymentMethodForm:function(){return c(!0)},showPaymentMethodForm:l,setShowSupportForm:function(){return d(!0)}})]})]})}var i6=function(e){var t=e.cyclesLow;return(0,L.BX)(L.HY,{children:[(0,L.tZ)(Q.xv,{css:[J.l0.fontSize(12),J.l0.color.foregroundDimmest],children:"You’re paying ".concat(i_)}),t?(0,L.tZ)(K.G,{children:(0,L.tZ)(eY.E,{icon:(0,L.tZ)(ej.Z,{}),colorway:"warning",text:"If your database use continues, you will be out of\n Cycles in [X] days and access to your database will be paused. \n Buy more Cycles or add a recurring Cycles subscription to prevent that from happening."})}):null]})},i9=n(99656),i7=n(51965),oe=n(47648),ot=n(60814),on=n(15250),or=n(22894);function oi(){var e=(0,nd._)(["\n  query DatabaseMigrator {\n    currentUser {\n      id\n      userSubscriptionType\n      ...CurrentUserUsageBasedBillingSummary\n    }\n  }\n  ","\n"]);return oi=function(){return e},e}function oo(){var e=(0,nd._)(["\n  mutation MigrateNeonDatabase($input: MigrateNeonDatabaseInput!) {\n    migrateNeonDatabase(input: $input) {\n      __typename\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on MigrateNeonDatabaseResult {\n        databaseId\n        databaseName\n        projectId\n        connectionString\n        isFrozen\n        isBackedByCycles\n      }\n    }\n  }\n"]);return oo=function(){return e},e}var oa={},ol=(0,nf.Ps)(oi(),iK.eD),oc=(0,nf.Ps)(oo()),os=n(97764),ou=(0,ee.X)({self:[J.l0.mb(12)],container:[J.l0.colWithGap(8)],message:[{"> div":[J.l0.align.start,J.l0.py(4)],span:[J.l0.colWithGap(6)]}],messageBold:[J.l0.fontWeight.bold],cta:[J.l0.width("100%"),{marginLeft:"auto",marginRight:"auto"}],ctaContainer:[J.l0.colWithGap(8),J.l0.align.center],ctaStatusBanner:[J.l0.textAlign.left],payment:[J.l0.p(16),J.l0.borderRadius(12),J.l0.textAlign.left,J.l0.shadow(2)],budgetContainer:[J.l0.colWithGap(8),J.l0.border(),J.l0.borderRadius(8),J.l0.p(8)],details:[J.l0.colWithGap(12),J.l0.maxWidth(400),{marginLeft:"auto",marginRight:"auto"}]});function od(e){var t=e.loading,n=e.ubbExplanation,r=e.hasPaymentMethod,i=e.handleOnMigrate,o=e.refetchUbbCapabilitiesQueryData,a=e.setShowPaymentMethodForm,l=e.showPaymentMethodForm,c=e.setShowSupportForm,s=(0,rL.rv)();return n===i2.Fp.NeedsSubscription||n===i2.Fp.NeedsSubscriptionOrPaymentMethod?s?(0,L.tZ)(eY.E,{text:"You need a subscription to migrate a database. Navigate to Account > Billing to upgrade.",colorway:"warning",icon:(0,L.tZ)(ej.Z,{}),css:ou.ctaStatusBanner}):(0,L.BX)(K.G,{css:ou.ctaContainer,children:[(0,L.tZ)(iJ.Z,{context:"workspace_hosting_pane",text:"Upgrade your plan to migrate your database",css:ou.cta,colorway:"primary",variant:"outlined",disabled:l,onPlanCheckoutComplete:o}),(0,L.tZ)(eV.zx,{variant:"nofill",colorway:"primary",text:"or add a payment method",css:ou.cta,disabled:l,loading:t,iconLeft:(0,L.tZ)(i$.Z,{}),onClick:function(){return a()}})]}):n===i2.Fp.NeedsSmsVerification?(0,L.tZ)(iV.Z,{context:i2.jv.Neon,onSuccess:o}):n===i2.Fp.NeedsPaymentMethod?s?(0,L.tZ)(eY.E,{text:"You have used all free usage for this month. Check your email for more information or contact support.",colorway:"warning",icon:(0,L.tZ)(ej.Z,{}),css:ou.ctaStatusBanner}):(0,L.tZ)(eV.zx,{colorway:"primary",text:"Add a payment method",css:ou.cta,disabled:l,loading:t,iconLeft:(0,L.tZ)(i$.Z,{}),onClick:function(){return a()}}):n===i2.Fp.NeedsUnbanning?(0,L.tZ)(iY.u,{text:"Your account currently has restrictions on migrating a database. We're here to help! Please reach out to our support team for assistance.",colorway:"primary",icon:(0,L.tZ)(il.Z,{}),css:ou.ctaStatusBanner,onClick:function(){return c()}}):n===i2.Fp.InsufficientBudget?(0,L.BX)(L.HY,{children:[(0,L.tZ)(eY.E,{text:"You've reached your monthly usage budget. Increase your budget to migrate your database.",colorway:"warning",icon:(0,L.tZ)(ej.Z,{}),css:ou.ctaStatusBanner}),(0,L.tZ)(K.G,{css:ou.budgetContainer,children:(0,L.tZ)(ij.L,{onUpdateSuccess:o})})]}):(0,L.BX)(L.HY,{children:[(0,L.tZ)(eV.zx,{colorway:"primary",onClick:i,text:"Migrate database",loading:t,css:ou.cta}),!1===r?(0,L.tZ)(iY.u,{text:"Add a payment method to avoid downtime",colorway:"warning",icon:(0,L.tZ)(ej.Z,{}),css:ou.ctaStatusBanner,onClick:function(){return s?null:a()}}):null]})}var of=function(e){var t,n,r,i=e.onDatabaseMigrated,o=(0,M._)(X.useState(!1),2),a=o[0],l=o[1],c=(0,M._)((0,X.useState)(!1),2),s=c[0],u=c[1],d=(0,nu.Z)(),f=(0,nL.Z)().showError,h=(t=(0,eO._)({},oa,{notifyOnNetworkStatusChange:!0,onError:function(e){f(e.message)}}),nh.a(ol,t)),p=h.loading,m=h.data,v=h.refetch,g=(0,M._)((n=(0,eO._)({},oa,{onError:function(e){f("Error when migrating Neon database: ".concat(e.message)),ru({action:"migrated",success:!1})},onCompleted:function(e){if("MigrateNeonDatabaseResult"===e.migrateNeonDatabase.__typename){var t=e.migrateNeonDatabase;i({__typename:"NeonDatabase",databaseId:t.databaseId,databaseName:t.databaseName,connectionString:t.connectionString,projectId:t.projectId,isFrozen:t.isFrozen,isBackedByCycles:t.isBackedByCycles}),ru({action:"migrated",success:!0})}else{f("Error: ".concat(e.migrateNeonDatabase.message)),ru({action:"migrated",success:!1});return}}}),nS.D(oc,n)),2),y=g[0],b=g[1].loading,Z=(null==m?void 0:null===(r=m.currentUser)||void 0===r?void 0:r.usageBasedBilling.__typename)==="UserUsageBasedBillingSummary"?m.currentUser.usageBasedBilling.capabilities:null;return(0,L.BX)(K.G,{css:ou.self,children:[(0,L.tZ)(iq.u,{isOpen:s,onRequestClose:function(){return u(!1)},children:(0,L.tZ)(iz.Z,{onRequestClose:function(){return u(!1)}})}),(0,L.BX)(K.G,{css:ou.container,children:[(0,L.tZ)(eY.E,{css:ou.message,icon:(0,L.tZ)(ej.Z,{}),text:(0,L.BX)(L.HY,{children:[(0,L.BX)("p",{children:[(0,L.tZ)("span",{css:ou.messageBold,children:"Postgres databases are now included in plans!"})," ","Instead of paying $30/mo for a single database, our plans now have a base allotment for no extra cost. The base allotment is enough resources for most use cases. Users will only be charged for the resources they use beyond their allotment. Learn more."]}),(0,L.tZ)("p",{children:(0,L.tZ)("span",{css:ou.messageBold,children:"On January 1st, 2024, all PostgreSQL databases that have not been migrated will be shut down."})}),(0,L.tZ)("p",{children:"To migrate, select one of the options below."})]}),colorway:"warning"}),(0,L.tZ)(od,{loading:p||b,ubbExplanation:null==Z?void 0:Z.explanation,hasPaymentMethod:null==Z?void 0:Z.hasPaymentMethod,handleOnMigrate:function(){y({variables:{input:{replId:d}}})},refetchUbbCapabilitiesQueryData:v,setShowPaymentMethodForm:function(){return l(!0)},showPaymentMethodForm:a,setShowSupportForm:function(){return u(!0)}}),a?(0,L.tZ)(e$.Tg,{elevated:!0,css:ou.payment,children:(0,L.tZ)(os.q,{onSuccess:(0,eX._)(function(){return(0,eF.Jh)(this,function(e){switch(e.label){case 0:return l(!1),[4,v()];case 1:return e.sent(),[2]}})}),context:"workspace_hosting_pane"})}):null]})]})},oh=n(57118),op=n(23211),om=function(e){var t,n=e.neonDatabases,r=e.onDatabaseDeleted,i=e.onDatabaseUnfreezed,o=e.onDatabaseMigrated,a=e.performPaneOperation,l=n[0],c=(0,nL.Z)().showError,s=(0,nu.Z)(),u=function(){var e=X.useContext(or.Z);if(!e)throw Error("Expected Repl info to be in context");return e.slug}(),d=(0,rX.P5)({controlName:op.uZ,logFlagToAnalytics:!0}),f=rm(),h=rv(),p=X.useCallback(function(){h("queryEditor")},[h]),m=(0,M._)(nA(),2),v=m[0],g=m[1].loading,y=X.useCallback(function(){E(!0)},[]),b=(0,ot.Z)({forceFetch:!1}),Z=b.cycles,w=b.formattedBalanceValue,x="number"==typeof Z&&Z>ix,C=X.useCallback((0,eX._)(function(){var e,t,n;return(0,eF.Jh)(this,function(i){switch(i.label){case 0:return[4,v({variables:{input:{replId:s,databaseId:l.databaseId}}})];case 1:if(t=(e=i.sent()).data,n=e.errors,E(!1),n&&n.length>0)return c("Error when deleting Neon database: ".concat(null==n?void 0:n.join())),ru({action:"removed",success:!1}),[2];if((null==t?void 0:t.deleteNeonDatabase.__typename)!=="DeleteNeonDatabaseResult")return c("Error: ".concat(null==t?void 0:t.deleteNeonDatabase.message)),ru({action:"removed",success:!1}),[2];return(null==t?void 0:t.deleteNeonDatabase.success)?(r(),ru({action:"removed",success:!0})):(c("Error: Delete Neon Database failed."),ru({action:"removed",success:!1})),[2]}})}),[v,l.databaseId,r,s,c]),_=(0,M._)(X.useState(!1),2),S=_[0],E=_[1],k=X.useCallback(function(){E(!1)},[]),T=(0,M._)(X.useState(!1),2),R=T[0],D=T[1],I=X.useCallback(function(){D(!0)},[]),G=(0,M._)(nU(),2),B=G[0],A=G[1].loading,P=X.useCallback((0,eX._)(function(){var e,t,n;return(0,eF.Jh)(this,function(r){switch(r.label){case 0:return[4,B({variables:{input:{neonProjectId:l.projectId,replId:s}}})];case 1:if(t=(e=r.sent()).data,(n=e.errors)&&n.length>0)return c("Error when unfreezing Neon database: ".concat(null==n?void 0:n.join())),ru({action:"unfreeze",success:!1}),[2];if((null==t?void 0:t.unfreezeNeonDatabase.__typename)!=="UnfreezeNeonDatabaseResult")return c("Error: Unfreezes Neon Database failed."),ru({action:"unfreeze",success:!1}),[2];return(null==t?void 0:t.unfreezeNeonDatabase.success)?(i(),ru({action:"unfreeze",success:!0})):(c("Error: Unfreezes Neon Database failed."),ru({action:"unfreeze",success:!1})),[2]}})}),[l.projectId,i,s,c,B]),N=iF(),U=ie({connectionString:l.connectionString,databaseName:l.databaseName})[r4].split(".")[0],O=N||"".concat(l.connectionString,"/").concat(l.databaseName,"?sslmode=require&options=project%3D").concat(U);if("queryEditor"===f)return(0,L.tZ)(rJ,{connectionString:O,performPaneOperation:a});if("tableSchemas"===f)return(0,L.tZ)(ig,{connectionString:O});if(f.startsWith("table/")){var F=f.slice(f.indexOf("/")+1);return(0,L.tZ)(iN,{tableName:F,connectionString:O})}return t=l.isFrozen?(0,L.BX)(L.HY,{children:[(0,L.BX)(K.G,{css:[J.l0.rowWithGap(8),J.l0.align.center],children:[(0,L.tZ)(K.G,{css:[J.l0.width(8),J.l0.height(8),J.l0.backgroundColor.foregroundDimmer,J.l0.borderRadius("full")]}),(0,L.tZ)(Q.xv,{css:[J.l0.color.foregroundDimmest],multiline:!1,children:"Database paused"})]}),(0,L.BX)(Q.xv,{css:[J.l0.fontSize(12),J.l0.color.foregroundDimmest],children:["Databases cost ",i_]}),(0,L.BX)(K.G,{css:[J.l0.colWithGap(8),J.l0.align.center],children:[(0,L.tZ)(ey.Z,{size:32,fill:J.TV.foregroundDimmest,css:J.l0.mt(32)}),(0,L.BX)(Q.xv,{variant:"subheadDefault",css:[J.l0.my(16)],multiline:!1,children:["Your Database is paused. You have ",w," cycles."]}),(0,L.BX)(Q.xv,{children:["Access to your databases will be paused until you"," ",x?"use cycles to resume database":"refill your Cycles balance","."]}),x?(0,L.tZ)(eV.zx,{css:J.l0.pt(8),iconLeft:(0,L.tZ)(on.Z,{}),onClick:P,disabled:A,text:"Unpause Database",colorway:"primary"}):null,(0,L.tZ)(eV.zx,{css:J.l0.pt(8),iconLeft:(0,L.tZ)(i9.Z,{}),onClick:I,text:x?"Buy more cycles":"Buy Cycles"})]}),(0,L.tZ)(oe.Z,{noPadding:!0,isOpen:R,maxWidth:i7.W,onRequestClose:function(){return D(!1)},fitContent:!0,replTitle:u,uponPurchaseGoTo:"workspace",context:"workspace_postgresql_pane",initialTab:"cycles",allowCyclesPage:!0})]}):(0,L.BX)(L.HY,{children:[(0,L.BX)(K.G,{css:[J.l0.rowWithGap(8),J.l0.align.center],children:[(0,L.tZ)(K.G,{css:[J.l0.width(8),J.l0.height(8),J.l0.backgroundColor.accentPositiveStronger,J.l0.borderRadius("full"),{filter:"drop-shadow(0 0 6px ".concat(J.TV.accentPositiveStronger,")")}]}),(0,L.tZ)(Q.xv,{css:[J.l0.color.accentPositiveStronger],multiline:!1,children:"Database connected"})]}),(0,L.tZ)(i6,{}),(0,L.tZ)(iH,{title:"Database Info",children:(0,L.tZ)(iI,{connectionString:O,onOpenDatabaseViewerClick:p})}),(0,L.tZ)(iH,{title:"Using the database",isAccordion:!0,children:(0,L.tZ)(iL.ZP,{css:[iU.Z,J.l0.maxWidth("100%")],children:iO})}),(0,L.tZ)(iH,{title:"Environment variables",isAccordion:!0,children:(0,L.tZ)(ir,{connectionString:O,databaseName:l.databaseName})})]}),(0,L.BX)(K.G,{css:[J.l0.colWithGap(0),J.l0.height("100%"),J.l0.p(8)],children:[d?(0,L.BX)(K.G,{css:[J.l0.mb(16)],children:[(0,L.tZ)(of,{onDatabaseMigrated:o}),(0,L.tZ)(oh.iz,{})]}):null,(0,L.tZ)(K.G,{css:[J.l0.colWithGap(16),J.l0.flex.grow(1),J.l0.flex.shrink(0)],children:t}),(0,L.tZ)(K.G,{css:[J.l0.pt(16)],children:S||g?(0,L.BX)(e$.Tg,{css:[J.l0.p(8),J.l0.colWithGap(8)],elevated:!0,children:[(0,L.tZ)(Q.xv,{children:"Removing this database will remove access to the data for this Repl, and remove the daily Cycles subscription of ".concat(i_,".")}),(0,L.tZ)(eY.E,{icon:(0,L.tZ)(ej.Z,{}),colorway:"warning",text:"This action cannot be undone."}),(0,L.tZ)(eV.zx,{text:"Yes, Remove Database",colorway:"negative",disabled:g,iconLeft:(0,L.tZ)(e4.Z,{}),onClick:C}),(0,L.tZ)(eV.zx,{text:"Cancel",disabled:g,onClick:k})]}):(0,L.tZ)(eV.zx,{css:[J.l0.py(8)],text:"Remove Database",disabled:g,iconLeft:(0,L.tZ)(e4.Z,{}),onClick:y})}),(0,L.tZ)(iA,{})]})},ov=(0,ee.X)({self:[J.l0.colWithGap(0),J.l0.height("100%"),J.l0.p(8)],main:[J.l0.colWithGap(16),J.l0.flex.grow(1),J.l0.flex.shrink(0)],header:[J.l0.rowWithGap(8),J.l0.align.center],status:[J.l0.width(8),J.l0.height(8),J.l0.backgroundColor.accentPositiveStronger,J.l0.borderRadius("full"),{filter:"drop-shadow(0 0 6px ".concat(J.TV.accentPositiveStronger,")")}],title:[J.l0.color.accentPositiveStronger],docs:[iU.Z,J.l0.maxWidth("100%")],footer:[J.l0.pt(16)],remove:[J.l0.py(8)],removeConfirm:[J.l0.p(8),J.l0.colWithGap(8)]}),og=function(e){var t=e.neonDatabases,n=e.onDatabaseDeleted,r=e.onDatabaseUnfreezed,i=e.performPaneOperation,o=t[0],a=(0,nL.Z)().showError,l=(0,nu.Z)(),c=rm(),s=rv(),u=X.useCallback(function(){s("queryEditor")},[s]),d=(0,M._)(nA(),2),f=d[0],h=d[1].loading,p=X.useCallback(function(){y(!0)},[]),m=X.useCallback((0,eX._)(function(){var e,t,r;return(0,eF.Jh)(this,function(i){switch(i.label){case 0:return[4,f({variables:{input:{replId:l,databaseId:o.databaseId}}})];case 1:if(t=(e=i.sent()).data,r=e.errors,y(!1),r&&r.length>0)return a("Error when deleting Neon database: ".concat(null==r?void 0:r.join())),ru({action:"removed",success:!1}),[2];if((null==t?void 0:t.deleteNeonDatabase.__typename)!=="DeleteNeonDatabaseResult")return a("Error: ".concat(null==t?void 0:t.deleteNeonDatabase.message)),ru({action:"removed",success:!1}),[2];return(null==t?void 0:t.deleteNeonDatabase.success)?(n(),ru({action:"removed",success:!0})):(a("Error: Delete Neon Database failed."),ru({action:"removed",success:!1})),[2]}})}),[f,o.databaseId,n,l,a]),v=(0,M._)(X.useState(!1),2),g=v[0],y=v[1],b=X.useCallback(function(){y(!1)},[]),Z=iF(),w=ie({connectionString:o.connectionString,databaseName:o.databaseName})[r4].split(".")[0],x=Z||"".concat(o.connectionString,"/").concat(o.databaseName,"?sslmode=require&options=project%3D").concat(w);if("queryEditor"===c)return(0,L.tZ)(rJ,{connectionString:x,performPaneOperation:i});if("tableSchemas"===c)return(0,L.tZ)(ig,{connectionString:x});if(c.startsWith("table/")){var C=c.slice(c.indexOf("/")+1);return(0,L.tZ)(iN,{tableName:C,connectionString:x})}return(0,L.BX)(K.G,{css:ov.self,children:[(0,L.tZ)(K.G,{css:ov.main,children:o.isFrozen?(0,L.tZ)(i5,{replId:l,neonProjectId:o.projectId,onDatabaseUnfreezed:r}):(0,L.BX)(L.HY,{children:[(0,L.BX)(K.G,{css:ov.header,children:[(0,L.tZ)(K.G,{css:ov.status}),(0,L.tZ)(Q.xv,{css:ov.title,multiline:!1,children:"Database connected"})]}),(0,L.tZ)(iH,{title:"Database Info",children:(0,L.tZ)(iI,{connectionString:x,onOpenDatabaseViewerClick:u,showUsageLink:!0})}),(0,L.tZ)(iH,{title:"Using the database",isAccordion:!0,children:(0,L.tZ)(iL.ZP,{css:ov.docs,children:iO})}),(0,L.tZ)(iH,{title:"Environment variables",isAccordion:!0,children:(0,L.tZ)(ir,{connectionString:x,databaseName:o.databaseName})})]})}),(0,L.tZ)(K.G,{css:ov.footer,children:g||h?(0,L.BX)(e$.Tg,{css:ov.removeConfirm,elevated:!0,children:[(0,L.tZ)(Q.xv,{children:"Removing this database will remove access to the data for this Repl."}),(0,L.tZ)(eY.E,{icon:(0,L.tZ)(ej.Z,{}),colorway:"warning",text:"This action cannot be undone."}),(0,L.tZ)(eV.zx,{text:"Yes, Remove Database",colorway:"negative",disabled:h,iconLeft:(0,L.tZ)(e4.Z,{}),onClick:m}),(0,L.tZ)(eV.zx,{text:"Cancel",disabled:h,onClick:b})]}):(0,L.tZ)(eV.zx,{css:ov.remove,text:"Remove Database",disabled:h,iconLeft:(0,L.tZ)(e4.Z,{}),onClick:p})}),(0,L.tZ)(iA,{})]})},oy=function(e){var t=e.neonDatabases,n=e.onDatabaseDeleted,r=e.onDatabaseUnfreezed,i=e.onDatabaseMigrated,o=e.performPaneOperation,a=t[0].isBackedByCycles;return(0,rX.P5)({controlName:op.uZ,logFlagToAnalytics:!0})&&!a?(0,L.tZ)(og,{neonDatabases:t,onDatabaseDeleted:n,onDatabaseUnfreezed:r,performPaneOperation:o}):(0,L.tZ)(om,{neonDatabases:t,onDatabaseDeleted:n,onDatabaseUnfreezed:r,onDatabaseMigrated:i,performPaneOperation:o})},ob=n(76588),oZ=n(93302),ow=n(4513),ox=n(92977);function oC(){var e=(0,nd._)(["\n  query NeonStartPage {\n    currentUser {\n      id\n      userSubscriptionType\n      usageBasedBilling(input: { capabilitiesOnly: true }) {\n        __typename\n        ... on UserUsageBasedBillingSummary {\n          capabilities {\n            canUseUsageBasedBilling\n            explanation\n            hasPaymentMethod\n          }\n        }\n      }\n      usageInterval {\n        ... on UsageInterval {\n          resources {\n            neonComputeTime {\n              allotment\n              usage\n            }\n            neonDataStorage {\n              allotment\n              usage\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return oC=function(){return e},e}var o_={},oS=(0,nf.Ps)(oC()),oE=n(70002),ok=n(25491),oT=n(44620),oR="Buy Cycles & Create a DB",oD="Use Cycles to create a DB",oI='Press "'.concat(oR,'" to initiate a daily Cycles subscription and activate a Neon Database. You will be redirected to our payment processor.\n'),oG='Press "'.concat(oD,'" to initiate a daily Cycles subscription and activate a Neon Database.'),oB=function(e){var t=e.onDatabaseCreated,n=(0,nu.Z)(),r=(0,nL.Z)().showError,i=(0,M._)(nG(),2),o=i[0],a=i[1].loading,l=(0,ot.Z)({forceFetch:!0}),c=l.cycles,s=l.loading,u=null!=c&&c>=ix,d=u?oG:oI,f=X.useCallback((0,eX._)(function(){var e,i,a,l,c,s,u;return(0,eF.Jh)(this,function(d){switch(d.label){case 0:return[4,o({variables:{input:{replId:n}}})];case 1:if(i=(e=d.sent()).data,(a=e.errors)&&a.length>0)return r("Error when creating Neon database: ".concat(null==a?void 0:a.join())),ru({action:"created",success:!1}),[2];return(null==i?void 0:i.createNeonDatabase.__typename)==="CreateNeonDatabaseResult"?(c=(l=i.createNeonDatabase).databaseId,s=l.databaseName,u=l.connectionString,t({__typename:"NeonDatabase",databaseId:c,databaseName:s,connectionString:u,projectId:l.projectId,isFrozen:l.isFrozen,isBackedByCycles:l.isBackedByCycles}),ru({action:"created",success:!0})):(r("Error: ".concat(null==i?void 0:i.createNeonDatabase.message)),ru({action:"created",success:!1})),[2]}})}),[o,n,r,t]),h=(0,M._)(X.useState(!1),2),p=h[0],m=h[1],v=X.useCallback((0,eX._)(function(){return(0,eF.Jh)(this,function(e){return m(!0),[2]})}),[]),g=X.useCallback((0,eX._)(function(){return(0,eF.Jh)(this,function(e){return m(!1),[2]})}),[]),y=X.useCallback((0,eX._)(function(){return(0,eF.Jh)(this,function(e){switch(e.label){case 0:return[4,f()];case 1:return e.sent(),m(!1),[2]}})}),[f]);return(0,L.BX)(K.G,{css:[J.l0.colWithGap(0),J.l0.height("100%"),J.l0.align.center,J.l0.p(8)],children:[(0,L.BX)(K.G,{css:[J.l0.colWithGap(16),J.l0.flex.grow(1),J.l0.flex.shrink(0),J.l0.maxWidth(600)],children:[(0,L.BX)(K.G,{css:[J.l0.colWithGap(8),J.l0.align.center],children:[(0,L.tZ)(K.G,{css:[J.l0.p(16)],children:(0,L.tZ)(ob.Z,{src:"/public/images/db_illustration.png",width:144,height:144,alt:"FPO visual"})}),(0,L.tZ)(Q.xv,{css:[J.l0.fontSize(16),J.l0.fontWeight.bold],multiline:!1,children:"Fully-managed PostgreSQL database"}),(0,L.tZ)(Q.xv,{css:[J.l0.fontSize(14)],multiline:!1,children:"10GB of fast read/write storage"}),(0,L.BX)(K.G,{css:[J.l0.rowWithGap(8),J.l0.align.center],children:[(0,L.tZ)(Q.xv,{css:[J.l0.fontSize(14)],multiline:!1,children:i_}),(0,L.tZ)(eE.hU,{alt:d,size:24,children:(0,L.tZ)(il.Z,{})})]})]}),(0,L.BX)(e$.Tg,{css:[J.l0.colWithGap(8),J.l0.mb(8)],background:"default",children:[(0,L.tZ)(eV.zx,{text:s?"Loading Cycles Balance":u?oD:oR,colorway:"primary",iconLeft:(0,L.tZ)(tX.Z,{}),disabled:s||a,onClick:v}),(0,L.tZ)(oE.Z,{href:iS,target:"_blank",text:"Learn More",iconRight:(0,L.tZ)(oT.Z,{}),variant:"outlined"})]}),(0,L.tZ)("hr",{css:[J.l0.my(16),{borderColor:J.TV.outlineDefault}]}),(0,L.tZ)(Q.xv,{css:[J.l0.fontSize(12),J.l0.color.foregroundDimmest],children:d}),(0,L.tZ)(ok.Z,{isOpen:p,onRequestClose:g,onRequestPowerUp:y,uponPurchaseGoTo:"workspace",context:"workspace_postgresql_pane",powerUp:"neon-database-preview"})]}),(0,L.tZ)(iA,{})]})},oA=(0,ee.X)({self:[J.l0.px(8),J.l0.pt(16)],container:[J.l0.colWithGap(32),J.l0.py(32),J.l0.textAlign.center,ox.Qw.maxWidth],title:[J.l0.colWithGap(4),J.l0.width("100%"),J.l0.maxWidth(320),{marginLeft:"auto",marginRight:"auto"}],usage:[J.l0.colWithGap(4),J.l0.width("100%"),J.l0.maxWidth(320),{marginLeft:"auto",marginRight:"auto"}],cta:[J.l0.width("100%"),J.l0.maxWidth(320),{marginLeft:"auto",marginRight:"auto"}],ctaContainer:[J.l0.colWithGap(8),J.l0.align.center],ctaStatusBanner:[J.l0.textAlign.left],payment:[J.l0.p(16),J.l0.borderRadius(12),J.l0.textAlign.left,J.l0.shadow(2)],budgetContainer:[J.l0.colWithGap(8),J.l0.border(),J.l0.borderRadius(8),J.l0.p(8)],disabledBanner:[J.l0.py(6),{alignSelf:"center"}],details:[J.l0.colWithGap(12),J.l0.maxWidth(400),{marginLeft:"auto",marginRight:"auto"}],detailsItem:{display:"grid",gridTemplateColumns:"56px auto",gap:20},detailsText:[J.l0.flex.growAndShrink(1),J.l0.textAlign.left]});function oP(e){var t=e.loading,n=e.ubbExplanation,r=e.hasPaymentMethod,i=e.handleOnCreate,o=e.refetchUbbCapabilitiesQueryData,a=e.setShowPaymentMethodForm,l=e.showPaymentMethodForm,c=e.setShowSupportForm,s=(0,rL.rv)();return n===i2.Fp.NeedsSubscription||n===i2.Fp.NeedsSubscriptionOrPaymentMethod?s?(0,L.tZ)(eY.E,{text:"You need a subscription to create a database. Navigate to Account > Billing to upgrade.",colorway:"warning",icon:(0,L.tZ)(ej.Z,{}),css:oA.ctaStatusBanner}):(0,L.BX)(K.G,{css:oA.ctaContainer,children:[(0,L.tZ)(iJ.Z,{context:"workspace_hosting_pane",text:"Upgrade your plan to create a database",css:oA.cta,colorway:"primary",variant:"outlined",disabled:l,onPlanCheckoutComplete:o}),(0,L.tZ)(eV.zx,{variant:"nofill",colorway:"primary",text:"or add a payment method",css:oA.cta,disabled:l,loading:t,iconLeft:(0,L.tZ)(i$.Z,{}),onClick:function(){return a()}})]}):n===i2.Fp.NeedsSmsVerification?(0,L.tZ)(iV.Z,{context:i2.jv.Neon,onSuccess:o}):n===i2.Fp.NeedsPaymentMethod?s?(0,L.tZ)(eY.E,{text:"You have used all free usage for this month. Check your email for more information or contact support.",colorway:"warning",icon:(0,L.tZ)(ej.Z,{}),css:oA.ctaStatusBanner}):(0,L.tZ)(eV.zx,{colorway:"primary",text:"Add a payment method",css:oA.cta,disabled:l,loading:t,iconLeft:(0,L.tZ)(i$.Z,{}),onClick:function(){return a()}}):n===i2.Fp.NeedsUnbanning?(0,L.tZ)(iY.u,{text:"Your account currently has restrictions on creating a database. We're here to help! Please reach out to our support team for assistance.",colorway:"warning",icon:(0,L.tZ)(ej.Z,{}),css:oA.ctaStatusBanner,onClick:function(){return c()}}):n===i2.Fp.InsufficientBudget?(0,L.BX)(L.HY,{children:[(0,L.tZ)(eY.E,{text:"You've reached your monthly usage budget. Increase your budget to create a database.",colorway:"warning",icon:(0,L.tZ)(ej.Z,{}),css:oA.ctaStatusBanner}),(0,L.tZ)(K.G,{css:oA.budgetContainer,children:(0,L.tZ)(ij.L,{onUpdateSuccess:o})})]}):(0,L.BX)(L.HY,{children:[(0,L.tZ)(eV.zx,{colorway:"primary",onClick:i,text:"Create a database",loading:t,css:oA.cta}),!1===r?(0,L.tZ)(iY.u,{text:"Add a payment method to avoid downtime",colorway:"warning",icon:(0,L.tZ)(ej.Z,{}),css:oA.ctaStatusBanner,onClick:function(){return s?null:a()}}):null]})}var oN=function(e){var t,n,r=e.onDatabaseCreated,i=(0,M._)(X.useState(!1),2),o=i[0],a=i[1],l=(0,M._)(X.useState(!1),2),c=l[0],s=l[1],u=(0,nu.Z)(),d=(0,nL.Z)().showError,f=(t=(0,eO._)({},o_,{notifyOnNetworkStatusChange:!0,onError:function(e){d(e.message)}}),nh.a(oS,t)),h=f.loading,p=f.data,m=f.refetch,v=(0,M._)(nG({onError:function(e){d("Error when creating Neon database: ".concat(e.message)),ru({action:"created",success:!1})},onCompleted:function(e){if((null==e?void 0:e.createNeonDatabase.__typename)==="CreateNeonDatabaseResult"){var t=e.createNeonDatabase;r({__typename:"NeonDatabase",databaseId:t.databaseId,databaseName:t.databaseName,connectionString:t.connectionString,projectId:t.projectId,isFrozen:t.isFrozen,isBackedByCycles:t.isBackedByCycles}),ru({action:"created",success:!0})}else{d("Error: ".concat(null==e?void 0:e.createNeonDatabase.message)),ru({action:"created",success:!1});return}}}),2),g=v[0],y=v[1].loading,b=(null==p?void 0:null===(n=p.currentUser)||void 0===n?void 0:n.usageBasedBilling.__typename)==="UserUsageBasedBillingSummary"?p.currentUser.usageBasedBilling.capabilities:null,Z=X.useMemo(function(){return function(e){var t=e.data,n=null==t?void 0:t.usageInterval;if(n&&"UsageInterval"===n.__typename){var r=Math.max(0,n.resources.neonComputeTime.allotment-n.resources.neonComputeTime.usage),i=(0,oZ.fZ)(r,{resourceUsageType:"ComputeHours"}),o=Math.max(0,n.resources.neonDataStorage.allotment-n.resources.neonDataStorage.usage);return{formattedComputeTimeAmount:i,formattedDataStorageAmount:(0,oZ.fZ)(o,{precision:1,resourceUsageType:"GiB"})}}}({data:null==p?void 0:p.currentUser})},[p]);return(0,L.BX)(K.G,{css:oA.self,children:[(0,L.tZ)(iq.u,{isOpen:c,onRequestClose:function(){return s(!1)},children:(0,L.tZ)(iz.Z,{onRequestClose:function(){return s(!1)}})}),(0,L.BX)(K.G,{css:oA.container,children:[(0,L.BX)(K.G,{css:oA.title,children:[(0,L.tZ)(Q.xv,{variant:"subheadBig",children:"PostgreSQL Database"}),(0,L.tZ)(Q.xv,{color:"dimmer",children:"Fully-managed, usage based PostgreSQL database with 10GB of fast read/write storage."}),(0,L.tZ)(Q.xv,{css:J.l0.textAlign.center,children:(0,L.tZ)("a",{href:iS,target:"_blank",rel:"noopener",children:"Learn more"})})]}),(0,L.BX)(K.G,{css:J.l0.colWithGap(16),children:[(0,L.tZ)(K.G,{css:[J.l0.rowWithGap(0),J.l0.justify.center],children:(0,L.tZ)(ob.Z,{src:"/public/images/db_illustration.png",width:120,height:120,alt:"FPO visual"})}),null!=Z?(0,L.BX)(Q.xv,{css:oA.usage,color:"dimmer",children:["You have ",Z.formattedComputeTimeAmount," left this month and ",Z.formattedDataStorageAmount," of storage left in total."]}):null,(0,L.BX)(K.G,{css:J.l0.colWithGap(8),children:[(0,L.tZ)(oP,{loading:h||y,ubbExplanation:null==b?void 0:b.explanation,hasPaymentMethod:null==b?void 0:b.hasPaymentMethod,handleOnCreate:function(){g({variables:{input:{replId:u}}})},refetchUbbCapabilitiesQueryData:m,setShowPaymentMethodForm:function(){return a(!0)},showPaymentMethodForm:o,setShowSupportForm:function(){return s(!0)}}),o?(0,L.tZ)(e$.Tg,{elevated:!0,css:oA.payment,children:(0,L.tZ)(os.q,{onSuccess:(0,eX._)(function(){return(0,eF.Jh)(this,function(e){switch(e.label){case 0:return a(!1),[4,m()];case 1:return e.sent(),[2]}})}),context:"workspace_hosting_pane"})}):null]})]}),(0,L.BX)(K.G,{css:oA.details,children:[(0,L.BX)(K.G,{css:oA.detailsItem,children:[(0,L.tZ)(ow.lt,{}),(0,L.BX)(Q.xv,{css:oA.detailsText,children:["Get charged for what you use across compute time, storage, written data and data transfer,"," ",(0,L.tZ)("a",{href:iE,target:"_blank",rel:"noopener",children:"see pricing"})]})]}),(0,L.BX)(K.G,{css:oA.detailsItem,children:[(0,L.tZ)(ow.fG,{}),(0,L.BX)(Q.xv,{css:oA.detailsText,children:["Free usage allocations are included in Replit plans, and then billed at a per unit price,"," ",(0,L.tZ)("a",{href:iE,target:"_blank",rel:"noopener",children:"see allocations"})]})]})]})]})]})},oU=function(e){var t=e.onDatabaseCreated;return(0,rX.P5)({controlName:op.uZ,logFlagToAnalytics:!0})?(0,L.tZ)(oN,{onDatabaseCreated:t}):(0,L.tZ)(oB,{onDatabaseCreated:t})},oL=function(e){var t,n,r=e.performPaneOperation,i=(0,nu.Z)(),o=(0,nL.Z)().showError,a=(0,z.Z)().psql,l=(0,M._)(X.useState([]),2),c=l[0],s=l[1],u=(t=(0,eO._)({},nD,{variables:{input:{replId:i}},fetchPolicy:"no-cache",onCompleted:function(e){if("GetNeonDatabasesResult"===e.getNeonDatabases.__typename){s(e.getNeonDatabases.databases);return}o("Error: ".concat(e.getNeonDatabases.message))}}),nh.a(nP,t)),d=u.loading,f=u.refetch,h=it(),p=X.useCallback((n=(0,eX._)(function(e){var t;return(0,eF.Jh)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),s([e]),[4,a.ensureNixPsqlPackageInstalled(!0)];case 1:return n.sent(),h({connectionString:e.connectionString,databaseName:e.databaseName}),[3,3];case 2:return t=n.sent(),o("Error: ".concat(t.message)),[3,3];case 3:return[2]}})}),function(e){return n.apply(this,arguments)}),[a,h,o]),m=(0,eB.Dv)(iM);return m?(0,L.tZ)(oy,{neonDatabases:[m],onDatabaseDeleted:f,onDatabaseUnfreezed:f,onDatabaseMigrated:p,performPaneOperation:r}):d?(0,L.tZ)(K.G,{css:[J.l0.flex.row,J.l0.justify.center,J.l0.p(32)],children:(0,L.tZ)(eR.Z,{})}):c.length?(0,L.tZ)(oy,{neonDatabases:c,onDatabaseDeleted:f,onDatabaseUnfreezed:f,onDatabaseMigrated:p,performPaneOperation:r}):(0,L.tZ)(oU,{onDatabaseCreated:p})},oO=n(26544),oM=ed.Dy.Object({type:ed.Dy.Literal("neon")}),oX={Content:function(e){var t=e.options;return(0,L.tZ)(oL,{performPaneOperation:t.performPaneOperation})},Icon:function(e){var t=e.size;return(0,L.tZ)(oO.Z,{size:t})},getTitle:function(){return"PostgreSQL"},decode:function(e){return ef.B4.Decode(oM,e)}},oF=n(62393),oW=n(96239),oH=n(75834),oV=ed.Dy.Object({type:ed.Dy.Literal("vnc")}),oz={Content:function(){return(0,L.tZ)(oj,{})},Icon:function(e){var t=e.size;return(0,L.tZ)(oW.Z,{size:t})},getTitle:function(){return"Output"},decode:function(e){return ef.B4.Decode(oV,e)}};function oj(){var e=(0,z.Z)(),t=e.fs,n=e.container;return(0,L.tZ)(K.G,{css:[J.l0.flex.growAndShrink(1)],children:(0,L.tZ)(oH.Z,{fs:t,container:n})})}var oq=n(14675),oY=n(82723),o$=(0,no.iv)([J.l0.focusRing,J.l0.display.flex,J.l0.center,J.l0.borderRadius(4),J.l0.backgroundColor.backgroundRoot,J.l0.color.foregroundDefault,J.l0.cursor.pointer,J.l0.p(4),(b={transition:"background-color 0.2s",border:"none"},(0,O._)(b,J.wl.hover,[J.l0.backgroundColor.backgroundHigher]),(0,O._)(b,":focus",{outline:"none"}),b)]),oJ=function(e){var t=e.onClick;return(0,L.tZ)(eD.u,{tooltip:"Search",placement:"bottom-start",children:(0,L.tZ)("button",{"aria-label":"Search",onClick:t,css:o$,children:(0,L.tZ)(oY.Z,{size:16})})})},oK=n(71984),oQ=n(95571),o0=n(40282),o1=n(25632),o2=n(31384),o8=n(19562),o4=n(32911);function o3(e){var t=e.portsOpenedByThisShell,n=e.performPaneOperation,r=e.onClose;return(0,L.tZ)(o4.ms,{configurations:t.map(function(e){return e.configuration}),openWebview:function(){n({operation:"open",secondary:!0,pane:{type:"webview",data:t.length>0?{portType:"local",port:t[0].configuration.localPort}:void 0}})},openNetworkingTool:function(){n({operation:"open",secondary:!0,pane:{type:"networking"}})},onClose:function(){null==r||r()}})}var o5=n(37463),o6=n(32517),o9=n(83898),o7=n(92032),ae=n(66820),at=n(14917),an={CURSOR_SAVE:"\x1b[s",CURSOR_RESTORE:"\x1b[u",ERASE_TO_EOL:"\x1b[K",COLOR_RESET:"\x1b[0m",COLOR_BRIGHT_BLACK:"\x1b[0;90m"},ar=(0,no.iv)([J.l0.position.absolute,J.l0.left(8),J.l0.right(0),J.l0.zIndex(5)]);function ai(e){var t=e.lineNumber,n=e.paneHeight,r=e.shell,i=e.sendToShellChannel,o=e.onClose,a=(0,X.useMemo)(function(){return null==r?void 0:r._term},[r]),l=(0,X.useMemo)(function(){var e,t=null==a?void 0:a._core;return null!==(e=null==t?void 0:t._renderService.dimensions.css.cell)&&void 0!==e?e:{width:0,height:0}},[a]),c="SYNTHETIC_SHELL_FILE_PATH",s=(0,at.eD)(),u=(0,o9.ql)(),d=(0,at.oQ)(c),f=(0,o7.n)(d),h=(0,ae.tz)(),p=(0,ae.WS)(d),m=(0,X.useRef)(""),v=(0,X.useRef)(!1),g=(0,X.useRef)(null),y=(0,M._)((0,X.useState)(64),2),b=y[0],Z=y[1],w=(0,X.useCallback)(function(e){return Z(e.height)},[Z]);(0,X.useEffect)(function(){return function(){v.current=!1,g.current=null,s(c)}},[s]),(0,X.useEffect)(function(){if(null===f){m.current="";return}m.current!==f&&(v.current&&(r.write(an.CURSOR_RESTORE),r.write(an.ERASE_TO_EOL)),r.write(an.CURSOR_SAVE),r.write(an.COLOR_BRIGHT_BLACK),r.write(f),r.write(an.COLOR_RESET),v.current=!0,m.current=f)},[f,r]);var x=(0,X.useCallback)(function(){p&&d&&h({messageId:d.id})},[h,d,p]),C=(0,X.useCallback)(function(){x(),v.current&&(r.write(an.CURSOR_RESTORE),r.write(an.ERASE_TO_EOL),r.write(an.COLOR_RESET)),o()},[r,x,o]);(0,X.useEffect)(function(){return r.onData(function(){x(),o()}).dispose},[r,x,o]);var _=(0,X.useCallback)(function(){if(!v.current||!f){C();return}r.write(an.CURSOR_RESTORE),r.write(an.ERASE_TO_EOL),r.write(an.COLOR_RESET),i(f),o()},[r,f,o,C,i]),S=!!((null==d?void 0:d.loading)||(null==d?void 0:d.streaming)),E=(0,o6.U1)({loading:S,onSubmit:function(){I?_():G()},onClose:C}),k=E.value,T=E.setValue,R=E.onKeyDown,D=!!((null==d?void 0:d.stopReason)||(null==d?void 0:d.aborted)),I=D&&g.current===k,G=(0,X.useCallback)(function(){g.current=k,u({chatMessage:{type:"generateCode",text:k,codeReference:{code:"",fileContent:"#!/bin/bash\n",filePath:c,fileVersion:0,language:"bash",range:{indexFrom:0,indexTo:0,lineFrom:0,lineTo:0}}}})},[u,k]),B=l.height*(t+1)+8,A="top";return B+b>n&&(A="bottom",B=n-l.height*(t+1)+4),(0,L.tZ)(K.G,{css:ar,style:{top:"top"===A?B:void 0,bottom:"bottom"===A?B:void 0},children:(0,L.BX)(o6.If,{requestMeasure:w,type:"generateCode",isCodeMirrorPocket:!1,children:[(0,L.tZ)(o6.II,{value:k,onChange:function(e){return T(e.currentTarget.value)},placeholder:"Enter a prompt to generate a shell command",onKeyDown:R,autoFocus:!0}),(0,L.BX)(o6.$_,{children:[(0,L.BX)(L.HY,{children:[(0,L.tZ)(o6.Xs,{type:"generateCode"}),D?(0,L.tZ)(eE.hU,{alt:"Rerun the same prompt",onClick:function(){return G()},size:12,colorway:"grey",children:(0,L.tZ)(ip.Z,{})}):null]}),I?(0,L.BX)(L.HY,{children:[(0,L.tZ)(eV.zx,{variant:"outlined",size:"small",text:"Reject",onClick:function(){return C()}}),(0,L.tZ)(eV.zx,{size:"small",text:"Accept",colorway:"blurple",onClick:_,dataCy:"ghostwriter-inline-accept-suggestion"})]}):(0,L.tZ)(o6.k4,{loading:S,disabled:!k,onClick:function(){S?x():G()}})]})]})})}var ao=n(29620),aa=(0,no.iv)([J.l0.height("100%"),J.l0.overflow("hidden"),{"& .xterm":[J.l0.pl(8),J.l0.pt(8),J.l0.pb(4),J.l0.height("100%")]}]),al=(0,ee.X)({container:[J.l0.height("100%"),{"&:focus-within .controls":{opacity:1}}],xterm:aa,xtermWithBorderRadius:[aa,{"& .xterm-viewport":[J.l0.borderRadius(0,0,8,8)]}]});function ac(e){var t,n,r=e.shell,i=e.shellMetadata,o=e.sendToShellChannel,a=e.shellRef,l=e.className,c=e.openSearchAndReplace,s=e.openAIWithMessage,u=e.performPaneOperation,d=e.isGeneratePromptVisible,f=e.currentPromptLineNumber,h=e.onOpenGeneratePrompt,p=e.onCloseGeneratePrompt,m=(0,o1.Gn)("accessibleTerminal").preferences.accessibleTerminal,v=(0,rX.P5)({controlName:"flag-ai-in-the-shell",logFlagToAnalytics:!1}),g=(0,M._)((0,X.useState)(!1),2),y=g[0],b=g[1],Z=(0,M._)((0,X.useState)(""),2),w=Z[0],x=Z[1],C=(0,o5.dF)(null!==(t=null==i?void 0:i.cgroup)&&void 0!==t?t:void 0);r&&y&&(n=(0,L.tZ)(oq.R,{searchValue:w,setSearchValue:x,findPrevious:r.findPrevious,findNext:r.findNext,exit:function(){return b(!1)}})),!r||y||v||(n=(0,L.tZ)(oJ,{onClick:function(){return b(!0)}}));var _=(0,rL.T3)(),S=(0,o2.av)().onContextMenu,E=(0,o8.j)({xterm:r,isOutputsTerminal:!1,openAIWithMessage:s,openShellSearch:function(e){b(!0),x(e)},openSearchAndReplace:c,openGeneratePrompt:h});(0,X.useEffect)(function(){null==r||r.fit()},[r,C]);var k=(0,M._)((0,X.useState)(0),2),T=k[0],R=k[1],D=(0,j.Z)(function(e){R(e.height)},{type:"throttle",wait:200});return(0,L.BX)(K.G,{className:l,innerRef:D,css:al.container,onKeyDown:function(e){"f"===e.key&&(0,oQ.j)(e)&&(b(!0),e.preventDefault())},children:[!m&&(0,L.tZ)(o0.T,{children:'Enable "Accessible Terminal" in Workspace Settings to use a screen reader with the shell.'}),(0,L.BX)(K.G,{css:[J.l0.coverContainer,J.l0.flex.column],onClick:function(){d&&(p(),null==r||r.focus())},children:[(0,L.tZ)(K.G,{css:[_?al.xterm:al.xtermWithBorderRadius,J.l0.flex.growAndShrink(1),v&&d?{pointerEvents:"none",filter:"opacity(0.75)"}:null],innerRef:a,onContextMenu:function(e){return S(e,{command:E})}}),(0,L.tZ)(o3,{portsOpenedByThisShell:C,performPaneOperation:u,onClose:function(){null==r||r.focus(),null==r||r.fit()}})]}),v&&r&&d?(0,L.tZ)(ai,{lineNumber:f,paneHeight:T,shell:r,sendToShellChannel:o,onClose:function(){p(),r.focus()}}):null,r?(0,L.BX)(K.G,{className:"controls",css:[J.l0.position.absolute,J.l0.flex.row,J.l0.top(8),J.l0.right(8),J.l0.height(30),J.l0.align.center,{opacity:0,zIndex:4}],children:[n,v?null:(0,L.tZ)(oK.Z,{onClick:r.clear})]}):null,r?null:(0,L.tZ)("code",{css:[J.l0.color.foregroundDimmest,J.l0.coverContainer,J.l0.p(8),J.l0.font.code],children:"Loading..."})]})}var as=n(41140),au=n(74652),ad=n(96003),af=ed.Dy.Object({type:ed.Dy.Literal("shell"),data:ed.Dy.Optional(ed.Dy.Object({initialPwd:ed.Dy.Optional(ed.Dy.String())}))}),ah={Content:function(e){var t,n=e.pane,r=e.options;return(0,L.tZ)(ap,{isActive:r.isActive,initialPwd:null===(t=n.data)||void 0===t?void 0:t.initialPwd,performPaneOperation:r.performPaneOperation})},Icon:function(e){var t=e.size;return(0,L.tZ)(as.Z,{size:t})},getTitle:function(){return"Shell"},decode:function(e){return ef.B4.Decode(af,e)}};function ap(e){var t=e.isActive,n=e.initialPwd,r=e.performPaneOperation,i=(0,z.Z)(),o=i.container,a=i.fs,l=(0,M._)(X.useState(!1),2),c=l[0],s=l[1],u=(0,o9.ql)(),d=(0,M._)(X.useState(void 0),2),f=d[0],h=d[1],p=(0,X.useCallback)(function(e){r({operation:"open",secondary:!0,pane:{type:(0,tF.Dp)(e),data:e}})},[r]),m=(0,X.useCallback)(function(e){r({operation:"open",secondary:!0,pane:{type:"searchReplace",data:{initialQuery:e}}})},[r]),v=(0,X.useCallback)(function(e){u({chatMessage:e}),r({operation:"open",secondary:!0,pane:{type:"ghostwriterChat"}})},[r,u]),g=(0,X.useCallback)(function(e,t){r({operation:"open",secondary:!0,pane:{type:"webview",data:{portType:"local",path:e,port:t}}})},[r]),y=(0,M._)((0,X.useState)(0),2),b=y[0],Z=y[1],w=(0,M._)((0,X.useState)(!1),2),x=w[0],C=w[1],_=(0,M._)((0,ao.St)({container:o,initialPwd:n,onOutput:(0,X.useCallback)(function(){s(!0)},[s]),onShellMetadata:h,openFile:p,listFiles:a.listFiles,openWebview:g,onOpenGeneratePrompt:function(){C(!0)},onUpdateCurrentPromptLineNumber:function(e){Z(e)}}),3),S=_[0],E=_[1],k=_[2],T=(0,X.useMemo)(function(){return[{type:"action",label:"Clear shell",icon:(0,L.tZ)(e4.Z,{}),run:function(){return null==S?void 0:S.clear()}}]},[S]);return(0,er.Wk)(function(){return S},[S]),(0,er.L5)(function(){if(S&&c)return{actions:T,type:"shell",exec:function(e){k(e+"\n")}}},[S,k,c,T]),(0,ad.ow)(ao.S1,t),(0,au.Il)(function(){return[ao.CH.id,{run:function(){C(!0)},scope:ao.S1,bubble:!1}]},[C]),(0,L.tZ)(ac,{shell:S,shellMetadata:f,sendToShellChannel:k,shellRef:E,performPaneOperation:r,openSearchAndReplace:m,openAIWithMessage:v,currentPromptLineNumber:b,isGeneratePromptVisible:x,onOpenGeneratePrompt:function(){C(!0)},onCloseGeneratePrompt:function(){return C(!1)}})}var am=n(69451),av=n.n(am),ag=n(70671);function ay(){var e=(0,nd._)(["\n  query WorkspaceDrawCurrentUser {\n    currentUser {\n      id\n      username\n    }\n  }\n"]);return ay=function(){return e},e}var ab={},aZ=(0,nf.Ps)(ay()),aw=n(73660),ax=function(e,t,n){if(!e)return[];var r,i=t(e.getSceneElementsIncludingDeleted()),o=e.getAppState();return(r=n.reduce(function(e,t){var n,r,a;return t.id===(null===(n=o.editingElement)||void 0===n?void 0:n.id)||t.id===(null===(r=o.resizingElement)||void 0===r?void 0:r.id)||t.id===(null===(a=o.draggingElement)||void 0===a?void 0:a.id)||(i[t.id]&&i[t.id].version>t.version?e.push(i[t.id]):i[t.id]&&i[t.id].version===t.version&&i[t.id].versionNonce!==t.versionNonce&&i[t.id].versionNonce<t.versionNonce?e.push(i[t.id]):e.push(t),delete i[t.id]),e},[])).concat.apply(r,(0,e_._)(Object.values(i)))},aC=function(){var e,t,n=new Promise(function(n,r){e=n,t=r});return n.resolve=e,n.reject=t,n},a_=function(e){return e.reduce(function(e,t){return e[t.id]=t,e},{})},aS=n(73926),aE=n.n(aS),ak=n(56337),aT=n(98655),aR=n(61405),aD=(0,no.iv)(".excalidraw.excalidraw-modal-container.excalidraw--mobile{margin-top:",aT.Mz-1,"px;}");function aI(e){var t,r,i,o,a=e.fs,l=e.broadcast,c=e.filePath,s=(0,M._)((0,X.useState)(void 0),2),u=s[0],d=s[1],f=(0,ak.Z)(),h=(0,X.useRef)(function(e){return(0,e_._)(e)}),p=(0,X.useRef)(function(e){return -1}),m=(0,X.useRef)({readyPromise:aC()}),v=(0,X.useRef)({promise:null});(0,X.useEffect)(function(){Promise.all([n.e(6655),n.e(7070)]).then(n.t.bind(n,17070,23)).then(function(e){h.current=function(t){return t.filter(function(t){return t.isDeleted||!e.isInvisiblySmallElement(t)})},p.current=e.getSceneVersion,d(e.Excalidraw)})},[]);var g=function(){return m.current},y=(t=(0,eO._)({},ab,{ssr:!1}),nh.a(aZ,t)),b=y.data,Z=y.loading,w=(null==b?void 0:null===(o=b.currentUser)||void 0===o?void 0:o.username)||"",x=(0,ag.F)().isDarkColorScheme,C=(0,aR.aG)(),_=(0,aw.Z)(),S=null==_?void 0:_.color,E=(0,M._)((0,X.useState)(new Map),2),k=E[0],T=E[1],R=(0,M._)((0,X.useState)(-1),2),D=R[0],I=R[1],G=(0,X.useRef)(aE()()).current;(0,X.useEffect)(function(){function e(){return(e=(0,eX._)(function(){var e,t;return(0,eF.Jh)(this,function(n){switch(n.label){case 0:if(!b||!b.currentUser)return[2];return[4,m.current.readyPromise];case 1:return n.sent(),e=g().getAppState().collaborators,t=new Map,C.forEach(function(n){if(n.username!==(null==b?void 0:null===(r=b.currentUser)||void 0===r?void 0:r.username)){var r,i=e.get(n.username)||{};t.set(n.username,(0,eM._)((0,eO._)({},i),{username:n.username,color:{background:n.color,foreground:n.color}}))}}),g().updateScene({collaborators:t}),[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[b,C]);var B=(r=(0,eX._)(function(e,t){var n,r,i,o,a,s;return(0,eF.Jh)(this,function(u){t||(e=e.filter(function(e){return!k.has(e.id)||e.version>k.get(e.id)})),n=!0,r=!1,i=void 0;try{for(o=e[Symbol.iterator]();!(n=(a=o.next()).done);n=!0)s=a.value,k.set(s.id,s.version),T(new Map(k))}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return l.broadcastMessage(G,{text:JSON.stringify({elements:e,path:c})}),[2]})}),function(e,t){return r.apply(this,arguments)});(0,X.useEffect)(function(){if(l)return l.onBroadcastReceived(G,function(e){var t=e.username,n=JSON.parse(e.text);if(n.path===c){if(n.collaborator&&m.current){var r=g().getAppState().collaborators;r.set(t,(0,eM._)((0,eO._)({},r.get(t),n.collaborator),{username:t})),g().updateScene({collaborators:r})}else if(n.elements){var i=ax(g(),a_,n.elements);I(p.current(i)),g().updateScene({elements:i})}else if(n.removePresence){var o=g().getAppState().collaborators;o.delete(n.removePresence),g().updateScene({collaborators:o})}}})},[l,c,G]),(0,X.useEffect)(function(){function e(){return(e=(0,eX._)(function(){return(0,eF.Jh)(this,function(e){var t;return c&&a&&(v.current.promise=new Promise((t=(0,eX._)(function(e){var t,n,r;return(0,eF.Jh)(this,function(i){switch(i.label){case 0:return[4,Promise.all([a.readFile(c),m.current.readyPromise])];case 1:return"content"in(t=M._.apply(void 0,[i.sent(),1])[0])&&(n=JSON.parse(t.content.toString()||"{}"),r=g().getAppState(),n.appState=(0,eO._)({},r),n.scrollToContent=!0,e(n)),[2]}})}),function(e){return t.apply(this,arguments)}))),[2]})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[c,a]);var A=(0,X.useCallback)(av()((i=(0,eX._)(function(e,t){var n;return(0,eF.Jh)(this,function(r){switch(r.label){case 0:if(n=e.filter(function(e){return!e.isDeleted}),!c)return[3,2];return[4,a.writeFile(c,r0.Z.from(JSON.stringify({elements:n,files:t})))];case 1:r.sent(),r.label=2;case 2:return[2]}})}),function(e,t){return i.apply(this,arguments)}),350),[c]),P=function(e){p.current(e)>D&&(D>-1&&B(h.current(e),!1),I(p.current(e)))};return(0,L.BX)(K.G,{css:{position:"relative",height:"100%",width:"100%",flex:1,boxShadow:S?"0 3px 0 3px ".concat(S):"none",backgroundColor:J.TV.backgroundDefault,"& .excalidraw [title~=Library]":{display:"none"}},onMouseLeave:function(){l.broadcastMessage(G,{text:JSON.stringify({removePresence:w,path:c})})},children:[u&&!Z?(0,L.tZ)(u,{ref:m,UIOptions:{canvasActions:{loadScene:!1}},isCollaborating:!0,theme:x?"dark":"light",initialData:v.current.promise,onPointerUpdate:function(e){var t=e.pointer,n=g().getAppState().selectedElementIds||{};l.broadcastMessage(G,{text:JSON.stringify({collaborator:{pointer:t,selectedElementIds:n},path:c})})},onChange:function(e,t,n){P(e),I(p.current(e)),p.current(e)>D&&A(e,n)},name:w}):null,f?(0,L.tZ)(no.xB,{styles:[aD]}):null]})}function aG(e){var t=e.fs,n=e.broadcast,r=e.filePath;return(0,L.tZ)(aI,{fs:t,broadcast:n,filePath:r},r)}var aB=n(97168),aA=ed.Dy.Object({type:ed.Dy.Literal("draw"),data:ed.Dy.Object({path:ed.Dy.String()})}),aP={Content:function(e){var t=e.pane,n=e.options.performPaneOperation;return(0,L.tZ)(aN,{path:t.data.path,performPaneOperation:n})},Icon:function(e){var t=e.size;return(0,L.tZ)(aB.Z,{size:t})},getTitle:function(e){return(0,eu.UO)(e.data.path)},decode:function(e){return ef.B4.Decode(aA,e)}};function aN(e){var t=e.path,n=e.performPaneOperation,r=(0,z.Z)(),i=r.fs,o=r.broadcast,a=(0,tG.Mp)({path:t,performPaneOperation:n});return(0,er.L5)(function(){if(a)return{commands:a}},[a]),(0,L.BX)(L.HY,{children:[(0,L.tZ)(tG.HK,{path:t,performPaneOperation:n}),(0,L.tZ)(tG.VY,{children:(0,L.tZ)(aG,{fs:i,broadcast:o,filePath:t})})]})}var aU=n(61601),aL=n(57468),aO=n(80259),aM=ed.Dy.Object({type:ed.Dy.Literal("media"),data:ed.Dy.Object({path:ed.Dy.String()})}),aX={Content:function(e){var t=e.pane,n=e.options;return(0,L.tZ)(aF,{path:t.data.path,performPaneOperation:n.performPaneOperation})},Icon:function(e){var t=e.pane,n=e.size;return(0,L.tZ)(aL.Z,{path:t.data.path,size:n})},getTitle:function(e){return(0,eu.UO)(e.data.path)},decode:function(e){return ef.B4.Decode(aM,e)}};function aF(e){var t=e.path,n=e.performPaneOperation,r=(0,z.Z)().fs,i=(0,tG.Mp)({path:t,performPaneOperation:n}),o=i?(0,e_._)(i):[],a={match:aO.pl,data:{label:"Open in Editor",icon:(0,L.tZ)(ei.Z,{}),type:"action",run:function(){n({operation:"replace",pane:{type:"codeEditor",data:{path:t}}})}}};return(0,eu.B4)(t)&&o.push(a),(0,er.L5)(function(){if(i)return{commands:o}},[i]),(0,L.BX)(L.HY,{children:[(0,L.tZ)(tG.HK,{path:t,performPaneOperation:n}),(0,L.tZ)(tG.VY,{centered:!0,children:(0,L.tZ)(aU.Z,{filePath:t,fs:r})})]})}var aW=(0,ee.X)({text:{width:"100%",textAlign:"center"}}),aH=ed.Dy.Object({type:ed.Dy.Literal("binary"),data:ed.Dy.Object({path:ed.Dy.String()})}),aV={Content:function(e){var t=e.pane,n=e.options;return(0,L.tZ)(az,{path:t.data.path,performPaneOperation:n.performPaneOperation})},Icon:function(e){var t=e.pane,n=e.size;return(0,L.tZ)(aL.Z,{path:t.data.path,size:n})},getTitle:function(e){return(0,eu.UO)(e.data.path)},decode:function(e){return ef.B4.Decode(aH,e)}};function az(e){var t=e.path,n=e.performPaneOperation,r=(0,z.Z)().fs,i=(0,tG.Mp)({path:t,performPaneOperation:n});(0,er.L5)(function(){if(i)return{commands:i?(0,e_._)(i):[]}},[i]);var o=(0,M._)((0,X.useState)(null),2),a=o[0],l=o[1],c=(0,M._)((0,X.useState)(!0),2),s=c[0],u=c[1];return((0,X.useEffect)(function(){var e=r.watchFile(t,{onChange:function(e){l(e.toString("base64")),u(!1)},onError:function(){l(null),u(!1)},onMoveOrDelete:function(){l(null),u(!1)}});return function(){e(),u(!0),l(null)}},[r,t]),s)?(0,L.tZ)(eR.Z,{}):null===a?(0,L.tZ)(Q.xv,{multiline:!1,children:"Failed to load binary file"}):(0,L.BX)(L.HY,{children:[(0,L.tZ)(tG.HK,{path:t,performPaneOperation:n}),(0,L.BX)(tG.VY,{centered:!0,children:[(0,L.tZ)(Q.xv,{css:aW.text,children:"The file is not displayed in the text editor because it is either binary or uses an unsupported text encoding."}),(0,L.tZ)(eE.hU,{alt:"Download",css:[J.l0.position.absolute,J.l0.bottom(8),J.l0.right(8),J.l0.p(16)],children:(0,L.tZ)("a",{href:"data:text/plain;base64,".concat(a),download:(0,eu.UO)(t),css:[J.l0.color.foregroundDimmer],children:(0,L.tZ)(e8.Z,{})})})]})]})}var aj=n(86309),aq=n(99741),aY=n(67313),a$=n(55103),aJ=(0,ee.X)({container:[J.l0.width(60),J.l0.height(24),J.l0.display.flex,J.l0.center,J.l0.borderRadius(4),J.l0.fontSize(J.TV.fontSizeSmall)]});function aK(e){var t,n,r;switch(e.type){case a$.h.ADDED:case a$.h.UNTRACKED:t="Added",n=J.TV.greenDimmest,r=J.TV.greenStrongest;break;case a$.h.MODIFIED:t="Modified",n=J.TV.yellowDimmest,r=J.TV.yellowStrongest;break;case a$.h.DELETED:t="Deleted",n=J.TV.redDimmest,r=J.TV.redStrongest;break;case a$.h.RENAMED:t="Renamed",n=J.TV.tealDimmest,r=J.TV.tealStrongest;break;case a$.h.COPIED:t="Copy",n=J.TV.limeDimmest,r=J.TV.limeStrongest;break;default:return null}return(0,L.tZ)(K.G,{style:{backgroundColor:n,color:r},css:aJ.container,children:(0,L.tZ)("span",{children:t})})}function aQ(e){var t,n,r;switch(e.type){case"ADDED":t="Added",n=J.TV.greenDimmest,r=J.TV.greenStrongest;break;case"MODIFIED":t="Modified",n=J.TV.yellowDimmest,r=J.TV.yellowStrongest;break;case"DELETED":t="Deleted",n=J.TV.redDimmest,r=J.TV.redStrongest;break;case"RENAMED":t="Renamed",n=J.TV.tealDimmest,r=J.TV.tealStrongest;break;case"COPIED":t="Copy",n=J.TV.limeDimmest,r=J.TV.limeStrongest;break;default:return null}return(0,L.tZ)(K.G,{style:{backgroundColor:n,color:r},css:aJ.container,children:(0,L.tZ)("span",{children:t})})}var a0=n(48528),a1=n(10814),a2=n(70322),a8=n(19237),a4="rgba(180, 0, 0, 0.125)",a3="rgba(0, 180, 0, 0.125)",a5=nM.tk.theme({"&.cm-merge-b .cm-changedLine":{background:"rgba(0, 180, 0, 0.075)"},"&.cm-merge-a .cm-changedLine":{background:"rgba(180, 0, 0, 0.075)"},"&.cm-merge-b .cm-changedLineGutter":{background:a3},"&.cm-merge-a .cm-changedLineGutter":{background:a4},"&.cm-merge-b .cm-changedText":{background:a3,outline:"solid 1px ".concat(a3),borderRadius:"2px"},"&.cm-merge-a .cm-changedText":{background:a4,outline:"solid 1px ".concat(a4),borderRadius:"2px"},".cm-collapsedLines":{color:i8.TV.accentPrimaryStrongest,background:i8.TV.accentPrimaryDimmest,transition:"background 250ms ease","&:hover":{background:i8.TV.accentPrimaryDimmer}}}),a6=[nM.tk.baseTheme({".cm-scroller":{height:"100% !important",overflowY:"auto !important"}}),nM.tk.theme({".cm-scroller":{height:"auto !important",overflowY:"visible !important"}})],a9=[nF.Wl.highest(a6),a5],a7=n(17542),le=n(84054),lt=n(7444);function ln(e){var t,n,r,i=e.a,o=e.b,a=e.style,l=e.className,c=(0,a2._)(e,["a","b","style","className"]),s=(0,M._)((0,X.useState)(null),2),u=s[0],d=s[1],f=(0,M._)((0,X.useState)(null),2),h=f[0],p=f[1],m=(0,X.useRef)(!1),v=(0,lt.Z)(c),g=(0,lt.Z)(i.doc),y=(0,lt.Z)(o.doc),b=(0,rI.Xl)((0,eM._)((0,eO._)({},i),{readOnly:!0})),Z=(0,rI.Xl)((0,eM._)((0,eO._)({},o),{readOnly:!0})),w=(t=(0,M._)((0,X.useState)(),2)[1],(0,X.useCallback)(function(e){t(function(){throw e})},[])),x=c.orientation,C=c.revertControls,_=c.renderRevertControl,S=c.collapseUnchanged,E=c.gutter,k=c.highlightChanges,T=void 0!==S,R=null==S?void 0:S.margin,D=null==S?void 0:S.minSize,I=null!==(n=null==h?void 0:h.a)&&void 0!==n?n:null,G=null!==(r=null==h?void 0:h.b)&&void 0!==r?r:null;return(0,rI.uF)(),(0,X.useEffect)(function(){var e=function(e){w(e)};if(u){var t=null;try{t=new a8.QK((0,eM._)((0,eO._)({},v.current),{parent:u,a:{doc:g.current,extensions:[nM.tk.exceptionSink.of(e),a9].concat((0,e_._)(b))},b:{doc:y.current,extensions:[nM.tk.exceptionSink.of(e),a9].concat((0,e_._)(Z))}}))}catch(t){e(t)}return t&&(p(t),m.current=!0),function(){if(t){p(null);try{t.destroy()}catch(t){e(t)}}}}},[u]),(0,X.useEffect)(function(){I&&!m.current&&I.dispatch({changes:{from:0,to:I.state.doc.length,insert:i.doc}})},[I,i.doc]),(0,X.useEffect)(function(){G&&!m.current&&G.dispatch({changes:{from:0,to:G.state.doc.length,insert:o.doc}})},[G,o.doc]),(0,X.useEffect)(function(){h&&!m.current&&lr(h,v.current.collapseUnchanged)},[h,v,i.doc,o.doc]),(0,X.useEffect)(function(){if(h&&!m.current){var e=T?{margin:R,minSize:D}:void 0;h.reconfigure({orientation:x,revertControls:C,renderRevertControl:_,collapseUnchanged:e,gutter:E,highlightChanges:k}),e&&lr(h,e)}},[h,x,C,_,T,R,D,E,k]),(0,a7.H)(I),(0,a7.H)(G),(0,X.useEffect)(function(){m.current=!1}),(0,L.BX)(L.HY,{children:[(0,L.tZ)("div",{ref:d,className:l,style:a}),(0,L.tZ)(le.N1,{view:I}),(0,L.tZ)(le.N1,{view:G})]})}function lr(e,t){e&&t&&(e.reconfigure({collapseUnchanged:void 0}),e.reconfigure({collapseUnchanged:(0,eO._)({},t)}))}var li=n(59639),lo=[{"& > span:first-child-of-type":[J.l0.flex.grow(1),J.l0.textAlign.left]},{"& > span":[J.l0.flex.shrink(1)]},J.l0.height("auto"),J.l0.p(8),J.l0.fontWeight.medium,J.l0.backgroundColor.backgroundHigher,J.l0.flex.row,J.l0.align.center,J.l0.justify.spaceBetween,J.l0.overflow("hidden"),J.l0.cursor.pointer],la=(0,ee.X)({buttonFolded:[lo,J.l0.borderRadius(8)],buttonUnfolded:[lo,J.l0.borderRadius(8,8,0,0)],rowContainer:[J.l0.align.center,J.l0.rowWithGap(8),J.l0.position.relative,J.l0.zIndex(1),J.l0.overflow("hidden")],diffContainer:[J.l0.flex.grow(1),J.l0.borderRadius(8)],bodyContainer:[J.l0.borderRadius(0,0,8,8),J.l0.p(8),J.l0.display.flex,J.l0.flex.row,J.l0.flex.wrap,J.l0.align.center,J.l0.justify.center,J.l0.backgroundColor.backgroundDefault,J.l0.border({color:J.TV.outlineDimmer,direction:"bottom"}),J.l0.border({color:J.TV.outlineDimmer,direction:"left"}),J.l0.border({color:J.TV.outlineDimmer,direction:"right"})],noChangesContainer:[J.l0.py(8),J.l0.px(8),J.l0.center,J.l0.width("100%")],innerContainer:[J.l0.display.flex,J.l0.align.center],splitContainer:[J.l0.p(8),J.l0.display.flex,J.l0.flex.row,J.l0.justify.spaceBetween,J.l0.maxWidth("100%"),J.l0.align.center],splitChild:[J.l0.align.center,J.l0.justify.center,{flexBasis:"50%"}],buttonGroupItem:[J.l0.width(64),J.l0.height(32)]}),ll=function(e){var t=e.value,n=e.onChange;return(0,L.BX)(li.hE,{name:"SplitOrUnifiedDiff",value:t,onChange:n,row:!0,children:[(0,L.tZ)(K.G,{css:la.buttonGroupItem,children:(0,L.tZ)(li.rK,{value:"Unified",text:"Unified",id:"SplitOrUnifiedDiffUnified"})}),(0,L.tZ)(K.G,{css:la.buttonGroupItem,children:(0,L.tZ)(li.rK,{value:"Split",text:"Split",id:"SplitOrUnifiedDiffSplit"})})]})},lc=function(e){var t=e.folded,n=void 0!==t&&t,r=e.setFolded,i=e.diff,o="".concat(i.initial.path,"/").concat(i.initial.filename),a="".concat(i.final.path,"/").concat(i.final.filename);return(0,L.BX)(K.G,{css:n?la.buttonFolded:la.buttonUnfolded,onClick:function(){return r(!n)},children:[(0,L.BX)(K.G,{css:[la.rowContainer,J.l0.flex.shrink(1)],children:["RENAMED"===i.status||"COPIED"===i.status?(0,L.BX)(L.HY,{children:[(0,L.tZ)(aL.Z,{path:o}),(0,L.tZ)(Q.xv,{multiline:!1,children:i.initial.filename}),""===i.initial.path?null:(0,L.tZ)(Q.xv,{multiline:!1,color:"dimmest",css:[J.l0.fontWeight.normal],maxLines:1,children:i.initial.path}),(0,L.tZ)(tz.Z,{}),(0,L.tZ)(aL.Z,{path:a}),(0,L.tZ)(Q.xv,{multiline:!1,children:i.final.filename}),""===i.final.path?null:(0,L.tZ)(Q.xv,{multiline:!1,color:"dimmest",css:[J.l0.fontWeight.normal],children:i.final.path})]}):(0,L.BX)(L.HY,{children:[(0,L.tZ)(aL.Z,{path:a}),(0,L.tZ)(Q.xv,{multiline:!1,children:i.final.filename}),""===i.final.path?null:(0,L.tZ)(Q.xv,{multiline:!1,color:"dimmest",css:[J.l0.fontWeight.normal],children:i.final.path})]}),(0,L.tZ)(a0.j,{textToCopy:a,alt:"Copy Full Path",tooltip:"Copied!",tooltipPlacement:"bottom-end",timeout:2e3,children:(0,L.tZ)(tj.Z,{})})]}),(0,L.BX)(K.G,{css:la.rowContainer,children:[(0,L.tZ)(aQ,{type:i.status}),(0,L.tZ)(eE.hU,{alt:n?"Collapse diff":"Expand diff",onClick:function(){return r(!n)},children:n?(0,L.tZ)(aq.Z,{}):(0,L.tZ)(aY.Z,{})})]})]})},ls=function(e){var t=e.diff;return"Split"===e.splitOrUnified?(0,L.tZ)(ln,{a:{filePath:t.initial.filename,doc:t.initial.content},b:{filePath:t.final.filename,doc:t.final.content},collapseUnchanged:{},style:{width:"100%"}}):(0,L.tZ)(rI.ZP,{filePath:t.final.filename,initialDoc:t.final.content,extensions:[a1.p.of(nF.xv.of(t.initial.content.split("\n")))],readOnly:!0,style:{width:"100%"}})},lu=function(e){return(0,eu.T3)(e)?"media":(0,eu.Mb)(e)?"ot":"binary"},ld=function(e){var t=e.content,n=e.type,r=e.filename;switch(n){case"media":return(0,L.tZ)(K.G,{css:[{display:"flex",height:"100%"}],children:(0,L.tZ)(aU.A,{content:t,mime:(0,eu.yC)(r)})});case"ot":return(0,L.tZ)(rI.ZP,{filePath:r,initialDoc:t,readOnly:!0,style:{width:"100%"}});default:return(0,L.tZ)(Q.xv,{color:"dimmest",multiline:!1,children:"This binary file has changed."})}},lf=function(e){var t=e.diff,n=e.splitOrUnified;if(t.loading)return(0,L.tZ)(K.G,{css:la.noChangesContainer,children:(0,L.tZ)(eR.Z,{size:20})});if(t.initial.content===t.final.content)return(0,L.tZ)(K.G,{css:la.noChangesContainer,children:(0,L.tZ)(Q.xv,{color:"dimmest",multiline:!1,children:"There are no changes to show."})});if("DELETED"===t.status)return(0,L.tZ)(K.G,{css:la.noChangesContainer,children:(0,L.tZ)(Q.xv,{color:"dimmest",multiline:!1,children:"This file has been deleted."})});var r=lu(t.initial.filename),i=lu(t.final.filename);if("ADDED"===t.status)switch(i){case"media":return(0,L.tZ)(K.G,{css:la.noChangesContainer,children:(0,L.tZ)(K.G,{css:la.innerContainer,children:(0,L.tZ)(aU.A,{content:t.final.content,mime:(0,eu.yC)(t.final.filename)})})});case"ot":return(0,L.tZ)(K.G,{css:la.noChangesContainer,children:(0,L.tZ)(rI.ZP,{filePath:t.final.filename,initialDoc:t.final.content,readOnly:!0,style:{width:"100%"}})});default:return(0,L.tZ)(K.G,{css:la.noChangesContainer,children:(0,L.tZ)(Q.xv,{color:"dimmest",multiline:!1,children:"This binary file has been added."})})}return"binary"===r&&"binary"===i?(0,L.tZ)(K.G,{css:la.noChangesContainer,children:(0,L.tZ)(Q.xv,{color:"dimmest",multiline:!1,children:"This binary file has changed."})}):"ot"===r&&"ot"===i?(0,L.tZ)(ls,{diff:t,splitOrUnified:n}):(0,L.BX)(K.G,{css:la.splitContainer,children:[(0,L.tZ)(K.G,{css:la.splitChild,children:(0,L.tZ)(ld,{content:t.initial.content,type:r,filename:t.initial.filename})}),(0,L.tZ)(K.G,{css:la.splitChild,children:(0,L.tZ)(ld,{content:t.final.content,type:i,filename:t.final.filename})})]})},lh=function(e){var t=e.diff,n=e.folded,r=e.setFolded,i=e.splitOrUnified;return(0,L.BX)(K.G,{css:la.diffContainer,children:[(0,L.tZ)(lc,{folded:n,setFolded:r,diff:t}),n?null:(0,L.tZ)(e$.Tg,{css:la.bodyContainer,elevated:!0,children:(0,L.tZ)(lf,{diff:t,splitOrUnified:i})})]},t.id)},lp=n(19858),lm=n(48900),lv=function(e){var t=e.context,n=e.gitService,r=e.result,i=e.data;lm.$e(function(e){e.setTag("service","git"),e.setTag("context",t),e.setExtra("env",n.getEnv()),i&&lm.sU("data",i),lm.Tb(r.error)})},lg=(a=(0,eX._)(function(e,t,n,r){var i,o,a;return(0,eF.Jh)(this,function(l){switch(l.label){case 0:if("git"!==r.type)return[3,2];return i=r.revision,[4,e.getFileContents({path:n,revision:i})];case 1:if((o=l.sent()).error)throw lv({context:"use-file-at-revision-fetch-content",gitService:e,result:o,data:{path:n,revision:i}}),o.error;return[2,o.content||""];case 2:return[4,t.readFile(n,{fromDisk:!0})];case 3:if((a=l.sent()).error)throw a.error;return[2,a.content.toString("utf8")]}})}),function(e,t,n,r){return a.apply(this,arguments)}),ly=function(e,t){var n,r=(0,M._)((0,X.useState)(null),2),i=r[0],o=r[1],a=(0,M._)((0,X.useState)(!0),2),l=a[0],c=a[1],s=(0,z.Z)().fs,u=(0,lp.Z)((n=(0,eX._)(function(n){var r,i;return(0,eF.Jh)(this,function(o){switch(o.label){case 0:c(!0),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,lg(n,s,e,t)];case 2:return r=o.sent(),c(!1),[2,{content:r,error:null}];case 3:return i=o.sent(),c(!1),[2,{content:null,error:i}];case 4:return[2]}})}),function(e){return n.apply(this,arguments)}),[e,t,s]);return(0,X.useEffect)(function(){u&&(u.error?o(null):o(u.content))},[u]),{fileContent:i,loading:l}},lb=n(65307),lZ=ed.Dy.Object({type:ed.Dy.Literal("git"),revision:ed.Dy.String()}),lw=ed.Dy.Object({type:ed.Dy.Literal("fs")}),lx=ed.Dy.Object({type:ed.Dy.Literal("diff"),data:ed.Dy.Object({left:ed.Dy.Object({path:ed.Dy.String(),data:ed.Dy.Union([lZ,lw])}),right:ed.Dy.Object({path:ed.Dy.String(),data:ed.Dy.Union([lZ,lw])})})}),lC=(0,ee.X)({container:[J.l0.colWithGap(16),J.l0.p(8)],header:[J.l0.mt(0),J.l0.mb(8)],emphasizedText:[J.l0.fontWeight.bold],bodyContainer:[J.l0.borderRadius(8),J.l0.p(8),J.l0.display.flex,J.l0.flex.row,J.l0.flex.wrap,J.l0.align.center,J.l0.justify.center,J.l0.backgroundColor.backgroundDefault,J.l0.border({color:J.TV.outlineDimmest,direction:"full"})],tooltipContainer:[J.l0.display.inlineBlock]}),l_=function(e){var t=e.filename,n=e.onFileClick;return(0,L.tZ)("span",{css:lC.tooltipContainer,children:(0,L.tZ)(eD.u,{tooltip:"View file",children:(0,L.tZ)("button",{css:[J.l0.reset.button,J.l0.linkStyle,J.l0.fontWeight.medium],onClick:n,children:t})})})},lS=function(e){return"git"===e.type?e.revision:"working directory"},lE=function(e){var t,n,r=e.left,i=e.right,o=e.onFileClick,a=r.path===i.path,l=(t=r.data,n=i.data,t.type===n.type&&("git"!==t.type||t.revision===n.revision));return a?l?(0,L.BX)(Q.h4,{level:1,variant:"text",css:lC.header,children:["Comparing"," ",(0,L.BX)("span",{css:lC.emphasizedText,children:[(0,L.tZ)(l_,{filename:r.path,onFileClick:o})," ",lS(r.data)]})," ","to itself"]}):(0,L.BX)(Q.h4,{level:1,variant:"text",css:lC.header,children:["Comparing"," ",(0,L.BX)("span",{css:lC.emphasizedText,children:[(0,L.tZ)(l_,{filename:r.path,onFileClick:o})," ",lS(r.data)]})," ","to ",(0,L.tZ)("span",{css:lC.emphasizedText,children:lS(i.data)})]}):l?(0,L.BX)(Q.h4,{level:1,variant:"text",css:lC.header,children:["Comparing ",(0,L.tZ)("span",{css:lC.emphasizedText,children:r.path})," to"," ",(0,L.BX)("span",{css:lC.emphasizedText,children:[(0,L.tZ)(l_,{filename:i.path,onFileClick:o})," ",lS(r.data)]})]}):(0,L.BX)(Q.h4,{level:1,variant:"text",css:lC.header,children:["Comparing"," ",(0,L.BX)("span",{css:lC.emphasizedText,children:[r.path," ",lS(r.data)]})," ","to"," ",(0,L.BX)("span",{css:lC.emphasizedText,children:[(0,L.tZ)(l_,{filename:i.path,onFileClick:o})," ",lS(i.data)]})]})},lk=(Z={},(0,O._)(Z,"Content",function(e){var t=e.pane.data,n=t.left,r=t.right,i=e.options.performPaneOperation,o=(0,M._)((0,X.useState)("Split"),2),a=o[0],l=o[1],c=ly(n.path,n.data),s=c.fileContent,u=c.loading,d=ly(r.path,r.data),f=d.fileContent,h=d.loading,p=(0,X.useMemo)(function(){return null===s&&null!==f?lb.y.ADDED:null!==s&&null===f?lb.y.DELETED:lb.y.MODIFIED},[s,f]);return(0,L.BX)(K.G,{css:lC.container,children:[(0,L.tZ)(lE,{left:n,right:r,onFileClick:function(){i({operation:"open",pane:{type:(0,tF.Dp)({path:r.path}),data:{path:r.path}}})}}),(0,L.tZ)(ll,{value:a,onChange:l}),(0,L.tZ)(e$.Tg,{css:lC.bodyContainer,children:(0,L.tZ)(lf,{diff:{id:"".concat(n.path,"-").concat(r.path),status:p,loading:u||h,initial:{filename:(0,eu.UO)(n.path),path:(0,eu.Il)(n.path),content:null!=s?s:""},final:{filename:(0,eu.UO)(r.path),path:(0,eu.Il)(r.path),content:null!=f?f:""}},splitOrUnified:a})})]})}),(0,O._)(Z,"Icon",function(){return(0,L.tZ)(aj.Z,{})}),(0,O._)(Z,"getTitle",function(){return"Diff"}),(0,O._)(Z,"decode",function(e){return ef.B4.Decode(lx,e)}),Z),lT=n(8271),lR=n(57369),lD=n(75647),lI=n(40028),lG=n(75813),lB=n(50431),lA=n(95597);function lP(e){return!!e&&("string"==typeof e?e.includes(lA.Kd):e.fetch.includes(lA.Kd))}function lN(e){return e.endsWith(".git")?e.slice(0,-4):e}function lU(e){if(!e)return null;var t="string"==typeof e?e:e.fetch;return lP(t)?lN(t):null}function lL(){var e,t=(0,lp.Z)((e=(0,eX._)(function(e){return(0,eF.Jh)(this,function(t){return[2,{connectedToGithub:lO(e),error:null}]})}),function(t){return e.apply(this,arguments)}));return null==t||t.error?null:t.connectedToGithub}function lO(e){return e.hasProfile(lG.rG.GITHUB)}var lM=n(85340),lX=n(4391),lF=n(67795);function lW(e,t){(0,rs.j)(lF.U3.GIT_FEATURE_USED,(0,eO._)({action:e,source:"git-pane"},t))}var lH=n(89106);function lV(e){var t=e.label,n=e.allowReconnect,r=e.callback,i=(0,M._)((0,X.useState)(!1),2),o=i[0],a=i[1],l=(0,z.Z)().git,c=lL(),s=(0,ak.Z)(),u=(0,lM.v)({onAuth:function(){lW("github-user-connected"),a(!1),l.refreshProfiles({preferredProvider:lG.rG.GITHUB}),null==r||r()},onClose:function(){return a(!1)}});return c&&!(void 0!==n&&n)?(0,L.tZ)(eV.zx,{text:"Connected to GitHub",colorway:"primary",iconLeft:(0,L.tZ)(nO.Z,{}),disabled:!0}):(0,L.tZ)(eV.zx,{text:o||null===c?"Connecting...":s?"Visit account page to connect to GitHub":void 0===t?"Connect to GitHub":t,colorway:"primary",iconLeft:o?(0,L.tZ)(eR.Z,{}):(0,L.tZ)(lX.Z,{}),loading:o,onClick:function(){if(s){lH.X.openExternalUrl("/account#connected-services");return}a(!0),u()}})}var lz=(0,ee.X)({body:[J.l0.p(4),J.l0.colWithGap(8),J.l0.borderRadius(0,0,8,8)],remedies:[J.l0.rowWithGap(8),J.l0.align.center,J.l0.justify.end]});function lj(e){var t=e.description,n=e.remedies,r=e.error;return(0,L.BX)(e$.Tg,{css:lz.body,elevated:!0,children:[(0,L.tZ)(Q.xv,{children:t}),(0,L.BX)(K.G,{css:lz.remedies,children:[n,(0,L.tZ)(eV.zx,{text:"Dismiss",iconLeft:(0,L.tZ)(tw.Z,{}),onClick:r.dismiss})]})]})}function lq(e){var t,n=e.error,r=(0,lp.Z)((t=(0,eX._)(function(e){var t,r,i,o,a,l,c,s,u,d;return(0,eF.Jh)(this,function(f){switch(f.label){case 0:switch(n.type){case lG.aq.UNKNOWN_NOT_GIT:return[3,1];case lG.aq.UNKNOWN:return[3,2];case lG.aq.CHANNEL_CLOSED:return[3,3];case lG.aq.NOT_INITIALIZED:return[3,4];case lG.aq.UNAUTHENTICATED:return[3,5];case lG.aq.INDEX_FILE_CORRUPT:return[3,7];case lG.aq.UNKNOWN_REMOTE:return[3,8];case lG.aq.INDEX_LOCKED:return[3,9];case lG.aq.NO_COMMITS:return[3,10];case lG.aq.PATH_MATCHED_NO_FILES:return[3,11];case lG.aq.USER_NOT_CONFIGURED:return[3,12];case lG.aq.INVALID_REFERENCE:return[3,13];case lG.aq.BRANCH_ALREADY_EXISTS:return[3,14];case lG.aq.MERGE_CONFLICT:return[3,15];case lG.aq.UPSTREAM_NOT_SET:return[3,16];case lG.aq.HEAD_DETACHED:return[3,17];case lG.aq.DIRTY_WORKTREE:return[3,18];case lG.aq.PROTECTED_BRANCH:return[3,19];case lG.aq.PUSH_REJECTED:return[3,20];case lG.aq.REMOTE_ALREADY_EXISTS:return[3,21];case lG.aq.TIMEOUT:return[3,22];case lG.aq.ALREADY_INITIALIZED:return[3,23]}return[3,24];case 1:return t="Unknown error from the Git service. This is probably a bug in the app.",r=null,[3,25];case 2:return t="There was an unrecognized fatal error with Git. This is probably a bug in the app.",r=null,[3,25];case 3:return t="The command was interrupted. Please try again.",r=null,[3,25];case 4:return t="There isn't a Git repository in the Repl's root directory.",r=null,[3,25];case 5:return[4,e.getRemotes()];case 6:if((i=f.sent()).error)return[2,i];if(0!==i.remotes.size){o=!1,a=!0,l=!1,c=void 0;try{for(s=i.remotes.values()[Symbol.iterator]();!(a=(u=s.next()).done);a=!0)if(d=u.value,lP(d)){o=!0;break}}catch(e){l=!0,c=e}finally{try{a||null==s.return||s.return()}finally{if(l)throw c}}if(o){if(lO(e))return t="Failed to authenticate with the remote. Please ensure that Replit has access to this repository on GitHub.",r=(0,L.tZ)(lV,{label:"Update GitHub Repository Access",callback:n.dismiss,allowReconnect:!0}),[3,25];return t="Failed to authenticate with the remote. You have not connected your Replit account to GitHub, so Replit may not have access to the remote repository. Please connect your account to GitHub and try again.",r=(0,L.tZ)(lV,{label:"Connect to GitHub",callback:n.dismiss,allowReconnect:!0}),[3,25]}}return t="Failed to authenticate with the remote.",r=null,[3,25];case 7:return t="The Git index file is corrupt. This can happen if the index file is manually edited, or if the Git repository is corrupted.",r=null,[3,25];case 8:return t="The remote specified isn't configured.",r=null,[3,25];case 9:return t="Git tried to perform an action but the index lockfile still exists. This means Git either crashed previously or is still running an action.",r=null,[3,25];case 10:return t="There are no commits in the repository.",r=null,[3,25];case 11:return t="The path specified didn't match any files.",r=null,[3,25];case 12:return t="There isn't any user information configured for Git.",r=null,[3,25];case 13:return t="An unknown/invalid reference was specified. This is usually a branch, but it could be something else, such as a tag.",r=null,[3,25];case 14:return t="The branch specified already exists.",r=null,[3,25];case 15:return t="There was an unexpected merge conflict.",r=null,[3,25];case 16:return t="The upstream branch isn't set.",r=null,[3,25];case 17:return t="The HEAD is detached. You have a commit checked out, not a branch.",r=null,[3,25];case 18:return t="There are uncommitted changes.",r=null,[3,25];case 19:return t="This operation cannot be performed on a protected branch.",r=null,[3,25];case 20:return t="The push was rejected by the remote. This is usually because the remote has commits that aren't in the local repository.",r=null,[3,25];case 21:return t="The remote specified already exists.",r=null,[3,25];case 22:return t="The remote operation timed out.",r=null,[3,25];case 23:return t="There is already a Git repository in the Repl's root directory.",r=null,[3,25];case 24:return t="We ran into an unknown error that we don't have a description for. This is probably a bug with the app.",r=null,[3,25];case 25:return[2,{description:t,remedies:r,error:null}]}})}),function(e){return t.apply(this,arguments)}),[n],{refresh:!1});if(!r)return(0,L.tZ)(lj,{description:null,remedies:null,error:n});if(r.error)return(0,L.tZ)(lj,{description:"Unknown error from the Git service. This is probably a bug in the app.",remedies:null,error:n});var i=r.description,o=r.remedies;return(0,L.tZ)(lj,{description:i,remedies:o,error:n})}var lY=(0,ee.X)({errorNotification:[{pointerEvents:"all"},J.l0.p(1),J.l0.backgroundColor.accentNegativeDimmer,J.l0.borderRadius(8),J.l0.shadow(3)],header:[J.l0.py(4),J.l0.px(8),J.l0.display.flex,J.l0.flex.row,J.l0.align.center,J.l0.justify.spaceBetween,J.l0.color.accentNegativeStrongest],headerText:[J.l0.rowWithGap(4),J.l0.align.center],errorType:[J.l0.font.code,{opacity:.75}],body:[J.l0.pt(4),J.l0.pb(8),J.l0.px(8),J.l0.colWithGap(8),J.l0.backgroundColor.backgroundHigher,J.l0.borderRadius(0,0,8,8)]});function l$(e){var t=e.error;return(0,L.BX)(K.G,{css:lY.errorNotification,children:[(0,L.BX)(K.G,{css:lY.header,children:[(0,L.BX)(K.G,{css:lY.headerText,children:[(0,L.tZ)(ej.Z,{}),(0,L.tZ)(Q.xv,{variant:"subheadDefault",multiline:!1,children:function(e){switch(e.type){case lG.aq.UNKNOWN_NOT_GIT:return"Unknown Error";case lG.aq.UNKNOWN:return"Unknown Git Error";case lG.aq.NOT_INITIALIZED:case lG.aq.UNAUTHENTICATED:case lG.aq.INDEX_FILE_CORRUPT:case lG.aq.UNKNOWN_REMOTE:case lG.aq.INDEX_LOCKED:case lG.aq.NO_COMMITS:case lG.aq.PATH_MATCHED_NO_FILES:case lG.aq.USER_NOT_CONFIGURED:case lG.aq.INVALID_REFERENCE:case lG.aq.BRANCH_ALREADY_EXISTS:case lG.aq.MERGE_CONFLICT:case lG.aq.HEAD_DETACHED:case lG.aq.DIRTY_WORKTREE:case lG.aq.PUSH_REJECTED:case lG.aq.PROTECTED_BRANCH:case lG.aq.REMOTE_ALREADY_EXISTS:case lG.aq.ALREADY_INITIALIZED:case lG.aq.TIMEOUT:return"Git Error";default:return"Unknown Error"}}(t)})]}),(0,L.tZ)(Q.xv,{css:lY.errorType,multiline:!1,children:t.type})]}),(0,L.tZ)(K.G,{css:lY.body,children:(0,L.tZ)(lq,{error:t})})]})}var lJ=(0,X.createContext)(null);function lK(){var e=(0,X.useContext)(lJ);if(!e)throw Error("Expected store in context");return e}var lQ=(0,eG.cn)([]),l0=(0,eG.cn)(function(e){return e(lQ)},function(e,t,n){var r=e(lQ),i=Math.random().toString(36).substring(7);t(lQ,[{id:i,type:n,dismiss:function(){var n=e(lQ).filter(function(e){return e.id!==i});t(lQ,n)}}].concat((0,e_._)(r)))});function l1(){return(0,eB.b9)(l0,{store:lK()})}var l2=(0,ee.X)({errorList:[{pointerEvents:"none"},{transition:"background-color 100ms"},J.l0.position.absolute,J.l0.top(0),J.l0.bottom(0),J.l0.left(0),J.l0.right(0),J.l0.p(8),J.l0.colWithGap(16),J.l0.zIndex(10)]});function l8(){var e=(0,eB.Dv)(l0,{store:lK()});return(0,L.tZ)(K.G,{style:{backgroundColor:e.length>0?"rgba(0, 0, 0, 0.25)":"transparent"},css:l2.errorList,children:e.map(function(e){return(0,L.tZ)(l$,{error:e},e.id)})})}var l4=n(4995),l3=n(66663),l5=n(58003);function l6(){var e,t,n,r,i,o=(0,M._)((0,X.useState)(!1),2),a=o[0],l=o[1],c=(0,z.Z)().git,s=(t=(e=(0,M._)((0,X.useState)(!1),2))[0],n=e[1],r=(0,z.Z)().git,(0,X.useEffect)(function(){return r.onBusyChange(n)},[r]),t),u=l1(),d=(0,lp.Z)((i=(0,eX._)(function(e){var t,n;return(0,eF.Jh)(this,function(r){switch(r.label){case 0:return[4,e.isInitialized()];case 1:if((t=r.sent()).error)return u(t.error),[2,t];if(!t.initialized)return[2,{hasRemotes:!1,error:null}];return[4,e.getRemotes()];case 2:if((n=r.sent()).error)return u(n.error),[2,n];return[2,{hasRemotes:n.remotes.size>0,error:null}]}})}),function(e){return i.apply(this,arguments)}),[u]);if(null==d?void 0:d.error)return null;var f=!!d&&d.hasRemotes,h=s||a||null===d;function p(){return(p=(0,eX._)(function(){var e;return(0,eF.Jh)(this,function(t){switch(t.label){case 0:if(c.isBusy()||h)return[2];if(l(!0),!f)return[3,2];return[4,c.fetch()];case 1:(e=t.sent()).error?u(e.error):lW("remote-fetched"),t.label=2;case 2:return[4,c.refreshProfiles()];case 3:return t.sent(),c.forceRefresh(),setTimeout(function(){return l(!1)},500),[2]}})})).apply(this,arguments)}return(0,L.tZ)(eE.hU,{alt:f?"Refresh and Fetch":"Refresh",size:24,onClick:function(){return p.apply(this,arguments)},disabled:h,children:h?(0,L.tZ)(eR.Z,{}):(0,L.tZ)(ip.Z,{})})}(l=w||(w={})).DASHBOARD="DASHBOARD",l.BRANCH="BRANCH",l.CURRENT_BRANCH="CURRENT_BRANCH",l.SETTINGS="SETTINGS",l.COMMIT="COMMIT";var l9=n(68514),l7=n(30815),ce=n(93496),ct=n(40227),cn=n(87959);(c=x||(x={})).SUCCESS="SUCCESS",c.WARNING="WARNING",c.FAILED="FAILED",c.OFF="OFF";var cr=(0,ee.X)({root:[J.l0.rowWithGap(8),J.l0.align.center,J.l0.py(4)],circle:[J.l0.width(8),J.l0.height(8),J.l0.borderRadius("full")]}),ci=function(e){var t,n,r,i=e.display,o=void 0===i?"inline":i,a=(0,a2._)(e,["display"]);switch(a.status){case"SUCCESS":t=J.TV.accentPositiveStronger,n=J.TV.accentPositiveStronger;break;case"WARNING":t=J.TV.yellowStronger,n=J.TV.yellowStronger;break;case"FAILED":t=J.TV.accentNegativeStronger,n=J.TV.accentNegativeStronger;break;case"OFF":t=J.TV.greyStronger,n=J.TV.greyStronger}var l=(0,L.BX)(K.G,{onClick:null!==(r=a.onClick)&&void 0!==r?r:function(){},css:[cr.root,a.onClick?{cursor:"pointer"}:{}],children:[(0,L.tZ)("div",{css:cr.circle,style:{backgroundColor:t,boxShadow:"0px 0px 6px ".concat(n)}}),"inline"===o?(0,L.tZ)(Q.xv,{color:"dimmer",multiline:!1,children:a.content}):null]});return"tooltip"===o&&(l=(0,L.tZ)(eD.u,{tooltip:a.content,children:l})),l},co=(0,ee.X)({revertText:[J.l0.color.orangeStronger,J.l0.fontWeight.medium],mergeText:[J.l0.color.purpleStronger,J.l0.fontWeight.medium],pullRequestId:[J.l0.fontWeight.medium],hash:[J.l0.fontWeight.medium],filePathPrefix:[J.l0.color.foregroundDimmest],commitBody:[J.l0.font.code,{whiteSpace:"pre-wrap"},{fontSize:J.TV.fontSizeSmall}],clickableName:[J.l0.cursor.pointer,{"&:hover":{textDecoration:"underline"}}],tooltip:[J.l0.display.inlineFlex,J.l0.rowWithGap(4),J.l0.align.center],path:[{fontSize:J.TV.fontSizeSmall},J.l0.font.code],fixTooltipDisplay:{"& > span":{display:"inline-block"}},headingWrapper:[J.l0.display.inlineFlex,J.l0.rowWithGap(4),J.l0.align.center,J.l0.flex.shrink(1),J.l0.overflow("hidden")],headingRemote:[{verticalAlign:"text-bottom"},J.l0.mr(4),J.l0.color.foregroundDimmest],headingCurrent:[J.l0.px(4)],text:[J.l0.fontWeight.medium],remote:[{verticalAlign:"center"},{fontSize:J.TV.fontSizeSmall},J.l0.mr(4),J.l0.color.foregroundDimmest],current:[J.l0.position.relative,J.l0.top("-1px"),J.l0.display.inlineFlex,J.l0.pl(2),J.l0.pr(8)],icon:[{verticalAlign:"baseline !important"},J.l0.mr(4)],bodyContainer:[J.l0.border({color:J.TV.outlineDimmest,direction:"full"}),J.l0.borderRadius(8),J.l0.p(16)]});function ca(e){var t=e.text,n=e.className;return(0,L.tZ)("span",{className:n,css:co.revertText,children:t})}function cl(e){var t=e.text,n=e.className;return(0,L.tZ)("span",{className:n,css:co.mergeText,children:t})}function cc(e){var t,n=e.id,r=e.hash,i=e.className;return t=void 0===r||r?"string"==typeof n&&n.startsWith("#")?n:"#".concat(n):"string"==typeof n&&n.startsWith("#")?n.slice(1):"".concat(n),(0,L.tZ)("span",{className:i,css:co.pullRequestId,children:t})}function cs(e){var t=e.hash,n=e.length,r=e.className;return(0,L.tZ)("span",{className:r,css:co.hash,children:t.slice(0,(void 0===n?8:n)+1)})}function cu(e){var t=e.subject,n=e.quoted,r=e.className;return(0,L.tZ)("span",{className:r,children:void 0!==n&&n?'"'.concat(t,'"'):t})}function cd(e){var t=e.body,n=e.view,r=e.className;return"Source"===(void 0===n?"Source":n)?(0,L.tZ)(K.G,{css:co.bodyContainer,children:(0,L.tZ)("pre",{className:r,css:co.commitBody,children:t})}):(0,L.tZ)(K.G,{css:co.bodyContainer,children:(0,L.tZ)(iL.ZP,{className:r,background:!1,mentionsLink:!0,lineBreaks:!0,themed:!0,useRemarkGfm:!0,children:t})})}function cf(e){var t=e.name,n=e.remote,r=e.current,i=void 0!==r&&r,o=e.heading,a=void 0!==o&&o,l=e.icon,c=void 0!==l&&l,s=e.onClick,u=e.className,d=null;return(!0===c||!c&&i?d=i?(0,L.tZ)("span",{css:a?co.headingCurrent:co.current,children:(0,L.tZ)(ci,{display:"tooltip",content:"This is your current branch.",status:x.SUCCESS})}):a?(0,L.tZ)(cn.Z,{size:16}):(0,L.tZ)(cn.Z,{css:co.icon,size:12}):c&&(d=c),a)?(0,L.BX)("div",{css:co.headingWrapper,children:[d,(0,L.BX)(Q.xv,{variant:"subheadDefault",multiline:!1,children:[n?(0,L.BX)(L.HY,{children:[(0,L.tZ)("span",{css:co.headingRemote,children:n}),(0,L.tZ)("span",{css:co.headingRemote,children:"/"})]}):null,s?(0,L.tZ)(cm,{label:"View branch",onClick:s,children:t}):(0,L.tZ)("span",{children:t})]})]}):(0,L.BX)("span",{className:u,css:co.text,children:[d,n?(0,L.tZ)("span",{css:co.remote,children:n}):null,s?(0,L.tZ)(cm,{label:"View branch",onClick:s,children:t}):(0,L.tZ)("span",{children:t})]})}function ch(e){var t=e.path,n=e.prefix,r=e.onClick,i=e.className,o=(0,eu.UO)(t),a=!r&&(o===t||null!==n&&n+o===t);return(0,L.tZ)("span",{css:co.fixTooltipDisplay,children:(0,L.tZ)(eD.u,{maxWidth:"auto",tooltip:(0,L.tZ)(cp,{path:t,openable:!!r}),isDisabled:a,children:r?(0,L.BX)(cm,{label:"Open ".concat(o),onClick:r,className:i,children:[n?(0,L.tZ)("span",{css:co.filePathPrefix,children:n}):null,(0,L.tZ)("span",{children:o})]}):(0,L.BX)("span",{className:i,children:[n?(0,L.tZ)("span",{css:co.filePathPrefix,children:n}):null,(0,L.tZ)("span",{children:o})]})})})}function cp(e){var t=e.path,n=e.openable;return(0,L.BX)("span",{css:co.tooltip,children:[void 0===n||n?(0,L.tZ)("span",{children:"Open"}):null,(0,L.tZ)("span",{css:co.path,children:t})]})}function cm(e){var t=e.label,n=e.onClick,r=e.className,i=e.children;return(0,L.tZ)("span",{className:r,css:co.clickableName,role:"button",tabIndex:-1,"aria-label":t,onClick:n,onKeyDown:function(e){("Enter"===e.key||" "===e.key)&&(null==n||n())},children:i})}var cv=n(21076),cg=n(79378),cy=n(79032),cb=n(63043),cZ=n(13051),cw=n(66496);function cx(){var e=(0,nd._)(["\n  query GitUserImageByUsername($username: String!) {\n    userByUsername(username: $username) {\n      id\n      image\n    }\n  }\n"]);return cx=function(){return e},e}var cC={},c_=(0,nf.Ps)(cx()),cS=n(16405),cE=(0,ee.X)({gitUserContainer:[J.l0.flex.row],gitUserText:[J.l0.fontWeight.medium],gitUserInnerContainer:[J.l0.align.center,J.l0.flex.row,{"& > :not(:first-child)":{marginLeft:J.TV.space4}}],gitUserInnerContainerFlipped:[J.l0.align.center,J.l0.flex.rowReverse,{"& > :not(:last-child)":{marginLeft:J.TV.space4}}],alignCenter:[J.l0.align.center]});function ck(e){var t=e.name,n=e.email,r=e.allowPlaceholderAvatar,i=void 0!==r&&r,o=e.color,a=void 0===o?"default":o,l=e.small,c=void 0!==l&&l,s=e.flip,u=void 0!==s&&s,d=e.placement,f=e.showTooltip;return void 0===f||f?(0,L.tZ)(K.G,{css:cE.gitUserContainer,children:(0,L.tZ)(eD.u,{placement:void 0===d?"bottom":d,tooltip:(0,L.tZ)(Q.xv,{children:n}),children:(0,L.BX)(K.G,{css:u?cE.gitUserInnerContainerFlipped:cE.gitUserInnerContainer,children:[(0,L.tZ)(cT,{email:n,name:t,enablePlaceholder:i,small:c}),(0,L.tZ)(Q.xv,{multiline:!1,css:cE.gitUserText,color:a,variant:c?"small":"text",children:t})]})})}):(0,L.tZ)(K.G,{css:cE.gitUserContainer,children:(0,L.BX)(K.G,{css:u?cE.gitUserInnerContainerFlipped:cE.gitUserInnerContainer,children:[(0,L.tZ)(cT,{email:n,name:t,enablePlaceholder:i,small:c}),(0,L.tZ)(Q.xv,{multiline:!1,css:cE.gitUserText,color:a,variant:c?"small":"text",children:t})]})})}function cT(e){var t,n=e.name,r=e.email,i=e.enablePlaceholder,o=void 0!==i&&i,a=e.small,l=void 0!==a&&a,c=(0,M._)((t=(0,eO._)({},cC,{initialFetchPolicy:"cache-and-network",nextFetchPolicy:"cache-first",ssr:!1}),cw.t(c_,t)),1)[0],s=(0,M._)((0,X.useState)(null),2),u=s[0],d=s[1];return(0,X.useEffect)(function(){var e;(e=(0,eX._)(function(){var e,t,n,i,o,a,l,s,u,f;return(0,eF.Jh)(this,function(h){switch(h.label){case 0:if(!r.endsWith("@".concat(cb.O)))return[3,1];return e=r.split("@")[0],(t=(0,M._)(e.split("+"),2))[0],n=t[1],d((0,cS.vt)("https://github.com/".concat(n,".png"))),[3,4];case 1:if(!r.endsWith("@".concat(cb.J)))return[3,3];return a=r.split("@")[0],(l=(0,M._)(a.split("-"),2))[0],[4,c({variables:{username:l[1]}})];case 2:return(s=null===(o=h.sent().data)||void 0===o?void 0:null===(i=o.userByUsername)||void 0===i?void 0:i.image)&&d(s),[3,4];case 3:u=(0,cy.FB)(r),(f=new URL("https://gravatar.com/avatar/".concat(u))).searchParams.append("d","404"),d(f.toString()),h.label=4;case 4:return[2]}})}),function(){return e.apply(this,arguments)})()},[r,c]),(0,X.useMemo)(function(){var e=l?12:16;return null===u?o?(0,L.tZ)(cZ.Z,{css:cE.alignCenter,size:e}):null:(0,L.tZ)(cg.q,{css:cE.alignCenter,username:n,src:u,onError:function(){return d(null)},size:e})},[u,o,l,n])}var cR=n(57624),cD=n(47357),cI=K.K.button,cG=(0,ee.X)({container:[J.l0.display.flex,J.l0.flex.growAndShrink(1),J.l0.overflow("hidden")],cursorOverlay:{cursor:"pointer"},fullWidth:[J.l0.width("100%")],searchContainer:[J.l0.p(8)],paddedX:[J.l0.px(8)],loadingContainer:[J.l0.display.flex,J.l0.align.center,J.l0.justify.center,J.l0.py(48)],menu:[J.l0.maxWidth(390),J.l0.width(280),J.l0.display.flex,J.l0.maxHeight(300),J.l0.borderRadius(8),J.l0.overflow("hidden")],form:[J.l0.display.flex,J.l0.flex.growAndShrink(1),J.l0.flex.column,J.l0.overflow("hidden")],body:[J.l0.py(8),J.l0.colWithGap(8),J.l0.flex.growAndShrink(1),J.l0.overflow("auto")],branchMetadata:[J.l0.rowWithGap(8),J.l0.align.center,J.l0.flex.shrink(1)],section:[J.l0.rowWithGap(8),J.l0.align.center,J.l0.justify.spaceBetween],selector:[J.l0.display.flex,J.l0.align.center,J.l0.rowWithGap(4)],header:[J.l0.colWithGap(2),J.l0.width("100%")],menuItem:[{backgroundColor:"inherit"},ce.gU.listItem,J.l0.px(8),J.l0.py(6),J.l0.borderRadius(0),J.l0.colWithGap(8),J.l0.align.start],inputDisabled:[{opacity:.75}],padded:[J.l0.p(8)],virtualItem:[J.l0.position.absolute,J.l0.top(0),J.l0.left(0),J.l0.width("100%"),J.l0.overflow("hidden")],virtualList:[J.l0.position.relative],divider:[J.l0.mt(8),J.l0.mb(8),J.l0.ml(0),J.l0.mr(0)],errorText:[J.l0.color.accentNegativeStronger,J.l0.mt(4)],createBranchButton:[J.l0.height(32),J.l0.overflow("hidden"),{whiteSpace:"nowrap",textOverflow:"ellipsis"}]}),cB=function(e,t){var n,r,i,o=l1(),a=(0,z.Z)().git,l=(0,M._)((0,X.useState)(!0),2),c=l[0],s=l[1],u=(0,lp.Z)((n=(0,eX._)(function(e){var t,n,r,i,a,l,c,u,d,f,h,p,m,v,g,y,b,Z,w,x,C;return(0,eF.Jh)(this,function(_){switch(_.label){case 0:return s(!0),[4,e.isInitialized()];case 1:if((t=_.sent()).error)return o(t.error),s(!1),[2,t];if(!t.initialized)return s(!1),[2,{active:[],stale:[],important:[],error:null}];return[4,e.listBranches()];case 2:if((n=_.sent()).error)return o(n.error),s(!1),[2,n];return[4,e.findDefaultBranches()];case 3:if((r=_.sent()).error)return o(r.error),s(!1),[2,r];i=n.branches,a=new Set,l=!0,c=!1,u=void 0;try{for(d=function(){var e=h.value,t=i.find(function(t){return(0,cv.Pi)(t,e)});t&&a.add(t)},f=r.refs[Symbol.iterator]();!(l=(h=f.next()).done);l=!0)d()}catch(e){c=!0,u=e}finally{try{l||null==f.return||f.return()}finally{if(c)throw u}}p=Date.now()-72e6,m=[],v=[],g=!0,y=!1,b=void 0;try{for(Z=i[Symbol.iterator]();!(g=(w=Z.next()).done);g=!0)x=w.value,a.has(x)||(x.commit.author.date>p?m.push(x):v.push(x))}catch(e){y=!0,b=e}finally{try{g||null==Z.return||Z.return()}finally{if(y)throw b}}return C=Array.from(a),s(!1),[2,{active:m,stale:v,important:C,error:null}]}})}),function(e){return n.apply(this,arguments)}),[o]),d=(r=(0,eX._)(function(t){var n;return(0,eF.Jh)(this,function(r){switch(r.label){case 0:if(c||(0,cv.Pi)(e,t))return[2];return s(!0),[4,a.switchBranch(t)];case 1:return(n=r.sent()).error?(o(n.error),s(!1)):(a.forceRefresh(),lW("branch-switched")),[2]}})}),function(e){return r.apply(this,arguments)}),f=(i=(0,eX._)(function(e){var t;return(0,eF.Jh)(this,function(n){switch(n.label){case 0:if(c||""===e)return[2];return s(!0),[4,a.createBranch({name:e,checkout:!0})];case 1:return(t=n.sent()).error?(o(t.error),s(!1)):(a.forceRefresh(),lW("branch-created")),[2]}})}),function(e){return i.apply(this,arguments)});if((0,X.useEffect)(function(){null!==e&&(s(!1),t({mode:w.CURRENT_BRANCH}))},[e,t]),null===u||c)return{loading:c,active:[],stale:[],important:[],handleSwitchBranch:d,handleCreateBranch:f,error:null};if(u.error)return{loading:c,active:[],stale:[],important:[],handleSwitchBranch:d,handleCreateBranch:f,error:u.error};var h=u.active,p=u.stale,m=u.important;return{loading:c,active:null!=h?h:[],stale:null!=p?p:[],important:null!=m?m:[],handleSwitchBranch:d,handleCreateBranch:f,error:null}},cA=function(e){var t=e.branch,n=cB(t,e.switchMode),r=n.loading,i=n.active,o=n.important,a=n.stale,l=n.handleSwitchBranch,c=n.handleCreateBranch,s=(0,M._)((0,X.useState)(!1),2),u=s[0],d=s[1],f=(0,M._)((0,X.useState)(""),2),h=f[0],p=f[1],m=(0,M._)((0,X.useState)(!1),2),v=m[0],g=m[1];return(0,L.tZ)(cW,{isOpen:u,setIsOpen:d,important:o,active:i,stale:a,current:t,query:h,setQuery:p,onSwitchBranch:l,createBranchLoading:v,createBranch:(0,eX._)(function(){return(0,eF.Jh)(this,function(e){switch(e.label){case 0:return g(!0),[4,c(h)];case 1:return e.sent(),p(""),g(!1),[2]}})}),loading:r})},cP=function(e){var t=e.onClick,n=e.children,r=(0,X.useRef)(null),i=(0,M._)((0,l7.XZ)(r,!1),4),o=i[0],a=i[1],l=i[2],c=i[3];return(0,l7.Ym)(a,r),(0,L.tZ)(cI,{ref:r,role:"menuitem",css:cG.menuItem,onClick:function(e){c(),t(e)},onKeyDown:l,tabIndex:o,children:n})},cN=function(e){var t=e.branch;return(0,L.BX)(K.G,{css:cG.branchMetadata,children:[(0,L.tZ)(ck,{name:t.commit.author.name,email:t.commit.author.email,color:"dimmest",allowPlaceholderAvatar:!0,placement:"top",showTooltip:!1}),(0,L.tZ)(Q.xv,{color:"dimmer",variant:"small",children:(0,cR.lb)(t.commit.author.date)})]})},cU=function(e){var t=e.branch,n=e.current,r=e.onSwitchBranch,i=(0,X.useMemo)(function(){return(0,lD.p3)(t,n)},[t,n]);return(0,L.BX)(cP,{onClick:function(){return r(t)},children:[(0,L.tZ)(Q.xv,{multiline:!1,variant:"small",children:(0,L.tZ)(cf,{name:t.name,remote:t.type===lD.HO.REMOTE?t.remote:null,current:i,icon:!0})}),(0,L.tZ)(cN,{branch:t})]})},cL=function(e,t){return t.filter(function(t){return(0,cv.Qj)(t).toLowerCase().includes(e.toLowerCase())})},cO=function(e,t,n){var r=0,i=[];if(e.length+t.length+n.length===0)return i;if(e.length>0){i.push({key:"heading-important-".concat(r++),type:"heading",title:"Important"});for(var o=0;o<e.length;++o)i.push({key:"branch-important-".concat(r++),type:"branch",branch:e[o]});t.length+n.length>0&&i.push({key:"divider-important-".concat(r++),type:"divider"})}if(t.length>0){i.push({key:"heading-active-".concat(r++),type:"heading",title:"Active"});for(var a=0;a<t.length;++a)i.push({key:"branch-active-".concat(r++),type:"branch",branch:t[a]});n.length>0&&i.push({key:"divider-active-".concat(r++),type:"divider"})}if(n.length>0){i.push({key:"heading-stale-".concat(r++),type:"heading",title:"Stale"});for(var l=0;l<n.length;++l)i.push({key:"branch-stale-".concat(r++),type:"branch",branch:n[l]})}return i},cM=function(e){var t=e.item,n=e.current,r=e.onSwitchBranch;return"heading"===t.type?(0,L.tZ)(K.G,{css:cG.paddedX,children:(0,L.tZ)(Q.xv,{multiline:!1,children:t.title})}):"divider"===t.type?(0,L.tZ)(K.G,{css:cG.divider,children:(0,L.tZ)(l9.R,{})}):(0,L.tZ)(K.G,{children:(0,L.tZ)(cU,{branch:t.branch,current:n,onSwitchBranch:r})})},cX=function(e){var t=e.items,n=e.current,r=e.onSwitchBranch,i=(0,X.useRef)(null),o=(0,cD.MG)({overscan:10,count:t.length,getScrollElement:function(){return i.current},estimateSize:function(e){var n,r;return null!==(n=void 0===(r=t[e])?0:"heading"===r.type?30:"branch"===r.type?65:"divider"===r.type?20:void 0)&&void 0!==n?n:0}});return(0,L.tZ)(l7.uP,{options:{direction:"vertical"},children:(0,L.tZ)("div",{css:cG.body,ref:i,children:(0,L.tZ)("ul",{css:cG.virtualList,style:{height:"".concat(o.getTotalSize(),"px")},children:o.getVirtualItems().map(function(e){return(0,L.tZ)("div",{css:cG.virtualItem,style:{transform:"translateY(".concat(e.start,"px)")},"data-index":e.index,ref:o.measureElement,children:(0,L.tZ)(cM,{item:t[e.index],current:n,onSwitchBranch:r})},e.key)})})})})},cF=function(e){var t=e.query,n=e.setQuery,r=e.filteredImportant,i=e.filteredActive,o=e.filteredStale,a=e.current,l=e.onSwitchBranch,c=e.createBranchLoading,s=e.createBranch,u=e.loading,d=(0,X.useMemo)(function(){return cO(r,i,o)},[r,i,o]),f='Create Branch "'.concat(t,'"'),h=(0,X.useMemo)(function(){return(0,e_._)(r).concat((0,e_._)(i),(0,e_._)(o)).some(function(e){return e.name===t})},[t,r,i,o]);return(0,L.tZ)(K.G,{css:cG.menu,children:(0,L.tZ)("form",{onSubmit:function(e){e.preventDefault(),s()},css:cG.form,children:u?(0,L.tZ)(K.G,{css:cG.loadingContainer,children:(0,L.tZ)(eR.Z,{})}):(0,L.BX)(L.HY,{children:[(0,L.tZ)(K.G,{css:cG.searchContainer,children:(0,L.tZ)(tf.E,{value:t,onChange:function(e){n(e.target.value)},onClear:function(){n("")},loading:!1,placeholder:"Find or create a branch..."})}),(0,L.tZ)(K.G,{css:cG.paddedX,children:(0,L.tZ)(l9.R,{})}),d.length>0?(0,L.tZ)(cX,{items:d,current:a,onSwitchBranch:l}):null,h||""===t?null:(0,L.BX)(K.G,{css:cG.padded,children:[(0,L.tZ)(eV.zx,{text:f,size:"small",iconLeft:c?(0,L.tZ)(eR.Z,{}):(0,L.tZ)(i9.Z,{}),stretch:!0,css:cG.createBranchButton,disabled:c||!(0,cv.Dc)(t),type:"submit"}),(0,cv.Dc)(t)?null:(0,L.tZ)(Q.xv,{variant:"small",css:cG.errorText,multiline:!1,children:"Invalid branch name"})]})]})})})},cW=function(e){var t=e.isOpen,n=e.setIsOpen,r=e.important,i=e.active,o=e.stale,a=e.current,l=e.query,c=e.setQuery,s=e.onSwitchBranch,u=e.createBranchLoading,d=e.createBranch,f=e.loading,h=(0,X.useMemo)(function(){return cL(l,r)},[l,r]),p=(0,X.useMemo)(function(){return cL(l,i)},[l,i]),m=(0,X.useMemo)(function(){return cL(l,o)},[l,o]);return(0,L.BX)(ct.xo,{label:"View Branches",placement:"bottom",isOpen:t,onOpenChange:function(e){n(e)},offset:16,children:[function(e){var n=e.onClick,r=(0,a2._)(e,["onClick"]);return(0,L.tZ)(eV.zx,{variant:"nofill",text:(0,L.BX)(Q.xv,(0,eM._)((0,eO._)({multiline:!1,variant:"small",css:cG.selector},r),{children:[(0,L.tZ)(cf,{name:a.name,remote:a.type===lD.HO.REMOTE?a.remote:null,current:!0,icon:!0}),t?(0,L.tZ)(aY.Z,{}):(0,L.tZ)(aq.Z,{})]})),size:"small",stretch:!0,alignment:"start",css:cG.fullWidth,onClick:n})},(0,L.tZ)(cF,{query:l,setQuery:c,filteredImportant:h,filteredActive:p,filteredStale:m,current:a,onSwitchBranch:s,createBranchLoading:u,createBranch:d,loading:f})]})},cH=(0,ee.X)({container:[J.l0.height(36),J.l0.px(8),J.l0.py(4),J.l0.rowWithGap(8),J.l0.backgroundColor.backgroundDefault,J.l0.align.center,J.l0.justify.spaceBetween,J.l0.zIndex(1),{borderBottom:"1px solid ".concat(J.TV.outlineDimmer)}],left:[J.l0.rowWithGap(4),J.l0.align.center,J.l0.flex.growAndShrink(1)],right:[J.l0.rowWithGap(8),J.l0.align.center],back:{marginLeft:-4}}),cV=function(e){var t=e.openSettings;return(0,L.BX)(K.G,{css:cH.container,children:[(0,L.BX)(K.G,{css:cH.left,children:[(0,L.tZ)(l3.Z,{size:16}),(0,L.tZ)(Q.xv,{variant:"subheadDefault",multiline:!1,children:"Repository"})]}),(0,L.BX)(K.G,{css:cH.right,children:[(0,L.tZ)(cK,{openSettings:t}),(0,L.tZ)(l6,{})]})]})},cz=function(e){var t=e.branch,n=e.switchMode,r=e.openSettings;return(0,L.BX)(K.G,{css:cH.container,children:[(0,L.tZ)(K.G,{css:cH.left,children:(0,L.tZ)(cA,{branch:t,switchMode:n})}),(0,L.BX)(K.G,{css:cH.right,children:[(0,L.tZ)(cK,{openSettings:r}),(0,L.tZ)(l6,{})]})]})},cj=function(e){var t=e.onBack;return(0,L.BX)(K.G,{css:cH.container,children:[(0,L.BX)(K.G,{css:cH.left,children:[(0,L.tZ)(c$,{onBack:t,alt:"Back"}),(0,L.tZ)(Q.xv,{variant:"subheadDefault",multiline:!1,children:"Settings"})]}),(0,L.tZ)(K.G,{css:cH.right})]})},cq=function(e){var t=e.switchMode,n=e.openSettings;return(0,L.BX)(K.G,{css:cH.container,children:[(0,L.BX)(K.G,{css:cH.left,children:[(0,L.tZ)(cJ,{switchMode:t}),(0,L.tZ)(Q.xv,{variant:"subheadDefault",multiline:!1,children:"Commit"})]}),(0,L.BX)(K.G,{css:cH.right,children:[(0,L.tZ)(cK,{openSettings:n}),(0,L.tZ)(l6,{})]})]})};function cY(e){var t=e.mode,n=e.branch,r=e.switchMode,i=e.onBack,o=function(){return r({mode:w.SETTINGS})};switch(t){case w.DASHBOARD:return(0,L.tZ)(cV,{openSettings:o});case w.BRANCH:case w.CURRENT_BRANCH:if(null===n)throw Error("Tried to show branch in header, but branch is null");return(0,L.tZ)(cz,{branch:n,switchMode:r,openSettings:o});case w.SETTINGS:return(0,L.tZ)(cj,{onBack:i});case w.COMMIT:return(0,L.tZ)(cq,{switchMode:r,openSettings:o});default:return(0,L.BX)(K.G,{css:cH.container,children:[(0,L.tZ)(K.G,{css:cH.left}),(0,L.tZ)(K.G,{css:cH.right})]})}}function c$(e){var t=e.onBack,n=e.alt;return(0,L.tZ)(eE.hU,{css:cH.back,alt:n,size:28,onClick:t,children:(0,L.tZ)(l4.Z,{})})}function cJ(e){var t=e.switchMode;return(0,L.tZ)(c$,{css:cH.back,onBack:function(){return t({mode:w.CURRENT_BRANCH})},alt:"Back to current branch"})}function cK(e){var t=e.openSettings;return(0,L.tZ)(eE.hU,{alt:"Settings",size:24,onClick:t,children:(0,L.tZ)(l5.Z,{})})}function cQ(){return(0,L.BX)(K.G,{children:[(0,L.tZ)(Q.xv,{multiline:!1,children:"Unsupported state: you are applying a mailbox patch."}),(0,L.tZ)(Q.xv,{multiline:!1,children:"Please finish the patch manually."})]})}function c0(){return(0,L.BX)(K.G,{children:[(0,L.tZ)(Q.xv,{multiline:!1,children:"Unsupported state: you are in the middle of a bisect."}),(0,L.tZ)(Q.xv,{multiline:!1,children:"Please finish the bisect manually."})]})}var c1=/\s\(#(\d+)\)$/,c2=/^Revert "(.+)"/,c8=/^This reverts commit ([a-f0-9]+)(?:, reversing changes made to ([a-f0-9]+))?\./;function c4(e){var t=c2.exec(e.subject),n=c8.exec(e.body);if(t&&n){var r,i=n[1],o=t[1],a=c1.exec(o);return a&&(r=parseInt(a[1],10)),{hash:i,subject:o,pr:r}}return null}var c3=/\B#\d+\b/g,c5=/^Merged? pull request (#\d+\b)/,c6=/^Merge branch '(.+)'/,c9=/into (.+)$/;function c7(e){if("GitHub"===e.committer.name&&"noreply@github.com"===e.committer.email){var t=e.subject.match(c3);if(t){var n,r=parseInt(t[t.length-1].slice(1),10);if(r)return c1.test(e.subject)&&(n=e.subject.replace(c1,"").trim()),!n&&c5.test(e.subject)&&e.body&&-1===e.body.indexOf("\n")&&(n=e.body),{type:"pull-request",id:r,subject:n,reverts:c4(e)}}}if(c5.test(e.subject)){var i,o=c5.exec(e.subject);if(o)return e.body&&-1===e.body.indexOf("\n")&&(i=e.body),{type:"pull-request",id:parseInt(o[1].slice(1),10),subject:i,reverts:c4(e)}}if(c6.test(e.subject)){var a=c6.exec(e.subject);if(a){var l=c9.exec(e.subject);return{type:"branch",source:a[1],target:l?l[1]:null}}}return e.parents&&e.parents.length>2?{type:"octopus",parents:e.parents}:e.parents&&e.parents.length>1?{type:"simple",a:e.parents[0],b:e.parents[1]}:null}var se=n(77615),st=n(64992),sn={position:"absolute",top:0,height:9,width:9,border:"1px solid ".concat(J.TV.purpleStrongest),borderRadius:"50%"},sr=(0,ee.X)({markerContainer:[J.l0.display.flex,J.l0.align.center,J.l0.justify.center,J.l0.minHeight(20),J.l0.minWidth(20)],commitMarker:[J.l0.height(4),J.l0.width(4),J.l0.backgroundColor.foregroundDefault,J.l0.borderRadius("full")],collapsedMarkerIconDot:[J.l0.height(3),J.l0.width(3),J.l0.backgroundColor.foregroundDimmer,J.l0.borderRadius("full")],collapsedMarkerIconContainer:[J.l0.display.flex,J.l0.align.center,J.l0.justify.center,{"div + div":{marginLeft:1}}],collapsedMarker:[J.l0.display.flex,J.l0.align.center,J.l0.justify.center,J.l0.height(20),J.l0.width(20),J.l0.backgroundColor.backgroundHighest,J.l0.borderRadius("full")],revertMarker:[J.l0.display.flex,J.l0.height(20),J.l0.width(20),J.l0.backgroundColor.orangeDimmest,J.l0.borderRadius("full"),J.l0.align.center,J.l0.justify.center],mergeMarker:[J.l0.display.flex,J.l0.height(20),J.l0.width(20),J.l0.backgroundColor.purpleDimmest,J.l0.borderRadius("full"),J.l0.align.center,J.l0.justify.center],mergeMarkerIconContainer:[J.l0.position.relative,J.l0.height(9),J.l0.width(13)],mergeMarkerIconLeft:[(0,eO._)({},sn),J.l0.left(0)],mergeMarkerIconRight:[(0,eO._)({},sn),J.l0.right(0)],boundaryMarker:[J.l0.height(6),J.l0.width(6),J.l0.backgroundColor.backgroundDefault,J.l0.borderRadius("full"),{border:"1px solid ".concat(J.TV.backgroundHighest)}]});function si(e){var t=function(e){switch(e){case"none":default:return null;case"commit":return(0,L.tZ)(so,{});case"revert":return(0,L.tZ)(sa,{});case"merge":return(0,L.tZ)(sl,{});case"boundary":return(0,L.tZ)(sc,{});case"collapsed":return(0,L.tZ)(ss,{})}}(e.type);return t?(0,L.tZ)("div",{css:sr.markerContainer,children:t}):null}function so(){return(0,L.tZ)("div",{css:sr.commitMarker})}function sa(){return(0,L.tZ)("div",{css:sr.revertMarker,children:(0,L.tZ)(st.Z,{size:12,color:J.TV.orangeStrongest})})}function sl(){return(0,L.tZ)("div",{css:sr.mergeMarker,children:(0,L.BX)("div",{css:sr.mergeMarkerIconContainer,children:[(0,L.tZ)("div",{css:sr.mergeMarkerIconLeft}),(0,L.tZ)("div",{css:sr.mergeMarkerIconRight})]})})}function sc(){return(0,L.tZ)("div",{css:sr.boundaryMarker})}function ss(){return(0,L.tZ)("div",{css:sr.collapsedMarker,children:(0,L.BX)("div",{css:sr.collapsedMarkerIconContainer,children:[(0,L.tZ)("div",{css:sr.collapsedMarkerIconDot}),(0,L.tZ)("div",{css:sr.collapsedMarkerIconDot}),(0,L.tZ)("div",{css:sr.collapsedMarkerIconDot})]})})}var su=[J.l0.position.absolute,J.l0.left(0),J.l0.width(18)],sd=(0,ee.X)({connectorSegmentBorderSolid:[su,{borderRight:"1px solid ".concat(J.TV.outlineDimmest)}],connectorSegmentBorderDashed:[su,{borderRight:"1px dashed ".concat(J.TV.outlineDimmest)}]});function sf(e){var t=e.boundaryTop,n=void 0!==t&&t,r=e.boundaryBottom,i=void 0!==r&&r,o=e.joint,a=void 0===o?"top":o,l=e.hideTop,c=void 0!==l&&l,s=e.hideBottom,u=void 0!==s&&s;if(c&&u)return null;if(n===i&&!c&&!u)return(0,L.tZ)(sp,{top:0,bottom:0,dashed:n&&i});var d=c?null:(0,L.tZ)(sh,{start:"top",joint:a,dashed:n}),f=u?null:(0,L.tZ)(sh,{start:"bottom",joint:a,dashed:i});return(0,L.BX)(L.HY,{children:[d,f]})}function sh(e){var t,n,r=e.start,i=e.joint,o=e.dashed,a="center"===i?(t={},(0,O._)(t,r,0),(0,O._)(t,"height","50%"),t):(n={},(0,O._)(n,r,0),(0,O._)(n,r===i?"height":i,8),n);return(0,L.tZ)(sp,(0,eM._)((0,eO._)({},a),{dashed:void 0!==o&&o}))}function sp(e){var t=e.top,n=e.bottom,r=e.height,i=e.dashed;return(0,L.tZ)("div",{css:void 0!==i&&i?sd.connectorSegmentBorderDashed:sd.connectorSegmentBorderSolid,style:{top:t,bottom:n,height:r}})}var sm=(0,ee.X)({container:{position:"relative",marginLeft:30,marginRight:4,paddingLeft:6,userSelect:"none"},containerInteractive:[ce.gU.nofill,{position:"relative",marginLeft:30,marginRight:4,paddingLeft:6,userSelect:"none"}],nodeFoldedIconContainer:{position:"absolute",top:"50%",transform:"translateY(-50%)",right:8,zIndex:1,opacity:0,"div:hover > &":{transition:"opacity 120ms ease-out",opacity:1}},nodeUnFoldedIconContainer:{position:"absolute",top:"50%",transform:"translateY(-50%)",right:8,zIndex:1},nodeContentContainer:[J.l0.colWithGap(4),{position:"relative",paddingTop:8,paddingBottom:8,paddingRight:8}],nodeHeader:{display:"block",height:20},nodeUnfoldedContentSurface:[J.l0.mt(4),J.l0.mb(8),J.l0.p(8),J.l0.borderRadius(8),{marginLeft:36,marginRight:8,overflowX:"hidden"}],unfoldedContentContainer:[J.l0.position.relative]});function sv(e){var t=e.boundaryTop,n=e.boundaryBottom,r=void 0!==n&&n,i=e.hideConnectorTop,o=e.hideConnectorBottom,a=void 0!==o&&o,l=e.joint,c=void 0===l?"top":l,s=e.marker,u=e.header,d=e.unfoldedContent,f=e.children,h=e.className,p=(0,M._)((0,X.useState)(!0),2),m=p[0],v=p[1];return(0,L.BX)(K.G,{className:h,css:J.l0.position.relative,children:[(0,L.tZ)(sf,{boundaryTop:void 0!==t&&t,boundaryBottom:r,joint:c,hideTop:void 0!==i&&i,hideBottom:a}),s?(0,L.tZ)(sy,{joint:c,children:s}):null,d?(0,L.BX)(K.G,{css:sm.containerInteractive,role:"button",tabIndex:0,onClick:function(){v(!m)},onKeyDown:function(e){("Enter"===e.key||" "===e.key)&&v(!m)},children:[m?(0,L.tZ)("div",{css:sm.nodeFoldedIconContainer,children:(0,L.tZ)(aq.Z,{})}):(0,L.tZ)("div",{css:sm.nodeUnFoldedIconContainer,children:(0,L.tZ)(aY.Z,{})}),(0,L.BX)(K.G,{css:sm.nodeContentContainer,children:[u?(0,L.tZ)(K.G,{css:sm.nodeHeader,children:u}):null,f?(0,L.tZ)(K.G,{children:f}):null]})]}):(0,L.tZ)(K.G,{css:sm.container,children:(0,L.BX)(K.G,{css:sm.nodeContentContainer,children:[u?(0,L.tZ)(K.G,{css:sm.nodeHeader,children:u}):null,f?(0,L.tZ)(K.G,{children:f}):null]})}),!d||m?null:(0,L.BX)(K.G,{css:sm.unfoldedContentContainer,children:[a?null:(0,L.tZ)(sp,{top:0,bottom:0,dashed:r}),(0,L.tZ)(e$.Tg,{css:sm.nodeUnfoldedContentSurface,elevated:!0,children:d})]})]})}var sg=(0,ee.X)({top:{position:"absolute",top:8,left:18,transform:"translateX(-50%)"},bottom:{position:"absolute",bottom:8,left:18,transform:"translateX(-50%)"},center:{position:"absolute",top:"50%",left:18,transform:"translateX(-50%) translateY(-50%)"}});function sy(e){var t=e.joint,n=e.children;return(0,L.tZ)("div",{css:sg[void 0===t?"top":t],children:n})}var sb=(0,ee.X)({container:[J.l0.rowWithGap(8),J.l0.align.center,J.l0.justify.spaceBetween,J.l0.height("100%")],textContainer:[J.l0.rowWithGap(4),J.l0.center],text:[J.l0.flex.shrink(0)]});function sZ(e){var t=e.text,n=(0,a2._)(e,["text"]);return(0,L.tZ)(sv,(0,eO._)({marker:(0,L.tZ)(si,{type:"boundary"}),joint:"center",header:(0,L.BX)(K.G,{css:sb.container,children:[(0,L.tZ)(l9.R,{}),(0,L.BX)(K.G,{css:sb.textContainer,children:[(0,L.tZ)(se.Z,{size:12,color:J.TV.foregroundDimmest}),(0,L.tZ)(Q.xv,{css:sb.text,variant:"small",color:"dimmest",multiline:!1,children:t})]}),(0,L.tZ)(l9.R,{})]})},n))}var sw=(0,ee.X)({definitionList:{display:"grid",gridTemplateColumns:"auto 1fr",paddingLeft:J.TV.space4,"> dt":{display:"flex",alignItems:"center",paddingBottom:J.TV.space2},"> dd":{marginLeft:J.TV.space12,paddingBottom:J.TV.space2}},listHeader:[J.l0.fontWeight.medium],content:[J.l0.colWithGap(8)],description:[J.l0.colWithGap(8)],commitList:[J.l0.colWithGap(2),J.l0.pl(4)]}),sx=function(e,t){var n=!e.body,r=null,i=null;return t&&"type"in t?(r=t,"pull-request"===t.type&&(t.reverts&&(i=t.reverts),t.subject&&(n=!0))):t&&(i=t),{hideBody:n,merge:r,revert:i}},sC=function(e){var t=e.hash;return(0,L.tZ)(a0.m,{size:"small",iconLeft:(0,L.tZ)(tj.Z,{}),textToCopy:t,text:t.slice(0,7),tooltip:"Hash copied!"})},s_=function(e){var t=e.onClick,n=e.text,r=e.loading;return(0,L.tZ)(eD.u,{tooltip:"Discard current changes and restore files to time of commit",children:(0,L.tZ)(eV.zx,{text:n,onClick:t,size:"small",iconLeft:void 0!==r&&r?(0,L.tZ)(eR.Z,{}):(0,L.tZ)(st.Z,{})})})},sS=function(e,t){return!(e.name===t.name&&e.email===t.email)},sE=function(e,t){return!(6e4>Math.abs(e-t))};function sk(e){var t=e.commit,n=e.info,r=sS(t.committer,t.author),i=sE(t.author.date,t.committer.date),o=sx(t,void 0===n?null:n),a=o.hideBody,l=o.merge,c=o.revert;return(0,L.BX)(K.G,{css:sw.content,children:[a?null:(0,L.BX)(K.G,{css:sw.description,children:[(0,L.tZ)(Q.xv,{children:(0,L.tZ)(cd,{body:t.body})}),(0,L.tZ)(l9.R,{css:J.l0.backgroundColor.outlineDimmer})]}),(0,L.BX)(K.G,{children:[(0,L.tZ)(Q.xv,{css:sw.listHeader,multiline:!1,children:"Author"}),(0,L.BX)("dl",{css:sw.definitionList,children:[(0,L.tZ)("dt",{children:"Name:"}),(0,L.tZ)("dd",{children:t.author.name}),(0,L.tZ)("dt",{children:"Email:"}),(0,L.tZ)("dd",{children:t.author.email})]})]}),r?(0,L.BX)(K.G,{children:[(0,L.tZ)(Q.xv,{css:sw.listHeader,multiline:!1,children:"Committer"}),(0,L.BX)("dl",{css:sw.definitionList,children:[(0,L.tZ)("dt",{children:"Name:"}),(0,L.tZ)("dd",{children:t.committer.name}),(0,L.tZ)("dt",{children:"Email:"}),(0,L.tZ)("dd",{children:t.committer.email})]})]}):null,(0,L.BX)(K.G,{children:[(0,L.tZ)(Q.xv,{css:sw.listHeader,multiline:!1,children:"Commit"}),(0,L.BX)("dl",{css:sw.definitionList,children:[i?(0,L.BX)(L.HY,{children:[(0,L.tZ)("dt",{children:"Authored:"}),(0,L.tZ)("dd",{children:(0,L.tZ)(cR.EK,{date:t.author.date,dateFormat:"absolute"})}),(0,L.tZ)("dt",{children:"Committed:"}),(0,L.tZ)("dd",{children:(0,L.tZ)(cR.EK,{date:t.committer.date,dateFormat:"absolute"})})]}):(0,L.BX)(L.HY,{children:[(0,L.tZ)("dt",{children:"Date:"}),(0,L.tZ)("dd",{children:(0,L.tZ)(cR.EK,{date:t.author.date,dateFormat:"absolute"})})]}),(0,L.tZ)("dt",{children:"Hash:"}),(0,L.tZ)("dd",{children:(0,L.tZ)(sC,{hash:t.hash})}),l&&"pull-request"===l.type?(0,L.BX)(L.HY,{children:[(0,L.tZ)("dt",{children:"PR:"}),(0,L.BX)("dd",{children:["#",l.id]})]}):null,l&&"branch"===l.type?(0,L.BX)(L.HY,{children:[(0,L.tZ)("dt",{children:"Merged:"}),(0,L.tZ)("dd",{children:l.source}),l.target?(0,L.BX)(L.HY,{children:[(0,L.tZ)("dt",{children:"Into:"}),(0,L.tZ)("dd",{children:l.target})]}):null]}):null,c?(0,L.BX)(L.HY,{children:[(0,L.tZ)("dt",{children:"Reverted:"}),(0,L.tZ)("dd",{children:c.hash})]}):null]})]}),l&&"simple"===l.type?(0,L.BX)(K.G,{children:[(0,L.tZ)(Q.xv,{css:sw.listHeader,multiline:!1,children:"Merged"}),(0,L.BX)(K.G,{css:sw.commitList,children:[(0,L.tZ)(Q.xv,{multiline:!1,children:l.a}),(0,L.tZ)(Q.xv,{multiline:!1,children:l.b})]})]}):null,l&&"octopus"===l.type?(0,L.BX)(K.G,{children:[(0,L.tZ)(Q.xv,{css:sw.listHeader,multiline:!1,children:"Merged"}),(0,L.tZ)(K.G,{css:sw.commitList,children:l.parents.map(function(e,t){return(0,L.tZ)(Q.xv,{multiline:!1,children:e},t)})})]}):null]})}var sT=(0,ee.X)({authorContainer:[J.l0.rowWithGap(8),J.l0.align.center],headerText:[J.l0.rowWithGap(4),J.l0.align.center,J.l0.fontWeight.medium],headerContainer:[J.l0.colWithGap(4),J.l0.align.start,J.l0.justify.start],button:[J.l0.reset.button,J.l0.linkStyle,J.l0.color.foregroundDefault,J.l0.fontWeight.medium,{display:"block",width:"100%",textAlign:"left"}]}),sR=function(e){var t=e.author;return(0,L.BX)(K.G,{css:sT.authorContainer,children:[(0,L.tZ)(ck,{name:t.name,email:t.email,color:"dimmer",allowPlaceholderAvatar:!0,small:!0}),(0,L.tZ)(cR.EK,{date:t.date,textColor:"dimmest",textVariant:"small"})]})},sD=function(e){var t=e.children;return(0,L.tZ)(Q.xv,{css:sT.headerText,multiline:!1,maxLines:1,children:t})},sI=function(e){var t=e.commit,n=e.onViewCommitClick,r=e.children;return(0,L.tZ)(K.G,{css:sT.headerContainer,children:(0,L.tZ)(eD.u,{tooltip:"View ".concat(t.hash.slice(0,7)),children:(0,L.tZ)("button",{css:sT.button,onClick:function(){return n(t.hash)},children:r})})})};function sG(e){var t=e.commit,n=(0,a2._)(e,["commit"]);return(0,L.tZ)(sv,(0,eM._)((0,eO._)({marker:(0,L.tZ)(si,{type:"commit"}),header:(0,L.tZ)(sD,{children:(0,L.tZ)(cu,{subject:t.subject})}),unfoldedContent:(0,L.tZ)(sk,{commit:t})},n),{children:(0,L.tZ)(sR,{author:t.author})}))}var sB=function(e){var t=e.commit,n=e.onViewCommitClick,r=(0,a2._)(e,["commit","onViewCommitClick"]);return(0,L.tZ)(sv,(0,eM._)((0,eO._)({marker:(0,L.tZ)(si,{type:"commit"}),header:(0,L.tZ)(sI,{commit:t,onViewCommitClick:function(){return n(t.hash)},children:(0,L.tZ)(sD,{children:(0,L.tZ)(cu,{subject:t.subject})})})},r),{children:(0,L.tZ)(sR,{author:t.author})}))},sA=n(65260);function sP(e){var t,n=e.commit,r=e.info,i=(0,a2._)(e,["commit","info"]);return"branch"!==r.type&&(t="pull-request"===r.type&&r.subject?r.subject:n.subject),(0,L.tZ)(sv,(0,eM._)((0,eO._)({marker:(0,L.tZ)(si,{type:"merge"}),header:(0,L.BX)(sD,{children:[(0,L.tZ)(cl,{text:"merged"}),(0,L.tZ)(sU,{info:r,hash:n.hash,subject:n.subject})]}),unfoldedContent:(0,L.tZ)(sk,{commit:n,info:r})},i),{children:(0,L.BX)(K.G,{css:[J.l0.colWithGap(8)],children:[t?(0,L.tZ)(Q.xv,{color:"dimmer",variant:"small",multiline:!1,children:(0,L.tZ)(cu,{subject:t})}):null,(0,L.tZ)(sR,{author:n.author})]})}))}var sN=function(e){var t,n=e.commit,r=e.info,i=e.onViewCommitClick,o=(0,a2._)(e,["commit","info","onViewCommitClick"]);return"branch"!==r.type&&(t="pull-request"===r.type&&r.subject?r.subject:n.subject),(0,L.tZ)(sv,(0,eM._)((0,eO._)({marker:(0,L.tZ)(si,{type:"merge"}),header:(0,L.tZ)(sI,{commit:n,onViewCommitClick:function(){return i(n.hash)},children:(0,L.BX)(sD,{children:[(0,L.tZ)(cl,{text:"merged"}),(0,L.tZ)(sU,{info:r,hash:n.hash,subject:n.subject})]})})},o),{children:(0,L.BX)(K.G,{css:[J.l0.colWithGap(8)],children:[t?(0,L.tZ)(Q.xv,{color:"dimmer",variant:"small",multiline:!1,children:(0,L.tZ)(cu,{subject:t})}):null,(0,L.tZ)(sR,{author:n.author})]})}))};function sU(e){var t=e.info,n=e.hash,r=e.subject,i=(0,L.tZ)("span",{css:J.l0.fontWeight.medium,children:r});switch(t.type){case"pull-request":return(0,L.BX)(L.HY,{children:[(0,L.tZ)("span",{children:"pull request"}),(0,L.tZ)(cc,{id:t.id}),t.reverts&&t.reverts.pr?(0,L.BX)(L.HY,{children:[(0,L.tZ)("span",{children:"-"}),(0,L.tZ)(ca,{text:"reverts"}),(0,L.tZ)(cc,{id:t.reverts.pr})]}):null]});case"branch":if(!t.target)return(0,L.BX)(L.HY,{children:[(0,L.tZ)("span",{children:"branch"}),(0,L.tZ)(cf,{name:t.source})]});return(0,L.BX)(L.HY,{children:[(0,L.tZ)(cf,{name:t.source}),(0,L.tZ)("span",{children:"into"}),(0,L.tZ)(cf,{name:t.target})]});case"simple":return(0,L.BX)(L.HY,{children:[(0,L.tZ)(cs,{hash:t.a}),(0,L.tZ)(sA.Z,{css:{alignSelf:"center"},size:12}),(0,L.tZ)(cs,{hash:t.b})]});case"octopus":return(0,L.BX)(L.HY,{children:[(0,L.tZ)("span",{children:"commit"}),(0,L.tZ)(cs,{hash:n}),(0,L.BX)("span",{children:["(",t.parents.length," parents)"]})]});default:return i}}function sL(e){var t=e.commit,n=e.info,r=(0,a2._)(e,["commit","info"]);return(0,L.tZ)(sv,(0,eM._)((0,eO._)({marker:(0,L.tZ)(si,{type:"revert"}),header:(0,L.BX)(sD,{children:[(0,L.tZ)(ca,{text:"reverted"}),(0,L.tZ)(cs,{hash:n.hash}),(0,L.tZ)(cu,{subject:n.subject,quoted:!0})]}),unfoldedContent:(0,L.tZ)(sk,{commit:t,info:n})},r),{children:(0,L.tZ)(sR,{author:t.author})}))}var sO=function(e){var t=e.commit,n=e.info,r=e.onViewCommitClick,i=(0,a2._)(e,["commit","info","onViewCommitClick"]);return(0,L.tZ)(sv,(0,eM._)((0,eO._)({marker:(0,L.tZ)(si,{type:"revert"}),header:(0,L.tZ)(sI,{commit:t,onViewCommitClick:function(){return r(t.hash)},children:(0,L.BX)(sD,{children:[(0,L.tZ)(ca,{text:"reverted"}),(0,L.tZ)(cs,{hash:n.hash}),(0,L.tZ)(cu,{subject:n.subject,quoted:!0})]})})},i),{children:(0,L.tZ)(sR,{author:t.author})}))};function sM(e){var t=e.button,n=(0,a2._)(e,["button"]);return(0,L.tZ)(sv,(0,eM._)((0,eO._)({marker:(0,L.tZ)(si,{type:"boundary"}),joint:"center"},n),{children:(0,L.tZ)(K.G,{children:t})}))}var sX=(0,ee.X)({body:[J.l0.flex.growAndShrink(1)],virtualItem:[J.l0.position.absolute,J.l0.top(0),J.l0.left(0),J.l0.width("100%"),J.l0.overflow("hidden")],virtualList:[J.l0.position.relative]}),sF=function(){return 60};function sW(e){var t=e.items,n=(0,X.useRef)(null),r=(0,cD.MG)({overscan:10,count:t.length,getScrollElement:function(){return n.current},estimateSize:sF});return(0,L.tZ)("div",{ref:n,css:sX.body,children:(0,L.tZ)("div",{css:sX.virtualList,style:{height:"".concat(r.getTotalSize(),"px")},children:r.getVirtualItems().map(function(e){return(0,L.tZ)("div",{css:sX.virtualItem,style:{transform:"translateY(".concat(e.start,"px)")},"data-index":e.index,ref:r.measureElement,children:(0,L.tZ)(sH,{items:t,index:e.index})},e.key)})})})}function sH(e){var t=e.items,n=e.index,r=t[n],i=0===n,o=n===t.length-1;if("boundary"===r.type)return(0,L.tZ)(sZ,{text:r.text,hideConnectorTop:i,hideConnectorBottom:o,boundaryTop:!0,boundaryBottom:!0},r.text);if("button"===r.type)return(0,L.tZ)(sM,{button:r.button,hideConnectorTop:i,hideConnectorBottom:o,boundaryTop:!0,boundaryBottom:!0},r.key);var a=t[n-1]?t[n-1].type:null,l=t[n+1]?t[n+1].type:null;return(0,L.tZ)(sV,{commit:r.commit,hideConnectorTop:i,hideConnectorBottom:o,boundaryTop:"commit"!==a,boundaryBottom:"commit"!==l,onViewCommitClick:r.onViewCommitClick},r.commit.hash)}function sV(e){var t=e.commit,n=e.onViewCommitClick,r=(0,a2._)(e,["commit","onViewCommitClick"]),i=c7(t);if(i)return n?(0,L.tZ)(sN,(0,eO._)({info:i,commit:t,onViewCommitClick:n},r)):(0,L.tZ)(sP,(0,eO._)({info:i,commit:t},r));var o=c4(t);return o?n?(0,L.tZ)(sO,(0,eO._)({info:o,commit:t,onViewCommitClick:n},r)):(0,L.tZ)(sL,(0,eO._)({info:o,commit:t},r)):n?(0,L.tZ)(sB,(0,eO._)({commit:t,onViewCommitClick:n},r)):(0,L.tZ)(sG,(0,eO._)({commit:t},r))}var sz=(0,no.F4)({from:{opacity:0},to:{opacity:1}}),sj=(0,ee.X)({loadingView:[{animation:"".concat(sz," 0.125s 0.25s linear backwards")},J.l0.flex.grow(1),J.l0.display.flex,J.l0.center]});function sq(){return(0,L.tZ)(K.G,{css:sj.loadingView,children:(0,L.tZ)(eR.Z,{size:48})})}var sY=n(91075);function s$(e){var t,n,r,i,o,a,l,c,s,u,d=e.status,f=e.gotoPendingState,h=(0,M._)((0,X.useState)(!1),2),p=h[0],m=h[1],v=l1(),g=(0,z.Z)().git,y=d.branch,b=null!==(o=null===(n=d.upstream)||void 0===n?void 0:n.branch)&&void 0!==o?o:null,Z=null!==(a=null===(r=d.upstream)||void 0===r?void 0:r.behind)&&void 0!==a?a:0,w=null!==(l=null===(i=d.upstream)||void 0===i?void 0:i.ahead)&&void 0!==l?l:0,x=d.changes.length>0,C=(0,lp.Z)((t=(0,eX._)(function(e){var t,n,r;return(0,eF.Jh)(this,function(i){switch(i.label){case 0:if(!y||!b||!Z||x)return[2,{canPull:!1,mode:sY.T.FF_ONLY,error:null}];return[4,e.isInitialized()];case 1:if((t=i.sent()).error)return v(t.error),[2,t];if(!t.initialized)return[2,{canPull:!1,mode:sY.T.FF_ONLY,error:null}];return[4,e.canMergeBranches(y,b)];case 2:if((n=i.sent()).error)return v(n.error),[2,n];return r=sY.T.FF_ONLY,w>0&&(r=n.canMerge?sY.T.REBASE:sY.T.MERGE),[2,{canPull:!0,mode:r,error:null}]}})}),function(e){return t.apply(this,arguments)}),[v,y,b,Z,w,x],{keepStaleResult:!1});if(null==C?void 0:C.error)return null;var _=null===C,S=null!==(c=null==C?void 0:C.canPull)&&void 0!==c&&c,E=null!==(s=null==C?void 0:C.mode)&&void 0!==s?s:sY.T.FF_ONLY;function k(){return(k=(0,eX._)(function(){var e;return(0,eF.Jh)(this,function(t){switch(t.label){case 0:if(p)return[2];return m(!0),[4,g.pull({mode:E,allowConflicts:!0})];case 1:return e=t.sent(),g.forceRefresh(),e.error?(v(e.error),m(!1)):(e.hasConflicts&&f(),lW("upstream-pulled")),[2]}})})).apply(this,arguments)}return p?u="Pulling...":y?x?u="Cannot pull with uncommitted changes":0===Z?u="Nothing to pull":_?u="Checking for merge conflicts…":S?(u="Pull ".concat(Z," ").concat((0,eS.Z)("commit",Z)),E===sY.T.REBASE?u+=" with rebase":E===sY.T.MERGE&&(u+=" with merge")):u="Cannot pull due to merge conflict":u="Cannot pull - the HEAD is detached",(0,L.tZ)(eV.zx,{text:u,iconLeft:_||p?(0,L.tZ)(eR.Z,{}):(0,L.tZ)(e8.Z,{}),onClick:function(){return k.apply(this,arguments)},loading:_||p,disabled:!S})}var sJ=n(6620);function sK(e){var t,n,r,i,o,a=e.status,l=(0,M._)((0,X.useState)(!1),2),c=l[0],s=l[1],u=l1(),d=(0,z.Z)().git,f=null===a.branch,h=null!==(r=null===(t=a.upstream)||void 0===t?void 0:t.behind)&&void 0!==r?r:0,p=null!==(i=null===(n=a.upstream)||void 0===n?void 0:n.ahead)&&void 0!==i?i:0,m=f||h>0||0===p;function v(){return(v=(0,eX._)(function(){var e;return(0,eF.Jh)(this,function(t){switch(t.label){case 0:if(m||c)return[2];return s(!0),[4,d.push()];case 1:return e=t.sent(),d.forceRefresh(),e.error?(u(e.error),s(!1)):lW("upstream-pushed"),[2]}})})).apply(this,arguments)}return o=c?"Pushing...":f?"Cannot push - the HEAD is detached":0===p?"Nothing to push":h>0?"Cannot push due to unpulled changes":"Push ".concat(p," ").concat((0,eS.Z)("commit",p)),(0,L.tZ)(eV.zx,{text:o,iconLeft:c?(0,L.tZ)(eR.Z,{}):(0,L.tZ)(sJ.Z,{}),onClick:function(){return v.apply(this,arguments)},disabled:m,loading:c})}function sQ(e){if(0===e.length)return new Map;if(1===e.length)return new Map([[e[0],null]]);var t=new Map,n=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value,c=(0,eu.UO)(l),s=t.get(c);s||(s=[],t.set(c,s)),s.push(l)}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}var u=new Map,d=!0,f=!1,h=void 0;try{for(var p,m=t[Symbol.iterator]();!(d=(p=m.next()).done);d=!0)!function(){var e=(0,M._)(p.value,2)[1];if(1===e.length)return u.set(e[0],null);var t=new Map,n=new Set,r=0,i=!0,o=!1,a=void 0;try{for(var l,c=e[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;if(-1===s.indexOf("/")){u.set(s,null),n.add(s);continue}var d=function(e){for(var t=e.split("/").slice(0,-1),n=[],r=0;r<t.length;r++){var i=t.slice(r).join("/")+"/";0!==r&&(i="…/"+i),n.push(i)}return n.reverse()}(s);t.set(s,d),d.length>r&&(r=d.length)}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}for(var f=0;f<=r;f++){var h=function(e){var r=[],i=new Map,o=!0,a=!1,l=void 0;try{for(var c,s=t[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var d=(0,M._)(c.value,2),f=d[0],h=d[1];if(!n.has(f)){var p=h[e];p||(p=h[h.length-1]),r.push(p),i.set(p,f)}}}catch(e){a=!0,l=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}if(0===r.length)return"break";var m=!0,v=!1,g=void 0;try{for(var y,b=r[Symbol.iterator]();!(m=(y=b.next()).done);m=!0)!function(){var e=y.value,t=i.get(e);if(void 0===t)throw Error("Unpopulated segment map");1===r.filter(function(t){return t===e}).length&&(n.add(t),u.set(t,e))}()}catch(e){v=!0,g=e}finally{try{m||null==b.return||b.return()}finally{if(v)throw g}}}(f);if("break"===h)break}if(n.size!==e.length){var m=!0,v=!1,g=void 0;try{for(var y,b=e[Symbol.iterator]();!(m=(y=b.next()).done);m=!0){var Z=y.value;if(!n.has(Z)){var w=Z.split("/").slice(0,-1).join("/");u.set(Z,w)}}}catch(e){v=!0,g=e}finally{try{m||null==b.return||b.return()}finally{if(v)throw g}}}}()}catch(e){f=!0,h=e}finally{try{d||null==m.return||m.return()}finally{if(f)throw h}}return u}var s0=n(31498),s1=(0,ee.X)({actionsIndex:[J.l0.height(24),J.l0.align.center,J.l0.borderRadius(4)],actionsWorktree:[J.l0.height(24),J.l0.flex.row,J.l0.align.center,J.l0.borderRadius(4)],unstage:[J.l0.height(24),J.l0.width(24),J.l0.borderRadius(2)],stage:[J.l0.px(12),J.l0.height(24),J.l0.width(24),J.l0.borderRadius(2)],reset:[J.l0.pl(16),J.l0.pr(12),J.l0.height(24),J.l0.width(24),J.l0.borderRadius(2)],resetIcon:{transform:"scale(0.85)"},divider:[J.l0.height("75%"),J.l0.width(1),J.l0.backgroundColor.outlineStronger]});function s2(e){var t=e.file,n=e.list,r=e.stageFiles,i=e.restoreFiles,o=e.disabled,a=void 0!==o&&o,l=(0,M._)((0,X.useState)(!1),2),c=l[0],s=l[1],u=(0,M._)((0,X.useState)(!1),2),d=u[0],f=u[1];function h(){return(h=(0,eX._)(function(){return(0,eF.Jh)(this,function(e){switch(e.label){case 0:if(a)return[2];return s(!0),[4,r({reset:[t.path]})];case 1:return e.sent(),s(!1),[2]}})})).apply(this,arguments)}function p(){return(p=(0,eX._)(function(){return(0,eF.Jh)(this,function(e){switch(e.label){case 0:if(a)return[2];return s(!0),[4,r({add:[t.path]})];case 1:return e.sent(),s(!1),[2]}})})).apply(this,arguments)}function m(){return(m=(0,eX._)(function(){return(0,eF.Jh)(this,function(e){switch(e.label){case 0:if(a||"worktree"!==n)return[2];return f(!0),[4,i(t.path)];case 1:return e.sent(),f(!1),[2]}})})).apply(this,arguments)}return a=a||d||c,"index"===n?(0,L.tZ)(e$.Tg,{elevated:!0,css:s1.actionsIndex,children:(0,L.tZ)(eE.hU,{css:s1.unstage,alt:"Unstage changes",size:18,tooltipDelay:"long",onClick:function(){return h.apply(this,arguments)},disabled:a,children:c?(0,L.tZ)(eR.Z,{}):(0,L.tZ)(s0.Z,{})})}):(0,L.BX)(e$.Tg,{elevated:!0,css:s1.actionsWorktree,children:[(0,L.tZ)(eE.hU,{css:s1.reset,alt:"Reset changes",size:18,tooltipDelay:"long",onClick:function(){return m.apply(this,arguments)},disabled:a,children:d?(0,L.tZ)(eR.Z,{}):(0,L.tZ)(st.Z,{css:s1.resetIcon})}),(0,L.tZ)("div",{css:s1.divider}),(0,L.tZ)(eE.hU,{css:s1.stage,alt:"Stage changes",size:18,tooltipDelay:"long",onClick:function(){return p.apply(this,arguments)},disabled:a,children:c?(0,L.tZ)(eR.Z,{}):(0,L.tZ)(i9.Z,{})})]})}var s8=(0,ee.X)({path:[J.l0.rowWithGap(8),J.l0.flex.growAndShrink(1),J.l0.align.center],source:[J.l0.color.foregroundDimmest],sourceArrow:[J.l0.mx(8)]});function s4(e){var t=e.path,n=e.prefix,r=e.source,i=e.onClick;return(0,L.BX)(K.G,{css:s8.path,children:[(0,L.tZ)(aL.Z,{path:t}),(0,L.BX)(Q.xv,{multiline:!1,children:[(0,L.tZ)(ch,{path:t,prefix:n,onClick:i}),r?(0,L.BX)("span",{css:s8.source,children:[(0,L.tZ)("span",{css:s8.sourceArrow,children:"←"}),(0,L.tZ)(ch,{path:r})]}):null]})]})}var s3=(0,ee.X)({modifiedFile:[J.l0.py(2),J.l0.rowWithGap(4),J.l0.align.center]});function s5(e){var t,n=e.file,r=e.list,i=e.stageFiles,o=e.restoreFiles,a=e.pathMap,l=e.disabled,c=e.onFilePathClick,s=null==a?void 0:a.get(n.path),u=null===(t=n.source)||void 0===t?void 0:t.path,d="index"===r?n.type.index:n.type.worktree,f=(0,tk.Z)(function(){if(d!==a$.h.DELETED)return function(){return c(n.path)}},[n.path,c,d]);return(0,L.BX)(K.G,{css:s3.modifiedFile,children:[(0,L.tZ)(s4,{path:n.path,prefix:s,source:u,onClick:f}),(0,L.tZ)(aK,{type:d}),(0,L.tZ)(s2,{file:n,list:r,stageFiles:i,restoreFiles:o,disabled:void 0!==l&&l})]})}var s6=(0,ee.X)({actions:[J.l0.rowWithGap(2),J.l0.backgroundColor.backgroundHighest,J.l0.borderRadius(8)],buttonReset:[J.l0.borderRadius(8,0,0,8)],buttonStage:[J.l0.borderRadius(0,8,8,0)],divider:[J.l0.my(8),J.l0.width(1),J.l0.backgroundColor.outlineStronger]});function s9(e){var t=e.type,n=e.stageFiles,r=e.restoreFiles,i=e.disabled,o=void 0!==i&&i,a=(0,M._)((0,X.useState)(!1),2),l=a[0],c=a[1],s=(0,M._)((0,X.useState)(!1),2),u=s[0],d=s[1];function f(){return h.apply(this,arguments)}function h(){return(h=(0,eX._)(function(){return(0,eF.Jh)(this,function(e){switch(e.label){case 0:if(o)return[2];return c(!0),[4,n({all:"index"!==t})];case 1:return e.sent(),c(!1),[2]}})})).apply(this,arguments)}function p(){return(p=(0,eX._)(function(){return(0,eF.Jh)(this,function(e){switch(e.label){case 0:if(o||"worktree"!==t)return[2];return d(!0),[4,r(!0)];case 1:return e.sent(),d(!1),[2]}})})).apply(this,arguments)}return o=o||u||l,"index"===t?(0,L.tZ)(eV.zx,{text:"Unstage All",iconLeft:l?(0,L.tZ)(eR.Z,{}):(0,L.tZ)(s0.Z,{}),onClick:f,disabled:o,loading:l,size:"small"}):(0,L.BX)(K.G,{css:s6.actions,children:[(0,L.tZ)(eV.zx,{css:s6.buttonReset,text:"Reset All",iconLeft:u?(0,L.tZ)(eR.Z,{}):(0,L.tZ)(st.Z,{}),onClick:function(){return p.apply(this,arguments)},disabled:o,loading:u,size:"small"}),(0,L.tZ)("div",{css:s6.divider}),(0,L.tZ)(eV.zx,{css:s6.buttonStage,text:"Stage All",iconLeft:l?(0,L.tZ)(eR.Z,{}):(0,L.tZ)(i9.Z,{}),onClick:f,disabled:o,loading:l,size:"small"})]})}var s7=(0,ee.X)({list:[J.l0.pt(4),J.l0.pb(8),J.l0.colWithGap(4)],listFolded:[J.l0.py(4)],header:[J.l0.px(8),J.l0.rowWithGap(4),J.l0.align.center],headerFoldable:[J.l0.py(4),J.l0.pl(4),J.l0.pr(8),J.l0.rowWithGap(4),J.l0.align.center],headerText:[J.l0.flex.grow(1)],body:[J.l0.px(8),J.l0.maxHeight("25vh"),J.l0.overflowY("auto")]});function ue(e){var t,n=e.files,r=e.type,i=e.stageFiles,o=e.restoreFiles,a=e.onFilePathClick,l=e.pathMap,c=e.foldable,s=void 0!==c&&c,u=e.disabled,d=void 0!==u&&u,f=(0,M._)((0,X.useState)(!1),2),h=f[0],p=f[1],m=(0,X.useRef)(null),v=(0,X.useRef)(null),g=(0,cD.MG)({count:n.length,getScrollElement:function(){return v.current},getItemKey:function(e){return n[e].path},estimateSize:function(){return 28},overscan:20}),y=g.getVirtualItems();return s&&h?(0,L.tZ)(K.G,{css:s7.listFolded,children:(0,L.BX)(K.G,{css:s?s7.headerFoldable:s7.header,children:[(0,L.tZ)(ut,{files:n,type:r,setFolded:p,foldable:!0,folded:!0}),(0,L.tZ)(s9,{type:r,stageFiles:i,restoreFiles:o,disabled:d})]})}):(0,L.BX)(K.G,{innerRef:m,css:s7.list,children:[(0,L.BX)(K.G,{css:s?s7.headerFoldable:s7.header,children:[(0,L.tZ)(ut,{files:n,type:r,setFolded:p,foldable:s}),(0,L.tZ)(s9,{type:r,stageFiles:i,restoreFiles:o,disabled:d})]}),(0,L.tZ)(K.K.div,{ref:v,css:s7.body,children:(0,L.tZ)("div",{style:{minHeight:g.getTotalSize()},children:(0,L.tZ)("div",{style:{transform:"translateY(".concat(null===(t=y[0])||void 0===t?void 0:t.start,"px)"),willChange:"transform"},children:y.map(function(e){var t=n[e.index];return(0,L.tZ)("div",{"data-index":e.index,children:(0,L.tZ)(s5,{file:t,list:r,stageFiles:i,restoreFiles:o,onFilePathClick:a,pathMap:l,disabled:d},t.path)},e.key)})})})})]})}function ut(e){var t=e.files,n=e.type,r=e.setFolded,i=e.foldable,o=void 0!==i&&i,a=e.folded,l=(0,eS.Z)("file",t.length),c="".concat(t.length," ").concat("index"===n?"staged":"changed"," ").concat(l);return o&&void 0!==a&&a?(0,L.BX)(L.HY,{children:[(0,L.tZ)(eE.hU,{alt:"Show list",onClick:function(){return r(!1)},children:(0,L.tZ)(aq.Z,{})}),(0,L.tZ)(Q.xv,{css:s7.headerText,multiline:!1,children:c})]}):(0,L.BX)(L.HY,{children:[o?(0,L.tZ)(eE.hU,{alt:"Hide list",onClick:function(){return r(!0)},children:(0,L.tZ)(aY.Z,{color:J.TV.foregroundDimmest})}):null,(0,L.tZ)(Q.xv,{css:s7.headerText,color:"dimmest",multiline:!1,children:c})]})}var un=n(24890),ur=(0,ee.X)({container:[J.l0.colWithGap(8)],buttons:[J.l0.rowWithGap(8),J.l0.justify.end],restoringBoth:[J.l0.colWithGap(12)],listContainer:[J.l0.colWithGap(4)],list:[J.l0.px(4),J.l0.colWithGap(2)]});function ui(e){var t=e.show,n=e.files,r=e.pathMap,i=e.callback,o=(0,lt.Z)(i),a=(0,X.useCallback)(function(){var e;null===(e=o.current)||void 0===e||e.call(o,!0)},[o]),l=(0,X.useCallback)(function(){var e;null===(e=o.current)||void 0===e||e.call(o,!1)},[o]);return(0,L.tZ)(iq.u,{isOpen:t,onRequestClose:l,children:t?(0,L.BX)(K.G,{css:ur.container,children:[(0,L.BX)(Q.h4,{level:2,children:["Discard ",(0,eS.Z)("Change",n.length)]}),(0,L.tZ)(uo,{files:n,pathMap:r}),(0,L.BX)(K.G,{css:ur.buttons,children:[(0,L.tZ)(eV.zx,{text:"Cancel",iconLeft:(0,L.tZ)(un.Z,{}),onClick:l}),(0,L.tZ)(eV.zx,{text:"Discard ".concat((0,eS.Z)("Change",n.length)),iconLeft:(0,L.tZ)(st.Z,{}),colorway:"negative",onClick:a})]})]}):null})}function uo(e){var t=e.files,n=e.pathMap,r=[],i=[],o=!0,a=!1,l=void 0;try{for(var c,s=t[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var u=c.value;u.type.worktree===a$.h.UNTRACKED?i.push(u):r.push(u)}}catch(e){a=!0,l=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}return!r.length&&i.length?(0,L.BX)(K.G,{css:ur.listContainer,children:[(0,L.tZ)(Q.xv,{children:1===i.length?"Do you want to permanently delete this file?":"Do you want to permanently delete these files?"}),(0,L.tZ)(ua,{files:i,pathMap:n})]}):r.length&&!i.length?(0,L.BX)(K.G,{css:ur.listContainer,children:[(0,L.tZ)(Q.xv,{children:1===r.length?"Do you want to undo the changes to this file?":"Do you want to undo the changes to these files?"}),(0,L.tZ)(ua,{files:r,pathMap:n})]}):(0,L.BX)(K.G,{css:ur.restoringBoth,children:[r.length?(0,L.BX)(K.G,{css:ur.listContainer,children:[(0,L.BX)(Q.h4,{level:3,children:["Tracked ",(0,eS.Z)("File",r.length)]}),(0,L.tZ)(Q.xv,{multiline:!1,children:1===r.length?"This file will have its changes undone.":"These files will have their changes undone."}),(0,L.tZ)(ua,{files:r,pathMap:n})]}):null,i.length?(0,L.BX)(K.G,{css:ur.listContainer,children:[(0,L.BX)(Q.h4,{level:3,children:["Untracked ",(0,eS.Z)("File",i.length)]}),(0,L.tZ)(Q.xv,{multiline:!1,children:1===i.length?"This file will be permanently deleted.":"These files will be permanently deleted."}),(0,L.tZ)(ua,{files:i,pathMap:n})]}):null]})}function ua(e){var t=e.files,n=e.pathMap,r=(0,X.useMemo)(function(){return t.length>20?t.slice(0,20):t},[t]);return(0,L.tZ)(K.G,{children:(0,L.BX)("ul",{css:ur.list,children:[r.map(function(e){var t;return(0,L.tZ)("li",{children:(0,L.tZ)(s4,{path:e.path,prefix:n.get(e.path),source:null===(t=e.source)||void 0===t?void 0:t.path})},e.path)}),t.length<=20?null:(0,L.tZ)("li",{children:(0,L.BX)(Q.xv,{color:"dimmer",children:["... ",t.length-20," more"," ",(0,eS.Z)("file",t.length-20)]})})]})})}function ul(e){var t=(0,M._)((0,X.useState)(function(){return{show:!1,files:[]}}),2),n=t[0],r=t[1];return{openRestoreConfirmationModal:(0,X.useCallback)(function(e){return new Promise(function(t){0===e.length&&t(!1),r({show:!0,files:e,callback:function(e){r({show:!1,files:[],callback:void 0}),t(e)}})})},[]),restoreConfirmationModal:(0,X.useMemo)(function(){return(0,L.tZ)(ui,(0,eM._)((0,eO._)({},n),{pathMap:e}))},[n,e])}}var uc=[{"& > span:first-child":[J.l0.flex.grow(1),J.l0.textAlign.left]},{"& > span":[J.l0.flex.shrink(1)]}],us=(0,ee.X)({buttonFolded:[uc,J.l0.height("auto"),J.l0.py(8),J.l0.fontWeight.medium],buttonUnfolded:[uc,J.l0.height("auto"),J.l0.py(8),J.l0.fontWeight.medium,J.l0.border({color:J.TV.outlineDimmer,direction:"bottom"}),J.l0.borderRadius(8,8,0,0)],container:[J.l0.flex.grow(1),J.l0.borderRadius(8)],lists:[J.l0.borderRadius(0,0,8,8)],divider:[J.l0.height(1),J.l0.minHeight(1),J.l0.width("100%"),J.l0.backgroundColor.outlineDimmer],autoStageMessage:[J.l0.pt(4),J.l0.pb(8),J.l0.px(4),J.l0.center],noChangesMessage:[J.l0.py(16),J.l0.px(4),J.l0.center],buttonText:[J.l0.flex.grow(1)],details:[J.l0.rowWithGap(4),J.l0.fontWeight.normal,J.l0.color.foregroundDimmest]});function uu(e){var t,n,r=e.status,i=e.stageFiles,o=e.restoreFiles,a=e.onStagedFileClick,l=e.disabled,c=void 0!==l&&l,s=(0,M._)((0,X.useState)(!1),2),u=s[0],d=s[1],f=(0,M._)((0,X.useState)(!1),2),h=f[0],p=f[1],m=(0,M._)((0,X.useState)(!1),2),v=m[0],g=m[1],y=(0,X.useMemo)(function(){return sQ(r.changes.map(function(e){return e.path}))},[r]),b=(0,M._)((0,X.useMemo)(function(){var e=[],t=[],n=!0,i=!1,o=void 0;try{for(var a,l=r.changes[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var c=a.value;c.staged&&e.push(c),c.type.worktree!==a$.h.UNMODIFIED&&t.push(c)}}catch(e){i=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}return[e,t]},[r.changes]),2),Z=b[0],w=b[1],x=Z.length>0&&w.length>0,C=ul(y),_=C.openRestoreConfirmationModal,S=C.restoreConfirmationModal,E=(0,X.useCallback)((t=(0,eX._)(function(e){return(0,eF.Jh)(this,function(t){switch(t.label){case 0:if(!("all"in e))return[3,2];return p(!0),[4,i(e)];case 1:return t.sent(),p(!1),[3,4];case 2:return[4,i(e)];case 3:t.sent(),t.label=4;case 4:return[2]}})}),function(e){return t.apply(this,arguments)}),[i]),k=(0,X.useCallback)((n=(0,eX._)(function(e){var t,n;return(0,eF.Jh)(this,function(r){switch(r.label){case 0:if(!0!==e)return[3,4];return g(!0),[4,_(w)];case 1:if(!r.sent())return[3,3];return[4,o(e)];case 2:r.sent(),r.label=3;case 3:return g(!1),[3,8];case 4:if("string"==typeof e){if(!(n=w.find(function(t){return t.path===e})))throw g(!1),Error("Could not find file in worktree list");t=[n]}else t=w.filter(function(t){return e.includes(t.path)});return[4,_(t)];case 5:if(!r.sent())return[3,7];return[4,o(e)];case 6:r.sent(),r.label=7;case 7:g(!1),r.label=8;case 8:return[2]}})}),function(e){return n.apply(this,arguments)}),[_,o,w]);return u?(0,L.tZ)(ud,{setFolded:d,changeCount:w.length,stagedCount:Z.length,disabled:c,folded:!0}):0===Z.length&&0===w.length?(0,L.BX)(K.G,{style:{opacity:c?.725:void 0},css:us.container,children:[(0,L.tZ)(ud,{setFolded:d,changeCount:w.length,stagedCount:Z.length,disabled:c}),(0,L.tZ)(e$.Tg,{css:us.lists,elevated:!0,children:(0,L.tZ)(K.G,{css:us.noChangesMessage,children:(0,L.tZ)(Q.xv,{color:"dimmest",multiline:!1,children:"No changed or staged files."})})})]}):(0,L.BX)(L.HY,{children:[(0,L.BX)(K.G,{style:{opacity:c?.725:void 0},css:us.container,children:[(0,L.tZ)(ud,{setFolded:d,changeCount:w.length,stagedCount:Z.length,disabled:c}),(0,L.BX)(e$.Tg,{css:us.lists,elevated:!0,children:[0===Z.length?null:(0,L.tZ)(ue,{type:"index",files:Z,stageFiles:E,restoreFiles:k,onFilePathClick:a,pathMap:y,foldable:x,disabled:c||h||v}),x?(0,L.tZ)("div",{css:us.divider}):null,0===w.length?null:(0,L.BX)(L.HY,{children:[(0,L.tZ)(ue,{type:"worktree",files:w,stageFiles:E,restoreFiles:k,onFilePathClick:a,pathMap:y,foldable:x,disabled:c||h||v}),x?null:(0,L.tZ)(K.G,{css:us.autoStageMessage,children:(0,L.tZ)(Q.xv,{variant:"small",color:"dimmest",multiline:!1,children:"Committing will automatically stage your changes."})})]})]})]}),S]})}function ud(e){var t=e.folded,n=void 0!==t&&t,r=e.setFolded,i=e.changeCount,o=e.stagedCount,a=e.disabled;return(0,L.tZ)(eV.zx,{css:n?us.buttonFolded:us.buttonUnfolded,text:"Review Changes",secondaryText:(0,L.tZ)(uf,{folded:n,changeCount:i,stagedCount:o}),onClick:function(){return r(!n)},iconRight:n?(0,L.tZ)(aq.Z,{}):(0,L.tZ)(aY.Z,{}),disabled:void 0!==a&&a,size:"small"})}function uf(e){var t=e.folded,n=e.changeCount,r=e.stagedCount;if(!t)return null;var i=n>0,o=r>0;return i||o?(0,L.BX)("span",{css:us.details,children:[i?(0,L.BX)("span",{children:[n," ",(0,eS.Z)("change",n)]}):null,i&&o?(0,L.tZ)("span",{children:"/"}):null,o?(0,L.BX)("span",{children:[r," staged"]}):null]}):(0,L.tZ)("span",{css:us.details,children:(0,L.tZ)("span",{children:"no changes"})})}var uh=n(43704),up=n(93049),um=n(46868),uv=n(62340),ug={height:32,width:"100%",resize:"none",border:"none"},uy={width:"100%",resize:"none",border:"none"},ub=(0,ee.X)({surface:[J.l0.p(8),J.l0.colWithGap(12),J.l0.borderRadius(0,0,8,8)],button:[J.l0.height("auto"),J.l0.py(8),J.l0.fontWeight.medium,J.l0.borderRadius(8,8,0,0),J.l0.justify.start,J.l0.border({color:J.TV.outlineDimmer,direction:"bottom"}),{"> span:first-child":{flexGrow:1,textAlign:"start"}}],requiredText:[J.l0.display.inlineFlex,J.l0.rowWithGap(4)],subjectField:[J.l0.colWithGap(8)],bodyField:[J.l0.colWithGap(8)],subjectInput:ug,bodyInput:uy,subjectInputDisabled:[ug,{opacity:.5}],bodyInputDisabled:[uy,{opacity:.5}],required:[J.l0.color.accentNegativeStronger],keyCombo:[J.l0.display.inlineFlex,J.l0.rowWithGap(4),J.l0.flex.grow(1),J.l0.align.center],keyComboText:[J.l0.fontWeight.normal,J.l0.color.foregroundDimmest]});function uZ(e){var t=e.message,n=e.disabled,r=void 0!==n&&n,i=e.onMessageChange,o=e.onCommitShortcut,a=(0,M._)((0,X.useState)(!0),2),l=a[0],c=a[1],s=(0,M._)((0,X.useState)(!1),2),u=s[0],d=s[1],f=(0,M._)((0,X.useState)(!1),2),h=f[0],p=f[1],m=(0,X.useRef)(null),v=(0,X.useRef)(null),g=(0,tW._)(t.split("\n\n")),y=g[0],b=void 0===y?"":y,Z=g.slice(1).join("\n\n"),w=(0,uv.d)();function x(e,t){i((e=e.replaceAll("\n"," "))+(t?"\n\n"+t:""))}var C=(0,au.gf)(um.CN.gitCommit.id);return(0,ad.ow)(um.CT,h),(0,au.Il)(function(){return[um.CN.gitCommit.id,{run:function(){null==o||o()},scope:um.CT,bubble:!1}]},[o]),(0,L.BX)(K.G,{children:[(0,L.tZ)(eV.zx,{css:ub.button,text:(0,L.BX)("span",{css:ub.requiredText,children:[(0,L.tZ)("span",{children:"Message"}),l?(0,L.tZ)(uC,{}):null]}),secondaryText:w||!C?void 0:(0,L.BX)("span",{css:ub.keyCombo,children:[(0,L.tZ)("span",{css:ub.keyComboText,children:"Commit:"}),(0,L.tZ)(au.bM,{keyCombo:C,small:!0})]}),iconRight:l?(0,L.tZ)(aq.Z,{}):(0,L.tZ)(aY.Z,{}),onClick:function(){return c(function(e){return!e})},size:"small"}),(0,L.BX)(e$.Tg,{css:ub.surface,elevated:!0,children:[(0,L.tZ)(uw,{ref:m,value:b,compact:l,disabled:r,onChange:function(e){x(e,Z)},onNewline:function(){if(l)c(!1),d(!0);else{if(!v.current)return;v.current.focus(),v.current.setSelectionRange(0,0)}},onFocus:function(){p(!0)},onBlur:function(){p(!1)}}),l&&!Z?null:(0,L.tZ)(ux,{ref:v,value:Z,compact:l,disabled:r,onChange:function(e){if(x(b,e),l&&!e){var t;null===(t=m.current)||void 0===t||t.focus()}else l&&c(!1)},onBackspaceWhenEmpty:function(){m.current&&m.current.focus()},onFocus:function(){u&&d(!1),p(!0)},onBlur:function(){p(!1)},autoFocus:u})]})]})}var uw=(0,X.forwardRef)(function(e,t){var n=e.value,r=e.compact,i=e.disabled,o=void 0!==i&&i,a=e.onChange,l=e.onNewline,c=e.onFocus,s=e.onBlur;return(0,L.BX)(K.G,{css:ub.subjectField,children:[void 0!==r&&r?null:(0,L.tZ)(Q.xv,{variant:"small",color:"dimmer",multiline:!1,children:(0,L.BX)("span",{css:ub.requiredText,children:[(0,L.tZ)("span",{children:"Summary"}),(0,L.tZ)(uC,{})]})}),(0,L.tZ)(tH.B,{ref:t,css:o?ub.subjectInputDisabled:ub.subjectInput,placeholder:"Summary of your commit...",value:n,disabled:o,onChange:function(e){return null==a?void 0:a(e.currentTarget.value)},onKeyDown:function(e){"Enter"!==e.key||e.defaultPrevented||(e.preventDefault(),e.stopPropagation(),null==l||l())},onFocus:c,onBlur:s})]})}),ux=(0,X.forwardRef)(function(e,t){var n=e.value,r=e.compact,i=void 0!==r&&r,o=e.disabled,a=void 0!==o&&o,l=e.autoFocus,c=e.onChange,s=e.onBackspaceWhenEmpty,u=e.onFocus,d=e.onBlur,f=(0,uh.Z)().ref;return(0,L.BX)(K.G,{css:ub.bodyField,children:[i?null:(0,L.tZ)(Q.xv,{variant:"small",color:"dimmer",multiline:!1,children:"Description"}),(0,L.tZ)(tH.B,{ref:i?t:(0,up.l)(t,f),css:a?ub.bodyInputDisabled:ub.bodyInput,placeholder:"Description of your commit...",value:n,disabled:a,onChange:function(e){return null==c?void 0:c(e.currentTarget.value)},onKeyDown:function(e){"Backspace"===e.key&&""===n&&(e.preventDefault(),e.stopPropagation(),null==s||s())},onFocus:u,onBlur:d,autoFocus:void 0!==l&&l})]})});function uC(){return(0,L.tZ)(eD.u,{tooltip:"This field is required.",placement:"top",children:(0,L.tZ)("span",{css:ub.required,children:"*"})})}var u_=(0,ee.X)({commitArea:[J.l0.colWithGap(8)]});function uS(e){var t=e.status,n=e.onStagedFileClick,r=e.defaultMessage,i=(0,M._)((0,X.useState)(t),2),o=i[0],a=i[1],l=(0,M._)((0,X.useState)(null!=r?r:""),2),c=l[0],s=l[1],u=(0,M._)((0,X.useState)(0),2),d=u[0],f=u[1],h=(0,M._)((0,X.useState)(!1),2),p=h[0],m=h[1],v=l1();(0,X.useEffect)(function(){return a(t)},[t]);var g=(0,z.Z)().git;if(!o||!o.changes.length)return(0,L.tZ)(K.G,{css:u_.commitArea,children:(0,L.tZ)(Q.xv,{color:"dimmest",multiline:!1,children:"There are no changes to commit."})});var y=o.changes.length,b=o.changes.filter(function(e){return e.staged}).length;function Z(){return(Z=(0,eX._)(function(e){var t,n;return(0,eF.Jh)(this,function(r){switch(r.label){case 0:if(p)return[2];return f(function(e){return e+1}),[4,g.stageFiles(e)];case 1:if((t=r.sent()).error)return[3,3];return[4,g.status()];case 2:return(n=r.sent()).error?(lv({context:"commit-area-status",gitService:g,result:n,data:{opts:e}}),v(n.error)):a(n),g.forceRefresh(),[3,4];case 3:v(t.error),lv({context:"commit-area-stage-files",gitService:g,result:t,data:{opts:e}}),r.label=4;case 4:return f(function(e){return e-1}),[2]}})})).apply(this,arguments)}function w(){return(w=(0,eX._)(function(e){var t,n;return(0,eF.Jh)(this,function(r){switch(r.label){case 0:if(p)return[2];return f(function(e){return e+1}),[4,g.restoreFiles(e)];case 1:if((t=r.sent()).error)return[3,3];return[4,g.status()];case 2:return(n=r.sent()).error?(lv({context:"commit-area-status",gitService:g,result:n,data:{files:e}}),v(n.error)):a(n),g.forceRefresh(),[3,4];case 3:lv({context:"commit-area-restore-files",gitService:g,result:t,data:{files:e}}),v(t.error),r.label=4;case 4:return f(function(e){return e-1}),[2]}})})).apply(this,arguments)}function x(){return C.apply(this,arguments)}function C(){return(C=(0,eX._)(function(){var e,t;return(0,eF.Jh)(this,function(n){switch(n.label){case 0:if(""===c||p||0===y||d>0)return[2];if(m(!0),0!==b)return[3,2];return[4,g.stageFiles({all:!0})];case 1:n.sent(),n.label=2;case 2:return[4,g.commit({message:c})];case 3:if(!(e=n.sent()).error)return[3,4];return m(!1),v(e.error),lv({context:"commit-area-commit",gitService:g,result:e,data:{message:c}}),[3,6];case 4:return lW("commit-created",{hasDescription:-1!==c.trim().indexOf("\n\n")}),[4,g.status()];case 5:t=n.sent(),m(!1),t.error?(v(t.error),lv({context:"commit-area-status",gitService:g,result:t,data:{message:c}})):(s(""),a(t)),g.forceRefresh(),n.label=6;case 6:return[2]}})})).apply(this,arguments)}var _="Nothing to commit";if(p)_="Committing...";else if(b>0&&b<y){var S=(0,eS.Z)("change",b);_="Commit ".concat(b," staged ").concat(S)}else y>0&&(_="Stage and commit all changes");var E=!c||0===y||d>0||p;return(0,L.BX)(K.G,{css:u_.commitArea,children:[(0,L.tZ)(uZ,{message:c,disabled:p,onMessageChange:s,onCommitShortcut:x}),(0,L.tZ)(uu,{status:o,stageFiles:function(e){return Z.apply(this,arguments)},restoreFiles:function(e){return w.apply(this,arguments)},onStagedFileClick:n,disabled:p}),E?(0,L.tZ)(eD.u,{tooltip:d>0?"Changes in progress":0===y?"There are no changes to commit.":"You must enter a commit message before you can commit.",children:(0,L.tZ)(eV.zx,{text:_,onClick:x,disabled:E,loading:p,colorway:"primary",iconLeft:(0,L.tZ)(nO.Z,{}),stretch:!0})}):(0,L.tZ)(eV.zx,{text:_,onClick:x,disabled:E,loading:p,colorway:"primary",iconLeft:(0,L.tZ)(nO.Z,{}),stretch:!0})]})}var uE=(0,ee.X)({warning:[J.l0.align.start],header:[J.l0.fontWeight.bold]});function uk(){return(0,L.BX)(L.HY,{children:[(0,L.tZ)(eY.E,{css:uE.warning,icon:(0,L.tZ)(ej.Z,{}),colorway:"warning",text:(0,L.BX)(L.HY,{children:[(0,L.tZ)("span",{css:uE.header,children:"Can't push or pull from GitHub"}),(0,L.tZ)("br",{}),(0,L.tZ)("span",{children:"This Repl has a GitHub repository as a remote, but you are not connected to GitHub."})]})}),(0,L.tZ)(lV,{})]})}var uT=n(35816),uR=(0,ee.X)({text:[J.l0.flex.shrink(1)]});function uD(e){var t=e.date,n=(0,M._)((0,X.useState)(null),2),r=n[0],i=n[1];return((0,X.useEffect)(function(){if(t){var e=function(){var e=new Date,n="just now";e.getTime()-t.getTime()>6e4&&(n=(0,uT.Z)(t,e,{addSuffix:!0})),i(n=n.replace(/minutes?/,"min"))};e();var n=setInterval(e,6e4);return function(){clearInterval(n),i(null)}}},[t]),r)?(0,L.BX)(Q.xv,{css:uR.text,color:"dimmest",variant:"small",multiline:!1,children:["last fetched ",r]}):null}function uI(e){var t=e.hasRemoteMergeConflict,n=e.hasUnpulledCommits,r=e.hasUnpushedCommits,i=e.workTreeDirty,o=[];return i&&n&&o.push("Can't pull: you have uncommitted changes"),t&&(n||r)&&(n&&r?(i||o.push("Warning: pulling will start a merge with conflicts"),o.push("Can't push: unpulled changes must be merged first")):n?i||o.push("Warning: pulling will start a merge with conflicts"):r&&o.push("Can't push: merge conflict with remote")),(0,L.tZ)(L.HY,{children:o.map(function(e){return(0,L.tZ)(eY.E,{text:e,colorway:"warning",icon:(0,L.tZ)(ej.Z,{})},e)})})}var uG=(0,ee.X)({divider:[J.l0.mx(8)]});function uB(e){var t=e.ahead,n=e.behind;if(!t&&!n)return(0,L.tZ)(Q.xv,{color:"dimmest",multiline:!1,children:"Nothing to pull or push"});var r=null,i=null;if(n){var o=(0,eS.Z)("commit",n);r="".concat(n," ").concat(o," to pull")}if(t){var a=(0,eS.Z)("commit",t);i="".concat(t," ").concat(a," to push")}return(0,L.BX)(Q.xv,{color:"dimmer",variant:"small",multiline:!1,children:[r?(0,L.tZ)("span",{children:r}):null,r&&i?(0,L.tZ)("span",{css:uG.divider,children:"•"}):null,i?(0,L.tZ)("span",{children:i}):null]})}var uA=(0,ee.X)({container:[J.l0.flex.grow(1)],branch:[J.l0.mr(4),J.l0.color.foregroundDefault,J.l0.fontWeight.medium,{"&:hover":{textDecoration:"underline"}}],divider:[J.l0.color.foregroundDimmest],text:[J.l0.ml(4),J.l0.color.foregroundDimmest]});function uP(e){var t=e.upstream,n=e.remotes,r=(0,X.useMemo)(function(){return function(e,t){var n=null,r=null;if(e instanceof Map){var i=(0,lB.Tg)(t),o=i[0];if(n=i[1],!o||!n)return null;var a=e.get(o);if(!a)return null;r=lU(a)}else n=t,r=lU(e);return r&&lP(r)?"".concat(r,"/tree/").concat(n):null}(n,t)},[t,n]);return(0,L.BX)(Q.xv,{css:uA.container,variant:"small",multiline:!1,children:[r?(0,L.tZ)("a",{css:uA.branch,href:r,target:"_blank",children:t}):(0,L.tZ)("span",{css:uA.branch,children:t}),(0,L.tZ)("span",{css:uA.divider,children:"•"}),(0,L.tZ)("span",{css:uA.text,children:"upstream"})]})}var uN=(0,ee.X)({container:[J.l0.borderRadius(8)],loading:[J.l0.height(64),eq.p.backgroundPulse(),J.l0.borderRadius(8)],header:[J.l0.py(4),J.l0.px(8),J.l0.rowWithGap(8),J.l0.align.center,J.l0.flex.shrink(1),J.l0.border({color:J.TV.outlineDimmer,direction:"bottom"})],fetch:{border:"none"},body:[J.l0.px(8),J.l0.pt(8),J.l0.pb(12),J.l0.colWithGap(8)],buttons:[J.l0.rowWithGap(8),J.l0.flex.grow(1)],sync:[J.l0.flex.grow(1)],pullPush:[J.l0.flex.row],pull:[J.l0.pr(12),J.l0.borderRadius(8,0,0,8),J.l0.border({color:J.TV.outlineDefault,direction:"right"})],push:[J.l0.borderRadius(0,8,8,0)]});function uU(e){return uL.apply(this,arguments)}function uL(){return(uL=(0,eX._)(function(e){var t,n;return(0,eF.Jh)(this,function(r){switch(r.label){case 0:return t=null,[4,Promise.race([e,new Promise(function(e){return t=setTimeout(function(){lm.$e(function(e){e.setTag("gitPane",!0),lm.Tb(Error("Remote update operation timed out"))}),e({error:lG.aq.TIMEOUT})},9e4)})])];case 1:return n=r.sent(),t&&clearTimeout(t),[2,n]}})})).apply(this,arguments)}function uO(e){var t,n=e.remotes,r=e.gotoPendingState,i=(0,M._)((0,X.useState)(!1),2),o=i[0],a=i[1],l=(0,M._)((0,X.useState)(!1),2),c=l[0],s=l[1],u=(0,M._)((0,X.useState)(!1),2),d=u[0],f=u[1],h=(0,M._)((0,X.useState)(!1),2),p=h[0],m=h[1],v=(0,z.Z)().git,g=(0,lp.Z)((t=(0,eX._)(function(e){var t,n,r,i,o,a,l,c,s,u,d,f,h,p,m,v,g,y;return(0,eF.Jh)(this,function(b){switch(b.label){case 0:return i={upstream:null,hasUnpulledCommits:!1,hasUnpushedCommits:!1,hasRemoteMergeConflict:!1,pullMode:sY.T.FF_ONLY,canPull:!1,canPush:!1,workTreeDirty:!1,needGitHubConnection:!1,ahead:0,behind:0,lastFetched:null},[4,e.getRepositoryState()];case 1:if((o=b.sent()).error)return[2,o];if(a=o.state,o.type!==lR.y5.NORMAL)return[2,{error:lG.aq.INVALID_STATE}];return(a===lR.yG.DIRTY_WORKTREE||a===lR.yG.DIRTY_INDEX)&&(i.workTreeDirty=!0),[4,e.status()];case 2:if((l=b.sent()).error)return[2,l];if(c=l.branch,s=null===(t=l.upstream)||void 0===t?void 0:t.branch,d=null!==(u=null===(n=l.upstream)||void 0===n?void 0:n.ahead)&&void 0!==u?u:0,h=null!==(f=null===(r=l.upstream)||void 0===r?void 0:r.behind)&&void 0!==f?f:0,!c)return[2,{error:lG.aq.HEAD_DETACHED}];if(i.ahead=d,i.behind=h,!s)return[3,7];return i.upstream=s,i.hasUnpulledCommits=h>0,i.hasUnpushedCommits=d>0,[4,e.lastFetched()];case 3:if((p=b.sent()).error)return[2,p];return i.lastFetched=p.lastFetched,[4,e.canMergeBranches(c,s)];case 4:if((m=b.sent()).error)return[2,m];if(m.canMerge||(i.hasRemoteMergeConflict=!0),e.hasProfile(lG.rG.GITHUB))return[3,6];if(!(v=(0,cv.CH)(s)))return[2,{error:lG.aq.INVALID_REFERENCE}];return[4,e.getRemotes()];case 5:if((g=b.sent()).error)return[2,g];if(!(y=g.remotes.get(v)))return[2,{error:lG.aq.INVALID_REFERENCE}];lP(y)&&(i.needGitHubConnection=!0),b.label=6;case 6:i.workTreeDirty||i.needGitHubConnection||(i.canPull=!0),!i.hasUnpushedCommits||i.hasUnpulledCommits||i.needGitHubConnection||(i.canPush=!0),d>0&&(i.pullMode=i.hasRemoteMergeConflict?sY.T.MERGE:sY.T.REBASE),b.label=7;case 7:return[2,(0,eM._)((0,eO._)({},i),{error:null})]}})}),function(e){return t.apply(this,arguments)})),y=l1();if((0,X.useEffect)(function(){(null==g?void 0:g.error)&&y(g.error)},[null==g?void 0:g.error,y]),!g)return(0,L.tZ)(e$.Tg,{css:uN.loading,elevated:!0});if(g.error||!g.upstream)return null;var b=g.upstream,Z=g.hasUnpulledCommits,w=g.hasUnpushedCommits,x=g.hasRemoteMergeConflict,C=g.pullMode,_=g.canPull,S=g.canPush,E=g.workTreeDirty,k=g.needGitHubConnection,T=g.ahead,R=g.behind,D=g.lastFetched;if(k)return(0,L.BX)(e$.Tg,{css:uN.container,elevated:!0,children:[(0,L.BX)(K.G,{css:uN.header,children:[(0,L.tZ)(uP,{upstream:b,remotes:n}),(0,L.tZ)(eV.zx,{css:uN.fetch,text:"Fetch",iconLeft:(0,L.tZ)(ip.Z,{}),disabled:!0,variant:"outlined",size:"small"})]}),(0,L.tZ)(K.G,{css:uN.body,children:(0,L.tZ)(uk,{})})]});var I=o||c||d||p,G=!b||k||I,B=!_||I,A=!S||I,P=!_&&!S||x||I;function N(){return(N=(0,eX._)(function(){var e;return(0,eF.Jh)(this,function(t){switch(t.label){case 0:if(G)return[2];return a(!0),[4,uU(v.fetch())];case 1:return e=t.sent(),v.forceRefresh(),a(!1),e.error?y(e.error):lW("remote-fetched"),[2]}})})).apply(this,arguments)}function U(){return(U=(0,eX._)(function(){var e;return(0,eF.Jh)(this,function(t){switch(t.label){case 0:if(B)return[2];return s(!0),[4,uU(v.pull({mode:C,allowConflicts:!0}))];case 1:return e=t.sent(),s(!1),e.error?y(e.error):(e.hasConflicts&&r(),v.forceRefresh(),lW("upstream-pulled")),[2]}})})).apply(this,arguments)}function O(){return(O=(0,eX._)(function(){var e;return(0,eF.Jh)(this,function(t){switch(t.label){case 0:if(A)return[2];return f(!0),[4,uU(v.push())];case 1:return e=t.sent(),v.forceRefresh(),f(!1),e.error?y(e.error):lW("upstream-pushed"),[2]}})})).apply(this,arguments)}function F(){return(F=(0,eX._)(function(){var e,t;return(0,eF.Jh)(this,function(n){switch(n.label){case 0:if(P)return[2];if(m(!0),!_)return[3,2];return[4,uU(v.pull({mode:C}))];case 1:if((e=n.sent()).error)return y(e.error),m(!1),[2];lW("upstream-pulled"),n.label=2;case 2:if(!S)return[3,4];return[4,v.push()];case 3:if((t=n.sent()).error)return y(t.error),m(!1),[2];lW("upstream-pushed"),n.label=4;case 4:return v.forceRefresh(),m(!1),[2]}})})).apply(this,arguments)}return(0,L.BX)(e$.Tg,{css:uN.container,elevated:!0,children:[(0,L.BX)(K.G,{css:uN.header,children:[(0,L.tZ)(uP,{upstream:b,remotes:n}),(0,L.tZ)(uD,{date:D}),(0,L.tZ)(eV.zx,{css:uN.fetch,text:"Fetch",iconLeft:o?(0,L.tZ)(eR.Z,{}):(0,L.tZ)(ip.Z,{}),onClick:function(){return N.apply(this,arguments)},loading:o,disabled:G,variant:"outlined",size:"small"})]}),(0,L.BX)(K.G,{css:uN.body,children:[(0,L.tZ)(uI,{hasRemoteMergeConflict:x,hasUnpulledCommits:Z,hasUnpushedCommits:w,workTreeDirty:E}),(0,L.tZ)(uB,{ahead:T,behind:R}),(0,L.BX)(K.G,{css:uN.buttons,children:[(0,L.tZ)("div",{css:uN.sync,children:(0,L.tZ)(eD.u,{tooltip:"Pull & push the latest changes",children:(0,L.tZ)(eV.zx,{css:uN.sync,text:"Sync with Remote",iconLeft:p?(0,L.tZ)(eR.Z,{}):(0,L.tZ)(sA.Z,{rotate:90}),onClick:function(){return F.apply(this,arguments)},loading:p,disabled:P,size:"small"})})}),(0,L.BX)(K.G,{css:uN.pullPush,children:[(0,L.tZ)(eV.zx,{css:uN.pull,text:"Pull",iconLeft:c?(0,L.tZ)(eR.Z,{}):(0,L.tZ)(e8.Z,{}),onClick:function(){return U.apply(this,arguments)},loading:c,disabled:B,size:"small"}),(0,L.tZ)(eV.zx,{css:uN.push,text:"Push",iconLeft:d?(0,L.tZ)(eR.Z,{}):(0,L.tZ)(sJ.Z,{}),onClick:function(){return O.apply(this,arguments)},loading:d,disabled:A,size:"small"})]})]})]})]})}var uM=n(59811),uX=n(12834),uF=(0,ee.X)({modalContainer:[J.l0.colWithGap(24)],statusText:[J.l0.display.flex,J.l0.flex.row,J.l0.textAlign.left],settingsButton:[J.l0.reset.button,J.l0.linkStyle,J.l0.fontWeight.medium,J.l0.textAlign.left,J.l0.ml(4)]}),uW=function(e){var t=e.onViewSettingsClick;return(0,L.tZ)("button",{css:uF.settingsButton,onClick:t,children:"Settings view."})};function uH(e){var t,n,r=e.branch,i=e.onViewSettingsClick,o=(0,M._)((0,X.useState)(!1),2),a=o[0],l=o[1],c=(0,M._)((0,X.useState)(!1),2),s=c[0],u=c[1],d=(0,M._)((0,X.useState)(null),2),f=d[0],h=d[1],p=(0,M._)((0,X.useState)(!1),2),m=p[0],v=p[1],g=(0,uX.Z)(),y=l1(),b=(0,z.Z)().git,Z=(0,lp.Z)((t=(0,eX._)(function(e){var t,n,r,i,o,a,l,c;return(0,eF.Jh)(this,function(s){switch(s.label){case 0:return[4,e.isInitialized()];case 1:if((t=s.sent()).error)return y(t.error),lv({context:"publish-branch-button-initialized",gitService:e,result:t}),[2,{remote:null,error:t.error}];if(!t.initialized)return[2,{remote:null,error:null}];return[4,e.getRemotes()];case 2:if((n=s.sent()).error)return lv({context:"publish-branch-button-get-remotes",gitService:e,result:n}),y(n.error),[2,n];return r=n.remotes,i="",(null==r?void 0:r.size)&&(i=r.has("origin")?"origin":r.keys().next().value),[4,e.status()];case 3:if((o=s.sent()).error)return y(o.error),lv({context:"publish-branch-button-status",gitService:e,result:o}),[2,o];if(!(o.branch&&i))return[3,5];return a=(0,lB.C)(o.branch),l="refs/remotes/".concat(i,"/").concat(a),[4,e.branchExists(l)];case 4:(c=s.sent()).error?(lv({context:"publish-branch-button-branch-exists",gitService:e,result:c,data:{upstream:a,fullRemoteRef:l}}),y(c.error)):c.exists&&h("".concat(i,"/").concat(a)),s.label=5;case 5:return[2,{remote:i,error:null}]}})}),function(e){return t.apply(this,arguments)}),[y],{keepStaleResult:!1});if((0,X.useEffect)(function(){function e(){return(e=(0,eX._)(function(){var e;return(0,eF.Jh)(this,function(t){switch(t.label){case 0:if(!(m&&f))return[3,2];return[4,b.setBranchUpstream({upstream:f})];case 1:(e=t.sent()).error&&(lv({context:"publish-branch-button-set-branch-upstream",gitService:b,result:e,data:{upstream:f}}),y(e.error)),g.current&&(v(!1),h(null)),t.label=2;case 2:return[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[b,y,m,f,g]),null==Z?void 0:Z.error)return null;var w=Z?Z.remote:null,x=null===w,C=r.type!==lD.HO.LOCAL||!w||m;function _(){return(_=(0,eX._)(function(){var e;return(0,eF.Jh)(this,function(t){switch(t.label){case 0:if(!w||a)return[2];if(f)return u(!0),[2];return l(!0),[4,b.push({publish:{remote:w}})];case 1:return(e=t.sent()).error?(l(!1),y(e.error),lv({context:"publish-branch-button-push",gitService:b,result:e,data:{remote:w}})):(b.forceRefresh(),lW("branch-published-to-remote")),[2]}})})).apply(this,arguments)}return n=a?"Publishing...":r.type!==lD.HO.LOCAL?"Branch has already been published":x?"Checking if branch can be published...":w?"Publish branch as '".concat(w,"/").concat(r.name,"'"):"No remotes to publish to",(0,L.BX)(L.HY,{children:[f?(0,L.tZ)(iq.u,{isOpen:s,onRequestClose:function(){return u(!1)},children:(0,L.BX)(K.G,{css:uF.modalContainer,children:[(0,L.tZ)(Q.xv,{variant:"headerDefault",children:"Branch already exists"}),(0,L.tZ)(Q.xv,{children:"Upstream branch '".concat(f,"' already exists.\n          To publish the branch, please confirm you would like to set upstream branch to it.")}),(0,L.tZ)(eV.zx,{text:"Set upstream to '".concat(f,"'"),onClick:function(){f&&(v(!0),u(!1))}})]})}):null,x||w?null:(0,L.tZ)(eY.E,{text:(0,L.tZ)(K.G,{css:uF.statusText,children:(0,L.BX)("span",{children:["No remote repositories configured. To publish your changes, add a remote repository in the",(0,L.tZ)(uW,{onViewSettingsClick:i})]})}),colorway:"warning",closable:!1}),(0,L.tZ)(eV.zx,{text:n,iconLeft:x||a?(0,L.tZ)(eR.Z,{}):(0,L.tZ)(uM.Z,{}),onClick:function(){return _.apply(this,arguments)},loading:x||a,disabled:C})]})}var uV=(0,ee.X)({remoteUrl:[{border:"none"},J.l0.height("auto"),J.l0.py(4),J.l0.px(8)]});function uz(e){var t=e.branch,n=e.remotes,r=(0,M._)((0,X.useMemo)(function(){if(t.type===lD.HO.LOCAL)return[null,null,null];var e=n.get(t.remote);if(!e)return[null,null,null];var r=lU(e),i=function(e){var t="string"==typeof e?e:e.fetch;if(lP(t)){var n=(t=lN(t)).split("/");if(n.length<2)return null;var r=n[n.length-2],i=n[n.length-1];return"".concat(r,"/").concat(i)}return null}(e),o=lP(r);return[r,i,o]},[t,n]),3),i=r[0],o=r[1],a=r[2];return i&&o?(0,L.tZ)(oE.Z,{css:uV.remoteUrl,text:o,href:i,target:"_blank",iconLeft:a?(0,L.tZ)(lX.Z,{}):void 0,iconRight:(0,L.tZ)(oT.Z,{}),variant:"outlined",size:"small"}):null}var uj=(0,ee.X)({view:[J.l0.pt(4),J.l0.pb(8),J.l0.px(4),J.l0.colWithGap(8),J.l0.flex.grow(1)],sectionContainer:[J.l0.colWithGap(8)],section:[J.l0.pt(8),J.l0.pb(16),J.l0.px(8),J.l0.colWithGap(8),J.l0.border({color:J.TV.outlineDimmest,direction:"bottom"})],remoteUpdatesHeader:[J.l0.rowWithGap(8),J.l0.align.center,J.l0.justify.spaceBetween],reviewChangesHeader:[J.l0.rowWithGap(8),J.l0.align.center],headerText:[J.l0.fontWeight.medium],switchToBranch:[J.l0.p(4),J.l0.flex.row,J.l0.align.center,J.l0.justify.spaceBetween,J.l0.mt(0),J.l0.mb(0)]});function uq(e){var t,n,r,i,o,a=e.status,l=e.remotes,c=e.branch,s=e.onStagedFileClick,u=e.onViewCommitClick,d=e.onViewSettingsClick,f=e.gotoPendingState,h=e.current,p=void 0!==h&&h,m=p?null==a?void 0:null===(i=a.upstream)||void 0===i?void 0:i.behind:void 0,v=p?null==a?void 0:null===(o=a.upstream)||void 0===o?void 0:o.ahead:void 0,g=(t=l1(),r=(0,lp.Z)((n=(0,eX._)(function(e){var t,n,r,i,o,a,l,s,u;return(0,eF.Jh)(this,function(d){switch(d.label){case 0:return[4,e.isInitialized()];case 1:if((t=d.sent()).error)return lv({context:"use-branch-commits",gitService:e,result:t}),[2,{error:t.error}];if(!t.initialized)return[2,{log:[],onlyRemote:[],onlyLocal:[],error:null}];if(!c)return[2,{error:null}];if(!(!c.tracking||0===m&&0===v))return[3,3];return n=(0,cv.bF)(c,!0),[4,e.log({max:100,revRange:n})];case 2:if((r=d.sent()).error)return lv({context:"use-branch-commits",gitService:e,result:r,data:{branch:c,behind:m,ahead:v,revision:n}}),[2,r];return[2,{log:r.commits,error:null}];case 3:return i=(0,cv.bF)(c),[4,Promise.all([e.log({max:100,revRange:c.name}),e.log({max:100,revRange:"".concat(c.name,"..").concat(i)}),e.log({max:100,revRange:"".concat(i,"..").concat(c.name)})])];case 4:if(o=d.sent(),l=(a=(0,M._)(o,3))[0],s=a[1],u=a[2],l.error)return lv({context:"use-branch-commits-log",gitService:e,result:l,data:{branch:c,behind:m,ahead:v,remoteBranch:i}}),[2,{error:l.error}];if(s.error)return lv({context:"use-branch-commits-only-remote",gitService:e,result:s,data:{branch:c,behind:m,ahead:v,remoteBranch:i}}),[2,{error:s.error}];if(u.error)return lv({context:"use-branch-commits-only-local",gitService:e,result:u,data:{branch:c,behind:m,ahead:v,remoteBranch:i}}),[2,{error:u.error}];return[2,{log:l.commits,onlyRemote:s.commits,onlyLocal:u.commits,error:null}]}})}),function(e){return n.apply(this,arguments)}),[c,m,v]),(0,X.useMemo)(function(){if(!r)return null;if(r.error)return t(r.error),{error:r.error};var e=r.log,n=r.onlyRemote,i=r.onlyLocal;if(!n&&!i)return{log:e,error:null};if(e){var o=new Set;if(n){var a=!0,l=!1,c=void 0;try{for(var s,u=n[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var d=s.value;o.add(d.hash)}}catch(e){l=!0,c=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw c}}}if(i){var f=!0,h=!1,p=void 0;try{for(var m,v=i[Symbol.iterator]();!(f=(m=v.next()).done);f=!0){var g=m.value;o.add(g.hash)}}catch(e){h=!0,p=e}finally{try{f||null==v.return||v.return()}finally{if(h)throw p}}}e=e.filter(function(e){return!o.has(e.hash)})}return{log:e,onlyRemote:n,onlyLocal:i,error:null}},[t,r])),y=!!l&&l.size>0,b=(null==c?void 0:c.type)===lD.HO.LOCAL,Z=(0,X.useMemo)(function(){if(!g||g.error)return[];var e=[],t=g.log,n=void 0===t?[]:t,r=g.onlyRemote,i=void 0===r?[]:r,o=g.onlyLocal,l=void 0===o?[]:o,c=n.length>0,s=i.length>0,d=l.length>0;return s&&(e.push({type:"boundary",text:"Not pulled from remote"}),p&&a&&e.push({type:"button",key:"pull-button",button:(0,L.tZ)(s$,{status:a,gotoPendingState:f})}),e.push.apply(e,(0,e_._)(uY(i,u)))),d&&(e.push({type:"boundary",text:"Not pushed to remote"}),p&&a&&e.push({type:"button",key:"push-button",button:(0,L.tZ)(sK,{status:a})}),e.push.apply(e,(0,e_._)(uY(l,u)))),c&&((s||d)&&e.push({type:"boundary",text:"Up to date with remote"}),e.push.apply(e,(0,e_._)(uY(n,u)))),e},[g,a,p,f,u]);return c?(0,L.BX)(K.G,{css:uj.view,children:[(0,L.BX)(K.G,{css:uj.sectionContainer,children:[b?(0,L.tZ)(K.G,{css:uj.section,children:(0,L.tZ)(uH,{branch:c,onViewSettingsClick:d})}):null,p&&!b&&l&&y?(0,L.BX)(K.G,{css:uj.section,children:[(0,L.BX)(K.G,{css:uj.remoteUpdatesHeader,children:[(0,L.tZ)(Q.xv,{css:uj.headerText,multiline:!1,children:"Remote Updates"}),(0,L.tZ)(uz,{branch:c,remotes:l})]}),(0,L.tZ)(uO,{remotes:l,gotoPendingState:f})]}):null,p&&a?(0,L.BX)(K.G,{css:uj.section,children:[(0,L.tZ)(K.G,{css:uj.reviewChangesHeader,children:(0,L.tZ)(Q.xv,{css:uj.headerText,multiline:!1,children:"Commit"})}),(0,L.tZ)(uS,{status:a,onStagedFileClick:s})]}):null]}),g?(0,L.tZ)(sW,{items:Z}):(0,L.tZ)(sq,{})]}):(0,L.tZ)("div",{children:"No branch"})}function uY(e,t){return e.map(function(e){return{type:"commit",commit:e,onViewCommitClick:t}})}function u$(){return(0,L.BX)(K.G,{children:[(0,L.tZ)(Q.xv,{multiline:!1,children:"Unsupported state: you are in the middle of a cherry-pick."}),(0,L.tZ)(Q.xv,{multiline:!1,children:"Please finish the cherry-pick manually."})]})}var uJ=(0,ee.X)({branch:[ce.gU.nofill,J.l0.py(12),J.l0.px(8),J.l0.colWithGap(2),J.l0.justify.center,J.l0.borderRadius(8),J.l0.flex.shrink(1)],branchMetadata:[J.l0.rowWithGap(8),J.l0.align.center,J.l0.flex.shrink(1)]});function uK(e){var t=e.branch,n=e.current,r=e.onClick;return(0,L.BX)(K.G,{css:uJ.branch,tabIndex:0,role:"button","aria-label":"Switch to branch ".concat((0,cv.bF)(t,!0)),onClick:r,onKeyDown:function(e){("Enter"===e.key||" "===e.key)&&(null==r||r())},children:[(0,L.tZ)(Q.xv,{multiline:!1,children:(0,L.tZ)(cf,{name:t.name,remote:t.type===lD.HO.REMOTE?t.remote:null,current:void 0!==n&&n,onClick:r,icon:!0})}),(0,L.tZ)(uQ,{branch:t})]})}function uQ(e){var t=e.branch;return(0,L.BX)(K.G,{css:uJ.branchMetadata,children:[(0,L.tZ)(ck,{name:t.commit.author.name,email:t.commit.author.email,color:"dimmest",allowPlaceholderAvatar:!0}),(0,L.tZ)(cR.EK,{date:t.commit.author.date,textColor:"dimmest",textVariant:"small"})]})}var u0=(0,ee.X)({expandButton:[{verticalAlign:"middle"},J.l0.justify.spaceBetween],branchListContainer:[J.l0.display.flex],topRow:[J.l0.p(4),J.l0.flex.row,J.l0.align.center,J.l0.justify.spaceBetween],topRowInteractive:[{verticalAlign:"middle"},J.l0.justify.spaceBetween,J.l0.borderRadius(8,8,0,0)],branchList:[J.l0.borderRadius(8)],branchListFoldable:[J.l0.borderRadius(0,0,8,8)]});function u1(e){var t=e.name,n=e.branches,r=e.current,i=void 0===r?null:r,o=e.foldable,a=void 0!==o&&o,l=e.folded,c=e.switchBranch,s=(0,M._)((0,X.useState)(!!a&&void 0!==l&&l),2),u=s[0],d=s[1],f=(0,X.useMemo)(function(){return n.map(function(e){return(0,L.tZ)(uK,{branch:e,current:(0,lD.p3)(e,i),onClick:function(){return c(e)}},(0,cv.Qj)(e))})},[n,i,c]);return u?(0,L.tZ)(eV.zx,{css:u0.expandButton,text:t,iconRight:(0,L.tZ)(aq.Z,{}),onClick:function(){return d(!1)},size:"big"}):a?(0,L.BX)(K.G,{css:u0.branchListContainer,children:[(0,L.tZ)(eV.zx,{css:u0.topRowInteractive,text:t,iconRight:(0,L.tZ)(aY.Z,{}),onClick:function(){return d(!0)},size:"big"}),(0,L.tZ)(e$.Tg,{css:u0.branchListFoldable,elevated:!0,children:f})]}):(0,L.BX)(K.G,{css:u0.branchListContainer,children:[(0,L.tZ)(K.G,{css:u0.topRow,children:(0,L.tZ)(Q.xv,{variant:"subheadDefault",multiline:!1,children:t})}),(0,L.tZ)(e$.Tg,{css:u0.branchList,elevated:!0,children:f})]})}var u2=(0,ee.X)({container:[J.l0.p(8),J.l0.colWithGap(8),J.l0.borderRadius(8)],buttonContainer:[J.l0.rowWithGap(4)],button:[J.l0.flex.grow(1)],inputDisabled:[{opacity:.75}]});function u8(){var e=(0,M._)((0,X.useState)(!0),2),t=e[0],n=e[1],r=(0,M._)((0,X.useState)(""),2),i=r[0],o=r[1],a=(0,M._)((0,X.useState)(!1),2),l=a[0],c=a[1],s=l1(),u=(0,z.Z)().git;function d(){n(!0),o("")}function f(){return h.apply(this,arguments)}function h(){return(h=(0,eX._)(function(){var e;return(0,eF.Jh)(this,function(r){switch(r.label){case 0:if(t||!i||l)return[2];return c(!0),[4,u.createBranch({name:i,checkout:!0})];case 1:return(e=r.sent()).error?(s(e.error),c(!1)):(u.forceRefresh(),c(!1),o(""),n(!0),lW("branch-created")),[2]}})})).apply(this,arguments)}if(t)return(0,L.tZ)(eV.zx,{text:"Create Branch",iconLeft:(0,L.tZ)(i9.Z,{}),onClick:function(){return n(!1)}});var p=!i||!(0,cv.Dc)(i);return(0,L.BX)(e$.Tg,{css:u2.container,elevated:!0,children:[(0,L.tZ)(u4,{value:i,onChange:o,onSubmit:f,onCancel:d,disabled:l}),(0,L.BX)(K.G,{css:u2.buttonContainer,children:[(0,L.tZ)(eV.zx,{css:u2.button,text:"Cancel",onClick:d,disabled:l}),(0,L.tZ)(eV.zx,{css:u2.button,text:"Create Branch",colorway:"primary",iconLeft:(0,L.tZ)(i9.Z,{}),onClick:f,loading:l,disabled:p})]})]})}function u4(e){var t=e.value,n=e.disabled,r=e.onChange,i=e.onSubmit,o=e.onCancel;function a(e){(0,cv.dC)(e)&&(null==r||r(e))}return(0,L.tZ)(tH.II,{value:t,css:n?u2.inputDisabled:void 0,disabled:n,placeholder:"Enter a name for your new branch",onChange:function(e){return a(e.currentTarget.value)},onKeyDown:function(e){return function(e,n){switch(e){case"Enter":null==i||i(),n();break;case"Escape":null==o||o(),n();break;case" ":if(""===t){n();break}a(t+"-"),n()}}(e.key,function(){return e.preventDefault()})},onBlur:function(){""===t&&(null==o||o())},autoFocus:!0})}function u3(e){var t,n,r=e.currentBranch,i=e.switchMode,o=l1(),a=(0,z.Z)().git,l=(0,M._)((0,X.useState)(null),2),c=l[0],s=l[1],u=(0,lp.Z)((t=(0,eX._)(function(e){var t,n,r,i,a,l,c,s,u,d,f,h,p,m,v,g,y,b,Z;return(0,eF.Jh)(this,function(w){switch(w.label){case 0:return[4,e.listBranches()];case 1:if((t=w.sent()).error)return o(t.error),lv({context:"dashboard-view",gitService:e,result:t}),[2,t];return[4,e.findDefaultBranches()];case 2:if((n=w.sent()).error)return o(n.error),[2,n];r=t.branches,i=new Set,a=!0,l=!1,c=void 0;try{for(s=function(){var e=d.value,t=r.find(function(t){return(0,cv.Pi)(t,e)});t&&i.add(t)},u=n.refs[Symbol.iterator]();!(a=(d=u.next()).done);a=!0)s()}catch(e){l=!0,c=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw c}}f=Date.now()-5184e6,h=[],p=[],m=!0,v=!1,g=void 0;try{for(y=r[Symbol.iterator]();!(m=(b=y.next()).done);m=!0)Z=b.value,i.has(Z)||(Z.commit.author.date>f?h.push(Z):p.push(Z))}catch(e){v=!0,g=e}finally{try{m||null==y.return||y.return()}finally{if(v)throw g}}return[2,{active:h,stale:p,important:Array.from(i),error:null}]}})}),function(e){return t.apply(this,arguments)}),[o]),d=(n=(0,eX._)(function(e){var t;return(0,eF.Jh)(this,function(n){switch(n.label){case 0:if(null!==c)return[2];return(0,cv.Pi)(r,e)&&i({mode:w.CURRENT_BRANCH}),s(e),[4,a.switchBranch(e)];case 1:return(t=n.sent()).error?(o(t.error),lv({context:"dashboard-view",gitService:a,result:t,data:{branch:e.name}}),s(null)):(a.forceRefresh(),lW("branch-switched")),[2]}})}),function(e){return n.apply(this,arguments)});if((0,X.useEffect)(function(){null!==c&&(0,cv.Pi)(r,c)&&(s(null),i({mode:w.CURRENT_BRANCH}))},[r,c,i]),!u||null!==c)return(0,L.tZ)(sq,{});if(u.error)return(0,L.tZ)("div",{children:u.error});var f=u.active,h=u.stale,p=u.important;return(0,L.tZ)(K.G,{css:[J.l0.colWithGap(8)],children:(0,L.BX)(K.G,{css:[J.l0.pb(8),J.l0.px(8),J.l0.colWithGap(16)],children:[r?(0,L.BX)(K.G,{css:J.l0.colWithGap(8),children:[(0,L.tZ)(u1,{branches:[r],current:r,name:"Current Branch",switchBranch:d}),(0,L.tZ)(u8,{})]}):null,(0,L.tZ)(Q.xv,{variant:"subheadDefault",multiline:!1,css:uj.switchToBranch,children:"Switch Branch"}),0===p.length?null:(0,L.tZ)(u1,{branches:p,current:r,name:"Important",switchBranch:d,foldable:!0}),0===f.length?null:(0,L.tZ)(u1,{branches:f,current:r,name:"Active",switchBranch:d,foldable:!0}),0===h.length?null:(0,L.tZ)(u1,{branches:h,current:r,name:"Stale",switchBranch:d,foldable:!0,folded:!0})]})})}function u5(){return(0,L.BX)(K.G,{children:[(0,L.tZ)(Q.xv,{multiline:!1,children:"Unsupported state: your HEAD is currently detached."}),(0,L.tZ)(Q.xv,{multiline:!1,children:"Please checkout a branch."})]})}var u6=n(60769),u9=n(42960),u7=(0,ee.X)({container:[J.l0.colWithGap(4)],file:[J.l0.rowWithGap(8),J.l0.align.center],fileLeft:[J.l0.rowWithGap(8),J.l0.flex.grow(1),J.l0.align.center],filePrefix:[J.l0.color.foregroundDimmest]});function de(e){var t=e.files,n=e.uniquePathMap,r=e.onFileClick,i=[];if(t instanceof Map){var o=!0,a=!1,l=void 0;try{for(var c,s=t[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var u=(0,M._)(c.value,2),d=u[0],f=u[1],h=n.get(d);i.push({path:d,prefix:h,resolved:f})}}catch(e){a=!0,l=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}}else{var p=!0,m=!1,v=void 0;try{for(var g,y=t[Symbol.iterator]();!(p=(g=y.next()).done);p=!0){var b=g.value,Z=n.get(b);i.push({path:b,prefix:Z,resolved:!0})}}catch(e){m=!0,v=e}finally{try{p||null==y.return||y.return()}finally{if(m)throw v}}}return(0,L.tZ)(K.G,{css:u7.container,children:i.map(function(e){var t=e.path,n=e.prefix,i=e.resolved;return(0,L.BX)(K.G,{css:u7.file,children:[(0,L.BX)(K.G,{css:u7.fileLeft,children:[(0,L.tZ)(aL.Z,{path:t}),(0,L.tZ)(Q.xv,{multiline:!1,children:(0,L.tZ)(ch,{path:t,prefix:n,onClick:function(){return r(t)}})})]}),i?(0,L.tZ)(nO.Z,{color:J.TV.greenStronger}):(0,L.tZ)(ej.Z,{color:J.TV.orangeStronger})]},t)})})}function dt(e){var t=e.hasConflicts?(0,L.BX)(L.HY,{children:[(0,L.tZ)("span",{css:J.l0.fontWeight.medium,children:"Resolve all conflicts to complete merge."}),(0,L.tZ)("br",{}),(0,L.tZ)("span",{children:"You can't do anything else until the merge has been completed or aborted."})]}):(0,L.BX)(L.HY,{children:[(0,L.tZ)("span",{css:J.l0.fontWeight.medium,children:"You are in the middle of a merge."}),(0,L.tZ)("br",{}),(0,L.tZ)("span",{children:"You can't do anything else until the merge has been completed or aborted. You have no conflicts to resolve, so the merge can be completed without any further action."})]});return(0,L.tZ)(eY.E,{colorway:"warning",icon:(0,L.tZ)(ej.Z,{}),text:t})}var dn=(0,ee.X)({container:[J.l0.rowWithGap(4),J.l0.align.center,J.l0.justify.spaceBetween],left:[{flexBasis:0,flexGrow:1},J.l0.colWithGap(8)],right:{flexBasis:0,flexGrow:1},branch:[J.l0.p(8),J.l0.rowWithGap(4),J.l0.flex.grow(1),J.l0.center,J.l0.borderRadius(8)]});function dr(e){var t,n=e.branch,r=e.refs,i=e.refsAreBranches,o=e.isUpstreamPull;if(!r.length)return null;if(o){var a=(0,M._)((0,lB.Tg)(r[0]),2),l=a[0],c=a[1];l&&c&&(t=(0,L.tZ)(e$.Tg,{css:dn.branch,elevated:!0,children:(0,L.tZ)(cf,{remote:l,name:c,icon:!0,heading:!0})}))}return t||(t=r.map(function(e){return(0,L.tZ)(e$.Tg,{css:dn.branch,elevated:!0,children:(0,L.tZ)(cf,{name:e,icon:!!i||(0,L.tZ)(aj.Z,{size:16}),heading:!0})},e)})),(0,L.BX)(K.G,{css:dn.container,children:[(0,L.tZ)(K.G,{css:dn.left,children:t}),(0,L.tZ)(tz.Z,{size:24,color:J.TV.foregroundDimmest}),(0,L.tZ)(K.G,{css:dn.right,children:(0,L.tZ)(e$.Tg,{css:dn.branch,elevated:!0,children:(0,L.tZ)(cf,{name:n,icon:!0,current:!0,heading:!0})})})]})}var di=(0,ee.X)({container:[J.l0.colWithGap(12),J.l0.pt(16),J.l0.pb(8),J.l0.px(8)],fakePaneHeader:[J.l0.p(8),J.l0.rowWithGap(8),J.l0.backgroundColor.backgroundDefault,J.l0.align.center,{borderBottom:"1px solid ".concat(J.TV.outlineDimmer)}],conflictResolution:[J.l0.colWithGap(16)],listContainer:[J.l0.p(8),J.l0.colWithGap(8),J.l0.borderRadius(8)],list:[J.l0.pb(8),J.l0.colWithGap(8)],listDisabled:[{opacity:.5},J.l0.pb(8),J.l0.colWithGap(8)],listHeader:[J.l0.pb(4),J.l0.flex.grow(1),J.l0.border({color:J.TV.outlineDimmer,direction:"bottom"})],listFiles:[J.l0.px(8)],includeOtherFiles:[{cursor:"pointer",maxWidth:"max-content",userSelect:"none"},J.l0.rowWithGap(8)],buttons:[J.l0.colWithGap(8)]});function da(e){var t,n=e.onFileClick,r=e.gotoPendingState,i=(0,M._)((0,X.useState)(!0),2),o=i[0],a=i[1],l=(0,M._)((0,X.useState)(!1),2),c=l[0],s=l[1],u=(0,M._)((0,X.useState)(!1),2),d=u[0],f=u[1],h=c||d,p=l1(),m=(0,z.Z)().git,v=X.useId(),g=(0,lp.Z)((t=(0,eX._)(function(e){var t,n,r,i,o,a,l,c,s,u,d,f,h,p,m,v,g,y,b,Z;return(0,eF.Jh)(this,function(w){switch(w.label){case 0:return[4,e.status()];case 1:if((t=w.sent()).error)return lv({context:"use-merging-view-state-status",gitService:e,result:t}),[2,t];if(!(n=t.branch))return[2,{error:lG.aq.HEAD_DETACHED}];return[4,e.getConflictingFiles()];case 2:if((r=w.sent()).error)return[2,r];return i=r.files,[4,e.getMergingRefs()];case 3:if((o=w.sent()).error)return lv({context:"use-merging-view-state-merging-refs",gitService:e,result:o,data:{status:t,conflictingFiles:i}}),[2,o];a=o.commits,s=(c=(l=o.branches).length>0)?l:a,u=t.changes.filter(function(e){return!e.unmerged}).map(function(e){return e.path}),d=!0,f=!0,h=!1,p=void 0;try{for(m=i[Symbol.iterator]();!(f=(v=m.next()).done);f=!0)if(!(0,M._)(v.value,2)[1]){d=!1;break}}catch(e){h=!0,p=e}finally{try{f||null==m.return||m.return()}finally{if(h)throw p}}return g=sQ(t.changes.map(function(e){return e.path})),y=i.size>0,b=u.length>0,Z=null!==t.upstream&&1===l.length&&l[0]===t.upstream.branch,[2,{refs:s,branch:n,conflictingFiles:i,otherChangedFiles:u,refsAreBranches:c,allIsResolved:d,uniquePathMap:g,hasConflicts:y,hasOtherChanges:b,isUpstreamPull:Z,error:null}]}})}),function(e){return t.apply(this,arguments)}));if((0,X.useEffect)(function(){(null==g?void 0:g.error)&&p(g.error)},[null==g?void 0:g.error,p]),!g)return(0,L.tZ)(sq,{});if(g.error)return null;var y=g.refs,b=g.branch,Z=g.conflictingFiles,w=g.otherChangedFiles,x=g.refsAreBranches,C=g.allIsResolved,_=g.uniquePathMap,S=g.hasConflicts,E=g.hasOtherChanges,k=g.isUpstreamPull;function T(){return(T=(0,eX._)(function(){var e,t,n,i,a,l,c,u,d,f,v;return(0,eF.Jh)(this,function(g){switch(g.label){case 0:if(!C||h)return[2];s(!0),e=[],t=!0,n=!1,i=void 0;try{for(a=Z.keys()[Symbol.iterator]();!(t=(l=a.next()).done);t=!0)c=l.value,e.push(c)}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return o&&(u=e).push.apply(u,(0,e_._)(w)),[4,m.stageFiles({all:!1})];case 1:if((d=g.sent()).error)return p(d.error),s(!1),[2];return[4,m.stageFiles({add:e})];case 2:if((f=g.sent()).error)return p(f.error),s(!1),[2];return[4,m.mergeContinue()];case 3:if(!(v=g.sent()).error)return[3,5];return[4,m.stageFiles({all:!1})];case 4:return g.sent(),p(v.error),s(!1),[3,6];case 5:r(),m.forceRefresh(),g.label=6;case 6:return[2]}})})).apply(this,arguments)}function R(){return(R=(0,eX._)(function(){var e;return(0,eF.Jh)(this,function(t){switch(t.label){case 0:if(h)return[2];return f(!0),[4,m.mergeAbort()];case 1:return(e=t.sent()).error?(p(e.error),f(!1),lv({context:"merging-view-abort",gitService:m,result:e,data:{branch:b}})):(r(),m.forceRefresh()),[2]}})})).apply(this,arguments)}var D=k?"Complete in-progress pull":"Complete in-progress merge";return S&&(D=k?"Resolve pull conflicts":"Resolve merge conflicts"),(0,L.BX)(K.G,{children:[(0,L.BX)(K.G,{css:di.fakePaneHeader,children:[(0,L.tZ)(u9.Z,{}),(0,L.tZ)(Q.xv,{variant:"subheadDefault",multiline:!1,children:D})]}),(0,L.BX)(K.G,{css:di.container,children:[(0,L.tZ)(dr,{branch:b,refs:y,refsAreBranches:x,isUpstreamPull:k}),(0,L.tZ)(dt,{hasConflicts:S}),(0,L.BX)(e$.Tg,{css:di.listContainer,elevated:!0,children:[(0,L.BX)(K.G,{css:di.list,children:[(0,L.tZ)(K.G,{css:di.listHeader,children:(0,L.tZ)(Q.xv,{css:J.l0.fontWeight.medium,multiline:!1,children:"Conflicting Files"})}),(0,L.tZ)(K.G,{css:di.listFiles,children:S?(0,L.tZ)(de,{files:Z,uniquePathMap:_,onFileClick:n}):(0,L.tZ)(Q.xv,{variant:"small",color:"dimmest",multiline:!1,children:"There are no conflicting files in this merge."})})]}),E?(0,L.BX)(K.G,{css:o?di.list:di.listDisabled,children:[(0,L.tZ)(K.G,{css:di.listHeader,children:(0,L.tZ)(Q.xv,{css:J.l0.fontWeight.medium,multiline:!1,children:"Other Changed Files"})}),(0,L.tZ)(K.G,{css:di.listFiles,children:(0,L.tZ)(de,{files:w,uniquePathMap:_,onFileClick:n})})]}):null]}),(0,L.BX)(K.G,{css:di.includeOtherFiles,tag:"label",children:[(0,L.tZ)(u6.X,{id:v,checked:o,onChange:function(e){return a(e.target.checked)}}),(0,L.tZ)(Q.xv,{multiline:!1,children:"Include other changed files in commit"})]}),(0,L.BX)(K.G,{css:di.buttons,children:[(0,L.tZ)(eV.zx,{text:k?"Complete pull":"Complete merge and commit",colorway:"primary",iconLeft:c?(0,L.tZ)(eR.Z,{}):(0,L.tZ)(u9.Z,{}),disabled:!C||h,loading:c,onClick:function(){return T.apply(this,arguments)}}),(0,L.tZ)(eV.zx,{text:k?"Abort pull":"Abort merge",colorway:"negative",iconLeft:d?(0,L.tZ)(eR.Z,{}):(0,L.tZ)(un.Z,{}),disabled:h,loading:d,onClick:function(){return R.apply(this,arguments)}})]})]})]})}var dl=(0,ee.X)({checkboxLabel:J.l0.rowWithGap(8)});function dc(){var e=(0,X.useId)(),t=(0,M._)((0,X.useState)(!0),2),n=t[0],r=t[1],i=(0,M._)((0,X.useState)(!1),2),o=i[0],a=i[1],l=l1(),c=(0,z.Z)().git;function s(){return(s=(0,eX._)(function(){var e;return(0,eF.Jh)(this,function(t){switch(t.label){case 0:if(o)return[2];return a(!0),[4,c.init({initialCommit:n,includeAllInitialFiles:!0})];case 1:return(e=t.sent()).error?(a(!1),l(e.error)):(c.forceRefresh(),lW("repository-initialized")),[2]}})})).apply(this,arguments)}return(0,L.BX)(L.HY,{children:[(0,L.BX)(K.G,{css:dl.checkboxLabel,tag:"label",children:[(0,L.tZ)(u6.X,{id:e,checked:n,onChange:function(e){return r(e.target.checked)}}),(0,L.tZ)(Q.xv,{multiline:!1,children:"Create initial commit with all changes"})]}),(0,L.tZ)(eV.zx,{text:o?"Initializing...":"Initialize Git Repository",iconLeft:o?(0,L.tZ)(eR.Z,{}):(0,L.tZ)(lT.Z,{}),colorway:"primary",loading:o,onClick:function(){return s.apply(this,arguments)}})]})}var ds=(0,ee.X)({container:[J.l0.height("100%"),J.l0.p(16),J.l0.colWithGap(16),J.l0.center],imageTagline:[J.l0.colWithGap(16),J.l0.center,J.l0.flex.shrink(1)]});function du(){return(0,L.BX)(K.G,{css:ds.container,children:[(0,L.BX)(K.G,{css:ds.imageTagline,children:[(0,L.tZ)(ob.Z,{alt:"A potted plant morphing into a branching graph like structure",src:"/public/images/git/git_uninitialized_art.svg",height:300,width:280,objectFit:"contain",priority:!0}),(0,L.tZ)(Q.xv,{variant:"subheadDefault",multiline:!1,children:"Version control for your Repl."})]}),(0,L.tZ)(dc,{})]})}function dd(){return(0,L.BX)(K.G,{children:[(0,L.tZ)(Q.xv,{multiline:!1,children:"Unsupported state: you are in the middle of a rebase."}),(0,L.tZ)(Q.xv,{multiline:!1,children:"Please finish the rebase manually."})]})}function df(){return(0,L.BX)(K.G,{children:[(0,L.tZ)(Q.xv,{multiline:!1,children:"Unsupported state: you are in the middle of a revert."}),(0,L.tZ)(Q.xv,{multiline:!1,children:"Please finish the revert manually."})]})}var dh=n(56050),dp=n(85195),dm=(0,ee.X)({gitProfileTitle:[J.l0.rowWithGap(8),J.l0.align.center]});function dv(e){var t=e.username,n=e.avatar;return(0,L.BX)(K.G,{css:dm.gitProfileTitle,children:[(0,L.tZ)(cg.q,{src:null!=n?n:"/images/evalbot/evalbot_24",username:t}),(0,L.tZ)(Q.xv,{variant:"subheadDefault",multiline:!1,children:t})]})}var dg=n(94106),dy=(0,ee.X)({list:{"> div:first-child":J.l0.borderRadius(8,8,0,0),"> div:last-child":[J.l0.borderRadius(0,0,8,8),{border:"none"}]},profile:[ce.gU.filled,J.l0.flex.row,J.l0.justify.spaceBetween,J.l0.p(12),J.l0.borderRadius(0),J.l0.border({color:J.TV.outlineDefault,direction:"bottom"})],information:[J.l0.colWithGap(4),J.l0.flex.shrink(1)],informationRow:[J.l0.rowWithGap(8),J.l0.align.center],email:[J.l0.flex.shrink(1)],connectToGithubContainer:[J.l0.colWithGap(4),J.l0.p(12),J.l0.backgroundColor.backgroundHigher],divider:[J.l0.backgroundColor.outlineDefault],connectToGitHubTitle:[J.l0.rowWithGap(4),J.l0.align.center],notConnectedText:[J.l0.pb(4)],settingsButton:{background:"transparent",border:"none","&:hover":{textDecoration:"underline"}},radio:{pointerEvents:"none"}});function db(e){var t=e.profiles,n=e.current,r=e.showConnectToGithub,i=e.onSelectProvider,o=(0,dg.useRouter)(),a=(0,rL.Vg)(o),l=X.useId();return(0,L.BX)(dp.E,{name:l,css:dy.list,value:null!=n?n:"",children:[t.map(function(e){t=e.provider===lG.rG.GITHUB?"GitHub":"Default Profile";var t,r=void 0;return e.provider===lG.rG.GITHUB&&(r=a?"/mobile/auth/github/app_permissions":"/auth/github/app_permissions?close=1"),(0,L.tZ)(dZ,{profile:e,providerName:t,current:e.provider===n,onSelectProvider:i,settingsURL:r},e.provider)}),r?(0,L.BX)(K.G,{css:dy.connectToGithubContainer,children:[(0,L.tZ)(K.G,{css:dy.connectToGitHubTitle,children:(0,L.tZ)(dv,{username:"GitHub Account"})}),(0,L.tZ)(Q.xv,{color:"dimmest",css:dy.notConnectedText,multiline:!1,children:"Your GitHub account is not connected."}),(0,L.tZ)(lV,{})]}):null]})}function dZ(e){var t=e.profile,n=e.current,r=e.providerName,i=e.settingsURL,o=e.onSelectProvider,a=t.provider,l=t.username,c=t.email,s=t.avatar,u=X.useId();return(0,L.BX)(K.G,{onClick:function(){return o(a)},css:dy.profile,children:[(0,L.BX)(K.G,{css:dy.information,children:[(0,L.BX)(K.G,{css:dy.informationRow,children:[(0,L.tZ)(dv,{username:l,avatar:s}),i?(0,L.tZ)(oE.Z,{css:dy.settingsButton,text:"".concat(r," Settings"),iconRight:(0,L.tZ)(oT.Z,{}),href:i,target:"_blank",variant:"outlined",size:"small"}):(0,L.tZ)(Q.xv,{color:"dimmest",variant:"small",multiline:!1,children:r})]}),(0,L.tZ)(Q.xv,{color:"dimmest",css:dy.email,multiline:!1,children:c})]}),(0,L.tZ)(dp.Y,{css:dy.radio,id:u,checked:n,value:a})]})}var dw=(0,ee.X)({profileContainer:[J.l0.flex.column]});function dx(){var e,t=(0,z.Z)().git,n=(0,lp.Z)((e=(0,eX._)(function(e){var t,n;return(0,eF.Jh)(this,function(r){return t=e.getCurrentProfile(),[2,{profiles:e.getProfiles(),current:null!==(n=null==t?void 0:t.provider)&&void 0!==n?n:null,hasGitHub:!e.hasProfile(lG.rG.GITHUB),error:null}]})}),function(t){return e.apply(this,arguments)}));if(!n)return null;if(null!==n.error)return lv({context:"git-profiles",gitService:t,result:{error:n.error}}),null;var r=n.profiles,i=n.current,o=n.hasGitHub;return(0,L.tZ)(K.G,{css:dw.profileContainer,children:(0,L.tZ)(db,{profiles:r,current:i,showConnectToGithub:o,onSelectProvider:function(e){t.setCurrentProfile(e),e===lG.rG.REPLIT_DEFAULT?lW("profile-changed",{profile:"replit"}):e===lG.rG.GITHUB&&lW("profile-changed",{profile:"github"})}})})}var dC=n(39390);function d_(){var e=(0,nd._)(["\n  query GithubRemoteConfigRepl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        description\n        isPrivate\n        slug\n        url\n      }\n    }\n  }\n"]);return d_=function(){return e},e}function dS(){var e=(0,nd._)(['\n  query GithubRemoteConfigUser {\n    currentUser {\n      ... on CurrentUser {\n        id\n        gitHubInfo {\n          accessToken\n        }\n        repositories(count: 1, after: "0") {\n          ... on RepositoryConnection {\n            items {\n              id\n            }\n          }\n        }\n      }\n    }\n  }\n']);return dS=function(){return e},e}function dE(){var e=(0,nd._)(["\n  mutation GithubRemoteConfigCreateGithubRepo($input: CreateGithubRepoInput!) {\n    createGithubRepo(input: $input) {\n      ... on CreateGithubRepoResult {\n        remoteUrl\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return dE=function(){return e},e}var dk={},dT=(0,nf.Ps)(d_());dS();var dR=(0,nf.Ps)(dE()),dD=(0,ee.X)({errorText:[J.l0.color.accentNegativeStronger,J.l0.pl(4)]});function dI(e){var t,n,r,i,o=e.remoteName,a=e.updateRemote,l=(0,nL.Z)().showConfirm,c=(0,z.Z)().git,s=(0,ak.Z)(),u=lL(),d=(0,r1.U)(),f=(0,nu.Z)(),h=(0,X.useRef)(null),p=(0,X.useRef)(null),m=(0,M._)((0,X.useState)(),2),v=m[0],g=m[1],y=(t=(0,eO._)({},dk,{variables:{replId:f}}),nh.a(dT,t)).data,b=(null==y?void 0:y.repl.__typename)==="Repl"?y.repl:{slug:void 0,description:void 0,isPrivate:void 0,url:void 0},Z=b.slug,w=b.description,x=b.isPrivate,C=b.url,_=(0,M._)((n=(0,eO._)({},dk,void 0),nS.D(dR,n)),2),S=_[0],E=_[1].loading,k=(0,lM.v)({onAuth:function(){lW("github-user-connected")}}),T=(0,M._)((0,X.useState)(null==x||x),2),R=T[0],D=T[1],I=(0,M._)((0,X.useState)(Z),2),G=I[0],B=I[1],A=(0,M._)((0,X.useState)(),2),P=A[0],N=A[1],U=(0,M._)((0,X.useState)(null!=w?w:C&&"Repository for https://replit.com".concat(C)),2),O=U[0],F=U[1],W=(0,M._)((0,X.useState)(),2),H=W[0],V=W[1],j=function(){N(void 0),V(void 0),g(void 0)},q=(r=(0,eX._)(function(e){var t,n,r;return(0,eF.Jh)(this,function(i){switch(i.label){case 0:return[4,c.getRemotes()];case 1:if((t=i.sent()).error)return g("Error finding current remotes, ".concat(t.error)),[2];if(!t.remotes.has(o))return[3,3];return[4,c.setRemoteURL({remote:o,url:e})];case 2:if((n=i.sent()).error)return g("Error (".concat(n.error,") setting ").concat(o," to use ").concat(e," as a remote.")),[2];return a(e),lW("remote-edited"),[2];case 3:return[4,c.addRemote({name:o,url:e})];case 4:if((r=i.sent()).error)return g("Error (".concat(r.error,") adding ").concat(o," ").concat(e," as a remote.")),[2];return a(e),lW("remote-added"),[2]}})}),function(e){return r.apply(this,arguments)}),Y=(i=(0,eX._)(function(){var e,t,n,r;return(0,eF.Jh)(this,function(i){switch(i.label){case 0:if(j(),!G)return[2];if(!(0,cv.GE)(G))return N("Invalid remote name."),[2];return[4,S({variables:{input:{name:G,description:null!=w?w:null,homepage:"replit.com".concat(C),isPrivate:R,ownerType:i2.xJ.User}}})];case 1:if((null===(e=(r=i.sent()).data)||void 0===e?void 0:e.createGithubRepo.__typename)==="UnauthorizedError"||(null===(t=r.data)||void 0===t?void 0:t.createGithubRepo.__typename)==="UserError")return g(r.data.createGithubRepo.message),[2];return(null===(n=r.data)||void 0===n?void 0:n.createGithubRepo.__typename)==="CreateGithubRepoResult"&&(q(r.data.createGithubRepo.remoteUrl),lW("github-repository-published"),l("Created repository on Github")),[2]}})}),function(){return i.apply(this,arguments)});return u?(0,L.BX)(K.G,{children:[(0,L.tZ)(Q.xv,{color:"dimmest",multiline:!1,children:"Repository name"}),(0,L.tZ)(tH.II,{ref:h,placeholder:"Enter repository name",value:G,onChange:function(e){N(void 0),B(e.target.value)},onKeyDown:function(e){if("Enter"===e.key){var t;e.preventDefault(),null===(t=p.current)||void 0===t||t.focus()}}}),(0,L.tZ)(Q.xv,{css:dD.errorText,multiline:!1,children:P}),(0,L.tZ)(dh.Z,{height:1}),(0,L.tZ)(Q.xv,{color:"dimmest",multiline:!1,children:"Repository description"}),(0,L.tZ)(tH.B,{ref:p,maxLength:350,name:"Repository description",placeholder:"Enter repository description",value:null!=O?O:void 0,onChange:function(e){V(void 0),F(e.target.value)}}),(0,L.tZ)(Q.xv,{css:dD.errorText,multiline:!1,children:H}),(0,L.tZ)(dh.Z,{height:1}),(0,L.tZ)(Q.xv,{color:"dimmest",multiline:!1,children:"Privacy"}),(0,L.BX)(li.hE,{tag:"fieldset",id:d("privacy"),name:d("privacy"),value:R,onChange:function(e){return D(e)},row:!0,css:[J.l0.width("100%")],children:[(0,L.tZ)(li.rK,{id:d("false"),value:!1,text:"Public",icon:(0,L.tZ)(dC.Z,{})}),(0,L.tZ)(li.rK,{id:d("true"),value:!0,text:"Private",icon:(0,L.tZ)(ey.Z,{})})]}),(0,L.tZ)(dh.Z,{height:2}),(0,L.tZ)(eV.zx,{text:E?"Creating Repository on GitHub…":"Create Repository on GitHub",colorway:"primary",iconLeft:(0,L.tZ)(lX.Z,{}),onClick:Y,loading:E}),v?(0,L.tZ)(Q.xv,{css:dD.errorText,maxLines:2,multiline:!1,children:v}):null]}):s?(0,L.tZ)(K.G,{children:(0,L.tZ)(eV.zx,{colorway:"primary",iconLeft:(0,L.tZ)(lX.Z,{}),text:"Open Account page to connect to GitHub",onClick:function(){lH.X.openExternalUrl("/account#connected-services")}})}):(0,L.tZ)(K.G,{children:(0,L.tZ)(eV.zx,{colorway:"primary",iconLeft:(0,L.tZ)(lX.Z,{}),text:"Connect to GitHub",onClick:k})})}var dG=(0,no.iv)(J.l0.rowWithGap(4)),dB=(0,no.iv)(J.l0.flex.growAndShrink(1)),dA=(0,no.iv)(J.l0.color.accentNegativeStronger,J.l0.pl(4));function dP(e){var t,n=e.initialRemoteUrl,r=e.remoteName,i=e.updateRemote,o=(0,z.Z)().git,a=(0,M._)((0,X.useState)(),2),l=a[0],c=a[1];(0,X.useEffect)(function(){c(void 0)},[n]);var s=(0,M._)((0,X.useState)(),2),u=s[0],d=s[1],f=(0,M._)((0,X.useState)(!1),2),h=f[0],p=f[1],m=(t=(0,eX._)(function(){var e,t,n;return(0,eF.Jh)(this,function(a){switch(a.label){case 0:if(a.trys.push([0,5,6,7]),!l)return[2];if(p(!0),!(0,cv.LY)(l))throw Error("Invalid remote url.");return[4,o.getRemotes()];case 1:if((e=a.sent()).error)throw Error("Error finding current remotes, ".concat(e.error));if(!e.remotes.has(r))return[3,3];return[4,o.setRemoteURL({remote:r,url:l})];case 2:if((t=a.sent()).error)throw lv({context:"remote-input",gitService:o,result:t,data:{remote:r,url:l}}),Error("Error (".concat(t.error,") setting ").concat(r," to use ").concat(l," as a remote."));return lW("remote-edited"),i(l),[2];case 3:return[4,o.addRemote({name:r,url:l})];case 4:if((n=a.sent()).error)throw lv({context:"remote-input",gitService:o,result:n,data:{remote:r,url:l}}),Error("Error (".concat(n.error,") adding ").concat(r," ").concat(l," as a remote."));return lW("remote-added"),[3,7];case 5:return d(a.sent().message),[3,7];case 6:return p(!1),[7];case 7:return[2]}})}),function(){return t.apply(this,arguments)});return(0,L.BX)(K.G,{children:[(0,L.tZ)(tH.II,{name:"Remote URL",placeholder:"Enter Remote URL",value:null!=l?l:n,autoComplete:"off",autoCorrect:"off",onChange:function(e){d(void 0),c(e.target.value)},inputMode:"url","aria-label":"Remote URL",onKeyDown:function(e){"Enter"===e.key&&m()}}),u?(0,L.tZ)(Q.xv,{variant:"small",css:dA,multiline:!1,children:u}):null,l&&l!==n?(0,L.BX)(L.HY,{children:[(0,L.tZ)(dh.Z,{height:1}),(0,L.BX)(K.G,{css:dG,children:[(0,L.tZ)(eV.zx,{css:dB,text:"Cancel",iconLeft:(0,L.tZ)(tw.Z,{}),onClick:function(){return c(void 0)}}),(0,L.tZ)(eV.zx,{css:dB,text:h?"Saving…":"Save",loading:h,colorway:"primary",iconLeft:(0,L.tZ)(nO.Z,{}),onClick:m})]})]}):null]})}var dN=(0,no.iv)(J.l0.border({width:1,color:J.TV.outlineDimmer}),J.l0.borderRadius(8)),dU=(0,no.iv)(ce.gU.filled,J.l0.flex.row,J.l0.justify.spaceBetween,J.l0.align.center,J.l0.px(8),J.l0.py(4),J.l0.borderRadius(8,8,0,0)),dL=(0,no.iv)(J.l0.borderRadius(8,8,0,0)),dO=(0,no.iv)(J.l0.borderRadius(8)),dM=(0,no.iv)(J.l0.p(8)),dX=(0,no.iv)(J.l0.flex.growAndShrink(1));function dF(e){var t=e.title,n=e.expanded,r=e.content,i=e.onClick;return(0,L.BX)(K.G,{css:dN,children:[(0,L.BX)(K.G,{css:[dU,n?dL:dO],onClick:i,children:[(0,L.tZ)(K.G,{css:dX,children:(0,L.tZ)(Q.xv,{variant:"subheadDefault",multiline:!1,children:t})}),n?(0,L.tZ)(aY.Z,{size:20}):(0,L.tZ)(aq.Z,{size:20})]}),n?(0,L.tZ)(K.G,{css:dM,children:r}):null]})}var dW="origin";function dH(){var e,t=(0,lp.Z)((e=(0,eX._)(function(e){var t,n,r,i;return(0,eF.Jh)(this,function(o){switch(o.label){case 0:return[4,e.getRemotes()];case 1:if((t=o.sent()).error)return lv({context:"remote-config",gitService:e,result:t}),[2,{url:void 0,name:dW,error:t.error}];if(!(r=(0,M._)(null!==(n=t.remotes.values())&&void 0!==n?n:void 0,1)[0]))return[2,{url:void 0,name:dW,error:null}];return[2,{url:r.push||r.fetch,name:null!==(i=r.name)&&void 0!==i?i:dW,error:null}]}})}),function(t){return e.apply(this,arguments)}));return null==t?(0,L.BX)(K.G,{css:J.l0.center,children:[(0,L.tZ)(Q.xv,{color:"dimmest",multiline:!1,children:"Loading remote information."}),(0,L.tZ)(sq,{})]}):(null==t?void 0:t.error)?null:(0,L.tZ)(dV,{initialRemoteUrl:null==t?void 0:t.url,remoteName:null==t?void 0:t.name})}function dV(e){var t=e.initialRemoteUrl,n=e.remoteName,r=(0,M._)((0,X.useState)(t),2),i=r[0],o=r[1],a=(0,M._)((0,X.useState)(""===t||void 0===t?0:void 0),2),l=a[0],c=a[1],s=function(e){o(e)};return(0,L.BX)(K.G,{children:[(0,L.tZ)(Q.xv,{variant:"subheadDefault",multiline:!1,children:"Remote"}),(0,L.tZ)(dh.Z,{height:1}),(0,L.tZ)(dP,{remoteName:n,initialRemoteUrl:i,updateRemote:s}),(0,L.tZ)(dh.Z,{height:2}),(0,L.tZ)(dF,{title:"GitHub",expanded:0===l,onClick:function(){return c(function(e){return 0===e?void 0:0})},content:(0,L.tZ)(dI,{remoteName:n,updateRemote:s})})]})}(s=C||(C={}))[s.GitHub=0]="GitHub";var dz=(0,no.iv)(J.l0.px(16));function dj(){return(0,L.BX)(K.G,{css:dz,children:[(0,L.tZ)(dh.Z,{height:2}),(0,L.tZ)(dH,{}),(0,L.tZ)(dh.Z,{height:2}),(0,L.tZ)(dq,{})]})}function dq(){return(0,L.BX)(K.G,{children:[(0,L.tZ)(Q.xv,{variant:"subheadDefault",multiline:!1,children:"Commit author"}),(0,L.tZ)(dh.Z,{height:1}),(0,L.tZ)(dx,{})]})}var dY=(0,ee.X)({container:[J.l0.colWithGap(16),J.l0.p(8),J.l0.pt(16)],fakePaneHeader:[J.l0.px(8),J.l0.py(4),J.l0.rowWithGap(8),J.l0.backgroundColor.backgroundDefault,J.l0.align.center,{borderBottom:"1px solid ".concat(J.TV.outlineDimmer)}]});function d$(e){var t=e.onFileClick,n=e.status;return(0,L.BX)(K.G,{children:[(0,L.tZ)(dJ,{}),(0,L.BX)(K.G,{css:dY.container,children:[(0,L.tZ)(eY.E,{colorway:"orange",icon:(0,L.tZ)(ej.Z,{}),text:"Your current branch doesn't have any commits. You need to make an initial commit before continuing."}),(0,L.BX)(K.G,{css:uj.section,children:[(0,L.tZ)(K.G,{css:uj.reviewChangesHeader,children:(0,L.tZ)(Q.xv,{css:uj.headerText,multiline:!1,children:"Commit"})}),(0,L.tZ)(uS,{status:n,onStagedFileClick:t,defaultMessage:"Initial commit"})]})]})]})}function dJ(){var e,t=l1(),n=(0,lp.Z)((e=(0,eX._)(function(e){var n;return(0,eF.Jh)(this,function(r){switch(r.label){case 0:return[4,e.status()];case 1:return(n=r.sent()).error&&(lv({context:"unborn-branch-view-status",gitService:e,result:n}),t(n.error)),[2,n]}})}),function(t){return e.apply(this,arguments)}),[t]);return(null==n?void 0:n.error)?null:(0,L.tZ)(K.G,{css:dY.fakePaneHeader,children:(null==n?void 0:n.branch)?(0,L.tZ)(cf,{name:n.branch,current:!0,heading:!0}):null})}function dK(e){var t=e.error;return(0,L.BX)(K.G,{children:[(0,L.tZ)(Q.xv,{multiline:!1,children:"Failed to start the Git pane."}),(0,L.BX)(Q.xv,{multiline:!1,children:["Error: ",t]})]})}var dQ=function(e){var t,n=(0,lp.Z)((t=(0,eX._)(function(t){var n,r,i;return(0,eF.Jh)(this,function(o){switch(o.label){case 0:return[4,t.isInitialized()];case 1:if((n=o.sent()).error)return[2,{error:n.error}];if(!n.initialized)return[2,{error:lG.aq.NOT_INITIALIZED}];return[4,t.log({max:1,revRange:e})];case 2:if((r=o.sent()).error)return[2,{error:r.error}];if(0===r.commits.length)return[2,{error:lG.aq.NO_COMMITS}];return[2,{commit:null!==(i=r.commits[0])&&void 0!==i?i:null,error:null}]}})}),function(e){return t.apply(this,arguments)}),[e]);return(0,X.useMemo)(function(){return n?n.error?{error:n.error}:n:null},[n])},d0=function(e){var t=e.source,n=e.target;return(0,L.tZ)("span",{children:n?(0,L.BX)(L.HY,{children:["Branch ",(0,L.tZ)(cf,{name:t})," into ",(0,L.tZ)(cf,{name:n})," "]}):(0,L.BX)(L.HY,{children:["Branch ",(0,L.tZ)(cf,{name:t})]})})},d1=(0,ee.X)({markerContainer:[J.l0.display.inlineFlex,J.l0.mr(4)]}),d2=function(e){var t=e.merge,n=e.revert,r=e.subject,i=e.onViewCommitClick;return(0,L.BX)(Q.h4,{level:2,variant:"subheadDefault",multiline:!0,children:[t?(0,L.BX)(L.HY,{children:[(0,L.tZ)("span",{css:d1.markerContainer,children:(0,L.tZ)(si,{type:"merge"})}),(0,L.tZ)(cl,{text:"merged"})," "]}):null,(null==t?void 0:t.type)==="pull-request"?(0,L.BX)(L.HY,{children:["PR ",(0,L.tZ)(cc,{id:t.id,hash:!0})," ",(null==n?void 0:n.pr)?(0,L.BX)(L.HY,{children:[(0,L.tZ)(ca,{text:"reverts"})," ",(0,L.tZ)(cc,{id:n.pr,hash:!0})]}):null," - "]}):null,(null==t?void 0:t.type)==="branch"?(0,L.BX)(L.HY,{children:[(0,L.tZ)(d0,{source:t.source,target:t.target})," -"," "]}):null,n&&!t?(0,L.BX)(L.HY,{children:[(0,L.tZ)("span",{css:d1.markerContainer,children:(0,L.tZ)(si,{type:"revert"})}),(0,L.tZ)(ca,{text:"reverted"})," ",(0,L.tZ)("button",{css:[J.l0.reset.button,J.l0.linkStyle,J.l0.fontWeight.medium],onClick:function(){(null==n?void 0:n.hash)!==void 0&&i(n.hash)},children:n.hash.slice(0,7)})," - "]}):null,(0,L.tZ)(cu,{subject:r})]})},d8=(0,ee.X)({metaContainer:[J.l0.rowWithGap(4),J.l0.align.center,J.l0.flex.wrap]}),d4=function(e){var t=e.author,n=e.committer,r=sS(n,t),i=sE(n.date,t.date);return(0,L.BX)(K.G,{css:d8.metaContainer,children:[r&&i?(0,L.BX)(L.HY,{children:[(0,L.tZ)(ck,{name:t.name,email:t.email,color:"dimmer",allowPlaceholderAvatar:!0,small:!0}),(0,L.tZ)(Q.xv,{variant:"small",children:"authored"}),(0,L.tZ)(cR.EK,{date:t.date,textColor:"dimmest",textVariant:"small"}),(0,L.tZ)(Q.xv,{variant:"small",children:"and"})]}):null,r&&!i?(0,L.BX)(L.HY,{children:[(0,L.tZ)(ck,{name:t.name,email:t.email,color:"dimmer",allowPlaceholderAvatar:!0,small:!0}),(0,L.tZ)(Q.xv,{variant:"small",children:"authored"}),(0,L.tZ)(Q.xv,{variant:"small",children:"and"})]}):null,(0,L.tZ)(ck,{name:n.name,email:n.email,color:"dimmer",allowPlaceholderAvatar:!0,small:!0}),!r&&i?(0,L.BX)(L.HY,{children:[(0,L.tZ)(Q.xv,{variant:"small",children:"authored "}),(0,L.tZ)(cR.EK,{date:t.date,textColor:"dimmest",textVariant:"small"}),(0,L.tZ)(Q.xv,{variant:"small",children:"and "})]}):null,(0,L.tZ)(Q.xv,{variant:"small",children:"committed"}),(0,L.tZ)(cR.EK,{date:n.date,textColor:"dimmest",textVariant:"small"})]})},d3=(0,ee.X)({dullText:[J.l0.color.foregroundDimmest],tooltipContainer:[J.l0.display.inlineBlock]}),d5=function(e){var t=e.onViewCommitClick,n=e.hash;return(0,L.tZ)("span",{css:d3.tooltipContainer,children:(0,L.tZ)(eD.u,{tooltip:"View commit",children:(0,L.tZ)("button",{css:[J.l0.reset.button,J.l0.linkStyle,J.l0.fontWeight.medium],onClick:function(){return t(n)},children:n.slice(0,7)})})})},d6=function(e){var t=e.parents,n=e.grafted,r=e.onViewCommitClick;return(0,L.BX)(Q.xv,{variant:"small",children:[(0,L.BX)("span",{css:d3.dullText,children:[n?"Grafted with ":null,t.length," ",(0,eS.Z)("parent",t.length)," "]}),0===t.length?null:t.map(function(e,n){return(0,L.BX)(X.Fragment,{children:[(0,L.tZ)(d5,{hash:e,onViewCommitClick:r}),n===t.length-1?"":(0,L.tZ)("span",{css:d3.dullText,children:", "})]},e)})]})},d9=[{"& > span:first-child":[J.l0.flex.grow(1),J.l0.textAlign.left]},{"& > span":[J.l0.flex.shrink(1)]}],d7=(0,ee.X)({container:[J.l0.colWithGap(16)],splitOrUnisonContainer:[J.l0.colWithGap(8),J.l0.display.flex,J.l0.flex.row,J.l0.flex.wrap,J.l0.align.center,J.l0.justify.spaceBetween],emphasizedText:[J.l0.fontWeight.medium],buttonFolded:[d9,J.l0.height("auto"),J.l0.py(8),J.l0.fontWeight.medium],buttonUnfolded:[d9,J.l0.height("auto"),J.l0.py(8),J.l0.fontWeight.medium,J.l0.borderRadius(8,8,0,0)],buttonGroupItem:[J.l0.width(64),J.l0.height(32)],textContainer:[J.l0.mt(8),J.l0.overflow("break-all")]}),fe=function(e){var t=e.children;return(0,L.tZ)(K.G,{css:d7.splitOrUnisonContainer,children:t})},ft=function(e){var t=e.value,n=e.onChange;return(0,L.BX)(li.hE,{name:"SplitOrUnifiedDiff",value:t,onChange:n,row:!0,children:[(0,L.tZ)(K.G,{css:d7.buttonGroupItem,children:(0,L.tZ)(li.rK,{value:"Unified",text:"Unified",id:"SplitOrUnifiedDiffUnified"})}),(0,L.tZ)(K.G,{css:d7.buttonGroupItem,children:(0,L.tZ)(li.rK,{value:"Split",text:"Split",id:"SplitOrUnifiedDiffSplit"})})]})},fn=function(e){var t=e.value,n=e.onChange;return(0,L.tZ)(eE.hU,{alt:"Markdown"===t?"View Source":"View Markdown",onClick:function(){return n("Markdown"===t?"Source":"Markdown")},children:"Markdown"===t?(0,L.tZ)(ei.Z,{}):(0,L.tZ)(H.Z,{})})},fr=function(e){var t=e.files,n=e.totalFiles;return t===n?(0,L.BX)(Q.xv,{css:d7.textContainer,children:["Showing"," ",(0,L.BX)("span",{css:d7.emphasizedText,children:[n," changed ",(0,eS.Z)("file",n),"."]})]}):(0,L.BX)(Q.xv,{css:d7.textContainer,children:["Showing"," ",(0,L.BX)("span",{css:d7.emphasizedText,children:[t," of ",n," changed ",(0,eS.Z)("file",n),"."]})]})},fi=function(e){var t=e.query,n=e.setQuery,r=e.totalDiffs,i=e.diffs,o=e.splitOrUnified,a=e.setSplitOrUnified,l=e.folded,c=e.setFolded,s=(0,X.useMemo)(function(){return i.filter(function(e){var n="".concat(e.final.path,"/").concat(e.final.filename),r="".concat(e.initial.path,"/").concat(e.initial.filename);return n.toLowerCase().includes(t.toLowerCase())||r.toLowerCase().includes(t.toLowerCase())})},[t,i]);return(0,L.BX)(K.G,{css:d7.container,children:[(0,L.tZ)(tf.E,{value:t,onChange:function(e){n(e.target.value)},onClear:function(){n("")},loading:!1,placeholder:"Filter changed files"}),(0,L.BX)(fe,{children:[(0,L.tZ)(fr,{files:s.length,totalFiles:r}),i.length>0?(0,L.tZ)(ft,{value:o,onChange:function(e){return a(e)}}):null]}),s.map(function(e){var t;return(0,L.tZ)(lh,{folded:null===(t=l[e.id])||void 0===t||t,setFolded:function(t){return c(e.id,t)},diff:e,splitOrUnified:o},e.id)})]})},fo=function(e){var t,n=l1(),r=(0,lp.Z)((t=(0,eX._)(function(t){var n,r,i,o,a,l;return(0,eF.Jh)(this,function(c){switch(c.label){case 0:return i=e.hash,[4,t.getFilesForCommit(i)];case 1:if(null==(o=c.sent())?void 0:o.error)return lv({context:"use-commit-diffs",gitService:t,result:o,data:{commit:e}}),[2,{error:o.error,diffs:[]}];return a=(null==o?void 0:null===(n=o.files)||void 0===n?void 0:n.filter(function(e){return["ADDED","MODIFIED","COPIED","RENAMED","TYPE_CHANGED"].includes(e.type)}))||[],l=(null==o?void 0:null===(r=o.files)||void 0===r?void 0:r.filter(function(e){return["DELETED","MODIFIED","COPIED","RENAMED","TYPE_CHANGED"].includes(e.type)}))||[],[2,{error:null,diffs:Array.from(new Set((0,e_._)(a).concat((0,e_._)(l)))).map(function(e){var t,n;return{id:(0,aS.v4)(),status:e.type,loading:!1,initial:{filename:(0,eu.UO)(null!==(t=e.originalPath)&&void 0!==t?t:e.path),path:(0,eu.Il)(null!==(n=e.originalPath)&&void 0!==n?n:e.path),content:""},final:{filename:(0,eu.UO)(e.path),path:(0,eu.Il)(e.path),content:""}}})}]}})}),function(e){return t.apply(this,arguments)}),[e]);return(0,X.useMemo)(function(){return r?r.error?(n(r.error),null):r:null},[n,r])},fa=(u=(0,eX._)(function(e,t,n,r){var i,o,a;return(0,eF.Jh)(this,function(l){switch(l.label){case 0:return i=""===t?n:"".concat(t,"/").concat(n),[4,e.getFileContents({path:i,revision:r})];case 1:if((o=l.sent()).error)throw o.error;return[2,null!==(a=null==o?void 0:o.content)&&void 0!==a?a:""]}})}),function(e,t,n,r){return u.apply(this,arguments)}),fl=(d=(0,eX._)(function(e,t,n){var r,i,o,a;return(0,eF.Jh)(this,function(l){switch(l.label){case 0:return i=t.hash,[4,fa(e,n.final.path,n.final.filename,i)];case 1:if(o=l.sent(),a="",!(!t.grafted&&(null===(r=t.parents)||void 0===r?void 0:r.length)))return[3,3];return[4,fa(e,n.initial.path,n.initial.filename,"".concat(i,"^"))];case 2:a=l.sent(),l.label=3;case 3:return[2,(0,eM._)((0,eO._)({},n),{loading:!1,initial:(0,eM._)((0,eO._)({},n.initial),{content:a}),final:(0,eM._)((0,eO._)({},n.final),{content:o})})]}})}),function(e,t,n){return d.apply(this,arguments)}),fc=(0,ee.X)({content:[J.l0.colWithGap(16),J.l0.p(16)],splitContainer:[J.l0.display.flex,J.l0.flex.row,J.l0.flex.shrink(1),J.l0.flex.wrap,J.l0.justify.spaceBetween,J.l0.maxWidth("100%"),J.l0.border({color:J.TV.outlineDimmest,direction:"bottom"}),J.l0.pb(16)]}),fs=function(e){var t,n,r=e.git,i=e.commit,o=e.info,a=e.onViewCommitClick,l=void 0===a?function(){}:a,c=e.status,s=(0,X.useMemo)(function(){return sQ(c?c.changes.map(function(e){return e.path}):[])},[c]),u=(0,X.useMemo)(function(){if(!c)return[];var e=[],t=!0,n=!1,r=void 0;try{for(var i,o=c.changes[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;a.type.worktree!==a$.h.UNMODIFIED&&e.push(a)}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}return e},[c]),d=(0,nL.Z)().showConfirm,f=l1(),h=(0,M._)((0,X.useState)(!1),2),p=h[0],m=h[1],v=(0,M._)((0,X.useState)(""),2),g=v[0],y=v[1],b=(0,M._)((0,X.useState)("Split"),2),Z=b[0],w=b[1],x=(0,M._)((0,X.useState)("Markdown"),2),C=x[0],_=x[1],S=(0,M._)((0,X.useState)({}),2),E=S[0],k=S[1],T=(0,M._)((0,X.useState)([]),2),R=T[0],D=T[1],I=sx(i,o),G=I.hideBody,B=I.merge,A=I.revert,P=i.hash,N=i.subject,U=i.body,O=i.committer,F=i.author,W=i.grafted,H=null!==(n=i.parents)&&void 0!==n?n:[],V=fo(i),z=(0,X.useCallback)((0,eX._)(function(){var e,t,n,o=arguments;return(0,eF.Jh)(this,function(a){switch(a.label){case 0:return e=!(o.length>0)||void 0===o[0]||o[0],[4,r.restoreFiles(e,i.hash)];case 1:if((t=a.sent()).error)return[3,3];return[4,r.status()];case 2:return(n=a.sent()).error?(f(n.error),lv({context:"commit-view",gitService:r,result:n,data:{files:e,commit:i.hash}})):d("Restored commit!"),r.forceRefresh(),[3,4];case 3:f(t.error),lv({context:"commit-view",gitService:r,result:t,data:{files:e,commit:i.hash}}),a.label=4;case 4:return[2]}})}),[i.hash,r,f,d]),j=ul(s),q=j.openRestoreConfirmationModal,Y=j.restoreConfirmationModal,$=(0,X.useCallback)((0,eX._)(function(){var e,t,n,r=arguments;return(0,eF.Jh)(this,function(i){switch(i.label){case 0:if(!0!==(e=!(r.length>0)||void 0===r[0]||r[0]))return[3,6];if(m(!0),0!==u.length)return[3,2];return[4,z()];case 1:return i.sent(),m(!1),[2];case 2:return[4,q(u)];case 3:if(!i.sent())return[3,5];return[4,z()];case 4:i.sent(),i.label=5;case 5:return m(!1),[3,10];case 6:if("string"==typeof e){if(!(n=u.find(function(t){return t.path===e})))throw m(!1),Error("Could not find file in worktree list");t=[n]}else t=u.filter(function(t){return e.includes(t.path)});return[4,q(t)];case 7:if(!i.sent())return[3,9];return[4,z(e)];case 8:i.sent(),i.label=9;case 9:m(!1),i.label=10;case 10:return[2]}})}),[q,z,u]);(0,X.useEffect)(function(){var e;D(null!==(e=null==V?void 0:V.diffs.map(function(e){return(0,eM._)((0,eO._)({},e),{loading:!0})}))&&void 0!==e?e:[])},[V]),(0,X.useEffect)(function(){null!==V&&V.error&&f(V.error)},[V,f]);var ee=(t=(0,eX._)(function(e,t){var n,o,a;return(0,eF.Jh)(this,function(l){switch(l.label){case 0:if(k(function(n){var r=(0,eO._)({},n);return r[e]=t,r}),!(n=R.find(function(t){return t.id===e})))return f(lG.aq.INVALID_STATE),lv({context:"commit-view",gitService:r,result:{error:lG.aq.INVALID_STATE},data:{diffId:e}}),[2];if(!(!t&&n.loading))return[3,4];l.label=1;case 1:return l.trys.push([1,3,,4]),[4,fl(r,i,n)];case 2:return o=l.sent(),D(function(t){var n=(0,e_._)(t),r=n.findIndex(function(t){return t.id===e});return n[r]=o,n}),[3,4];case 3:return lv({context:"commit-view",gitService:r,result:a=l.sent(),data:{diffId:e}}),f(a),[2];case 4:return[2]}})}),function(e,n){return t.apply(this,arguments)});return(0,L.BX)(K.G,{css:fc.content,children:[(0,L.tZ)(d2,{merge:B,revert:A,subject:N,onViewCommitClick:l}),(0,L.BX)(fe,{children:[(0,L.BX)(K.G,{css:[J.l0.rowWithGap(8),J.l0.align.start,J.l0.flex.shrink(1)],children:[(0,L.tZ)(sC,{hash:P}),(0,L.tZ)(s_,{onClick:function(){return $()},text:"Restore All",loading:p})]}),G?null:(0,L.tZ)(fn,{value:C,onChange:function(e){_(e)}})]}),G?null:(0,L.tZ)(cd,{body:U,view:C}),(0,L.BX)(K.G,{css:fc.splitContainer,children:[(0,L.tZ)(d4,{author:F,committer:O}),(0,L.tZ)(d6,{parents:H,grafted:W,onViewCommitClick:l})]}),null!==B?(0,L.tZ)(Q.xv,{variant:"small",color:"dimmest",children:"There is more than one parent, diffing against the first parent."}):null,null===V?(0,L.tZ)(sq,{}):(0,L.tZ)(fi,{query:g,setQuery:y,totalDiffs:V.diffs.length,diffs:R,splitOrUnified:Z,setSplitOrUnified:w,folded:E,setFolded:ee}),Y]})};function fu(e){var t=e.hash,n=e.onViewCommitClick,r=e.switchMode,i=e.status,o=(0,z.Z)().git,a=l1(),l=dQ(null!=t?t:"");if(null===l)return(0,L.tZ)(sq,{});if(l.error)return l.error===lG.aq.NOT_INITIALIZED?r({mode:w.CURRENT_BRANCH}):(a(l.error),(l.error===lG.aq.UNKNOWN||l.error===lG.aq.UNKNOWN_NOT_GIT)&&lv({context:"commit-view",gitService:o,result:l,data:{hash:t}})),null;if(null===l.commit)return a(lG.aq.UNKNOWN),null;var c=l.commit,s=c7(c)||c4(c);return(0,L.tZ)(fs,{git:o,commit:c,info:s,onViewCommitClick:n,status:i})}var fd=(0,ee.X)({gitPane:[J.l0.position.relative,J.l0.display.flex,J.l0.minHeight("100%")],gitPaneContent:[J.l0.flex.growAndShrink(1),J.l0.overflow("auto")]});function ff(e){var t,n,r,i=e.isActive,o=e.performPaneOperation,a=(0,rX.P5)({controlName:"flag-git-commit-view",logFlagToAnalytics:!1}),l=(0,X.useRef)(),c=(0,M._)((0,X.useState)(w.CURRENT_BRANCH),2),s=c[0],u=c[1],d=(0,M._)((0,X.useState)(null),2),f=d[0],h=d[1],p=(0,M._)((0,X.useState)(null),2),m=p[0],v=p[1],g=(0,M._)((0,X.useState)(!1),2),y=g[0],b=g[1];t=void 0!==i&&i,n=(0,z.Z)().git,(0,X.useEffect)(function(){t&&n.forceRefresh()},[t,n]);var Z=(0,lp.Z)((r=(0,eX._)(function(e){var t,n,r,i,o,a,l,c,s,u;return(0,eF.Jh)(this,function(d){switch(d.label){case 0:return[4,e.getRepositoryState()];case 1:if((t=d.sent()).error)return[2,t];if(n=t.state,r=t.type,i=null,o=null,a=null,!(r!==lR.y5.INITIALIZING))return[3,6];return[4,e.status()];case 2:if((l=d.sent()).error)return lv({context:"git-pane-status",gitService:e,result:l,data:{state:n,type:r}}),[2,l];return i=l,[4,e.getRemotes()];case 3:if((c=d.sent()).error)return lv({context:"git-pane-remotes",gitService:e,result:c,data:{state:n,type:r}}),[2,c];if(o=c.remotes,!i.branch)return[3,5];return[4,e.getBranch(i.branch)];case 4:if((s=d.sent()).error)return lv({context:"git-pane-branch",gitService:e,result:s,data:{state:n,type:r}}),[2,s];a=s.branch,d.label=5;case 5:return[3,8];case 6:return[4,e.status()];case 7:if((u=d.sent()).error)return lv({context:"git-pane-status-initializing",gitService:e,result:u,data:{state:n,type:r}}),[2,{state:n,type:r,status:i,remotes:o,currentBranch:a,error:null}];i=u,d.label=8;case 8:return[2,{state:n,type:r,status:i,remotes:o,currentBranch:a,error:null}]}})}),function(e){return r.apply(this,arguments)})),x=!Z||Z.error?null:Z.currentBranch,C=(0,X.useCallback)(function(e){switch(u(e),e){case w.DASHBOARD:lW("pane-mode-changed",{mode:"dashboard"});break;case w.BRANCH:lW("pane-mode-changed",{mode:"branch"});break;case w.CURRENT_BRANCH:lW("pane-mode-changed",{mode:"current-branch"});break;case w.SETTINGS:lW("pane-mode-changed",{mode:"settings"})}},[]),_=(0,X.useCallback)(function(){l.current?(C(l.current),l.current=void 0):C(w.CURRENT_BRANCH)},[C]),S=(0,X.useCallback)(function(e){var t=function(e){l.current=s,C(e)};switch(e.mode){case w.DASHBOARD:t(w.DASHBOARD);break;case w.BRANCH:if((0,lD.p3)(e.branch,x)){t(w.CURRENT_BRANCH);break}v(e.branch),t(w.BRANCH);break;case w.CURRENT_BRANCH:t(w.CURRENT_BRANCH);break;case w.SETTINGS:t(w.SETTINGS);break;case w.COMMIT:h(e.hash),t(w.COMMIT)}},[C,s,x]),E=(0,X.useCallback)(function(e){var t=(0,tF.Dp)({path:e});"codeEditor"===t?o({operation:"open",pane:{type:"diff",data:{left:{path:e,data:{type:"git",revision:"HEAD"}},right:{path:e,data:{type:"fs"}}}}}):o({operation:"open",pane:{type:t,data:{path:e}}})},[o]),k=(0,X.useCallback)(function(e){S({mode:w.COMMIT,hash:e})},[S]),T=(0,X.useCallback)(function(){b(!0)},[]);if(s===w.BRANCH&&(0,lD.p3)(m,x)&&C(w.CURRENT_BRANCH),(0,X.useEffect)(function(){return b(!1)},[Z]),y||!Z||Z.error)return(0,L.tZ)(fh,{children:(null==Z?void 0:Z.error)?(0,L.tZ)(dK,{error:Z.error}):(0,L.tZ)(sq,{})});switch(Z.type){case lR.y5.INITIALIZING:case lR.y5.INTERMEDIATE:case lR.y5.DETACHED_HEAD:return(0,L.tZ)(fh,{children:(0,L.tZ)(fp,{state:Z.state,status:Z.status,onFileClick:E,gotoPendingState:T})});case lR.y5.NORMAL:if(s===w.BRANCH&&!m||s===w.CURRENT_BRANCH&&!x)return(0,L.tZ)(fh,{header:(0,L.tZ)(cY,{mode:w.DASHBOARD,branch:null,switchMode:S,onBack:_}),children:(0,L.tZ)(u3,{currentBranch:null,switchMode:S})});return(0,L.tZ)(fh,{header:(0,L.tZ)(cY,{mode:s,branch:s===w.CURRENT_BRANCH?x:m,switchMode:S,onBack:_}),children:(0,L.tZ)(fm,{mode:s,status:Z.status,remotes:Z.remotes,previewBranch:m,previewCommit:f,currentBranch:x,switchMode:S,onStagedFileClick:E,onViewCommitClick:a?k:void 0,onViewSettingsClick:function(){return S({mode:w.SETTINGS})},gotoPendingState:T})})}}function fh(e){var t=e.header,n=e.children,r=(0,M._)((0,X.useState)(function(){return(0,eG.MT)()}),1)[0];return(0,L.tZ)(lJ.Provider,{value:r,children:(0,L.BX)(K.G,{css:fd.gitPane,children:[(0,L.tZ)(l8,{}),t,(0,L.tZ)(K.G,{css:fd.gitPaneContent,children:n})]})})}function fp(e){var t=e.state,n=e.status,r=e.onFileClick,i=e.gotoPendingState;switch(t){case lR.yG.NOT_INITIALIZED:return(0,L.tZ)(du,{});case lR.yG.ON_UNBORN_BRANCH:return(0,L.tZ)(d$,{onFileClick:r,status:n});case lR.yG.MERGING:return(0,L.tZ)(da,{onFileClick:r,gotoPendingState:i});case lR.yG.REBASING:return(0,L.tZ)(dd,{});case lR.yG.REVERTING:return(0,L.tZ)(df,{});case lR.yG.CHERRY_PICKING:return(0,L.tZ)(u$,{});case lR.yG.APPLYING_MAILBOX:return(0,L.tZ)(cQ,{});case lR.yG.BISECTING:return(0,L.tZ)(c0,{});case lR.yG.DETACHED_HEAD:return(0,L.tZ)(u5,{});default:return null}}function fm(e){var t=e.mode,n=e.status,r=e.remotes,i=e.previewBranch,o=e.previewCommit,a=e.currentBranch,l=e.switchMode,c=e.onStagedFileClick,s=e.onViewCommitClick,u=e.onViewSettingsClick,d=e.gotoPendingState;switch(t){case w.DASHBOARD:return(0,L.tZ)(u3,{currentBranch:a,switchMode:l});case w.BRANCH:return(0,L.tZ)(uq,{status:n,branch:i,remotes:r,onStagedFileClick:c,onViewCommitClick:s,onViewSettingsClick:u,gotoPendingState:d});case w.CURRENT_BRANCH:return(0,L.tZ)(uq,{status:n,remotes:r,branch:a,onStagedFileClick:c,onViewCommitClick:s,onViewSettingsClick:u,gotoPendingState:d,current:!0});case w.SETTINGS:return(0,L.tZ)(dj,{});case w.COMMIT:return(0,L.tZ)(fu,{status:n,onViewCommitClick:s,hash:o,switchMode:l});default:(0,lI.Z)(t)}}var fv=ed.Dy.Object({type:ed.Dy.Literal("git")}),fg={Content:function(e){var t=e.options,n=t.isActive,r=t.performPaneOperation;return(0,L.tZ)(ff,{isActive:n,performPaneOperation:r})},Icon:function(e){var t=e.size;return(0,L.tZ)(lT.Z,{size:t})},getTitle:function(){return"Git"},decode:function(e){return ef.B4.Decode(fv,e)}},fy=n(31171),fb=n(28908);function fZ(e){var t=e.reversed,n=void 0!==t&&t,r=e.hideName,i=void 0!==r&&r,o=e.color,a=void 0===o?"default":o,l=(0,fy.bA)(),c=(0,X.useMemo)(function(){return[n?J.l0.rowReverseWithGap(4):J.l0.rowWithGap(4),J.l0.align.center]},[n]);if(!l)return null;if(0===l.count)return(0,L.BX)(K.G,{css:c,children:[(0,L.tZ)(fb.Z,{size:24}),(0,L.tZ)(Q.xv,{color:a,multiline:!1,children:"Server Authored"})]});var s=l.changes[l.version];if(!l.users)return(0,L.BX)(K.G,{css:c,children:[(0,L.tZ)(cg.q,{size:24,src:"/public/images/ghost.svg",username:"Unknown"}),i?null:(0,L.tZ)(Q.xv,{color:a,multiline:!1,children:"Unknown"})]});var u=l.users[s.userId];return u?(0,L.BX)(K.G,{css:c,children:[(0,L.tZ)(cg.q,{size:24,src:u.image,username:u.username}),i?null:(0,L.tZ)(Q.xv,{color:a,multiline:!1,children:u.username})]}):s.timestamp>16546464e5?(0,L.BX)(K.G,{css:c,children:[(0,L.tZ)(fb.Z,{size:24}),i?null:(0,L.tZ)(Q.xv,{color:a,multiline:!1,children:"Server Authored"})]}):(0,L.BX)(K.G,{css:c,children:[(0,L.tZ)(cg.q,{size:24,src:"/public/images/ghost.svg",username:"Unknown"}),i?null:(0,L.tZ)(Q.xv,{color:a,multiline:!1,children:"Unknown"})]})}function fw(){var e=(0,nd._)(["\n  query WorkspaceHistory2Users($ids: [Int!]!) {\n    currentUser {\n      id\n      username\n      image\n    }\n    usersByIds(ids: $ids) {\n      id\n      username\n      image\n    }\n  }\n"]);return fw=function(){return e},e}function fx(){var e=(0,nd._)(["\n  query WorkspaceHistory2CurrentUserDate {\n    currentUser {\n      id\n      timeCreated\n    }\n  }\n"]);return fx=function(){return e},e}var fC=(0,nf.Ps)(fw());fx();var f_=n(94376),fS=n(23026),fE=n(3194),fk=n(92635),fT=n(2543),fR=function(e){"use strict";(0,fE._)(n,e);var t=(0,fT._)(n);function n(e){var r;return(0,fS._)(this,n),(r=t.call(this,e)).name="UserError",r}return n}((0,fk._)(Error));function fD(e,t,n){return new Promise(function(r,i){try{var o,a=e.watchTextFile(t,{onReady:(o=(0,eX._)(function(e){var t,o;return(0,eF.Jh)(this,function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),[4,n(e)];case 1:return t=l.sent(),r(t),[3,3];case 2:return o=l.sent(),i(o),[3,3];case 3:return a(),[2]}})}),function(e){return o.apply(this,arguments)})})}catch(e){i(e)}})}var fI=f_.I;function fG(){return(fG=(0,eX._)(function(e,t){var n,r,i,o,a,l,c,s,u,d,f,h,p,m,v,g,y,b;return(0,eF.Jh)(this,function(Z){switch(Z.label){case 0:n=new Set,r=!0,i=!1,o=void 0;try{for(a=t[Symbol.iterator]();!(r=(l=a.next()).done);r=!0)(c=l.value).userId&&n.add(c.userId)}catch(e){i=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}if(0===n.size)return[2,{}];if(n.size>=fI)return[2,"too_many_users"];return[4,e.query({query:fC,variables:{ids:Array.from(n)}})];case 1:if(u=(s=Z.sent()).data,d=s.error)throw d;f=u.currentUser?[u.currentUser].concat((0,e_._)(u.usersByIds)):u.usersByIds,h={},p=!0,m=!1,v=void 0;try{for(g=f[Symbol.iterator]();!(p=(y=g.next()).done);p=!0)h[(b=y.value).id]={id:b.id,username:b.username,image:b.image}}catch(e){m=!0,v=e}finally{try{p||null==g.return||g.return()}finally{if(m)throw v}}return[2,h]}})})).apply(this,arguments)}function fB(){return(fB=(0,eX._)(function(e,t,n){var r,i,o;return(0,eF.Jh)(this,function(a){switch(a.label){case 0:var l;return[4,fD(e,n,(l=(0,eX._)(function(e){var t,n;return(0,eF.Jh)(this,function(r){return(t=e.fetchChanges,0===(n=e.version))?[2,{isDisposed:!1,result:[]}]:[2,t(1,n,"")]})}),function(e){return l.apply(this,arguments)}))];case 1:if((r=a.sent()).isDisposed)return[2,{data:null,handledError:"File deleted or removed."}];return[4,function(e,t){return fG.apply(this,arguments)}(t,i=r.result)];case 2:if("too_many_users"===(o=a.sent()))return[2,{data:{changes:i,users:null},handledError:null}];return[2,{data:{changes:i,users:o},handledError:null}]}})})).apply(this,arguments)}(_||(_={})).TooManyUsersRequestedError="too_many_users";var fA=n(99418),fP=(0,no.iv)({display:"grid",gridTemplateColumns:"auto 1fr",rowGap:"0.5rem",columnGap:"1rem","> dt":{display:"flex",alignItems:"center",fontWeight:"bold"}});function fN(e){var t=e.onCloseHistory,n=(0,nL.Z)().showError,r=(0,M._)((0,X.useState)(!1),2),i=r[0],o=r[1],a=(0,M._)((0,X.useState)(!1),2),l=a[0],c=a[1],s=(0,z.Z)().fs,u=(0,fy.bA)(),d=(0,fA.j)(),f="Reset",h=!0;function p(){return(p=(0,eX._)(function(){var e,r;return(0,eF.Jh)(this,function(i){switch(i.label){case 0:if(!u||!s||l)return[2];i.label=1;case 1:var a,f;return i.trys.push([1,3,4,5]),c(!0),(0,fA.p)("versionRestored"),e=u.filePath,[4,(a=u.version+1,fD(s,e,(f=(0,eX._)(function(e){var t,n,r,i,o,l,c,u;return(0,eF.Jh)(this,function(d){switch(d.label){case 0:if(t=e.fetchChanges,n=e.writeChange,a>(r=e.version))throw Error("Cannot reset to a version that does not exist");if(a===r)return[2];i=null,d.label=1;case 1:return d.trys.push([1,3,,4]),[4,t(1,r,"")];case 2:if((o=d.sent()).isDisposed)throw new fR("File deleted or removed.");return i=o.result,[3,4];case 3:throw d.sent(),new fR("Something went wrong while resetting the file. It is possible that a bad connection is to blame. Please try again.");case 4:c=(l=(0,tW._)(i.slice(a,i.length).reverse()))[0],u=l.slice(1).reduce(function(e,t){return e.compose(t.invertedChanges)},c.invertedChanges);try{n(u)}catch(e){throw lm.Tb(e),new fR("Something went wrong while resetting the file. Maybe the file changed while you were restoring it? Please try again.")}return[4,s.flush()];case 5:return d.sent(),[2]}})}),function(e){return f.apply(this,arguments)})))];case 2:return i.sent(),t(),[3,5];case 3:if((r=i.sent())instanceof fR)return n(r.message),[2];return d(r,"restore"),[3,5];case 4:return o(!1),c(!1),[7];case 5:return[2]}})})).apply(this,arguments)}return u?0===u.count?(f="No history",h=!0):l||i?(f="Resetting...",h=!0):u.playing?(f="Playing...",h=!0):u.version===u.count-1?(f="Viewing latest",h=!0):(f="Reset editor to here",h=!1):(f="Loading...",h=!0),(0,L.BX)(L.HY,{children:[(0,L.tZ)(eV.zx,{text:f,disabled:h,onClick:function(){return o(!0)},colorway:"primary",iconLeft:(0,L.tZ)(ra.Z,{})}),u&&0!==u.count&&(0,L.tZ)(iq.u,{isOpen:i,onRequestClose:function(){l||o(!1)},children:(0,L.BX)(K.G,{css:J.l0.colWithGap(24),children:[(0,L.tZ)(Q.h4,{variant:"headerDefault",level:2,children:"Reset file version"}),(0,L.tZ)(e$.Tg,{elevated:!0,css:[J.l0.px(16),J.l0.py(12),J.l0.borderRadius(8)],children:(0,L.BX)("dl",{css:fP,children:[(0,L.tZ)("dt",{children:"File"}),(0,L.tZ)("dd",{children:u.filePath}),(0,L.tZ)("dt",{children:"Version"}),(0,L.BX)("dd",{children:[u.version+1,(0,L.BX)("span",{css:[J.l0.color.foregroundDimmest],children:[(0,L.tZ)("span",{css:J.l0.mx(8),children:"/"}),u.count]})]}),(0,L.tZ)("dt",{children:"Date"}),(0,L.tZ)("dd",{children:(0,L.tZ)(cR.EK,{date:u.changes[u.version].timestamp,dateFormat:"absolute"})}),(0,L.tZ)("dt",{children:"Author"}),(0,L.tZ)("dd",{children:(0,L.tZ)(fZ,{})})]})}),(0,L.tZ)(eY.E,{icon:(0,L.tZ)(il.Z,{}),colorway:"positive",text:"Resetting is non-destructive. The reset content will become a new version at the end of history. You can always go back to the version you just had."}),(0,L.BX)(K.G,{css:[J.l0.rowWithGap(8),J.l0.justify.end],children:[(0,L.tZ)(eV.zx,{text:"Cancel",disabled:l,onClick:function(){return o(!1)}}),(0,L.tZ)(eV.zx,{text:l?"Resetting Version...":"Reset Version",disabled:l,colorway:"primary",onClick:function(){return p.apply(this,arguments)},iconLeft:(0,L.tZ)(ra.Z,{})})]})]})})]})}var fU=n(44166),fL=(0,X.forwardRef)(function(e,t){var n=(0,fy.bA)(),r=(0,X.useRef)(null);(0,X.useImperativeHandle)(t,function(){return r.current}),n&&r.current&&(r.current.setAttribute("aria-valuemin","1"),r.current.setAttribute("aria-valuemax",String(n.count)),r.current.setAttribute("aria-valuenow",String(n.version+1)));var i=(0,X.useMemo)(function(){return(0,L.tZ)("div",{ref:r,role:"slider",tabIndex:0,css:{position:"absolute",top:"0",left:"calc((100% - 16px) * var(--scrubber-progress, 0))",width:"16px",height:"16px",backgroundColor:J.TV.accentPrimaryDefault,borderRadius:"100%",outline:"none",cursor:"pointer",transition:"left var(--scrubber-transition-time, 100ms) ease-out",willChange:"left, transition",":focus":{boxShadow:"0 0 0 1px ".concat(J.TV.foregroundDefault," inset")}}})},[]);return n&&n.count>1?i:null}),fO=(0,X.forwardRef)(function(e,t){var n=(0,fy.bA)(),r=(0,X.useMemo)(function(){return(0,L.BX)(L.HY,{children:[(0,L.tZ)("div",{ref:t,"aria-hidden":!0,css:{position:"relative",top:"0",width:"100%",height:"16px",margin:"0",cursor:"pointer"}}),(0,L.tZ)("div",{"aria-hidden":!0,css:{position:"absolute",top:"6px",left:"0",width:"100%",height:"4px",margin:"0",overflow:"hidden",pointerEvents:"none",backgroundColor:J.TV.backgroundHighest,borderRadius:"2px"},children:(0,L.tZ)("div",{"aria-hidden":!0,css:{position:"absolute",top:"0",left:"0",width:"100%",height:"4px",margin:"0",pointerEvents:"none",backgroundColor:J.TV.accentPrimaryDefault,transformOrigin:"left",transform:"scaleX(var(--scrubber-progress, 0))",transition:"transform var(--scrubber-transition-time, 100ms) ease-out",willChange:"transform, transition"}})})]})},[t]),i=(0,X.useMemo)(function(){return(0,L.tZ)("div",{ref:t,"aria-hidden":!0,css:{width:"100%",height:"16px",pointerEvents:"none"},children:(0,L.tZ)("div",{css:{position:"absolute",width:"100%",height:"4px",top:"6px",left:"0",backgroundColor:J.TV.backgroundHighest,borderRadius:"2px"}})})},[t]);return n&&n.count>1?r:i}),fM=["ArrowLeft","ArrowRight","Home","End"];function fX(){var e=(0,fy.bA)(),t=(0,fy._Z)(),n=(0,M._)((0,X.useState)(!1),2),r=n[0],i=n[1],o=(0,X.useRef)(null),a=(0,X.useRef)(null),l=(0,X.useRef)(null),c=function(e){(0,fU.A)(o,"--scrubber-transition-time",e)},s=function(e){(0,fU.A)(o,"--scrubber-progress",e.toString())};return e&&!r&&(s(e.version/(e.count-1)),e.playing?c("50ms"):c("100ms")),(0,X.useEffect)(function(){if(e&&a.current&&l.current&&!r){var n=a.current,o=l.current,u=function(r){if(0===r.button){i(!0),o.focus();var a=n.getBoundingClientRect(),l=o.getBoundingClientRect(),u=a.width,d=l.width,f=r.target===n?d/2:r.clientX-l.left,h=null,p=function(n){var r=Math.max(0,Math.min(1,(n-a.left-f)/(u-d)));r!==h&&(h=r,s(r),t({version:Math.round(r*(e.count-1)),playing:!1}))};p(r.clientX);var m=function(e){c("0ms"),p(e.clientX),e.preventDefault(),e.stopPropagation()},v=function(){window.removeEventListener("pointermove",m),window.removeEventListener("pointerup",v),window.removeEventListener("pointercancel",v),c("100ms"),i(!1)};window.addEventListener("pointermove",m),window.addEventListener("pointerup",v),window.addEventListener("pointercancel",v),r.preventDefault(),r.stopPropagation()}};return n.addEventListener("pointerdown",u),o.addEventListener("pointerdown",u),function(){n.removeEventListener("pointerdown",u),o.removeEventListener("pointerdown",u)}}},[e,t,r]),(0,X.useEffect)(function(){if(e&&l.current&&!r){var n=l.current,i=function(n){if(e&&fM.includes(n.key)){var r=n.shiftKey?10:1,i=e.version,o=e.count-1,a=null;switch(n.key){case"ArrowLeft":a=Math.max(0,i-r);break;case"ArrowRight":a=Math.min(o,i+r);break;case"Home":a=0;break;case"End":a=o}null!==a&&(t({version:a,playing:!1}),n.preventDefault(),n.stopPropagation())}};return n.addEventListener("keydown",i),function(){n.removeEventListener("keydown",i)}}},[e,t,r]),(0,X.useMemo)(function(){return(0,L.BX)(K.G,{innerRef:o,css:{position:"relative",height:"16px",width:"100%",touchAction:"none","--scrubber-progress":1,"--scrubber-transition-time":"100ms",":hover, :focus-within":{filter:"brightness(1.1)"},":hover:focus-within":{filter:"brightness(1.2)"}},children:[(0,L.tZ)(fO,{ref:a}),(0,L.tZ)(fL,{ref:l})]})},[])}var fF=n(88073);function fW(e){var t=e.onClose;return(0,L.tZ)(eV.zx,{text:"Cancel",onClick:function(){(0,fA.p)("historyExplicitlyClosed"),t()}})}var fH=n(10099),fV=(0,no.iv)({filter:"grayscale(100%) opacity(0.5)",pointerEvents:"none"});function fz(){var e,t="/replEnvironmentMobile"===(0,dg.useRouter)().pathname,n=(0,fy.bA)(),r=(0,fy._Z)(),i=(0,r1.U)(),o=!n||0===n.count;return(0,L.BX)(K.G,{css:[J.l0.rowWithGap(8),J.l0.align.center,o?fV:null],children:[(0,L.tZ)(fH.Z,{id:i("diffButton"),isOn:null!==(e=null==n?void 0:n.comparing)&&void 0!==e&&e,onChange:function(e){o||r({comparing:e.target.checked})}}),(0,L.tZ)("label",{css:[{cursor:"pointer",userSelect:"none"},J.l0.flex.column,J.l0.align.center],htmlFor:i("diffButton"),children:(0,L.tZ)(Q.xv,{multiline:!1,children:t?"Compare":"Compare Latest"})})]})}function fj(){var e=(0,fy.bA)(),t=0,n=0;return e&&0!==e.count&&(t=e.version+1,n=e.count),(0,L.BX)(K.G,{css:[J.l0.rowWithGap(4),J.l0.justify.spaceBetween],children:[(0,L.tZ)(Q.xv,{css:{minWidth:"2ch",textAlign:"right"},color:e?"default":"dimmer",multiline:!1,children:t}),(0,L.tZ)(Q.xv,{css:{width:"1ch",textAlign:"center"},color:"dimmer",multiline:!1,children:"/"}),(0,L.tZ)(Q.xv,{css:{minWidth:"2ch",textAlign:"left"},color:"dimmer",multiline:!1,children:n})]})}var fq=n(27187),fY=n(56335);function f$(e){if(e<0)throw Error('Require at least zero ops to compute pace, got "'+e+'"');return 1/Math.log(e+2)*100}function fJ(){var e,t,n,r,i=(0,fy.bA)(),o=(0,fy._Z)(),a=(null!==(t=null==i?void 0:null===(e=i.changes)||void 0===e?void 0:e.length)&&void 0!==t?t:1)-1,l=null!==(n=null==i?void 0:i.version)&&void 0!==n?n:0,c=null!==(r=null==i?void 0:i.playing)&&void 0!==r&&r,s=!i||0===i.count,u=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:f$,i=(0,M._)((0,X.useState)(!1),2),o=i[0],a=i[1],l=(0,X.useCallback)(function(){t(1)},[t]),c=(0,X.useCallback)(function(){if(e+1>n){a(!1);return}t(e+1)},[t,e,n]);return(0,X.useEffect)(function(){if(o){var e=setTimeout(function(){c()},r(n));return function(){return clearTimeout(e)}}},[o,c,r,n]),{isPlaying:o,start:function(){a(!0)},stop:function(){a(!1)},reset:l}}(l,function(e){return o({version:e})},a),d=u.isPlaying,f=u.start,h=u.stop;(0,X.useEffect)(function(){d&&!c?h():!d&&c&&f()},[c,d,f,h]);var p="Loading...";return i&&(d?p="Pause":i.version===i.count-1?p="Play file history from beginning":0===i.version?p="Play file history":i.version>0&&(p="Play file history from here")),(0,L.tZ)(eE.hU,{alt:p,size:24,disabled:s,onClick:function(){l===a?o({version:0,playing:!0}):o({playing:!c})},children:d?(0,L.tZ)(fY.Z,{}):(0,L.tZ)(fq.Z,{})})}function fK(){return(0,L.BX)(K.G,{css:[J.l0.rowWithGap(4),J.l0.align.center],children:[(0,L.tZ)(fJ,{}),(0,L.tZ)(fQ,{}),(0,L.tZ)(fj,{}),(0,L.tZ)(f0,{})]})}function fQ(){var e=(0,fy.bA)(),t=(0,fy._Z)(),n=!e||0===e.version||0===e.count;return(0,L.tZ)(eE.hU,{alt:"Move backwards one version",size:24,disabled:n,onClick:function(){e&&e.version>0&&t({version:e.version-1})},children:(0,L.tZ)(l4.Z,{})})}function f0(){var e=(0,fy.bA)(),t=(0,fy._Z)(),n=!e||e.version===e.count-1||0===e.count;return(0,L.tZ)(eE.hU,{alt:"Move forwards one version",size:24,disabled:n,onClick:function(){e&&e.version<e.count-1&&t({version:e.version+1})},children:(0,L.tZ)(ek.Z,{})})}function f1(){var e=(0,fy.bA)();if(!e||0===e.count)return null;var t=e.changes[e.version].timestamp;return(0,L.tZ)(cR.EK,{textColor:"dimmer",dateFormat:"switch",date:t})}function f2(e){var t,n,r,i,o,a=e.filePath,l=e.onCloseHistory,c="/replEnvironmentMobile"===(0,dg.useRouter)().pathname,s=c?J.l0.borderRadius(0):J.l0.borderRadius(0,0,8,8),u=(0,fy.bA)(),d=(0,fy._Z)(),f=(0,fy.Ai)(),h=(0,fA.j)(),p=(n=(t=(0,M._)((0,X.useState)({data:null,loading:!0,error:null,handledError:null}),2))[0],r=t[1],i=(0,z.Z)().fs,o=(0,fF.x)(),(0,X.useEffect)(function(){if(!a){r({data:null,loading:!1,error:null,handledError:null});return}r({data:null,loading:!0,error:null,handledError:null});var e=!1;return(function(e,t,n){return fB.apply(this,arguments)})(i,o,a).then(function(t){var n=t.data,i=t.handledError;if(!e){if(i){r({data:null,loading:!1,error:null,handledError:i});return}r({data:n,loading:!1,error:null,handledError:null})}}).catch(function(t){e||(t instanceof Error||(t=Error(t)),r({data:null,loading:!1,error:t,handledError:null}))}),function(){e=!0}},[a,i,o]),n),m=p.data,v=p.loading,g=p.error;return(0,X.useEffect)(function(){if(g){h(g,"history2-index",{filePath:a});return}if(m&&!v)return d({filePath:a,changes:m.changes,users:m.users}),(0,fA.p)("historyLoaded"),function(){f()}},[a,m,v,g,h,d,f]),(0,L.BX)(K.G,{css:[J.l0.colWithGap(8),J.l0.p(8),J.l0.zIndex(3),J.l0.overflow("hidden"),s,J.l0.backgroundColor.backgroundDefault,{borderTop:"2px solid ".concat(J.TV.backgroundHigher),boxShadow:"rgba(2, 2, 3, 0.125) 0px -16px 32px 0px"}],children:[(0,L.BX)(e$.Tg,{css:[J.l0.position.relative,J.l0.colWithGap(4),J.l0.px(12),J.l0.pt(8),J.l0.pb(8),J.l0.align.center,J.l0.borderRadius(8),J.l0.overflow("hidden")],elevated:!0,children:[(0,L.tZ)(fX,{}),(0,L.BX)(K.G,{css:[J.l0.display.flex,J.l0.flex.row,J.l0.align.center,J.l0.justify.spaceBetween,J.l0.width("100%")],children:[(0,L.tZ)(fK,{}),u&&u.count>0?(0,L.BX)(K.G,{css:[J.l0.rowWithGap(4),J.l0.align.center],children:[(0,L.tZ)(f1,{}),v||c?null:(0,L.tZ)(Q.xv,{color:"dimmer",multiline:!1,children:"•"}),(0,L.tZ)(fZ,{color:"dimmer",hideName:c,reversed:!0})]}):null]})]}),(0,L.BX)(K.G,{css:[J.l0.display.flex,J.l0.flex.row],children:[(0,L.tZ)(f8,{justify:"flex-start",children:(0,L.tZ)(fz,{})}),(0,L.BX)(f8,{justify:"flex-end",children:[(0,L.tZ)(fW,{onClose:l}),(0,L.tZ)(fN,{onCloseHistory:l})]})]})]})}function f8(e){var t=e.children,n=e.justify;return(0,L.tZ)("div",{css:{display:"flex",flexGrow:1,flexBasis:0,alignItems:"center",justifyContent:n,columnGap:J.TV.space8,minWidth:0},children:t})}var f4=n(74633),f3=n(80923),f5=n(62609),f6=n(54340),f9=(0,f5.B)();function f7(e){if(!(e instanceof nF.YW))return{compareTo:e.field(f9.state,!1),changed:!1};var t=e.state.field(f9.state,!1),n=e.startState.field(f9.state,!1)!==t;return{compareTo:t,changed:n}}function he(e,t){e.state.field(f9.state,!1)!==t&&e.dispatch({effects:f9.effect.of(t)})}var ht=nF.QQ.define({create:function(){return null},update:function(e,t){var n=f7(t),r=n.compareTo,i=n.changed;if(!r)return null;if(!t.docChanged&&!i)return e;var o=t.state.doc.toString();return new f6.PO(o,r)}}),hn=null!==(S=globalThis.requestIdleCallback)&&void 0!==S?S:globalThis.requestAnimationFrame,hr=null!==(E=globalThis.cancelIdleCallback)&&void 0!==E?E:globalThis.cancelAnimationFrame,hi=nM.p.line({class:"cm-diff-deleted"}),ho=function(e){"use strict";(0,fE._)(n,e);var t=(0,fT._)(n);function n(e,r){var i;return(0,fS._)(this,n),(i=t.call(this)).insertion=e,i.highlight=r,i}var r=n.prototype;return r.destroy=function(){this.pendingHighlight&&hr(this.pendingHighlight)},r.toDOM=function(){var e=document.createElement("div");return e.className="cm-diff-inserted cm-line",this.updateDOM(e),e},r.eq=function(e){return!e.pendingHighlight&&this.insertion===e.insertion},r.updateDOM=function(e){var t=this;return this.pendingHighlight&&(hr(this.pendingHighlight),this.pendingHighlight=null),this.insertion.length?e.textContent=this.insertion:e.innerHTML="&nbsp;",this.highlight&&this.insertion.length&&(this.pendingHighlight=hn(function(){if(t.highlight){t.pendingHighlight=null;try{var n=t.highlight();e.innerHTML="",e.append(n)}catch(e){}}})),!0},n}(nM.l9),ha=nF.QQ.define({create:function(){return nM.p.none},update:function(e,t){var n=t.state.field(ht,!1);if(!n)return nM.p.none;var r=f7(t).changed;if(!t.docChanged&&!r)return e.map(t.changes);var i=[],o=function(e,t){i.push({from:e,to:e,value:t})},a=n.startInsertions();if(a){var l=!0,c=!1,s=void 0;try{for(var u,d=a[Symbol.iterator]();!(l=(u=d.next()).done);l=!0)!function(){var e=u.value,n=new ho(e.content,function(){return hl(t.state,e.content)});o(0,nM.p.widget({widget:n,side:-1,block:!0}))}()}catch(e){c=!0,s=e}finally{try{l||null==d.return||d.return()}finally{if(c)throw s}}}var f=!0,h=!1,p=void 0;try{for(var m,v=n.lines()[Symbol.iterator]();!(f=(m=v.next()).done);f=!0)!function(){var e=m.value;if(e.isDeleted&&o(e.from,hi),e.insertions){var n=!0,r=!1,i=void 0;try{for(var a,l=e.insertions[Symbol.iterator]();!(n=(a=l.next()).done);n=!0)!function(){var n=a.value,r=new ho(n.content,function(){return hl(t.state,n.content)});o(e.to,nM.p.widget({widget:r,side:1,block:!0}))}()}catch(e){r=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw i}}}}()}catch(e){h=!0,p=e}finally{try{f||null==v.return||v.return()}finally{if(h)throw p}}return nM.p.set(i,!0)},provide:function(e){return nM.tk.decorations.from(e)}});function hl(e,t){var n,r=document.createDocumentFragment(),i=null===(n=e.facet(f4.dK))||void 0===n?void 0:n.parser;if(!i){var o=document.createElement("span");return o.textContent=t,r.append(o),r}var a=i.parse(t),l=0;if((0,f3.bW)(a,{style:function(t){return(0,f4.QN)(e,t)}},function(e,n,i){if(e>l){var o=document.createElement("span");o.textContent=t.slice(l,e),r.append(o)}var a=document.createElement("span");a.className=i,a.textContent=t.slice(e,n),r.append(a),l=n}),l<t.length){var c=document.createElement("span");c.textContent=t.slice(l),r.append(c)}return r}var hc=function(e){"use strict";(0,fE._)(n,e);var t=(0,fT._)(n);function n(e){var r;return(0,fS._)(this,n),(r=t.call(this)).line=e,r}var r=n.prototype;return r.eq=function(e){return this.line===e.line},r.toDOM=function(){var e=document.createElement("div");return e.className="cm-diff-gutter-element-fallback",e.innerText=this.line.toString(),e},n}(nM.SJ),hs=function(e){"use strict";(0,fE._)(n,e);var t=(0,fT._)(n);function n(e,r){var i;return(0,fS._)(this,n),(i=t.call(this)).elementClass="cm-diff-gutter-block",i.lines=e,r&&(i.preceding=r),i}var r=n.prototype;return r.eq=function(e){var t,n,r,i;if((null===(t=this.lines)||void 0===t?void 0:t.length)!==(null==e?void 0:null===(n=e.lines)||void 0===n?void 0:n.length)||(null===(r=this.preceding)||void 0===r?void 0:r.length)!==(null==e?void 0:null===(i=e.preceding)||void 0===i?void 0:i.length))return!1;if(this.preceding&&e.preceding)for(var o=0;o<this.preceding.length;o++){var a=this.preceding[o],l=e.preceding[o];if(a.height!==l.height||a.left!==l.left||a.right!==l.right)return!1}if(this.lines&&e.lines)for(var c=0;c<this.lines.length;c++){var s=this.lines[c],u=e.lines[c];if(s.height!==u.height||s.left!==u.left||s.right!==u.right)return!1}return!0},r.toDOM=function(){var e=this,t=document.createElement("div");if(this.preceding){var n=this.preceding.slice().reverse(),r=0,i=!0,o=!1,a=void 0;try{for(var l,c=n[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;r+=s.height;var u=this.piece(s);u.style.position="absolute",u.style.top="-".concat(r,"px"),t.prepend(u)}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}}var d=this.lines.map(function(t){return e.piece(t)});return t.append.apply(t,(0,e_._)(d)),t},r.piece=function(e){var t=e.height,n=e.left,r=e.right,i=document.createElement("span");i.className="cm-diff-gutter-part",null!==n&&(i.innerText=n.toString());var o=document.createElement("span");o.className="cm-diff-gutter-part",null!==r&&(o.innerText=r.toString());var a=document.createElement("div");return a.className="cm-diff-gutter-element",a.style.height="".concat(t,"px"),a.append(i,o),(null===n||null===r)&&(null===r&&a.classList.add("cm-diff-gutter-deleted"),null===n&&a.classList.add("cm-diff-gutter-inserted")),a},n}(nM.SJ),hu=(0,nM.v5)({class:"cm-lineNumbers cm-diff-gutter",markers:function(e){var t=e.viewportLineBlocks,n=[],r=f7(e.state).compareTo,i=e.state.field(ht,!1),o=function(e,t){n.push({from:e,to:e,value:t})};if(!r||!i){var a=!0,l=!1,c=void 0;try{for(var s,u=t[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var d=s.value,f=e.state.doc.lineAt(d.from).number;if(d.type===nM.kH.Text)o(d.from,new hc(f));else if(Array.isArray(d.type)){var h=!0,p=!1,m=void 0;try{for(var v,g=d.type[Symbol.iterator]();!(h=(v=g.next()).done);h=!0){var y=v.value;if(y.type===nM.kH.Text){o(y.from,new hc(f));break}}}catch(e){p=!0,m=e}finally{try{h||null==g.return||g.return()}finally{if(p)throw m}}}}}catch(e){l=!0,c=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw c}}return nF.Xs.of(n,!0)}var b=!0,Z=!1,w=void 0;try{for(var x,C=t[Symbol.iterator]();!(b=(x=C.next()).done);b=!0){var _=x.value,S=[],E=e.state.doc.lineAt(_.from).number,k=i.line(E);if(k){var T=e.defaultLineHeight,R=k.offset,D=k.isDeleted,I=k.insertions,G=1===E?i.startInsertions():null,B=G?G.length:0,A=G?[]:null;if(!(Array.isArray(_.type)&&_.type.length>=B+(null!==(L=null==I?void 0:I.length)&&void 0!==L?L:0)+1)){if(G&&A){var P=!0,N=!1,U=void 0;try{for(var L,O,M=G[Symbol.iterator]();!(P=(O=M.next()).done);P=!0){var X=O.value;A.push({height:T,left:null,right:X.number})}}catch(e){N=!0,U=e}finally{try{P||null==M.return||M.return()}finally{if(N)throw U}}}if(S.push({height:_.height,left:E,right:D?null:E+R}),I){var F=!0,W=!1,H=void 0;try{for(var V,z=I[Symbol.iterator]();!(F=(V=z.next()).done);F=!0){var j=V.value;S.push({height:T,left:null,right:j.number})}}catch(e){W=!0,H=e}finally{try{F||null==z.return||z.return()}finally{if(W)throw H}}}o(_.from,new hs(S,A));continue}for(var q=0;q<_.type.length;q++){var Y=_.type[q];if((null==Y?void 0:Y.type)===nM.kH.Text){if(G&&A)for(var $=0;$<G.length;$++){var J,K=G[$],Q=_.type[q-$-1];A.push({height:null!==(J=null==Q?void 0:Q.height)&&void 0!==J?J:T,left:null,right:K.number})}if(S.push({height:Y.height,left:E,right:D?null:E+R}),I)for(var ee=0;ee<I.length;ee++){var et,en=I[ee],er=_.type[q+ee+1];S.push({height:null!==(et=null==er?void 0:er.height)&&void 0!==et?et:T,left:null,right:en.number})}break}}o(_.from,new hs(S,A))}}}catch(e){Z=!0,w=e}finally{try{b||null==C.return||C.return()}finally{if(Z)throw w}}return nF.Xs.of(n,!0)},lineMarkerChange:function(e){if(e.docChanged)return!0;var t=!0,n=!1,r=void 0;try{for(var i,o=e.transactions[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;if(f7(a).changed)return!0}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}return!1},initialSpacer:function(e){return new hc(e.state.doc.lines)},updateSpacer:function(e,t){var n=t.state.doc.lines;return f7(t.state).compareTo?new hs([{height:0,left:n,right:n}]):new hc(n)}}),hd="#0053A644",hf="#c93c3733",hh=[nM.tk.theme({".cm-diff-inserted":{backgroundColor:hd},".cm-diff-deleted":{backgroundColor:hf},".cm-diff-gutter .cm-diff-gutter-block":{position:"relative",padding:"0"},".cm-diff-gutter-element":{display:"flex",width:"100%",alignItems:"center",columnGap:"8px",padding:"0 6px",borderLeft:"4px solid transparent"},".cm-diff-gutter-part":{display:"inline-block",height:"100%",width:"50%",textAlign:"center"},".cm-diff-gutter-inserted":{backgroundColor:hd,borderLeftColor:"#0053A6"},".cm-diff-gutter-deleted":{backgroundColor:hf,borderLeftColor:"#c93c37"},".cm-diff-gutter + .cm-foldGutter":{width:"0",transform:"translateX(-12px)",overflow:"visible"},".cm-diff-gutter .cm-diff-gutter-element":{paddingRight:"16px"},".cm-diff-gutter .cm-diff-gutter-element-fallback":{paddingRight:"12px"}}),f9.state,ht,ha,hu,(0,f4.mi)({openText:"▼",closedText:"▶︎"})],hp=n(57953),hm=function(){"use strict";function e(t){var n=this;(0,fS._)(this,e),this.view=t,this.overlay=document.createElement("div"),this.overlay.className="cm-overlay-generic",this.overlay.style.pointerEvents="none",this.overlay.style.contain="size style",this.overlay.setAttribute("aria-hidden","true"),this.view.scrollDOM.appendChild(this.overlay),this.elements=new Map,this.measureRequest={key:this,read:function(){var e=[],t=n.view.scrollDOM.getBoundingClientRect(),r=n.view.scrollDOM.scrollTop,i=n.view.scrollDOM.scrollLeft,o=!0,a=!1,l=void 0;try{for(var c,s=n.elements.values()[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var u=c.value,d=u.dom,f=u.pos,h=u.offsetX,p=u.offsetY,m=n.view.coordsAtPos(f),v=n.view.lineBlockAt(f);if(!m){e.push({dom:d,x:null,y:null});continue}var g=v.top-r+t.top+n.view.documentPadding.top,y=Math.round((m.top-g)/n.view.defaultLineHeight)*n.view.defaultLineHeight+g,b=i+m.left-t.left+h,Z=r+y-t.top+p;e.push({dom:d,x:b,y:Z})}}catch(e){a=!0,l=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}return e},write:function(e){var t=!0,n=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(t=(i=o.next()).done);t=!0)!function(){var e=i.value,t=e.dom,n=e.x,r=e.y;if(null===n||null===r)return t.style.visibility="hidden",t.style.transition="none";t.style.visibility="",t.style.transform="translate(".concat(n,"px, ").concat(r,"px)"),t.style.transition.startsWith("none")&&requestAnimationFrame(function(){t.style.transition=""})}()}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}}}}var t=e.prototype;return t.destroy=function(){this.view.scrollDOM.removeChild(this.overlay)},t.map=function(e){if(e.geometryChanged||e.viewportChanged){if(e.docChanged){var t=Array.from(this.elements.values()),n=!0,r=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value,c=e.changes.mapPos(l.pos,-1,nF.gc.TrackDel);if(!c){this.removeElement(l.dom);continue}l.pos=c}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}}this.view.requestMeasure(this.measureRequest)}},t.addElement=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(!this.elements.has(e)){var i={dom:e,pos:t,offsetX:n,offsetY:r};return this.elements.set(e,i),this.overlay.appendChild(e),e.style.visibility="hidden",e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.willChange="transform",e.style.transition="none",this.view.requestMeasure(this.measureRequest),i}},t.removeElement=function(e){this.elements.has(e)&&(this.elements.delete(e),e.parentNode===this.overlay&&this.overlay.removeChild(e))},t.updateElement=function(e,t){var n=t.pos,r=t.offsetX,i=t.offsetY,o=this.elements.get(e);o&&(void 0!==n&&(o.pos=n),void 0!==r&&(o.offsetX=r),void 0!==i&&(o.offsetY=i),this.view.requestMeasure(this.measureRequest))},t.clear=function(){this.elements.clear(),this.overlay.innerHTML=""},e}();(f=k||(k={}))[f.Insertion=0]="Insertion",f[f.Deletion=1]="Deletion";var hv=function(){"use strict";function e(t){(0,fS._)(this,e),this.map=new Map,this.duration=t}var t=e.prototype;return t.set=function(e,t,n,r,i){var o=this.map.get(e);o||(o=new Map,this.map.set(e,o)),o.set(t,{from:e,to:t,time:n,type:r,cursor:i})},t.get=function(e,t){var n=this.map.get(e);if(n)return n.get(t)},t.update=function(t){var n=Date.now(),r=new e(this.duration),i=!0,o=!1,a=void 0;try{for(var l,c=this[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;if(!(n-s.time>this.duration)){var u=t.changes.mapPos(s.from,-1,nF.gc.TrackDel),d=t.changes.mapPos(s.to,-1,nF.gc.TrackDel);if(null!==u&&null!==d){var f=s.cursor;t.docChanged&&(f=!1),r.set(u,d,s.time,s.type,f)}}}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return t.changes.iterChangedRanges(function(e,t,i,o){r.set(i,o,n,i!==o?0:1,!0)},!0),r},t.cursors=function(){var e,t,n,r,i,o,a;return(0,eF.Jh)(this,function(l){switch(l.label){case 0:e=!0,t=!1,n=void 0,l.label=1;case 1:l.trys.push([1,6,7,8]),r=this[Symbol.iterator](),l.label=2;case 2:if(e=(i=r.next()).done)return[3,5];if(!(o=i.value).cursor)return[3,4];return[4,{type:o.type,pos:o.to}];case 3:l.sent(),l.label=4;case 4:return e=!0,[3,2];case 5:return[3,8];case 6:return a=l.sent(),t=!0,n=a,[3,8];case 7:try{e||null==r.return||r.return()}finally{if(t)throw n}return[7];case 8:return[2]}})},t[Symbol.iterator]=function(){var e=[],t=!0,n=!1,r=void 0;try{for(var i,o=this.map.values()[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value,l=!0,c=!1,s=void 0;try{for(var u,d=a.values()[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var f=u.value;e.push(f)}}catch(e){c=!0,s=e}finally{try{l||null==d.return||d.return()}finally{if(c)throw s}}}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}return e[Symbol.iterator]()},e}(),hg="cm-flash-insertion",hy="cm-flash-deletion",hb="cm-flash-element",hZ=nM.tk.theme((0,O._)({},".".concat(hg,", .").concat(hy),{display:"inline-block"})),hw=function(e){"use strict";(0,fE._)(n,e);var t=(0,fT._)(n);function n(){return(0,fS._)(this,n),t.apply(this,arguments)}var r=n.prototype;return r.isNested=function(){for(var e=this.parentElement;e&&!e.classList.contains("cm-line");){if(e instanceof n&&e.type===this.type)return!0;e=e.parentElement}return!1},r.stop=function(){var e,t;null===(t=this.animation)||void 0===t||null===(e=t.cancel)||void 0===e||e.call(t)},r.play=function(){var e=this.isPlaying;if(this.stop(),!this.isNested()){var t=Date.now()-parseInt(this.getAttribute("data-time")||"0",10);if(!(t>1e3)){var n=this.type===k.Insertion?"rgba(100, 255, 0, 0.3)":"rgba(255, 32, 32, 0.25)";this.animate&&(this.animation=this.animate({backgroundColor:e?[n,n,"transparent"]:["transparent",n,"transparent"],offset:[0,.05,1]},{id:"cm-flash-anim",duration:1e3,easing:"ease-in-out",delay:-t}))}}},r.connectedCallback=function(){this.play()},r.attributeChangedCallback=function(e,t,n){"data-time"===e&&n&&this.play()},(0,hp._)(n,[{key:"type",get:function(){return this.classList.contains(hg)?k.Insertion:k.Deletion}},{key:"isPlaying",get:function(){var e;return(null===(e=this.animation)||void 0===e?void 0:e.playState)==="running"}}],[{key:"observedAttributes",get:function(){return["data-time"]}}]),n}((0,fk._)(HTMLElement));customElements.get(hb)||customElements.define(hb,hw);var hx=function(){"use strict";function e(t){(0,fS._)(this,e),this.view=t,this.prevFlashes=new hv(1e3),this.decorations=nM.p.set([]),this.hasRenderedOnce=!1,this.overlay=new hm(t)}var t=e.prototype;return t.destroy=function(){this.overlay.destroy()},t.update=function(e){if(!this.hasRenderedOnce){e.docChanged&&(this.hasRenderedOnce=!0);return}var t=this.prevFlashes.update(e),n=[],r=!0,i=!1,o=void 0;try{for(var a,l=t[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;switch(c.type){case k.Insertion:n.push({from:c.from,to:c.to,value:(s=c.time,nM.p.mark({class:hg,tagName:hb,attributes:{"data-time":s.toString()}}))});break;case k.Deletion:var s,u,d=e.state.wordAt(c.from);d&&n.push({from:d.from,to:c.to,value:(u=c.time,nM.p.mark({class:hy,tagName:hb,attributes:{"data-time":u.toString()}}))})}}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}this.overlay.clear();var f=this.view.defaultLineHeight.toString()+"px",h=!0,p=!1,m=void 0;try{for(var v,g=t.cursors()[Symbol.iterator]();!(h=(v=g.next()).done);h=!0){var y=v.value,b=y.type,Z=y.pos,w=function(e,t){var n=e===k.Insertion?"rgba(0, 100, 255, 1)":"rgba(255, 32, 32, 1)",r=document.createElement("div");return r.style.width="3px",r.style.height=t,r.style.borderRadius="1px",r.style.backgroundColor=n,r.animate&&r.animate({opacity:[1,0]},{duration:500,delay:400,fill:"forwards"}),r}(b,f);this.overlay.addElement(w,Z)}}catch(e){p=!0,m=e}finally{try{h||null==g.return||g.return()}finally{if(p)throw m}}this.prevFlashes=t,this.decorations=nM.p.set(n,!0)},e}(),hC=nM.lg.fromClass(hx,{decorations:function(e){return e.decorations}}),h_=nF.Wl.lowest([hZ,hC]),hS=n(3574),hE=n(62808),hk=function(){"use strict";function e(t){(0,fS._)(this,e),this.changes=[],this.forward=[],this.inverted=[],this.locations=[];var n=!0,r=!1,i=void 0;try{for(var o,a=this,l=t[Symbol.iterator]();!(n=(o=l.next()).done);n=!0)!function(){var e=o.value,t=e.changes,n=e.invertedChanges,r=null,i=!1;t.iterChangedRanges(function(e,t,n,o){i||(r||(r=o),n===o||(i=!0))}),a.forward.push(t),a.inverted.push(n),a.locations.push(r)}()}catch(e){r=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw i}}}var t=e.prototype;return t.slice=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length;if(t>this.length||n>this.length||t<0||n<0)throw Error("Invalid version range");if(t===n){if(0===this.length)return[nF.as.empty(0),null];var r=this.forward[t].newLength;return[nF.as.empty(r),null]}var i=t<n?hT(this.forward.slice(t,n)):hT(this.inverted.slice(n,t).reverse()),o=t<n?t:n-1,a=null!==(e=this.locations[o])&&void 0!==e?e:null;return null!==a&&a>i.newLength&&(a=i.newLength),[i,a]},t.get=function(e){if(e>this.length||e<0)throw Error("Invalid version");return this.changes[e]},t.documentFor=function(e){if(e>this.length||e<0)throw Error("Invalid version");if(0===this.length)return"";var t=(0,M._)(this.slice(0,e),1)[0],n=nF.xv.of([""]);return t.apply(n).sliceString(0)},(0,hp._)(e,[{key:"length",get:function(){return this.forward.length}}]),e}();function hT(e){if(0===e.length)return nF.as.empty(0);if(1===e.length)return e[0];var t=(0,tW._)(e),n=t[0],r=t.slice(1),i=n,o=!0,a=!1,l=void 0;try{for(var c,s=r[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var u=c.value;i=i.compose(u)}}catch(e){a=!0,l=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}return i}var hR=new rA.j(function(){return(0,nM.CT)()}),hD=[h_,hh];function hI(e){var t,n,r,i=e.filePath,o=(0,fy.bA)(),a=(0,rG.Z)(),l=a.ref,c=a.view;(0,hS.VD)(c),(0,fy._H)(c);var s=(0,fA.j)();(0,hE.Y)({view:c}),t=(0,X.useMemo)(function(){return(null==o?void 0:o.changes)?new hk(o.changes):null},[null==o?void 0:o.changes]),n=(0,X.useMemo)(function(){return t?t.documentFor(t.length):null},[t]),r=(0,X.useRef)({current:-1,next:0,pending:!1}),(0,X.useEffect)(function(){if(c)return function(){r.current.pending=!1,r.current={current:-1,next:0,pending:!1}}},[c]),(0,X.useEffect)(function(){if(c&&o&&t){o.comparing?he(c,n):he(c,null);var e=r.current;e.next=o.version,e.pending||e.current===e.next||(e.pending=!0,requestAnimationFrame(function(){!1!==e.pending&&(e.pending=!1,c&&t&&e.current!==e.next&&(function(e,t,n,r){var i=(0,M._)(t.slice(n+1,r+1),2),o=i[0],a=i[1];if(o.length!==e.state.doc.length){var l=(0,M._)(t.slice(0,r+1),1)[0];if(l.length!==e.state.doc.length)throw Error("Unresolvable mismatch between changes and document");e.dispatch({changes:{from:0,to:e.state.doc.length}}),e.dispatch({changes:l});return}e.dispatch({changes:o,effects:a?nM.tk.scrollIntoView(a,{yMargin:10}):void 0})}(c,t,e.current,e.next),e.current=e.next))}))}},[c,o,t,n]);var u=hR.use();return(0,L.tZ)("div",{css:rW.ev,children:(0,L.tZ)("div",{css:rW.ac,children:o&&0===o.count?(0,L.tZ)(hG,{}):(0,L.tZ)("div",{css:rW.ac,children:(0,L.tZ)(rI.ZP,{ref:l,css:rW.Mp,filePath:i,extensions:[u,hD],initializing:!o,onException:function(e){s(e,"viewer-codemirror")},readOnly:!0,noHistory:!0,hideGutter:!0})})})})}function hG(){return(0,L.tZ)("div",{css:[rW.ac,{display:"flex",alignItems:"center",justifyContent:"center"}],children:(0,L.tZ)("span",{children:"This file has no history."})})}var hB=ed.Dy.Object({type:ed.Dy.Literal("history"),data:ed.Dy.Object({path:ed.Dy.Union([ed.Dy.String(),ed.Dy.Null()])})}),hA={Content:function(e){var t=e.pane,n=e.options;return(0,L.tZ)(hP,(0,eM._)((0,eO._)({},t.data),{performPaneOperation:n.performPaneOperation}))},Icon:function(e){var t=e.size;return(0,L.tZ)(ra.Z,{size:t})},getTitle:function(e){return e.data.path?"History - ".concat((0,eu.UO)(e.data.path)):"History - no file open"},decode:function(e){return ef.B4.Decode(hB,e)}};function hP(e){var t=e.path,n=e.performPaneOperation,r=(0,M._)((0,X.useState)(function(){return(0,eG.MT)()}),1)[0],i=(0,M._)((0,X.useState)(function(){return(0,eG.MT)()}),1)[0],o=(0,tG.Mp)({path:t,performPaneOperation:n});(0,er.L5)(function(){if(o)return{commands:o}},[o]);var a=(0,tk.Z)(function(){return function(){n({operation:"replace",pane:{type:"codeEditor",data:{path:t}}})}},[t,n]);return t?(0,L.tZ)(hS.Cl.Provider,{value:r,children:(0,L.tZ)(fy.ox.Provider,{value:i,children:(0,L.BX)("div",{css:{position:"relative",display:"flex",flexDirection:"column",overflowY:"hidden",height:"100%",width:"100%"},children:[(0,L.tZ)(tG.HK,{path:t,performPaneOperation:n}),(0,L.tZ)(hI,{filePath:t}),(0,L.tZ)(f2,{filePath:t,onCloseHistory:a})]})})}):null}var hN=n(52924),hU=n(65667),hL=n.n(hU),hO=n(45726),hM=n(11774),hX=(0,ee.X)({create:[J.l0.colWithGap(8),J.l0.p(8)],pedit:{width:"100%",height:"100%"},canvas:{width:"100%",height:"100%",outline:"none",position:"absolute",top:0,left:0},upgradeButton:[J.l0.position.absolute,J.l0.top(8),J.l0.left("50%"),{transform:"translateX(-50%)"}]});function hF(e){var t=e.data,n=e.onSave,r=X.useRef(null),i=X.useRef(null),o=(0,z.Z)().fs,a=(0,nL.Z)(),l=a.showError,c=a.showConfirm,s=(0,M._)(X.useState(!1),2),u=s[0],d=s[1],f=(0,j.Z)(function(){var e=r.current;if(!e)return null;e.width=e.offsetWidth,e.height=e.offsetHeight;var t=e.getContext("2d");t&&(t.imageSmoothingEnabled=!1)},{type:"debounce",wait:100});return X.useEffect(function(){var e=r.current;if(e){e.width=e.offsetWidth,e.height=e.offsetHeight;var o=hL()({canvas:e,data:t}),a=function(){return n(o.save())};return o.on("change",a),o.on("save",a),o.on("export",function(){return d(!0)}),i.current=o,e.focus(),function(){o&&o.cleanUp(),i.current&&(i.current=null)}}},[t,n,r]),(0,L.BX)(L.HY,{children:[(0,L.tZ)("canvas",{css:hX.canvas,ref:function(e){r.current=e,f(e)},tabIndex:0}),(0,L.tZ)(iq.u,{isOpen:u,onRequestClose:function(){return d(!1)},children:(0,L.tZ)(hO.Z,{prompt:"Export",desc:"What name to give to the exported file?",placeholder:"filename",type:"text",onCancel:function(){return d(!1)},onConfirm:function(e){if(!i.current){d(!1);return}var t="".concat(e,".png"),n=i.current.curFrame().toPNG();o.writeFile(t,r0.Z.from(n)).then(function(e){if(e.error){l("Failed to write to file ".concat(t));return}c("Successfully exported to ".concat(t)),d(!1)})}})})]})}function hW(e){var t,n=e.activeFile,r=(0,z.Z)().fs,i=(0,M._)(X.useState(!0),2),o=i[0],a=i[1],l=(0,M._)(X.useState(null),2),c=l[0],s=l[1],u=(0,nL.Z)().showError,d=n.endsWith(".kbmsprite");X.useEffect(function(){var e=!1;function t(){return(t=(0,eX._)(function(){var t,i,o;return(0,eF.Jh)(this,function(l){switch(l.label){case 0:return[4,r.readFile(n)];case 1:if(t=l.sent(),a(!1),e)return[2];if(t.error)return u("failed to read ".concat(n)),[2];return o=(i=t.content.toString())&&JSON.parse(i),s(d?(0,hM.C)(o):o),[2]}})})).apply(this,arguments)}return!function(){t.apply(this,arguments)}(),function(){e=!0}},[r,n,u,d]);var f=X.useCallback((t=(0,eX._)(function(e){return(0,eF.Jh)(this,function(t){switch(t.label){case 0:if(!d)return[3,2];return[4,(0,hM.u)(e)];case 1:e=t.sent(),t.label=2;case 2:return[4,r.writeFile(n,r0.Z.from(JSON.stringify(e)))];case 3:return t.sent().error&&u("Failed to save ".concat(n,", please try again")),[2]}})}),function(e){return t.apply(this,arguments)}),[r,n,u,d]);return o?(0,L.tZ)(eR.Z,{}):c?(0,L.tZ)(hF,{data:c,onSave:f}):(0,L.tZ)(hH,{onCreate:function(e){return s(e)}})}function hH(e){var t=e.onCreate,n=(0,M._)(X.useState(""),2),r=n[0],i=n[1],o=(0,M._)(X.useState(""),2),a=o[0],l=o[1],c=Number(r),s=Number(a);return(0,L.BX)(K.G,{css:hX.create,children:[(0,L.tZ)(Q.xv,{variant:"subheadDefault",multiline:!1,children:"Create a Pedit file"}),(0,L.tZ)(tH.II,{placeholder:"width",value:r,onChange:function(e){return i(e.target.value)}}),(0,L.tZ)(tH.II,{placeholder:"height",value:a,onChange:function(e){return l(e.target.value)}}),(0,L.tZ)(eV.zx,{text:"Create",disabled:!(c>0&&s>0),onClick:function(){t({width:Math.ceil(c),height:Math.ceil(s)})}})]})}var hV=ed.Dy.Object({type:ed.Dy.Literal("pedit"),data:ed.Dy.Object({path:ed.Dy.String()})}),hz={Content:function(e){var t=e.pane,n=e.options.performPaneOperation;return(0,L.tZ)(hj,{path:t.data.path,performPaneOperation:n})},Icon:function(e){var t=e.size;return(0,L.tZ)(hN.Z,{size:t})},getTitle:function(e){return(0,eu.UO)(e.data.path)},decode:function(e){return ef.B4.Decode(hV,e)}};function hj(e){var t=e.path,n=e.performPaneOperation,r=(0,tG.Mp)({path:t,performPaneOperation:n});return(0,er.L5)(function(){if(r)return{commands:r}},[r]),(0,L.BX)(L.HY,{children:[(0,L.tZ)(tG.HK,{path:t,performPaneOperation:n}),(0,L.tZ)(tG.VY,{children:(0,L.tZ)(hW,{activeFile:t})})]})}var hq=n(31105),hY=n(34581),h$=ed.Dy.Object({type:ed.Dy.Literal("unitTests")}),hJ={Content:function(e){var t=e.options,n=(0,hY.nC)(),r=(0,er.dr)();function i(){var e=n().find(function(e){var t=(0,M._)(e,2);return"runnerOutput"===(t[0],t[1].type)});if(e)return e[0]}return(0,L.tZ)(K.G,{css:[J.l0.p(8),tF.F3],children:(0,L.tZ)(hq.Z,{getRunnerOutput:function(){var e=i();if(e||t.performPaneOperation({operation:"open",secondary:!0,pane:{type:"runnerOutput"}}),e=i()){var n=r(e);if((null==n?void 0:n.type)==="runnerOutput")return n}}})})},Icon:function(e){var t=e.size;return(0,L.tZ)(nO.Z,{size:t})},getTitle:function(){return"Unit Tests"},decode:function(e){return ef.B4.Decode(h$,e)}},hK=n(83447),hQ=n(26397),h0=n(74883),h1=n(72129),h2=n(97703),h8=n(10169),h4=n(47507),h3=n(78094),h5=(0,eG.cn)(""),h6=(0,eG.cn)(null);(0,eG.cn)(null,(h=(0,eX._)(function(e,t){var n,r,i;return(0,eF.Jh)(this,function(o){return(n=e(h6))&&(r=e(h5),i=e(h8.FF),h4.kg.info("Ghostwriter Debugger error buffered",{debuggerBuffer:r,ghostwriterDebugError:n,inferredInterpreter:i})),t(h5,""),t(h6,null),[2]})}),function(e,t){return h.apply(this,arguments)}));var h9=n(3590),h7=function(e){var t=e.title,n=e.json,r=e.initialExpanded,i=(0,M._)((0,X.useState)(void 0===r||r),2),o=i[0],a=i[1];return(0,L.tZ)(nn.Q,{expanded:o,onClick:function(){return a(function(e){return!e})},headerContent:(0,L.tZ)(K.G,{css:[J.l0.rowWithGap(8),J.l0.align.center],children:(0,L.tZ)(Q.xv,{variant:"subheadDefault",multiline:!1,children:t})}),children:(0,L.tZ)(K.G,{css:[J.l0.p(12),J.l0.colWithGap(8),J.l0.height("100%")],children:(0,L.tZ)(h2.Z,{json:n})})})},pe=function(e){var t=e.title,n=e.text,r=(0,M._)((0,X.useState)(!0),2),i=r[0],o=r[1];return(0,L.tZ)(nn.Q,{expanded:i,onClick:function(){return o(function(e){return!e})},headerContent:(0,L.tZ)(K.G,{css:[J.l0.rowWithGap(8),J.l0.align.center],children:(0,L.tZ)(Q.xv,{variant:"subheadDefault",multiline:!1,children:t})}),children:(0,L.tZ)(K.G,{css:[J.l0.p(12),J.l0.colWithGap(8),J.l0.height("100%")],children:(0,L.tZ)(Q.xv,{variant:"small",css:[J.l0.fontSize(16),{whiteSpace:"pre-wrap"}],children:n})})})},pt=n(12621),pn=n(4498),pr=n(16643),pi=n(87659),po=n(97631);function pa(){var e=(0,nd._)(["\n  query AdminPanelGitView {\n    currentUser {\n      id\n      gitHubInfo {\n        accessToken\n        installations {\n          id\n          type\n          avatarUrl\n          name\n        }\n        userInfo {\n          name\n          email\n          avatarUrl\n        }\n      }\n    }\n  }\n"]);return pa=function(){return e},e}var pl={},pc=(0,nf.Ps)(pa());function ps(e){var t=e.event,n=t.input,r=t.output,i=t.error,o=t.start,a=t.end,l=t.cached,c=(0,M._)((0,X.useState)(!0),2),s=c[0],u=c[1],d=(0,X.useCallback)(function(){return u(function(e){return!e})},[]),f="bash"===n[0]&&"-c"===n[1]?n.slice(2).join(" "):n.join(" "),h=r.trimEnd();return(0,L.BX)(K.G,{css:[(0,pi.ec)(i?"negative":"positive"),l?{opacity:.75}:void 0,J.l0.borderRadius(8)],children:[(0,L.BX)(K.G,{onClick:d,onKeyDown:function(e){("Enter"===e.key||" "===e.key)&&d()},tabIndex:0,css:[J.l0.rowWithGap(4),J.l0.justify.spaceBetween,J.l0.py(4),J.l0.px(8),J.l0.font.code,J.l0.cursor.pointer],children:[(0,L.BX)("span",{css:{whiteSpace:"pre-wrap",wordBreak:"break-word"},children:["$ ",f]}),(0,L.BX)("span",{css:[J.l0.color.foregroundDimmer,J.l0.flex.shrink(0)],children:[i?(0,L.tZ)("span",{css:[J.l0.mr(16)],children:i}):null,l?(0,L.tZ)("span",{children:"CACHED"}):(0,L.BX)("span",{children:[a-o," ms"]})]})]}),s?null:(0,L.tZ)(K.G,{css:[J.l0.px(2),J.l0.pb(2),J.l0.borderRadius(0,0,8,8)],children:(0,L.tZ)(e$.Tg,{elevated:!0,css:[J.l0.p(8),J.l0.borderRadius(8)],children:(0,L.tZ)(pn.Z,{code:h})})})]})}var pu=n(24463),pd=n(88994),pf=n(61155);function ph(e){var t=e.t,n=e.children;return(0,L.BX)("span",{css:{display:"flex",alignItems:"flex-start",columnGap:"0.5rem"},children:[(0,L.BX)(Q.xv,{css:{minWidth:"8em"},multiline:!1,children:[t,":"," "]}),(0,L.tZ)("span",{children:n})]})}var pp=n(87271),pm=n(98463),pv=X.memo(function(e){var t,n=e.log,r=e.filters,i=e.timeRef,o=e.setTimeRef,a=r.highlightOnly&&(0,pp.cF)(n,r),l=null!==(t=n.cmd.channel)&&void 0!==t?t:0,c=(0,X.useMemo)(function(){var e=(0,eO._)({},n.cmd);return delete e.channel,e},[n]),s=JSON.stringify(c,null,2),u=i?n.timestamp-i:n.timestamp,d=(0,M._)((0,pf.Z)(!0),2),f=d[0],h=d[1];return(0,L.BX)(K.G,{css:[J.l0.my(4),J.l0.mx(4)],children:[(0,L.tZ)(K.G,{role:"button",onClick:h,onKeyDown:h,tabIndex:0,css:[a?J.l0.backgroundColor.accentPositiveDimmer:null,J.l0.flex.row,J.l0.rowWithGap(4),{"&:hover":{cursor:"pointer",".link":{textDecoration:"underline"}}}],children:(0,L.BX)(K.G,{css:[J.l0.flex.grow(1),J.l0.rowWithGap(4),{maxWidth:"100%"}],children:[(0,L.tZ)(Q.xv,{className:"icon",multiline:!1,children:"in"===n.dir?(0,L.tZ)(K.G,{css:J.l0.color.greenStrongest,children:"→"}):"out"===n.dir?(0,L.tZ)(K.G,{css:J.l0.color.redStrongest,children:"←"}):(0,L.tZ)(K.G,{css:J.l0.color.magentaStrongest,children:"⚠"})}),(0,L.tZ)(Q.xv,{className:"link",multiline:!1,children:(0,L.BX)("code",{children:["#",l," - ",n.channel.service,n.channel.name?"::".concat(n.channel.name):""]})}),(0,L.tZ)(Q.xv,{css:[J.l0.flex.growAndShrink(1),{opacity:.5}],multiline:!1,children:(0,L.tZ)("code",{style:{overflow:"hidden",textOverflow:"ellipsis"},children:s})}),null!=u&&(0,L.tZ)(K.G,{onClick:function(){o(n.timestamp)},css:{opacity:.5},children:(0,L.tZ)(Q.xv,{css:[J.l0.fontSize(13),{cursor:"pointer"}],multiline:!1,children:n.timestamp===i?"(reference)":(0,L.BX)(L.HY,{children:[u.toFixed(0)," ms"]})})})]})}),!f&&(0,L.tZ)(L.HY,{children:void 0!==c&&(0,L.tZ)(pm.g,{name:"cmd",src:c})})]})}),pg=(0,X.memo)(function(e){var t=e.logs,n=e.filters,r=e.timeRef,i=e.setTimeRef,o=(0,X.useRef)(null),a=(0,cD.MG)({count:t.length,getScrollElement:function(){return o.current},estimateSize:function(){return 28},overscan:10});return(0,L.BX)("div",{ref:o,className:"log-list",children:[(0,L.tZ)("div",{style:{height:"".concat(a.getTotalSize(),"px"),width:"100%",position:"relative"},children:a.getVirtualItems().map(function(e){return(0,L.tZ)("div",{"data-index":e.index,ref:a.measureElement,style:{position:"absolute",top:0,left:0,width:"100%",transform:"translateY(".concat(e.start,"px)")},children:(0,L.tZ)(pv,{log:t[e.index],filters:n,timeRef:r,setTimeRef:i})},e.key)})}),(0,L.tZ)("div",{className:"bottom-anchor"})]})}),py=function(e){var t=e.filters,n=e.updateFilters;return(0,L.BX)(K.G,{css:J.l0.colWithGap(4),children:[(0,L.tZ)(Q.xv,{variant:"subheadDefault",multiline:!1,children:"Regex (regex,flags):"}),(0,L.tZ)(tH.II,{id:"regex",onChange:function(e){var t=null;if(e.currentTarget.value){var r=(0,M._)(e.currentTarget.value.split(","),2),i=r[0],o=r[1];try{t=new RegExp(i,o)}catch(e){}}n({regexp:t})},placeholder:"\\w+,gi"}),(0,L.tZ)(Q.xv,{variant:"subheadDefault",multiline:!1,children:"Directions:"}),(0,L.tZ)(dp.E,{css:J.l0.rowWithGap(16),name:"direction",value:t.direction,onChange:function(e){var t=e.target.value;n({direction:"in"===t||"out"===t||""===t?t:""})},children:[{val:"",text:"Both"},{val:"in",text:"In"},{val:"out",text:"Out"}].map(function(e){return(0,L.BX)(K.G,{css:[J.l0.rowWithGap(8)],children:[(0,L.tZ)(dp.Y,{id:e.val,value:e.val}),(0,L.tZ)("label",{htmlFor:e.val,children:e.text})]},e.val)})}),(0,L.tZ)(Q.xv,{variant:"subheadDefault",multiline:!1,children:"Filter style:"}),(0,L.tZ)(dp.E,{css:J.l0.rowWithGap(16),name:"filter-style",value:t.highlightOnly?"highlight":"filter",onChange:function(e){return n({highlightOnly:"highlight"===e.target.value})},children:[{val:"highlight",text:"Highlight"},{val:"filter",text:"Filter"}].map(function(e){return(0,L.BX)(K.G,{css:[J.l0.rowWithGap(8)],children:[(0,L.tZ)(dp.Y,{id:e.val,value:e.val}),(0,L.tZ)("label",{htmlFor:e.val,children:e.text})]},e.val)})})]})},pb=n(94450),pZ=n.n(pb),pw=n(58130),px=n(17867),pC=n(11516),p_=n(29358),pS=n(83848),pE=n(16835);function pk(){var e=(0,nd._)(["\n  fragment AdminPanelRepl on Repl {\n    id\n    title\n    description\n    isProject\n    isPrivate\n    timeCreated\n    timeUpdated\n    slug\n    url\n    language\n    user {\n      id\n    }\n    config {\n      isServer\n      isVnc\n    }\n    isRenamed\n    isProjectFork\n    folderId\n    isOwner\n    origin {\n      id\n    }\n    source {\n      release {\n        id\n        repl {\n          id\n          url\n          templateLabel\n        }\n      }\n    }\n  }\n"]);return pk=function(){return e},e}function pT(){var e=(0,nd._)(["\n  query AdminPanelReplView($replId: String!) {\n    repl(id: $replId) {\n      ...AdminPanelRepl\n    }\n  }\n  ","\n"]);return pT=function(){return e},e}var pR={},pD=(0,nf.Ps)(pk()),pI=(0,nf.Ps)(pT(),pD),pG=n(96298),pB=n(95577);function pA(e){var t=e.sessionId,n=(0,M._)((0,X.useState)(!1),2),r=n[0],i=n[1],o=(0,M._)((0,X.useState)(""),2),a=o[0],l=o[1],c=(0,M._)((0,X.useState)(!1),2),s=c[0],u=c[1],d=(0,nL.Z)().showConfirm,f=(0,r1.U)();return null==t?(0,L.tZ)(K.G,{children:(0,L.tZ)(Q.xv,{multiline:!1,children:"Something went wrong... no RUM session found... Try refreshing the page"})}):(0,L.BX)(K.G,{css:[J.l0.colWithGap(8)],children:[(0,L.BX)(Q.xv,{variant:"small",multiline:!1,children:["RUM Session ID: ",t]}),(0,L.tZ)(Q.xv,{variant:"headerDefault",multiline:!1,children:"Submit an Issue"}),(0,L.BX)(K.G,{css:[J.l0.colWithGap(16)],children:[(0,L.tZ)(tH.B,{id:f("message"),placeholder:"What can we do better?",value:a,onChange:function(e){return l(e.target.value)},disabled:r}),(0,L.BX)(K.G,{css:[J.l0.rowWithGap(8)],children:[(0,L.tZ)(u6.X,{id:f("issueInRecording"),checked:s,onChange:function(e){return u(e.target.checked)}}),(0,L.tZ)("label",{htmlFor:f("issueInRecording"),children:(0,L.tZ)(Q.xv,{multiline:!1,children:"Issue is demoed in recording"})})]}),(0,L.tZ)(eV.zx,{onClick:function(){var e=r_()();i(!0),(0,h4.fc)({name:"replitOnReplit:issue",context:{message:a,issueInRecording:s,customEventId:e}}),d("Issue submitted! Have a cookie \uD83C\uDF6A",5e3),setTimeout(function(){i(!1),l(""),u(!1)},5e3)},text:"Submit",disabled:r||0===a.trim().length,colorway:"primary"})]})]})}(p=T||(T={})).Repl="repl",p.Logs="logs",p.LSP="lsp",p.AI="ai",p.GhostwriterChat="aiChat",p.AST="ast",p.Git="git",p.History2="history2",p.Metadata="metadata",p.Override="override",p.DDRum="rum";var pP=(R={},(0,O._)(R,"repl",function(){var e,t,n,r,i,o,a,l,c,s=(0,nu.Z)(),u=(e=(0,eO._)({},pR,{variables:{replId:s}}),nh.a(pI,e)).data,d=(null==u?void 0:u.repl.__typename)==="Repl"?JSON.parse(JSON.stringify(u.repl)):void 0;return d&&(delete d.__typename,null===(t=d.user)||void 0===t||delete t.__typename,null===(n=d.origin)||void 0===n||delete n.__typename,delete d.config.__typename,null===(r=d.source)||void 0===r||delete r.__typename,null===(o=d.source)||void 0===o||null===(i=o.release)||void 0===i||delete i.__typename,null===(c=d.source)||void 0===c||null===(l=c.release)||void 0===l||null===(a=l.repl)||void 0===a||delete a.__typename),(0,L.BX)(K.G,{css:[J.l0.colWithGap(16),J.l0.p(4)],children:[(0,L.tZ)(pG.Z,{replId:s}),(0,L.tZ)("div",{className:"jsx-3187c500f6b377b0",children:d?(0,L.tZ)(h2.Z,{json:d}):null}),(0,L.tZ)(pZ(),{id:"3187c500f6b377b0",children:"pre.jsx-3187c500f6b377b0{white-space:pre-wrap;word-wrap:break-word}"})]})}),(0,O._)(R,"logs",function(e){var t=e.isHidden,n=(0,M._)((0,pf.Z)(!1),2),r=n[0],i=n[1],o=(0,M._)((0,X.useState)(null),2),a=o[0],l=o[1],c=(0,eB.Dv)(pp.Sj),s=(0,M._)((0,eB.KO)(pp.a0),2),u=s[0],d=s[1],f=(0,M._)((0,eB.KO)(pp.ot),2),h=f[0],p=f[1],m=(0,eB.b9)(pp.UB);return t?null:(0,L.BX)(K.G,{css:[J.l0.colWithGap(8)],children:[(0,L.BX)(K.G,{css:[J.l0.colWithGap(8),J.l0.position.sticky,J.l0.top(0),J.l0.px(4),J.l0.pb(8),{"z-index":3},J.l0.backgroundColor.backgroundDefault],children:[(0,L.tZ)(eV.zx,{colorway:u?void 0:"positive",onClick:function(){d(function(e){return!e})},text:u?"Stop logging goval":"Start logging goval"}),(0,L.BX)(K.G,{css:[J.l0.rowWithGap(4),J.l0.justify.spaceBetween],children:[(0,L.tZ)(eV.zx,{onClick:i,text:r?"Hide filters":"Show filters"}),a?(0,L.tZ)(eV.zx,{onClick:function(){return l(null)},text:"Reset Time Ref"}):null,(0,L.tZ)(eE.hU,{alt:"Download as JSON",onClick:function(){var e="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(c)),t=document.createElement("a");t.setAttribute("href",e);var n=new Date().toISOString();t.setAttribute("download","logs-".concat(n.slice(0,n.indexOf(".")).replaceAll("-","").replaceAll(":",""),".json")),t.click()},size:32,children:(0,L.tZ)(e8.Z,{})}),(0,L.tZ)(eV.zx,{colorway:"negative",onClick:function(){return m()},text:"Clear logs"})]}),r?(0,L.tZ)(py,{filters:h,updateFilters:function(e){p((0,eO._)({},h,e))}}):null]}),(0,L.tZ)(pg,{logs:c,filters:h,timeRef:a,setTimeRef:l})]})}),(0,O._)(R,"lsp",pm.L),(0,O._)(R,"ai",pt.ho),(0,O._)(R,"aiChat",function(){var e=(0,h1.v)(),t=(0,nu.Z)(),n=(0,h9.ub)(),r=(0,nZ.R3)(),i=(0,o9.Og)(),o=(0,o9.Cd)(),a=(0,M._)((0,h3.wM)(h5),1)[0],l=(0,M._)((0,h3.wM)(h6),1)[0],c="chat-".concat(n,".json"),s=(0,M._)((0,X.useState)(".ghostwriter/".concat(c)),2),u=s[0],d=s[1],f=(0,z.Z)().fs,h=(0,nL.Z)().showError,p=(0,M._)((0,o9.zu)(),2),m=p[0],v=p[1],g=(0,X.useCallback)(function(){return JSON.stringify({chatModel:e,chatSessionId:n,replId:t,messages:m},null,2)},[e,n,t,m]),y=(0,X.useCallback)((0,eX._)(function(){var e,t;return(0,eF.Jh)(this,function(n){switch(n.label){case 0:e=g(),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,f.writeFile(u,r0.Z.from(e))];case 2:if((t=n.sent()).error)throw Error("fs error: ".concat(t.error));return[3,4];case 3:return h(n.sent().message),[3,4];case 4:return[2]}})}),[g,f,u,h]),b=(0,X.useCallback)((0,eX._)(function(){var e,t;return(0,eF.Jh)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,f.readFile(u)];case 1:if((e=n.sent()).error)throw Error("fs error: ".concat(e.error));if(!Array.isArray((t=JSON.parse(e.content.toString())).messages))throw Error("invalid chat JSON");return v(t.messages),[3,3];case 2:return h(n.sent().message),[3,3];case 3:return[2]}})}),[u,f,v,h]);return(0,L.tZ)(K.G,{css:J.l0.height("100%"),children:(0,L.BX)(hK.mQ,{css:[{width:"100%"}],children:[(0,L.BX)(hK.td,{withDividers:!1,children:[(0,L.tZ)(hK.OK,{iconLeft:(0,L.tZ)(hQ.Z,{}),children:"File Context"}),(0,L.tZ)(hK.OK,{iconLeft:(0,L.tZ)(hQ.Z,{}),children:"Debugger"}),(0,L.tZ)(hK.OK,{iconLeft:(0,L.tZ)(h0.Z,{}),children:"Messages"})]}),(0,L.BX)(hK.nP,{children:[(0,L.BX)(hK.x4,{children:[(0,L.tZ)(h7,{title:"active file",json:r}),(0,L.tZ)(h7,{title:"last stop reason",json:o}),(0,L.tZ)(pe,{title:"last prompt",text:i?JSON.stringify(JSON.parse(i),void 0,2):""})]}),(0,L.BX)(hK.x4,{children:[(0,L.tZ)(h7,{title:"buffered output",json:a}),(0,L.tZ)(h7,{title:"debug error context",json:l})]}),(0,L.tZ)(hK.x4,{children:(0,L.BX)(K.G,{css:[J.l0.colWithGap(8),J.l0.m(8)],children:[(0,L.BX)(e$.Tg,{background:"higher",css:[J.l0.borderRadius(8),J.l0.colWithGap(8),J.l0.p(8)],children:[(0,L.tZ)(Q.xv,{multiline:!1,children:"Chat History"}),(0,L.tZ)(tH.II,{type:"text",value:u,onChange:function(e){d(e.target.value)}}),(0,L.BX)(K.G,{css:[J.l0.rowWithGap(8),J.l0.flex.wrap],children:[(0,L.tZ)(eV.zx,{text:"Download",colorway:"primary",iconLeft:(0,L.tZ)(e8.Z,{}),onClick:function(){var e="data:text/json;charset=utf-8,"+encodeURIComponent(g()),t=document.createElement("a");t.setAttribute("href",e),t.setAttribute("download","".concat(c)),t.click()}}),(0,L.tZ)(eV.zx,{text:"Save to Repl",onClick:y,iconLeft:(0,L.tZ)(e8.Z,{})}),(0,L.tZ)(eV.zx,{text:"Load from Repl",onClick:b,iconLeft:(0,L.tZ)(sJ.Z,{})})]})]}),(0,L.BX)(K.G,{css:[J.l0.colWithGap(8)],children:[(0,L.tZ)("label",{css:J.l0.color.foregroundDimmer,htmlFor:"gw-debug-chatModel",children:"Chat Model"}),(0,L.tZ)(tH.II,{id:"gw-debug-chatModel",type:"text",readOnly:!0,value:e})]}),(0,L.BX)(K.G,{css:[J.l0.colWithGap(8)],children:[(0,L.tZ)("label",{css:J.l0.color.foregroundDimmer,htmlFor:"gw-debug-replId",children:"Repl Id"}),(0,L.tZ)(tH.II,{id:"gw-debug-replId",type:"text",readOnly:!0,value:t})]}),(0,L.BX)(K.G,{css:[J.l0.colWithGap(8)],children:[(0,L.tZ)("label",{css:J.l0.color.foregroundDimmer,htmlFor:"gw-debug-sessionId",children:"Session Id"}),(0,L.tZ)(tH.II,{id:"gw-debug-sessionId",type:"text",readOnly:!0,value:n})]})]})})]})]})})}),(0,O._)(R,"ast",hE.Z),(0,O._)(R,"git",function(){var e,t=(0,M._)((0,X.useState)([]),2),n=t[0],r=t[1],i=(e=(0,eO._)({},pl,void 0),nh.a(pc,e)).data,o=(0,pr.Z)(po.e);return(0,X.useEffect)(function(){o&&r(function(e){return e.length&&e[0].key===o.key?e:[o].concat((0,e_._)(e)).slice(0,100)})},[o]),(0,L.BX)(K.G,{css:[J.l0.p(8)],children:[(0,L.BX)(e$.Tg,{elevated:!0,css:[J.l0.borderRadius(8),J.l0.p(8),J.l0.mb(8)],children:[(0,L.tZ)("span",{children:"Git Service Connection Info"}),(0,L.tZ)("pre",{children:(null==i?void 0:i.currentUser)?JSON.stringify(i,function(e,t){return"accessToken"===e?"censored":t},2):"No gitHubInfo"})]}),(0,L.tZ)(K.G,{css:[J.l0.colWithGap(4)],children:n.length?n.map(function(e){return(0,L.tZ)(ps,{event:e},e.key)}):"No events yet..."})]})}),(0,O._)(R,"history2",function(){var e=(0,r1.U)()("toggleIsShowingChanges"),t=(0,pr.Z)(fy.BI)(),n=(0,pr.Z)(fy.Jp)(),r=(0,M._)((0,pf.Z)(!1),2),i=r[0],o=r[1];if(!t)return null;var a=t.filePath,l=t.changes,c=t.users,s=t.version,u=t.playing,d=t.count,f=l[s];if(!f)return(0,L.BX)(K.G,{children:[(0,L.BX)("div",{children:["Change at ",s," not found. Here's the state"]}),(0,L.tZ)("pre",{children:JSON.stringify(t,null,2)})]});var h=null==c?void 0:c[f.userId],p=f.timestamp,m=i&&n?function(e,t){try{return(0,pd.ed)(e,t).op}catch(e){return e}}(f.changes,n.state.doc.sliceString(0)):null;return(0,L.BX)(K.G,{css:[J.l0.colWithGap(16),J.l0.p(4)],children:[(0,L.BX)(K.G,{css:[J.l0.colWithGap(4)],children:[(0,L.tZ)(ph,{t:"File",children:(0,L.tZ)("pre",{children:a})}),(0,L.BX)(ph,{t:"Version",children:[s," / ",d-1]}),(0,L.tZ)(ph,{t:"Playing",children:(0,L.tZ)(pu.Z,{children:u?"true":"false"})}),(0,L.tZ)(ph,{t:"Date",children:(0,L.tZ)(cR.EK,{date:p})})]}),h?(0,L.BX)(K.G,{children:[(0,L.tZ)(ph,{t:"Author",children:h.username}),(0,L.BX)(K.G,{css:[J.l0.pl(8),J.l0.colWithGap(4)],children:[(0,L.tZ)(ph,{t:"ID",children:h.id}),(0,L.tZ)(ph,{t:"Name",children:h.username}),(0,L.tZ)(ph,{t:"Image",children:(0,L.tZ)("a",{href:h.image,children:h.image})})]})]}):null,(0,L.BX)(K.G,{css:[J.l0.rowWithGap(8),{alignItems:"center"}],children:[(0,L.tZ)(fH.Z,{id:e,isOn:i,onChange:o}),(0,L.tZ)("label",{htmlFor:e,children:"Changes"})]}),f?null:"No changes",i&&f?(0,L.tZ)(L.HY,{children:(0,L.BX)(K.G,{children:[(0,L.tZ)(ph,{t:"Changeset",children:(0,L.tZ)("pre",{children:JSON.stringify(f,null,2)})}),n?(0,L.tZ)(L.HY,{children:(0,L.BX)(K.G,{css:[J.l0.mt(4)],children:[(0,L.tZ)(ph,{t:"OT",children:(0,L.tZ)("pre",{children:JSON.stringify(m,null,2)})}),(0,L.tZ)("p",{children:(0,L.BX)("small",{children:["Note that the OT value is translated ",(0,L.tZ)("em",{children:"back"})," to an operational transformation from the CodeMirror changeset."]})})]})}):null]})}):null]})}),(0,O._)(R,"metadata",function(){var e=(0,z.Z)().container;(0,px.Z)(e);var t=e.getConnectionMetadata();if(!t)return(0,L.tZ)("div",{children:"no token yet, wait for connection"});var n=t.token,r=new URL(t.conmanURL).host,i='./conman-repl -t "'.concat(n,'" -u ').concat(r);return(0,L.BX)("div",{className:"jsx-2e9ac5ab034fc317 token-viewer",children:[(0,L.BX)(K.G,{css:J.l0.rowWithGap(2),children:[(0,L.BX)(Q.xv,{css:J.l0.flex.shrink(1),multiline:!1,children:["conman Repl command: ",(0,L.tZ)(pu.Z,{children:i})]}),(0,L.tZ)(eE.hU,{alt:"Copy to clipboard",onClick:function(){return(0,tq.Z)(i)},children:(0,L.tZ)(rK.Z,{})})]}),(0,L.BX)("div",{className:"jsx-2e9ac5ab034fc317",children:["metadata:",(0,L.tZ)("pre",{className:"jsx-2e9ac5ab034fc317",children:JSON.stringify(t,null,2)})]}),(0,L.tZ)("br",{className:"jsx-2e9ac5ab034fc317"}),(0,L.tZ)("br",{className:"jsx-2e9ac5ab034fc317"}),(0,L.BX)("div",{className:"jsx-2e9ac5ab034fc317",children:["parsed token:",(0,L.tZ)("pre",{className:"jsx-2e9ac5ab034fc317",children:JSON.stringify((0,pw.he)(t.token),null,2)})]}),(0,L.tZ)("br",{className:"jsx-2e9ac5ab034fc317"}),(0,L.tZ)("br",{className:"jsx-2e9ac5ab034fc317"}),(0,L.tZ)(pZ(),{id:"2e9ac5ab034fc317",children:".token-viewer.jsx-2e9ac5ab034fc317{height:100%;overflow:auto;padding:10px}pre.jsx-2e9ac5ab034fc317{white-space:pre-wrap;word-wrap:break-word}"})]})}),(0,O._)(R,"override",function(){var e,t,n=(0,M._)(X.useState(pC.Z.get("gurl","string")||""),2),r=n[0],i=n[1],o=(0,M._)(X.useState(pC.Z.get("pid2Version","string")||""),2),a=o[0],l=o[1],c=(0,M._)(X.useState(""),2),s=c[0],u=c[1],d=iW(),f=""===r?"null":JSON.stringify((0,pE.t)(r),null,2);return(0,L.BX)(K.G,{css:[J.l0.pt(16),J.l0.px(12),J.l0.colWithGap(12)],children:[(0,L.BX)(K.G,{css:[J.l0.colWithGap(12)],children:[(0,L.tZ)(p_.ZP,{label:"Custom pid2 version",placeholder:"pid2 hash (e.g. 76ce274246bb7a07f908076d3a74a0171c3267fb)",value:a,onChange:function(e){return l(e.currentTarget.value)}}),(0,L.BX)("p",{children:[(0,L.tZ)("code",{children:"pid2"})," version:"," ",(0,L.tZ)("code",{children:null!==(t=null!==(e=pC.Z.get("pid2Version","string"))&&void 0!==e?e:"25e32083db89370ec623410898ff6593cd2a6093")&&void 0!==t?t:"dev"})]}),(0,L.BX)(K.G,{css:[J.l0.rowWithGap(12)],children:[(0,L.tZ)(pS.Z,{color:"yellow",onClick:function(){pC.Z.set("pid2Version",a),window.location.reload()},children:"Set pid2Version and reload"}),(0,L.tZ)(pS.Z,{color:"orange",onClick:function(){pC.Z.remove("pid2Version"),window.location.reload()},children:"Unset pid2Version and reload"})]})]}),(0,L.tZ)("hr",{css:[J.l0.my(16),{borderColor:J.TV.outlineDefault}]}),(0,L.BX)(K.G,{css:[J.l0.colWithGap(12)],children:[(0,L.tZ)(p_.ZP,{label:"Custom gurl",placeholder:"ws://localhost:".concat(4560),value:r,onChange:function(e){return i(e.currentTarget.value)}}),(0,L.BX)("pre",{children:["metadata override preview:",f]}),(0,L.BX)(K.G,{css:[J.l0.rowWithGap(12)],children:[(0,L.tZ)(pS.Z,{color:"positive",onClick:function(){pC.Z.set("gurl",r),window.location.reload()},children:"Set gurl and reload"}),(0,L.tZ)(pS.Z,{color:"yellow",onClick:function(){pC.Z.set("gurl","wss://eval.canary.replit.com"),window.location.reload()},children:"Switch to canary & reload"}),(0,L.tZ)(pS.Z,{color:"orange",onClick:function(){pC.Z.remove("gurl"),window.location.reload()},children:"Unset gurl and reload"})]}),(0,L.tZ)("div",{children:pC.Z.get("gurl","string")?"currently in localStorage: ".concat(pC.Z.get("gurl","string")):'No gurl set in local storage, using default gurl for this user, check "Token" tab for details'}),(0,L.tZ)("p",{children:"Gurl order of precedence:"}),(0,L.BX)("ol",{style:{margin:12},children:[(0,L.tZ)("li",{children:"‘gurl’ in localStorage (set above)"}),(0,L.BX)("li",{children:["If in development webapp and a there’s a response from",(0,L.tZ)("code",{children:"https://localhost:4563"})," or",(0,L.BX)("code",{children:["http://localhost:",4560]}),", then it will use that."]}),(0,L.BX)("li",{children:["default is ",(0,L.tZ)("code",{children:"wss://eval.<usercluster>.replit.com"})]})]})]}),(0,L.tZ)("hr",{css:[J.l0.my(16),{borderColor:J.TV.outlineDefault}]}),(0,L.BX)(K.G,{css:[J.l0.colWithGap(12)],children:[(0,L.tZ)(Q.xv,{multiline:!1,children:"Override Database"}),(0,L.tZ)(p_.ZP,{type:"text",value:s,onChange:function(e){u(e.target.value)}}),(0,L.tZ)(K.G,{css:[J.l0.rowWithGap(8)],children:(0,L.tZ)(pS.Z,{color:"positive",onClick:function(){d(s)},children:"Override Postgres connection string"})})]})]})}),(0,O._)(R,"rum",function(){var e,t=null===(e=pB.v.getInternalContext())||void 0===e?void 0:e.session_id,n=pB.v.getInitConfiguration(),r=null!=n&&100===n.sampleRate,i=(0,M._)((0,X.useState)(null!=t),2),o=i[0],a=i[1];return(0,L.tZ)(K.G,{css:[J.l0.colWithGap(16),J.l0.p(4)],children:r?(0,L.BX)(L.HY,{children:[(0,L.tZ)(eV.zx,{onClick:o?function(){pB.v.stopSessionReplayRecording(),document.cookie="_dd_s=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",window.location.href=window.location.href.split("?")[0]}:function(){(0,h4.Oo)({name:"replitOnReplit"}),setTimeout(function(){a(!0)},1e3)},text:o?"\uD83D\uDD34 Recording... Click to stop and reload page":"Start Recording",colorway:o?void 0:"primary",css:(0,eO._)({},o&&eq.p.backgroundPulse(J.TV.redDimmest,J.TV.redDimmer))}),o?(0,L.tZ)(pA,{sessionId:t}):null]}):(0,L.tZ)(eV.zx,{onClick:function(){window.location.href=window.location.href.split("?")[0].split("#")[0]+"?rum=1"},text:"Click to reload and start recording",colorway:"primary"})})}),R),pN=Object.values(T);function pU(e){var t=e.paneOptions,n=(0,M._)((0,X.useState)("repl"),2),r=n[0],i=n[1],o=pN.map(function(e){return(0,L.tZ)(eV.zx,{colorway:e===r?"primary":void 0,onClick:function(){return i(e)},text:e},e)});return(0,L.BX)(e$.Tg,{background:"default",css:[J.l0.colWithGap(8),J.l0.p(4),J.l0.height("100%")],children:[(0,L.tZ)(K.G,{css:{flexWrap:"wrap",flexDirection:"row",gap:"4px"},children:o}),(0,L.tZ)(K.G,{css:[J.l0.flex.growAndShrink(1),J.l0.overflow("auto")],children:Object.entries(pP).map(function(e){var n=(0,M._)(e,2),i=n[0],o=n[1];return(0,L.tZ)(K.G,{css:i!==r&&J.l0.display.none,children:"override"===i&&"override"!==r?null:(0,L.tZ)(o,{isHidden:t.isHidden||r!==i})},i)})})]})}var pL=n(87279),pO=ed.Dy.Object({type:ed.Dy.Literal("adminPanel")}),pM={Content:function(e){var t=e.options;return(0,L.tZ)(pU,{paneOptions:t})},Icon:function(e){var t=e.size;return(0,L.tZ)(pL.Z,{color:"red",size:t})},getTitle:function(){return"Debug"},decode:function(e){return ef.B4.Decode(pO,e)}},pX=n(9617),pF=n(71064),pW=n(35034),pH=n(15006);function pV(){var e=(0,nd._)(["\n  query SshConfigurator($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        replcoSSHUrl: hostedUrl(dotty: true)\n        owner {\n          __typename\n          ... on Team {\n            id\n            isTeamsPro: subscriptionIsType(subscriptionType: PRO)\n          }\n          ... on User {\n            id\n            username\n          }\n        }\n      }\n      ... on ReplRedirect {\n        replUrl\n      }\n      ... on SubscriptionExpiredError {\n        replId\n      }\n    }\n    currentUser {\n      id\n      userSubscriptionType\n    }\n  }\n"]);return pV=function(){return e},e}var pz={},pj=(0,nf.Ps)(pV()),pq=n(21557),pY=n(24801),p$=n(2454),pJ=n(78272),pK=n(86612),pQ=n(87001),p0=["ssh-dsa","ssh-ecdsa","ssh-ed25519","ssh-rsa"];function p1(e){var t=e.code,n=e.multiline;return(0,L.BX)(e$.Tg,{tag:"pre",elevated:!0,css:[J.l0.borderRadius(8),J.l0.p(8),J.l0.rowWithGap(8)],children:[(0,L.tZ)(Q.xv,{multiline:n,css:[J.l0.overflow("auto"),J.l0.font.code,J.l0.flex.growAndShrink(1),{"::-webkit-scrollbar":[J.l0.display.none]}],maxLines:n?void 0:1,children:t}),(0,L.tZ)(eE.hU,{onClick:function(){return(0,tq.Z)(t)},alt:"Copy",children:(0,L.tZ)(tj.Z,{})})]})}function p2(e,t){if(!e)return"Please add a key for this secret";if(!e.trim())return"The key must include a non-space character";if(t.includes(e))return"You already have this key";var n=e.split(" ");return 3!==n.length?"This seems to be an invalid key.":p0.includes(n[0])?null:"Key type is not valid."}function p8(e){return(0,L.BX)(K.G,{css:[J.l0.colWithGap(4)],children:[(0,L.tZ)("label",{htmlFor:e.id,children:(0,L.tZ)(Q.xv,{variant:"small",color:"dimmer",multiline:!1,children:e.label})}),e.children,e.error?(0,L.BX)(K.G,{css:[J.l0.rowWithGap(2),J.l0.align.center],children:[(0,L.tZ)(pH.Z,{}),(0,L.tZ)(Q.xv,{variant:"small",css:J.l0.color.accentNegativeStrongest,multiline:!1,children:e.error})]}):null]})}function p4(e){var t,n=e.authorizedKey,r=e.otherKeys,i=e.onUpdateKey,o=e.onSave,a=(0,M._)(X.useState(),2),l=a[0],c=a[1],s=X.useRef(null),u=function(){var e=p2(n.key,r);if(e){c(e),s.current&&s.current.focus();return}o()};X.useEffect(function(){!l||p2(n.key,r)||c(null)},[n.key,l,r]);var d=(t=function(e){"Enter"===e.key&&(e.preventDefault(),e.stopPropagation(),u())},function(e){e.stopPropagation(),t(e)}),f=(0,uv.d)(),h=(0,r1.U)()("key");return(0,L.BX)(e$.Tg,{elevated:!0,css:[J.l0.p(16),J.l0.borderRadius(8),J.l0.colWithGap(16)],children:[r&&0!==r.length?null:(0,L.tZ)(Q.xv,{children:"Before you can SSH to your Repl, you need to add an SSH key."}),(0,L.tZ)(p8,{id:h,label:"Key (in OpenSSH Public Key format)",error:l,children:(0,L.tZ)(tH.II,{id:h,ref:s,name:"key",value:n.key,spellCheck:!1,onChange:function(e){i(e.currentTarget.value)},onKeyDown:d})}),pq.ED||f?(0,L.tZ)(K.G,{css:[J.l0.colWithGap(8)],children:(0,L.BX)(Q.xv,{children:["Need a hand? The"," ",(0,L.tZ)("a",{href:"https://docs.replit.com/power-ups/ssh",target:"_blank",children:"SSH documentation"})," ","provides information about generating SSH keys."]})}):(0,L.BX)(K.G,{css:[J.l0.colWithGap(8)],children:[(0,L.tZ)(Q.xv,{children:"Need a hand? Generate a key:"}),(0,L.tZ)(p1,{code:'[ -s ~/.ssh/replit.pub ] || ssh-keygen -t ed25519 -f ~/.ssh/replit -q -N "" && cat ~/.ssh/replit.pub',multiline:!1}),(0,L.tZ)(Q.xv,{children:"Paste the result in the form above."})]}),(0,L.tZ)(K.G,{css:[J.l0.rowWithGap(8),J.l0.justify.spaceBetween],children:(0,L.tZ)(K.G,{css:J.l0.rowWithGap(8),children:(0,L.tZ)(eV.zx,{colorway:"primary",onClick:u,text:"Add SSH Key"})})})]})}function p3(e){var t=e.onAdd,n=e.otherKeys,r=(0,M._)(X.useState({key:""}),2),i=r[0],o=r[1];return(0,L.tZ)(p4,{authorizedKey:i,otherKeys:n,onUpdateKey:function(e){o(function(t){return t?(0,eM._)((0,eO._)({},t),{key:e}):t})},onSave:function(){o({key:""}),i.key&&t(i)}})}function p5(e){var t=e.authorizedKey,n=e.onDelete;return(0,L.BX)(K.G,{css:[ce.gU.filled,J.l0.p(8),J.l0.rowWithGap(8),J.l0.align.center,J.l0.justify.spaceBetween,J.l0.borderRadius(8)],children:[(0,L.tZ)(pF.Z,{size:24}),(0,L.BX)(Q.xv,{css:[J.l0.flex.growAndShrink(1)],maxLines:1,multiline:!1,children:[t.keytype," ",t.key.substring(0,8),"...",t.key.substring(t.key.length-8)," ",t.comment]}),(0,L.tZ)(eE.hU,{onClick:function(){return n(t)},alt:"Delete",size:28,children:(0,L.tZ)(pW.Z,{})})]})}function p6(e){var t=e.authorizedKeys,n=e.onAdd,r=e.onDelete;return(0,L.BX)(K.G,{css:J.l0.colWithGap(16),children:[(0,L.tZ)(pX.Z,{level:4,children:"Manage SSH Keys"}),Object.values(t).map(function(e){return(0,L.tZ)(p5,{authorizedKey:e,onDelete:r},e.key)}),(0,L.tZ)(p3,{onAdd:n,otherKeys:Object.keys(t)})]})}function p9(e){if(!e.length)return null;var t=e.split(" ");return t.length<3?null:{keytype:t[0],key:t[1],comment:t[2]}}function p7(e){var t=e.sshHostname,n=e.sshUser,r=e.sshPort,i="ssh -i ~/.ssh/replit -p ".concat(r," ").concat(n,"@").concat(t);return(0,L.BX)(K.G,{css:J.l0.colWithGap(16),children:[(0,L.tZ)(pX.Z,{level:5,children:"1. Quick-Connect SSH Command"}),(0,L.tZ)(Q.xv,{children:"You can connect to this Repl directly using the command below without any further configuration on your machine"}),(0,L.tZ)(p1,{code:i,multiline:!1})]})}function me(e){var t=e.initialAlias,n=e.sshHostname,r=e.sshUser,i=e.sshPort,o=(0,M._)(X.useState(t),2),a=o[0],l=o[1],c=a||t,s="Host ".concat(c,"\n  Hostname ").concat(n,"\n  Port ").concat(i,"\n  User ").concat(r,"\n  IdentityFile ~/.ssh/replit");return(0,L.BX)(K.G,{css:J.l0.colWithGap(16),children:[(0,L.tZ)(pX.Z,{level:5,children:"2. SSH Configuration File"}),(0,L.BX)(Q.xv,{children:["By adding a host entry to your SSH configuration file (typically"," ",(0,L.BX)(Q.xv,{css:[J.l0.font.code,J.l0.display.inline,J.l0.align.baseline],children:[pq.ED?"%HOMEPATH%":"~","/.ssh/config"]}),"), you can simplify the connection process and give this Repl an alias."]}),(0,L.BX)(K.G,{css:J.l0.colWithGap(4),children:[(0,L.tZ)(Q.xv,{children:"Host"}),(0,L.tZ)(Q.xv,{variant:"small",color:"dimmer",children:"Enter an alias for this Repl's SSH connection. This can be anything but it can only contain letters, numbers, dots, hyphens, and underscores are allowed, it also has to be unique on your machine."}),(0,L.tZ)(tH.II,{css:[J.l0.flex.grow(1),0===a.length?{borderColor:"".concat(J.TV.accentNegativeDefault," !important"),borderStyle:"solid !important",borderWidth:"1px !important",outlineColor:"".concat(J.TV.accentNegativeDefault," !important")}:null],value:a,spellCheck:!1,onChange:function(e){e.currentTarget.value.match(/^[a-zA-Z0-9.\-_]*$/)&&l(e.currentTarget.value)}})]}),(0,L.BX)(K.G,{css:J.l0.colWithGap(4),children:[(0,L.tZ)(Q.xv,{children:"Configuration file"}),(0,L.tZ)(p1,{code:s,multiline:!0})]}),(0,L.BX)(K.G,{css:J.l0.colWithGap(4),children:[(0,L.tZ)(Q.xv,{children:"Then connect using the following command"}),(0,L.tZ)(p1,{code:"ssh ".concat(c),multiline:!1})]})]})}function mt(e){var t=e.sshHostname,n=e.sshUser,r=e.sshPort;return(0,L.BX)(K.G,{css:J.l0.colWithGap(16),children:[(0,L.tZ)(pX.Z,{level:5,children:"3. SSH Client Configuration"}),(0,L.tZ)(Q.xv,{children:"There are many SSH clients available. Some even come with a graphical interface such as PuTTY (on Windows) or Termius (on Mac). You can configure your SSH key and the following values:"}),(0,L.BX)(K.G,{children:[(0,L.BX)(K.G,{css:J.l0.colWithGap(2),children:[(0,L.tZ)(Q.xv,{multiline:!1,children:"Hostname"}),(0,L.tZ)(p1,{code:t,multiline:!1})]}),(0,L.BX)(K.G,{css:J.l0.colWithGap(2),children:[(0,L.tZ)(Q.xv,{multiline:!1,children:"Username"}),(0,L.tZ)(p1,{code:n,multiline:!1})]}),(0,L.BX)(K.G,{css:J.l0.colWithGap(2),children:[(0,L.tZ)(Q.xv,{multiline:!1,children:"Port"}),(0,L.tZ)(p1,{code:r,multiline:!1})]})]})]})}function mn(e){var t=e.replId,n=function(e){var t=e.replId,n=e.replcoHostname,r=(0,rX.P5)({controlName:"flag-dot-dev-url",logFlagToAnalytics:!1}),i=(0,z.Z)().container,o=(0,pK.Z)(i);if(r&&o){var a=new URL(o).host,l=a.indexOf(":"),c="22";return -1!==l&&(a=a.substring(0,l),c="2022"),{sshUser:t,sshHostname:a,sshPort:c}}return{sshUser:t,sshHostname:n,sshPort:"22"}}({replId:t,replcoHostname:e.replcoHostname}),r=n.sshHostname,i=n.sshUser,o=n.sshPort;return(0,L.BX)(K.G,{css:J.l0.colWithGap(32),children:[(0,L.BX)(K.G,{css:J.l0.colWithGap(8),children:[(0,L.tZ)(pX.Z,{level:4,children:"Connecting to this Repl"}),(0,L.tZ)(Q.xv,{children:"Now that you have setup an SSH key. There are three ways you can connect to this Repl."})]}),(0,L.tZ)(p7,{sshHostname:r,sshUser:i,sshPort:o}),(0,L.tZ)(me,{initialAlias:t,sshHostname:r,sshUser:i,sshPort:o}),(0,L.tZ)(mt,{sshHostname:r,sshUser:i,sshPort:o})]})}function mr(){return(mr=(0,eX._)(function(e){return(0,eF.Jh)(this,function(t){switch(t.label){case 0:return[4,e.createDir(".config")];case 1:return t.sent(),[4,e.createDir(".config/ssh")];case 2:return t.sent(),[2]}})})).apply(this,arguments)}function mi(e){var t,n,r,i=e.replId,o=e.replcoHostname,a=(0,z.Z)().fs,l=(0,uX.Z)(),c=(0,M._)(X.useState(null),2),s=c[0],u=c[1];X.useEffect(function(){function e(){return(e=(0,eX._)(function(){var e,t;return(0,eF.Jh)(this,function(n){switch(n.label){case 0:return[4,function(e){return mr.apply(this,arguments)}(a)];case 1:return n.sent(),[4,a.readFile(".config/ssh/.authorized_keys")];case 2:if((e=n.sent()).error===eo.Df.NotFound)return l.current&&u({}),[2];if(e.error)throw Error("Error getting .authorized_keys");if(!l.current)return[2];return t={},e.content.toString().split("\n").forEach(function(e){if(!e.startsWith("#")){var n=p9(e);null!==n&&(t[n.key]=n)}}),u(t),[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[a,u,l]);var d=(t=(0,eX._)(function(e){var t,n;return(0,eF.Jh)(this,function(r){switch(r.label){case 0:if(!s)throw Error("trying to write authorized keys before loading");return u(t=function(e,t){var n=(0,eO._)({},e);if("add"===t.type){var r=p9(t.key);r&&(n[r.key]=r)}else delete n[t.key];return n}(s,e)),n="# generated file, use the SSH tool instead of editing\n"+Object.values(t).map(function(e){return"".concat(e.keytype," ").concat(e.key," ").concat(e.comment)}).join("\n"),[4,a.writeFile(".config/ssh/.authorized_keys",r0.Z.from(n))];case 1:return r.sent(),[2]}})}),function(e){return t.apply(this,arguments)}),f=(n=(0,eX._)(function(e){return(0,eF.Jh)(this,function(t){switch(t.label){case 0:return[4,d((0,eO._)({type:"add"},e))];case 1:return t.sent(),(0,rs.j)(rs.U3.SSH_CONFIGURATOR_USED,{action:"added"}),[2]}})}),function(e){return n.apply(this,arguments)}),h=(r=(0,eX._)(function(e){return(0,eF.Jh)(this,function(t){switch(t.label){case 0:return[4,d({type:"delete",key:e.key})];case 1:return t.sent(),(0,rs.j)(rs.U3.SSH_CONFIGURATOR_USED,{action:"deleted"}),[2]}})}),function(e){return r.apply(this,arguments)});return s?(0,L.BX)(K.G,{css:J.l0.colWithGap(16),children:[(0,L.BX)(Q.xv,{variant:"small",color:"dimmer",children:["Add authorized keys to configure SSH access to this Repl."," ",(0,L.tZ)("a",{href:"https://docs.replit.com/power-ups/ssh",target:"_blank",children:"Learn more here"}),"."]}),(0,L.BX)(K.G,{css:J.l0.colWithGap(32),children:[(0,L.tZ)(p6,{authorizedKeys:s,onAdd:f,onDelete:h}),Object.keys(s).length>0?(0,L.tZ)(mn,{replId:i,replcoHostname:o}):null]})]}):(0,L.tZ)(K.G,{css:[J.l0.center,J.l0.coverContainer],children:(0,L.tZ)(eR.Z,{size:24})})}function mo(e){var t=e.onPurchaseComplete,n=(0,M._)(X.useState(!1),2),r=n[0],i=n[1];return(0,L.BX)(K.G,{css:[J.l0.colWithGap(16)],children:[(0,L.BX)(Q.h4,{level:3,variant:"subheadDefault",children:["SSH is only available to Replit ",pQ.we," Members."]}),(0,L.BX)(Q.xv,{children:["With SSH, you can access your Repl's shell remotely. SSH enables workflows like easy file transfer or using your favorite local IDE to edit your code on Replit."," ",(0,L.tZ)("a",{href:"https://docs.replit.com/power-ups/ssh",target:"_blank",children:"Learn more here"})]}),(0,L.tZ)(eV.zx,{onClick:function(){return i(!0)},text:"Join Replit ".concat(pQ.we),iconLeft:(0,L.tZ)(p$.Z,{}),colorway:"blurple"}),(0,L.tZ)(pJ.Z,{isOpen:r,onClose:function(){return i(!1)},type:"purchase",onPurchaseComplete:t,analyticsContext:{upgrade:{context:"cycles_page"}}})]})}function ma(){var e,t,n,r=(t={variables:{replId:(0,nu.Z)()}},n=(0,eO._)({},pz,t),nh.a(pj,n)),i=r.data,o=r.loading,a=r.refetch;if(!i||o)return(0,L.tZ)(K.G,{css:[J.l0.center,J.l0.coverContainer],children:(0,L.tZ)(eR.Z,{size:24})});if("ReplRedirect"===i.repl.__typename)throw Error("Got repl redirect for replId query");if("SubscriptionExpiredError"===i.repl.__typename)return(0,L.tZ)(K.G,{children:(0,L.tZ)(Q.xv,{children:"This Repl is private and your subscription expried. Please reload for further action."})});if(!i.currentUser)return(0,L.tZ)(K.G,{children:(0,L.tZ)(Q.xv,{children:"You must be logged in to use SSH."})});var l=(0,pY.jX)(i.currentUser.userSubscriptionType),c=(null===(e=i.repl.owner)||void 0===e?void 0:e.__typename)==="Team"&&i.repl.owner.isTeamsPro;return l||c?(0,L.tZ)(mi,{replId:i.repl.id,replcoHostname:new URL(i.repl.replcoSSHUrl).hostname}):(0,L.tZ)(mo,{onPurchaseComplete:function(){a()}})}function ml(e){var t=e.children;return(0,L.tZ)(K.G,{css:[J.l0.height("100%"),J.l0.overflowY("auto"),tF.F3],children:(0,L.BX)(K.G,{css:[J.l0.p(8),J.l0.colWithGap(8),J.l0.flex.grow(1)],children:[(0,L.tZ)(K.G,{css:[J.l0.rowWithGap(8)],children:(0,L.tZ)(pX.Z,{truncate:!0,level:4,children:"SSH Configuration"})}),(0,L.tZ)(K.G,{css:[J.l0.flex.grow(1),J.l0.py(8),J.l0.position.relative],children:t})]})})}var mc=n(89788),ms=ed.Dy.Object({type:ed.Dy.Literal("sshConfigurator")}),mu={Content:function(){return(0,L.tZ)(md,{})},Icon:function(e){var t=e.size;return(0,L.tZ)(mc.Z,{size:t})},getTitle:function(){return"SSH"},decode:function(e){return ef.B4.Decode(ms,e)}};function md(){return(0,L.tZ)(ml,{children:(0,L.tZ)(ma,{})})}var mf=n(73030),mh=n(73164),mp=n(12880),mm=n(19408),mv=n(19615),mg=function(e){return"color-mix(in srgb, ".concat(i8.TV.blurpleDefault," ").concat(100*e,"%, transparent)")},my=J.nC.min(440),mb=(0,ee.X)({root:[J.l0.reset.button,ce.gU.filled,J.l0.borderRadius(4),J.l0.align.center,J.l0.p(6),J.l0.color.blurpleDefault,J.l0.cursor.pointer,J.l0.align.start,(D={},(0,O._)(D,my,[J.l0.rowWithGap(4),J.l0.align.center]),(0,O._)(D,ce.dj.interactiveBackground,mg(.1)),(0,O._)(D,ce.dj.interactiveBackgroundActive,mg(.2)),D)],iconText:J.l0.rowWithGap(4)});function mZ(e){return(0,L.BX)(K.G,{css:mb.root,onClick:e.onClick,children:[(0,L.BX)(K.G,{css:mb.iconText,children:[(0,X.cloneElement)(e.icon,{size:16,color:i8.TV.blurpleDefault}),(0,L.tZ)(Q.xv,{variant:"small",children:e.text})]}),(0,L.tZ)(Q.xv,{variant:"small",color:"dimmer",children:e.description})]})}var mw=(0,ee.X)({root:[J.l0.flex.growAndShrink(1),J.l0.position.relative,J.l0.overflow("auto"),J.l0.display.block],content:[J.l0.py(32),J.l0.px(32),J.l0.center,J.l0.colWithGap(12),J.l0.minHeight("100%")],header:[J.l0.colWithGap(8),J.l0.align.center,J.l0.maxWidth(370),J.l0.textAlign.center],buttons:[J.l0.colWithGap(8),(0,O._)({},my,[J.l0.align.center])]});function mx(e){var t,n,r,i,o=e.promptEditor,a=(r=(n=(0,M._)((0,hY.AA)(),1)[0])?mh.$R.from(n):null,i=null!=n?n:"filename.js",[{icon:(0,L.tZ)(mp.Z,{}),title:"Generate",description:"Create a personal assistant chatbot",action:"GENERATE"},{icon:(0,L.tZ)(pL.Z,{}),title:"Debug",description:"Fix the logic of updating price?",action:"DEBUG"},{icon:(0,L.tZ)(mm.Z,{}),title:"Explain",description:"How does ".concat(i," work?"),action:"EXPLAIN",promptToFill:n?"How can I improve the code in "+n:"How can I improve the code in "},{icon:(0,L.tZ)(mm.Z,{}),title:"Ask replit.com",description:"How to deploy a ".concat(null!==(t=null==r?void 0:r.name)&&void 0!==t?t:"python"," project?"),action:"REPLIT_DOCS"}]),l=(0,o9.Qn)();return o?(0,L.tZ)(K.G,{css:mw.root,children:(0,L.BX)(K.G,{css:mw.content,children:[(0,L.BX)(K.G,{css:mw.header,children:[(0,L.tZ)(mv.R,{advanced:!0}),(0,L.tZ)(Q.xv,{variant:"subheadBig",children:"Replit AI"}),(0,L.tZ)(Q.xv,{color:"dimmest",children:"Use Replit AI to set up new projects, answer questions about your code, and assist your thinking."})]}),(0,L.tZ)(K.G,{css:mw.buttons,children:a.map(function(e){return(0,L.tZ)(mZ,{icon:e.icon,text:e.title,description:e.description,onClick:function(){var t,n,r;r=null!==(n=e.promptToFill)&&void 0!==n?n:e.description,l(e.action),(0,rs.j)(rs.U3.GHOSTWRITER_CHAT_EXAMPLE_CLICKED,{title:e.title}),null==o||null===(t=o.setValue)||void 0===t||t.call(o,r),null==o||o.focus()}},e.action)})})]})}):null}var mC=function(){return(0,L.BX)(K.G,{css:[J.l0.colWithGap(16),J.l0.align.center,J.l0.p(24),J.l0.height("100%"),J.l0.justify.center],children:[(0,L.tZ)(K.G,{css:[J.l0.maxWidth(200)],children:(0,L.tZ)(ob.Z,{src:"/public/images/ghostwriter/orb.png",css:[{userSelect:"none",mixBlendMode:"screen",filter:"brightness(110%) saturate(1.2)",maskImage:"linear-gradient(".concat(J.TV.backgroundRoot,", transparent)")}],width:200,height:200,objectFit:"contain","aria-hidden":"true",alt:"",draggable:!1})}),(0,L.tZ)(Q.xv,{variant:"subheadBig",multiline:!1,children:"Chat with Replit AI"}),(0,L.BX)(K.G,{css:[J.l0.rowWithGap(8),J.l0.align.center],children:[(0,L.tZ)(eR.Z,{}),(0,L.tZ)(Q.xv,{color:"dimmer",multiline:!1,children:"Loading…"})]})]})},m_=n(43409),mS=n(84657),mE=n(24796),mk=n(20766),mT=(0,ee.X)({headerWrapper:[J.l0.rowWithGap(4),J.l0.align.center],feedbackContent:[J.l0.backgroundColor.backgroundHigher,J.l0.colWithGap(4),J.l0.borderRadius(8),J.l0.py(4),J.l0.px(8)],messageWrapper:[J.l0.px(8),J.l0.py(12),J.l0.colWithGap(8)],messagePreview:[J.l0.colWithGap(4),J.l0.borderRadius(4),J.l0.py(4),J.l0.px(8),{background:"linear-gradient(90.7deg, rgba(82, 57, 204, 0.1) 0.6%, rgba(166, 148, 255, 0.1) 137.79%)"},J.l0.border({color:J.TV.blurpleDefault,style:"solid",direction:"left",width:2})],userFeedbackWrapper:[J.l0.rowWithGap(4),J.l0.align.center,J.l0.justify.start],userFeedbackText:[J.l0.flex.growAndShrink(1),J.l0.width("100%")]}),mR=function(e){var t=e.message,n=e.currentUser,r=e.autoScroll,i=t.useAdvancedModel,o=t.text,a=t.feedbackProvidedMessage;if(!n)throw Error("Expecting a current user to render a feedback message");if(!a)throw Error("Expecting a feedback provided message to render a feedback message");var l=(0,X.useRef)(null),c=(0,mS.rM)();return(0,X.useLayoutEffect)(function(){r&&l.current&&requestAnimationFrame(function(){r&&l.current&&((0,F.Z)(l.current,{skipOverflowHiddenElements:!0,behavior:"auto",scrollMode:"always"}),c(!0))})}),(0,L.BX)(K.G,{css:mT.messageWrapper,children:[(0,L.BX)(K.G,{css:mT.headerWrapper,children:[(0,L.tZ)(mv.R,{advanced:i}),(0,L.tZ)(Q.xv,{multiline:!1,children:"recorded feedback"}),(0,L.tZ)(nO.Z,{color:J.TV.greenStronger})]}),(0,L.BX)(K.G,{css:mT.feedbackContent,children:[(0,L.tZ)(K.G,{css:mT.messagePreview,children:(0,L.tZ)(Q.xv,{multiline:!1,maxLines:1,children:a.text})}),(0,L.BX)(K.G,{css:mT.userFeedbackWrapper,children:[(0,L.tZ)(cg.q,{src:n.image,username:n.username}),(0,L.tZ)(Q.xv,{css:mT.userFeedbackText,children:o})]})]}),(0,L.tZ)(K.G,{innerRef:l})]})},mD=n(6079),mI=n(54254),mG=n(22580),mB=n(92101),mA=n(8017),mP=(0,ee.X)({root:[J.l0.borderRadius(4),J.l0.border({color:J.TV.outlineDimmest})],header:[J.l0.rowWithGap(4),J.l0.border({color:J.TV.outlineDimmest,direction:"bottom"})],button:[{borderRadius:0,borderTopLeftRadius:4}]});function mN(e){var t=e.codeReference,n=e.onClick;return(0,L.BX)(K.G,{css:mP.root,children:[(0,L.tZ)(K.G,{css:mP.header,children:(0,L.tZ)(eV.zx,{css:mP.button,size:"small",variant:"nofill",iconLeft:(0,L.tZ)(aL.Z,{size:12,path:t.filePath}),iconRight:(0,L.tZ)(mA.Z,{}),text:"".concat(t.filePath," ").concat(t.range.lineFrom,":").concat(t.range.lineTo),onClick:n})}),(0,L.tZ)(pn.Z,{lineNumbers:!0,lineNumbersStart:t.range.lineFrom,language:t.language,code:t.code,filePath:t.filePath})]})}var mU=n(15542);function mL(){var e=(0,nd._)(["\n  query AiChatUserMessage($userId: Int!) {\n    user(id: $userId) {\n      id\n      username\n      image\n    }\n  }\n"]);return mL=function(){return e},e}var mO={},mM=(0,nf.Ps)(mL()),mX=(0,ee.X)({root:[J.l0.colWithGap(8),J.l0.px(8),J.l0.pb(8)],header:[J.l0.rowWithGap(8),J.l0.align.center]}),mF=(0,X.memo)(function(e){var t,n=e.id,r=e.openFile,i=(0,o9.qQ)(n),o=(0,mU.d)(),a=(t=(0,eO._)({},mO,{variables:{userId:o||-1},skip:!o}),nh.a(mM,t)).data,l=null==a?void 0:a.user,c=(0,tk.Z)(function(){return(0,mB.BW)(n)},[n]);if(!i||!l)return null;var s="TRANSFORM"===i.intent?void 0:c;return(0,L.BX)(K.G,{css:mX.root,children:[(0,L.BX)(K.G,{css:mX.header,children:[(0,L.tZ)(mI.n,{username:l.username,src:l.image,small:!0}),i.timeCreated?(0,L.tZ)(cR.EK,{live:!0,date:i.timeCreated}):null]}),"EXPLAIN"===i.intent?(0,L.BX)(L.HY,{children:[(0,L.tZ)(mG.J,{text:i.text,codeComponent:s}),i.codeReference?(0,L.tZ)(mN,{codeReference:i.codeReference,onClick:function(){i.codeReference&&r({path:i.codeReference.filePath,line:i.codeReference.range.lineTo})}}):null]}):(0,L.tZ)(mG.J,{text:i.text})]})}),mW=n(91608),mH=n(27592),mV=n(31950),mz=n(59173),mj=(0,mW.$)(["transform","opacity"]),mq=mj.cssVars,mY=mj.styleTokens,m$=(0,ee.X)({root:[J.l0.position.relative,{height:0}],container:[J.l0.position.absolute,J.l0.bottom(0),J.l0.left("50%"),{transitionProperty:["opacity","transform"],transitionTimingFunction:W.H.timingFunction,transitionDuration:W.H.duration,opacity:mY.opacity,transform:mY.transform}],button:[J.l0.reset.button,ce.gU.filledAndOutlined,J.l0.p(4),J.l0.rowWithGap(4),J.l0.align.center,J.l0.borderRadius(16),J.l0.shadow(1)]}),mJ={hidden:(I={},(0,O._)(I,mq.opacity,"0"),(0,O._)(I,mq.transform,"translate(-50%, ".concat(J.TV.space4,")")),I),visible:(G={},(0,O._)(G,mq.opacity,"1"),(0,O._)(G,mq.transform,"translate(-50%, calc(-1 * ".concat(J.TV.space4,"))")),G)};function mK(e){var t=e.visible,n=e.onClick,r=(0,X.useRef)(null);return(0,mV.j)(r,t,function(e){return e?mJ.visible:mJ.hidden}),(0,L.tZ)(K.G,{innerRef:r,css:m$.root,children:(0,L.tZ)(K.G,{css:m$.container,children:(0,L.BX)(e$.Tg,{css:m$.button,elevated:!0,tag:"button",onClick:n,children:[(0,L.tZ)(se.Z,{size:12}),(0,L.tZ)(Q.xv,{variant:"small",children:"Scroll to latest"})]})})})}var mQ=n(98188),m0=n(29128),m1=n(39511),m2=n(21113),m8=n(7612),m4={layer:"cm-placeholder-layer",dom:"cm-placeholder-dom"},m3=nM.tk.theme((B={},(0,O._)(B,".".concat(m4.layer),{width:"100%",height:"100%",pointerEvents:"none"}),(0,O._)(B,".".concat(m4.dom),{position:"absolute",width:"100%",pointerEvents:"none",fontFamily:i8.TV.fontFamilyDefault,color:i8.TV.foregroundDimmest}),B)),m5=function(e){return 0===e.doc.length},m6=nF.QQ.define({create:m5,update:function(e,t){return m5(t.state)}}),m9=[m6,m3,(0,nM.EY)({above:!1,class:m4.layer,update:function(e){return(0,m8.a)(e,m6)},markers:function(e){if(!e.state.field(m6))return[];var t=e.coordsAtPos(0);if(!t)return[];var n=e.dom.getBoundingClientRect(),r=t.left-n.left,i=t.top-n.top,o=t.bottom-t.top;return[{draw:function(){var e=document.createElement("div");return e.className=m4.dom,e.textContent="Type message...",e.style.width="100%",e.style.paddingTop=i+"px",e.style.paddingLeft=r+"px",e.style.height=o+"px",e},eq:function(){return!0}}]}})],m7=n(45434),ve=n(45086),vt=nF.r$.define({combine:function(e){var t;return null!==(t=e[0])&&void 0!==t?t:0}}),vn=new rA.j(function(e){return vt.of(e)}),vr={marker:"cm-empty-state-dom"},vi=nM.tk.theme((0,O._)({},".".concat(vr.marker),{backgroundColor:J.TV.redDefault,opacity:"0.2"})),vo=nF.QQ.define({create:function(e){return e.doc.length},update:function(e,t){return t.state.doc.length}}),va=function(e){return Math.max(e.doc.length-e.facet(vt),0)},vl=nF.QQ.define({create:va,update:function(e,t){return(0,m8.a)(t,"doc",vt)?va(t.state):e},provide:function(e){return[vo,vi,(0,nM.EY)({above:!1,update:function(t){return(0,m8.a)(t,e)},markers:function(t){var n=t.state.field(e);if(0===n)return[];var r=t.state.doc.length;return nM.dc.forRange(t,vr.marker,nF.jT.range(r-n,r))}})]}}),vc=(0,ee.X)({charLimit:[J.l0.color.redDefault]});function vs(e){var t=e.view,n=(0,ve.IK)(t,vl);return n?(0,L.tZ)(Q.xv,{variant:"small",css:vc.charLimit,children:n}):null}var vu=n(7730),vd=n.n(vu),vf=nF.r$.define({combine:function(e){var t;return null!==(t=e[0])&&void 0!==t?t:[]},compare:vd()}),vh=new rA.j(function(e){return vf.of(e)}),vp=n(17225),vm=n(69119),vv=n(43151),vg=n(1415),vy=n(72443),vb=n(2581),vZ=n(25202),vw=n(76673),vx=n(98934),vC=n(79217),v_=(0,ee.X)({root:[ce.gU.listItem,J.l0.p(4),J.l0.colWithGap(2)],content:[J.l0.rowWithGap(8),J.l0.align.center],left:[J.l0.flex.growAndShrink(1),J.l0.rowWithGap(4),J.l0.align.center,{fontSize:J.TV.fontSizeSmall}],warning:[{color:J.TV.accentNegativeDefault}],dir:[{opacity:.6},J.l0.flex.shrink(100)]});function vS(e){var t=e.path,n=e.highlighted,r=e.ranges,i=e.status,o=n?{backgroundColor:ce.vb.interactiveBackgroundActive}:void 0,a=i?({included:(0,L.tZ)(nO.Z,{}),overflowing:(0,L.tZ)(ej.Z,{}),truncated:(0,L.tZ)(ej.Z,{})})[i]:null,l=(0,vp.Q1)({path:t,ranges:null!=r?r:[]}),c=l.directory,s=l.filename;return(0,L.BX)(K.G,{css:v_.root,style:o,children:[(0,L.BX)(K.G,{css:v_.content,style:o,children:[(0,L.BX)(K.G,{css:v_.left,style:o,children:[(0,L.tZ)(aL.Z,{path:t,size:16}),(0,L.tZ)(vm.x,{text:s.text,highlight:s.ranges,dimmed:!n}),c?(0,L.tZ)(K.G,{color:"dimmest",css:v_.dir,children:(0,L.tZ)(vm.x,{text:c.text+"/",highlight:c.ranges,dimmed:!n})}):null]}),a]}),"overflowing"===i||"truncated"===i?(0,L.tZ)(Q.xv,{css:v_.warning,variant:"small",children:"Exceeds file memory"}):null]})}var vE=(0,mW.$)(["iconColor","placeholderColor","itemTransform","inputBorderRadius","inputBorder"]),vk=vE.cssVars,vT=vE.styleTokens,vR=(0,ee.X)({root:[J.l0.width(240),J.l0.maxHeight(200)],inputRow:[J.l0.position.relative,(P={},(0,O._)(P,vk.iconColor,J.TV.foregroundDimmest),(0,O._)(P,vk.placeholderColor,J.TV.foregroundDimmer),(0,O._)(P,":focus-within, :hover",(A={},(0,O._)(A,vk.iconColor,J.TV.foregroundDimmer),(0,O._)(A,vk.placeholderColor,J.TV.foregroundDimmest),A)),P)],searchIcon:[J.l0.pl(6),J.l0.coverContainer,J.l0.align.start,J.l0.justify.center,{color:vT.iconColor,pointerEvents:"none"}],input:[ce.gU.nofill,J.l0.p(4),J.l0.pl(24),{borderRadius:vT.inputBorderRadius,fontSize:J.TV.fontSizeSmall,margin:"-1px -1px 0",cursor:"text","::placeholder":{color:vT.placeholderColor},"@media (hover: hover)":{":not([disabled]):focus":{outline:"0 none"}}}],header:[J.l0.rowWithGap(2),J.l0.px(4),J.l0.height(24),J.l0.align.center],unselectButton:[J.l0.reset.button,ce.gU.nofill,J.l0.p(2),{fontSize:J.TV.fontSizeSmall}],menu:[J.l0.flex.growAndShrink(1),{overflow:"auto"}],item:[{transform:vT.itemTransform,position:"absolute",top:0,left:0,width:"100%"}]});function vD(e,t){return t.status&&!e.status?1:e.status&&!t.status?-1:"included"===t.status&&"included"!==e.status?1:"included"===e.status&&"included"!==t.status?-1:0}function vI(e){var t,n,r,i,o,a,l,c=e.fileContextInclusions,s=e.placement,u=void 0===s?"bottom":s,d=e.findFiles,f=e.overscan,h=e.onChange,p=(0,X.useRef)(null),m=(0,M._)((0,X.useState)(""),2),v=m[0],g=m[1],y=(r=(n=(0,M._)((0,X.useState)({loading:!0,error:null,items:null}),2))[0],i=n[1],(o=(0,X.useRef)(null)).current||(o.current=(0,vZ.Z)((t=(0,eX._)(function(e){var t;return(0,eF.Jh)(this,function(n){switch(n.label){case 0:return[4,d(e)];case 1:return t=n.sent(),(0,X.startTransition)(function(){i(null!==t.error?{error:t.error,loading:!1,items:null}:{items:t.files,total:t.total,error:null,loading:!1})}),[2]}})}),function(e){return t.apply(this,arguments)}),{wait:40})),a=(0,X.useCallback)(function(e){var t;return null===(t=o.current)||void 0===t?void 0:t.call(o,e).catch(function(){})},[]),(0,X.useEffect)(function(){return a(""),function(){try{var e;null===(e=o.current)||void 0===e||e.cancel()}catch(e){}}},[a]),{files:r.items,loading:r.loading,error:r.error,total:r.total,update:a}),b=y.files,Z=y.total,w=y.loading,x=y.error,C=y.update,_=(0,X.useRef)(null),S=(0,lt.Z)(v),E=(0,X.useMemo)(function(){var e=new Map(c.map(function(e){return[e.path,e.inclusionStatus]})),t=null==b?void 0:b.map(function(t){var n=t.path;return{path:n,ranges:t.ranges,status:e.get(n)}});if(!t)return null;if(_.current)return(0,vw.Z)(t,{existing:_.current,getKey:function(e){return e.path}});if(S.current)return t;var n=t.sort(vD);return _.current=n,n},[b,c,S]),k=(0,X.useMemo)(function(){var e;return null!==(e=null==E?void 0:E.filter(function(e){return e.status}))&&void 0!==e?e:[]},[E]),T=(0,vy.Kb)({inputValue:v,items:null!=E?E:[],isOpen:!0,defaultHighlightedIndex:0,stateReducer:function(e,t){var n=t.changes;switch(t.type){case vy.Kb.stateChangeTypes.InputKeyDownEnter:case vy.Kb.stateChangeTypes.ItemClick:return(0,rS.Uy)(n,function(t){t.highlightedIndex=e.highlightedIndex});default:return n}},onHighlightedIndexChange:function(e){void 0!==e.highlightedIndex&&-1!==e.highlightedIndex&&D.getVirtualItems()[e.highlightedIndex]&&D.scrollToIndex(e.highlightedIndex)},onStateChange:function(e){switch(e.type){case vy.Kb.stateChangeTypes.InputKeyDownEnter:case vy.Kb.stateChangeTypes.ItemClick:if(!e.selectedItem)break;var t,n,r,i=k.includes(e.selectedItem)?"exclude":"include";h({path:e.selectedItem.path,preference:i}),null===(r=p.current)||void 0===r||r.select();break;case vy.Kb.stateChangeTypes.InputChange:g(null!==(t=e.inputValue)&&void 0!==t?t:""),C(null!==(n=e.inputValue)&&void 0!==n?n:"")}}}),R=(0,X.useRef)(null),D=(0,cD.MG)({count:null!==(l=null==E?void 0:E.length)&&void 0!==l?l:0,getScrollElement:function(){return R.current},estimateSize:function(){return 32},getItemKey:function(e){var t,n;return null!==(n=null==E?void 0:null===(t=E[e])||void 0===t?void 0:t.path)&&void 0!==n?n:""},overscan:void 0===f?4:f}),I=(0,L.BX)(K.G,{css:vR.inputRow,children:[(0,L.tZ)(K.G,{css:vR.searchIcon,children:w?(0,L.tZ)(eR.Z,{size:12}):(0,L.tZ)(oY.Z,{size:12})}),(0,L.tZ)("input",(0,eO._)({autoFocus:!0,placeholder:"Search files",css:vR.input},T.getInputProps({ref:p})))]}),G="top"===u?"0 0 ".concat(J.TV.space4," ").concat(J.TV.space4):"".concat(J.TV.space4," ").concat(J.TV.space4," 0 0");return!w||(null==E?void 0:E.length)||(G=J.TV.space4),(0,L.BX)(K.G,{css:vR.root,style:(0,O._)({},vk.inputBorderRadius,G),children:["bottom"===u?I:null,x?(0,L.tZ)(eY.E,{icon:(0,L.tZ)(ej.Z,{}),text:x}):null,void 0!==Z?(0,L.BX)(K.G,{css:vR.header,style:"bottom"===u?{borderTop:"1px solid "+J.TV.outlineDimmer}:void 0,children:[(0,L.BX)(Q.xv,{variant:"small",color:"dimmest",children:[c.length,"/",Z]}),c.length?(0,L.tZ)(K.G,{tag:"button",css:vR.unselectButton,onClick:function(){return function(){var e=!0,t=!1,n=void 0;try{for(var r,i=c[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value.path;h({path:o,preference:"exclude"})}}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}}()},children:"Unselect"}):null]}):null,(0,L.tZ)("div",(0,eM._)((0,eO._)({style:"top"===u?{borderBottom:"1px solid "+J.TV.outlineDimmer}:void 0,css:vR.menu},T.getMenuProps({ref:R})),{children:(0,L.tZ)("div",{style:{height:"".concat(D.getTotalSize(),"px"),width:"100%",position:"relative"},children:D.getVirtualItems().map(function(e){var t=e.index,n=e.key,r=e.start,i=null==E?void 0:E[t];return i?(0,L.tZ)(K.G,(0,eM._)((0,eO._)({"data-index":t,css:vR.item,style:(0,O._)({},vk.itemTransform,"translateY(".concat(r,"px)"))},T.getItemProps({item:i,index:t,refKey:"innerRef",ref:D.measureElement})),{"aria-selected":void 0!==i.status,children:(0,L.tZ)(vS,{highlighted:t===T.highlightedIndex,path:i.path,ranges:i.ranges,status:i.status})}),n):null})})})),"top"===u?I:null]})}var vG=(0,ee.X)({button:[J.l0.reset.button,J.l0.align.center,J.l0.cursor.pointer,J.l0.px(4),J.l0.py(2),J.l0.rowWithGap(4),ce.gU.nofill,J.l0.color.foregroundDimmest,{"&:hover":J.l0.color.foregroundDefault}]});function vB(e){var t,n=(0,M._)((0,X.useState)(!1),2),r=n[0],i=n[1],o=(0,M._)((0,X.useState)(null),2),a=o[0],l=o[1],c=(0,M._)((0,X.useState)(null),2),s=c[0],u=c[1];(0,X.useEffect)(function(){var e=function(e){var t,n;t=e.target,n=[s,a],t instanceof Node&&n.some(function(e){return null==e?void 0:e.contains(t)})||i(!1)};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}},[s,a]),(0,X.useEffect)(function(){var e=function(e){"Escape"===e.key&&i(!1)};if(r)return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}},[r]);var d=(0,vb.D)(a,s,{modifiers:[{name:"offset",options:{offset:[0,4]}},{name:"preventOverflow",options:{padding:16}}],placement:"bottom-start"}),f=e.fileContextInclusions,h=e.findFiles,p="Context";f.length&&(p=1===f.length?(0,eu.UO)(f[0].path):f.length+" files");var m=(0,X.useId)();return(0,L.BX)(L.HY,{children:[(0,L.BX)(K.G,{tag:"button",css:vG.button,innerRef:l,onClick:function(){return i(function(e){return!e})},onKeyDown:function(e){"ArrowDown"===e.key&&i(!0)},"aria-label":"Select files","aria-haspopup":!0,"aria-expanded":r,"aria-controls":m,children:[(0,L.tZ)(vv.Z,{}),(0,L.tZ)(Q.xv,{variant:"small",children:p}),(0,L.tZ)(vC.Z,{rotate:r?180:0,size:12})]}),r?(0,L.tZ)(vg.h,{children:(0,L.tZ)(nH.MT,{restoreFocus:!0,children:(0,L.tZ)(e$.Tg,(0,eM._)((0,eO._)({id:m,elevated:!0,style:d.styles.popper,innerRef:u,css:vx.L.popover},d.attributes.popper),{children:(0,L.tZ)(vI,{overscan:e.overscan,onChange:e.onChange,findFiles:h,fileContextInclusions:f,placement:(null===(t=d.state)||void 0===t?void 0:t.placement.startsWith("top"))?"top":"bottom"})}))})}):null]})}var vA={render:function(e){var t=e.file,n=t.path,r=t.match,i=(0,rB.VV)((0,L.tZ)(K.G,{css:v_.root,style:{width:"100%"},className:"option",children:(0,L.BX)(K.G,{css:v_.content,children:[(0,L.BX)(K.G,{css:v_.left,children:[(0,L.tZ)(aL.Z,{path:n,size:16}),(0,L.tZ)(vm.x,{text:r.filename.text,highlight:r.filename.ranges,dimmed:!0}),r.directory?(0,L.tZ)(K.G,{color:"dimmest",css:v_.dir,children:(0,L.tZ)(vm.x,{text:r.directory.text+"/",highlight:r.directory.ranges,dimmed:!0})}):null]}),"included"===t.inclusionStatus?(0,L.tZ)(nO.Z,{}):null]})}));return i.style.display="flex",i.style.width="100%",i},position:81},vP=nM.tk.theme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:i8.TV.fontFamilyDefault,fontSize:i8.TV.fontSizeSmall},"& > ul > li":{padding:"0px",display:"flex",alignItems:"center"},"& > ul > li[aria-selected] .option":{backgroundColor:i8.TV.backgroundHighest}},".cm-completionLabel":{width:0}}),vN=new rA.j(function(e){if(!e)return[];function t(){return(t=(0,eX._)(function(t){var n,r,i,o,a;return(0,eF.Jh)(this,function(l){switch(l.label){case 0:if(!e||!t.matchBefore(/@(\S*)/g)||null===(n=t.matchBefore(/\w*/)))return[2,null];return[4,e(n.text)];case 1:return i=null!==(r=l.sent().files)&&void 0!==r?r:[],o=new Map(t.state.facet(vf).map(function(e){return[e.path,e.inclusionStatus]})),a=i.map(function(e){var t=e.path,n=e.ranges;return{label:t,displayLabel:" ",file:{path:t,inclusionStatus:o.get(t),match:(0,vp.Q1)({path:t,ranges:null!=n?n:[]})}}}),[2,{from:n.from,filter:!1,options:a}]}})})).apply(this,arguments)}return[vP,(0,mQ.ys)({defaultKeymap:!1,icons:!1,aboveCursor:!0,addToOptions:[vA],override:[function(e){return t.apply(this,arguments)}],maxRenderedOptions:100})]}),vU=new rA.j(function(e){return nM.tk.updateListener.of(function(t){var n=!0,r=!1,i=void 0;try{for(var o,a=t.transactions[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value.annotation(mQ.Jv);l&&e(l.label)}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}})}),vL=n(94442),vO=n(21488);function vM(e){var t,n=(0,nZ.AA)(),r=(0,vO.T)();return(0,X.useCallback)((t=(0,eX._)(function(t){var i,o,a,l,c;return(0,eF.Jh)(this,function(s){switch(s.label){case 0:return[4,e.listFiles()];case 1:if((i=s.sent()).error||!i.files)return[2,{error:null!==(o=i.error)&&void 0!==o?o:"Something went wrong",files:null}];if(a=i.files.filter(function(e){return!r(e)}),!t)return[3,3];return[4,(0,vp.Rz)(t,a)];case 2:return c=s.sent(),[3,4];case 3:c=(0,vw.Z)(a,{existing:n(),getKey:function(e){return e}}).map(function(e){return{path:e}}),s.label=4;case 4:return l=c,[2,{total:a.length,files:l,error:null}]}})}),function(e){return t.apply(this,arguments)}),[e,r,n])}var vX=n(92651),vF=n.n(vX),vW=(0,ee.X)({root:[J.l0.display.inlineFlex],button:[J.l0.reset.button,J.l0.display.inlineFlex,J.l0.px(2),ce.gU.outlined,J.l0.borderRadius(4),J.l0.rowWithGap(2),J.l0.align.center],warning:{color:J.TV.redDefault}}),vH=new rB.Jf(function(e){var t=(0,eu.UO)(e.path),n=(0,eu.Il)(e.path);return(0,L.tZ)(eD.u,{isDisabled:!n&&!e.warning,tooltip:(0,L.BX)(K.G,{children:[e.warning?(0,L.tZ)(Q.xv,{variant:"small",css:vW.warning,children:e.warning}):null,n?(0,L.BX)(Q.xv,{variant:"small",color:"dimmest",children:[n,"/"]}):null]}),children:function(n,r){return(0,L.tZ)(K.G,(0,eM._)((0,eO._)({css:vW.root,innerRef:r},n),{children:(0,L.BX)(K.G,{tag:"button",css:vW.button,onClick:function(){return e.onClick()},children:[(0,L.tZ)(aL.Z,{size:12,path:e.path}),(0,L.tZ)(Q.xv,{variant:"small",children:t}),e.warning?(0,L.tZ)(ej.Z,{size:12}):null]})}))}})}),vV=function(e){"use strict";(0,fE._)(n,e);var t=(0,fT._)(n);function n(e,r){var i;return(0,fS._)(this,n),(i=t.call(this)).file=e,i.onClick=r,i}var r=n.prototype;return r.eq=function(e){return this.file.path===e.file.path&&this.file.inclusionStatus===e.file.inclusionStatus},r.toDOM=function(){var e=this.file,t=e.path,n=e.inclusionStatus,r=vH.create({path:t,onClick:this.onClick,warning:"included"!==n?"Exceedes memory limit":null});return r.style.display="inline",r},n}(nM.l9),vz=function(e,t){return new nM.Y1({regexp:RegExp("".concat(e.map(function(e){var t=e.path;return"@".concat(vF()(t))}).join("|")),"g"),decoration:function(n,r){var i,o=n[0].substring(1,null===(i=n[0])||void 0===i?void 0:i.length),a=e.find(function(e){return e.path===o});return a?nM.p.replace({widget:new vV(a,function(){return t(o)}),inclusive:!0}):null}})},vj=new rA.j(function(e){return e?nM.lg.fromClass(function(){"use strict";function t(n){(0,fS._)(this,t);var r=n.state.facet(vf);this.match=r.length&&e?vz(r,e):null,this.placeholders=this.match?this.match.createDeco(n):nM.p.none}return t.prototype.update=function(t){var n=t.state.facet(vf);if(0===n.length){this.match=null,this.placeholders=nM.p.none;return}if((0,m8.a)(t,vf)){this.match=vz(n,e),this.placeholders=this.match.createDeco(t.view);return}if((0,m8.a)(t,"doc")){if(!this.match){this.match=vz(n,e),this.placeholders=this.match.createDeco(t.view);return}this.placeholders=this.match.updateDeco(t,this.placeholders)}},t}(),{decorations:function(e){return e.placeholders},provide:function(e){return nM.tk.atomicRanges.of(function(t){var n;return(null===(n=t.plugin(e))||void 0===n?void 0:n.placeholders)||nM.p.none})}}):[]}),vq=n(90841),vY=n(4736),v$=n(83109),vJ=(0,ee.X)({surface:[J.l0.flex.growAndShrink(0),J.l0.borderRadius(8),J.l0.m(8),J.l0.position.relative,{marginTop:"auto"}],messageBoxContainer:[J.l0.p(8)],quotaLimitContainer:[J.l0.p(8),J.l0.colWithGap(8),J.l0.position.relative,{marginTop:"auto"}]});function vK(e){var t=e.text,n=e.type,r=(0,M._)((0,X.useState)(!1),2),i=r[0],o=r[1],a=(0,M._)((0,m2.Ni)(),2)[1];return(0,L.BX)(K.G,{css:vJ.quotaLimitContainer,children:[(0,L.tZ)(eY.E,{icon:(0,L.tZ)(ej.Z,{}),colorway:"red",text:t}),"basic"===n?(0,L.tZ)(eV.zx,{onClick:function(){return o(!0)},colorway:"blurple",text:"Upgrade to Replit ".concat(pQ.we)}):(0,L.tZ)(eV.zx,{onClick:function(){return a("basic")},colorway:"blurple",text:"Switch back to basic model"}),(0,L.tZ)(pJ.Z,{isOpen:i,onClose:function(){return o(!1)},type:"purchase",analyticsContext:{upgrade:{context:"ai_model_selector",surface:"ghostwriter_power_up_dialog"}}})]})}var vQ=n(77589),v0=n(9669),v1=n(92815),v2=n(50455),v8=n(475),v4=n(83807),v3=new Map([["NONE",{title:"Ask AI",description:"Detect actions based on the prompt",icon:(0,L.tZ)(v4.Z,{})}],["GENERATE",{title:"Generate",description:"Write starter code/tests",icon:(0,L.tZ)(mp.Z,{})}],["TRANSFORM",{title:"Modify",description:"Refactor existing features",icon:(0,L.tZ)(mp.Z,{})}],["EXPLAIN",{title:"Explain",description:"Ask a question about your code",icon:(0,L.tZ)(mm.Z,{})}],["REPLIT_DOCS",{title:"Ask replit.com",description:"Ask about how to do things on Replit",icon:(0,L.tZ)(mm.Z,{})}]]),v5=(0,ee.X)({root:[J.l0.rowWithGap(8),J.l0.px(8),J.l0.py(4),J.l0.cursor.pointer,ce.gU.listItem],header:[J.l0.rowWithGap(4),J.l0.align.center],content:[J.l0.flex.growAndShrink(1)]});function v6(e){var t=e.intent,n=e.selected,r=e.highlighted,i=v3.get(t);if(!i)throw Error("Expected data");return(0,L.BX)(K.G,{css:v5.root,style:r?{backgroundColor:ce.vb.interactiveBackground}:void 0,children:[(0,L.BX)(K.G,{css:v5.content,children:[(0,L.BX)(K.G,{css:v5.header,children:[(0,X.cloneElement)(i.icon,{size:16,color:J.TV.blurpleDefault}),(0,L.tZ)(Q.xv,{variant:"small",children:i.title})]}),(0,L.tZ)(Q.xv,{variant:"small",color:"dimmest",children:i.description})]}),n?(0,L.tZ)(nO.Z,{color:J.TV.foregroundDimmer}):null]})}var v9=(0,ee.X)({button:[J.l0.reset.button,J.l0.p(4),J.l0.cursor.pointer,J.l0.rowWithGap(4),J.l0.align.center,ce.gU.nofill,J.l0.color.foregroundDimmest,{"&:hover":J.l0.color.foregroundDefault}],heading:[J.l0.px(8),J.l0.py(4)]});function v7(e){var t,n=(0,vy.L7)({items:e.items,selectedItem:e.selectedItem,onSelectedItemChange:function(t){var n=t.selectedItem;n&&e.onChange(n)}}),r=null!==(t=v3.get(e.selectedItem))&&void 0!==t?t:v3.get("NONE");if(!r)throw Error("Expected selectedIntent");var i=(0,vx.w)(),o=i.setTriggerEl,a=i.setPopoverEl,l=i.attributes,c=i.styles;return(0,L.BX)(K.G,{children:[(0,L.tZ)("label",(0,eM._)((0,eO._)({css:J.l0.visuallyHidden},n.getLabelProps()),{children:"Select a mode for AI"})),(0,L.BX)(K.G,(0,eM._)((0,eO._)({tag:"button",css:v9.button},n.getToggleButtonProps({ref:o,refKey:"innerRef"})),{children:[n.selectedItem?(0,X.cloneElement)(r.icon,{size:12}):null,(0,L.tZ)(Q.xv,{variant:"small",children:r.title}),(0,L.tZ)(vC.Z,{rotate:n.isOpen?180:0,size:12})]})),(0,L.tZ)(K.G,(0,eM._)((0,eO._)({},n.getMenuProps({refKey:"innerRef"})),{children:n.isOpen?(0,L.tZ)(vg.h,{children:(0,L.tZ)(e$.Tg,(0,eM._)((0,eO._)({elevated:!0,style:c,innerRef:a,css:vx.L.popover},l),{children:(0,L.BX)(K.G,(0,eM._)((0,eO._)({},n.getMenuProps({refKey:"innerRef"})),{children:[(0,L.tZ)(K.G,{css:v9.heading,children:(0,L.tZ)(Q.xv,{color:"dimmest",variant:"small",children:"Select a mode"})}),e.items.map(function(e,t){var r=e===n.selectedItem,i=t===n.highlightedIndex;return(0,L.tZ)(K.G,(0,eM._)((0,eO._)({},n.getItemProps({refKey:"innerRef",item:e,index:t})),{children:(0,L.tZ)(v6,{intent:e,selected:r,highlighted:i})}),e)})]}))}))}):null}))]})}function ge(){var e=(0,z.Z)().fs,t=(0,vL.B)(),n=(0,vq.zU)(),r=vM(e);return(0,L.tZ)(vB,{onChange:n,findFiles:r,fileContextInclusions:t})}var gt=new rA.j(function(e){return nM.tk.domEventHandlers({keydown:function(t,n){!((0,mQ.SI)(n.state).length>0)&&("Enter"!==t.key||t.shiftKey||(t.preventDefault(),e(n.state.doc.toString()),n.dispatch({changes:{from:0,to:n.state.doc.length}})))}})}),gn=nM.tk.theme((N={"& .cm-content":{fontFamily:J.TV.fontFamilyDefault}},(0,O._)(N,"& .".concat(m0.ll),{display:"none"}),(0,O._)(N,"& .cm-indent-markers",{display:"none"}),N)),gr=(0,ee.X)({root:[J.l0.borderRadius(0,0,4,4),J.l0.border({color:J.TV.outlineDimmest,direction:"top"}),{marginTop:"auto"}],codemirror:[J.l0.maxHeight(300),J.l0.overflow("auto"),{"& .cm-content":J.l0.pt(8)}],footer:[J.l0.rowWithGap(8),J.l0.align.center,J.l0.height(32)],left:[J.l0.rowWithGap(8),J.l0.flex.growAndShrink(1),J.l0.align.center,J.l0.pl(4)],right:[J.l0.rowWithGap(4),J.l0.align.center,J.l0.pr(8)],send:[J.l0.borderRadius(8)],sendDisabled:[(0,pi.ec)("grey")],sendEnabled:[(0,pi.ec)("blurple")]});function gi(e){var t,n,r,i,o,a,l,c,s,u,d,f,h=e.setPromptEditor,p=e.openFile,m=(o=(0,m2.Lw)(),a=(0,vY.Tt)(),l=(0,M._)((0,m2.Ni)(),1)[0],a?o?"advanced"!==l?null:a.advancedModelUsage<a.advancedModelLimit?null:{type:"advanced",text:"Quota reached. Refreshes ".concat((0,v$.Z)(new Date(a.advancedModelTTLEnd),"do MMM, hh:mm a"))}:a.basicModelUsage<a.basicModelLimit?null:{type:"basic",text:"100% quota reached. Upgrade to Replit ".concat(pQ.we," to get unlimited quota.")}:null),v=(0,z.Z)().fs,g=(0,o9.ql)(),y=(0,X.useCallback)(function(e){g({chatMessage:{type:"chat",text:e}})},[g]),b=(0,rL.Vg)((0,dg.useRouter)()),Z=(0,X.useRef)(null),w=(0,ae.j3)(),x=(0,ae.em)(),C=(0,h1.v)(),_=(s=(c={enableBridge:b,model:(0,v2.P)(C),sendChatMessage:function(e){g({chatMessage:{type:"chat",text:e}})},abortResponse:function(){w&&E()}}).enableBridge,u=c.sendChatMessage,d=c.abortResponse,f=(0,v1.v)(),(0,X.useEffect)(function(){if(s){var e=function(e){return(0,vQ.I6)(e,function(e){var t=e.type;switch(f(!1),t){case v0.cF.GHOSTWRITER_CHAT_SEND:u(e.chatMessage),(0,vQ.gU)(e.id);break;case v0.cF.GHOSTWRITER_CHAT_ABORT_RESPONSE:d(),(0,vQ.gU)(e.id);break;default:(0,lI.Z)(t)}})};return window.addEventListener("message",e),function(){return window.removeEventListener("message",e)}}},[d,s,u,f]),{focusNativeMobileInput:(0,X.useCallback)(function(){var e={messageType:v0.cF.GHOSTWRITER_CHAT_FOCUS_INPUT};(0,vQ.bG)(e,aE()())},[])}).focusNativeMobileInput,S=(0,X.useCallback)(function(){if(b)_();else{var e;null===(e=Z.current)||void 0===e||e.focus()}},[_,b]),E=(0,X.useCallback)(function(){(0,rs.j)(rs.U3.GHOSTWRITER_CHAT_RESPONSE_STOPPED),x(),S()},[x,S]),k=gt.use(y),T=(0,rG.Z)(),R=T.ref,D=T.view;n=(t={view:D,setPromptEditor:function(e){Z.current=e,h(e)}}).view,r=t.setPromptEditor,i=(0,lt.Z)(r),(0,X.useEffect)(function(){if(n){var e=i.current;return e({setValue:function(e){n.state.doc.toString()!==e&&n.dispatch({changes:{from:0,to:n.state.doc.length,insert:e}})},focus:function(){n.focus(),n.dispatch({selection:{anchor:n.state.doc.length}})}}),function(){e(null)}}},[n,i]);var I=(0,ve.IK)(D,m6),G=(0,m7.yL)(C).messageCharacters,B=vn.use(G),A=vh.use((0,vL.B)()),P=vj.use(p),N=vM(v),U=vN.use(N),O=(0,vq.zU)(),F=vU.use((0,X.useCallback)(function(e){return O({path:e,preference:"include"})},[O])),W=(0,M._)((0,o9.fr)(),2),H=W[0],V=W[1],j=(0,o9.J)();if((0,dg.useRouter)().query.hideChatInput)return null;if(m)return(0,L.tZ)(vK,{type:m.type,text:m.text});var q=!D||!0===I;return(0,L.BX)(e$.Tg,{css:gr.root,children:[(0,L.tZ)(rI.ZP,{ref:R,language:"markdown",css:gr.codemirror,hideGutter:!0,autocomplete:!1,extensions:[gn,k,m9,vl,B,A,P,U,F]}),(0,L.BX)(K.G,{css:gr.footer,children:[(0,L.BX)(K.G,{css:gr.left,children:[(0,L.tZ)(v7,{items:["NONE","GENERATE","TRANSFORM","EXPLAIN","REPLIT_DOCS"],selectedItem:null!=H?H:"NONE",onChange:V}),(0,L.tZ)(ge,{})]}),(0,L.BX)(K.G,{css:gr.right,children:[(0,L.tZ)(vs,{view:D}),(0,L.tZ)(m2.O3,{}),(0,L.tZ)(e$.Tg,{elevated:!0,css:gr.send,children:(0,L.tZ)(eE.hU,{css:q?gr.sendDisabled:gr.sendEnabled,disabled:q,alt:j?"Stop":"Send",onClick:function(){if(j){E();return}if(D){var e=D.state.doc.toString();e&&(y(e),D.dispatch({changes:{from:0,to:D.state.doc.length}}))}},children:j?(0,L.tZ)(v8.Z,{}):(0,L.tZ)(m1.Z,{})})})]})]})]})}var go=n(99708),ga=(0,ee.X)({root:[J.l0.flex.column,J.l0.maxHeight("100%"),J.l0.maxWidth("100%"),J.l0.flex.grow(1),J.l0.position.relative,J.l0.colorMixBg(J.TV.blurpleDefault,"transparent",.05)]});function gl(e){var t,n,r,i,o,a,l,c=e.paneIsActive,s=e.openFile,u=(0,rL.T3)(),d=(0,M._)((0,o9.zu)(),1)[0],f=d.filter(function(e){return"feedback"!==e.type});(0,mD.$h)();var h=(0,go.yz)(),p=h.data,m=h.loading,v=h.error,g=null==p?void 0:p.currentUser,y=null==g?void 0:g.isStaff,b=(0,M._)((0,mk.RN)(),2),Z=b[0],w=b[1],x=(0,o9.ZT)(),C=(0,tk.Z)(function(){return[{type:"action",label:"Clear chat history",icon:(0,L.tZ)(e4.Z,{}),run:function(){(0,rs.j)(rs.U3.GHOSTWRITER_CHAT_CLEARED),x()}}]},[x]),_=(0,tk.Z)(function(){var e=[];if(y){var t={match:aO.pl,data:{type:"action",icon:(0,L.tZ)(pL.Z,{fill:Z?J.TV.accentPrimaryDefault:J.TV.foregroundDefault}),label:"Toggle debug mode",run:function(){w(function(e){return!e})}}};e.push(t)}return e},[Z,w,y]),S=(0,M._)((0,X.useState)(null),2),E=S[0],k=S[1];(0,er.Wk)(function(){return E},[E]),(0,er.L5)(function(){return{actions:C,commands:_}},[C,_]);var T=(0,X.useRef)(null),R=(0,M._)((0,mS.Z_)(),2),D=R[0],I=R[1],G=(0,M._)((0,mS.Z9)(),2),B=G[0],A=G[1],P=(0,X.useCallback)(function(){if(B){A(!1);return}if(null!=T.current&&T.current.scrollHeight-T.current.scrollTop===T.current.clientHeight&&(c||!u)){I(!0);return}I(!1)},[B,I,A,c,u]),N=(t=(0,M._)((0,X.useState)(function(){return(0,mz.u)(!1)}),1)[0],r=(n=(0,M._)((0,X.useState)(null),2))[0],i=n[1],a=(o=(0,M._)((0,X.useState)(null),2))[0],l=o[1],(0,X.useEffect)(function(){if(r&&a)return(0,mH.j)(r,function(){return t.set(!1),function(){t.set(!0)}},{root:a,rootMargin:"100px"})},[t,r,a]),(0,X.useEffect)(function(){r&&(0,F.Z)(r,{behavior:"instant"})},[r]),{showButton:t,anchorRef:i,scrollRef:l,onClick:function(){r&&(0,F.Z)(r)}});return m?(0,L.tZ)(mC,{}):v||!g?(0,L.BX)(K.G,{children:["error: ",(null==v?void 0:v.message)||"User not found, please log in or reload"]}):(0,L.BX)(K.G,{css:ga.root,dataCy:"ghostwriter-chat",children:[d.length?(0,L.BX)(L.HY,{children:[(0,L.BX)(K.G,{innerRef:(0,up.l)(T,N.scrollRef),css:[J.l0.colWithGap(8),J.l0.overflow("auto"),J.l0.flex.growAndShrink(1),J.l0.pt(12),J.l0.position.relative],onScroll:P,role:"log",children:[d.map(function(e,t){if("Human"===e.attribution)return(0,L.tZ)(mF,{id:e.id,openFile:s},e.id);var n=D&&t===d.length-1;return"feedback"===e.type?(0,L.tZ)(mR,{message:e,currentUser:g,autoScroll:n},e.id):(0,L.tZ)(m_.v0,{message:e,autoScroll:n,isLastAssistantMessage:"Assistant"===e.attribution&&f[f.length-1].id===e.id},e.id)}),(0,L.tZ)(K.G,{innerRef:N.anchorRef})]}),(0,L.tZ)(mK,{visible:N.showButton,onClick:N.onClick})]}):(0,L.tZ)(mx,{promptEditor:E}),(0,L.tZ)(gi,{openFile:s,setPromptEditor:k})]})}var gc=function(e){var t=(0,rX.P5)({controlName:"flag-killswitch-ghostwriter-chat",logFlagToAnalytics:!1}),n=e.performPaneOperation,r=(0,X.useCallback)(function(e){n({operation:"open",pane:"string"==typeof e?(0,tG.$E)(e):{type:(0,tF.Dp)(e),data:e},secondary:!0})},[n]);return t?(0,L.tZ)(mE.Z,{textVariant:"headerDefault",showImage:!0}):(0,L.tZ)(gl,{openFile:r,paneIsActive:e.paneIsActive})};function gs(){return(0,L.tZ)(L.HY,{children:"[COMING SOON]"})}var gu=ed.Dy.Object({type:ed.Dy.Literal("ghostwriterChat")}),gd={Content:function(e){var t=e.options;return(0,rX.P5)({controlName:"flag-notable-exotic-flash-memory"})?(0,L.tZ)(gs,{}):(0,L.tZ)(gc,{paneIsActive:t.isActive,performPaneOperation:t.performPaneOperation})},Icon:function(e){var t=e.size;return(0,L.tZ)(mf.Z,{size:t})},getTitle:function(){return"AI"},decode:function(e){return ef.B4.Decode(gu,e)}},gf=n(79098),gh=n(67711),gp=(0,ee.X)({badge:[J.l0.backgroundColor.backgroundHighest,J.l0.borderRadius(4),{padding:"0 0.35em"}],container:[J.l0.p(8),J.l0.colWithGap(8)],header:[J.l0.py(4),J.l0.justify.spaceBetween,J.l0.flex.grow(1),J.l0.pr(16),J.l0.height(24)],result:[J.l0.borderRadius(4),J.l0.overflow("hidden")],problems:[J.l0.px(6),J.l0.py(6)],item:[ce.gU.listItem,J.l0.reset.button,J.l0.justify.spaceBetween,J.l0.px(8),J.l0.py(4),J.l0.overflow("hidden"),J.l0.cursor.pointer,J.l0.borderRadius(4),{"&:focus-visible":[J.l0.focusRing],"&:hover, &:focus-visible":[J.l0.backgroundColor.backgroundHighest]}],itemMain:[J.l0.flex.growAndShrink(1)],itemSecondary:[J.l0.color.foregroundDimmest],flex:[J.l0.rowWithGap(8),J.l0.align.center],message:[J.l0.flex.shrink(1),J.l0.overflowX("hidden"),{textOverflow:"ellipsis",whiteSpace:"nowrap"}]});function gm(e){var t=e.isActive,n=e.performPaneOperation,r=(0,M._)((0,X.useState)({}),2),i=r[0],o=r[1],a=(0,hY.nC)(),l=(0,er.dr)(),c=(0,X.useCallback)(function(){var e=!0,t=!1,n=void 0;try{for(var r,i=a()[Symbol.iterator]();!(e=(r=i.next()).done);e=!0)!function(){var e,t=r.value;if("codeEditor"===t[1].type){var n=l(t[0]);if(n&&"codeEditor"===n.type){var i=t[1].data.path,a=null===(e=n.fetchProblems)||void 0===e?void 0:e.call(n);i&&a&&o(function(e){return(0,eM._)((0,eO._)({},e),(0,O._)({},i,a))})}}}()}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}},[l,a]);return(0,X.useEffect)(function(){t&&c()},[t,c]),(0,er.L5)(function(){return{type:"problems",updateProblems:function(e,t){o(function(n){return(0,eM._)((0,eO._)({},n),(0,O._)({},e,t))})}}},[o]),(0,L.BX)(K.G,{css:gp.container,children:[Object.values(i).some(function(e){return e.length>0})?null:(0,L.tZ)(Q.xv,{children:"No problems detected in this workspace"}),Object.keys(i).map(function(e){return 0===i[e].length?null:(0,L.tZ)(e$.Tg,{elevated:!0,css:gp.result,children:(0,L.tZ)(nn.Q,{chevron:"end",defaultExpanded:!0,headerContent:(0,L.BX)(K.G,{css:[gp.flex,gp.header],children:[(0,L.BX)(K.G,{css:gp.flex,children:[(0,L.tZ)(aL.Z,{path:e}),(0,L.tZ)(Q.xv,{children:e})]}),(0,L.tZ)(K.G,{css:gp.badge,children:i[e].length>99?"99+":i[e].length})]}),children:(0,L.tZ)(K.G,{css:gp.problems,children:i[e].map(function(t,r){var i=t.range.start.line+1,o=t.range.start.character;return(0,L.tZ)(gh.Z,{problem:t,onClick:function(){n({operation:"open",pane:{type:"codeEditor",data:{path:e,line:i,col:o}},secondary:!0})}},"".concat(i,"-").concat(o,"-").concat(r))})})},e)},e)})]})}var gv=ed.Dy.Object({type:ed.Dy.Literal("problems")}),gg={Content:function(e){var t=e.options,n=t.isActive,r=t.performPaneOperation;return(0,L.tZ)(gm,{isActive:n,performPaneOperation:r})},Icon:function(){return(0,L.tZ)(gf.Z,{})},getTitle:function(){return"Problems"},decode:function(e){return ef.B4.Decode(gv,e)}},gy=n(9610),gb=n(35375),gZ=n(20399),gw=(0,ee.X)({table:{},tableRow:[J.l0.rowWithGap(12),J.l0.align.center,J.l0.border({direction:"bottom"}),{"box-sizing":"border-box"}],wrapper:[J.l0.rowWithGap(0)],column:[J.l0.display.flex,J.l0.colWithGap(0),J.l0.justify.center,J.l0.border({direction:"right"}),{":last-child":{borderRight:0}}],header:[J.l0.colWithGap(0),J.l0.justify.center],cell:[J.l0.rowWithGap(0),J.l0.align.center,J.l0.color.foregroundDimmest,J.l0.justify.spaceBetween,J.l0.fontSize("small"),J.l0.px(4),J.l0.py(2)],responsiveWrapper:[],responsiveColumn:[]}),gx=function(e){var t=e.children;return(0,L.tZ)("tr",{css:gw.tableRow,children:(0,L.tZ)(K.G,{css:gw.wrapper,children:t})})},gC=function(e){var t=e.header,n=e.width,r=e.last,i=e.children,o={};return n&&(o.width=n),r&&(o.marginLeft="auto"),(0,L.tZ)("td",{css:void 0!==t&&t?gw.header:gw.column,style:o,children:(0,L.tZ)(K.G,{css:gw.cell,children:i})})},g_=function(e){var t=e.children;return(0,L.tZ)("table",{css:gw.table,children:t})},gS=n(51533),gE=n(13900),gk=n(66985),gT=(0,ee.X)({self:[J.l0.p(12),J.l0.colWithGap(16)],devUrl:[J.l0.rowWithGap(4),J.l0.align.center],url:[J.l0.color.accentPositiveStronger,J.l0.fontSize("small"),J.l0.focusRing,{"&:hover":[J.l0.cursor.pointer,J.l0.color.accentPositiveStrongest]}],section:[J.l0.colWithGap(4)],openPort:[J.l0.color.accentPositiveStronger],localPortIcon:[J.l0.color.foregroundDefault,J.l0.px(4),{flex:"0 0 auto",marginLeft:"auto",marginRight:"auto !important"}],internalMessage:[J.l0.flex.shrink(1),{marginLeft:"auto",span:J.l0.color.foregroundDimmest}],portStatus:[J.l0.py(0),J.l0.px(4)],newPort:[J.l0.color.foregroundDefault,J.l0.rowWithGap(4),J.l0.align.center,J.l0.my(1),J.l0.borderRadius(16),J.l0.height(20)],externalPortButton:[{"&":[J.l0.height(20),J.l0.borderRadius(16),J.l0.color.foregroundDefault]}],externalPortPopup:[{"&":[J.l0.height(20),J.l0.p(6),J.l0.borderRadius(16),J.l0.color.foregroundDefault],"& > span":[J.l0.fontSize(12)],"& > svg":[J.l0.mr(4)]}],textButton:[J.l0.cursor.pointer,J.l0.reset.button,J.l0.color.accentPrimaryStronger,J.l0.focusRing,J.l0.hover(J.l0.color.accentPrimaryStrongest),{lineHeight:1.2,":not([disabled])":{cursor:"pointer"}}],newPortInput:[J.l0.height(20),J.l0.my(1)],newPortClose:J.l0.mr(4),portActionItem:[J.l0.fontSize(J.TV.fontSizeDefault),J.l0.viewStyle,J.l0.height(32),J.l0.px(16),J.l0.py(8),J.l0.flex.row,J.l0.align.center,J.l0.color.foregroundDefault,J.l0.backgroundColor.backgroundDefault,ce.gU.listItem,{":not([disabled])":{":hover":{backgroundColor:J.TV.backgroundHigher}}}]});function gR(e){var t,n,r,i,o=e.localPort,a=e.externalPort,l=e.onPortChange,c=(0,z.Z)().ports.updateDotReplitPortsMapping,s=(t=(0,z.Z)().ports,n=(0,pr.Z)(t.portsState),r=(0,rX.P5)({controlName:"flag-dot-dev-url",logFlagToAnalytics:!1})?gb.UK:gb.wy,i=new Set(null==n?void 0:n.map(function(e){var t;return null!==(t=(0,gb.OD)(e.configuration))&&void 0!==t&&t}).filter(Boolean)),Array.from(r).sort(function(e,t){return e-t}).map(function(e){return{isAvailable:!i.has(e),externalPort:e}}));return(0,L.tZ)(K.G,{css:J.l0.flex.row,children:void 0!==a&&0!==a?(0,L.tZ)(eV.zx,{css:gT.externalPortButton,iconRight:(0,L.tZ)(tw.Z,{}),text:":".concat(a),size:"small",onClick:function(){o&&(c(o,void 0),null==l||l())}}):(0,L.tZ)(gZ.ZE,{cssProps:[gT.externalPortPopup],label:"Set external port",onAction:function(e){if(o){var t=s.find(function(t){return String(t.externalPort)===e});t&&t.isAvailable&&(c(o,t.externalPort),null==l||l())}},children:s.map(function(e){var t=e.isAvailable,n=e.externalPort;return(0,L.tZ)(gZ.ck,{"aria-label":String(n),children:(0,L.BX)(K.G,{css:t?J.l0.color.foregroundDefault:J.l0.color.foregroundDimmest,children:[":",n]})},String(n))})})})}function gD(e){var t=e.portState,n=null;switch(t.configuration.type){case gb.DL.MISCONFIGURED:n=(0,L.tZ)(eD.u,{tooltip:"Port misconfigured",delay:"default",children:(0,L.tZ)(ej.Z,{})});break;case gb.DL.CONFIG_MISSING:n=(0,L.tZ)(eD.u,{tooltip:"Configuration missing",delay:"default",children:(0,L.tZ)(ej.Z,{})});break;case gb.DL.NO_MORE_EXTERNAL_PORTS_AVAILABLE:n=(0,L.tZ)(ej.Z,{});break;case gb.DL.FORWARDED:n=(0,L.tZ)(tz.Z,{});case gb.DL.INTERNAL_ONLY:}return(0,L.tZ)("span",{css:gT.localPortIcon,children:n})}function gI(e){var t=e.portState;return(0,L.BX)(gC,{width:105,children:[(0,L.BX)(Q.xv,{css:t.isOpen?gT.openPort:{},children:[":",t.configuration.localPort]}),(0,L.tZ)(gD,{portState:t})]})}function gG(e){var t=e.portState,n=e.openWebview;return t.configuration.type===gb.DL.NO_MORE_EXTERNAL_PORTS_AVAILABLE?(0,L.tZ)(gC,{width:160,children:(0,L.tZ)(eY.E,{css:gT.portStatus,icon:(0,L.tZ)(ej.Z,{}),text:"No ports available"})}):(0,L.BX)(gC,{width:160,children:[(0,L.tZ)(gR,{localPort:t.configuration.localPort,externalPort:(0,gb.OD)(t.configuration)}),(0,L.tZ)(eE.hU,{alt:"Open in webview",onClick:n,css:[J.l0.color.foregroundDefault],children:(0,L.tZ)(oW.Z,{})})]})}function gB(e){var t,n=e.portState;return n.isOpen?(0,L.BX)(L.HY,{children:[(0,L.tZ)(gC,{width:100,children:(t=n.processInfo.cmdline[0].split("/"))[t.length-1]}),(0,L.tZ)(gC,{width:100,children:n.processInfo.pid})]}):(0,L.tZ)(gC,{width:100})}function gA(e){var t=e.portState,n=e.onAction,r=[];return r.push({label:"Open webview",key:"OPEN_WEBVIEW",icon:(0,L.tZ)(oW.Z,{})}),r.push({label:"Open new tab",key:"EXTERNAL_LINK",icon:(0,L.tZ)(oT.Z,{})}),r.push({label:"Remove port config",key:"REMOVE",icon:(0,L.tZ)(e4.Z,{})}),(0,L.tZ)(gC,{width:26,last:!0,children:(0,L.tZ)(gZ.ZE,{cssProps:[J.l0.height(22),J.l0.width(22),J.l0.color.foregroundDefault,{background:"transparent"}],menuCssProps:[{li:[J.l0.p(0)],"li > div":[J.l0.pl(6),J.l0.rowWithGap(4),J.l0.align.center]}],items:r,icon:(0,L.tZ)(gE.Z,{}),onAction:function(e){switch(e){case"OPEN_WEBVIEW":case"EXTERNAL_LINK":case"REMOVE":n({type:e,payload:{portState:t}})}},children:r.map(function(e){return(0,L.tZ)(gZ.ck,{children:(0,L.BX)(K.G,{css:gT.portActionItem,children:[e.icon?e.icon:(0,L.tZ)(K.G,{css:[J.l0.width(16)]}),(0,L.tZ)(Q.xv,{multiline:!1,children:e.label})]})},e.key)})})})}function gP(e){var t=e.portState,n=e.portAction;return(0,L.BX)(gx,{children:[(0,L.tZ)(gI,{portState:t}),(0,L.tZ)(gG,{portState:t,openWebview:function(){n({type:"OPEN_WEBVIEW",payload:{portState:t}})}}),(0,L.tZ)(gB,{portState:t}),(0,L.tZ)(gA,{portState:t,onAction:n})]},t.configuration.localPort)}(m=U||(U={})).OPEN_WEBVIEW="OPEN_WEBVIEW",m.EXTERNAL_LINK="EXTERNAL_LINK",m.REMOVE="REMOVE";var gN=function(e){var t=e.text,n=e.onClick;return(0,L.tZ)("button",{css:gT.textButton,onClick:n,children:t})};function gU(e){var t,n=e.openDotReplit,r=(0,M._)((0,X.useState)(!1),2),i=r[0],o=r[1],a=(0,M._)((0,X.useState)(),2),l=a[0],c=a[1],s=null===(t=(0,z.Z)().ports.portsState.current)||void 0===t?void 0:t.some(function(e){return e.configuration.localPort===l});return i?(0,L.BX)(gx,{children:[(0,L.BX)(gC,{width:105,children:[(0,L.tZ)(eE.hU,{css:gT.newPortClose,alt:"Close",onClick:function(){return o(!1)},size:18,children:(0,L.tZ)(tw.Z,{})}),(0,L.tZ)(tH.II,{css:gT.newPortInput,value:(null==l?void 0:l.toString())||"",onChange:function(e){return c(e.target.value?parseInt(e.target.value,10):void 0)}})]}),(0,L.tZ)(gC,{children:s?(0,L.tZ)(eY.E,{css:gT.portStatus,colorway:"warning",text:"Local port already exists"}):(0,L.tZ)(gR,{localPort:l,onPortChange:function(){return o(!1)}})})]}):(0,L.BX)(gx,{children:[(0,L.tZ)(gC,{width:105,children:(0,L.tZ)(eV.zx,{css:gT.newPort,iconLeft:(0,L.tZ)(i9.Z,{size:12}),text:"New port",size:"small",onClick:function(){return o(!0)}})}),(0,L.tZ)(gC,{children:(0,L.BX)(Q.xv,{variant:"small",children:["This port config is saved in the"," ",(0,L.tZ)(gN,{text:".replit file",onClick:n}),"."," "]})})]})}function gL(e){var t,n=e.openDotReplit,r=e.openWebview,i=(0,nu.Z)(),o=(0,gS.J)(i),a=(0,nL.Z)().showError,l=(0,z.Z)().ports,c=l.portsState,s=l.removeDotReplitPortsMapping,u=function(e){switch(e.type){case"OPEN_WEBVIEW":r(e.payload.portState.configuration.localPort);break;case"EXTERNAL_LINK":var t=(0,gb.OD)(e.payload.portState.configuration);if(!(null==o?void 0:o.presentationUrl)){a("URL not available.");return}var n=(0,gk.hw)(null==o?void 0:o.presentationUrl,t).toString();window.open(n,"_blank");break;case"REMOVE":s(e.payload.portState.configuration.localPort,(0,gb.OD)(e.payload.portState.configuration))}};return(0,L.BX)(K.G,{css:gT.self,children:[(null==o?void 0:o.presentationUrl)?(0,L.BX)(L.HY,{children:[(0,L.BX)(K.G,{css:gT.section,children:[(0,L.tZ)(Q.xv,{children:"Dev URL:"}),(0,L.BX)(K.G,{css:gT.devUrl,children:[(0,L.tZ)(iT(),{legacyBehavior:!0,href:o.presentationUrl,passHref:!0,children:(0,L.tZ)("a",{css:gT.url,target:"_blank",children:o.presentationUrl})}),(0,L.tZ)(eg.qi,{value:o.presentationUrl})]})]}),(0,L.tZ)(l9.R,{})]}):null,(0,L.BX)(K.G,{css:gT.section,children:[(0,L.tZ)(Q.xv,{children:"Ports"}),(0,L.BX)(g_,{children:[(0,L.BX)(gx,{children:[(0,L.tZ)(gC,{header:!0,width:105,children:"Internal Port"}),(0,L.tZ)(gC,{header:!0,width:160,children:"External Port"}),(0,L.tZ)(gC,{header:!0,width:100,children:"Name"}),(0,L.tZ)(gC,{header:!0,width:100,children:"Pid"})]}),c.current&&(null===(t=c.current)||void 0===t?void 0:t.length)>0?c.current.map(function(e){return(0,L.tZ)(gP,{portState:e,portAction:u},e.configuration.localPort)}):null,(0,L.tZ)(gU,{openDotReplit:n})]})]})]})}var gO=n(81810),gM=(0,ee.X)({unavailable:[J.l0.p(8)]}),gX=ed.Dy.Object({type:ed.Dy.Literal("networking")}),gF={Content:function(e){var t,n=e.options.performPaneOperation,r=(0,nL.Z)().showError,i=(0,z.Z)().fs;return(0,rX.P5)({controlName:gO.wK,logFlagToAnalytics:!0})?(0,L.tZ)(gL,{openDotReplit:(0,eX._)(function(){return(0,eF.Jh)(this,function(e){switch(e.label){case 0:return[4,i.stat(".replit")];case 1:if(!e.sent().exists)return r("Could not find .replit configuration file."),[2];return n({operation:"open",secondary:!0,pane:{type:"codeEditor",data:{path:".replit"}}}),[2]}})}),openWebview:(t=(0,eX._)(function(e){return(0,eF.Jh)(this,function(t){return n({operation:"open",pane:{type:"webview",data:e?{portType:"local",port:e}:void 0},secondary:!0}),[2]})}),function(e){return t.apply(this,arguments)})}):(0,L.tZ)(K.G,{css:gM.unavailable,children:(0,L.tZ)(Q.xv,{children:"Networking is not available."})})},Icon:function(e){var t=e.size;return(0,L.tZ)(gy.Z,{size:t})},getTitle:function(){return"Networking"},decode:function(e){return ef.B4.Decode(gX,e)}},gW=n(35704);function gH(){return(0,L.tZ)(K.G,{children:(0,L.tZ)(Q.xv,{variant:"headerDefault",children:"Object Storage"})})}var gV=ed.Dy.Object({type:ed.Dy.Literal("objectStorage")}),gz={Content:function(){return(0,L.tZ)(gH,{})},Icon:function(e){var t=e.size;return(0,L.tZ)(gW.Z,{size:t})},getTitle:function(){return"Object Storage"},decode:function(e){return ef.B4.Decode(gV,e)}};function gj(){return{codeEditor:em.D,webview:oF.Rm,media:aX,binary:aV,pedit:hz,vnc:oz,unitTests:hJ,adminPanel:pM,runnerOutput:ev.G,shell:ah,packager:tA,systemDependencies:tM,envEditor:eZ,draw:aP,git:fg,diff:lk,history:hA,database:n_,neon:oX,markdown:ep,sshConfigurator:mu,ghostwriterChat:gd,problems:gg,networking:gF,objectStorage:gz}}},35614:function(e,t,n){n.d(t,{T:function(){return o},u:function(){return a}});var r=n(68956),i=(0,n(90234).cn)(null);function o(){return(0,r.$X)(i)}function a(){return(0,r.Hg)(i)}},76568:function(e,t,n){n.d(t,{L5:function(){return y},Wk:function(){return T},Xq:function(){return G},Y6:function(){return b},bS:function(){return R},c4:function(){return _},dr:function(){return Z},u1:function(){return C}});var r=n(34142),i=n(32477),o=n(21289),a=n(87682),l=n(43429),c=n(90234),s=n(64461),u=n(50199),d=n(15859),f=n(7444),h=n(68956),p=n(2038),m=n(34581),v=(0,c.cn)({}),g=(0,c.cn)(null,function(e,t,n){t(v,function(e){return(0,s.Uy)(e,function(e){null===n.actions?delete e[n.paneId]:e[n.paneId]=n.actions})})});function y(e,t){var n=I(),r=(0,h.$X)(g),i=(0,f.Z)(e);(0,l.useEffect)(function(){var e;return r({paneId:n,actions:null!==(e=i.current())&&void 0!==e?e:null}),function(){r({paneId:n,actions:null})}},[r,n,i].concat((0,o._)(t)))}function b(e){var t=(0,u.Z)(function(){return(0,d.kv)(v,function(t){return e?t[e]:{}})},[e]);return(0,h.Hg)(t)}function Z(){var e=(0,h.XD)(v);return(0,l.useCallback)(function(t){var n;return null!==(n=e()[t])&&void 0!==n?n:null},[e])}var w=(0,c.cn)(new Map),x=(0,c.cn)(null,function(e,t,n,r){t(w,function(e){var t=new Map(e);return null===r?t.delete(n):r&&t.set(n,r),t})});function C(){return(0,h.$X)(x)}function _(){var e,t,n=(e=(0,h.rF)(),(0,l.useCallback)(function(t){return e((0,d.kv)(v,function(e){return e[t]}))},[e]));return(0,l.useCallback)((t=(0,r._)(function(e){return(0,a.Jh)(this,function(t){return[2,new Promise(function(t){var r=n(e);if(r.current){t(r.current);return}var i=r.subscribe(function(e){e&&(t(e),i())})})]})}),function(e){return t.apply(this,arguments)}),[n])}var S=(0,c.cn)(new Map),E=(0,c.cn)(null,function(e,t,n){t(S,function(e){return(0,s.Uy)(e,function(e){null===n.focus?e.delete(n.paneId):e.set(n.paneId,n.focus)})})});function k(e){var t=document.activeElement;return!!e&&!!t&&e!==t&&e.contains(t)}function T(e,t){var n=(0,f.Z)(e),r=I(),a=(0,p.T3)(),c=(0,l.useRef)(!a),s=(0,h.$X)(E),u=(0,h.XD)(m.J1),d=(0,h.XD)(w),v=(0,i._)((0,l.useState)(null),2),g=v[0],y=v[1];return(0,l.useEffect)(function(){n.current&&y(n.current())},t?(0,o._)(t):[]),(0,l.useEffect)(function(){var e=function(e){u()===r&&e.target!==d().get(r)&&(c.current=!1)};return document.body.addEventListener("focus",e,!0),function(){document.body.removeEventListener("focus",e,!0)}},[u,d,r]),(0,l.useEffect)(function(){if(g){var e=function(){g.focus()};return c.current&&u()===r&&!k(d().get(r))&&e(),s({paneId:r,focus:e}),function(){s({paneId:r,focus:null})}}},[g,s,r,u,d,a]),y}function R(){var e=(0,h.XD)(S),t=(0,h.XD)(w);return(0,u.Z)(function(){return function(n){var r=e().get(n),i=t().get(n);if(!k(i)){if(r){r();return}null==i||i.focus()}}},[e,t])}var D=(0,l.createContext)(null);function I(){var e=(0,l.useContext)(D);if(!e)throw Error("Expected pane id in context");return e}var G=D.Provider},34581:function(e,t,n){n.d(t,{AA:function(){return U},J1:function(){return h},Np:function(){return D},Vu:function(){return G},WU:function(){return p},Xo:function(){return A},ex:function(){return N},fg:function(){return L},gv:function(){return B},jY:function(){return P},nC:function(){return I}});var r=n(32477),i=n(21289),o=n(52902),a=n(7730),l=n.n(a),c=n(64461),s=n(43429),u=n(90234),d=n(68956),f=n(50199),h=(0,u.cn)(null);function p(){return(0,d.XD)(h)}var m=(0,u.cn)(new Map),v=(0,u.cn)([]),g=(0,u.cn)(null,function(e,t,n){t(m,function(e){return(0,c.Uy)(e,function(e){var t=e.get(n.paneId),r=Date.now();if(!t){e.set(n.paneId,{panes:[n.pane],lastActiveAt:r});return}var i=t.panes[t.panes.length-1];t.lastActiveAt=r,l()(n.pane,i)||t.panes.push(n.pane)})}),t(h,n.paneId)}),y=(0,u.cn)(null,function(e,t,n){var r=e(h),i=e(m).get(n);i&&t(v,function(e){return(0,c.Uy)(e,function(e){e.push(i.panes)})}),t(m,function(e){return(0,c.Uy)(e,function(e){e.delete(n)})}),r===n&&t(h,null)}),b=(0,u.cn)(null,function(e,t,n){t(m,function(e){return(0,c.Uy)(e,function(e){var t=e.get(n);t&&(t.lastActiveAt=Date.now())})}),t(h,n)}),Z=(0,u.cn)(null,function(e,t){t(h,null)}),w=(0,u.cn)(function(e){return(0,i._)(e(m).values()).sort(function(e,t){return t.lastActiveAt-e.lastActiveAt}).map(function(e){return e.panes})}),x=(0,u.cn)(function(e){var t=e(m),n=[];return t.forEach(function(e,t){var r=e.panes[e.panes.length-1];r&&n.push([t,r,e.lastActiveAt])}),n.sort(function(e,t){return e[2]-t[2]})}),C=(0,u.cn)(function(e){var t=[],n=!0,i=!1,a=void 0;try{for(var l,c=e(x)[Symbol.iterator]();!(n=(l=c.next()).done);n=!0){var s=(0,r._)(l.value,2),u=(s[0],s[1]),d=(0,o.Ur)(u)?u.data.path:null;d&&t.push(d)}}catch(e){i=!0,a=e}finally{try{n||null==c.return||c.return()}finally{if(i)throw a}}return t}),_=(0,u.cn)(function(e){var t=[],n=!0,r=!1,o=void 0;try{for(var a,l=e(w)[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var c=a.value;c.length<=1||t.push.apply(t,(0,i._)(c.slice(0,-1)))}}catch(e){r=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw o}}var s=!0,u=!1,d=void 0;try{for(var f,h=e(v)[Symbol.iterator]();!(s=(f=h.next()).done);s=!0){var p=f.value;t.push.apply(t,(0,i._)(p))}}catch(e){u=!0,d=e}finally{try{s||null==h.return||h.return()}finally{if(u)throw d}}return t}),S=(0,u.cn)(null,function(e,t){var n=e(v).flat().pop();return t(v,function(e){return(0,c.Uy)(e,function(e){var t=e.pop();t&&t.pop()})}),n}),E=(0,u.cn)(function(e){var t=[],n=!0,r=!1,i=void 0;try{for(var a,l=e(_)[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var c=a.value,s=(0,o.Ur)(c)?c.data.path:null;s&&t.push(s)}}catch(e){r=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw i}}return t}),k=(0,u.cn)(function(e){return(0,i._)(e(C)).concat((0,i._)(e(E)))}),T=(0,u.cn)(function(e){var t,n=e(h);if(!n)return null;var r=e(m).get(n);return r&&null!==(t=r.panes[r.panes.length-1])&&void 0!==t?t:null}),R=(0,u.cn)(function(e){var t=e(T);return t&&(0,o.Ur)(t)&&t.data.path||null});function D(e,t){var n=(0,d.$X)(g),r=(0,d.$X)(y);(0,s.useEffect)(function(){n({paneId:e,pane:t})},[n,e,t]),(0,s.useEffect)(function(){return function(){r(e)}},[r,e])}function I(){return(0,d.XD)(x)}function G(){return(0,d.Hg)(C)}function B(){return(0,d.$X)(S)}function A(){return(0,d.$X)(b)}function P(){return(0,d.$X)(Z)}function N(){return(0,d.Hg)(R)}function U(){return(0,d.Hg)(k)}function L(){var e=(0,d.yL)(C);return(0,f.Z)(function(){return function(t){return new Promise(function(n,r){var i=e.subscribe(function(e){e.includes(t)||(i(),n())})})}},[e])}},95684:function(e,t,n){n.d(t,{mK:function(){return s},qm:function(){return l},xx:function(){return c}});var r=n(90234),i=n(43429),o=n(68956),a=(0,r.cn)(!1);function l(){return(0,o.Hg)(a)}function c(){var e=(0,o.$X)(a);return(0,i.useCallback)(function(){return e(!0)},[e])}function s(e){var t=(0,o.$X)(a),n=(0,i.useRef)(!1);(0,i.useEffect)(function(){n.current||(n.current=!0,t(e))},[t,e])}},39327:function(e,t,n){n.d(t,{a9:function(){return a},kM:function(){return l}});var r=n(90234),i=n(68956),o=(0,r.cn)(null);function a(){return(0,i.$X)(o)}function l(){return(0,i.Hg)(o)}},20798:function(e,t,n){n.d(t,{OO:function(){return r},Uw:function(){return i},vw:function(){return o}});var r="replit-repltuned-v1-5-3b",i={"replit-repltuned-v1-5-3b":{},"replit-v1-5-3b":{}},o=new Set(Object.keys(i))},50682:function(e,t,n){n.d(t,{J9:function(){return v},LK:function(){return g}});var r,i,o,a,l=n(34142),c=n(87682),s=n(32672),u=n.n(s),d=n(17676),f=n.n(d),h=n(48900),p="https://api.github.com",m=(r=(0,l._)(function(e){var t,n,r;return(0,c.Jh)(this,function(i){switch(i.label){case 0:return t=e.repoNameWithOwner,n=e.accessToken,[4,u()("".concat(p,"/repos/").concat(t,"/contents"),{method:"GET",headers:n?{Authorization:"Bearer ".concat(n)}:{}})];case 1:if(404!==(r=i.sent()).status)return[3,3];return[4,r.json()];case 2:if("This repository is empty."===i.sent().message)return[2,{error:"This repository is empty."}];throw new d.AbortError(r.statusText);case 3:if(!r.ok)return[2,{error:"This repository could not be accessed, try again later"}];return[4,r.json().then(function(e){return e.map(function(e){return{path:e.path,type:e.type}})})];case 4:return[2,i.sent()]}})}),function(e){return r.apply(this,arguments)}),v=(i=(0,l._)(function(e){var t,n;return(0,c.Jh)(this,function(r){switch(r.label){case 0:return t=e.repoNameWithOwner,n=e.accessToken,[4,f()(function(){return m({repoNameWithOwner:t,accessToken:n})},{retries:3,minTimeout:200,onFailedAttempt:function(e){e.retriesLeft||h.$e(function(e){e.setTag("github-import",!0),h.Tb(Error("Could not fetch repository files."))})}})];case 1:return[2,r.sent()]}})}),function(e){return i.apply(this,arguments)}),g=(o=(0,l._)(function(e){var t,n,r,i;return(0,c.Jh)(this,function(o){switch(o.label){case 0:return t=e.repoNameWithOwner,n=e.filePath,r=e.accessToken,[4,u()("".concat(p,"/repos/").concat(t,"/contents/").concat(n),{method:"GET",headers:r?{Authorization:"Bearer ".concat(r)}:{}})];case 1:if(!(i=o.sent()).ok)return[2,{error:"This file could not be accessed, try again later"}];return[4,i.json()];case 2:return[2,o.sent()]}})}),function(e){return o.apply(this,arguments)}),y=(a=(0,l._)(function(e){var t,n,r;return(0,c.Jh)(this,function(i){switch(i.label){case 0:return t=e.repoNameWithOwner,n=e.accessToken,[4,u()("".concat(p,"/repos/").concat(t,"/languages"),{method:"GET",headers:n?{Authorization:"Bearer ".concat(n)}:{}})];case 1:if(404===(r=i.sent()).status)throw new d.AbortError(r.statusText);if(!r.ok)return[3,3];return[4,r.json()];case 2:return[2,i.sent()];case 3:return[2,{error:"Error fetching repository languages."}]}})}),function(e){return a.apply(this,arguments)});(0,l._)(function(e){var t,n;return(0,c.Jh)(this,function(r){switch(r.label){case 0:return t=e.repoNameWithOwner,n=e.accessToken,[4,f()(function(){return y({repoNameWithOwner:t,accessToken:n})},{retries:3,minTimeout:200,onFailedAttempt:function(e){e.retriesLeft||h.$e(function(e){e.setTag("github-import",!0),h.Tb(Error("Could not fetch repository language."))})}})];case 1:return[2,r.sent()]}})}),(0,l._)(function(e){var t,n,r;return(0,c.Jh)(this,function(i){switch(i.label){case 0:t=e.repoNameWithOwner,n=e.accessToken,i.label=1;case 1:return i.trys.push([1,4,,5]),[4,u()("".concat(p,"/repos/").concat(t),{method:"GET",headers:n?{Authorization:"Bearer ".concat(n)}:{}})];case 2:if(404===(r=i.sent()).status)return[2,!0];if(!r.ok)return[2,!1];return[4,r.json()];case 3:if(i.sent().private)return[2,!0];return[2,!1];case 4:return i.sent(),[2,!1];case 5:return[2]}})})},70078:function(e,t,n){function r(e){return 15113696===e}function i(e){return 777914===e||r(e)||3944703===e}n.d(t,{v4:function(){return r},xm:function(){return i}})},94376:function(e,t,n){n.d(t,{I:function(){return i},z:function(){return r}});var r=100,i=250},95597:function(e,t,n){n.d(t,{F5:function(){return d},Hk:function(){return s},Kd:function(){return u},N$:function(){return c},Ob:function(){return l},Vl:function(){return a},Vt:function(){return r},ig:function(){return i},lF:function(){return o}});var r=/^([A-Za-z0-9_]{1,15})\/?$/,i=/^([%A-Za-z0-9]+|-)*\/?$/,o=/^([A-Za-z\d](?:[A-Za-z\d]|-){0,38})\/?$/,a=/^https:\/\/(www\.)?youtube\.com(\/(c|channel|user|@(\w)+))*(\/([A-Za-z0-9_-]+))*(\/?)$/,l=/^(.{2,32}#[0-9]{4})$|^([a-zA-Z0-9_.]{2,32})$/,c="https://twitter.com/",s="https://www.linkedin.com/in/",u="https://github.com/",d=/\/$/},44471:function(e,t,n){n.d(t,{Eg:function(){return m},UF:function(){return u},mD:function(){return l},r0:function(){return d},v:function(){return p},xi:function(){return h}});var r=n(45903),i=n(25e3),o=n(21289),a=n(39426);function l(e){return e.split(".").pop()}function c(e,t){return e.some(function(e){return e.path===t})}function s(e,t){var n=e.findIndex(function(e){return l(e.path)===l(t)});if(-1===n)return e;var a=(0,i._)((0,r._)({},e[n]),{path:t});return(0,o._)(e.slice(0,n)).concat([a],(0,o._)(e.slice(n+1)))}function u(e){var t=[];return e.forEach(function(e){var n=l(e.path),r=a.ZP.allSupportedByPopularity().find(function(e){return e.ext===n});r&&!t.includes(r.key)&&t.push(r.key)}),t}function d(e){var t=e.files,n=e.language,r=a.ZP.getMainFileName(null!=n?n:"python");if(!r)return t;var i=t;return c(t,r)||(i=s(i,r)),"html"!==n||c(t,"style.css")||(i=s(i,"style.css")),"html"!==n||c(t,"script.js")||(i=s(i,"script.js")),i}var f=["GoogleCloudPlatform","googleapis"];function h(e){return f.includes(e)}var p="b3294059-2b61-4b20-abde-f06b61a9a1b3",m="gcloud:v1-20230815-e6e4431"},1660:function(e,t,n){n.d(t,{Z:function(){return u}});var r,i,o=n(34142),a=n(70322),l=n(87682);(r=i||(i={})).CHANNEL_OPENED="CHANNEL_OPENED",r.OUTPUT_RECEIVED="OUTPUT_RECEIVED",r.STDERR_RECEIVED="STDERR_RECEIVED",r.STATE_CHANGED="STATE_CHANGED";var c=n(83493),s=n(58962);function u(e){var t,n=e.container,r=(0,c.ZP)(),u=null,d=!1;function f(){return(f=(0,o._)(function(){return(0,l.Jh)(this,function(e){if(d)throw Error("closed");return u?[2,u]:[2,new Promise(function(e){r.once(i.CHANNEL_OPENED,function(t){e(t)})})]})})).apply(this,arguments)}var h="",p="",m=n.openChannel({service:"exec"},function(e){var t=e.channel,n=!1;return t.onCommand(function(e){if(null!=e.output)h+=e.output,r.emit(i.OUTPUT_RECEIVED,e.output);else if(null!=e.stderr)p+=e.stderr,r.emit(i.STDERR_RECEIVED,e.stderr);else if(null!=e.state){if(!n){n=!0;return}r.emit(i.STATE_CHANGED,{state:e.state,outputBuffer:h,stderrBuffer:p}),e.state===s.api.State.Stopped&&(h="",p="")}}),u=t,r.emit(i.CHANNEL_OPENED,t),function(){u=null}});return{request:(t=(0,o._)(function(e){var t,n,r,i,o,c,u,d,h;return(0,l.Jh)(this,function(l){switch(l.label){case 0:return t=e.env,n=e.args,i=void 0===(r=e.lifecycle)?s.api.Exec.Lifecycle.BLOCKING:r,c=void 0!==(o=e.splitStderr)&&o,u=(0,a._)(e,["env","args","lifecycle","splitStderr"]),[4,function(){return f.apply(this,arguments)}()];case 1:return h=(d=l.sent()).request({exec:{env:t,args:n,lifecycle:i,splitStderr:c}}),i===s.api.Exec.Lifecycle.STDIN&&"stdin"in u&&(d.send({input:u.stdin}),d.send({inputClose:{}})),[2,h]}})}),function(e){return t.apply(this,arguments)}),onOutput:function(e){return r.on(i.OUTPUT_RECEIVED,e),function(){r.off(i.OUTPUT_RECEIVED,e)}},onStderr:function(e){return r.on(i.STDERR_RECEIVED,e),function(){r.off(i.STDERR_RECEIVED,e)}},onStateChanged:function(e){return r.on(i.STATE_CHANGED,e),function(){r.off(i.STATE_CHANGED,e)}},getStatus:function(){return u?u.status:"closed"},dispose:function(){d=!0,m(),u=null}}}}}]);
//# sourceMappingURL=7660-c391a2957c12f28d.js.map