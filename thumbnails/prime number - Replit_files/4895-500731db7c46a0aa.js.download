!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="b5f76c4a-1a8c-40df-a9e8-f79c96034fae",e._sentryDebugIdIdentifier="sentry-dbid-b5f76c4a-1a8c-40df-a9e8-f79c96034fae")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"d103cf55"};"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4895],{44788:function(e,t,n){n.d(t,{Z:function(){return l},c:function(){return r}});var r="https://twitter.com/intent/tweet";function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.text,n=e.url,l=e.hashtags,i=e.via,a=new URLSearchParams;t&&a.append("text",t),n&&a.append("url",n),l&&a.append("hashtags",l.join(",")),i&&a.append("via",i);var o=a.toString();return o.length>0?"".concat(r,"?").concat(o):r}},76673:function(e,t,n){n.d(t,{Z:function(){return r}});function r(e,t){var n=t.existing,r=t.getKey,l=new Map,i=!0,a=!1,o=void 0;try{for(var s,u=e[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value;l.set(r(c),c)}}catch(e){a=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}var d=new Set,p=[],h=!0,f=!1,g=void 0;try{for(var v,m=n[Symbol.iterator]();!(h=(v=m.next()).done);h=!0){var b=v.value,w=r(b),Z=l.get(w);Z&&(p.push(Z),d.add(w))}}catch(e){f=!0,g=e}finally{try{h||null==m.return||m.return()}finally{if(f)throw g}}var y=!0,_=!1,R=void 0;try{for(var x,C=e[Symbol.iterator]();!(y=(x=C.next()).done);y=!0){var G=x.value;d.has(r(G))||p.push(G)}}catch(e){_=!0,R=e}finally{try{y||null==C.return||C.return()}finally{if(_)throw R}}return p}},4895:function(e,t,n){n.d(t,{Z:function(){return t$}});var r,l,i=n(39698),a=n(8182),o=n(43429),s=n(56596),u=n(56353),c=n(29287),d=n(74833),p=n(88936),h=n(34142),f=n(45903),g=n(25e3),v=n(32477),m=n(87682),b=n(1498),w=n(37951),Z=n(38080),y=n(30983),_=n(20573),R=n(81799),x=n(40102),C=n(12874),G=n(49996),S=n(76819),T=n(23026),V=n(3194),I=n(92635),k=n(2543),B=n(3756),U=n.n(B),P=n(75582),E=n(93295),F=n(23982),D=n(77393);function W(){var e=(0,E._)(["\n  query ReplPublishInputRepl($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        ...PublishReplData\n      }\n    }\n  }\n  ","\n"]);return W=function(){return e},e}var X={},L=(0,F.Ps)(W(),u.FW),z=n(72310),H=n(71565),M=n(7444),N=n(72986);function A(){var e=(0,E._)(["\n  mutation UpdateReplUpdate($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        ...PublishReplData\n      }\n    }\n  }\n  ","\n"]);return A=function(){return e},e}var O={},j=(0,F.Ps)(A(),u.FW);function K(e){return e.message||"Something went wrong saving updates to your Repl"}function $(){var e=(0,E._)(["\n  mutation SetReplViewSettingsSetSettings($input: SetReplViewSettingsInput!) {\n    setReplViewSettings(input: $input) {\n      ... on ReplViewSettings {\n        id\n        repl {\n          id\n          ...PublishReplData\n        }\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return $=function(){return e},e}var J={},Y=(0,F.Ps)($(),u.FW);function q(e){var t,n,r,l,i,a,o;return e.error?e.error.message||"Something went wrong saving your Cover page":(null===(n=e.data)||void 0===n?void 0:null===(t=n.setReplViewSettings)||void 0===t?void 0:t.__typename)==="NotFoundError"||(null===(l=e.data)||void 0===l?void 0:null===(r=l.setReplViewSettings)||void 0===r?void 0:r.__typename)==="UnauthorizedError"||(null===(a=e.data)||void 0===a?void 0:null===(i=a.setReplViewSettings)||void 0===i?void 0:i.__typename)==="UserError"?e.data.setReplViewSettings.message:(null===(o=e.data)||void 0===o?void 0:o.setReplViewSettings)&&"ReplViewSettings"!==e.data.setReplViewSettings.__typename?"Something went wrong saving your Cover page":void 0}function Q(){var e=(0,E._)(["\n  mutation UseSetReplTagsSetTags($input: SetReplTagsInput!) {\n    setReplTags(input: $input) {\n      ... on Repl {\n        id\n        ...PublishReplData\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return Q=function(){return e},e}var ee={},et=(0,F.Ps)(Q(),u.FW);function en(e){var t,n,r,l,i,a,o;return e.error?e.error.message||"Something went wrong saving your Repl Tags":(null===(n=e.data)||void 0===n?void 0:null===(t=n.setReplTags)||void 0===t?void 0:t.__typename)==="NotFoundError"||(null===(l=e.data)||void 0===l?void 0:null===(r=l.setReplTags)||void 0===r?void 0:r.__typename)==="UnauthorizedError"||(null===(a=e.data)||void 0===a?void 0:null===(i=a.setReplTags)||void 0===i?void 0:i.__typename)==="UserError"?e.data.setReplTags.message:(null===(o=e.data)||void 0===o?void 0:o.setReplTags)&&"Repl"!==e.data.setReplTags.__typename?"Something went wrong posting your Repl":void 0}var er=n(69273),el=n(66555),ei=n(59868);function ea(e){return"repl_file"===e||"repl_image"===e}(r=l||(l={})).ReplFile="repl_file",r.ReplImage="repl_image";var eo=function(e){"use strict";(0,V._)(n,e);var t=(0,k._)(n);function n(){return(0,T._)(this,n),t.apply(this,arguments)}return n}((0,I._)(Error)),es=function(e){"use strict";(0,V._)(n,e);var t=(0,k._)(n);function n(){return(0,T._)(this,n),t.apply(this,arguments)}return n}((0,I._)(Error)),eu=function(e){"use strict";(0,V._)(n,e);var t=(0,k._)(n);function n(){return(0,T._)(this,n),t.apply(this,arguments)}return n}((0,I._)(Error));function ec(e){return e?e.length>60?{message:"Title should not be more than ".concat(60," characters")}:void 0:{message:"Give your Repl a title"}}function ed(e){return e?e.length>1e3?{message:"Description should not be more than ".concat(1e3," characters")}:void 0:{message:"What does this Repl do?"}}var ep=o.createContext(null),eh=function(e){var t=o.useContext(ep);if(!t)throw Error("usePublishField must be used within a PublishInputContext");return t["".concat(e,"Field")]},ef=function(){var e=o.useContext(ep);if(!e)throw Error("usePublishForm must be used within a PublishInputContext");return e},eg=n(21289),ev=n(64157),em=n(51384),eb=n(99656),ew=n(63130);function eZ(){var e=(0,E._)(["\n  fragment TagsComboboxTag on Tag {\n    id\n    isOfficial\n  }\n"]);return eZ=function(){return e},e}function ey(){var e=(0,E._)(["\n  query TagsCombobox($limit: Int, $search: String) {\n    tagGroups {\n      official(limit: $limit, search: $search) {\n        id\n        ...TagsComboboxTag\n      }\n      community(limit: $limit, search: $search) {\n        id\n        ...TagsComboboxTag\n      }\n    }\n  }\n  ","\n"]);return ey=function(){return e},e}var e_={},eR=(0,F.Ps)(eZ()),ex=(0,F.Ps)(ey(),eR),eC=n(35273),eG=n(6187),eS=n(76673),eT=/^[0-9a-zA-Z]+$/,eV=function(e){return e.id},eI=n(93496),ek=n(31366),eB=n(39082),eU=s.K.ul,eP=s.K.li;function eE(e){var t=e.children;return(0,a.tZ)(s.G,{css:[c.l0.px(8),c.l0.pt(8)],children:(0,a.tZ)(d.xv,{multiline:!1,css:[{textTransform:"uppercase"}],variant:"small",color:"dimmer",children:t})})}function eF(e){var t=e.highlighted,n=e.tag;return(0,a.tZ)(s.G,{css:[c.l0.rowWithGap(8),c.l0.p(8),t&&{backgroundColor:eI.gU.listItem["@media (hover: hover)"][":not([disabled])"][":not(textarea):active"].backgroundColor},{cursor:"pointer"}],children:(0,a.BX)(s.G,{css:[c.l0.flex.growAndShrink(1),c.l0.rowWithGap(4),c.l0.align.center],children:[(0,a.tZ)(d.xv,{multiline:!1,children:n.id}),n.isOfficial?(0,a.tZ)(eB.Z,{}):null]})})}var eD=o.memo(function(e){var t=e.getItemProps,n=e.highlightedIndex,r=e.data;return(0,a.tZ)(ek.Z,{css:[c.l0.minWidth(200)],children:r.sections.reduce(function(e,r){return e.sections.push((0,a.BX)(eP,{children:[(0,a.tZ)(eE,{children:r.title}),(0,a.tZ)(eU,{css:[c.l0.pt(4),c.l0.pb(8)],children:r.tags.map(function(r){var l=e.itemIndex++;return(0,a.tZ)(eP,(0,g._)((0,f._)({},t({item:r,index:l})),{children:(0,a.tZ)(eF,{tag:r,highlighted:n===l})}),r.id)})})]},r.title)),e},{sections:[],itemIndex:0}).sections})});eD.displayName="TagsMenu";var eW=s.K.div,eX=s.K.input,eL=(0,em.iv)([c.l0.fontSize(12),c.l0.pl(24),c.l0.pr(8),c.l0.py(4)]);function ez(){return(0,a.tZ)(d.xv,{multiline:!1,css:[c.l0.px(4),c.l0.flex.row,c.l0.align.center,c.l0.position.absolute,c.l0.height("100%"),c.l0.color.foregroundDefault,{top:0,left:4,pointerEvents:"none"}],children:(0,a.tZ)(eb.Z,{size:12})})}function eH(e){var t=e.text,n=e.children;return(0,a.BX)(Z.Tg,{elevated:!0,css:[c.l0.position.relative,c.l0.minWidth(30),c.l0.borderRadius(16),{border:"1px solid transparent","&:focus-within":{borderColor:c.TV.outlineDimmer,backgroundColor:"transparent"}}],children:[(0,a.tZ)(ez,{}),(0,a.tZ)(d.xv,{css:[{visibility:"hidden"},eL],multiline:!1,children:t}),n]})}function eM(e){var t,n,r,l,i,u,d,p,h,m,b,w,Z,y,_,R,x,C,G,S,T=(t=e.onRemove,n=e.onSelect,r=e.filter,l=e.inputValue,i=e.setInputValue,u=(0,eG.Z)(l,100),d=(0,M.Z)(n),C=(h=(p={search:u,filter:void 0===r?function(){return!0}:r}).search,m=p.filter,w=(b=(0,f._)({},e_,{variables:{limit:h?10:3,search:h}}),D.a(ex,b)).data,y=(Z=(0,v._)((0,o.useState)({official:[],community:[],newTag:[]}),2))[0],_=Z[1],R=(0,o.useMemo)(function(){if(w){var e=[],t=[],n=new Set,r=!0,l=!1,i=void 0;try{for(var a,o=w.tagGroups.official[Symbol.iterator]();!(r=(a=o.next()).done);r=!0){var s=a.value;n.add(s.id.toLowerCase()),m(s)&&e.push(s)}}catch(e){l=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(l)throw i}}var u=!0,c=!1,d=void 0;try{for(var p,f=w.tagGroups.community[Symbol.iterator]();!(u=(p=f.next()).done);u=!0){var g=p.value;n.add(g.id.toLowerCase()),m(g)&&t.push(g)}}catch(e){c=!0,d=e}finally{try{u||null==f.return||f.return()}finally{if(c)throw d}}var v=t.find(function(e){return e.id===h}),b=!h||v||n.has(h.toLowerCase())?void 0:{id:h,isOfficial:!1};return{official:e,community:t,newTag:b&&m(b)?[b]:[]}}},[w,m,h]),(0,o.useEffect)(function(){if(R){var e=R.official,t=R.community,n=R.newTag;_(function(r){return{official:(0,eS.Z)(e,{existing:r.official,getKey:eV}),community:(0,eS.Z)(t,{existing:r.community,getKey:eV}),newTag:n}})}},[R]),x={tagGroups:y,reset:function(){_({official:[],community:[],newTag:[]})}}).tagGroups,G=x.reset,S=(0,ew.Kb)({inputValue:l,items:(0,eg._)(C.official).concat((0,eg._)(C.community),(0,eg._)(C.newTag)),defaultHighlightedIndex:0,itemToString:function(e){return e?e.id:""},onSelectedItemChange:function(e){e.selectedItem&&(G(),i(""),S.reset(),S.openMenu())}}),(0,eC.Z)(function(){S.selectedItem&&d.current(S.selectedItem)},[S.selectedItem]),{tagGroups:C,combobox:S,onChange:function(e){var t=e.currentTarget.value;(!t||eT.test(t))&&!(t.length>30)&&i(t)},onKeyDown:function(e){""===l&&"Backspace"===e.key&&(e.preventDefault(),t())}}),V=T.combobox,I=T.tagGroups,k=T.onChange,B=T.onKeyDown,U=(0,o.useMemo)(function(){var e;return e=[],(I.official.length&&e.push({title:"Official Tags",tags:I.official}),I.community.length&&e.push({title:"Community Tags",tags:I.community}),I.newTag.length&&e.push({title:"Create new tag",tags:I.newTag}),0===e.length)?null:{type:"sections",sections:e}},[I]),P="Add tag";return(0,a.BX)(s.G,{children:[(0,a.tZ)(eW,(0,g._)((0,f._)({},V.getComboboxProps()),{css:[c.l0.flex.row],children:(0,a.tZ)(eH,{text:V.inputValue||P,children:(0,a.tZ)(eX,(0,f._)({css:[c.l0.coverContainer,eL,c.l0.color.foregroundDefault,{backgroundColor:"transparent","&::placeholder":c.l0.color.foregroundDefault,"&:focus::placeholder":c.l0.color.foregroundDimmest}]},V.getInputProps({placeholder:P,onChange:k,onKeyDown:B,onFocus:function(){V.openMenu()}})))})})),(0,a.tZ)(eW,(0,g._)((0,f._)({},V.getMenuProps()),{css:[c.l0.position.relative],children:U&&V.isOpen?(0,a.tZ)(eD,{getItemProps:V.getItemProps,highlightedIndex:V.highlightedIndex,data:U}):null}))]})}function eN(e){var t=e.tags,n=e.max,r=e.onAdd,l=e.onRemove,i=t.map(function(e){return e.id}),u=(0,v._)((0,o.useState)(""),2),d=u[0],p=u[1];return(0,a.BX)(s.G,{css:[c.l0.flex.row,c.l0.flex.wrap,{margin:"calc(-1 * ".concat(c.TV.space4,")")}],children:[t.map(function(e,t){return(0,a.tZ)(s.G,{css:[c.l0.m(4)],children:(0,a.tZ)(ev.g,{small:!0,tag:e,onClick:function(){return l(t)}})},e.id)}),t.length<(void 0===n?5:n)?(0,a.tZ)(s.G,{css:[c.l0.m(4)],children:(0,a.tZ)(eM,{onSelect:r,filter:function(e){return!i.includes(e.id.toLowerCase())},inputValue:d,setInputValue:p,onRemove:function(){var e=t.length-1;e>=0&&(p(t[e].id),l(e))}})}):null]})}var eA=function(){var e=eh("tags");return(0,a.BX)(s.G,{css:[c.l0.colWithGap(8)],children:[(0,a.tZ)(s.G,{css:[c.l0.colWithGap(4)],children:(0,a.tZ)(eN,{max:5,tags:e.value,onAdd:function(t){return e.setValue((0,eg._)(e.value).concat([t]))},onRemove:function(t){return e.setValue((0,eg._)(e.value.slice(0,t)).concat((0,eg._)(e.value.slice(t+1))))}})}),(0,a.BX)(s.G,{css:c.l0.rowWithGap(4),children:[(0,a.tZ)(d.xv,{color:"dimmer",variant:"small",multiline:!1,children:"Adding tags helps others find your Repl."}),(0,a.BX)(d.xv,{color:"dimmest",variant:"small",multiline:!1,children:[e.value.length,"/",5]})]})]})},eO=n(18836);function ej(){var e=(0,E._)(["\n  fragment PublishableReplSelectorRepl on Repl {\n    id\n    title\n    timeUpdated\n    url\n    slug\n    owner {\n      ... on User {\n        id\n        username\n        image\n      }\n      ... on Team {\n        id\n        username\n        image\n      }\n    }\n    iconUrl\n  }\n"]);return ej=function(){return e},e}function eK(){var e=(0,E._)(["\n  query PublishableReplSelector($search: String!) {\n    currentUser {\n      id\n      publishableReplSearch(search: $search) {\n        id\n        ...PublishableReplSelectorRepl\n      }\n    }\n  }\n  ","\n"]);return eK=function(){return e},e}var e$={},eJ=(0,F.Ps)(ej()),eY=(0,F.Ps)(eK(),eJ),eq=n(57526),eQ=n(2161),e0=n(82723),e1=n(42308),e2=n(13729),e4=s.K.div,e3=s.K.li,e8={searchValue:"",loading:!1,repls:[]};function e6(e,t){switch(t.type){case"data":var n,r=(null===(n=t.data.currentUser)||void 0===n?void 0:n.publishableReplSearch)||[];return(0,g._)((0,f._)({},e),{loading:!1,repls:(0,eS.Z)(r,{existing:e.repls,getKey:function(e){return e.id}})});case"loading":return(0,g._)((0,f._)({},e),{loading:!0});case"searchValue":return(0,g._)((0,f._)({},e),{searchValue:t.searchValue})}}function e5(e){var t;return e?"".concat(null===(t=e.owner)||void 0===t?void 0:t.username,"/").concat(e.title):""}function e9(e){var t,n=o.useRef(null);(0,e2.rf)(function(){var t;e.selectedRepl&&(null===(t=n.current)||void 0===t||t.blur())},[e.selectedRepl]);var r=(null===(t=e.selectedRepl)||void 0===t?void 0:t.iconUrl)&&e.inputValue&&e5(e.selectedRepl)===e.inputValue?(0,a.tZ)(s.G,{css:[c.l0.px(8),c.l0.center,{position:"absolute",top:0,left:0,height:"100%"}],children:(0,a.tZ)(eQ.ZP,{alt:e.selectedRepl.title,iconUrl:e.selectedRepl.iconUrl,size:16})}):null;return(0,a.BX)(s.G,{css:[{position:"relative"}],children:[(0,a.BX)(e4,(0,g._)((0,f._)({},e.getComboboxProps()),{css:{position:"relative"},children:[r,(0,a.tZ)(eO.II,(0,f._)({css:[c.l0.pr(32),r&&c.l0.pl(32)]},e.getInputProps({placeholder:"Search for a Repl",onFocus:e.onFocus,ref:n}))),(0,a.tZ)(s.G,{css:[c.l0.center,c.l0.px(8),{position:"absolute",top:0,right:0,height:"100%"}],children:e.loading&&e.isOpen?(0,a.tZ)(p.Z,{}):(0,a.tZ)(e0.Z,{})})]})),(0,a.tZ)(e4,(0,g._)((0,f._)({},e.getMenuProps()),{css:{position:"relative"},children:e.isOpen?(0,a.BX)(ek.Z,{children:[e.loading&&0===e.repls.length?(0,a.tZ)(e3,{css:[c.l0.center,c.l0.py(32)],children:(0,a.tZ)(p.Z,{})}):null,e.loading||0!==e.repls.length?null:(0,a.tZ)(e3,{css:[c.l0.center,c.l0.py(32)],children:(0,a.tZ)(d.xv,{color:"dimmer",variant:"small",multiline:!1,children:"No Repls found"})}),e.repls.map(function(t,n){return(0,a.tZ)(e3,(0,g._)((0,f._)({},e.getItemProps({item:t,index:n})),{children:(0,a.tZ)(e1.Z,{taller:!0,filter:"",title:e5(t),subtitle:(0,eq.F)(t.timeUpdated),selected:e.selectedRepl===t,highlighted:e.highlightedIndex===n,icon:t.iconUrl?(0,a.tZ)(eQ.ZP,{iconUrl:t.iconUrl,alt:t.title,size:16}):void 0})}),t.id)})]}):null}))]})}var e7=n(10981);function te(e){var t=e.error,n=e.dataCy;return t?(0,a.BX)(s.G,{css:[c.l0.rowWithGap(4),c.l0.align.center],children:[(0,a.tZ)(_.Z,{css:[c.l0.color.accentNegativeStronger]}),(0,a.tZ)(d.xv,{css:[c.l0.flex.growAndShrink(1),c.l0.color.accentNegativeStronger],dataCy:n,children:t.message})]}):null}var tt=s.K.label,tn=o.forwardRef(function(e,t){return(0,a.tZ)(tt,(0,g._)((0,f._)({},e),{ref:t,css:c.l0.color.foregroundDimmer}))}),tr=function(){var e,t,n,r,l,i,u,d=(0,e7.U)()("repl"),p=eh("replId"),h=eh("iconUrl"),m=(t=(e=(0,v._)((0,o.useReducer)(e6,e8),2))[0],n=e[1],i=(r={variables:{search:(0,eG.Z)(t.searchValue,200)},notifyOnNetworkStatusChange:!0,onCompleted:function(e){n({type:"data",data:e})}},l=(0,f._)({},e$,r),D.a(eY,l)).loading,(0,o.useEffect)(function(){i&&n({type:"loading"})},[i]),u=(0,o.useCallback)(function(e){return n({type:"searchValue",searchValue:e||""})},[]),{repls:t.repls,loading:t.loading,searchValue:t.searchValue,setSearchValue:u}),b=(0,ew.Kb)({id:d,items:m.repls,initialHighlightedIndex:-1,onInputValueChange:function(e){var t=e.inputValue;m.setSearchValue(t)},onSelectedItemChange:function(e){(null==e?void 0:e.selectedItem)&&(p.setValue(e.selectedItem.id),b.closeMenu())},itemToString:e5});return(0,a.BX)(s.G,{css:[c.l0.colWithGap(4)],children:[(0,a.tZ)(tn,{css:c.l0.color.foregroundDimmer,htmlFor:d,children:"Repl"}),(0,a.tZ)(e9,{getComboboxProps:b.getComboboxProps,getInputProps:b.getInputProps,getItemProps:b.getItemProps,getMenuProps:b.getMenuProps,isOpen:b.isOpen,highlightedIndex:b.highlightedIndex,inputValue:b.inputValue,selectedRepl:b.selectedItem?(0,g._)((0,f._)({},b.selectedItem),{iconUrl:h.value||b.selectedItem.iconUrl}):void 0,repls:m.repls,loading:m.loading,onFocus:function(e){b.selectedItem&&(e.preventDefault(),e.currentTarget.select(),m.setSearchValue("")),b.openMenu()}})]})},tl=function(){var e=(0,e7.U)(),t=e("replName"),n=e("replDescription"),r=ef(),l=r.replIdField,i=r.replTitleField,o=r.replDescriptionField,u=r.isSaving;return(0,a.BX)(s.G,{css:[c.l0.colWithGap(16),c.l0.flex.growAndShrink(1)],children:[!l.value||l.touched?(0,a.tZ)(tr,{}):null,(0,a.BX)(s.G,{css:[c.l0.colWithGap(4)],children:[(0,a.tZ)(s.G,{css:[c.l0.flex.row,c.l0.align.baseline,c.l0.justify.spaceBetween],children:(0,a.tZ)(tn,{css:[c.l0.color.foregroundDimmer,{lineHeight:c.TV.lineHeightSmall}],htmlFor:t,children:"Repl name"})}),i.value]}),(0,a.BX)(s.G,{css:[c.l0.colWithGap(4)],children:[(0,a.BX)(s.G,{css:[c.l0.flex.row,c.l0.align.baseline,c.l0.justify.spaceBetween],children:[(0,a.tZ)(tn,{css:[c.l0.color.foregroundDimmer,{lineHeight:c.TV.lineHeightSmall}],htmlFor:n,children:"Repl description"}),(0,a.BX)(d.xv,{multiline:!1,css:{color:o.value.length>1e3?c.TV.accentNegativeStronger:c.TV.foregroundDimmest},children:[o.value.length,"/",1e3]})]}),(0,a.tZ)(eO.B,{id:n,value:o.value,disabled:!l.value||u,onChange:function(e){o.setValue(e.currentTarget.value)},placeholder:"What does this Repl do?",css:[c.l0.minHeight(128),c.l0.maxHeight(256),{resize:"vertical"}],dataCy:"publish-form-repl-description-input"}),o.touched?(0,a.tZ)(te,{error:o.error,dataCy:"publish-form-repl-description-error"}):null]})]})},ti=n(85195),ta=function(e){var t=e.showPlayButton,n=e.children,r=e.active;return(0,a.BX)("div",{css:{position:"relative",aspectRatio:"".concat(268,"/").concat(164),overflow:"hidden"},children:[(0,a.tZ)("div",{css:{position:"absolute",top:"calc(".concat(18," / ").concat(164," * 100%)"),bottom:"calc(".concat(1," / ").concat(164," * 100%)"),left:"calc(".concat(1," / ").concat(268," * 100%)"),right:"calc(".concat(1," / ").concat(268," * 100%)"),borderBottomLeftRadius:4,borderBottomRightRadius:4,overflow:"hidden",backgroundColor:r?c.TV.accentPrimaryDimmest:void 0},children:n}),(0,a.BX)("svg",{viewBox:"0 0 268 164",fill:"none",xmlns:"http://www.w3.org/2000/svg",css:{position:"relative"},children:[(0,a.tZ)("rect",{width:"268",height:"17",fill:c.TV.backgroundDefault}),(0,a.tZ)("rect",{x:"241.5",y:"4.5",width:"22",height:"10",rx:"2",fill:c.TV.accentPositiveDimmer}),(0,a.tZ)("rect",{x:"228.5",y:"4.5",width:"10",height:"10",rx:"2",fill:c.TV.backgroundHighest}),(0,a.tZ)("rect",{x:"4.5",y:"4.5",width:"32",height:"10",rx:"2",fill:c.TV.backgroundHighest}),(0,a.tZ)("rect",{x:"1",y:"18",width:"266",height:"1",fill:r?c.TV.accentPrimaryDefault:c.TV.outlineDimmer}),t?(0,a.tZ)("path",{d:"M142.225 90.5642C142.565 90.7554 142.565 91.2446 142.225 91.4358L127.745 99.5809C127.412 99.7683 127 99.5275 127 99.1451L127 82.8549C127 82.4725 127.412 82.2317 127.745 82.4191L142.225 90.5642Z",fill:c.TV.white}):null,(0,a.tZ)("rect",{x:"1",y:"1",width:"266",height:"162",rx:"4",stroke:r?c.TV.accentPrimaryDefault:c.TV.outlineDimmer,strokeWidth:"1"})]})]})},to=n(43973),ts=function(e){var t=o.useRef(null);return{inputProps:{onChange:function(t){var n=t.target,r=n.validity,l=n.files;if(r.valid){var i=l?l[0]:null;i&&e(i)}},"aria-hidden":"true",ref:t,accept:to.W9.join(","),type:"file"},buttonProps:{onClick:function(){var e;return null===(e=t.current)||void 0===e?void 0:e.click()}},inputRef:t}},tu=function(e){var t=ts(e.onFile),n=t.inputProps,r=t.buttonProps;return(0,a.BX)(a.HY,{children:[(0,a.tZ)("input",(0,g._)((0,f._)({},n),{css:{display:"none"}})),e.children(r)]})},tc=n(66061),td=n(54843),tp=n(19659),th=s.K.ol,tf=s.K.li,tg=(0,em.iv)([c.l0.py(4),c.l0.borderRadius(8),{border:"1px solid ".concat(c.TV.outlineDimmest),borderRadius:c.TV.borderRadius8,backgroundColor:eI.vb.interactiveBackground,zIndex:c.n0,maxHeight:300,position:"absolute",overflowY:"auto",width:"100%",left:0,top:c.TV.space8,listStyle:"none"}]),tv={backgroundColor:eI.vb.interactiveBackgroundActive},tm={backgroundColor:c.TV.accentPrimaryDimmer},tb=(0,em.iv)([c.l0.p(8),{":not([disabled])":{cursor:"pointer",":hover":(0,f._)({},tv),":active":(0,f._)({},tm)}}]);function tw(e){var t,n,r,l,i,u,p,b,w,Z,y,_,R,x,C,G,S=e.fs,T=e.initiallySelectedFile,V=e.onFileSelect,I=e.onClear,k=o.useRef(null),B=(n=(t=(0,v._)(o.useState({isLoading:!0,error:null,files:[]}),2))[0],r=t[1],o.useEffect(function(){function e(){return(e=(0,h._)(function(){var e,t;return(0,m.Jh)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,S.listFiles()];case 1:if((e=n.sent()).error)throw Error(e.error);return r({isLoading:!1,error:null,files:(null!==(t=e.files)&&void 0!==t?t:[]).slice().sort(function(e,t){return e.localeCompare(t)}).map(function(e){return{file:e,pathDepth:(0,tp.U$)(e)}}).sort(function(e,t){return e.pathDepth-t.pathDepth}).map(function(e){return e.file})}),[3,3];case 2:return n.sent(),r({isLoading:!1,error:"Could not load files",files:[]}),[3,3];case 3:return[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[S]),(0,f._)({},n)),U=B.isLoading,P=B.files,E=B.error,F=(i=(l={files:P,inputRef:k,initiallySelectedFile:T}).files,u=l.inputRef,p=l.initiallySelectedFile,w=(b=(0,v._)(o.useState(!1),2))[0],Z=b[1],_=(y=(0,v._)(o.useState(i),2))[0],R=y[1],x=o.useCallback(function(e){return i.filter(function(t){return t.toLowerCase().includes(e.toLowerCase())})},[i]),C=(0,ew.Kb)({items:_,isOpen:w,initialInputValue:p,initialSelectedItem:_.find(function(e){return e===p}),onIsOpenChange:function(e){Z(!!e.isOpen)},onInputValueChange:function(e){var t;R(x(null!==(t=e.inputValue)&&void 0!==t?t:""))}}),G=o.useCallback(function(){var e;Z(!1),null===(e=u.current)||void 0===e||e.blur()},[u]),o.useEffect(function(){var e;R(x(null!==(e=C.inputValue)&&void 0!==e?e:""))},[i,x,C.inputValue]),o.useEffect(function(){C.selectedItem&&G()},[C.selectedItem,G]),(0,g._)((0,f._)({},C),{closeMenu:G,items:_})),D=(0,M.Z)(V);return o.useEffect(function(){F.selectedItem&&D.current(F.selectedItem)},[F.selectedItem,D]),(0,a.BX)(s.G,{children:[(0,a.tZ)(s.G,(0,g._)((0,f._)({},F.getComboboxProps({refKey:"innerRef"})),{css:[c.l0.position.relative],children:(0,a.tZ)(td.E,(0,g._)((0,f._)({},F.getInputProps({onFocus:F.openMenu,ref:k,refKey:"inputRef",disabled:U,placeholder:"Search your files"})),{onClear:function(){var e;F.reset(),null===(e=k.current)||void 0===e||e.focus(),I()},loading:U}))})),(0,a.BX)(s.G,(0,g._)((0,f._)({},F.getMenuProps({refKey:"innerRef"})),{css:[c.l0.position.relative],children:[E?(0,a.tZ)(s.G,{css:[c.l0.p(8)],children:(0,a.tZ)(d.xv,{multiline:!1,children:"Something went wrong loading your files. Please try again."})}):null,!E&&F.isOpen?(0,a.tZ)(th,{css:[tg],children:F.items.length>0?F.items.map(function(e,t){return(0,a.tZ)(tf,(0,g._)((0,f._)({css:[tb,F.highlightedIndex===t&&tv,e===F.selectedItem&&tm]},F.getItemProps({item:e,index:t,onClick:function(){F.closeMenu()}})),{children:(0,a.tZ)(d.xv,{multiline:!1,children:e})}),e)}):(0,a.tZ)(tf,{css:[c.l0.p(8)],children:(0,a.BX)(d.xv,{multiline:!1,children:['No files found for "',F.inputValue,'"']})})}):null]}))]})}var tZ=n(88205),ty=n(28099),t_=n(75245),tR=[{value:l.ReplImage,text:"Photo"},{value:l.ReplFile,text:"File"}],tx=function(e){var t,n=e.fs,r=(0,e7.U)(),i=r("coverPage"),o=ef(),u=o.selectedRepl,Z=o.coverFileField,y=o.coverUrlField,R=o.coverDefaultViewField,x=(0,v._)((0,t_.Z)((t=(0,h._)(function(e){var t;return(0,m.Jh)(this,function(n){switch(n.label){case 0:if(!(null==e?void 0:e.length)||!(t=e[0]).type.startsWith("image/"))return[2];return[4,S.uploadImage(t,tZ.N.ReplCoverImage)];case 1:return n.sent(),[2]}})}),function(e){return t.apply(this,arguments)})),2),C=x[0],G=x[1],S=(0,H.W)(y.setValue);return(0,a.BX)(s.G,(0,g._)((0,f._)({css:[c.l0.colWithGap(16)]},G),{children:[(0,a.BX)(s.G,{css:c.l0.colWithGap(12),children:[(0,a.tZ)(s.G,{css:[c.l0.rowWithGap(8)],children:(0,a.tZ)(ti.E,{tag:"fieldset",css:[c.l0.rowWithGap(24)],name:i,value:R.value,onChange:function(e){ea(e.target.value)&&R.setValue(e.target.value)},children:tR.map(function(e){return(0,a.BX)(s.G,{css:[c.l0.rowWithGap(8)],children:[(0,a.tZ)(ti.Y,{id:r(e.value),value:e.value}),(0,a.tZ)("label",{htmlFor:r(e.value),children:e.text})]},e.value)})})}),R.value===l.ReplImage&&(0,a.BX)(s.G,{css:[c.l0.colWithGap(4),c.l0.align.center],children:[(0,a.tZ)(tu,{onFile:function(e){return S.uploadImage(e,tZ.N.ReplCoverImage)},children:function(e){var t=e.onClick;return(0,a.tZ)(b.zx,{onClick:t,colorway:C?"primary":void 0,text:"Upload a cover photo",iconLeft:S.isLoading?(0,a.tZ)(p.Z,{}):(0,a.tZ)(tc.Z,{}),stretch:!0})}}),S.error?(0,a.tZ)(w.E,{colorway:"negative",icon:(0,a.tZ)(_.Z,{}),text:S.error}):null,(0,a.tZ)(d.xv,{variant:"small",color:"dimmer",children:"or drag and drop a photo here"})]}),R.value===l.ReplFile&&(0,a.BX)(s.G,{css:[c.l0.colWithGap(8)],children:[(0,a.tZ)(tw,{fs:n,initiallySelectedFile:Z.value,onFileSelect:Z.setValue,onClear:function(){return Z.setValue("")}},null==u?void 0:u.id),(0,a.tZ)(te,{error:Z.error})]})]}),R.value===l.ReplImage&&(0,a.BX)(ta,{active:C,showPlayButton:R.value===l.ReplImage&&!!y.value&&!S.isLoading,children:[R.value===l.ReplImage&&y.value?(0,a.tZ)(ty.y,{src:y.value,alt:"cover"}):null,S.isLoading?(0,a.tZ)(s.G,{css:[{position:"absolute",inset:0},c.l0.align.center,c.l0.justify.center],children:(0,a.tZ)(p.Z,{color:c.TV.white,size:24})}):null]})]}))},tC=(n(58719),function(){eh("iconUrl");var e=ef(),t=e.replIconInput,n=e.replIconUrl;return(0,a.BX)(s.G,{css:[c.l0.colWithGap(16),c.l0.align.center],children:[(0,a.BX)(s.G,{css:[c.l0.colWithGap(8)],children:[(0,a.BX)(s.G,{css:[c.l0.rowWithGap(8)],children:[(0,a.tZ)(tu,{onFile:function(e){return t.uploadImage(e,tZ.N.ReplIcon)},css:c.l0.backgroundColor.accentNegativeDefault,children:function(e){var t=e.onClick;return(0,a.tZ)(b.zx,{onClick:t,text:"Upload image",iconLeft:(0,a.tZ)(tc.Z,{}),css:[c.l0.backgroundColor.backgroundHigher],type:"button",stretch:!0})}}),null]}),t.error?(0,a.tZ)(s.G,{children:(0,a.tZ)(w.E,{icon:(0,a.tZ)(_.Z,{}),colorway:"negative",text:t.error,closable:!0,closeAction:t.clearError})}):null]}),(0,a.tZ)(eQ.LN,{alt:"icon",size:84,iconUrl:n,isLoading:!!t.previewUrl,css:[c.l0.backgroundColor.backgroundHigher]})]})}),tG=n(84800),tS=n(33829),tT=n(47001),tV=n(24418),tI=n(63009),tk=n(30173),tB=n(44161),tU=n(36032),tP=n(30084),tE=n(32377),tF=s.K.button,tD=function(){return(0,a.tZ)(s.G,{css:[c.l0.flex.row,c.l0.flex.grow(1),{borderTop:"1px solid ".concat(c.TV.outlineDimmest)}]})},tW=function(e){var t=e.isActive,n=e.isComplete,r=e.children,l=e.onClick,i=e.disabled;return(0,a.BX)(tF,{type:"button",css:[c.l0.reset.button,c.l0.position.relative,eI.gU.nofill,t&&c.l0.backgroundColor.backgroundHigher,c.l0.p(4),c.l0.borderRadius(4)],onClick:l,disabled:i,children:[(0,a.tZ)(d.xv,{variant:"small",multiline:!1,children:r}),n?(0,a.tZ)(tE.Z,{size:6,strokeWidth:6,color:c.TV.foregroundDimmer,css:[c.l0.position.absolute,{top:2,right:-2}]}):null]})},tX=n(60769),tL=n(70002),tz=n(44620),tH=function(){var e=eh("isTemplate"),t=(0,e7.U)()("templateCheckbox");return(0,a.BX)(s.G,{css:[c.l0.colWithGap(8)],children:[(0,a.BX)(s.G,{css:[c.l0.colWithGap(8)],children:[(0,a.BX)(s.G,{css:[c.l0.rowWithGap(8)],children:[(0,a.tZ)(tX.X,{id:t,checked:e.value,onChange:function(t){return e.setValue(t.target.checked)}}),(0,a.tZ)("label",{htmlFor:t,children:"Submit as Template for Review"})]}),(0,a.tZ)(te,{error:e.error})]}),(0,a.tZ)(d.xv,{variant:"small",color:"dimmer",children:"This is a good option for Repls meant as starting points for future work."}),(0,a.tZ)(d.xv,{variant:"small",color:"dimmer",children:"The Replit team will review your Template before it is live on the Templates page."}),(0,a.tZ)(s.G,{css:[c.l0.align.start],children:(0,a.tZ)(tL.Z,{href:"https://docs.replit.com/programming-ide/how-to-make-a-replit-template",target:"_blank",text:"What makes a good Template?",iconRight:(0,a.tZ)(tz.Z,{}),variant:"outlined",size:"small"})}),(0,a.tZ)(s.G,{css:[c.l0.pt(16)],children:(0,a.BX)(d.xv,{children:["Please make sure your Repl abides by the"," ",(0,a.tZ)("a",{href:"https://blog.replit.com/community-standards",target:"_blank",children:"Replit community rules and guidelines"})," ","before publishing."]})})]})},tM=n(48459),tN=s.K.form,tA=function(e){var t=e.user,n=ef(),r=n.selectedRepl,l=n.replTitleField,o=n.replDescriptionField,u=n.replIconUrl,h=n.tagsField,v=n.isTemplateField;return(0,a.BX)(Z.Tg,{background:"root",css:[(0,i._)({},(0,G.et)("tabletMin"),{display:"flex"}),c.l0.flex.growAndShrink(1),c.l0.p(16),c.l0.colWithGap(12),c.l0.align.center,c.l0.display.none],children:[(0,a.tZ)(d.xv,{multiline:!1,variant:"small",color:"dimmer",css:[c.l0.width("100%"),{fontWeight:c.TV.fontWeightMedium}],children:"Preview"}),(0,a.BX)(s.G,{css:[c.l0.width("100%"),c.l0.maxWidth(432),c.l0.position.relative],children:[(0,a.tZ)(s.G,{css:{position:"absolute",zIndex:2,inset:0,boxShadow:"inset 0 48px 24px -24px "+c.TV.backgroundRoot+", inset 0 -48px 24px -24px "+c.TV.backgroundRoot}}),(0,a.BX)(s.G,{css:[c.l0.height(416),c.l0.colWithGap(24),c.l0.justify.center,c.l0.overflow("hidden"),c.l0.backgroundColor.backgroundRoot],children:[(0,a.tZ)(S.O,{}),r&&u?(0,a.tZ)(S.Z,{post:{user:t,repl:(0,g._)((0,f._)({},r),{title:l.value,iconUrl:u,tags:h.value,description:o.value,isTemplate:v.value})}}):(0,a.tZ)(s.G,{css:[c.l0.flex.grow(1),c.l0.align.center,c.l0.justify.center],children:(0,a.tZ)(p.Z,{})}),(0,a.tZ)(S.O,{})]})]})]})},tO=["Basics","Tags","Icon","Cover page","Publishing"];function tj(e){var t,n,r,u,g,S,T,V,I,k,B,E,F,W,A,$,Q,eh,ef,eg,ev,em,eb,ew=e.replId,eZ=e.currentUser,ey=e.source,e_=function(e){var t,n,r,l,i,a,s,u,c=(0,z.Y)(e.replId||null,function(e){return e?null:{message:"Select a Repl to share"}}),d=(t={variables:{id:c.value||""},skip:!c.value},n=(0,f._)({},X,t),D.a(L,n)),p=(null===(r=d.data)||void 0===r?void 0:r.repl.__typename)==="Repl"?d.data.repl:null,g=!!(null==p?void 0:p.publishedAs),b=(0,z.Y)("",ec),w=(0,z.Y)("",ed),Z=(0,z.Y)(null,function(){return null}),y=(0,z.Y)("repl_image",function(){return null}),_=(0,z.Y)(null,function(){return null}),R=(0,z.Y)("",e.fileValidator),x=(0,z.Y)([],function(){return null}),C=(0,M.Z)(p),G=(0,z.Y)(!1,function(e){var t=C.current;return e&&(null==t?void 0:t.lastPublishedAt)?{message:"This Repl has already been published. Please unpublish before publishing as a Template."}:e||(null==t?void 0:t.publishedAs)!==P.O2.Template?void 0:{message:"This Repl has already been published as a Template. Please unpublish before publishing as a Repl."}}),S=function(){var e,t=(0,v._)((e=(0,f._)({},J,void 0),N.D(Y,e)),2),n=t[0],r=t[1];function l(){return(l=(0,h._)(function(e){var t;return(0,m.Jh)(this,function(l){switch(l.label){case 0:if(r.loading)return[2,{data:null,error:null}];l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n({variables:{input:e}})];case 2:return[2,{data:(t=l.sent()).data,error:q(t)}];case 3:return l.sent(),[2,{data:null,error:"Something went wrong saving your Cover page"}];case 4:return[2]}})})).apply(this,arguments)}return{data:r.data,loading:r.loading,error:q(r),setReplViewSettings:function(e){return l.apply(this,arguments)}}}(),T=function(){var e,t=(0,v._)((e=(0,f._)({},ee,void 0),N.D(et,e)),2),n=t[0],r=t[1];function l(){return(l=(0,h._)(function(e){var t;return(0,m.Jh)(this,function(l){switch(l.label){case 0:if(r.loading)return[2,{data:null,error:null}];l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n({variables:{input:e}})];case 2:return[2,{data:(t=l.sent()).data,error:en(t)}];case 3:return l.sent(),[2,{data:null,error:"Something went wrong saving your Repl Tags"}];case 4:return[2]}})})).apply(this,arguments)}return{data:r.data,loading:r.loading,error:en(r),setReplTags:function(e){return l.apply(this,arguments)}}}(),V=function(){var e,t=(0,v._)((e=(0,f._)({},O,void 0),N.D(j,e)),2),n=t[0],r=t[1];function l(){return(l=(0,h._)(function(e){return(0,m.Jh)(this,function(t){switch(t.label){case 0:if(r.loading)return[2,{data:null,error:null}];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,n({variables:{input:e}})];case 2:return[2,{data:t.sent().data,error:null}];case 3:return[2,{data:null,error:K(t.sent())}];case 4:return[2]}})})).apply(this,arguments)}return{data:r.data,loading:r.loading,error:r.error&&K(r.error),updateRepl:function(e){return l.apply(this,arguments)}}}(),I=(0,er.O)(),k=(0,el.r)(),B=(null==p?void 0:null===(l=p.replViewSettings)||void 0===l?void 0:l.defaultView)&&ea(p.replViewSettings.defaultView)?p.replViewSettings.defaultView:"repl_image",E=(0,M.Z)(b.setValue),F=(0,M.Z)(w.setValue),W=(0,M.Z)(x.setValue),A=(0,M.Z)(Z.setValue),$=(0,M.Z)(_.setValue),Q=(0,M.Z)(y.setValue),ep=(0,M.Z)(R.setValue),eh=(0,M.Z)(G.setValue);(0,o.useEffect)(function(){var e,t,n,r;p&&(eh.current("Template"===p.publishedAs),Q.current(B),ep.current(null!==(t=null===(e=p.replViewSettings)||void 0===e?void 0:e.replFile)&&void 0!==t?t:""),E.current(p.isRenamed?p.title:"",{preventTouch:!0}),F.current(null!==(n=p.description)&&void 0!==n?n:"",{preventTouch:!0}),W.current(p.tags),A.current(p.iconUrl.endsWith(".svg")?null:p.iconUrl),$.current(null!==(r=p.imageUrl)&&void 0!==r?r:null))},[p,$,A,W,E,F,B,Q,ep,eh]);var ef=(0,H.W)(Z.setValue),eg=ef.previewUrl||Z.value||(null==p?void 0:p.iconUrl)||(null==p?void 0:p.templateInfo.iconUrl),ev=null!==(u=null===(s=[c,b,w,Z,y,_,x,R,G].filter(function(e){return(e!==R||"repl_file"===y.value)&&e.error}))||void 0===s?void 0:null===(a=s[0])||void 0===a?void 0:null===(i=a.error)||void 0===i?void 0:i.message)&&void 0!==u?u:null;function em(){return(em=(0,h._)(function(){var e,t,n,r,l,i,a,o,s,u,c;return(0,m.Jh)(this,function(d){switch(d.label){case 0:if(!p)throw new eo("Missing repl");if(t=p.title!==b.value,n=p.description!==w.value,r=p.iconUrl!==Z.value,l="repl_image"===y.value&&p.imageUrl!==_.value,i=R.value&&"repl_file"===y.value&&(null===(e=p.replViewSettings)||void 0===e?void 0:e.replFile)!==R.value,a=y.value&&B!==y.value,o=!U()(p.tags,x.value),!(t||n||r))return[3,2];if(b.error||w.error||Z.error)throw new eo;return[4,V.updateRepl({id:p.id,title:t?b.value:void 0,description:n?w.value:void 0,iconUrl:r?Z.value:void 0})];case 1:if((s=d.sent()).error)throw new es(s.error);d.label=2;case 2:if(!(a||l||i))return[3,4];if("repl_image"===y.value&&_.error||"repl_file"===y.value&&R.error)throw new eo;return[4,S.setReplViewSettings({replId:p.id,defaultView:"repl_image"===y.value?P.bV.ReplImage:P.bV.ReplFile,replImage:l?_.value:void 0,replFile:i?R.value:void 0})];case 3:if((u=d.sent()).error)throw new es(u.error);d.label=4;case 4:if(!o)return[3,6];if(x.error)throw new eo;return[4,T.setReplTags({replId:p.id,tags:x.value.map(function(e){return e.id})})];case 5:if((c=d.sent()).error)throw new es(c.error);d.label=6;case 6:return[2]}})})).apply(this,arguments)}function eb(){return(eb=(0,h._)(function(){var t,n;return(0,m.Jh)(this,function(r){switch(r.label){case 0:if(!p)throw new eo("Missing repl");if(ev)throw new eo(null!=ev?ev:"Something went wrong");if(!G.value)return[3,2];return[4,k.createDeployment({input:{replId:p.id,description:w.value,iconUrl:eg||p.iconUrl}})];case 1:if((t=r.sent()).error)throw new eu(t.error);return(0,ei.j)(ei.U3.POST_MADE,{source:e.source,replType:"template_repl",title:b.value,description:w.value,tags:x.value.map(function(e){return e.id}),defaultView:y.value}),[2];case 2:return[4,I.publish({input:{replId:p.id}})];case 3:if((n=r.sent()).error)throw new eu(n.error);return(0,ei.j)(ei.U3.POST_MADE,{source:e.source,replType:"regular_repl",title:b.value,description:w.value,tags:x.value.map(function(e){return e.id}),defaultView:y.value}),[2]}})})).apply(this,arguments)}var ew=V.loading||S.loading||T.loading,eZ=V.error||S.error||T.error,ey=I.loading||k.loading,e_=I.error||k.error;return{selectedRepl:p,isReplLoading:d.loading,replLoadingError:d.error,replIdField:c,replTitleField:b,replDescriptionField:w,iconUrlField:Z,coverDefaultViewField:y,coverUrlField:_,coverFileField:R,tagsField:x,isTemplateField:G,replIconInput:ef,replIconUrl:eg,inputError:ev,save:function(){return em.apply(this,arguments)},isSaving:ew,savingError:eZ,publish:function(){return eb.apply(this,arguments)},isPublishing:ey,publishingError:e_,isPublished:g}}({replId:ew,fileValidator:(t=(0,h._)(function(e){var t;return(0,m.Jh)(this,function(n){switch(n.label){case 0:if(!eM)return[2,{message:"Could not get file"}];if(!e)return[2,{message:"File path cannot be blank"}];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,eM.stat(e)];case 2:if(!(t=n.sent()).exists||t.type!==tP.Tv.File)return[2,{message:"File does not exist"}];return[3,4];case 3:return n.sent(),[2,{message:"Could not get file"}];case 4:return[2]}})}),function(e){return t.apply(this,arguments)}),source:ey}),eR=e_.selectedRepl,ex=e_.isReplLoading,eC=e_.replLoadingError,eG=e_.replIdField,eS=e_.replTitleField,eT=e_.replDescriptionField,eV=e_.iconUrlField,eI=e_.tagsField,ek=e_.coverDefaultViewField,eB=e_.coverUrlField,eU=e_.coverFileField,eP=e_.isTemplateField,eE=e_.save,eF=e_.isSaving,eD=e_.savingError,eW=e_.publish,eX=e_.isPublishing,eL=e_.publishingError,ez=e_.isPublished,eH=(r=(n={repl:eR,currentUser:eZ}).repl,u=n.currentUser,S=(g=(0,v._)((0,tI.qg)(),2))[0],T=g[1],V=(0,tI.ic)(),k=(I=(0,v._)(o.useState(function(){var e,t,n;return e=(0,tT.ZP)({onUnrecoverableError:(0,tB.Z)({throwBsod:T,origin:"Publish: services/onUnrecoverableError"})}),t=(0,tS.Z)({container:e}),n=(0,tV.Z)({container:e,fs:t}),{container:e,fs:t,dotReplit:n}}),1)[0]).container,B=I.fs,E=I.dotReplit,W=(F=(0,v._)(o.useState(function(){return k.getConnectionState()===tT.em.CONNECTED}),2))[0],A=F[1],$=(0,tG.b)(r?{repl:r,currentUser:u}:null),Q=(0,tk.S)(),o.useEffect(function(){if(r&&$&&k.getConnectionState()===tT.em.DISCONNECTED)return k.connect({context:$,getMinimumRetryDelayMs:Q}),function(){return k.close()}},[r,k,$]),o.useEffect(function(){return k.onConnectionStateChanged(function(e){A(e===tT.em.CONNECTED)})},[k]),{isConnected:W,container:k,fs:B,dotReplit:E,bsodId:null==S?void 0:S.eventId,devClearBsod:function(){return V()}}),eM=eH.fs,eN=eH.dotReplit,eO=eH.bsodId,ej=(0,v._)(o.useState(0),2),eK=ej[0],e$=ej[1],eJ=tO[eK],eY=eK===tO.length-1,eq=(0,v._)(o.useState({show:!1,isUpdate:!1}),2),eQ=eq[0],e0=eq[1],e1=(0,v._)(o.useState(function(){return Array(tO.length).fill(!1)}),2),e2=e1[0],e4=e1[1],e3=o.useCallback(function(e,t){e2[e]=t,e4(e2)},[e2]);o.useEffect(function(){e_.replTitleField.value&&e_.replDescriptionField.value?e3(0,!0):e3(0,!1),e_.tagsField.value.length>0?e3(1,!0):e3(1,!1),e_.iconUrlField.value?e3(2,!0):e3(2,!1),e_.coverDefaultViewField.value===l.ReplImage&&e_.coverUrlField.value||e_.coverDefaultViewField.value===l.ReplFile&&e_.coverFileField.value?e3(3,!0):e3(3,!1)},[e2,e_,e3]);var e8=(ef=(eh=(0,v._)(o.useState({isLoading:!0,error:null,entryPoint:null}),2))[0],eg=eh[1],o.useEffect(function(){function e(){return(e=(0,h._)(function(){var e,t,n;return(0,m.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,eN.getConfig()];case 1:if((t=r.sent()).error)throw Error(t.errorMessage);return eg({isLoading:!1,error:null,entryPoint:null!==(n=null==t?void 0:null===(e=t.config)||void 0===e?void 0:e.entrypoint)&&void 0!==n?n:null}),[3,3];case 2:return r.sent(),eg({isLoading:!1,error:"Could not load .replit config",entryPoint:null}),[3,3];case 3:return[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[eN]),(0,f._)({},ef));o.useEffect(function(){e8.isLoading||!e8.entryPoint||eU.value||eU.setValue(e8.entryPoint)},[e8.isLoading,e8.entryPoint,eU]);var e6=(0,v._)(o.useState(!1),2),e5=e6[0],e9=e6[1];o.useEffect(function(){e5||ew&&(ex||ez)||(e9(!0),(0,ei.j)(ei.U3.PUBLISH_SELECTED,{source:ey}))},[e5,ey,ew,ex,ez]);var e7=(0,M.Z)(!!((null==eR?void 0:eR.publishedAs)||(null==eR?void 0:eR.lastPublishedAt))),te=(0,M.Z)(eJ);if(o.useEffect(function(){return function(){e7.current||(0,ei.j)(ei.U3.PUBLISH_FLOW_EXITED,{source:ey,lastSectionVisited:te.current})}},[ey,e7,te]),eO)return(0,a.tZ)(tU.Z,{});if(eQ.show&&eR)return(0,a.tZ)(tM.q,{repl:eR,isUpdate:eQ.isUpdate});var tt={Basics:{hasError:!!(eG.error||eS.error||eT.error),isValid:(0,h._)(function(){return(0,m.Jh)(this,function(e){switch(e.label){case 0:return[4,Promise.all([eG.validate(),eS.validate(),eT.validate()])];case 1:return[2,e.sent().every(function(e){return!e})]}})})},Tags:{hasError:!!eI.error,isValid:(0,h._)(function(){return(0,m.Jh)(this,function(e){switch(e.label){case 0:return[4,eI.validate()];case 1:return[2,!e.sent()]}})})},Icon:{hasError:!!eV.error,isValid:(0,h._)(function(){return(0,m.Jh)(this,function(e){switch(e.label){case 0:return[4,eV.validate()];case 1:return[2,!e.sent()]}})})},"Cover page":{hasError:!!(ek.value===l.ReplImage?eB.error:eU.error),isValid:(0,h._)(function(){var e;return(0,m.Jh)(this,function(t){switch(t.label){case 0:if(ek.value!==l.ReplImage)return[3,2];return[4,eB.validate()];case 1:return e=!t.sent(),[3,4];case 2:return[4,eU.validate()];case 3:e=!t.sent(),t.label=4;case 4:return[2,e]}})})},Publishing:{hasError:!!eP.error,isValid:(0,h._)(function(){return(0,m.Jh)(this,function(e){switch(e.label){case 0:return[4,eP.validate()];case 1:return[2,!e.sent()]}})})}},tn=tt[eJ].hasError,tr=tt[eJ].isValid,ti=null!==(eb=tO.find(function(e){return tt[e].hasError}))&&void 0!==eb?eb:null,ta=null;eR?eC||eD||eL?ta="Something went wrong - please try again":tn&&(ta="Please fill out the the form"):ta="Please select a Repl";var to=!!(!eR||tn||eC||ex||eF||eX),ts=!!eP.value,tu=(ev=(0,h._)(function(e){var t;return(0,m.Jh)(this,function(n){switch(n.label){case 0:if(t=to)return[3,2];return[4,tr()];case 1:t=!n.sent(),n.label=2;case 2:if(t)return[2];n.label=3;case 3:return n.trys.push([3,5,,6]),e$(e),[4,eE()];case 4:return n.sent(),[3,6];case 5:return n.sent(),[2];case 6:return[2]}})}),function(e){return ev.apply(this,arguments)}),tc=eK>0;return(0,a.tZ)(ep.Provider,{value:e_,children:(0,a.BX)(Z.Tg,{css:[c.l0.borderRadius(8),c.l0.flex.row,c.l0.overflow("hidden"),(0,i._)({},(0,G.et)("tabletMax"),{minWidth:850})],background:"default",dataCy:"publish-form-container",children:[(0,a.BX)(s.G,{css:[c.l0.colWithGap(12),c.l0.p(16),c.l0.minWidth(320),c.l0.flex.growAndShrink(1),(0,i._)({},(0,G.et)("tabletMin"),{maxWidth:320})],children:[(0,a.tZ)(d.xv,{variant:"subheadBig",multiline:!1,children:ez?"Edit Publish Settings":"Publish ".concat(ew?"this":"a"," Repl")}),(0,a.BX)(tN,{onSubmit:(em=(0,h._)(function(e){var t,n,r,l,i,a;return(0,m.Jh)(this,function(o){switch(o.label){case 0:if(e.preventDefault(),!eY)return[3,13];t=!0,n=!1,r=void 0,o.label=1;case 1:o.trys.push([1,6,7,8]),l=tO[Symbol.iterator](),o.label=2;case 2:if(t=(i=l.next()).done)return[3,5];return[4,tt[i.value].isValid()];case 3:if(!o.sent())return[2];o.label=4;case 4:return t=!0,[3,2];case 5:return[3,8];case 6:return a=o.sent(),n=!0,r=a,[3,8];case 7:try{t||null==l.return||l.return()}finally{if(n)throw r}return[7];case 8:if(ez)return[3,10];return[4,eW()];case 9:return o.sent(),e0({show:!0,isUpdate:!1}),[3,12];case 10:return[4,eE()];case 11:o.sent(),e0({show:!0,isUpdate:!0}),o.label=12;case 12:return[3,14];case 13:tu(eK+1),o.label=14;case 14:return[2]}})}),function(e){return em.apply(this,arguments)}),css:[c.l0.colWithGap(16),c.l0.flex.growAndShrink(1)],children:[(0,a.tZ)(s.G,{css:[c.l0.rowWithGap(4),c.l0.align.center],children:tO.map(function(e,t){return(0,a.BX)(o.Fragment,{children:[0!==t&&(0,a.tZ)(tD,{}),(0,a.tZ)(tW,{isActive:eK===t,isComplete:e2[t],onClick:function(){return tu(t)},disabled:to,children:e})]},e)})}),(0,a.BX)(s.G,{css:c.l0.flex.growAndShrink(1),children:["Basics"===eJ&&(0,a.tZ)(tl,{}),"Tags"===eJ&&(0,a.tZ)(eA,{}),"Icon"===eJ&&(0,a.tZ)(tC,{}),"Cover page"===eJ&&(0,a.tZ)(tx,{fs:eM}),"Publishing"===eJ&&(0,a.tZ)(tH,{})]}),(0,a.BX)(s.G,{children:[eY&&ti&&ti!==eJ?(0,a.tZ)(w.E,{colorway:"negative",icon:(0,a.tZ)(_.Z,{}),text:"Please fix error in ".concat(ti," section")}):null,eD?(0,a.tZ)(w.E,{colorway:"negative",icon:(0,a.tZ)(_.Z,{}),text:eD}):null,eL?(0,a.tZ)(w.E,{colorway:"negative",icon:(0,a.tZ)(_.Z,{}),text:eL}):null]}),(0,a.BX)(s.G,{css:[c.l0.rowWithGap(8),c.l0.align.center,tc?c.l0.justify.spaceBetween:c.l0.justify.end],children:[tc?(0,a.tZ)(b.zx,{type:"button",iconLeft:(0,a.tZ)(x.Z,{}),disabled:to,onClick:function(){return tu(eK-1)},text:"Back"}):null,eF?(0,a.tZ)(s.G,{css:[c.l0.rowWithGap(4),c.l0.color.foregroundDimmer],children:(0,a.tZ)(p.Z,{})}):null,(0,a.BX)(y.u,{tooltip:ta,placement:"bottom",isDisabled:!ta,children:[!eY&&(0,a.tZ)(b.zx,{type:"submit",colorway:"primary",iconLeft:(0,a.tZ)(C.Z,{}),disabled:to,text:"Next",dataCy:"publish-form-next-button"}),eY&&!ez?(0,a.tZ)(b.zx,{type:"submit",colorway:"primary",css:[{boxShadow:"0px 0px 16px 0px ".concat(c.TV.accentPrimaryDimmer," !important")}],iconLeft:(0,a.tZ)(R.Z,{}),disabled:!!(to||ti),text:eX?ts?"Submitting...":"Publishing...":ts?"Submit Template":"Publish to Community",dataCy:"publish-form-publish-button"}):null,eY&&ez?(0,a.tZ)(b.zx,{type:"submit",colorway:"primary",iconLeft:(0,a.tZ)(R.Z,{}),disabled:!!(to||ti),text:eF?"Saving...":"Save"}):null]})]})]})]}),(0,a.tZ)(tA,{user:eZ})]})})}var tK=n(29479);function t$(e){var t,n,r=e.replId,l=e.source,o=(0,u.NH)(),h=(null===(n=o.data)||void 0===n?void 0:null===(t=n.currentUser)||void 0===t?void 0:t.__typename)==="CurrentUser"?o.data.currentUser:null;return o.loading?(0,a.tZ)(s.G,{css:[c.l0.center,c.l0.p(32),c.l0.width(512),(0,i._)({},"@media (max-width: ".concat(tK.j.tabletMin,"px)"),[{width:"100%"}])],children:(0,a.tZ)(p.Z,{})}):o.error||!h?(0,a.tZ)(s.G,{css:[c.l0.center,c.l0.p(32)],children:(0,a.tZ)(d.xv,{multiline:!1,children:"Something went wrong, please try again."})}):(0,a.tZ)(tj,{source:l,replId:r,currentUser:h})}},76819:function(e,t,n){n.d(t,{O:function(){return x},Z:function(){return _}});var r=n(45903),l=n(25e3),i=n(21289),a=n(8182);n(43429);var o=n(36010),s=n.n(o),u=n(51384),c=n(74833),d=n(38080),p=n(56596),h=n(29287),f=n(96345),g=n(4618),v=n(2161),m=n(25770),b=n(77187),w=n(79378),Z=p.K.a,y=(0,u.iv)({"::after":{content:'""',position:"absolute",top:0,right:0,bottom:0,left:0,display:"block",zIndex:1}});function _(e){var t=e.post,n=t.repl,i=t.user,o=n.isTemplate?"Template":"Repl";return(0,a.BX)(p.G,{css:h.l0.colWithGap(8),children:[(0,a.BX)(p.G,{css:[h.l0.flex.row,h.l0.align.center,h.l0.justify.spaceBetween],children:[(0,a.tZ)(p.G,{css:[h.l0.flex.row,h.l0.align.center],children:(0,a.BX)(p.G,{css:[h.l0.rowWithGap(8),h.l0.align.center],children:[(0,a.tZ)(w.q,{size:24,username:i.username,src:i.image}),(0,a.BX)(p.G,{css:h.l0.rowWithGap(4),children:[(0,a.tZ)(c.xv,{multiline:!1,children:i.username}),(0,a.BX)(c.xv,{color:"dimmest",multiline:!1,children:[" ","published a ",o]})]})]})}),(0,a.tZ)(b.Z,{size:12})]}),(0,a.BX)(d.Tg,{css:[h.l0.borderRadius(8),h.l0.colWithGap(8),h.l0.p(8),h.l0.position.relative,{border:"1px solid "+h.TV.outlineDimmest}],children:[(0,a.tZ)(p.G,{css:[h.l0.colWithGap(16)],children:(0,a.tZ)(p.G,{css:[h.l0.rowWithGap(16),h.l0.justify.spaceBetween],children:(0,a.BX)(p.G,{css:[h.l0.rowWithGap(8),h.l0.align.start,h.l0.flex.growAndShrink(1)],children:[(0,a.tZ)(v.ZP,{iconUrl:n.iconUrl,alt:n.title,size:84,css:[h.l0.backgroundColor.backgroundHigher]}),(0,a.BX)(p.G,{css:[h.l0.flex.growAndShrink(1),h.l0.colWithGap(4)],children:[(0,a.BX)(p.G,{css:[h.l0.flex.row],children:[(0,a.tZ)(s(),(0,l._)((0,r._)({legacyBehavior:!0,passHref:!0},(0,m.j3)(n)),{children:(0,a.tZ)(Z,{css:[{color:"inherit"},y,h.l0.flex.growAndShrink(1),h.l0.minWidth(0)],onClick:function(e){return e.preventDefault()},children:(0,a.tZ)(c.xv,{variant:"subheadBig",multiline:!1,children:n.title})})})),n.isTemplate?(0,a.tZ)(R,{}):null]}),n.description?(0,a.tZ)(c.xv,{color:"dimmer",maxLines:2,multiline:!1,children:n.description}):null]})]})})}),(0,a.BX)(p.G,{css:[h.l0.rowWithGap(8),h.l0.justify.spaceBetween,h.l0.minHeight(24)],children:[(0,a.tZ)(f.Z,{repl:{id:n.id,publicForkCount:0,likeCount:0,commentCount:0}}),(0,a.tZ)(p.G,{css:[h.l0.position.relative,{zIndex:1},h.l0.flex.shrink(1)],children:(0,a.tZ)(g.Vs,{tags:n.tags,onTagClick:function(e){return e.preventDefault()}})})]})]})]})}var R=function(){return(0,a.tZ)("span",{css:[h.l0.display.inlineFlex,h.l0.align.center,h.l0.height(24),h.l0.px(8),h.l0.borderRadius(16),h.l0.backgroundColor.yellowDimmest,h.l0.color.yellowStrongest,h.l0.justify.center,h.l0.ml(8),{fontSize:h.TV.fontSizeSmall,lineHeight:h.TV.fontSizeSmall}],children:"Template"})},x=function(){return(0,a.BX)(p.G,{css:[h.l0.colWithGap(8),{opacity:.5}],children:[(0,a.BX)(p.G,{css:[h.l0.flex.row,h.l0.align.center,h.l0.flex.grow(1),h.l0.justify.spaceBetween],children:[(0,a.BX)(p.G,{css:[h.l0.rowWithGap(8),h.l0.align.center],children:[(0,a.tZ)("span",{css:[h.l0.backgroundColor.backgroundHigher,h.l0.width(24),h.l0.height(24),h.l0.borderRadius(16)]}),(0,a.tZ)("span",{css:[h.l0.backgroundColor.backgroundHigher,h.l0.width(126),h.l0.height(12),h.l0.borderRadius(4)]})]}),(0,a.tZ)("span",{css:[h.l0.backgroundColor.backgroundHigher,h.l0.width(12),h.l0.height(12),h.l0.borderRadius(8)]})]}),(0,a.BX)(p.G,{css:[h.l0.backgroundColor.backgroundDefault,h.l0.width("100%"),h.l0.height(132),h.l0.borderRadius(8),h.l0.colWithGap(8),h.l0.p(8)],children:[(0,a.BX)(p.G,{css:h.l0.rowWithGap(8),children:[(0,a.tZ)("span",{css:[h.l0.backgroundColor.backgroundHigher,h.l0.height(84),h.l0.width(84),h.l0.borderRadius(4)]}),(0,a.BX)(p.G,{css:[h.l0.colWithGap(12),h.l0.pt(4),h.l0.flex.grow(1)],children:[(0,a.tZ)("span",{css:[h.l0.backgroundColor.backgroundHigher,h.l0.width(80),h.l0.height(16),h.l0.borderRadius(4)]}),(0,a.BX)(p.G,{css:h.l0.colWithGap(8),children:[(0,a.tZ)("span",{css:[h.l0.backgroundColor.backgroundHigher,h.l0.width("100%"),h.l0.height(12),h.l0.borderRadius(4)]}),(0,a.tZ)("span",{css:[h.l0.backgroundColor.backgroundHigher,h.l0.width("80%"),h.l0.height(12),h.l0.borderRadius(4)]})]})]})]}),(0,a.BX)(p.G,{css:[h.l0.flex.row,h.l0.flex.grow(1),h.l0.align.center,h.l0.justify.spaceBetween],children:[(0,a.tZ)(p.G,{css:h.l0.rowWithGap(16),children:(0,i._)([,,,]).map(function(e,t){return(0,a.BX)(p.G,{css:[h.l0.rowWithGap(4),h.l0.align.center],children:[(0,a.tZ)("span",{css:[h.l0.backgroundColor.backgroundHigher,h.l0.width(12),h.l0.height(12),h.l0.borderRadius(8)]}),(0,a.tZ)("span",{css:[h.l0.backgroundColor.backgroundHigher,h.l0.width(16),h.l0.height(8),h.l0.borderRadius(2)]})]},t)})}),(0,a.tZ)(p.G,{css:h.l0.rowWithGap(4),children:(0,i._)([,,]).map(function(e,t){return(0,a.tZ)("span",{css:[h.l0.backgroundColor.backgroundHigher,h.l0.width(48),h.l0.height(24),h.l0.borderRadius(16)]},t)})})]})]})]})}},48459:function(e,t,n){n.d(t,{q:function(){return S}});var r=n(39698),l=n(45903),i=n(25e3),a=n(32477),o=n(8182),s=n(43429),u=n(38080),c=n(56596),d=n(74833),p=n(30983),h=n(29287),f=n(15146),g=n(70002),v=n(75582),m=n(36010),b=n.n(m),w=n(25770),Z=n(10041),y=n(5344),_=n(90409),R=n(12874),x=n(44788),C=n(29479),G=function(e){var t=e.url,n=e.successMessageDurationMs,r=void 0===n?1500:n,l=(0,a._)(s.useState(!1),2),i=l[0],u=l[1],c=s.useRef(null),d=function(){u(!0),c.current=setTimeout(function(){u(!1)},r)};return s.useEffect(function(){return function(){c.current&&clearTimeout(c.current)}},[]),(0,o.tZ)(p.u,{isOpen:i,placement:"bottom",tooltip:i?"Copied!":"Copy link",delay:"none",children:(0,o.tZ)(f.hU,{alt:"Copy link",tooltipHidden:!1,onClick:function(){t&&((0,Z.Z)(t),d())},children:(0,o.tZ)(y.Z,{})})})},S=function(e){var t=e.repl,n=e.isUpdate,a=(0,w.j3)(t),s=t.url?(0,w.QB)(t):"",p=t.publishedAs===v.O2.Template,f=(0,x.Z)({text:"Check out what I just published on Replit: ".concat(t.title),url:s});return(0,o.BX)(u.Tg,{background:"default",css:[h.l0.borderRadius(8),h.l0.overflow("hidden"),h.l0.colWithGap(16),h.l0.width(510),h.l0.p(16),h.l0.flex.growAndShrink(1),(0,r._)({},"@media (max-width: ".concat(C.j.tabletMin,"px)"),[{width:"100%"}])],dataCy:"published-repl-share-info-container",children:[(0,o.BX)(c.G,{css:[h.l0.colWithGap(16)],children:[(0,o.BX)(d.xv,{variant:"subheadBig",multiline:!1,children:[p?"Template":"Repl"," ",n?"updated":"published","!"]})," ",(0,o.BX)(c.G,{css:[h.l0.colWithGap(4)],children:[(0,o.tZ)(d.xv,{variant:"small",css:[h.l0.color.foregroundDimmer],multiline:!1,children:"Cover page link"}),(0,o.BX)(c.G,{css:[h.l0.rowWithGap(4),h.l0.align.center],children:[(0,o.tZ)(b(),(0,i._)((0,l._)({legacyBehavior:!0},a),{css:[h.l0.flex.growAndShrink(1)],children:(0,o.tZ)("a",{css:[{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}],children:s})})),(0,o.tZ)(G,{url:s})]})]})]}),(0,o.BX)(c.G,{css:[h.l0.rowWithGap(12),h.l0.justify.end,(0,r._)({alignItems:"flex-end"},h.BC.max("mobileMax"),[h.l0.colWithGap(8),{width:"100%",">*":{width:"100%"}}])],children:[(0,o.tZ)(g.Z,{prefetch:!1,href:f,iconLeft:(0,o.tZ)(_.Z,{}),text:"Share to Twitter",target:"_blank",css:[(0,r._)({},h.BC.max("mobileMax"),[h.l0.mr(0)])]}),(0,o.tZ)(g.Z,{iconRight:(0,o.tZ)(R.Z,{}),text:p?"Go to Templates":"Go to Community",href:p?{pathname:"/templates/templates"}:{pathname:"/postsFeed",query:{order:"new"}},as:p?"/templates":"/community/all"})]})]})}},66555:function(e,t,n){n.d(t,{r:function(){return b}});var r=n(34142),l=n(32477),i=n(87682),a=n(45903),o=n(93295),s=n(23982),u=n(56353),c=n(72986);function d(){var e=(0,o._)(["\n  mutation CreateTemplateReleaseCreateDeployment(\n    $input: CreateReplDeployemntInput!\n  ) {\n    createReplDeployment(input: $input) {\n      ... on Repl {\n        id\n        ...PublishReplData\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return d=function(){return e},e}function p(){var e=(0,o._)(["\n  mutation CreateTemplateReleaseCreateRelease($input: CreateReplReleaseInput!) {\n    createReplRelease(input: $input) {\n      ... on Repl {\n        id\n        ...PublishReplData\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return p=function(){return e},e}var h={},f=(0,s.Ps)(d(),u.FW),g=(0,s.Ps)(p(),u.FW),v="Something went wrong publishing your Template";function m(e){if(e.error)return e.error.message||v;if(e.data){if("createReplDeployment"in e.data){if("NotFoundError"===e.data.createReplDeployment.__typename||"UnauthorizedError"===e.data.createReplDeployment.__typename||"UserError"===e.data.createReplDeployment.__typename)return e.data.createReplDeployment.message;if("Repl"!==e.data.createReplDeployment.__typename)return v}if("createReplRelease"in e.data){if("NotFoundError"===e.data.createReplRelease.__typename||"UnauthorizedError"===e.data.createReplRelease.__typename||"UserError"===e.data.createReplRelease.__typename)return e.data.createReplRelease.message;if("Repl"!==e.data.createReplRelease.__typename)return v}}}function b(){var e,t,n,o,s=(0,l._)((e=(0,a._)({},h,void 0),c.D(f,e)),2),u=s[0],d=s[1],p=(0,l._)((t=(0,a._)({},h,void 0),c.D(g,t)),2),b=p[0],w=p[1];return{createRelease:(n=(0,r._)(function(e){var t,n;return(0,i.Jh)(this,function(r){switch(r.label){case 0:if(t=e.input,d.loading||w.loading)return[2,{data:null,error:null}];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,b({refetchQueries:["ReplEnvironmentHeader"],variables:{input:t}})];case 2:return[2,{data:(n=r.sent()).data,error:m(n)}];case 3:return r.sent(),[2,{data:null,error:v}];case 4:return[2]}})}),function(e){return n.apply(this,arguments)}),createDeployment:(o=(0,r._)(function(e){var t,n;return(0,i.Jh)(this,function(r){switch(r.label){case 0:if(t=e.input,d.loading||w.loading)return[2,{data:null,error:null}];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,u({variables:{input:t}})];case 2:return[2,{data:(n=r.sent()).data,error:m(n)}];case 3:return r.sent(),[2,{data:null,error:v}];case 4:return[2]}})}),function(e){return o.apply(this,arguments)}),data:d.data||w.data,loading:d.loading||w.loading,error:m(d||w)}}},71565:function(e,t,n){n.d(t,{W:function(){return m},Z:function(){return b}});var r=n(45903),l=n(25e3),i=n(32477),a=n(8182),o=n(43429),s=n(2161),u=n(52924),c=n(88936),d=n(85805),p=n(56596),h=n(38080),f=n(6620),g=n(29287),v=n(43973);function m(e){var t=(0,i._)((0,o.useState)(null),2),n=t[0],a=t[1],s=(0,i._)((0,o.useState)(null),2),u=s[0],c=s[1],p=(0,d.Z)({onUpload:function(t){var n=t.url;a(null),e(n)},onUploadPreview:function(e){var t=e.dataUrl;c(null),a(t)},onError:function(e){a(null),c(e.message)}}),h=(0,o.useCallback)(function(){return c(null)},[]);return(0,l._)((0,r._)({},p),{error:u,clearError:h,previewUrl:n})}function b(e){var t=(0,o.useRef)(null),n=e.size||48;return(0,a.BX)(p.G,{css:[g.l0.position.relative,{cursor:"pointer","&:hover .surface":{opacity:.8},"&:hover .icon":{opacity:1}}],onClick:function(){var e;null===(e=t.current)||void 0===e||e.click()},"aria-label":e.value?"Change icon":"Upload an icon","data-microtip-position":"right",role:"tooltip",children:[e.value?(0,a.BX)(a.HY,{children:[(0,a.tZ)(s.ZP,{iconUrl:e.value,size:e.size,alt:"icon"}),(0,a.tZ)(h.Tg,{className:"surface",elevated:!0,css:[g.l0.borderRadius(8),g.l0.coverContainer,{opacity:e.isUploading?.8:0}]}),(0,a.tZ)(p.G,{className:"icon",css:[g.l0.coverContainer,g.l0.center,g.l0.color.accentPrimaryDefault,{overflow:"hidden",opacity:e.isUploading?1:0}],children:e.isUploading?(0,a.tZ)(c.Z,{}):(0,a.tZ)(u.Z,{})})]}):(0,a.tZ)(p.G,{css:[g.l0.center,g.l0.width(n),g.l0.height(n),g.l0.borderRadius(8),g.l0.color.foregroundDimmer,{border:"1px dashed "+g.TV.outlineDefault,"&:hover":{color:g.TV.accentPrimaryDefault,borderColor:g.TV.accentPrimaryDefault}}],children:(0,a.tZ)(f.Z,{})}),(0,a.tZ)("input",{css:[[g.l0.coverContainer,{opacity:0,zIndex:-1}]],ref:t,accept:v.W9.join(","),type:"file",onChange:function(t){var n=t.target,r=n.validity,l=n.files;if(r.valid){var i=l?l[0]:null;i&&e.onUpload(i)}}})]})}}}]);
//# sourceMappingURL=4895-500731db7c46a0aa.js.map